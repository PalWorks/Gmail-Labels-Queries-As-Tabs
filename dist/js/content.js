"use strict";
(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __typeError = (msg) => {
    throw TypeError(msg);
  };
  var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
  var __commonJS = (cb, mod) => function __require() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key) && key !== except)
          __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
    // If the importer is in node compatibility mode or this is not an ESM
    // file that has been converted to a CommonJS file using a Babel-
    // compatible transform (i.e. "__esModule" has not been set), then set
    // "default" to the CommonJS "module.exports" for node compatibility.
    isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
    mod
  ));
  var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  var __accessCheck = (obj, member, msg) => member.has(obj) || __typeError("Cannot " + msg);
  var __privateGet = (obj, member, getter) => (__accessCheck(obj, member, "read from private field"), getter ? getter.call(obj) : member.get(obj));
  var __privateAdd = (obj, member, value) => member.has(obj) ? __typeError("Cannot add the same private member more than once") : member instanceof WeakSet ? member.add(obj) : member.set(obj, value);
  var __privateSet = (obj, member, value, setter) => (__accessCheck(obj, member, "write to private field"), setter ? setter.call(obj, value) : member.set(obj, value), value);
  var __privateMethod = (obj, member, method) => (__accessCheck(obj, member, "access private method"), method);

  // node_modules/@inboxsdk/core/inboxsdk.js
  var require_inboxsdk = __commonJS({
    "node_modules/@inboxsdk/core/inboxsdk.js"(exports, module) {
      (function webpackUniversalModuleDefinition(root, factory) {
        if (typeof exports === "object" && typeof module === "object")
          module.exports = factory();
        else if (typeof define === "function" && define.amd)
          define([], factory);
        else if (typeof exports === "object")
          exports["InboxSDK"] = factory();
        else
          root["InboxSDK"] = factory();
      })(globalThis, () => {
        return (
          /******/
          (() => {
            var __webpack_modules__ = {
              /***/
              8587: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      ajax
                    )
                  });
                  var querystring_es3 = __webpack_require__2(6448);
                  var js = __webpack_require__2(8498);
                  ;
                  const r = /([?&])_=[^&]*/;
                  let nonce = Date.now() + Math.floor(Math.random() * Math.pow(2, 32));
                  function cachebustUrl(url) {
                    if (r.test(url)) {
                      return url.replace(r, "$1_=" + nonce++);
                    } else {
                      return url + (/\?/.test(url) ? "&" : "?") + "_=" + nonce++;
                    }
                  }
                  ;
                  const MAX_TIMEOUT = 64 * 1e3;
                  const MAX_RETRIES = 5;
                  const serversToIgnore = {};
                  function ajax(opts) {
                    if (!opts || typeof opts.url !== "string") {
                      throw new Error("URL must be given");
                    }
                    return new Promise(function(resolve, reject) {
                      const method = opts.method ? opts.method : "GET";
                      let url = opts.url;
                      let stringData = null;
                      if (opts.data) {
                        stringData = typeof opts.data === "string" ? opts.data : querystring_es3.stringify(opts.data);
                        if (method === "GET" || method === "HEAD") {
                          url += (/\?/.test(url) ? "&" : "?") + stringData;
                          stringData = null;
                        }
                      }
                      const canRetry = opts.canRetry != null ? opts.canRetry : method === "GET" || method === "HEAD";
                      const match = url.match(/(?:(?:[a-z]+:)?\/\/)?([^/]*)\//);
                      if (!match) {
                        throw new Error("Failed to match url");
                      }
                      const server = match[1];
                      if (Object.prototype.hasOwnProperty.call(serversToIgnore, server)) {
                        reject(new Error(`Server at ${url} has told us to stop connecting`));
                        return;
                      }
                      if (opts.cachebust) {
                        url = cachebustUrl(url);
                      }
                      const XMLHttpRequest = opts.XMLHttpRequest || window.XMLHttpRequest;
                      const xhr = new XMLHttpRequest();
                      Object.assign(xhr, opts.xhrFields);
                      xhr.onerror = function(event) {
                        if ((opts.retryNum || 0) < MAX_RETRIES) {
                          if (xhr.status === 502 || (xhr.status === 0 || xhr.status >= 500) && canRetry) {
                            resolve(_retry(opts));
                            return;
                          }
                        }
                        const err = Object.assign(new Error(`Failed to load ${url}`), {
                          event,
                          xhr,
                          status: xhr.status
                        });
                        if (xhr.status == 490) {
                          serversToIgnore[server] = true;
                        }
                        reject(err);
                      };
                      xhr.onload = function(event) {
                        if (xhr.status === 200) {
                          resolve({
                            xhr,
                            text: xhr.responseText
                          });
                        } else {
                          xhr.onerror(event);
                        }
                      };
                      xhr.open(method, url, true);
                      if (opts.headers) {
                        const {
                          headers
                        } = opts;
                        Object.keys(headers).forEach((name) => {
                          const value = headers[name];
                          xhr.setRequestHeader(name, value);
                        });
                      }
                      xhr.send(stringData);
                    });
                  }
                  function _retry(opts) {
                    const retryNum = (opts.retryNum || 0) + 1;
                    const retryTimeout = Math.min(Math.pow(2, retryNum) * 1e3, MAX_TIMEOUT);
                    return (0, js.A)(retryTimeout).then(() => ajax(Object.assign({}, opts, {
                      retryNum
                    })));
                  }
                })
              ),
              /***/
              1602: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    v: () => (
                      /* binding */
                      assert2
                    )
                    /* harmony export */
                  });
                  class AssertionError extends Error {
                    constructor(message) {
                      super(message ?? "assertion failed");
                      __publicField(this, "name", "AssertionError");
                    }
                  }
                  function assert2(condition, message) {
                    if (!!condition) {
                    } else {
                      throw new AssertionError(message);
                    }
                  }
                })
              ),
              /***/
              4158: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      censorHTMLstring
                    ),
                    /* harmony export */
                    Z: () => (
                      /* binding */
                      ATTRIBUTE_WHITELIST
                    )
                    /* harmony export */
                  });
                  const ATTRIBUTE_WHITELIST = /* @__PURE__ */ new Set([
                    // standard html props
                    "class",
                    "rel",
                    "target",
                    "type",
                    "tabindex",
                    "id",
                    "style",
                    "role",
                    "contenteditable",
                    "aria-expanded",
                    "aria-hidden",
                    "aria-disabled",
                    "aria-haspopup",
                    "aria-labelledby",
                    "aria-busy",
                    "aria-multiselectable",
                    "name",
                    // inbox props
                    "data-action-data",
                    "data-item-id",
                    "data-msg-id",
                    "data-map-id",
                    "g_editable",
                    "jsnamespace",
                    "jsaction"
                  ]);
                  function censorHTMLstring(html) {
                    return html.replace(/\s([^\s=]+)\s*=\s*"[^"]+"/g, (match, attr) => ATTRIBUTE_WHITELIST.has(attr) ? match : ` ${attr}="..."`).replace(/(^|>)([^<]+)/g, (match, start, text) => start + (text.trim().length ? "..." : ""));
                  }
                })
              ),
              /***/
              1443: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      censorHTMLtree
                    )
                    /* harmony export */
                  });
                  var auto_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(1812);
                  var auto_html__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(auto_html__WEBPACK_IMPORTED_MODULE_1__);
                  var _censorHTMLstring__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(4158);
                  function censorHTMLtree(target) {
                    const openers = [];
                    const closers = [];
                    let parent = target;
                    let lastIndex = 0;
                    while (parent) {
                      const attrHtml = Array.from(parent.attributes).map((_ref) => {
                        let {
                          name,
                          value
                        } = _ref;
                        return auto_html__WEBPACK_IMPORTED_MODULE_1___default()` ${name}="${_censorHTMLstring__WEBPACK_IMPORTED_MODULE_0__.Z.has(name) ? value : "..."}"`;
                      }).join("");
                      const headerElCount = lastIndex;
                      const footerElCount = parent.children.length - 1 - lastIndex;
                      const headers = target !== parent && headerElCount ? `[${headerElCount}]` : "";
                      const footers = target !== parent && footerElCount ? `[${footerElCount}]` : "";
                      openers.push(auto_html__WEBPACK_IMPORTED_MODULE_1___default()`<${parent.nodeName.toLowerCase()}${{
                        __html: attrHtml
                      }}>${headers}`);
                      closers.push(auto_html__WEBPACK_IMPORTED_MODULE_1___default()`${footers}</${parent.nodeName.toLowerCase()}>`);
                      if (parent.parentElement) {
                        lastIndex = Array.from(parent.parentElement.children).indexOf(parent);
                      }
                      parent = parent.parentElement;
                    }
                    return openers.reverse().join("") + (0, _censorHTMLstring__WEBPACK_IMPORTED_MODULE_0__.A)(target.innerHTML) + closers.join("");
                  }
                })
              ),
              /***/
              4531: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  const get = function get2(map, key) {
                    const value = map.get(key);
                    if (value === void 0) {
                      throw new Error("Key not found in map");
                    }
                    return value;
                  };
                  const __WEBPACK_DEFAULT_EXPORT__ = get;
                })
              ),
              /***/
              6305: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      htmlToText2
                    )
                  });
                  ;
                  function removeHtmlTags(html) {
                    return html.replace(/<[^>]*>?/g, "");
                  }
                  const removeHtmlTagsPolicy = globalThis.trustedTypes?.createPolicy("inboxSdk__removeHtmlTagsPolicy", {
                    createHTML(string) {
                      return removeHtmlTags(string);
                    }
                  }) ?? {
                    createHTML(string) {
                      return removeHtmlTags(string);
                    }
                  };
                  ;
                  function htmlToText2(html) {
                    const div = document.createElement("div");
                    div.innerHTML = removeHtmlTagsPolicy.createHTML(html);
                    return div.textContent;
                  }
                })
              ),
              /***/
              8130: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      isElementVisible
                    )
                    /* harmony export */
                  });
                  function isElementVisible(el) {
                    return el.offsetWidth > 0 || el.offsetHeight > 0;
                  }
                })
              ),
              /***/
              960: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      isNotNil
                    )
                    /* harmony export */
                  });
                  function isNotNil(value) {
                    return value != null;
                  }
                })
              ),
              /***/
              4782: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    Q: () => (
                      /* binding */
                      BUILD_VERSION
                    )
                    /* harmony export */
                  });
                  const BUILD_VERSION = "2.2.11-1764118012397-e51ed7952926d731";
                  if (false) {
                  }
                })
              ),
              /***/
              6280: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    Cs: () => (
                      /* binding */
                      ROUTE_TYPES
                    ),
                    /* harmony export */
                    Kc: () => (
                      /* binding */
                      NATIVE_LIST_ROUTE_IDS
                    ),
                    /* harmony export */
                    Vi: () => (
                      /* binding */
                      NATIVE_ROUTE_IDS
                    )
                    /* harmony export */
                  });
                  const NATIVE_ROUTE_IDS = Object.freeze({
                    INBOX: "inbox/:page",
                    ALL_MAIL: "all/:page",
                    SENT: "sent/:page",
                    STARRED: "starred/:page",
                    DRAFTS: "drafts/:page",
                    SNOOZED: "snoozed/:page",
                    DONE: "done",
                    REMINDERS: "reminders",
                    LABEL: "label/:labelName/:page",
                    TRASH: "trash/:page",
                    SPAM: "spam/:page",
                    IMPORTANT: "imp/:page",
                    SEARCH: "search/:query/:page",
                    THREAD: "inbox/:threadID",
                    CHATS: "chats/:page",
                    CHAT: "chats/:chatID",
                    CONTACTS: "contacts/:page",
                    CONTACT: "contacts/:contactID",
                    SETTINGS: "settings/:section",
                    /** DEC 2022 */
                    SCHEDULED: "scheduled",
                    /** FEB 2023 */
                    CHAT_WELCOME: "chat/welcome",
                    /** FEB 2023 */
                    CHAT_DM: "chat/dm/:chatID",
                    /** FEB 2023 */
                    SPACES_WELCOME: "rooms/welcome",
                    /** FEB 2023 */
                    SPACE: "chat/space/:spaceID",
                    /** FEB 2023 */
                    MEET: "calls",
                    ANY_LIST: "*"
                  });
                  const NATIVE_LIST_ROUTE_IDS = Object.freeze({
                    INBOX: NATIVE_ROUTE_IDS.INBOX,
                    ALL_MAIL: NATIVE_ROUTE_IDS.ALL_MAIL,
                    SENT: NATIVE_ROUTE_IDS.SENT,
                    STARRED: NATIVE_ROUTE_IDS.STARRED,
                    DRAFTS: NATIVE_ROUTE_IDS.DRAFTS,
                    SNOOZED: NATIVE_ROUTE_IDS.SNOOZED,
                    DONE: NATIVE_ROUTE_IDS.DONE,
                    REMINDERS: NATIVE_ROUTE_IDS.REMINDERS,
                    LABEL: NATIVE_ROUTE_IDS.LABEL,
                    TRASH: NATIVE_ROUTE_IDS.TRASH,
                    SPAM: NATIVE_ROUTE_IDS.SPAM,
                    IMPORTANT: NATIVE_ROUTE_IDS.IMPORTANT,
                    SEARCH: NATIVE_ROUTE_IDS.SEARCH,
                    ANY_LIST: NATIVE_ROUTE_IDS.ANY_LIST
                  });
                  const ROUTE_TYPES = Object.freeze({
                    LIST: "LIST",
                    THREAD: "THREAD",
                    SETTINGS: "SETTINGS",
                    CHAT: "CHAT",
                    SPACE: "SPACE",
                    MEET: "MEET",
                    CUSTOM: "CUSTOM",
                    UNKNOWN: "UNKNOWN"
                  });
                })
              ),
              /***/
              876: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var lodash_memoize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(9513);
                  var lodash_memoize__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(lodash_memoize__WEBPACK_IMPORTED_MODULE_0__);
                  var ud__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__2(7332);
                  var _driver_common_gmailAjax__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(5609);
                  var _gmail_response_processor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(1433);
                  var _lib_isStreakAppId__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__2(8579);
                  module2 = __webpack_require__2.hmd(module2);
                  async function uncachedGetDraftIDForMessageID(driver, messageID) {
                    const response = await (0, _driver_common_gmailAjax__WEBPACK_IMPORTED_MODULE_1__.A)({
                      method: "GET",
                      url: document.location.origin + document.location.pathname,
                      data: {
                        ui: "2",
                        ik: driver.getPageCommunicator().getIkValue(),
                        view: "cv",
                        th: messageID,
                        prf: "1",
                        nsc: "1",
                        mb: "0",
                        rt: "j",
                        search: "drafts"
                      }
                    });
                    try {
                      const draftID = (0, _gmail_response_processor__WEBPACK_IMPORTED_MODULE_2__.Vo)(response.text, messageID);
                      const debugData = {
                        responseText: response.text
                      };
                      return {
                        draftID,
                        debugData
                      };
                    } catch (err) {
                      if ((0, _lib_isStreakAppId__WEBPACK_IMPORTED_MODULE_3__.A)(driver.getAppId())) {
                        driver.getLogger().error(err, {
                          message: "failed to read draft ID",
                          messageID,
                          text: response.text
                        });
                      }
                      throw err;
                    }
                  }
                  const cachedGetDraftIDForMessageID = lodash_memoize__WEBPACK_IMPORTED_MODULE_0___default()(uncachedGetDraftIDForMessageID, (driver, messageID) => messageID);
                  function getDraftIDForMessageID(driver, messageID) {
                    let skipCache = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
                    if (skipCache) {
                      return uncachedGetDraftIDForMessageID(driver, messageID);
                    } else {
                      return cachedGetDraftIDForMessageID(driver, messageID);
                    }
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_4__.defn)(module2, getDraftIDForMessageID);
                })
              ),
              /***/
              7101: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var lodash_includes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(5193);
                  var lodash_includes__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(lodash_includes__WEBPACK_IMPORTED_MODULE_0__);
                  var ud__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(7332);
                  var _constants_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(6280);
                  var _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__2(4603);
                  module2 = __webpack_require__2.hmd(module2);
                  const gotoView = ud__WEBPACK_IMPORTED_MODULE_2__.defn(module2, async function gotoView2(gmailDriver, viewName, params) {
                    if (viewName[0] === "#") {
                      if (params) {
                        throw new Error("params parameter can't be passed with resolved URL");
                      }
                      viewName = viewName.slice(1);
                    }
                    if (lodash_includes__WEBPACK_IMPORTED_MODULE_0___default()(_constants_router__WEBPACK_IMPORTED_MODULE_1__.Vi, viewName)) {
                      if (params && typeof params !== "string") {
                        const threadID = params.threadID;
                        if (threadID && typeof threadID === "string") {
                          const int = parseInt(threadID, 16);
                          if (!isNaN(int)) {
                            const syncThreadId = await gmailDriver.getSyncThreadIdForOldGmailThreadId(threadID);
                            params = {
                              ...params,
                              threadID: "#" + syncThreadId
                            };
                          }
                        }
                      }
                      const newHash = gmailDriver.createLink(viewName, params);
                      const link = document.createElement("a");
                      link.style.display = "none";
                      link.href = newHash;
                      document.body.appendChild(link);
                      (0, _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_3__.jp)(link);
                      link.remove();
                    } else {
                      const newHash = gmailDriver.createLink(viewName, params);
                      window.location.hash = newHash;
                    }
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = gotoView;
                })
              ),
              /***/
              6908: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    Ay: () => (
                      /* binding */
                      isIntegratedViewGmail
                    ),
                    /* harmony export */
                    HW: () => (
                      /* binding */
                      isCollapsiblePanelHidden
                    ),
                    /* harmony export */
                    Zu: () => (
                      /* binding */
                      isGoogleChatEnabled
                    )
                    /* harmony export */
                  });
                  function isIntegratedViewGmail() {
                    const nav = document.querySelector("div[role=navigation] > :nth-child(1).Xa");
                    return nav != null;
                  }
                  function isCollapsiblePanelHidden() {
                    if (!isIntegratedViewGmail()) {
                      return null;
                    }
                    return document.querySelector("div[role=navigation].aBA") != null;
                  }
                  function isGoogleChatEnabled() {
                    return document.querySelector("div[role=navigation] > .ao4") != null;
                  }
                })
              ),
              /***/
              2268: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      overrideGmailBackButton
                    )
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(7332);
                  var _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(4003);
                  var _lib_dom_on_mouse_down_and_up__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(8734);
                  module2 = __webpack_require__2.hmd(module2);
                  function overrideGmailBackButton(gmailDriver, gmailRouteProcessor) {
                    _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__.A.waitForGmailModeToSettle().then(function() {
                      if (_gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__.A.isStandalone()) {
                        return;
                      }
                      _setupManagement(gmailDriver, gmailRouteProcessor);
                    });
                  }
                  function _setupManagement(gmailDriver, gmailRouteProcessor) {
                    gmailDriver.getRouteViewDriverStream().scan((prev, gmailRouteView) => {
                      let lastCustomRouteID, lastCustomRouteParams;
                      if (prev && prev.gmailRouteView && prev.gmailRouteView.isCustomRouteBelongingToApp()) {
                        lastCustomRouteID = prev.gmailRouteView.getRouteID();
                        lastCustomRouteParams = prev.gmailRouteView.getParams();
                      }
                      return {
                        gmailRouteView,
                        lastCustomRouteID,
                        lastCustomRouteParams
                      };
                    }, void 0).changes().onValue((_ref) => {
                      let {
                        gmailRouteView,
                        lastCustomRouteID,
                        lastCustomRouteParams
                      } = _ref;
                      handleGmailRouteView(gmailRouteView, lastCustomRouteID, lastCustomRouteParams, gmailDriver, gmailRouteProcessor);
                    });
                  }
                  const handleGmailRouteView = (0, ud__WEBPACK_IMPORTED_MODULE_2__.defn)(module2, function handleGmailRouteView2(gmailRouteView, lastCustomRouteID, lastCustomRouteParams, gmailDriver, gmailRouteProcessor) {
                    if (lastCustomRouteID && gmailRouteView.getRouteType() === gmailRouteProcessor.RouteTypes.THREAD) {
                      _bindToBackButton(gmailDriver, gmailRouteView);
                    }
                  });
                  function _bindToBackButton(gmailDriver, gmailRouteView) {
                    const backButton = _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__.A.getThreadBackButton();
                    if (!backButton) {
                      return;
                    }
                    (0, _lib_dom_on_mouse_down_and_up__WEBPACK_IMPORTED_MODULE_1__.A)(backButton).takeUntilBy(gmailRouteView.getStopper()).filter((e) => !e.defaultPrevented).onValue((e) => {
                      window.history.back();
                      e.preventDefault();
                      e.stopImmediatePropagation();
                    });
                  }
                })
              ),
              /***/
              7032: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      setupComposeViewDriverStream
                    )
                  });
                  var kefir_esm = __webpack_require__2(7249);
                  var js = __webpack_require__2(616);
                  var js_default = /* @__PURE__ */ __webpack_require__2.n(js);
                  var make_mutation_observer_chunked_stream = __webpack_require__2(3197);
                  var make_element_child_stream = __webpack_require__2(2843);
                  ;
                  function elementViewMapper(viewFn) {
                    return (event) => {
                      const view = viewFn(event.el);
                      event.removalStream.take(1).onValue(() => {
                        view.destroy();
                      });
                      return view;
                    };
                  }
                  ;
                  class StopperPool {
                    constructor(streams) {
                      __publicField(this, "_streamCount", 0);
                      __publicField(this, "_ended", false);
                      __publicField(this, "_pool", kefir_esm.pool());
                      this.stream = this._pool.filter(() => {
                        this._streamCount--;
                        if (this._streamCount === 0) {
                          this._ended = true;
                          return true;
                        }
                        return false;
                      }).take(1).toProperty();
                      this.stream.onValue(() => {
                      });
                      this.add(streams);
                    }
                    add(newStreams) {
                      if (this._ended) {
                        throw new Error("Tried to add a stream to a stopped StopperPool");
                      }
                      const arrStreams = Array.isArray(newStreams) ? newStreams : [newStreams];
                      this._streamCount += arrStreams.length;
                      this._pool.plug(kefir_esm.merge(arrStreams.map((newStream) => newStream.take(1))));
                    }
                    getSize() {
                      return this._streamCount;
                    }
                  }
                  var delay_asap = __webpack_require__2(1136);
                  ;
                  function makeElementStreamMerger() {
                    const knownElementStopperPools = /* @__PURE__ */ new Map();
                    return (event) => {
                      let stopperPool = knownElementStopperPools.get(event.el);
                      if (stopperPool) {
                        if (stopperPool.getSize() > 1) {
                          console.warn("element is part of multiple element streams", stopperPool.getSize(), event.el);
                        }
                        stopperPool.add(event.removalStream.flatMap(delay_asap.A));
                        return kefir_esm.never();
                      } else {
                        stopperPool = new StopperPool(event.removalStream.flatMap(delay_asap.A));
                        stopperPool.stream.onValue(function() {
                          knownElementStopperPools.delete(event.el);
                        });
                        knownElementStopperPools.set(event.el, stopperPool);
                        return kefir_esm.constant({
                          el: event.el,
                          removalStream: stopperPool.stream
                        });
                      }
                    };
                  }
                  var gmail_element_getter = __webpack_require__2(4003);
                  var gmail_compose_view = __webpack_require__2(3737);
                  var isNotNil = __webpack_require__2(960);
                  ;
                  module2 = __webpack_require__2.hmd(module2);
                  var impStream = js_default()(module2, imp);
                  function setupComposeViewDriverStream(gmailDriver, messageViewDriverStream, xhrInterceptorStream) {
                    return impStream.flatMapLatest((imp2) => imp2(gmailDriver, messageViewDriverStream, xhrInterceptorStream));
                  }
                  function imp(gmailDriver, messageViewDriverStream, xhrInterceptorStream) {
                    return kefir_esm.fromPromise(gmail_element_getter.A.waitForGmailModeToSettle()).flatMap(() => {
                      let elementStream;
                      let isStandalone = false;
                      if (gmail_element_getter.A.isStandaloneComposeWindow()) {
                        elementStream = _setupStandaloneComposeElementStream();
                        isStandalone = true;
                      } else if (gmail_element_getter.A.isStandaloneThreadWindow()) {
                        elementStream = kefir_esm.never();
                      } else {
                        elementStream = _setupStandardComposeElementStream();
                      }
                      return elementStream.map(elementViewMapper((el) => new gmail_compose_view.A(el, xhrInterceptorStream, gmailDriver, {
                        isStandalone,
                        isInlineReplyForm: false
                      })));
                    }).merge(messageViewDriverStream.flatMap((gmailMessageView) => gmailMessageView.getReplyElementStream().map(elementViewMapper((el) => new gmail_compose_view.A(el, xhrInterceptorStream, gmailDriver, {
                      isStandalone: false,
                      isInlineReplyForm: true
                    }))))).flatMap((composeViewDriver) => composeViewDriver.ready());
                  }
                  function _setupStandardComposeElementStream() {
                    return _waitForContainerAndMonitorChildrenStream(() => gmail_element_getter.A.getComposeWindowContainer()).flatMap((composeGrandParent) => {
                      const composeParentEl = composeGrandParent.el.querySelector("div.AD");
                      if (composeParentEl) {
                        return (0, make_element_child_stream.A)(composeParentEl).takeUntilBy(composeGrandParent.removalStream).map(_informElement("composeFullscreenStateChanged"));
                      } else {
                        return kefir_esm.never();
                      }
                    }).merge(gmail_element_getter.A.getFullscreenComposeWindowContainerStream().flatMap((_ref) => {
                      let {
                        el,
                        removalStream
                      } = _ref;
                      return (0, make_element_child_stream.A)(el).takeUntilBy(removalStream);
                    }).map(_informElement("composeFullscreenStateChanged")).map((_ref2) => {
                      let {
                        el,
                        removalStream
                      } = _ref2;
                      const targetEl = el.querySelector("[role=dialog] div.aaZ");
                      if (!targetEl) return null;
                      var hiddenStream = (0, make_mutation_observer_chunked_stream.A)(targetEl, {
                        childList: true
                      }).filter(() => targetEl.childElementCount === 0).map(() => null);
                      return {
                        el,
                        removalStream: removalStream.merge(hiddenStream).take(1)
                      };
                    }).filter(isNotNil.A)).flatMap((event) => {
                      if (!event) throw new Error("Should not happen");
                      const el = event.el.querySelector("[role=dialog]");
                      if (!el || !el.querySelector("form")) {
                        return kefir_esm.never();
                      }
                      return kefir_esm.constant({
                        el,
                        removalStream: event.removalStream
                      });
                    }).flatMap(makeElementStreamMerger());
                  }
                  function _setupStandaloneComposeElementStream() {
                    return _waitForContainerAndMonitorChildrenStream(() => gmail_element_getter.A.StandaloneCompose.getComposeWindowContainer());
                  }
                  function _waitForContainerAndMonitorChildrenStream(containerFn) {
                    return kefir_esm.interval(2e3, void 0).map(containerFn).filter().take(1).flatMap((containerEl) => (0, make_element_child_stream.A)(containerEl));
                  }
                  function _informElement(eventName) {
                    return function(event) {
                      const composeEl = event && event.el && event.el.querySelector && event.el.querySelector("[role=dialog]");
                      if (composeEl) {
                        composeEl.dispatchEvent(new CustomEvent(eventName, {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      }
                      return event;
                    };
                  }
                })
              ),
              /***/
              3759: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(7332);
                  var _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(4003);
                  var _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(4603);
                  module2 = __webpack_require__2.hmd(module2);
                  const ACTIVE_ADD_ON_ICON_SELECTOR = ".J-KU-KO";
                  const showCustomRouteView = (0, ud__WEBPACK_IMPORTED_MODULE_1__.defn)(module2, function showCustomRouteView2(gmailDriver, element) {
                    const contentSectionElement = _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__.A.getContentSectionElement();
                    if (!contentSectionElement) {
                      return;
                    }
                    const selection = document.getSelection();
                    for (let i = 0; i < selection.rangeCount; i++) {
                      const range = selection.getRangeAt(i);
                      if (typeof range.intersectsNode === "function" && range.intersectsNode(contentSectionElement)) {
                        selection.removeAllRanges();
                        break;
                      }
                    }
                    const customViewContainerElement = _getCustomViewContainerElement(contentSectionElement);
                    customViewContainerElement.appendChild(element);
                    const children = contentSectionElement.children;
                    Array.prototype.forEach.call(children, (child) => {
                      if (child.classList.contains("inboxsdk__custom_view")) {
                        return;
                      }
                      child.style.display = "none";
                    });
                    const companionSidebarIconContainerEl = _gmail_element_getter__WEBPACK_IMPORTED_MODULE_0__.A.getCompanionSidebarIconContainerElement();
                    if (companionSidebarIconContainerEl) {
                      const activeThreadAddOnIcon = companionSidebarIconContainerEl.querySelector(ACTIVE_ADD_ON_ICON_SELECTOR);
                      if (activeThreadAddOnIcon) {
                        (0, _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_2__.jp)(activeThreadAddOnIcon);
                      }
                    }
                    document.body.classList.add("inboxsdk__custom_view_active");
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = showCustomRouteView;
                  function _getCustomViewContainerElement(contentSectionElement) {
                    let customViewContainerElement = contentSectionElement.querySelector(".inboxsdk__custom_view");
                    if (customViewContainerElement) {
                      return customViewContainerElement;
                    }
                    customViewContainerElement = document.createElement("div");
                    customViewContainerElement.classList.add("inboxsdk__custom_view");
                    contentSectionElement.appendChild(customViewContainerElement);
                    return customViewContainerElement;
                  }
                })
              ),
              /***/
              4003: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      gmail_element_getter
                    )
                  });
                  var once = __webpack_require__2(8921);
                  var once_default = /* @__PURE__ */ __webpack_require__2.n(once);
                  var kefir_esm = __webpack_require__2(7249);
                  var make_element_child_stream = __webpack_require__2(2843);
                  var querySelectorOrFail = __webpack_require__2(9860);
                  var make_mutation_observer_chunked_stream = __webpack_require__2(3197);
                  ;
                  const waitForGmailModeToSettle = once_default()(() => (0, make_mutation_observer_chunked_stream.A)(document.body, {
                    attributes: true,
                    attributeFilter: ["class"]
                  }).toProperty(() => void 0).filter(() => document.body.classList.length > 0).map(() => void 0).take(1).toProperty());
                  const wait_for_gmail_mode_to_settle = waitForGmailModeToSettle;
                  var last2 = __webpack_require__2(6456);
                  var last_default = /* @__PURE__ */ __webpack_require__2.n(last2);
                  var stream_wait_for = __webpack_require__2(1539);
                  ;
                  function getMainContentElementChangedStream(GmailElementGetter2) {
                    const s = waitForMainContentContainer(GmailElementGetter2).flatMap((mainContentContainer) => (0, make_element_child_stream.A)(mainContentContainer).filter((_ref) => {
                      let {
                        el
                      } = _ref;
                      return el.classList.contains("nH");
                    }).flatMap((_ref2) => {
                      let {
                        el,
                        removalStream
                      } = _ref2;
                      return (0, make_mutation_observer_chunked_stream.A)(el, {
                        attributes: true,
                        attributeFilter: ["style"]
                      }).map((x) => last_default()(x)).toProperty(() => {
                        return {
                          target: el
                        };
                      }).filter(_isNowVisible).map((e) => e.target).takeUntilBy(removalStream);
                    })).toProperty();
                    s.onValue(() => {
                    });
                    return s;
                  }
                  function waitForMainContentContainer(GmailElementGetter2) {
                    if (GmailElementGetter2.isStandaloneComposeWindow()) {
                      return kefir_esm.never();
                    }
                    return (0, stream_wait_for.A)(() => GmailElementGetter2.getMainContentContainer());
                  }
                  function _isNowVisible(mutation) {
                    const el = mutation.target;
                    return el.style.display !== "none";
                  }
                  var isIntegratedViewGmail = __webpack_require__2(6908);
                  var logger = __webpack_require__2(2617);
                  var wait_for = __webpack_require__2(5156);
                  ;
                  const APP_MENU = ".aeN.WR.a6o.anZ.nH.oy8Mbf[role=navigation]";
                  const NAV_MENU = ".aeN.WR.nH.oy8Mbf[role=navigation]";
                  const GmailElementGetter = {
                    getActiveMoreMenu() {
                      const elements = document.querySelectorAll(".J-M.aX0.aYO.jQjAxd");
                      for (let ii = 0; ii < elements.length; ii++) {
                        if (elements[ii].style.display !== "none") {
                          return elements[ii];
                        }
                      }
                      return null;
                    },
                    getAddonSidebarContainerElement() {
                      return document.querySelector(".no > .nn.bnl");
                    },
                    getCompanionSidebarContentContainerElement() {
                      return document.querySelector(".brC-brG");
                    },
                    // <div class="brC-aT5-aOt-Jw" role="complementary" aria-label="Side panel">
                    getCompanionSidebarIconContainerElement() {
                      return document.querySelector(".brC-aT5-aOt-Jw");
                    },
                    getComposeButton() {
                      if ((0, isIntegratedViewGmail.Ay)()) {
                        return document.querySelector(".aIH .aic div[role=button].L3");
                      }
                      return document.querySelector("[gh=cm]");
                    },
                    getComposeWindowContainer() {
                      return document.querySelector(".dw .nH > .nH > .no");
                    },
                    getContentSectionElement() {
                      const el = document.querySelector("div.nH.bkK > .nH");
                      if ((0, isIntegratedViewGmail.Ay)()) {
                        return el;
                      } else {
                        const leftNavContainer = GmailElementGetter.getLeftNavContainerElement();
                        const oldMethodEl = leftNavContainer ? leftNavContainer.nextElementSibling.children[0] : null;
                        if (el !== oldMethodEl) {
                          logger.A.error(new Error("getContentSectionElement old and new method inconsistency"), {
                            elClassName: el?.className,
                            oldMethodClassName: oldMethodEl?.className
                          });
                        }
                        return oldMethodEl;
                      }
                    },
                    getFullscreenComposeWindowContainer() {
                      return document.querySelector(".aSs .aSt");
                    },
                    getFullscreenComposeWindowContainerStream() {
                      if (!document.body) throw new Error();
                      return (0, make_element_child_stream.A)(document.body).filter((_ref) => {
                        let {
                          el
                        } = _ref;
                        return el.classList.contains("aSs");
                      }).flatMap((_ref2) => {
                        let {
                          el,
                          removalStream
                        } = _ref2;
                        return (0, make_element_child_stream.A)(el).takeUntilBy(removalStream);
                      }).filter((_ref3) => {
                        let {
                          el
                        } = _ref3;
                        return el.classList.contains("aSt");
                      }).take(1).map((_ref4) => {
                        let {
                          el
                        } = _ref4;
                        return {
                          el,
                          removalStream: kefir_esm.never()
                        };
                      }).toProperty();
                    },
                    getGtalkButtons() {
                      return document.querySelector(".aeN .aj5.J-KU-Jg");
                    },
                    getLeftNavContainerElement() {
                      if (this.getAppMenu()) {
                        return this.getAppMenuContainer()?.querySelector(".aqn.aIH") ?? null;
                      }
                      if ((0, isIntegratedViewGmail.Ay)()) {
                        return document.querySelector("div[role=navigation] + div.aqn");
                      }
                      return document.querySelector(".aeN");
                    },
                    getLeftNavHeightElement() {
                      return document.querySelector(".aeN");
                    },
                    getMainContentBodyContainerElement() {
                      return document.querySelector(".no > .nn.bkK");
                    },
                    getMainContentContainer() {
                      return document.querySelector("div.aeF > div.nH");
                    },
                    getMainContentElementChangedStream: once_default()(function() {
                      return getMainContentElementChangedStream(this);
                    }),
                    /**
                     * This method checks whether we should use the old InboxSDK style of adding nav items
                     * inline among Gmail's nav items (as opposed to the newer style where we put our nav items
                     * in their own sections at the bottom of the leftnav).
                     */
                    shouldAddNavItemsInline() {
                      if ((0, isIntegratedViewGmail.Ay)()) {
                        return true;
                      }
                      const leftNavElement = document.querySelector(".aeN[role=navigation], .aeN [role=navigation]");
                      if (!leftNavElement) {
                        throw new Error("shouldAddNavItemsInline failed to find leftNavElement");
                      }
                      if (leftNavElement.classList.contains("aZ6")) {
                        return true;
                      } else {
                        return false;
                      }
                    },
                    getAppMenuAsync: once_default()(async () => {
                      if (!GmailElementGetter.isStandalone()) {
                        await GmailElementGetter.waitForGmailModeToSettle();
                        try {
                          const element = await (0, wait_for.A)(() => document.querySelector(`${APP_MENU}, ${NAV_MENU}`));
                          if (!document.querySelector(APP_MENU)) {
                            return;
                          }
                          return element;
                        } catch (e) {
                          logger.A.error(e);
                        }
                      }
                    }),
                    getAppBurgerMenu() {
                      return document.querySelector('header[role="banner"] > div > div > div[aria-expanded]');
                    },
                    isAppBurgerMenuOpen() {
                      return this.getAppBurgerMenu()?.getAttribute("aria-expanded") === "true";
                    },
                    getAppMenuContainer() {
                      return document.querySelector(".aqk.aql.bkL");
                    },
                    getAppMenu() {
                      return document.querySelector(APP_MENU);
                    },
                    getAppHeader() {
                      return document.querySelector(".oy8Mbf.qp");
                    },
                    getSeparateSectionNavItemMenuInjectionContainer() {
                      return document.querySelector(".aeN");
                    },
                    getSameSectionNavItemMenuInjectionContainer() {
                      if ((0, isIntegratedViewGmail.Ay)()) {
                        return document.querySelector(".yJ .wT > .n3");
                      } else {
                        return document.querySelector(".aeN .n3");
                      }
                    },
                    getRowListElementsContainer() {
                      return document.querySelector(".bGI.nH")?.parentElement ?? null;
                    },
                    getRowListElements() {
                      const rowListElements = document.querySelectorAll("[gh=tl]");
                      if (rowListElements.length === 0) {
                        return null;
                      }
                      return Array.from(rowListElements);
                    },
                    getScrollContainer() {
                      return document.querySelector("div.Tm.aeJ");
                    },
                    getSearchInput() {
                      return document.querySelector("form[role=search] input");
                    },
                    getSearchSuggestionsBoxParent() {
                      return document.querySelector("table.gstl_50 > tbody > tr > td.gssb_e");
                    },
                    getSidebarContainerElement() {
                      return document.querySelector("[role=main] table.Bs > tr .y3");
                    },
                    getThreadBackButton() {
                      let toolbarElement;
                      try {
                        toolbarElement = GmailElementGetter.getToolbarElement();
                      } catch (err) {
                        return null;
                      }
                      return toolbarElement.querySelector(".lS");
                    },
                    getThreadContainerElement() {
                      const selector = "[role=main] .g.id table.Bs > tr";
                      const selector_2023_11_16 = "[role=main] .g.id .a98.iY";
                      const threadContainerElement = document.querySelector(selector);
                      if (threadContainerElement) {
                        return threadContainerElement;
                      }
                      return document.querySelector(selector_2023_11_16);
                    },
                    getPreviewPaneContainerElement() {
                      return document.querySelector("div[role=main] .aia");
                    },
                    getToolbarElement() {
                      return (0, querySelectorOrFail.A)(document, "[gh=tm]");
                    },
                    getTopAccountContainer() {
                      return document.querySelector('header[role="banner"] > div:nth-child(2) > div:nth-child(2)');
                    },
                    isGplusEnabled() {
                      const topAccountContainer = GmailElementGetter.getTopAccountContainer();
                      if (!topAccountContainer) {
                        return false;
                      }
                      return topAccountContainer.querySelectorAll('a[href*="https://plus"][href*="upgrade"]').length === 0;
                    },
                    /** @deprecated this doesn't include Gmail themes where the frame is dark and the body is not. Use Global.gmailTheme instead */
                    isDarkTheme() {
                      return document.body.classList.contains("inboxsdk__gmail_dark_theme");
                    },
                    isPreviewPane() {
                      return !!document.querySelector(".aia");
                    },
                    isStandalone() {
                      return this.isStandaloneComposeWindow() || this.isStandaloneThreadWindow();
                    },
                    isStandaloneComposeWindow() {
                      return document.body.classList.contains("xE") && document.body.classList.contains("xp");
                    },
                    isStandaloneThreadWindow() {
                      return document.body.classList.contains("aAU") && document.body.classList.contains("xE") && document.body.classList.contains("Su");
                    },
                    StandaloneCompose: {
                      getComposeWindowContainer() {
                        return document.querySelector("[role=main]");
                      }
                    },
                    waitForGmailModeToSettle() {
                      return wait_for_gmail_mode_to_settle().toPromise();
                    }
                  };
                  const gmail_element_getter = GmailElementGetter;
                })
              ),
              /***/
              1433: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    Vo: () => (
                      /* binding */
                      readDraftId
                    ),
                    /* harmony export */
                    Yl: () => (
                      /* binding */
                      extractMessageIdsFromThreadBatchRequest
                    )
                    /* harmony export */
                  });
                  var lodash_flatten__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(4176);
                  var lodash_flatten__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(lodash_flatten__WEBPACK_IMPORTED_MODULE_0__);
                  var lodash_last__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(6456);
                  var lodash_last__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(lodash_last__WEBPACK_IMPORTED_MODULE_1__);
                  var lodash_uniqBy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(8496);
                  var lodash_uniqBy__WEBPACK_IMPORTED_MODULE_2___default = /* @__PURE__ */ __webpack_require__2.n(lodash_uniqBy__WEBPACK_IMPORTED_MODULE_2__);
                  var transducers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__2(6046);
                  var transducers_js__WEBPACK_IMPORTED_MODULE_3___default = /* @__PURE__ */ __webpack_require__2.n(transducers_js__WEBPACK_IMPORTED_MODULE_3__);
                  var _common_html_to_text__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__2(6305);
                  var _common_assert__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__2(1602);
                  var _lib_extract_contact_from_email_contact_string__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__2(3324);
                  function extractGmailThreadIdFromMessageIdSearch(responseString) {
                    const threadResponseArray = deserialize(responseString).value;
                    const threadIdArrayMarker = "cs";
                    const threadIdArray = _searchArray(threadResponseArray, threadIdArrayMarker, (markerArray) => markerArray[0] === "cs" && markerArray.length > 20);
                    if (!threadIdArray) {
                      return null;
                    }
                    return threadIdArray[1];
                  }
                  function rewriteSingleQuotes(s) {
                    let i = 0;
                    const resultParts = [];
                    while (true) {
                      const nextQuoteIndex = findNextQuote(s, i);
                      if (nextQuoteIndex < 0) {
                        resultParts.push(s.substr(i));
                        break;
                      }
                      resultParts.push(s.substr(i, nextQuoteIndex - i));
                      resultParts.push('"');
                      i = nextQuoteIndex + 1;
                      if (s[nextQuoteIndex] === '"') {
                        const nextDoubleQuoteIndex = findNextUnescapedCharacter(s, i, '"');
                        if (nextDoubleQuoteIndex < 0) {
                          throw new Error("Unclosed double quote");
                        }
                        resultParts.push(s.slice(i, nextDoubleQuoteIndex + 1));
                        i = nextDoubleQuoteIndex + 1;
                      } else {
                        const nextSingleQuoteIndex = findNextUnescapedCharacter(s, i, "'");
                        if (nextSingleQuoteIndex < 0) {
                          throw new Error("Unclosed single quote");
                        }
                        const part = s.slice(i, nextSingleQuoteIndex).replace(/"/g, '\\"').replace(/\\'/g, "'");
                        resultParts.push(part);
                        resultParts.push('"');
                        i = nextSingleQuoteIndex + 1;
                      }
                    }
                    return resultParts.join("");
                  }
                  function findNextQuote(s, start) {
                    for (let i = start, len = s.length; i < len; i++) {
                      if (s[i] === '"' || s[i] === "'") {
                        return i;
                      }
                    }
                    return -1;
                  }
                  function findNextUnescapedCharacter(s, start, char) {
                    for (let i = start, len = s.length; i < len; i++) {
                      if (s[i] === "\\") {
                        i++;
                      } else if (s[i] === char) {
                        return i;
                      }
                    }
                    return -1;
                  }
                  function deserialize(threadResponseString) {
                    const options = {
                      includeLengths: false,
                      suggestionMode: /^5\n/.test(threadResponseString),
                      noArrayNewLines: !/^[,\]]/m.test(threadResponseString),
                      includeExplicitNulls: true
                    };
                    const value = [];
                    let pos;
                    if (options.suggestionMode) {
                      pos = threadResponseString.indexOf("'\n");
                      if (pos === -1) {
                        throw new Error("Message was missing beginning header");
                      }
                      pos += 2;
                    } else {
                      pos = threadResponseString.indexOf("\n\n");
                      if (pos === -1) {
                        throw new Error("Message was missing beginning newlines");
                      }
                      pos += 2;
                    }
                    while (pos < threadResponseString.length) {
                      let lineEnd = threadResponseString.indexOf("\n", pos + 1);
                      if (lineEnd === -1) {
                        lineEnd = threadResponseString.length;
                      } else if (threadResponseString[lineEnd - 1] === "\r") {
                        lineEnd += 1;
                      }
                      const line = threadResponseString.slice(pos, lineEnd);
                      let dataLine;
                      if (/^\d+\s*$/.test(line)) {
                        options.includeLengths = true;
                        const length = +line;
                        dataLine = threadResponseString.slice(lineEnd, lineEnd + length);
                        pos = lineEnd + length;
                      } else {
                        dataLine = threadResponseString.slice(pos);
                        pos = threadResponseString.length;
                      }
                      value.push(deserializeArray(dataLine));
                    }
                    return {
                      value,
                      options
                    };
                  }
                  function transformUnquotedSections(str, cb) {
                    const parts = [];
                    let nextQuote;
                    let position = 0;
                    let inString = false;
                    while ((nextQuote = findNextUnescapedCharacter(str, position, '"')) !== -1) {
                      if (inString) {
                        parts.push(str.slice(position, nextQuote + 1));
                      } else {
                        parts.push(cb(str.slice(position, nextQuote + 1)));
                      }
                      position = nextQuote + 1;
                      inString = !inString;
                    }
                    if (inString) {
                      throw new Error("string ended inside quoted section");
                    }
                    parts.push(cb(str.slice(position)));
                    return parts.join("");
                  }
                  function deserializeArray(value) {
                    value = value.replace(/[\r\n\t]/g, "");
                    value = rewriteSingleQuotes(value);
                    value = transformUnquotedSections(
                      value,
                      (match) => match.replace(/,\s*(?=,|\])/g, ",null").replace(/\[\s*(?=,)/g, "[null")
                      // "
                    );
                    try {
                      return JSON.parse(value, (k, v) => v == null ? void 0 : v);
                    } catch (err) {
                      throw new Error("deserialization error");
                    }
                  }
                  function serialize(value, options) {
                    if (options.suggestionMode) {
                      assert(options.includeLengths);
                      return suggestionSerialize(value, options.includeExplicitNulls);
                    }
                    return threadListSerialize(value, options);
                  }
                  function threadListSerialize(threadResponseArray, options) {
                    const {
                      includeLengths,
                      noArrayNewLines,
                      includeExplicitNulls
                    } = options;
                    let response = ")]}'\n" + (noArrayNewLines && includeLengths ? "" : "\n");
                    for (let ii = 0; ii < threadResponseArray.length; ii++) {
                      const arraySection = threadResponseArray[ii];
                      const arraySectionString = serializeArray(arraySection, noArrayNewLines, includeExplicitNulls);
                      if (!includeLengths) {
                        response += arraySectionString;
                      } else {
                        const length = arraySectionString.length + (noArrayNewLines ? 2 : 1);
                        response += (noArrayNewLines ? "\n" : "") + length + "\n" + arraySectionString;
                      }
                    }
                    if (!includeLengths) {
                      if (!noArrayNewLines) {
                        const lines = response.split(/\r|\n/);
                        const firstLines = lines.slice(0, -3);
                        const lastLines = lines.slice(-3);
                        response = firstLines.join("\n");
                        response += "\n" + lastLines[0] + lastLines[1].replace(/"/g, "'");
                      } else {
                        response = response.replace(/"([0-9a-f]{8,16})"\]$/, "'$1']");
                      }
                    }
                    return response + (noArrayNewLines && includeLengths ? "\n" : "");
                  }
                  function suggestionSerialize(suggestionsArray, includeExplicitNulls) {
                    let response = "5\n)]}'\n";
                    for (let ii = 0; ii < suggestionsArray.length; ii++) {
                      const arraySection = suggestionsArray[ii];
                      const arraySectionString = serializeArray(arraySection, false, includeExplicitNulls);
                      const length = arraySectionString.length;
                      response += length + "\r\n" + arraySectionString;
                    }
                    return response;
                  }
                  function serializeArray(array, noArrayNewLines, includeExplicitNulls) {
                    let response = "[";
                    for (let ii = 0; ii < array.length; ii++) {
                      const item = array[ii];
                      let addition;
                      if (Array.isArray(item)) {
                        addition = serializeArray(item, noArrayNewLines, includeExplicitNulls);
                      } else if (item == null) {
                        addition = includeExplicitNulls ? "null" : "";
                      } else {
                        addition = JSON.stringify(item).replace(/</gim, "\\u003c").replace(/=/gim, "\\u003d").replace(/>/gim, "\\u003e").replace(/&/gim, "\\u0026");
                      }
                      if (ii > 0) {
                        response += ",";
                      }
                      response += addition;
                    }
                    response += "]" + (noArrayNewLines ? "" : "\n");
                    return response;
                  }
                  function readDraftId(response, messageID) {
                    const decoded = deserialize(response).value;
                    const msgA = transducers_js__WEBPACK_IMPORTED_MODULE_3___default().toArray(decoded, transducers_js__WEBPACK_IMPORTED_MODULE_3___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_3___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_3___default().filter(Array.isArray), transducers_js__WEBPACK_IMPORTED_MODULE_3___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_3___default().filter((x) => x[0] === "ms" && x[1] === messageID), transducers_js__WEBPACK_IMPORTED_MODULE_3___default().take(1), transducers_js__WEBPACK_IMPORTED_MODULE_3___default().map((x) => x[60])))[0];
                    if (msgA) {
                      const match = msgA.match(/^msg-[^:]:(\S+)$/i);
                      return match && match[1];
                    }
                    return null;
                  }
                  function replaceThreadsInResponse(response, replacementThreads, _ref) {
                    let {
                      start,
                      total
                    } = _ref;
                    const {
                      value,
                      options
                    } = deserialize(response);
                    const actionResponseMode = value.length === 1 && value[0].length === 2 && typeof value[0][1] === "string";
                    const threadValue = actionResponseMode ? value[0][0].map((x) => [x]) : value;
                    const preTbGroups = [];
                    const postTbGroups = [];
                    let preTbItems = [];
                    let postTbItems = [];
                    let hasSeenTb = false;
                    threadValue.forEach((group) => {
                      let tbSeenInThisGroup = false;
                      const preTbGroup = [];
                      const postTbGroup = [];
                      group.forEach((item) => {
                        if (total && item[0] === "ti") {
                          if (typeof total === "number") {
                            item[2] = item[10] = total;
                          } else if (total === "MANY") {
                            item[2] = item[10] = 100 * 1e3;
                            item[3] = 1;
                            const query = item[5];
                            if (item[6]) {
                              item[6][0] = [query, 1];
                            } else {
                              console.error("replaceThreadsInResponse(): Missing item[6]");
                            }
                          }
                        }
                        if (item[0] === "tb") {
                          hasSeenTb = tbSeenInThisGroup = true;
                          if (preTbGroup.length) {
                            preTbItems = preTbGroup;
                          }
                          postTbItems = postTbGroup;
                        } else if (!hasSeenTb) {
                          preTbGroup.push(item);
                        } else {
                          postTbGroup.push(item);
                        }
                      });
                      if (!tbSeenInThisGroup) {
                        if (!hasSeenTb) {
                          preTbGroups.push(preTbGroup);
                        } else {
                          postTbGroups.push(postTbGroup);
                        }
                      }
                    });
                    const newTbs = _threadsToTbGroups(replacementThreads, start);
                    if (preTbItems.length) {
                      newTbs[0] = preTbItems.concat(newTbs[0] || []);
                    }
                    if (postTbItems.length) {
                      if (newTbs.length) {
                        newTbs[newTbs.length - 1] = newTbs[newTbs.length - 1].concat(postTbItems);
                      } else {
                        newTbs.push(postTbItems);
                      }
                    }
                    const parsedNew = flatten([preTbGroups, newTbs, postTbGroups]);
                    const allSections = flatten(parsedNew);
                    const endSection = last(allSections);
                    if (endSection[0] !== "e") {
                      throw new Error("Failed to find end section");
                    }
                    endSection[1] = allSections.length;
                    const fullNew = actionResponseMode ? [[flatten(parsedNew), value[0][1]]] : parsedNew;
                    return serialize(fullNew, options);
                  }
                  function extractThreads(response) {
                    return extractThreadsFromDeserialized(deserialize(response).value);
                  }
                  function extractThreadsFromDeserialized(value) {
                    if (value.length === 1 && value[0].length === 2 && typeof value[0][1] === "string") {
                      value = [value[0][0]];
                    }
                    return _extractThreadArraysFromResponseArray(value).map((thread) => Object.freeze(Object.defineProperty({
                      subject: htmlToText(thread[9]),
                      shortDate: htmlToText(thread[14]),
                      timeString: htmlToText(thread[15]),
                      peopleHtml: cleanupPeopleLine(thread[7]),
                      timestamp: thread[16] / 1e3,
                      isUnread: thread[9].indexOf("<b>") > -1,
                      lastEmailAddress: thread[28],
                      bodyPreviewHtml: thread[10],
                      someGmailMessageIds: [thread[1], thread[2]],
                      gmailThreadId: thread[0]
                    }, "_originalGmailFormat", {
                      value: thread
                    })));
                  }
                  const _extractMessageIdsFromThreadBatchRequestXf = transducers_js__WEBPACK_IMPORTED_MODULE_3___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_3___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_3___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_3___default().filter((item) => item[0] === "cs"), transducers_js__WEBPACK_IMPORTED_MODULE_3___default().map((item) => [item[1], item[2]]));
                  function extractMessageIdsFromThreadBatchRequest(response) {
                    const {
                      value
                    } = deserialize(response);
                    return transducers_js__WEBPACK_IMPORTED_MODULE_3___default().toObj(value, _extractMessageIdsFromThreadBatchRequestXf);
                  }
                  function cleanupPeopleLine(peopleHtml) {
                    return peopleHtml.replace(/^[^<]*/, "").replace(/(<span[^>]*) class="[^"]*"/g, "$1");
                  }
                  const _extractThreadArraysFromResponseArrayXf = transducers_js__WEBPACK_IMPORTED_MODULE_3___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_3___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_3___default().filter((item) => item[0] === "tb"), transducers_js__WEBPACK_IMPORTED_MODULE_3___default().map((item) => item[2]), transducers_js__WEBPACK_IMPORTED_MODULE_3___default().cat);
                  function _extractThreadArraysFromResponseArray(threadResponseArray) {
                    return t.toArray(threadResponseArray, _extractThreadArraysFromResponseArrayXf);
                  }
                  const _extractThreadsFromConversationViewResponseArrayXf = transducers_js__WEBPACK_IMPORTED_MODULE_3___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_3___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_3___default().filter((item) => item[0] === "cs"), transducers_js__WEBPACK_IMPORTED_MODULE_3___default().map((item) => ({
                    threadID: item[1],
                    messageIDs: item[8]
                  })));
                  const _extractMessagesFromResponseArrayXf = transducers_js__WEBPACK_IMPORTED_MODULE_3___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_3___default().cat, transducers_js__WEBPACK_IMPORTED_MODULE_3___default().filter((item) => item[0] === "ms"), transducers_js__WEBPACK_IMPORTED_MODULE_3___default().map((item) => {
                    const m = {
                      messageID: item[1],
                      date: item[7],
                      recipients: void 0
                    };
                    if (Array.isArray(item[13])) {
                      m.recipients = item[13].slice(1, 4).filter((b) => b != null).flat().map(_lib_extract_contact_from_email_contact_string__WEBPACK_IMPORTED_MODULE_6__.A);
                    } else if (Array.isArray(item[37])) {
                      m.recipients = lodash_uniqBy__WEBPACK_IMPORTED_MODULE_2___default()(item[37].slice(0, 5).filter((b) => Array.isArray(b)).flat(), (b) => b[1]).map((b) => ({
                        emailAddress: b[1],
                        name: b[0] ?? void 0
                      }));
                    }
                    return m;
                  }));
                  function extractMessages(response) {
                    let {
                      value
                    } = deserialize(response);
                    if (value.length === 1) value = value[0];
                    const threads = t.toArray(value, _extractThreadsFromConversationViewResponseArrayXf);
                    const messages = t.toArray(value, _extractMessagesFromResponseArrayXf);
                    const messageMap = {};
                    messages.forEach((message) => {
                      if (message.messageID != null) {
                        messageMap[message.messageID] = message;
                      }
                    });
                    return threads.map((_ref2) => {
                      let {
                        threadID,
                        messageIDs
                      } = _ref2;
                      return {
                        threadID,
                        messages: messageIDs.map((messageID) => messageMap[messageID])
                      };
                    });
                  }
                  function _threadsToTbGroups(threads, start) {
                    const _threadsToTbGroupsXf = t.compose(t.map((thread) => thread._originalGmailFormat), t.partition(10), mapIndexed((threadsChunk, i) => [["tb", start + i * 10, threadsChunk]]));
                    return t.toArray(threads, _threadsToTbGroupsXf);
                  }
                  function _searchArray(responseArray, marker, markerArrayValidator) {
                    const pathArray = _searchObject(responseArray, marker, 100);
                    for (let ii = 0; ii < pathArray.length; ii++) {
                      const pathToMarkerArray = pathArray[ii].path.slice(0, -1);
                      const markerArray = _getArrayValueFromPath(responseArray, pathToMarkerArray);
                      if (markerArrayValidator(markerArray)) {
                        return markerArray;
                      }
                    }
                  }
                  function _searchObject(element, query, maxDepth) {
                    const retVal = [];
                    const initialNode = {
                      el: element,
                      path: []
                    };
                    const nodeList = [initialNode];
                    while (nodeList.length > 0) {
                      const node = nodeList.pop();
                      if (node.path.length <= maxDepth) {
                        if (node.el !== null && typeof node.el === "object") {
                          const keys = Object.keys(node.el);
                          for (let i = 0; i < keys.length; i++) {
                            const key = keys[i];
                            const newNode = {
                              el: node.el[key],
                              path: node.path.concat([key])
                            };
                            nodeList.push(newNode);
                          }
                        } else {
                          if (node.el === query) {
                            retVal.push(node);
                          }
                        }
                      }
                    }
                    return retVal;
                  }
                  function _getArrayValueFromPath(responseArray, path) {
                    let currentArray = responseArray;
                    for (let ii = 0; ii < path.length; ii++) {
                      currentArray = currentArray[path[ii]];
                    }
                    return currentArray;
                  }
                })
              ),
              /***/
              6811: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    Uf: () => (
                      /* binding */
                      extractThreadsFromSearchResponse
                    ),
                    /* harmony export */
                    gb: () => (
                      /* binding */
                      extractThreadsFromThreadResponse
                    ),
                    /* harmony export */
                    q6: () => (
                      /* binding */
                      replaceThreadsInSearchResponse
                    )
                    /* harmony export */
                  });
                  var bignumber_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(2180);
                  var bignumber_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(bignumber_js__WEBPACK_IMPORTED_MODULE_0__);
                  var _common_isNotNil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(960);
                  function extractThreadsFromSearchResponse(response) {
                    const parsedResponse = JSON.parse(response);
                    if (Array.isArray(parsedResponse)) {
                      try {
                        return extractThreadsFromSearchResponse_20220909(parsedResponse);
                      } catch (err) {
                        return [];
                      }
                    }
                    const threadDescriptors = parsedResponse && parsedResponse[3];
                    if (!threadDescriptors) return [];
                    return threadDescriptors.map((descriptorWrapper, index) => {
                      const descriptor = descriptorWrapper[1];
                      if (!descriptor) return null;
                      return {
                        subject: descriptor[1],
                        snippet: descriptor[2],
                        syncThreadID: descriptor[4],
                        // It seems Gmail is A/B testing including gmailThreadID in descriptor[20] and not including
                        // the encoded version of it in descriptor[18], so pull it from [20] if [18] is not set.
                        oldGmailThreadID: descriptor[18] != null ? new (bignumber_js__WEBPACK_IMPORTED_MODULE_0___default())(descriptor[18]).toString(16) : descriptor[20],
                        rawResponse: descriptorWrapper,
                        extraMetaData: {
                          snippet: parsedResponse[15] && parsedResponse[15][1] && parsedResponse[15][1][index] || "",
                          syncMessageData: descriptor[5].map((md) => ({
                            syncMessageID: md[1],
                            oldMessageID: md[56],
                            date: +md[7]
                          }))
                        }
                      };
                    }).filter(_common_isNotNil__WEBPACK_IMPORTED_MODULE_1__.A);
                  }
                  function extractThreadsFromSearchResponse_20220909(parsedResponse) {
                    const threadDescriptors = parsedResponse && parsedResponse[2];
                    if (!threadDescriptors) return [];
                    return threadDescriptors.map((descriptorWrapper, index) => {
                      const descriptor = descriptorWrapper[0];
                      if (!descriptor) return null;
                      return {
                        subject: descriptor[0],
                        snippet: descriptor[1],
                        syncThreadID: descriptor[3],
                        // It seems Gmail is A/B testing including gmailThreadID in descriptor[20] and not including
                        // the encoded version of it in descriptor[18], so pull it from [20] if [18] is not set.
                        oldGmailThreadID: descriptor[17] != null ? new (bignumber_js__WEBPACK_IMPORTED_MODULE_0___default())(descriptor[17]).toString(16) : descriptor[19],
                        rawResponse: descriptorWrapper,
                        extraMetaData: {
                          snippet: parsedResponse[14] && parsedResponse[14][0] && parsedResponse[14][0][index] || "",
                          syncMessageData: descriptor[4].map((md) => ({
                            syncMessageID: md[0],
                            oldMessageID: md[55],
                            date: +md[6]
                          }))
                        }
                      };
                    }).filter(_common_isNotNil__WEBPACK_IMPORTED_MODULE_1__.A);
                  }
                  function extractThreadsFromThreadResponse(response) {
                    const parsedResponse = JSON.parse(response);
                    if (Array.isArray(parsedResponse)) {
                      return extractThreadsFromThreadResponse_20220909(parsedResponse);
                    }
                    const threadDescriptors = parsedResponse && parsedResponse[2];
                    if (!threadDescriptors) throw new Error("Failed to process thread response");
                    return threadDescriptors.map((descriptorWrapper) => {
                      if (typeof descriptorWrapper[1] === "string" && Array.isArray(descriptorWrapper[3]) && !(descriptorWrapper[2] && descriptorWrapper[2][1] && descriptorWrapper[2][1][14] && Array.isArray(descriptorWrapper[2][2]))) {
                        return {
                          syncThreadID: descriptorWrapper[1],
                          oldGmailThreadID: descriptorWrapper[2] && descriptorWrapper[2][1] && descriptorWrapper[2][1][16] || void 0,
                          extraMetaData: {
                            snippet: descriptorWrapper[2] && descriptorWrapper[2][1] && descriptorWrapper[2][1][3] || void 0,
                            syncMessageData: (descriptorWrapper[3] || []).filter((md) => Boolean(md[2])).map((md) => ({
                              syncMessageID: md[1],
                              date: +md[2][17],
                              recipients: getRecipientsFromMessageDescriptor(md)
                            }))
                          }
                        };
                      } else {
                        const threadDescriptor = descriptorWrapper[2] && descriptorWrapper[2][1];
                        if (!threadDescriptor) return null;
                        let syncMessageData;
                        const fullMessageDescriptors = Array.isArray(descriptorWrapper[3]) && descriptorWrapper[3];
                        if (fullMessageDescriptors) {
                          syncMessageData = fullMessageDescriptors.map((md) => ({
                            syncMessageID: md[1],
                            date: +md[2][17],
                            recipients: getRecipientsFromMessageDescriptor(md)
                          }));
                        } else {
                          const messageDescriptors = descriptorWrapper[2] && descriptorWrapper[2][2];
                          syncMessageData = messageDescriptors.map((md) => ({
                            syncMessageId: md[1],
                            date: +md[16]
                          }));
                        }
                        return {
                          subject: threadDescriptor[2],
                          snippet: threadDescriptor[3],
                          syncThreadID: threadDescriptor[1],
                          oldGmailThreadID: new (bignumber_js__WEBPACK_IMPORTED_MODULE_0___default())(threadDescriptor[14]).toString(16),
                          rawResponse: descriptorWrapper,
                          extraMetaData: {
                            syncMessageData,
                            snippet: ""
                          }
                        };
                      }
                    }).filter(_common_isNotNil__WEBPACK_IMPORTED_MODULE_1__.A);
                  }
                  function extractThreadsFromThreadResponse_20220909(parsedResponse) {
                    const threadDescriptors = parsedResponse && parsedResponse[1];
                    if (!threadDescriptors) throw new Error("Failed to process thread response");
                    return threadDescriptors.map((descriptorWrapper) => {
                      if (typeof descriptorWrapper[0] === "string" && Array.isArray(descriptorWrapper[2]) && !(descriptorWrapper[1] && descriptorWrapper[1][0] && descriptorWrapper[1][0][13] && Array.isArray(descriptorWrapper[1][1]))) {
                        return {
                          syncThreadID: descriptorWrapper[0],
                          oldGmailThreadID: descriptorWrapper[1] && descriptorWrapper[1][0] && descriptorWrapper[1][0][15] || void 0,
                          extraMetaData: {
                            snippet: descriptorWrapper[1] && descriptorWrapper[1][0] && descriptorWrapper[1][0][2] || void 0,
                            syncMessageData: (descriptorWrapper[2] || []).filter((md) => Boolean(md[1])).map((md) => ({
                              syncMessageID: md[0],
                              date: +md[1][16],
                              recipients: getRecipientsFromMessageDescriptor_20220909(md)
                            }))
                          }
                        };
                      } else {
                        const threadDescriptor = descriptorWrapper[1] && descriptorWrapper[1][0];
                        if (!threadDescriptor) return null;
                        let syncMessageData;
                        const fullMessageDescriptors = Array.isArray(descriptorWrapper[2]) && descriptorWrapper[2];
                        if (fullMessageDescriptors) {
                          syncMessageData = fullMessageDescriptors.map((md) => ({
                            syncMessageID: md[0],
                            date: +md[1][16],
                            recipients: getRecipientsFromMessageDescriptor_20220909(md)
                          }));
                        } else {
                          const messageDescriptors = descriptorWrapper[1] && descriptorWrapper[1][1];
                          syncMessageData = messageDescriptors.map((md) => ({
                            syncMessageId: md[0],
                            date: +md[15]
                          }));
                        }
                        return {
                          subject: threadDescriptor[1],
                          snippet: threadDescriptor[2],
                          syncThreadID: threadDescriptor[0],
                          oldGmailThreadID: new (bignumber_js__WEBPACK_IMPORTED_MODULE_0___default())(threadDescriptor[13]).toString(16),
                          rawResponse: descriptorWrapper,
                          extraMetaData: {
                            syncMessageData,
                            snippet: ""
                          }
                        };
                      }
                    }).filter(_common_isNotNil__WEBPACK_IMPORTED_MODULE_1__.A);
                  }
                  function getRecipientsFromMessageDescriptor(messageDescriptor) {
                    if (!messageDescriptor[2]) return;
                    const to = messageDescriptor[2][1] || [];
                    const cc = messageDescriptor[2][2] || [];
                    const bcc = messageDescriptor[2][3] || [];
                    return to.concat(cc).concat(bcc).map((recipientDescriptor) => ({
                      emailAddress: recipientDescriptor[2],
                      name: recipientDescriptor[3]
                    }));
                  }
                  function getRecipientsFromMessageDescriptor_20220909(messageDescriptor) {
                    if (!messageDescriptor[1]) return;
                    const to = messageDescriptor[1][0] || [];
                    const cc = messageDescriptor[1][1] || [];
                    const bcc = messageDescriptor[1][2] || [];
                    return to.concat(cc).concat(bcc).map((recipientDescriptor) => ({
                      emailAddress: recipientDescriptor[1],
                      name: recipientDescriptor[2]
                    }));
                  }
                  function replaceThreadsInSearchResponse(response, replacementThreads, _unused) {
                    const parsedResponse = JSON.parse(response);
                    if (Array.isArray(parsedResponse)) {
                      try {
                        return replaceThreadsInSearchResponse_20220909(parsedResponse, replacementThreads, _unused);
                      } catch (err) {
                        console.error("Caught err in replaceThreadsInSearchResponse", err);
                        return response;
                      }
                    }
                    if (parsedResponse[3] || replacementThreads.length) {
                      parsedResponse[3] = replacementThreads.map((_ref, index) => {
                        let {
                          rawResponse
                        } = _ref;
                        return {
                          ...rawResponse,
                          "2": index
                        };
                      });
                    }
                    if (parsedResponse[15] || replacementThreads.length) {
                      parsedResponse[15] = {
                        ...parsedResponse[15],
                        "1": replacementThreads.map((_ref2) => {
                          let {
                            extraMetaData
                          } = _ref2;
                          return extraMetaData.snippet;
                        }),
                        "2": replacementThreads.map((_ref3) => {
                          let {
                            extraMetaData
                          } = _ref3;
                          return extraMetaData.syncMessageData.map((_ref4) => {
                            let {
                              syncMessageID
                            } = _ref4;
                            return syncMessageID;
                          });
                        })
                      };
                    }
                    return JSON.stringify(parsedResponse);
                  }
                  function replaceThreadsInSearchResponse_20220909(parsedResponse, replacementThreads, _unused) {
                    if (parsedResponse[2] || replacementThreads.length) {
                      parsedResponse[2] = replacementThreads.map((_ref5, index) => {
                        let {
                          rawResponse
                        } = _ref5;
                        const res = [...rawResponse];
                        res[1] = index;
                        return res;
                      });
                    }
                    if (parsedResponse[14] || replacementThreads.length) {
                      parsedResponse[14] = [...parsedResponse[14]];
                      parsedResponse[14][0] = replacementThreads.map((_ref6) => {
                        let {
                          extraMetaData
                        } = _ref6;
                        return extraMetaData.snippet;
                      });
                      if (Array.isArray(parsedResponse[14][1]) && parsedResponse[14][1].length > 0 && Array.isArray(parsedResponse[14][1][0][0])) {
                        parsedResponse[14][1] = replacementThreads.map((_ref7) => {
                          let {
                            extraMetaData
                          } = _ref7;
                          return [[extraMetaData.syncMessageData[0].syncMessageID]];
                        });
                      } else {
                        parsedResponse[14][1] = replacementThreads.map((_ref8) => {
                          let {
                            extraMetaData
                          } = _ref8;
                          return extraMetaData.syncMessageData.map((_ref9) => {
                            let {
                              syncMessageID
                            } = _ref9;
                            return syncMessageID;
                          });
                        });
                      }
                    }
                    return JSON.stringify(parsedResponse);
                  }
                })
              ),
              /***/
              745: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      makePageParserTree
                    )
                  });
                  var js = __webpack_require__2(855);
                  var js_default = /* @__PURE__ */ __webpack_require__2.n(js);
                  var ud_kefir_js = __webpack_require__2(616);
                  var ud_kefir_js_default = /* @__PURE__ */ __webpack_require__2.n(ud_kefir_js);
                  ;
                  const pageParserOptions = {
                    tags: {},
                    watchers: [{
                      sources: [null],
                      tag: "composeLinkPopOverContainer",
                      selectors: ["body", ".Lf.a5s"]
                    }],
                    finders: {
                      supportMenu: {
                        fn: (root) => root.querySelectorAll("header[role=banner] div:not([aria-label]):not([data-ogsr-up]) > div:not(.inboxsdk__appButton) > div[data-tooltip] + div[role=menu]")
                      },
                      composeLinkPopOverContainer: {
                        fn: (root) => root.querySelectorAll("body > .Lf.a5s")
                      }
                    }
                  };
                  const gmail_pageParserOptions = pageParserOptions;
                  var censorHTMLtree = __webpack_require__2(1443);
                  ;
                  module2 = __webpack_require__2.hmd(module2);
                  const pageParserOptionsStream = ud_kefir_js_default()(module2, gmail_pageParserOptions);
                  function makePageParserTree(driver, root) {
                    const _driver = driver;
                    function transformOptions(pageParserOptions2) {
                      return !_driver ? pageParserOptions2 : {
                        ...pageParserOptions2,
                        logError(err, el) {
                          const details = {
                            el,
                            html: el ? (0, censorHTMLtree.A)(el) : null
                          };
                          _driver.getLogger().errorSite(err, details);
                        }
                      };
                    }
                    const page = new (js_default())(root, transformOptions(gmail_pageParserOptions));
                    pageParserOptionsStream.changes().onValue((pageParserOptions2) => {
                      console.log("replacing PageParserTree options");
                      page.replaceOptions(transformOptions(pageParserOptions2));
                    });
                    return page;
                  }
                })
              ),
              /***/
              2893: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  var _stopper, _driver, _instanceId, _companionSidebarContentContainerEl, _instanceIdsToDescriptors, _threadSidebarComponent, _threadIconArea, _globalIconArea, _globalButtonContainers, _threadButtonContainers, _contentContainers, _threadSidebarContainerEl, _companionSidebarOuterWrapper, _currentIds, _orderManager, _containerProp, _updateHighlightedAppThreadIconBus, _GmailAppSidebarPrimary_instances, getShouldGlobalAppSidebarOpen_fn, setShouldGlobalAppSidebarOpen_fn, getShouldThreadAppSidebarOpen_fn, setShouldThreadAppSidebarOpen_fn, createThreadSidebarIfNeeded_fn, renderThreadSidebarIfPresent_fn, _appSidebarRefSetter, renderThreadSidebar_fn, getActiveButtonContainer_fn, _closeButton, addButton_fn, removeButton_fn, closeSidebarAndDeactivateButton_fn, openSidebarAndActivateButton_fn, setupElement_fn, _driver2, _stopper2, _eventStream, _isActive, _instanceId2, _sidebarId, _isGlobal, _stopper3, _driver3, _instanceId3;
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      gmail_app_sidebar_view
                    )
                  });
                  var js = __webpack_require__2(616);
                  var js_default = /* @__PURE__ */ __webpack_require__2.n(js);
                  var kefir_esm = __webpack_require__2(7249);
                  var kefir_stopper_js = __webpack_require__2(4924);
                  var kefir_stopper_js_default = /* @__PURE__ */ __webpack_require__2.n(kefir_stopper_js);
                  var findIndex = __webpack_require__2(9339);
                  var findIndex_default = /* @__PURE__ */ __webpack_require__2.n(findIndex);
                  var browser_asap = __webpack_require__2(4622);
                  var browser_asap_default = /* @__PURE__ */ __webpack_require__2.n(browser_asap);
                  var kefir_bus = __webpack_require__2(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__2.n(kefir_bus);
                  var order_manager_js = __webpack_require__2(451);
                  var order_manager_js_default = /* @__PURE__ */ __webpack_require__2.n(order_manager_js);
                  var react = __webpack_require__2(7810);
                  var react_dom = __webpack_require__2(2483);
                  ;
                  function _extends() {
                    _extends = Object.assign ? Object.assign.bind() : function(target) {
                      for (var i = 1; i < arguments.length; i++) {
                        var source = arguments[i];
                        for (var key in source) {
                          if (Object.prototype.hasOwnProperty.call(source, key)) {
                            target[key] = source[key];
                          }
                        }
                      }
                      return target;
                    };
                    return _extends.apply(this, arguments);
                  }
                  var flatMap = __webpack_require__2(6501);
                  var flatMap_default = /* @__PURE__ */ __webpack_require__2.n(flatMap);
                  var sortBy = __webpack_require__2(3281);
                  var sortBy_default = /* @__PURE__ */ __webpack_require__2.n(sortBy);
                  var classnames = __webpack_require__2(5755);
                  var classnames_default = /* @__PURE__ */ __webpack_require__2.n(classnames);
                  var react_draggable_list_js = __webpack_require__2(6931);
                  var react_draggable_list_js_default = /* @__PURE__ */ __webpack_require__2.n(react_draggable_list_js);
                  var react_smooth_collapse_js = __webpack_require__2(4293);
                  var idMap = __webpack_require__2(5183);
                  ;
                  class ElementContainer extends react.Component {
                    constructor() {
                      super(...arguments);
                      __publicField(this, "_contentRefCb", (el) => {
                        if (el) this._content = el;
                      });
                    }
                    componentDidMount() {
                      this._content.appendChild(this.props.el);
                    }
                    componentDidUpdate(prevProps) {
                      if (prevProps.el !== this.props.el) {
                        while (this._content.lastElementChild) {
                          this._content.lastElementChild.remove();
                        }
                        this._content.appendChild(this.props.el);
                      }
                    }
                    shouldComponentUpdate(nextProps) {
                      return this.props.className !== nextProps.className || this.props.el !== nextProps.el;
                    }
                    render() {
                      return /* @__PURE__ */ react.createElement("div", {
                        className: this.props.className,
                        ref: this._contentRefCb
                      });
                    }
                  }
                  ;
                  const springConfig = {
                    stiffness: 400,
                    damping: 50
                  };
                  const MAX_SIDEBAR_SETTINGS = 200;
                  class AppSidebar extends react.Component {
                    constructor(props) {
                      super(props);
                      __publicField(this, "_stopper", kefir_stopper_js_default()());
                      this.state = {
                        expansionSettings: this._readExpansionSettings()
                      };
                    }
                    componentDidMount() {
                      kefir_esm["default"].fromEvents(window, "storage").filter((e) => e.key === "inboxsdk__sidebar_expansion_settings").takeUntilBy(this._stopper).onValue(() => {
                        this.setState({
                          expansionSettings: this._readExpansionSettings()
                        });
                      });
                    }
                    componentWillUnmount() {
                      this._stopper.destroy();
                    }
                    scrollPanelIntoView(instanceId) {
                      let useContainer = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
                      const panel = this._list.getItemInstance(instanceId);
                      const getContainer = this.props.container;
                      panel.scrollIntoView(useContainer, getContainer && getContainer());
                    }
                    closePanel(instanceId) {
                      const panelDescriptor = this.props.panels.find((desc) => desc.instanceId === instanceId);
                      if (panelDescriptor) {
                        this._expandedToggle(panelDescriptor.appId, panelDescriptor.id, false);
                      }
                    }
                    openPanel(instanceId) {
                      const panelDescriptor = this.props.panels.find((desc) => desc.instanceId === instanceId);
                      if (panelDescriptor) {
                        this._expandedToggle(panelDescriptor.appId, panelDescriptor.id, true);
                      }
                    }
                    shouldComponentUpdate(nextProps, nextState) {
                      return this.props.panels !== nextProps.panels || this.state.expansionSettings !== nextState.expansionSettings;
                    }
                    _expandedToggle(appId, id, expanded) {
                      const expansionSettings = this._readExpansionSettings();
                      if (!Object.prototype.hasOwnProperty.call(expansionSettings.apps, appId)) {
                        expansionSettings.apps[appId] = {
                          ids: {}
                        };
                      }
                      const appSettings = expansionSettings.apps[appId];
                      appSettings.ids[id] = {
                        lastUse: Date.now(),
                        expanded
                      };
                      this.setState({
                        expansionSettings
                      }, this.props.onExpandedToggle);
                      this._saveExpansionSettings(expansionSettings);
                    }
                    _readExpansionSettings() {
                      let data;
                      try {
                        data = JSON.parse(__webpack_require__2.g.localStorage.getItem("inboxsdk__sidebar_expansion_settings") || "null");
                      } catch (err) {
                        console.error("Failed to read sidebar settings", err);
                      }
                      if (data) return data;
                      return {
                        apps: {}
                      };
                    }
                    _saveExpansionSettings(data) {
                      const allSidebarIds = flatMap_default()(Object.keys(data.apps), (appId) => Object.keys(data.apps[appId].ids).map((id) => [appId, id]));
                      if (allSidebarIds.length > MAX_SIDEBAR_SETTINGS) {
                        const idsToRemove = sortBy_default()(allSidebarIds, (_ref) => {
                          let [appId, id] = _ref;
                          return data.apps[appId].ids[id].lastUse;
                        }).slice(0, allSidebarIds.length - MAX_SIDEBAR_SETTINGS);
                        idsToRemove.forEach((_ref2) => {
                          let [appId, id] = _ref2;
                          delete data.apps[appId].ids[id];
                          if (Object.keys(data.apps[appId].ids).length === 0) {
                            delete data.apps[appId];
                          }
                        });
                      }
                      try {
                        __webpack_require__2.g.localStorage.setItem("inboxsdk__sidebar_expansion_settings", JSON.stringify(data));
                      } catch (err) {
                        console.error("Failed to save sidebar settings", err);
                      }
                    }
                    render() {
                      const {
                        expansionSettings
                      } = this.state;
                      const {
                        panels,
                        onClose,
                        onOutsideClick,
                        onMoveEnd,
                        container
                      } = this.props;
                      const showControls = panels.length > 1;
                      const hideTitleBar = panels.length === 1 && panels[0].hideTitleBar;
                      const panelList = panels.map((panelDescriptor) => {
                        const appExpansionSettings = Object.prototype.hasOwnProperty.call(expansionSettings.apps, panelDescriptor.appId) ? expansionSettings.apps[panelDescriptor.appId] : null;
                        const panelExpansionSettings = appExpansionSettings ? appExpansionSettings.ids[panelDescriptor.id] : null;
                        const expanded = panelExpansionSettings ? panelExpansionSettings.expanded : true;
                        return {
                          panelDescriptor,
                          showControls,
                          expanded,
                          onExpandedToggle: (expanded2) => {
                            this._expandedToggle(panelDescriptor.appId, panelDescriptor.id, expanded2);
                          }
                        };
                      });
                      return /* @__PURE__ */ react.createElement("div", {
                        className: classnames_default()((0, idMap.A)("app_sidebar"), {
                          [(0, idMap.A)("hideTitleBar")]: hideTitleBar
                        })
                      }, /* @__PURE__ */ react.createElement("div", {
                        className: (0, idMap.A)("app_sidebar_main"),
                        ref: (el) => {
                          if (el) this._main = el;
                        }
                      }, /* @__PURE__ */ react.createElement("div", {
                        className: (0, idMap.A)("app_sidebar_content_area")
                      }, /* @__PURE__ */ react.createElement(react_draggable_list_js_default(), {
                        padding: 0,
                        ref: (el) => {
                          if (el) this._list = el;
                        },
                        itemKey: (x) => x.panelDescriptor.instanceId,
                        template: Panel,
                        list: panelList,
                        onMoveEnd: (newList, movedItem, oldIndex, newIndex) => {
                          onMoveEnd(newList.map((x) => x.panelDescriptor), movedItem.panelDescriptor, oldIndex, newIndex);
                        },
                        springConfig,
                        container: container || (() => this._main)
                      })), onOutsideClick && /* @__PURE__ */ react.createElement("div", {
                        className: (0, idMap.A)("app_sidebar_content_area_padding"),
                        onClick: (event) => {
                          event.preventDefault();
                          onOutsideClick();
                        }
                      })), onClose && /* @__PURE__ */ react.createElement("button", {
                        className: "inboxsdk__close_button",
                        type: "button",
                        title: "Close",
                        onClick: onClose
                      }));
                    }
                  }
                  class Panel extends react.Component {
                    scrollIntoView(useContainer, container) {
                      if (useContainer && container) {
                        const offsetParent = this._el.parentElement;
                        if (offsetParent) {
                          container.scrollTo({
                            top: offsetParent.offsetTop,
                            behavior: "smooth"
                          });
                        }
                      } else {
                        this._el.scrollIntoView({
                          behavior: "smooth"
                        });
                      }
                    }
                    getDragHeight() {
                      return 40;
                    }
                    componentDidMount() {
                      const expanded = !this.props.item.showControls || this.props.item.expanded;
                      if (expanded) {
                        document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated", {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            instanceId: this.props.item.panelDescriptor.instanceId
                          }
                        }));
                      }
                    }
                    componentDidUpdate(prevProps) {
                      const prevExpanded = !prevProps.item.showControls || prevProps.item.expanded;
                      const expanded = !this.props.item.showControls || this.props.item.expanded;
                      if (!prevExpanded && expanded) {
                        document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated", {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            instanceId: this.props.item.panelDescriptor.instanceId
                          }
                        }));
                      } else if (prevExpanded && !expanded) {
                        document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated", {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            instanceId: this.props.item.panelDescriptor.instanceId
                          }
                        }));
                      }
                    }
                    shouldComponentUpdate(nextProps) {
                      return this.props.itemSelected !== nextProps.itemSelected || this.props.item.panelDescriptor !== nextProps.item.panelDescriptor || this.props.item.showControls !== nextProps.item.showControls || this.props.item.expanded !== nextProps.item.expanded;
                    }
                    render() {
                      const {
                        dragHandleProps,
                        itemSelected,
                        item: {
                          panelDescriptor: {
                            title,
                            appName,
                            iconClass,
                            iconUrl,
                            iconLiga,
                            el
                          },
                          showControls,
                          expanded,
                          onExpandedToggle
                        }
                      } = this.props;
                      const scale = itemSelected * 0.01 + 1;
                      const shadow = itemSelected * 4;
                      return /* @__PURE__ */ react.createElement("div", {
                        ref: (el2) => {
                          if (el2) this._el = el2;
                        },
                        className: classnames_default()((0, idMap.A)("app_sidebar_content_panel"), {
                          [(0, idMap.A)("dragged")]: itemSelected > 0.2,
                          [(0, idMap.A)("expanded")]: expanded,
                          [(0, idMap.A)("showControls")]: showControls
                        }),
                        style: {
                          transform: scale === 1 ? "none" : `scale(${scale})`,
                          boxShadow: shadow === 0 ? "none" : `0px 0px ${shadow}px 0px rgba(0, 0, 0, 0.3)`
                        }
                      }, /* @__PURE__ */ react.createElement("div", {
                        className: (0, idMap.A)("app_sidebar_content_panel_top_line"),
                        "data-app-name": appName
                      }, /* @__PURE__ */ react.createElement("span", _extends({
                        className: (0, idMap.A)("app_sidebar_content_panel_title")
                      }, showControls ? dragHandleProps : null), /* @__PURE__ */ react.createElement("div", {
                        className: (0, idMap.A)("app_sidebar_content_panel_grip")
                      }), /* @__PURE__ */ react.createElement("span", {
                        className: (0, idMap.A)("app_sidebar_content_panel_title_icon_container")
                      }, /* @__PURE__ */ react.createElement("span", {
                        className: classnames_default()((0, idMap.A)("app_sidebar_content_panel_title_icon"), iconClass)
                      }, !!iconLiga && iconLiga, iconUrl && /* @__PURE__ */ react.createElement("img", {
                        src: iconUrl
                      }))), /* @__PURE__ */ react.createElement("span", {
                        className: (0, idMap.A)("app_sidebar_content_panel_title_text")
                      }, title)), /* @__PURE__ */ react.createElement("span", {
                        className: (0, idMap.A)("app_sidebar_content_panel_toggle"),
                        onClick: () => onExpandedToggle(!expanded)
                      }, /* @__PURE__ */ react.createElement("button", {
                        type: "button",
                        className: (0, idMap.A)("app_sidebar_content_panel_toggle_button")
                      }))), /* @__PURE__ */ react.createElement(react_smooth_collapse_js.A, {
                        expanded: !showControls || expanded,
                        heightTransition: ".15s ease"
                      }, /* @__PURE__ */ react.createElement(ElementContainer, {
                        className: (0, idMap.A)("app_sidebar_content_panel_content"),
                        el
                      })));
                    }
                  }
                  var gmail_element_getter = __webpack_require__2(4003);
                  ;
                  function incrementName(name) {
                    const m = / (\d+)$/.exec(name);
                    if (m) {
                      return name.slice(0, name.length - m[0].length) + " " + (Number(m[1]) + 1);
                    }
                    return name + " 2";
                  }
                  var querySelectorOrFail = __webpack_require__2(9860);
                  var make_mutation_observer_chunked_stream = __webpack_require__2(3197);
                  var simulate_mouse_event = __webpack_require__2(4603);
                  var fake_window_resize = __webpack_require__2(652);
                  var add_companion_thread_icon_area = __webpack_require__2(1763);
                  var add_companion_global_icon_area = __webpack_require__2(6416);
                  var add_to_icon_area = __webpack_require__2(3451);
                  ;
                  const cssGlobal = "inboxsdk__app_sidebar_waiting_platform";
                  const sidebarWaitingPlatformSelector = [
                    cssGlobal,
                    "inboxsdk__a0oshmeH6N_2vLtc3DNT",
                    "inboxsdk__BV_FA4qVT4qYxs3LbEU4",
                    // Pre CSS module selector <1.1.0
                    (0, idMap.r)("app_sidebar_waiting_platform")
                  ].map((x) => "." + x).join(", ");
                  const sidebarWaitingPlatformClassName = classnames_default()(cssGlobal, "inboxsdk__a0oshmeH6N_2vLtc3DNT", "inboxsdk__BV_FA4qVT4qYxs3LbEU4", (0, idMap.r)("app_sidebar_waiting_platform"));
                  var lodash_escape = __webpack_require__2(3131);
                  var escape_default = /* @__PURE__ */ __webpack_require__2.n(lodash_escape);
                  var injectStylesIntoStyleTag = __webpack_require__2(6186);
                  var injectStylesIntoStyleTag_default = /* @__PURE__ */ __webpack_require__2.n(injectStylesIntoStyleTag);
                  var styleDomAPI = __webpack_require__2(2155);
                  var styleDomAPI_default = /* @__PURE__ */ __webpack_require__2.n(styleDomAPI);
                  var setAttributesWithoutAttributes = __webpack_require__2(8626);
                  var setAttributesWithoutAttributes_default = /* @__PURE__ */ __webpack_require__2.n(setAttributesWithoutAttributes);
                  var insertStyleElement = __webpack_require__2(8990);
                  var insertStyleElement_default = /* @__PURE__ */ __webpack_require__2.n(insertStyleElement);
                  var styleTagTransform = __webpack_require__2(9827);
                  var styleTagTransform_default = /* @__PURE__ */ __webpack_require__2.n(styleTagTransform);
                  var index_module = __webpack_require__2(8855);
                  ;
                  var options = {};
                  options.styleTagTransform = styleTagTransform_default();
                  options.setAttributes = setAttributesWithoutAttributes_default();
                  options.insert = (htmlElement) => {
                    htmlElement.setAttribute(
                      "data-inboxsdk-version",
                      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- this is injected by webpack
                      ///@ts-ignore
                      "2.2.11-1764118012397-e51ed7952926d731"
                    );
                    document.head.append(htmlElement);
                  };
                  options.domAPI = styleDomAPI_default();
                  options.insertStyleElement = insertStyleElement_default();
                  var update = injectStylesIntoStyleTag_default()(index_module.A, options);
                  const primary_index_module = index_module.A && index_module.A.locals ? index_module.A.locals : void 0;
                  ;
                  const ACTIVE_ADD_ON_ICON_SELECTOR = ".aT5-aOt-I-KO";
                  const COMPANION_SIDEBAR_CONTENT_CLOSED_SHADOW_CLASS = "brC-brG-btc";
                  class GmailAppSidebarPrimary {
                    constructor(driver, companionSidebarContentContainerElement) {
                      __privateAdd(this, _GmailAppSidebarPrimary_instances);
                      __privateAdd(this, _stopper, kefir_stopper_js_default()());
                      /**
                       * There could be multiple InboxSDK instances (and therefore GmailDrivers)
                       * talking to this Primary, so we shouldn't privilege the specific GmailDriver
                       * that happened to create the Primary. Only use this GmailDriver for
                       * logging-related functionality!
                       */
                      __privateAdd(this, _driver);
                      /**
                       * This Primary has an identifier used by the DOM events to specify they're
                       * talking to this Primary. This leaves us some room for having multiple
                       * Primary instances (representing different visual locations in Gmail) or
                       * multiple classes that make use of the same DOM events, but we don't make
                       * use of that now. Mainly I didn't want to risk baking in the singleton
                       * nature too deeply; that always seems to bite me.
                       */
                      __privateAdd(this, _instanceId, `${Date.now()}-${Math.random()}`);
                      __privateAdd(this, _companionSidebarContentContainerEl);
                      __privateAdd(this, _instanceIdsToDescriptors, /* @__PURE__ */ new Map());
                      __privateAdd(this, _threadSidebarComponent, null);
                      __privateAdd(this, _threadIconArea, null);
                      __privateAdd(this, _globalIconArea, null);
                      __privateAdd(this, _globalButtonContainers, /* @__PURE__ */ new Map());
                      __privateAdd(this, _threadButtonContainers, /* @__PURE__ */ new Map());
                      __privateAdd(this, _contentContainers, /* @__PURE__ */ new Map());
                      __privateAdd(this, _threadSidebarContainerEl, null);
                      __privateAdd(this, _companionSidebarOuterWrapper);
                      __privateAdd(this, _currentIds, /* @__PURE__ */ new Set());
                      __privateAdd(this, _orderManager, new (order_manager_js_default())({
                        get() {
                          try {
                            return JSON.parse(__webpack_require__2.g.localStorage.getItem("inboxsdk__sidebar_ordering") || "null");
                          } catch (err) {
                            console.error("failed to read sidebar order data", err);
                          }
                        },
                        set(data) {
                          try {
                            __webpack_require__2.g.localStorage.setItem("inboxsdk__sidebar_ordering", JSON.stringify(data));
                          } catch (err) {
                            console.error("failed to set sidebar order data", err);
                          }
                        }
                      }));
                      __privateAdd(this, _containerProp);
                      __privateAdd(this, _updateHighlightedAppThreadIconBus, kefir_bus_default()());
                      __privateAdd(this, _appSidebarRefSetter, (threadSidebarComponent) => {
                        if (threadSidebarComponent) {
                          __privateSet(this, _threadSidebarComponent, threadSidebarComponent);
                        }
                      });
                      __privateAdd(this, _closeButton, null);
                      __privateSet(this, _driver, driver);
                      __privateSet(this, _companionSidebarContentContainerEl, companionSidebarContentContainerElement);
                      __privateMethod(this, _GmailAppSidebarPrimary_instances, setupElement_fn).call(this);
                    }
                    getInstanceId() {
                      return __privateGet(this, _instanceId);
                    }
                    /**
                     * Only use this if a different Primary needs to take over this one's elements.
                     * Currently this is only done when hot-reloading in dev. Don't use this when
                     * a threadview exits, the sdk.destroy() is called, etc.
                     */
                    destroy() {
                      __privateGet(this, _stopper).destroy();
                    }
                  }
                  _stopper = new WeakMap();
                  _driver = new WeakMap();
                  _instanceId = new WeakMap();
                  _companionSidebarContentContainerEl = new WeakMap();
                  _instanceIdsToDescriptors = new WeakMap();
                  _threadSidebarComponent = new WeakMap();
                  _threadIconArea = new WeakMap();
                  _globalIconArea = new WeakMap();
                  _globalButtonContainers = new WeakMap();
                  _threadButtonContainers = new WeakMap();
                  _contentContainers = new WeakMap();
                  _threadSidebarContainerEl = new WeakMap();
                  _companionSidebarOuterWrapper = new WeakMap();
                  _currentIds = new WeakMap();
                  _orderManager = new WeakMap();
                  _containerProp = new WeakMap();
                  _updateHighlightedAppThreadIconBus = new WeakMap();
                  _GmailAppSidebarPrimary_instances = new WeakSet();
                  /**
                   * This value controls whether the app sidebar should automatically open
                   * itself when available when the chat sidebar isn't present. It's only set
                   * if the user interacts with the app sidebar button.
                   */
                  getShouldGlobalAppSidebarOpen_fn = function() {
                    return __webpack_require__2.g.localStorage.getItem("inboxsdk__global_app_sidebar_should_open") === "true";
                  };
                  setShouldGlobalAppSidebarOpen_fn = function(open) {
                    try {
                      __webpack_require__2.g.localStorage.setItem("inboxsdk__global_app_sidebar_should_open", String(open));
                    } catch (err) {
                      console.error("error saving", err);
                    }
                  };
                  getShouldThreadAppSidebarOpen_fn = function() {
                    return __webpack_require__2.g.localStorage.getItem("inboxsdk__thread_app_sidebar_should_open") !== "false";
                  };
                  setShouldThreadAppSidebarOpen_fn = function(open) {
                    try {
                      __webpack_require__2.g.localStorage.setItem("inboxsdk__thread_app_sidebar_should_open", String(open));
                    } catch (err) {
                      console.error("error saving", err);
                    }
                  };
                  createThreadSidebarIfNeeded_fn = function() {
                    if (__privateGet(this, _threadSidebarContainerEl)) return __privateGet(this, _threadSidebarContainerEl);
                    const threadSidebarContainerEl = __privateSet(this, _threadSidebarContainerEl, document.createElement("div"));
                    threadSidebarContainerEl.classList.add("thread_app_sidebar", (0, idMap.A)("app_sidebar_container"), "addon_sidebar");
                    __privateGet(this, _companionSidebarContentContainerEl).insertBefore(threadSidebarContainerEl, __privateGet(this, _companionSidebarContentContainerEl).firstElementChild);
                    __privateSet(this, _containerProp, () => threadSidebarContainerEl);
                    __privateGet(this, _updateHighlightedAppThreadIconBus).bufferWithTimeOrCount(150, 100).filter((events) => events.length > 0).takeUntilBy(__privateGet(this, _stopper)).onValue(() => {
                      const containerBoundingBox = threadSidebarContainerEl.getBoundingClientRect();
                      const titleBars = Array.from(threadSidebarContainerEl.querySelectorAll(`.${(0, idMap.A)("app_sidebar_content_panel")}.${(0, idMap.A)("expanded")} .${(0, idMap.A)("app_sidebar_content_panel_top_line")}`));
                      const absoluteScrollOfViewportTop = threadSidebarContainerEl.scrollTop;
                      const absoluteScrollOfViewportMidpoint = absoluteScrollOfViewportTop + containerBoundingBox.height / 2;
                      let titleBar = titleBars.find((t2) => {
                        const tBoundingBox = t2.getBoundingClientRect();
                        const relativeScrollOfTitleBottom = tBoundingBox.bottom;
                        const absoluteScrollOfTitleBottom = relativeScrollOfTitleBottom + absoluteScrollOfViewportTop;
                        return absoluteScrollOfTitleBottom > absoluteScrollOfViewportTop && absoluteScrollOfTitleBottom < absoluteScrollOfViewportMidpoint;
                      });
                      if (!titleBar) {
                        let lastElementAboveViewPort;
                        for (let i = 0; i < titleBars.length; i++) {
                          const tElement = titleBars[i];
                          const tBoundingBox = tElement.getBoundingClientRect();
                          const relativeScrollOfTitleBottom = tBoundingBox.bottom;
                          if (relativeScrollOfTitleBottom < 0) {
                            lastElementAboveViewPort = tElement;
                          } else if (relativeScrollOfTitleBottom > 0) {
                            break;
                          }
                        }
                        titleBar = lastElementAboveViewPort;
                      }
                      if (titleBar) {
                        const instanceId = titleBar.getAttribute("data-instance-id");
                        const appName = titleBar.getAttribute("data-app-name");
                        if (!appName) return;
                        const appButton = __privateGet(this, _threadButtonContainers).get(appName);
                        if (!appButton || !__privateGet(this, _threadIconArea)) return;
                        const activeButtonContainer = __privateGet(this, _threadIconArea).querySelector(".sidebar_button_container_active");
                        if (activeButtonContainer) {
                          activeButtonContainer.classList.remove("sidebar_button_container_active");
                        }
                        appButton.classList.add("sidebar_button_container_active");
                      }
                    });
                    __privateGet(this, _updateHighlightedAppThreadIconBus).plug(kefir_esm.fromEvents(threadSidebarContainerEl, "scroll").map(() => null));
                    __privateMethod(this, _GmailAppSidebarPrimary_instances, renderThreadSidebar_fn).call(this);
                    return threadSidebarContainerEl;
                  };
                  renderThreadSidebarIfPresent_fn = function() {
                    if (!__privateGet(this, _threadSidebarContainerEl)) {
                      return;
                    }
                    __privateMethod(this, _GmailAppSidebarPrimary_instances, renderThreadSidebar_fn).call(this);
                  };
                  _appSidebarRefSetter = new WeakMap();
                  renderThreadSidebar_fn = function() {
                    const threadSidebarContainerEl = __privateGet(this, _threadSidebarContainerEl);
                    if (!threadSidebarContainerEl) {
                      throw new Error("_renderThreadSidebar should not be called when _threadSidebarContainerEl is unset");
                    }
                    return new Promise((resolve) => {
                      react_dom.render(/* @__PURE__ */ react.createElement(AppSidebar, {
                        ref: __privateGet(this, _appSidebarRefSetter),
                        panels: __privateGet(this, _orderManager).getOrderedItems().map((x) => x.value),
                        onMoveEnd: (newList, movedItem, oldIndex, newIndex) => {
                          __privateGet(this, _orderManager).moveItem(oldIndex, newIndex);
                          __privateMethod(this, _GmailAppSidebarPrimary_instances, renderThreadSidebar_fn).call(this);
                        },
                        onExpandedToggle: () => {
                          __privateGet(this, _updateHighlightedAppThreadIconBus).emit(null);
                        },
                        container: __privateGet(this, _containerProp)
                      }), threadSidebarContainerEl, () => {
                        if (!__privateGet(this, _threadSidebarComponent)) {
                          throw new Error("Should not happen");
                        }
                        resolve(__privateGet(this, _threadSidebarComponent));
                        __privateGet(this, _updateHighlightedAppThreadIconBus).emit(null);
                      });
                    });
                  };
                  getActiveButtonContainer_fn = function() {
                    let activeButtonContainer;
                    if (__privateGet(this, _globalIconArea)) {
                      activeButtonContainer = __privateGet(this, _globalIconArea).querySelector(".sidebar_button_container_active");
                    }
                    if (!activeButtonContainer && __privateGet(this, _threadIconArea)) {
                      activeButtonContainer = __privateGet(this, _threadIconArea).querySelector(".sidebar_button_container_active");
                    }
                    return activeButtonContainer;
                  };
                  _closeButton = new WeakMap();
                  addButton_fn = function(iconArea, event, isGlobal) {
                    var _this = this;
                    browser_asap_default()(() => {
                      if (!iconArea) throw new Error("should not happen");
                      const instanceId = event.detail.instanceId;
                      const iconUrl = isGlobal && event.detail.iconUrl ? event.detail.iconUrl : event.detail.appIconUrl;
                      const appName = event.detail.appName;
                      const {
                        iconClass = "",
                        iconLiga
                      } = event.detail;
                      const existingButtonContainer = isGlobal ? __privateGet(this, _globalButtonContainers).get(appName) : __privateGet(this, _threadButtonContainers).get(appName);
                      let buttonContainer;
                      if (existingButtonContainer) {
                        const currentCount = Number(existingButtonContainer.getAttribute("data-count")) || 1;
                        existingButtonContainer.setAttribute("data-count", String(currentCount + 1));
                        buttonContainer = existingButtonContainer;
                      } else {
                        buttonContainer = document.createElement("div");
                        buttonContainer.className = (0, idMap.A)("sidebar_button_container");
                        buttonContainer.setAttribute("data-app-name", appName);
                        buttonContainer.innerHTML = `
          <button class="inboxsdk__button_icon ${escape_default()(iconClass)}" type="button" data-tooltip="${escape_default()(appName)}">
            ${iconLiga ? `<span class="${escape_default()(index_module.N)}">${escape_default()(iconLiga).trim()}</div>` : `<img class="inboxsdk__button_iconImg" src="${escape_default()(iconUrl)}">`}
          </button>
          <div class="inboxsdk__button_selectedIndicator"></div>
        `;
                        if (event.detail.primaryColor) {
                          (0, querySelectorOrFail.A)(buttonContainer, ".inboxsdk__button_selectedIndicator").style.backgroundColor = event.detail.primaryColor;
                        }
                        if (isGlobal) {
                          __privateGet(this, _globalButtonContainers).set(appName, buttonContainer);
                        } else {
                          __privateGet(this, _threadButtonContainers).set(appName, buttonContainer);
                        }
                        const activate = function() {
                          var _a, _b, _c, _d, _e, _f;
                          let dontScrollIntoView = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
                          const activeButtonContainer = __privateMethod(_a = _this, _GmailAppSidebarPrimary_instances, getActiveButtonContainer_fn).call(_a);
                          if (activeButtonContainer === buttonContainer) {
                            if (!__privateGet(_this, _closeButton)) throw new Error();
                            __privateGet(_b = _this, _closeButton).call(_b, true);
                          } else {
                            if (__privateGet(_this, _closeButton)) {
                              __privateGet(_c = _this, _closeButton).call(_c, true);
                            }
                            if (isGlobal) __privateMethod(_d = _this, _GmailAppSidebarPrimary_instances, setShouldGlobalAppSidebarOpen_fn).call(_d, true);
                            else __privateMethod(_e = _this, _GmailAppSidebarPrimary_instances, setShouldThreadAppSidebarOpen_fn).call(_e, true);
                            __privateMethod(_f = _this, _GmailAppSidebarPrimary_instances, openSidebarAndActivateButton_fn).call(_f, buttonContainer, isGlobal);
                            if (isGlobal) {
                              const contentEl = __privateGet(_this, _contentContainers).get(appName);
                              if (contentEl) contentEl.style.display = "";
                              __privateGet(_this, _companionSidebarContentContainerEl).classList.add("companion_global_app_sidebar_visible");
                              document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated", {
                                bubbles: true,
                                cancelable: false,
                                detail: {
                                  instanceId
                                }
                              }));
                            } else {
                              const threadSidebarComponent = __privateGet(_this, _threadSidebarComponent);
                              if (!threadSidebarComponent) {
                                throw new Error("sidebar not mounted");
                              }
                              if (!dontScrollIntoView) {
                                threadSidebarComponent.openPanel(instanceId);
                                threadSidebarComponent.scrollPanelIntoView(instanceId, true);
                              }
                            }
                            __privateSet(_this, _closeButton, (userClick) => {
                              var _a2, _b2, _c2, _d2;
                              __privateSet(_this, _closeButton, null);
                              const activeButtonContainer2 = __privateMethod(_a2 = _this, _GmailAppSidebarPrimary_instances, getActiveButtonContainer_fn).call(_a2);
                              if (!activeButtonContainer2) {
                                throw new Error("Expected activeButtonContainer");
                              }
                              __privateMethod(_b2 = _this, _GmailAppSidebarPrimary_instances, closeSidebarAndDeactivateButton_fn).call(_b2, activeButtonContainer2);
                              if (isGlobal) {
                                if (userClick) __privateMethod(_c2 = _this, _GmailAppSidebarPrimary_instances, setShouldGlobalAppSidebarOpen_fn).call(_c2, false);
                                const contentEl = __privateGet(_this, _contentContainers).get(appName);
                                if (contentEl) {
                                  contentEl.style.display = "none";
                                } else {
                                  __privateGet(_this, _driver).getLogger().error(new Error("Unexpected: contentEl not set"));
                                }
                                document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated", {
                                  bubbles: true,
                                  cancelable: false,
                                  detail: {
                                    instanceId
                                  }
                                }));
                              } else {
                                if (userClick) __privateMethod(_d2 = _this, _GmailAppSidebarPrimary_instances, setShouldThreadAppSidebarOpen_fn).call(_d2, false);
                              }
                              (0, fake_window_resize.A)();
                            });
                            (0, fake_window_resize.A)();
                          }
                        };
                        (0, querySelectorOrFail.A)(buttonContainer, "button").addEventListener("click", (event2) => {
                          event2.stopPropagation();
                          activate();
                        }, true);
                        if (iconArea) {
                          (0, add_to_icon_area.A)(__privateGet(this, _orderManager), appName, buttonContainer, iconArea);
                        }
                        {
                          const activeButtonContainer = __privateMethod(this, _GmailAppSidebarPrimary_instances, getActiveButtonContainer_fn).call(this);
                          if (isGlobal) {
                            if (__privateMethod(this, _GmailAppSidebarPrimary_instances, getShouldGlobalAppSidebarOpen_fn).call(this)) {
                              const activeButtonContainerPresentAndIsForGlobal = __privateGet(this, _globalIconArea) && activeButtonContainer && __privateGet(this, _globalIconArea).contains(activeButtonContainer);
                              if (!activeButtonContainerPresentAndIsForGlobal) {
                                activate(true);
                              }
                            }
                          } else {
                            if (__privateMethod(this, _GmailAppSidebarPrimary_instances, getShouldThreadAppSidebarOpen_fn).call(this)) {
                              const activeButtonContainerPresentAndIsForThread = __privateGet(this, _threadIconArea) && activeButtonContainer && __privateGet(this, _threadIconArea).contains(activeButtonContainer);
                              if (!activeButtonContainerPresentAndIsForThread) {
                                activate(true);
                              }
                            }
                          }
                        }
                      }
                    });
                  };
                  removeButton_fn = function(event, buttonContainers, iconArea) {
                    const appName = event.detail.appName;
                    const container = buttonContainers.get(appName);
                    if (!iconArea || !container) {
                      throw new Error("should not happen: tried to remove button without container or iconArea");
                    }
                    const currentCount = Number(container.getAttribute("data-count"));
                    if (currentCount <= 1) {
                      const activeButtonContainer = iconArea.querySelector(".sidebar_button_container_active");
                      if (container === activeButtonContainer) {
                        if (!__privateGet(this, _closeButton)) throw new Error();
                        __privateGet(this, _closeButton).call(this, false);
                        __privateGet(this, _companionSidebarOuterWrapper).classList.remove("companion_app_sidebar_wrapper_visible");
                        __privateGet(this, _companionSidebarContentContainerEl).classList.remove("companion_app_sidebar_visible");
                        const contentContainer = __privateGet(this, _companionSidebarOuterWrapper).previousElementSibling;
                        if (contentContainer) contentContainer.classList.remove("companion_container_app_sidebar_visible");
                      }
                      container.remove();
                      buttonContainers.delete(appName);
                    } else if (currentCount === 2) {
                      container.removeAttribute("data-count");
                    } else {
                      container.setAttribute("data-count", String(currentCount - 1));
                    }
                  };
                  closeSidebarAndDeactivateButton_fn = function(activeButtonContainer) {
                    activeButtonContainer.classList.remove("sidebar_button_container_active");
                    __privateGet(this, _companionSidebarOuterWrapper).classList.remove("companion_app_sidebar_wrapper_visible");
                    __privateGet(this, _companionSidebarContentContainerEl).classList.add(COMPANION_SIDEBAR_CONTENT_CLOSED_SHADOW_CLASS);
                    __privateGet(this, _companionSidebarContentContainerEl).classList.remove("companion_app_sidebar_visible", "companion_global_app_sidebar_visible");
                    const contentContainer = __privateGet(this, _companionSidebarOuterWrapper).previousElementSibling;
                    if (contentContainer) contentContainer.classList.remove("companion_container_app_sidebar_visible");
                  };
                  openSidebarAndActivateButton_fn = function(buttonContainer, isGlobal) {
                    const companionSidebarIconContainerEl = gmail_element_getter.A.getCompanionSidebarIconContainerElement();
                    if (!companionSidebarIconContainerEl) throw new Error("Could not find companion sidebar icon container element");
                    const activeButtonContainer = __privateMethod(this, _GmailAppSidebarPrimary_instances, getActiveButtonContainer_fn).call(this);
                    if (activeButtonContainer) {
                      throw new Error("activeButtonContainer should not be true");
                    }
                    {
                      const nativeActiveAddOnIcon = companionSidebarIconContainerEl.querySelector(ACTIVE_ADD_ON_ICON_SELECTOR);
                      if (nativeActiveAddOnIcon) {
                        (0, simulate_mouse_event.jp)(nativeActiveAddOnIcon);
                      }
                    }
                    buttonContainer.classList.add("sidebar_button_container_active");
                    __privateGet(this, _companionSidebarOuterWrapper).classList.add("companion_app_sidebar_wrapper_visible");
                    __privateGet(this, _companionSidebarContentContainerEl).classList.add("companion_app_sidebar_visible");
                    __privateGet(this, _companionSidebarContentContainerEl).classList.remove(COMPANION_SIDEBAR_CONTENT_CLOSED_SHADOW_CLASS);
                    const contentContainer = __privateGet(this, _companionSidebarOuterWrapper).previousElementSibling;
                    if (contentContainer) contentContainer.classList.add("companion_container_app_sidebar_visible");
                    if (isGlobal) __privateGet(this, _companionSidebarContentContainerEl).classList.add("companion_global_app_sidebar_visible");
                  };
                  setupElement_fn = function() {
                    const companionSidebarIconContainerEl = gmail_element_getter.A.getCompanionSidebarIconContainerElement();
                    if (!companionSidebarIconContainerEl) throw new Error("Could not find companion sidebar icon container element");
                    __privateGet(this, _companionSidebarContentContainerEl).setAttribute("data-sdk-sidebar-instance-id", __privateGet(this, _instanceId));
                    __privateSet(this, _companionSidebarOuterWrapper, __privateGet(this, _companionSidebarContentContainerEl).classList.contains("bq9") ? __privateGet(this, _companionSidebarContentContainerEl) : __privateGet(this, _companionSidebarContentContainerEl).parentElement);
                    if (!__privateGet(this, _companionSidebarOuterWrapper)) {
                      throw new Error("should not happen: failed to find companionSidebarOuterWrapper");
                    }
                    if (__privateGet(this, _companionSidebarOuterWrapper).classList.contains("WN9Ejb")) {
                      document.body.classList.add("inboxsdk__sidebar_icons_right");
                      __privateGet(this, _driver).getLogger().eventSite("sidebar_icons_right");
                    }
                    const contentContainer = __privateGet(this, _companionSidebarOuterWrapper).previousElementSibling;
                    if (contentContainer) {
                      contentContainer.classList.add((0, idMap.A)("companion_container_app_sidebar_in_use"));
                    }
                    __privateGet(this, _companionSidebarContentContainerEl).classList.add((0, idMap.A)("app_sidebar_in_use"));
                    if (!document.body.querySelector(sidebarWaitingPlatformSelector)) {
                      const waitingPlatform = document.createElement("div");
                      waitingPlatform.className = classnames_default()(sidebarWaitingPlatformClassName, (0, idMap.A)("app_sidebar_waiting_platform"));
                      document.body.appendChild(waitingPlatform);
                    }
                    {
                      kefir_esm.fromEvents(window, "storage").filter((e) => e.key === "inboxsdk__sidebar_ordering").takeUntilBy(__privateGet(this, _stopper)).onValue(() => {
                        __privateGet(this, _orderManager).reload();
                        __privateMethod(this, _GmailAppSidebarPrimary_instances, renderThreadSidebarIfPresent_fn).call(this);
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkNewSidebarPanel").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && !e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        __privateMethod(this, _GmailAppSidebarPrimary_instances, createThreadSidebarIfNeeded_fn).call(this);
                        let id = event.detail.id;
                        while (__privateGet(this, _currentIds).has(id)) {
                          id = incrementName(id);
                        }
                        __privateGet(this, _currentIds).add(id);
                        const appName = event.detail.appName;
                        __privateGet(this, _orderManager).addItem({
                          groupId: event.detail.appId,
                          id,
                          orderHint: event.detail.orderHint,
                          value: {
                            id,
                            appName,
                            appId: event.detail.appId,
                            instanceId: event.detail.instanceId,
                            title: event.detail.title,
                            iconClass: event.detail.iconClass,
                            iconLiga: event.detail.iconLiga,
                            iconUrl: event.detail.iconUrl,
                            hideTitleBar: event.detail.hideTitleBar,
                            el: event.target
                          }
                        });
                        __privateMethod(this, _GmailAppSidebarPrimary_instances, renderThreadSidebar_fn).call(this);
                        let threadIconArea = __privateSet(this, _threadIconArea, companionSidebarIconContainerEl.querySelector(".sidebar_thread_iconArea"));
                        if (!threadIconArea) {
                          threadIconArea = __privateSet(this, _threadIconArea, document.createElement("div"));
                          threadIconArea.className = (0, idMap.A)("sidebar_iconArea");
                          threadIconArea.classList.add("sidebar_thread_iconArea");
                          (0, add_companion_thread_icon_area.A)(__privateGet(this, _driver).getLogger(), threadIconArea, companionSidebarIconContainerEl);
                        }
                        __privateMethod(this, _GmailAppSidebarPrimary_instances, addButton_fn).call(this, threadIconArea, event, false);
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkUpdateSidebarPanel").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && !e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        const orderedItems = __privateGet(this, _orderManager).getOrderedItems();
                        const index = findIndex_default()(orderedItems, (x) => x.value.instanceId === event.detail.instanceId);
                        if (index === -1) throw new Error("should not happen: failed to find orderItem");
                        __privateGet(this, _orderManager).updateItemValueByIndex(index, {
                          id: orderedItems[index].value.id,
                          appId: event.detail.appId,
                          appName: event.detail.appName || event.detail.title,
                          instanceId: event.detail.instanceId,
                          title: event.detail.title,
                          iconClass: event.detail.iconClass,
                          iconLiga: event.detail.iconLiga,
                          iconUrl: event.detail.iconUrl,
                          hideTitleBar: event.detail.hideTitleBar,
                          el: event.target
                        });
                        __privateMethod(this, _GmailAppSidebarPrimary_instances, renderThreadSidebar_fn).call(this);
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkRemoveSidebarPanel").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && !e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        const orderedItems = __privateGet(this, _orderManager).getOrderedItems();
                        const index = findIndex_default()(orderedItems, (x) => x.value.instanceId === event.detail.instanceId);
                        if (index === -1) throw new Error("should not happen: failed to find orderItem");
                        __privateGet(this, _currentIds).delete(orderedItems[index].id);
                        __privateGet(this, _orderManager).removeItemByIndex(index);
                        __privateMethod(this, _GmailAppSidebarPrimary_instances, renderThreadSidebar_fn).call(this);
                        __privateMethod(this, _GmailAppSidebarPrimary_instances, removeButton_fn).call(this, event, __privateGet(this, _threadButtonContainers), __privateGet(this, _threadIconArea));
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelScrollIntoView").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && !e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        if (__privateGet(this, _threadSidebarComponent)) __privateGet(this, _threadSidebarComponent).scrollPanelIntoView(event.detail.instanceId);
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelClose").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && !e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        if (__privateGet(this, _threadSidebarComponent)) __privateGet(this, _threadSidebarComponent).closePanel(event.detail.instanceId);
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelOpen").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && !e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((e) => {
                        __privateMethod(this, _GmailAppSidebarPrimary_instances, renderThreadSidebar_fn).call(this).then((threadSidebarComponent) => {
                          const descriptor = __privateGet(this, _instanceIdsToDescriptors).get(e.detail.instanceId);
                          if (!descriptor) return;
                          const buttonContainer = __privateGet(this, _threadButtonContainers).get(descriptor.appName);
                          if (!buttonContainer) {
                            throw new Error("missing button container");
                          }
                          const activeButtonContainer = __privateMethod(this, _GmailAppSidebarPrimary_instances, getActiveButtonContainer_fn).call(this);
                          if (activeButtonContainer !== buttonContainer) {
                            (0, querySelectorOrFail.A)(buttonContainer, "button").click();
                          }
                        });
                      });
                    }
                    {
                      kefir_esm.fromEvents(document.body, "inboxsdkNewSidebarPanel").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        let id = event.detail.id;
                        while (__privateGet(this, _currentIds).has(id)) {
                          id = incrementName(id);
                        }
                        __privateGet(this, _currentIds).add(id);
                        const appName = event.detail.appName;
                        let globalIconArea = __privateSet(this, _globalIconArea, companionSidebarIconContainerEl.querySelector(".sidebar_global_iconArea"));
                        if (!globalIconArea) {
                          globalIconArea = __privateSet(this, _globalIconArea, document.createElement("div"));
                          globalIconArea.className = (0, idMap.A)("sidebar_iconArea");
                          globalIconArea.classList.add("sidebar_global_iconArea");
                          (0, add_companion_global_icon_area.A)(__privateGet(this, _driver).getLogger(), globalIconArea, companionSidebarIconContainerEl);
                        }
                        const sdkContentContainerEl = document.createElement("div");
                        sdkContentContainerEl.classList.add("addon_sidebar", (0, idMap.A)("app_sidebar_container"), "global_app_sidebar");
                        __privateGet(this, _companionSidebarContentContainerEl).insertAdjacentElement("afterbegin", sdkContentContainerEl);
                        __privateGet(this, _contentContainers).set(appName, sdkContentContainerEl);
                        sdkContentContainerEl.appendChild(event.target);
                        sdkContentContainerEl.style.display = "none";
                        __privateMethod(this, _GmailAppSidebarPrimary_instances, addButton_fn).call(this, globalIconArea, event, true);
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkUpdateSidebarPanel").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        const buttonContainer = __privateGet(this, _globalButtonContainers).get(event.detail.appName);
                        if (!buttonContainer) return;
                        const {
                          iconClass = "",
                          iconLiga,
                          iconUrl = event.detail.appIconUrl
                        } = event.detail;
                        if (!iconLiga) {
                          const imgElement = (0, querySelectorOrFail.A)(buttonContainer, "img");
                          imgElement.setAttribute("src", iconUrl);
                        }
                        const button = (0, querySelectorOrFail.A)(buttonContainer, "button");
                        button.setAttribute("class", `inboxsdk__button_icon ${iconClass}`);
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkRemoveSidebarPanel").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        __privateGet(this, _currentIds).delete(event.detail.id);
                        __privateMethod(this, _GmailAppSidebarPrimary_instances, removeButton_fn).call(this, event, __privateGet(this, _globalButtonContainers), __privateGet(this, _globalIconArea));
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelClose").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        const descriptor = __privateGet(this, _instanceIdsToDescriptors).get(event.detail.instanceId);
                        if (!descriptor) return;
                        const buttonContainer = __privateGet(this, _globalButtonContainers).get(descriptor.appName);
                        if (!buttonContainer) return;
                        const activeButtonContainer = __privateMethod(this, _GmailAppSidebarPrimary_instances, getActiveButtonContainer_fn).call(this);
                        if (activeButtonContainer === buttonContainer) {
                          if (!__privateGet(this, _closeButton)) {
                            throw new Error("Expected this._closeButton");
                          }
                          __privateGet(this, _closeButton).call(this, true);
                        }
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelOpen").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId) && e.detail.isGlobal).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        const descriptor = __privateGet(this, _instanceIdsToDescriptors).get(event.detail.instanceId);
                        if (!descriptor) return;
                        const buttonContainer = __privateGet(this, _globalButtonContainers).get(descriptor.appName);
                        if (!buttonContainer) return;
                        const activeButtonContainer = __privateMethod(this, _GmailAppSidebarPrimary_instances, getActiveButtonContainer_fn).call(this);
                        if (activeButtonContainer !== buttonContainer) {
                          (0, querySelectorOrFail.A)(buttonContainer, "button").click();
                        }
                      });
                    }
                    {
                      kefir_esm.fromEvents(document.body, "inboxsdkNewSidebarPanel").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId)).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        __privateGet(this, _instanceIdsToDescriptors).set(event.detail.instanceId, event.detail);
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkRemoveSidebarPanel").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId)).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        __privateGet(this, _instanceIdsToDescriptors).delete(event.detail.instanceId);
                      });
                      kefir_esm.fromEvents(document.body, "inboxsdkUpdateSidebarPanel").filter((e) => e.detail.sidebarId === __privateGet(this, _instanceId)).takeUntilBy(__privateGet(this, _stopper)).onValue((event) => {
                        __privateGet(this, _instanceIdsToDescriptors).set(event.detail.instanceId, event.detail);
                      });
                    }
                    const globalAddOnContentContainer = __privateGet(this, _companionSidebarContentContainerEl).children[0];
                    const threadAddOnContentContainer = __privateGet(this, _companionSidebarContentContainerEl).children[1];
                    kefir_esm.merge([globalAddOnContentContainer, threadAddOnContentContainer].map((addonContentEl) => (0, make_mutation_observer_chunked_stream.A)(addonContentEl, {
                      attributes: true,
                      attributeFilter: ["style"]
                    }))).filter(() => globalAddOnContentContainer.style.display !== threadAddOnContentContainer.style.display).takeUntilBy(__privateGet(this, _stopper)).onValue(() => {
                      const activeButtonContainer = __privateMethod(this, _GmailAppSidebarPrimary_instances, getActiveButtonContainer_fn).call(this);
                      if (activeButtonContainer) {
                        (0, querySelectorOrFail.A)(activeButtonContainer, "button").click();
                      }
                    });
                  };
                  const gmail_app_sidebar_view_primary = GmailAppSidebarPrimary;
                  var delay_asap = __webpack_require__2(1136);
                  ;
                  class ContentPanelViewDriver {
                    constructor(driver, descriptor, sidebarId, isGlobal) {
                      __privateAdd(this, _driver2);
                      __privateAdd(this, _stopper2);
                      __privateAdd(this, _eventStream, kefir_bus_default()());
                      __privateAdd(this, _isActive, false);
                      /**
                       * This is not the `id` property passed by the application, but a random
                       * unique identifier used to manage a specific instance.
                       * */
                      __privateAdd(this, _instanceId2, `${Date.now()}-${Math.random()}`);
                      __privateAdd(this, _sidebarId);
                      __privateAdd(this, _isGlobal);
                      __privateSet(this, _driver2, driver);
                      __privateSet(this, _sidebarId, sidebarId);
                      __privateSet(this, _isGlobal, Boolean(isGlobal));
                      __privateSet(this, _stopper2, __privateGet(this, _eventStream).ignoreValues().beforeEnd(() => null).toProperty());
                      __privateGet(this, _eventStream).plug(kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelActivated").filter((e) => e.detail.instanceId === __privateGet(this, _instanceId2)).map(() => {
                        __privateSet(this, _isActive, true);
                        return {
                          eventName: "activate"
                        };
                      }));
                      __privateGet(this, _eventStream).plug(kefir_esm.fromEvents(document.body, "inboxsdkSidebarPanelDeactivated").filter((e) => e.detail.instanceId === __privateGet(this, _instanceId2)).map(() => {
                        __privateSet(this, _isActive, false);
                        return {
                          eventName: "deactivate"
                        };
                      }));
                      const afterAsap = (0, delay_asap.A)().toProperty().onValue(() => {
                      });
                      let hasPlacedAlready = false;
                      let appName;
                      const waitingPlatform = (0, querySelectorOrFail.A)(document.body, sidebarWaitingPlatformSelector);
                      descriptor.flatMap((x) => afterAsap.map(() => x)).takeUntilBy(__privateGet(this, _stopper2)).onValue((descriptor2) => {
                        const {
                          el,
                          iconUrl,
                          iconLiga,
                          iconClass,
                          title,
                          orderHint,
                          id,
                          hideTitleBar,
                          appIconUrl,
                          primaryColor,
                          secondaryColor
                        } = descriptor2;
                        appName = descriptor2.appName || driver.getOpts().appName || descriptor2.title;
                        if (!document.body.contains(el)) {
                          waitingPlatform.appendChild(el);
                        }
                        const eventName = hasPlacedAlready ? "inboxsdkUpdateSidebarPanel" : "inboxsdkNewSidebarPanel";
                        hasPlacedAlready = true;
                        el.dispatchEvent(new CustomEvent(eventName, {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            appIconUrl: appIconUrl || __privateGet(this, _driver2).getOpts().appIconUrl || iconUrl,
                            appId: __privateGet(this, _driver2).getAppId(),
                            appName,
                            hideTitleBar: Boolean(hideTitleBar),
                            iconClass,
                            iconLiga,
                            iconUrl,
                            id: String(id || title),
                            instanceId: __privateGet(this, _instanceId2),
                            isGlobal,
                            orderHint: typeof orderHint === "number" ? orderHint : 0,
                            primaryColor: primaryColor || __privateGet(this, _driver2).getOpts().primaryColor,
                            secondaryColor: secondaryColor || __privateGet(this, _driver2).getOpts().secondaryColor,
                            sidebarId: __privateGet(this, _sidebarId),
                            title
                          }
                        }));
                      });
                      __privateGet(this, _stopper2).onValue(() => {
                        if (!hasPlacedAlready) return;
                        document.body.dispatchEvent(new CustomEvent("inboxsdkRemoveSidebarPanel", {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            appName,
                            sidebarId: __privateGet(this, _sidebarId),
                            instanceId: __privateGet(this, _instanceId2),
                            isGlobal
                          }
                        }));
                      });
                    }
                    getStopper() {
                      return __privateGet(this, _stopper2);
                    }
                    getEventStream() {
                      return __privateGet(this, _eventStream);
                    }
                    // TODO: is this used?
                    scrollIntoView() {
                      document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelScrollIntoView", {
                        bubbles: true,
                        cancelable: false,
                        detail: {
                          instanceId: __privateGet(this, _instanceId2),
                          sidebarId: __privateGet(this, _sidebarId)
                        }
                      }));
                    }
                    close() {
                      document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelClose", {
                        bubbles: true,
                        cancelable: false,
                        detail: {
                          instanceId: __privateGet(this, _instanceId2),
                          isGlobal: __privateGet(this, _isGlobal),
                          sidebarId: __privateGet(this, _sidebarId)
                        }
                      }));
                    }
                    open() {
                      document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelOpen", {
                        bubbles: true,
                        cancelable: false,
                        detail: {
                          instanceId: __privateGet(this, _instanceId2),
                          isGlobal: __privateGet(this, _isGlobal),
                          sidebarId: __privateGet(this, _sidebarId)
                        }
                      }));
                    }
                    isActive() {
                      return __privateGet(this, _isActive);
                    }
                    remove() {
                      __privateGet(this, _eventStream).end();
                    }
                  }
                  _driver2 = new WeakMap();
                  _stopper2 = new WeakMap();
                  _eventStream = new WeakMap();
                  _isActive = new WeakMap();
                  _instanceId2 = new WeakMap();
                  _sidebarId = new WeakMap();
                  _isGlobal = new WeakMap();
                  const sidebar_ContentPanelViewDriver = ContentPanelViewDriver;
                  ;
                  module2 = __webpack_require__2.hmd(module2);
                  const updates = js_default()(module2, null);
                  class GmailAppSidebarView {
                    constructor(driver, companionSidebarContentContainerElement) {
                      __privateAdd(this, _stopper3, kefir_stopper_js_default()());
                      __privateAdd(this, _driver3);
                      __privateAdd(this, _instanceId3);
                      __privateSet(this, _driver3, driver);
                      const instanceId = companionSidebarContentContainerElement.getAttribute("data-sdk-sidebar-instance-id");
                      if (instanceId != null) {
                        __privateSet(this, _instanceId3, instanceId);
                      } else {
                        let primary = new gmail_app_sidebar_view_primary(driver, companionSidebarContentContainerElement);
                        __privateSet(this, _instanceId3, primary.getInstanceId());
                        updates.changes().onValue(() => {
                          primary.destroy();
                          primary = new gmail_app_sidebar_view_primary(driver, companionSidebarContentContainerElement);
                          __privateSet(this, _instanceId3, primary.getInstanceId());
                        });
                      }
                    }
                    destroy() {
                      __privateGet(this, _stopper3).destroy();
                    }
                    getStopper() {
                      return __privateGet(this, _stopper3);
                    }
                    addThreadSidebarContentPanel(descriptor, threadView) {
                      const panel = new sidebar_ContentPanelViewDriver(__privateGet(this, _driver3), descriptor, __privateGet(this, _instanceId3));
                      kefir_esm.merge([threadView.getStopper(), __privateGet(this, _stopper3)]).take(1).takeUntilBy(panel.getStopper()).onValue(() => panel.remove());
                      return panel;
                    }
                    addGlobalSidebarContentPanel(descriptor) {
                      const panel = new sidebar_ContentPanelViewDriver(__privateGet(this, _driver3), descriptor, __privateGet(this, _instanceId3), true);
                      __privateGet(this, _stopper3).takeUntilBy(panel.getStopper()).onValue(() => panel.remove());
                      return panel;
                    }
                  }
                  _stopper3 = new WeakMap();
                  _driver3 = new WeakMap();
                  _instanceId3 = new WeakMap();
                  const gmail_app_sidebar_view = GmailAppSidebarView;
                })
              ),
              /***/
              6416: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7332);
                  module2 = __webpack_require__2.hmd(module2);
                  const GLOBAL_ICON_AREA_SELECTOR = ".brC-aT5-aOt-bsf-Jw";
                  function addCompanionGlobalIconArea(logger, iconArea, companionSidebarIconContainerEl) {
                    const sidebarIconArea = companionSidebarIconContainerEl.querySelector(GLOBAL_ICON_AREA_SELECTOR);
                    if (!sidebarIconArea) {
                      logger.error(new Error("addCompanionGlobalIconArea: no sidebarIconArea"));
                      return;
                    }
                    const nativeIconArea = sidebarIconArea.firstElementChild;
                    if (!nativeIconArea) {
                      logger.error(new Error("addCompanionGlobalIconArea: no nativeIconArea"));
                      return;
                    }
                    nativeIconArea.insertAdjacentElement("beforebegin", iconArea);
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_0__.defn)(module2, addCompanionGlobalIconArea);
                })
              ),
              /***/
              1763: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7332);
                  module2 = __webpack_require__2.hmd(module2);
                  const TAB_LIST_SELECTOR = "[role=tablist],.J-KU-Jg";
                  function addCompanionThreadIconArea(logger, iconArea, companionSidebarIconContainerEl) {
                    const tabList = companionSidebarIconContainerEl.querySelector(TAB_LIST_SELECTOR);
                    if (!tabList) {
                      logger.error(new Error("addCompanionThreadIconArea: no tablist"));
                      return;
                    }
                    const separator = companionSidebarIconContainerEl.querySelector("[role=separator]");
                    if (!separator) {
                      logger.error(new Error("addCompanionThreadIconArea: failed to find separator"));
                      tabList.insertAdjacentElement("beforebegin", iconArea);
                    } else {
                      if (!separator.parentElement) throw new Error();
                      separator.parentElement.insertBefore(iconArea, separator.nextElementSibling);
                    }
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_0__.defn)(module2, addCompanionThreadIconArea);
                })
              ),
              /***/
              3451: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(7332);
                  var lodash_findIndex__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(9339);
                  var lodash_findIndex__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(lodash_findIndex__WEBPACK_IMPORTED_MODULE_0__);
                  var _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(5389);
                  module2 = __webpack_require__2.hmd(module2);
                  function addToIconArea(orderManager, appName, container, iconArea) {
                    [...iconArea.querySelectorAll("[data-app-name]")].forEach((el) => {
                      const elAppName = el.getAttribute("data-app-name");
                      const index2 = lodash_findIndex__WEBPACK_IMPORTED_MODULE_0___default()(orderManager.getOrderedItems(), (_ref) => {
                        let {
                          value
                        } = _ref;
                        return value.appName === elAppName;
                      });
                      el.setAttribute("data-order-hint", index2);
                    });
                    const index = lodash_findIndex__WEBPACK_IMPORTED_MODULE_0___default()(orderManager.getOrderedItems(), (_ref2) => {
                      let {
                        value
                      } = _ref2;
                      return value.appName === appName;
                    });
                    if (index > -1) container.setAttribute("data-order-hint", index);
                    (0, _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_1__.A)(iconArea, container, ["data-order-hint"]);
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_2__.defn)(module2, addToIconArea);
                })
              ),
              /***/
              3737: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  var _element, _seenBodyElement, _isInlineReplyForm, _isFullscreen, _isStandalone, _driver, _managedViewControllers, _eventStream, _isTriggeringADraftSavePending, _buttonViewControllerTooltipMap, _composeID, _messageIDElement, _messageId, _initialMessageId, _targetMessageID, _draftIDpromise, _threadID, _stopper, _lastSelectionRange, _requestModifiers, _isListeningToAjaxInterceptStream, _formattingArea, _closedProgrammatically, _destroyed, _removedFromDOMStopper, _hasSetupLinkPopOvers, _page, _GmailComposeView_instances, destroy_fn, getSubjectChangesStream_fn, setupStreams_fn, setupConsistencyCheckers_fn, setupIDs_fn, updateComposeFullscreenState_fn, hideDropzones_fn, reenableDropzones_fn, dropzonesVisible_fn, findDropzoneForThisCompose_fn, attachFiles_fn, getDraftIDfromForm_fn, getMessageIDfromForm_fn, getDraftIDimplementation_fn, triggerDraftSave_fn, getTargetMessageID_fn, startListeningForModificationRequests_fn;
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      gmail_compose_view
                    )
                  });
                  var js = __webpack_require__2(1812);
                  var js_default = /* @__PURE__ */ __webpack_require__2.n(js);
                  var transducers = __webpack_require__2(6046);
                  var transducers_default = /* @__PURE__ */ __webpack_require__2.n(transducers);
                  var once = __webpack_require__2(8921);
                  var once_default = /* @__PURE__ */ __webpack_require__2.n(once);
                  var lodash_escape = __webpack_require__2(3131);
                  var escape_default = /* @__PURE__ */ __webpack_require__2.n(lodash_escape);
                  var constant = __webpack_require__2(7660);
                  var constant_default = /* @__PURE__ */ __webpack_require__2.n(constant);
                  var find = __webpack_require__2(4455);
                  var find_default = /* @__PURE__ */ __webpack_require__2.n(find);
                  var browser_asap = __webpack_require__2(4622);
                  var browser_asap_default = /* @__PURE__ */ __webpack_require__2.n(browser_asap);
                  var pdelay_js = __webpack_require__2(8498);
                  var kefir_esm = __webpack_require__2(7249);
                  var kefir_bus = __webpack_require__2(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__2.n(kefir_bus);
                  var kefir_stopper_js = __webpack_require__2(4924);
                  var kefir_stopper_js_default = /* @__PURE__ */ __webpack_require__2.n(kefir_stopper_js);
                  var delay_asap = __webpack_require__2(1136);
                  var simulate_mouse_event = __webpack_require__2(4603);
                  ;
                  async function triggerRelayEvent(element, detail) {
                    element.dispatchEvent(new CustomEvent("inboxsdk_event_relay", {
                      bubbles: true,
                      cancelable: false,
                      detail
                    }));
                  }
                  ;
                  function simulateKey(element, keyCode, charCode) {
                    const ctrlKey = false;
                    const metaKey = false;
                    const altKey = false;
                    const shiftKey = false;
                    triggerRelayEvent(element, {
                      type: "keydown",
                      bubbles: true,
                      cancelable: true,
                      props: {
                        keyCode,
                        charCode,
                        ctrlKey,
                        metaKey,
                        altKey,
                        shiftKey
                      }
                    });
                    triggerRelayEvent(element, {
                      type: "keypress",
                      bubbles: true,
                      cancelable: true,
                      props: {
                        keyCode,
                        charCode,
                        ctrlKey,
                        metaKey,
                        altKey,
                        shiftKey
                      }
                    });
                    triggerRelayEvent(element, {
                      type: "keyup",
                      bubbles: true,
                      cancelable: true,
                      props: {
                        keyCode,
                        charCode,
                        ctrlKey,
                        metaKey,
                        altKey,
                        shiftKey
                      }
                    });
                  }
                  var querySelectorOrFail = __webpack_require__2(9860);
                  var isElementVisible = __webpack_require__2(8130);
                  var make_element_child_stream = __webpack_require__2(2843);
                  ;
                  function makeDataTransferObj(files) {
                    const fileNames = Array.from(files).map((file) => typeof file.name === "string" ? file.name : void 0);
                    return {
                      files,
                      fileNames
                    };
                  }
                  function simulateDragOver(element, files) {
                    const dataTransfer = makeDataTransferObj(files);
                    const props = {
                      screenX: 0,
                      screenY: 0,
                      clientX: 0,
                      clientY: 0,
                      buttons: 1,
                      ctrlKey: false,
                      shiftKey: false,
                      altKey: false,
                      metaKey: false,
                      detail: 0
                    };
                    triggerRelayEvent(element, {
                      type: "dragenter",
                      bubbles: true,
                      cancelable: false,
                      props,
                      dataTransfer
                    });
                    triggerRelayEvent(element, {
                      type: "dragover",
                      bubbles: true,
                      cancelable: false,
                      props,
                      dataTransfer
                    });
                  }
                  function simulateDrop(element, files) {
                    const dataTransfer = makeDataTransferObj(files);
                    const props = {
                      screenX: 0,
                      screenY: 0,
                      clientX: 0,
                      clientY: 0,
                      buttons: 1,
                      ctrlKey: false,
                      shiftKey: false,
                      altKey: false,
                      metaKey: false,
                      detail: 0
                    };
                    triggerRelayEvent(element, {
                      type: "drop",
                      bubbles: true,
                      cancelable: false,
                      props,
                      dataTransfer
                    });
                  }
                  function simulateDragEnd(element, files) {
                    const dataTransfer = makeDataTransferObj(files);
                    const props = {
                      screenX: 0,
                      screenY: 0,
                      clientX: 0,
                      clientY: 0,
                      buttons: 1,
                      ctrlKey: false,
                      shiftKey: false,
                      altKey: false,
                      metaKey: false,
                      detail: 0
                    };
                    triggerRelayEvent(element, {
                      type: "dragleave",
                      bubbles: true,
                      cancelable: false,
                      props,
                      dataTransfer
                    });
                    triggerRelayEvent(element, {
                      type: "dragend",
                      bubbles: true,
                      cancelable: false,
                      props,
                      dataTransfer
                    });
                  }
                  var gmail_element_getter = __webpack_require__2(4003);
                  ;
                  function setCss(key, css) {
                    const id = `inboxsdk__${key}`;
                    let style = document.getElementById(id);
                    if (!css) {
                      if (style) {
                        style.remove();
                      }
                      return;
                    }
                    if (!style) {
                      style = document.createElement("style");
                      style.className = "inboxsdk__custom";
                      style.id = id;
                      if (!document.head) throw new Error("missing head");
                      document.head.appendChild(style);
                    }
                    style.textContent = css;
                  }
                  var wait_for = __webpack_require__2(5156);
                  var stream_wait_for = __webpack_require__2(1539);
                  var handle_compose_link_chips = __webpack_require__2(6907);
                  var insert_link_chip_into_body = __webpack_require__2(3174);
                  var insert_element_in_order = __webpack_require__2(5389);
                  var logger = __webpack_require__2(2617);
                  var SimpleElementView = __webpack_require__2(3741);
                  ;
                  function addComposeNotice(gmailComposeView, options) {
                    const {
                      orderHint
                    } = {
                      orderHint: 0,
                      ...options
                    };
                    const composeNotice = new ComposeNotice(gmailComposeView, orderHint);
                    gmailComposeView.getStopper().takeUntilBy(kefir_esm["default"].fromEvents(composeNotice, "destroy")).onValue(() => composeNotice.destroy());
                    return composeNotice;
                  }
                  class ComposeNotice extends SimpleElementView.A {
                    constructor(gmailComposeView, orderHint) {
                      const el = document.createElement("div");
                      el.style.fontFamily = "Roboto,RobotoDraft,Helvetica,Arial,sans-serif";
                      el.style.fontSize = "14px";
                      super(el);
                      __publicField(this, "_stopper", kefir_stopper_js_default()());
                      this._gmailComposeView = gmailComposeView;
                      this._orderHint = orderHint;
                      el.className = "inboxsdk__compose_notice";
                      el.setAttribute("data-order-hint", String(orderHint));
                      this._setComposeNotice();
                    }
                    destroy() {
                      if (this.destroyed) {
                        return;
                      }
                      super.destroy();
                      this._stopper.destroy();
                    }
                    _setComposeNotice() {
                      try {
                        const composeTable = (0, querySelectorOrFail.A)(this._gmailComposeView.getElement(), ".iN");
                        (0, insert_element_in_order.A)(composeTable, this.el, ["data-order-hint"], true);
                      } catch (err) {
                        logger.A.error(err);
                      }
                    }
                  }
                  var add_status_bar = __webpack_require__2(9121);
                  var insert_html_at_cursor = __webpack_require__2(3166);
                  ;
                  function ensureGroupingIsOpen(gmailComposeViewElement, type) {
                    if (type === "SEND_ACTION") {
                      return;
                    }
                    var groupedButton = gmailComposeViewElement.querySelector(".inboxsdk__compose_groupedActionButton");
                    if (!groupedButton) {
                      return;
                    }
                    if (gmailComposeViewElement.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")) {
                      return;
                    }
                    (0, simulate_mouse_event.jp)(groupedButton);
                  }
                  ;
                  function ensureAppButtonToolbarsAreClosed(gmailComposeViewElement) {
                    var groupedButton = gmailComposeViewElement.querySelector(".inboxsdk__compose_groupedActionButton");
                    if (!groupedButton) {
                      return;
                    }
                    if (gmailComposeViewElement.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")) {
                      (0, simulate_mouse_event.jp)(groupedButton);
                    }
                  }
                  var includes = __webpack_require__2(5193);
                  var includes_default = /* @__PURE__ */ __webpack_require__2.n(includes);
                  var startsWith = __webpack_require__2(7013);
                  var startsWith_default = /* @__PURE__ */ __webpack_require__2.n(startsWith);
                  var findIndex = __webpack_require__2(9339);
                  var findIndex_default = /* @__PURE__ */ __webpack_require__2.n(findIndex);
                  var make_mutation_observer_chunked_stream = __webpack_require__2(3197);
                  ;
                  function cssSelectorEscape(text) {
                    if (text.length === 0 || /^-?[0-9]/.test(text)) {
                      throw new Error("Invalid CSS selector");
                    }
                    return text.replace(/[^a-z0-9]/g, "\\$&");
                  }
                  ;
                  const MATERIAL_UI_GMAIL_STATUS_HEIGHT = 60;
                  const MATERIAL_UI_TOP_FORM_HEIGHT = 72;
                  const SELECTOR_ESCAPE_HATCH_PREFIX = "body:not(.inboxsdk_hack_disableComposeSizeFixer) ";
                  var getSizeFixerSheet = once_default()(() => {
                    const style = document.createElement("style");
                    style.type = "text/css";
                    style.className = "inboxsdk__compose_size_fixer";
                    document.head.appendChild(style);
                    var sheet = style.sheet;
                    if (!(sheet instanceof CSSStyleSheet)) {
                      throw new Error("Could not add stylesheet");
                    }
                    return sheet;
                  });
                  function byId(id) {
                    return "#" + cssSelectorEscape(id);
                  }
                  function sizeFixer(driver, gmailComposeView) {
                    if (gmailComposeView.isInlineReplyForm() || gmailComposeView.getElement().classList.contains("inboxsdk__size_fixer")) {
                      return;
                    }
                    gmailComposeView.getElement().classList.add("inboxsdk__size_fixer");
                    var composeEvents = gmailComposeView.getEventStream();
                    var stopper = composeEvents.filter(() => false).beforeEnd(() => null);
                    var resizeEvents = composeEvents.filter((e) => includes_default()(["resize", "fullscreenChanged"], e.eventName)).merge((0, delay_asap.A)(null));
                    var statusAreaParent = gmailComposeView.getStatusArea().parentElement;
                    var scrollBody = gmailComposeView.getScrollBody();
                    var sheet = getSizeFixerSheet();
                    var topForm = gmailComposeView.getTopFormElement();
                    var composeId = gmailComposeView.getElement().id;
                    if (!composeId) {
                      composeId = gmailComposeView.getElement().id = `x${Math.random()}x${Date.now()}`;
                    }
                    function setRuleForSelector(selector, rule) {
                      const fullSelector = SELECTOR_ESCAPE_HATCH_PREFIX + byId(composeId) + " " + selector;
                      const ix = findIndex_default()(sheet.cssRules, (cssRule) => cssRule.selectorText === fullSelector);
                      if (ix !== -1) {
                        sheet.deleteRule(ix);
                      }
                      sheet.insertRule(fullSelector + " { " + rule + " }", 0);
                    }
                    (0, make_mutation_observer_chunked_stream.A)(statusAreaParent, {
                      attributes: true
                    }).takeUntilBy(stopper).onValue(() => {
                      gmailComposeView.getElement().dispatchEvent(new CustomEvent("resize", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                    });
                    resizeEvents.bufferBy(resizeEvents.flatMap(() => (0, delay_asap.A)(null))).filter((x) => x.length > 0).merge((0, make_mutation_observer_chunked_stream.A)(scrollBody, {
                      attributes: true
                    })).takeUntilBy(stopper).onValue(() => {
                      const statusUnexpectedHeight = Math.max(statusAreaParent.offsetHeight - MATERIAL_UI_GMAIL_STATUS_HEIGHT, 0);
                      const topFormUnexpectedHeight = Math.max(topForm.offsetHeight - MATERIAL_UI_TOP_FORM_HEIGHT, 0);
                      const unexpectedHeight = statusUnexpectedHeight + topFormUnexpectedHeight;
                      const maybeBody = gmailComposeView.getMaybeBodyElement();
                      const scrollBodyInner = scrollBody.querySelector(".qz");
                      const height = scrollBodyInner?.offsetHeight || scrollBody.offsetHeight;
                      const maxHeight = parseInt(scrollBody.style.getPropertyValue("max-height"), 10);
                      const isFullScreen = gmailComposeView.isFullscreen();
                      const newMaxHeight = maxHeight - unexpectedHeight;
                      const newHeight = height > newMaxHeight ? newMaxHeight : null;
                      const scrollBodyCssRules = [`max-height: ${newMaxHeight}px !important;`];
                      let maybeBodyCssRules;
                      if (newHeight) {
                        scrollBodyCssRules.push(`height: ${newHeight}px !important;`);
                      }
                      if (isFullScreen) {
                        scrollBodyCssRules.push(`min-height: ${newMaxHeight}px !important;`);
                        const maybeBodyMinHeight = parseInt(maybeBody?.style.minHeight ?? "", 10) || maxHeight;
                        const maybeBodyNewMinHeight = maybeBodyMinHeight - unexpectedHeight;
                        maybeBodyCssRules = `min-height: ${maybeBodyNewMinHeight}px !important;`;
                      }
                      if (scrollBodyCssRules.length > 0) {
                        setRuleForSelector(byId(scrollBody.id), scrollBodyCssRules.join("\n"));
                      }
                      if (maybeBodyCssRules && maybeBody) {
                        setRuleForSelector(byId(maybeBody.id), maybeBodyCssRules);
                      }
                    });
                    stopper.onValue(() => {
                      for (let ix = sheet.cssRules.length - 1; ix >= 0; ix--) {
                        if (startsWith_default()(sheet.cssRules[ix].selectorText, SELECTOR_ESCAPE_HATCH_PREFIX + byId(composeId) + " ")) {
                          sheet.deleteRule(ix);
                        }
                      }
                    });
                  }
                  var gmail_tooltip_view = __webpack_require__2(4806);
                  ;
                  function addTooltipToButton(gmailComposeView, buttonViewController, buttonDescriptor, tooltipDescriptor) {
                    var gmailTooltipView = new gmail_tooltip_view.A(tooltipDescriptor);
                    var tooltipStopperStream = gmailTooltipView.getStopper().merge(gmailComposeView.getStopper());
                    gmailComposeView.getStopper().takeUntilBy(gmailTooltipView.getStopper()).onValue(() => gmailTooltipView.destroy());
                    document.body.appendChild(gmailTooltipView.getElement());
                    _anchorTooltip(gmailTooltipView, gmailComposeView, buttonViewController, buttonDescriptor);
                    gmailComposeView.getEventStream().filter((event) => event.eventName === "buttonAdded" || event.eventName === "fullscreenChanged").merge(gmailTooltipView.getEventStream().filter((_ref) => {
                      let {
                        eventName
                      } = _ref;
                      return eventName === "imageLoaded";
                    })).debounce(10).takeUntilBy(tooltipStopperStream).onValue(_anchorTooltip.bind(null, gmailTooltipView, gmailComposeView, buttonViewController, buttonDescriptor));
                    buttonViewController.getView().getEventStream().takeUntilBy(tooltipStopperStream).filter(function(event) {
                      return event.eventName === "click";
                    }).onValue(gmailTooltipView.destroy.bind(gmailTooltipView));
                    var stoppedIntervalStream = kefir_esm.interval(50, void 0).takeUntilBy(tooltipStopperStream);
                    var left = 0;
                    var top = 0;
                    stoppedIntervalStream.takeWhile(() => !!buttonViewController.getView() && !!gmailTooltipView.getElement()).map(() => buttonViewController.getView().getElement().getBoundingClientRect()).filter((rect) => rect.left !== left || rect.top !== top).map((rect) => {
                      left = rect.left;
                      top = rect.top;
                      return rect;
                    }).onValue(gmailTooltipView.anchor.bind(gmailTooltipView, buttonViewController.getView().getElement(), {
                      position: "top"
                    }));
                    stoppedIntervalStream.filter(() => !buttonViewController.getView() || !buttonViewController.getView().getElement().offsetParent).onValue(gmailTooltipView.destroy.bind(gmailTooltipView));
                    return gmailTooltipView;
                  }
                  function _anchorTooltip(gmailTooltipView, gmailComposeView, buttonViewController, buttonDescriptor) {
                    try {
                      gmailComposeView.ensureGroupingIsOpen(buttonDescriptor.type);
                      setTimeout(function() {
                        gmailTooltipView.anchor(buttonViewController.getView().getElement(), {
                          position: "top"
                        });
                      }, 10);
                    } catch (err) {
                      logger.A.error(err);
                    }
                  }
                  var block_and_reemit_keyboard_events = __webpack_require__2(8416);
                  var page_parser_tree_js = __webpack_require__2(855);
                  var page_parser_tree_js_default = /* @__PURE__ */ __webpack_require__2.n(page_parser_tree_js);
                  var censorHTMLtree = __webpack_require__2(1443);
                  ;
                  function makePageParser(element, logger2) {
                    return new (page_parser_tree_js_default())(element, {
                      logError(err, el) {
                        const details = {
                          el,
                          html: el ? (0, censorHTMLtree.A)(el) : null
                        };
                        logger2.errorSite(err, details);
                      },
                      tags: {},
                      watchers: [{
                        // For regular composes
                        sources: [null],
                        tag: "recipientsCommon",
                        selectors: ["div", "div", "div[jsaction]", "div[role=region]", "table", "tbody", "tr", "td", "form", "div", "table.GS", "tbody", "tr.bzf", "td.eV", "div", "div"]
                      }, {
                        // For inline composes
                        sources: [null],
                        tag: "recipientsCommon",
                        selectors: ["div[role=region]", "table", "tbody", "tr", "td", "form", "div", "table[role=presentation]", "tbody", "tr", "td.Iy", "div.fX", "table.GS", "tbody", "tr.bzf", "td.eV", "div", "div"]
                      }, {
                        sources: ["recipientsCommon"],
                        tag: "toRecipient",
                        selectors: [{
                          $or: [['div.anm[name="to"]', {
                            $or: [
                              [],
                              // Inline reply compose
                              ["div.aUy"]
                            ]
                          }, "div", "div", "div", "div", "[role=listbox]", "div", "div", "div[role=option][data-name]"], [{
                            $map: (el) => el.querySelector("textarea.vO[name=to], input[name=to]")
                          }, {
                            $map: (el) => el.closest("tr")
                          }, "td.eV", "div", "div", ".vR", "input[type=hidden]", {
                            $map: (el) => el.parentElement
                          }]]
                        }]
                      }, {
                        sources: ["recipientsCommon"],
                        tag: "ccRecipient",
                        selectors: [{
                          $or: [['div.anm[name="cc"]', {
                            $or: [
                              [],
                              // Inline reply compose
                              ["div.aUy"]
                            ]
                          }, "div", "div", "div", "div", "[role=listbox]", "div", "div", "div[role=option][data-name]"], [{
                            $map: (el) => el.querySelector("textarea.vO[name=cc], input[name=cc]")
                          }, {
                            $map: (el) => el.closest("tr")
                          }, "td.eV", "div", "div", ".vR", "input[type=hidden]", {
                            $map: (el) => el.parentElement
                          }]]
                        }]
                      }, {
                        sources: ["recipientsCommon"],
                        tag: "bccRecipient",
                        selectors: [{
                          $or: [['div.anm[name="bcc"]', {
                            $or: [
                              [],
                              // Inline reply compose
                              ["div.aUy"]
                            ]
                          }, "div", "div", "div", "div", "[role=listbox]", "div", "div", "div[role=option][data-name]"], [{
                            $map: (el) => el.querySelector("textarea.vO[name=bcc], input[name=bcc]")
                          }, {
                            $map: (el) => el.closest("tr")
                          }, "td.eV", "div", "div", ".vR", "input[type=hidden]", {
                            $map: (el) => el.parentElement
                          }]]
                        }]
                      }],
                      finders: {
                        toRecipient: {
                          fn: (root) => getRecipientChips(root, "to")
                        },
                        ccRecipient: {
                          fn: (root) => getRecipientChips(root, "cc")
                        },
                        bccRecipient: {
                          fn: (root) => getRecipientChips(root, "bcc")
                        }
                      }
                    });
                  }
                  function getRecipientChips(element, addressType) {
                    const oldRow = getOldRecipientRowForType(element, addressType);
                    if (oldRow) {
                      return Array.from(oldRow.querySelectorAll(".vR > input[type=hidden]")).map((el) => el.parentElement);
                    } else {
                      return element.querySelectorAll(`.GS .anm[name="${addressType}"] [role=listbox] [role=option][data-name]`);
                    }
                  }
                  function getRecipientRowElements(element) {
                    return Array.prototype.filter.call(element.querySelectorAll(".GS tr, .GS .anm[name] [role=listbox]"), (tr) => !tr.classList.contains("inboxsdk__recipient_row"));
                  }
                  function getRecipientRowForType(element, addressType) {
                    return element.querySelector(`.GS .anm[name="${addressType}"] [role=listbox]`);
                  }
                  function getOldRecipientRowForType(element, addressType) {
                    const input = element.querySelector(`.GS tr textarea.vO[name="${addressType}"], .GS tr input[name="${addressType}"]`);
                    if (input) {
                      return input.closest("tr");
                    } else {
                      return null;
                    }
                  }
                  ;
                  function addRecipientRow(gmailComposeView, recipientRowOptionStream) {
                    let row;
                    recipientRowOptionStream.takeUntilBy(gmailComposeView.getStopper()).onValue((options) => {
                      if (row) {
                        row.remove();
                        row = null;
                      }
                      if (options) {
                        row = _createRecipientRowElement(gmailComposeView, options);
                        (0, block_and_reemit_keyboard_events.A)(row);
                      }
                      gmailComposeView.getElement().dispatchEvent(new CustomEvent("resize", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                    });
                    return () => {
                      if (row) {
                        row.remove();
                        row = null;
                        gmailComposeView.getElement().dispatchEvent(new CustomEvent("resize", {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      }
                    };
                  }
                  function _createRecipientRowElement(gmailComposeView, options) {
                    var row = document.createElement("tr");
                    var labelTD = document.createElement("td");
                    var contentTD = document.createElement("td");
                    row.appendChild(labelTD);
                    row.appendChild(contentTD);
                    row.setAttribute("class", "inboxsdk__recipient_row");
                    if (options.labelText) {
                      labelTD.setAttribute("class", "ok");
                      var span = document.createElement("span");
                      span.setAttribute("class", "gO");
                      labelTD.appendChild(span);
                      span.textContent = options.labelText;
                      if (options.labelClass) {
                        labelTD.classList.add(options.labelClass);
                      }
                      if (options.labelTextClass) {
                        span.classList.add(options.labelTextClass);
                      }
                    }
                    if (options.el) {
                      contentTD.setAttribute("class", "az3");
                      contentTD.appendChild(options.el);
                    }
                    var firstRowElement = getRecipientRowElements(gmailComposeView.getElement())[0];
                    var parent = firstRowElement.parentElement;
                    parent.insertBefore(row, firstRowElement.nextSibling);
                    const addressBarContainer = parent.closest(".fX");
                    addressBarContainer && addressBarContainer.classList.add("inboxsdk__compose_addressList");
                    return row;
                  }
                  var gmail_compose_button_view = __webpack_require__2(5865);
                  var basic_button_view_controller = __webpack_require__2(9755);
                  var dropdown_button_view_controller = __webpack_require__2(9374);
                  var gmail_dropdown_view = __webpack_require__2(3612);
                  ;
                  function addButton(gmailComposeView, buttonDescriptorStream, groupOrderHint, extraOnClickOptions, bus) {
                    let buttonViewController;
                    buttonDescriptorStream.takeUntilBy(gmailComposeView.getStopper()).onValue((buttonDescriptor) => {
                      const buttonOptions = _processButtonDescriptor(buttonDescriptor, extraOnClickOptions, gmailComposeView.getGmailDriver());
                      if (buttonViewController instanceof dropdown_button_view_controller.A && buttonOptions?.hasDropdown !== true || buttonViewController instanceof basic_button_view_controller.A && buttonOptions?.hasDropdown === true) {
                        buttonViewController.destroy();
                        buttonViewController = void 0;
                      }
                      if (!buttonViewController) {
                        if (buttonOptions) {
                          buttonViewController = _addButton(gmailComposeView, buttonOptions, groupOrderHint);
                          bus.emit({
                            buttonViewController,
                            buttonDescriptor
                          });
                        }
                      } else {
                        buttonViewController.update(buttonOptions);
                      }
                    });
                  }
                  function _addButton(gmailComposeView, buttonOptions, groupOrderHint) {
                    if (!gmailComposeView.getElement() || !gmailComposeView.getFormattingToolbar()) {
                      return;
                    }
                    let buttonViewController;
                    if (buttonOptions.type === "MODIFIER") {
                      buttonViewController = _addButtonToModifierArea(gmailComposeView, buttonOptions, groupOrderHint);
                    } else if (buttonOptions.type === "SEND_ACTION") {
                      buttonViewController = _addButtonToSendActionArea(gmailComposeView, buttonOptions);
                    }
                    gmailComposeView.getElement().dispatchEvent(new CustomEvent("buttonAdded", {
                      bubbles: false,
                      cancelable: false,
                      detail: null
                    }));
                    return buttonViewController;
                  }
                  function _addButtonToModifierArea(gmailComposeView, buttonDescriptor, groupOrderHint) {
                    var buttonViewController = _getButtonViewController(buttonDescriptor);
                    buttonViewController.getView().getElement().setAttribute("tabindex", "1");
                    buttonViewController.getView().getElement().setAttribute("data-order-hint", String(buttonDescriptor.orderHint || 0));
                    buttonViewController.getView().getElement().setAttribute("data-group-order-hint", groupOrderHint);
                    var formattingAreaOffsetLeft = gmailComposeView._getFormattingAreaOffsetLeft();
                    var element = buttonViewController.getView().getElement();
                    var actionToolbar = gmailComposeView.getAdditionalActionToolbar();
                    (0, insert_element_in_order.A)(actionToolbar, element);
                    gmailComposeView.updateInsertMoreAreaLeft(formattingAreaOffsetLeft);
                    gmailComposeView.addManagedViewController(buttonViewController);
                    return buttonViewController;
                  }
                  function _addButtonToSendActionArea(gmailComposeView, buttonDescriptor) {
                    const buttonViewController = _getButtonViewController(buttonDescriptor);
                    buttonViewController.getView().removeClass("inboxsdk__composeButton");
                    buttonViewController.getView().addClass("inboxsdk__compose_sendButton");
                    buttonViewController.getView().getElement().setAttribute("tabindex", "1");
                    const sendButtonGroupElement = gmailComposeView.getSendButtonGroup();
                    const buttonElement = buttonViewController.getView().getElement();
                    const parent = sendButtonGroupElement.parentElement;
                    parent.insertBefore(buttonElement, sendButtonGroupElement.nextSibling);
                    gmailComposeView.addManagedViewController(buttonViewController);
                    return buttonViewController;
                  }
                  function _getButtonViewController(buttonDescriptor) {
                    const buttonView = new gmail_compose_button_view.A(buttonDescriptor);
                    const options = {
                      buttonView,
                      ...buttonDescriptor
                    };
                    let buttonViewController;
                    if (buttonDescriptor.hasDropdown) {
                      Object.assign(options, {
                        dropdownViewDriverClass: gmail_dropdown_view.A,
                        dropdownPositionOptions: {
                          vAlign: "top"
                        }
                      });
                      buttonViewController = new dropdown_button_view_controller.A(options);
                    } else {
                      buttonViewController = new basic_button_view_controller.A(options);
                    }
                    return buttonViewController;
                  }
                  function _processButtonDescriptor(buttonDescriptor, extraOnClickOptions, driver) {
                    if (!buttonDescriptor) {
                      return null;
                    }
                    const buttonOptions = {
                      type: "MODIFIER",
                      ...buttonDescriptor
                    };
                    const oldOnClick = buttonOptions.onClick;
                    buttonOptions.onClick = function(event) {
                      driver.getLogger().eventSdkActive("composeView.addedButton.click");
                      oldOnClick({
                        ...extraOnClickOptions,
                        ...event
                      });
                    };
                    if (buttonOptions.hasDropdown) {
                      buttonOptions.dropdownShowFunction = buttonOptions.onClick;
                    } else {
                      buttonOptions.activateFunction = buttonOptions.onClick;
                    }
                    buttonOptions.noArrow = true;
                    buttonOptions.tooltip = buttonOptions.tooltip || buttonOptions.title;
                    delete buttonOptions.title;
                    if (buttonOptions.type === "MODIFIER") {
                      buttonOptions.buttonColor = "flatIcon";
                    } else if (buttonOptions.type === "SEND_ACTION") {
                      buttonOptions.buttonColor = "blue";
                    }
                    return buttonOptions;
                  }
                  var extract_contact_from_email_contact_string = __webpack_require__2(3324);
                  var censorHTMLstring = __webpack_require__2(4158);
                  ;
                  function getAddressInformationExtractor(addressType, composeView) {
                    return function(node) {
                      const contactNode = node instanceof HTMLInputElement && node.getAttribute("name") === addressType ? node : node.querySelector(`input[name='${addressType}']`);
                      if (contactNode) {
                        var contactInfoString = contactNode.value;
                        try {
                          return (0, extract_contact_from_email_contact_string.A)(contactInfoString);
                        } catch (err) {
                          return null;
                        }
                      } else {
                        logger.A.error(new Error(`contactNode can't be found`), {
                          addressType,
                          composeViewHtml: (0, censorHTMLstring.A)(composeView.getElement().outerHTML)
                        });
                        return null;
                      }
                    };
                  }
                  var isNotNil = __webpack_require__2(960);
                  ;
                  function getRecipients(gmailComposeView, addressType) {
                    const contactNodes = getRecipientChips(gmailComposeView.getElement(), addressType);
                    return Array.from(contactNodes).map((contactNode) => {
                      if (contactNode.getAttribute("role") === "option") {
                        return {
                          name: contactNode.getAttribute("data-name"),
                          emailAddress: contactNode.getAttribute("data-hovercard-id")
                        };
                      } else {
                        return getAddressInformationExtractor(addressType, gmailComposeView)(contactNode);
                      }
                    }).filter(isNotNil.A);
                  }
                  ;
                  function setRecipients(gmailComposeView, addressType, emailAddresses) {
                    if (_areContactsEqual(gmailComposeView, addressType, emailAddresses)) {
                      return;
                    }
                    const oldRange = gmailComposeView.getLastSelectionRange();
                    let _contactRow = getRecipientRowForType(gmailComposeView.getElement(), addressType);
                    function openRecipientsSectionIfNeeded(button) {
                      const signalElement = button.closest(".fX.aiL");
                      if (signalElement && signalElement.style.display === "none") {
                        const cover = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), "div.aoD.hl");
                        cover.dispatchEvent(new FocusEvent("focus"));
                      }
                    }
                    if (addressType === "cc") {
                      const ccButton = gmailComposeView.getElement().querySelector("span.pE[role=link]");
                      if (ccButton) {
                        openRecipientsSectionIfNeeded(ccButton);
                        ccButton.click();
                        _contactRow = getRecipientRowForType(gmailComposeView.getElement(), addressType);
                      }
                    } else if (addressType === "bcc") {
                      const bccButton = gmailComposeView.getElement().querySelector("span.pB[role=link]");
                      if (bccButton) {
                        openRecipientsSectionIfNeeded(bccButton);
                        bccButton.click();
                        _contactRow = getRecipientRowForType(gmailComposeView.getElement(), addressType);
                      }
                    }
                    const contactRow = _contactRow;
                    if (contactRow) {
                      const emailAddressEntry = (0, querySelectorOrFail.A)(contactRow, "input[role=combobox][aria-autocomplete=list]");
                      if (!(emailAddressEntry instanceof HTMLInputElement)) {
                        throw new Error();
                      }
                      Array.from(contactRow.querySelectorAll("div[role=option][data-name] div.afX[aria-label]")).forEach((el) => {
                        el.click();
                      });
                      emailAddressEntry.value = "";
                      const clipboardData = new DataTransfer();
                      clipboardData.setData("text/plain", emailAddresses.join(","));
                      emailAddressEntry.dispatchEvent(new ClipboardEvent("paste", {
                        clipboardData
                      }));
                      const nameEl = contactRow.closest("div.anm[name]");
                      if (emailAddresses.length > 0 && nameEl && !nameEl.hasAttribute("data-inboxsdk-handled-reset")) {
                        const claim = String(Number(nameEl.getAttribute("data-inboxsdk-tracking-fresh-compose") || 0) + 1);
                        nameEl.setAttribute("data-inboxsdk-tracking-fresh-compose", claim);
                        setTimeout(() => {
                          if (nameEl.getAttribute("data-inboxsdk-tracking-fresh-compose") === claim) {
                            nameEl.removeAttribute("data-inboxsdk-tracking-fresh-compose");
                            if (contactRow.querySelectorAll("div[role=option][data-name] div.afX[aria-label]").length === 0) {
                              nameEl.setAttribute("data-inboxsdk-handled-reset", "true");
                              setRecipients(gmailComposeView, addressType, emailAddresses);
                            }
                          }
                        }, 100);
                      }
                    } else {
                      let contactRow2;
                      try {
                        contactRow2 = getOldRecipientRowForType(gmailComposeView.getElement(), addressType);
                        if (!contactRow2) {
                          throw new Error("getOldRecipientRowForType failed");
                        }
                      } catch (err) {
                        logger.A.error(err, {
                          addressType
                        });
                        return;
                      }
                      const emailAddressEntry = contactRow2.querySelector("textarea.vO");
                      if (!emailAddressEntry || !(emailAddressEntry instanceof HTMLTextAreaElement)) {
                        return;
                      }
                      Array.from(contactRow2.querySelectorAll(".vR .vM")).forEach((el) => {
                        (0, simulate_mouse_event.jp)(el);
                      });
                      emailAddressEntry.value = emailAddresses.join(",");
                      simulateKey(emailAddressEntry, 13, 0);
                      const cover = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), "div.aoD.hl");
                      cover.dispatchEvent(new FocusEvent("focus"));
                      if (addressType === "cc") {
                        const ccButton = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), "span.aB.gQ.pE");
                        (0, simulate_mouse_event.jp)(ccButton);
                      } else if (addressType === "bcc") {
                        const bccButton = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), "span.aB.gQ.pB");
                        (0, simulate_mouse_event.jp)(bccButton);
                      }
                    }
                    if (document.activeElement instanceof HTMLElement) {
                      document.activeElement.blur();
                    }
                    if (oldRange) {
                      const sel = document.getSelection();
                      if (!sel) throw new Error();
                      sel.removeAllRanges();
                      sel.addRange(oldRange);
                    }
                  }
                  function _areContactsEqual(gmailComposeView, addressType, emailAddresses) {
                    const existingEmailAddresses = getRecipients(gmailComposeView, addressType).map((c) => c.emailAddress);
                    if (!emailAddresses) {
                      return !!existingEmailAddresses;
                    }
                    if (!existingEmailAddresses) {
                      return !!emailAddresses;
                    }
                    if (emailAddresses.length !== existingEmailAddresses.length) {
                      return false;
                    }
                    for (let ii = 0; ii < existingEmailAddresses.length; ii++) {
                      const existingEmailAddress = existingEmailAddresses[ii];
                      if (emailAddresses.indexOf(existingEmailAddress) === -1) {
                        return false;
                      }
                    }
                    return true;
                  }
                  ;
                  function gmail_compose_view_focus(gmailComposeView) {
                    gmailComposeView.getBodyElement().focus();
                    const lastSelectionRange = gmailComposeView.getLastSelectionRange();
                    const selection = document.getSelection();
                    if (!selection) throw new Error();
                    if (lastSelectionRange && selection.anchorNode === selection.focusNode && selection.anchorOffset === selection.focusOffset) {
                      selection.removeAllRanges();
                      selection.addRange(lastSelectionRange);
                    }
                  }
                  var from_event_target_capture = __webpack_require__2(3985);
                  ;
                  function monitor_selection_range(gmailComposeView) {
                    kefir_esm["default"].merge([(0, from_event_target_capture.A)(document.body, "mousedown"), (0, from_event_target_capture.A)(gmailComposeView.getBodyElement(), "keydown"), gmailComposeView.getEventStream().filter((e) => e.eventName === "bodyChanged")]).takeUntilBy(gmailComposeView.getStopper()).onValue(() => {
                      var body = gmailComposeView.getMaybeBodyElement();
                      var selection = document.getSelection();
                      if (body && selection.rangeCount > 0 && body.contains(selection.anchorNode)) {
                        gmailComposeView.setLastSelectionRange(selection.getRangeAt(0));
                      }
                    });
                  }
                  var manage_button_grouping = __webpack_require__2(7389);
                  ;
                  function isRangeEmpty(range) {
                    return range.startContainer === range.endContainer && range.startOffset === range.endOffset;
                  }
                  function isRangeInElement(range, el) {
                    return el.contains(range.startContainer) || el.contains(range.endContainer);
                  }
                  function isRangeSuitable(range, el) {
                    return !isRangeEmpty(range) && isRangeInElement(range, el);
                  }
                  function getSelectedTextInElement(element, lastRange) {
                    const selection = document.getSelection();
                    return transducers_default().toArray([selection && selection.rangeCount ? selection.getRangeAt(0) : null, lastRange], transducers_default().compose(transducers_default().keep(), transducers_default().filter((range) => isRangeSuitable(range, element)), transducers_default().map((range) => range.toString()), transducers_default().take(1)))[0];
                  }
                  function getSelectedHTMLInElement(element, lastRange) {
                    const selection = document.getSelection();
                    return transducers_default().toArray([selection && selection.rangeCount ? selection.getRangeAt(0) : null, lastRange], transducers_default().compose(transducers_default().keep(), transducers_default().filter((range) => isRangeSuitable(range, element)), transducers_default().map((range) => {
                      const div = document.createElement("div");
                      div.appendChild(range.cloneContents());
                      return div.innerHTML;
                    }), transducers_default().take(1)))[0];
                  }
                  var get_minimized_stream = __webpack_require__2(5845);
                  ;
                  function insertLinkIntoBody(gmailComposeView, text, href) {
                    return _insertLinkIntoBody(gmailComposeView, text, href);
                  }
                  function _insertLinkIntoBody(gmailComposeView, text, href) {
                    gmailComposeView.focus();
                    gmailComposeView.getBodyElement().focus();
                    const selection = document.getSelection();
                    if (!selection) throw new Error("selection does't exist, what?");
                    const range = selection.getRangeAt(0);
                    const link = document.createElement("a");
                    link.href = href;
                    range.extractContents();
                    range.insertNode(link);
                    link.textContent = text;
                    selection.selectAllChildren(link);
                    selection.collapseToEnd();
                    return link;
                  }
                  var make_mutation_observer_stream = __webpack_require__2(5938);
                  var toItemWithLifetimeStream = __webpack_require__2(370);
                  ;
                  function getAddressChangesStream(gmailComposeView) {
                    const recipientRowElements = getRecipientRowElements(gmailComposeView.getElement());
                    if (!recipientRowElements || recipientRowElements.length === 0) {
                      return kefir_esm.never();
                    }
                    const mergedStream = kefir_esm.merge([_makeSubAddressStream("to", gmailComposeView), _makeSubAddressStream("cc", gmailComposeView), _makeSubAddressStream("bcc", gmailComposeView)]);
                    const umbrellaStream = mergedStream.map(_groupChangeEvents);
                    return kefir_esm.merge([mergedStream, umbrellaStream, getFromAddressChangeStream(gmailComposeView)]);
                  }
                  function readContactFromElement(contactNode, addressType, gmailComposeView) {
                    if (contactNode.getAttribute("role") === "option") {
                      return {
                        name: contactNode.getAttribute("data-name"),
                        emailAddress: contactNode.getAttribute("data-hovercard-id")
                      };
                    } else {
                      return getAddressInformationExtractor(addressType, gmailComposeView)(contactNode);
                    }
                  }
                  function _makeSubAddressStream(addressType, gmailComposeView) {
                    const contactNodes = gmailComposeView.tagTree.getAllByTag(`${addressType}Recipient`);
                    return (0, toItemWithLifetimeStream.A)(contactNodes).flatMap((_ref) => {
                      let {
                        el,
                        removalStream
                      } = _ref;
                      const contact = readContactFromElement(el.getValue(), addressType, gmailComposeView);
                      if (!contact) {
                        return kefir_esm.never();
                      }
                      return kefir_esm.constant({
                        eventName: `${addressType}ContactAdded`,
                        data: {
                          contact
                        }
                      }).merge(removalStream.map(() => ({
                        eventName: `${addressType}ContactRemoved`,
                        data: {
                          contact
                        }
                      })));
                    });
                  }
                  function _groupChangeEvents(event) {
                    const grouping = {
                      to: {
                        added: [],
                        removed: []
                      },
                      cc: {
                        added: [],
                        removed: []
                      },
                      bcc: {
                        added: [],
                        removed: []
                      }
                    };
                    const parts = event.eventName.split("Contact");
                    grouping[parts[0]][parts[1].toLowerCase()].push(event.data.contact);
                    return {
                      eventName: "recipientsChanged",
                      data: grouping
                    };
                  }
                  function getFromAddressChangeStream(gmailComposeView) {
                    return kefir_esm.later(0, null).flatMap(() => {
                      const fromInput = gmailComposeView.getElement().querySelector('input[name="from"]');
                      return kefir_esm.constant(_convertToEvent("fromContactChanged", gmailComposeView.getFromContact())).merge(!fromInput ? kefir_esm.never() : (0, make_mutation_observer_stream.A)(fromInput, {
                        attributes: true,
                        attributeFilter: ["value"]
                      }).map(() => _convertToEvent("fromContactChanged", gmailComposeView.getFromContact())));
                    });
                  }
                  function _convertToEvent(eventName, addressInfo) {
                    return {
                      eventName,
                      data: {
                        contact: addressInfo
                      }
                    };
                  }
                  ;
                  function get_body_changes_stream(gmailComposeView) {
                    var bodyElement = gmailComposeView.getBodyElement();
                    return (0, make_mutation_observer_stream.A)(bodyElement, {
                      childList: true,
                      subtree: true,
                      characterData: true
                    }).map(function() {
                      return {
                        eventName: "bodyChanged"
                      };
                    });
                  }
                  ;
                  function get_response_type_changes_stream(gmailComposeView) {
                    let responseTypeEl;
                    try {
                      responseTypeEl = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), ".J-J5-Ji .J-JN-M-I-Jm > img");
                      return (0, make_mutation_observer_chunked_stream.A)(responseTypeEl, {
                        attributeFilter: ["class"],
                        attributes: true
                      }).map(() => ({
                        data: {
                          isForward: gmailComposeView.isForward()
                        },
                        eventName: "responseTypeChanged"
                      }));
                    } catch (err) {
                      logger.A.error(err);
                      return kefir_esm.never();
                    }
                  }
                  ;
                  const dispatchCancel = (element) => browser_asap_default()(() => element.dispatchEvent(new CustomEvent("inboxSDKsendCanceled", {
                    bubbles: false,
                    cancelable: false,
                    detail: null
                  })));
                  function getPresendingStream(_ref) {
                    let {
                      element,
                      sendButton,
                      sendAndArchive
                    } = _ref;
                    const domEventStream = kefir_esm.merge([(0, from_event_target_capture.A)(element, "keydown").filter((domEvent) => domEvent.ctrlKey || domEvent.metaKey).filter((domEvent) => domEvent.which === 13 || domEvent.keyCode === 13), (0, from_event_target_capture.A)(element, "keydown").filter((domEvent) => [13, 32].indexOf(domEvent.which) > -1 || [13, 32].indexOf(domEvent.keyCode) > -1).filter((domEvent) => sendButton && sendButton.contains(domEvent.target) || sendAndArchive && sendAndArchive.contains(domEvent.target)), (0, from_event_target_capture.A)(element, "click").filter((domEvent) => sendButton && sendButton.contains(domEvent.target) || sendAndArchive && sendAndArchive.contains(domEvent.target))]);
                    return domEventStream.filter((domEvent) => {
                      if (element.hasAttribute("data-inboxsdk-send-replaced")) {
                        domEvent.preventDefault();
                        domEvent.stopPropagation();
                        domEvent.stopImmediatePropagation();
                        return false;
                      }
                      return true;
                    }).map((domEvent) => ({
                      eventName: "presending",
                      data: {
                        cancel() {
                          domEvent.preventDefault();
                          domEvent.stopPropagation();
                          domEvent.stopImmediatePropagation();
                          dispatchCancel(element);
                        }
                      }
                    }));
                  }
                  var on_mouse_down_and_up = __webpack_require__2(8734);
                  ;
                  const getPrescheduledSendingStream_dispatchCancel = (element) => browser_asap_default()(() => element.dispatchEvent(new CustomEvent("inboxSDKscheduleSendMenuOpenCanceled", {
                    bubbles: false,
                    cancelable: false,
                    detail: null
                  })));
                  function getPrescheduledSendingStream(_ref) {
                    let {
                      element,
                      scheduleSendButton,
                      moreSendOptionsButton
                    } = _ref;
                    const domEventStream = kefir_esm.merge([(0, from_event_target_capture.A)(element, "keydown").filter((domEvent) => (domEvent.which === 13 || domEvent.keyCode === 13) && moreSendOptionsButton && moreSendOptionsButton.contains(domEvent.target)), (0, on_mouse_down_and_up.A)(scheduleSendButton)]);
                    return domEventStream.filter((domEvent) => {
                      if (element.hasAttribute("data-inboxsdk-send-replaced")) {
                        domEvent.preventDefault();
                        domEvent.stopPropagation();
                        domEvent.stopImmediatePropagation();
                        return false;
                      }
                      if (!domEvent.isTrusted) {
                        return false;
                      }
                      return true;
                    }).map((domEvent) => ({
                      eventName: "scheduleSendMenuOpening",
                      data: {
                        cancel() {
                          domEvent.preventDefault();
                          domEvent.stopPropagation();
                          domEvent.stopImmediatePropagation();
                          getPrescheduledSendingStream_dispatchCancel(element);
                        }
                      }
                    }));
                  }
                  ;
                  const getDiscardStream_dispatchCancel = (element) => browser_asap_default()(() => element.dispatchEvent(new CustomEvent("inboxSDKdiscardCanceled", {
                    bubbles: false,
                    cancelable: false,
                    detail: null
                  })));
                  function getDiscardStream(_ref) {
                    let {
                      element,
                      discardButton
                    } = _ref;
                    const domEventStream = kefir_esm.merge([(0, from_event_target_capture.A)(element, "keydown").filter((domEvent) => [13, 32].indexOf(domEvent.which) > -1 || [13, 32].indexOf(domEvent.keyCode) > -1).filter((domEvent) => discardButton && discardButton.contains(domEvent.target)), (0, from_event_target_capture.A)(element, "click").filter((domEvent) => discardButton && discardButton.contains(domEvent.target))]);
                    return domEventStream.map((domEvent) => ({
                      eventName: "discard",
                      data: {
                        cancel() {
                          domEvent.preventDefault();
                          domEvent.stopPropagation();
                          domEvent.stopImmediatePropagation();
                          getDiscardStream_dispatchCancel(element);
                        }
                      }
                    }));
                  }
                  ;
                  const updateAreaSet = /* @__PURE__ */ new WeakSet();
                  function updateInsertMoreAreaLeft(gmailComposeView, oldFormattingAreaOffsetLeft) {
                    if (updateAreaSet.has(gmailComposeView)) return;
                    updateAreaSet.add(gmailComposeView);
                    window.requestAnimationFrame(() => {
                      updateAreaSet.delete(gmailComposeView);
                      if (gmailComposeView.isDestroyed()) return;
                      var newFormattingAreaOffsetLeft = gmailComposeView._getFormattingAreaOffsetLeft();
                      var insertMoreAreaLeft = parseInt(gmailComposeView.getInsertMoreArea().style.left, 10);
                      var diff = newFormattingAreaOffsetLeft - oldFormattingAreaOffsetLeft;
                      gmailComposeView.getInsertMoreArea().style.left = insertMoreAreaLeft + diff + "px";
                    });
                  }
                  var safe_event_emitter = __webpack_require__2(2788);
                  ;
                  class LinkPopOver extends safe_event_emitter.A {
                    constructor(linkEl, popOverEl) {
                      super();
                      this._linkEl = linkEl;
                      this._popOverEl = popOverEl;
                    }
                    getLinkElement() {
                      return this._linkEl;
                    }
                    getPopOverContainerElement() {
                      return this._popOverEl;
                    }
                    getUrlInputElement() {
                      const inputs = this._popOverEl.querySelectorAll("input.qdOxv-K0-wGMbrd");
                      return inputs[inputs.length - 1];
                    }
                    getTextInputElement() {
                      const inputs = this._popOverEl.querySelectorAll("input.qdOxv-K0-wGMbrd");
                      if (inputs.length === 2) {
                        return inputs[0];
                      }
                    }
                    addSection() {
                      let containerEl = this._popOverEl.querySelector(".inboxsdk__linkPopOver_section_container");
                      if (!containerEl) {
                        containerEl = document.createElement("div");
                        containerEl.className = "inboxsdk__linkPopOver_section_container";
                        this._popOverEl.appendChild(containerEl);
                      }
                      return new LinkPopOverSection(this, containerEl);
                    }
                  }
                  class LinkPopOverSection {
                    constructor(linkPopOver, containerEl) {
                      __publicField(this, "_el", document.createElement("div"));
                      this._el.className = "inboxsdk__linkPopOver_section";
                      containerEl.appendChild(this._el);
                      linkPopOver.on("close", () => {
                        this.remove();
                      });
                    }
                    getElement() {
                      return this._el;
                    }
                    remove() {
                      this._el.remove();
                    }
                  }
                  function getSelectedLink(gmailComposeView) {
                    const focusNode = document.getSelection()?.focusNode;
                    if (!focusNode) {
                      return null;
                    }
                    if (focusNode instanceof Text) {
                      if (focusNode.previousSibling instanceof HTMLAnchorElement && document.getSelection()?.anchorOffset === 0) {
                        return focusNode.previousSibling;
                      } else if (focusNode.nextSibling instanceof HTMLAnchorElement) {
                        return focusNode.nextSibling;
                      }
                    }
                    return findLinkParent(focusNode, gmailComposeView.getBodyElement());
                  }
                  function findLinkParent(node, composeBody) {
                    if (node instanceof HTMLAnchorElement) {
                      return node;
                    } else if (!node || node === composeBody) {
                      return null;
                    } else {
                      return findLinkParent(node.parentElement, composeBody);
                    }
                  }
                  function setupLinkPopOvers(gmailComposeView) {
                    return (0, toItemWithLifetimeStream.A)(gmailComposeView.getGmailDriver().getTagTree().getAllByTag("composeLinkPopOverContainer")).flatMap((_ref) => {
                      let {
                        el,
                        removalStream
                      } = _ref;
                      const popOverEl = el.getValue();
                      gmailComposeView.getGmailDriver().getLogger().eventSite("link_popOver", popOverEl);
                      let existingLinkPopOver = null;
                      removalStream.onValue(() => {
                        if (existingLinkPopOver) {
                          existingLinkPopOver.emit("close");
                          existingLinkPopOver = null;
                        }
                      });
                      return (0, make_mutation_observer_chunked_stream.A)(popOverEl, {
                        attributes: true,
                        attributeFilter: ["style"]
                      }).toProperty(() => null).takeUntilBy(removalStream).flatMap(() => {
                        if (existingLinkPopOver) {
                          existingLinkPopOver.emit("close");
                          existingLinkPopOver = null;
                        }
                        if (popOverEl.style.visibility === "visible") {
                          const linkEl = getSelectedLink(gmailComposeView);
                          if (linkEl && gmailComposeView.getElement().contains(linkEl)) {
                            const linkPopOver = new LinkPopOver(linkEl, popOverEl);
                            existingLinkPopOver = linkPopOver;
                            return kefir_esm.constant({
                              eventName: "linkPopOver",
                              data: linkPopOver
                            });
                          }
                        }
                        return kefir_esm.never();
                      });
                    });
                  }
                  ;
                  const leftMap = /* @__PURE__ */ new WeakMap();
                  function getFormattingAreaOffsetLeft(gmailComposeView, forceGet) {
                    if (!forceGet) {
                      const existingValue = leftMap.get(gmailComposeView);
                      if (existingValue != null) {
                        return existingValue;
                      }
                    }
                    const formattingArea = gmailComposeView.getFormattingArea();
                    if (!formattingArea) {
                      return 0;
                    }
                    const left = formattingArea.getBoundingClientRect().left;
                    leftMap.set(gmailComposeView, left);
                    browser_asap_default()(() => leftMap.delete(gmailComposeView));
                    return left;
                  }
                  ;
                  let hasLoggedError = false;
                  function overrideEditSubject(gmailDriver, gmailComposeView) {
                    if (!gmailComposeView.isReply()) return;
                    const menuItem = gmailComposeView.getElement().querySelector("div.J-M.jQjAxd.HX[role=menu] > div.SK.AX > [role=menuitem]:nth-last-child(2)");
                    if (!menuItem) {
                      if (!hasLoggedError) {
                        gmailDriver.getLogger().error(new Error("could not find edit subject item"), {
                          composeElement: (0, censorHTMLtree.A)(gmailComposeView.getElement())
                        });
                        hasLoggedError = true;
                      }
                      return;
                    }
                    menuItem.addEventListener("click", (e) => {
                      e.stopPropagation();
                    }, true);
                    menuItem.addEventListener("mouseup", (e) => {
                      e.stopPropagation();
                      _cloneContentToNewCompose(gmailDriver, gmailComposeView);
                    }, true);
                  }
                  function _cloneContentToNewCompose(gmailDriver, gmailComposeView) {
                    const toRecipients = gmailComposeView.getToRecipients();
                    const ccRecipients = gmailComposeView.getCcRecipients();
                    const bccRecipients = gmailComposeView.getBccRecipients();
                    const fromAddress = gmailComposeView.getFromContact();
                    const subject = gmailComposeView.getSubject();
                    _ensureExtraContentIsVisible(gmailComposeView);
                    const body = gmailComposeView.getHTMLContent();
                    gmailComposeView.discard();
                    gmailDriver.openNewComposeViewDriver().then((newComposeView) => {
                      if (toRecipients.length > 0) newComposeView.setToRecipients(toRecipients.map((c) => c.emailAddress));
                      if (ccRecipients.length > 0) newComposeView.setCcRecipients(ccRecipients.map((c) => c.emailAddress));
                      if (bccRecipients.length > 0) newComposeView.setBccRecipients(bccRecipients.map((c) => c.emailAddress));
                      newComposeView.setFromEmail(fromAddress.emailAddress);
                      newComposeView.setSubject(subject);
                      newComposeView.setBodyHTML(body);
                      setTimeout(function() {
                        newComposeView.getSubjectInput().select();
                      }, 1);
                    });
                  }
                  function _ensureExtraContentIsVisible(gmailComposeView) {
                    if (gmailComposeView.getBodyElement().querySelector(".gmail_extra")) return;
                    const quoteDotsElement = gmailComposeView.getElement().querySelector(".ajR");
                    if (quoteDotsElement) (0, simulate_mouse_event.jp)(quoteDotsElement);
                  }
                  ;
                  const detectClassicRecipientsArea = once_default()(function detectClassicRecipientsArea2() {
                    const styleSheetWithComposeRules = [...document.styleSheets].find((s) => {
                      try {
                        if (s.cssRules) {
                          return [...s.cssRules].find((rule) => rule instanceof CSSStyleRule && rule.selectorText === ".aoI" && rule.style.fontSize && rule.style.color);
                        }
                      } catch (e) {
                      }
                      return false;
                    });
                    if (styleSheetWithComposeRules) {
                      const hasOverflowYVisibleRule = [...styleSheetWithComposeRules.cssRules].some((rule) => rule instanceof CSSStyleRule && rule.selectorText === ".aoI" && rule.style.overflowY === "visible");
                      if (hasOverflowYVisibleRule) {
                        return;
                      }
                      const hasOverflowYAutoRule = [...styleSheetWithComposeRules.cssRules].some((rule) => rule instanceof CSSStyleRule && rule.selectorText === ".aaZ > .M9 > .aoI" && rule.style.overflowY === "auto");
                      if (hasOverflowYAutoRule) {
                        return;
                      }
                      document.body.classList.add("inboxsdk__classic_gmail_recipients_area");
                    }
                  });
                  ;
                  function getFromContact(driver, gmailComposeView) {
                    const nameInput = gmailComposeView.getElement().querySelector('input[name="from"]');
                    const emailAddress = nameInput ? nameInput.value : null;
                    if (!emailAddress) {
                      return driver.getUserContact();
                    }
                    const fromContactChoices = getFromContactChoices(driver, gmailComposeView);
                    const matchingContact = find_default()(fromContactChoices, (contact) => contact.emailAddress === emailAddress);
                    let name;
                    if (!matchingContact) {
                      name = emailAddress;
                      driver.getLogger().error(new Error("getFromContact failed to find name"), {
                        fromContactChoicesLength: fromContactChoices.length
                      });
                    } else {
                      name = matchingContact.name;
                    }
                    return {
                      emailAddress,
                      name
                    };
                  }
                  function getFromContactChoices(driver, gmailComposeView) {
                    const choiceEls = gmailComposeView.getElement().querySelectorAll("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX > div[value][role=menuitem]");
                    if (choiceEls.length == 0) {
                      return [driver.getUserContact()];
                    }
                    return Array.from(choiceEls).map((item) => ({
                      emailAddress: item.getAttribute("value") || "",
                      name: item.textContent.replace(/<.*/, "").trim()
                    }));
                  }
                  function setFromEmail(driver, gmailComposeView, email) {
                    const currentFromAddress = gmailComposeView.getFromContact().emailAddress;
                    if (currentFromAddress === email) {
                      return;
                    }
                    const choiceParent = gmailComposeView.getElement().querySelector("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX");
                    if (!choiceParent) {
                      if (driver.getUserContact().emailAddress != email) {
                        throw new Error("Chosen email from choice was not found");
                      }
                      return;
                    }
                    const chosenChoice = find_default()(choiceParent.children, (item) => item.getAttribute("value") == email);
                    if (!chosenChoice) {
                      throw new Error("Chosen email from choice was not found");
                    }
                    (0, simulate_mouse_event.jp)(chosenChoice);
                  }
                  ;
                  let hasReportedMissingBody = false;
                  class GmailComposeView {
                    constructor(element, xhrInterceptorStream, driver, options) {
                      __privateAdd(this, _GmailComposeView_instances);
                      __privateAdd(this, _element);
                      __privateAdd(this, _seenBodyElement);
                      __privateAdd(this, _isInlineReplyForm);
                      __privateAdd(this, _isFullscreen);
                      __privateAdd(this, _isStandalone);
                      __privateAdd(this, _driver);
                      __privateAdd(this, _managedViewControllers);
                      __privateAdd(this, _eventStream);
                      __privateAdd(this, _isTriggeringADraftSavePending);
                      __privateAdd(this, _buttonViewControllerTooltipMap);
                      __privateAdd(this, _composeID);
                      __privateAdd(this, _messageIDElement);
                      __privateAdd(this, _messageId);
                      __privateAdd(this, _initialMessageId);
                      __privateAdd(this, _targetMessageID);
                      __privateAdd(this, _draftIDpromise);
                      __privateAdd(this, _threadID);
                      __privateAdd(this, _stopper);
                      __privateAdd(this, _lastSelectionRange);
                      __privateAdd(this, _requestModifiers);
                      __privateAdd(this, _isListeningToAjaxInterceptStream);
                      __privateAdd(this, _formattingArea);
                      __privateAdd(this, _closedProgrammatically, false);
                      __privateAdd(this, _destroyed, false);
                      __privateAdd(this, _removedFromDOMStopper);
                      __privateAdd(this, _hasSetupLinkPopOvers, false);
                      __privateAdd(this, _page);
                      __privateSet(this, _element, element);
                      __privateGet(this, _element).classList.add("inboxsdk__compose");
                      if (options.isInlineReplyForm) {
                        __privateGet(this, _element).classList.add("inboxsdk__compose_inlineReply");
                      }
                      __privateSet(this, _isInlineReplyForm, options.isInlineReplyForm);
                      __privateSet(this, _isStandalone, options.isStandalone);
                      __privateSet(this, _isFullscreen, false);
                      __privateSet(this, _messageId, null);
                      __privateSet(this, _draftIDpromise, null);
                      __privateSet(this, _driver, driver);
                      __privateSet(this, _stopper, kefir_stopper_js_default()());
                      __privateSet(this, _managedViewControllers, []);
                      __privateSet(this, _requestModifiers, {});
                      __privateSet(this, _isListeningToAjaxInterceptStream, false);
                      __privateSet(this, _eventStream, kefir_bus_default()());
                      __privateSet(this, _removedFromDOMStopper, kefir_stopper_js_default()());
                      __privateSet(this, _isTriggeringADraftSavePending, false);
                      __privateSet(this, _page, makePageParser(element, driver.getLogger()));
                      this.tagTree = __privateGet(this, _page).tree;
                      const saveAndSendStream = xhrInterceptorStream.filter((event) => event.draftID === __privateMethod(this, _GmailComposeView_instances, getDraftIDfromForm_fn).call(this)).map((event) => {
                        switch (event.type) {
                          case "emailSending": {
                            return {
                              eventName: "sending"
                            };
                          }
                          case "emailSent": {
                            const syncThreadID = event.threadID;
                            const syncMessageID = event.messageID;
                            if (event.oldMessageID) __privateSet(this, _messageId, event.oldMessageID);
                            if (event.oldThreadID) __privateSet(this, _threadID, event.oldThreadID);
                            driver.removeCachedGmailMessageIdForSyncMessageId(syncMessageID);
                            driver.removeCachedOldGmailThreadIdFromSyncThreadId(syncThreadID);
                            return {
                              eventName: "sent",
                              data: {
                                getThreadID: once_default()(async () => {
                                  if (event.oldThreadID) {
                                    return event.oldThreadID;
                                  }
                                  return await driver.getOldGmailThreadIdFromSyncThreadId(syncThreadID);
                                }),
                                getMessageID: once_default()(async () => {
                                  if (event.oldMessageID) {
                                    return event.oldMessageID;
                                  }
                                  return await driver.getGmailMessageIdForSyncMessageId(syncMessageID);
                                })
                              }
                            };
                          }
                          case "emailSendFailed": {
                            return {
                              eventName: "sendCanceled"
                            };
                          }
                          case "emailDraftReceived": {
                            __privateSet(this, _messageId, event.oldMessageID);
                            __privateSet(this, _threadID, event.oldThreadID);
                            return {
                              eventName: "draftSaved",
                              data: {
                                getThreadID() {
                                  return Promise.resolve(event.oldThreadID);
                                },
                                getMessageID() {
                                  return Promise.resolve(event.oldMessageID);
                                }
                              }
                            };
                          }
                          default: {
                            return null;
                          }
                        }
                      }).filter(isNotNil.A);
                      __privateGet(this, _eventStream).plug(kefir_esm.merge([saveAndSendStream, kefir_esm.fromEvents(__privateGet(this, _element), "buttonAdded").map(() => {
                        return {
                          eventName: "buttonAdded"
                        };
                      }), kefir_esm.fromEvents(__privateGet(this, _element), "resize").map(() => ({
                        eventName: "resize"
                      })), kefir_esm.fromEvents(__privateGet(this, _element), "composeFullscreenStateChanged").map(() => {
                        __privateMethod(this, _GmailComposeView_instances, updateComposeFullscreenState_fn).call(this);
                        return {
                          eventName: "fullscreenChanged",
                          data: {
                            fullscreen: __privateGet(this, _isFullscreen)
                          }
                        };
                      })]));
                      kefir_esm.fromEvents(__privateGet(this, _element), "closedProgrammatically").takeUntilBy(__privateGet(this, _stopper)).onValue(() => {
                        __privateSet(this, _closedProgrammatically, true);
                      });
                      __privateSet(this, _buttonViewControllerTooltipMap, /* @__PURE__ */ new WeakMap());
                      const initialBodyElement = this.getMaybeBodyElement();
                      this.ready = constant_default()((initialBodyElement ? kefir_esm.constant(initialBodyElement) : (0, stream_wait_for.A)(
                        () => this.getMaybeBodyElement(),
                        3 * 60 * 1e3
                        //timeout
                      )).takeUntilBy(__privateGet(this, _stopper)).map((bodyElement) => {
                        __privateSet(this, _seenBodyElement, bodyElement);
                        __privateSet(this, _composeID, __privateGet(this, _element).querySelector('input[name="composeid"]').value);
                        __privateSet(this, _messageIDElement, __privateGet(this, _element).querySelector('input[name="draft"]'));
                        if (!__privateGet(this, _messageIDElement)) {
                          driver.getLogger().error(new Error("Could not find compose message id field"));
                          __privateSet(this, _messageIDElement, document.createElement("input"));
                        }
                        __privateMethod(this, _GmailComposeView_instances, setupIDs_fn).call(this);
                        __privateMethod(this, _GmailComposeView_instances, setupStreams_fn).call(this);
                        __privateMethod(this, _GmailComposeView_instances, setupConsistencyCheckers_fn).call(this);
                        __privateMethod(this, _GmailComposeView_instances, updateComposeFullscreenState_fn).call(this);
                        {
                          this.getEventStream().filter((_ref) => {
                            let {
                              eventName
                            } = _ref;
                            return eventName === "presending";
                          }).takeUntilBy(__privateGet(this, _stopper)).onValue(() => {
                            (0, make_element_child_stream.A)(document.body).map((event) => event.el).filter((node) => node.getAttribute && node.getAttribute("role") === "alertdialog").takeUntilBy(kefir_esm.merge([this.getEventStream().filter((_ref2) => {
                              let {
                                eventName
                              } = _ref2;
                              return eventName === "sendCanceled" || eventName === "sending";
                            }), kefir_esm.later(15, void 0)])).onValue(() => {
                              __privateGet(this, _eventStream).emit({
                                eventName: "sendCanceled"
                              });
                            });
                          });
                        }
                        return this;
                      }).toProperty());
                      this.ready().onError((errorObject) => {
                        driver.getLogger().error(errorObject, {
                          hasForm: !!this.getElement().querySelector("form"),
                          class: this.getElement().getAttribute("class")
                        });
                      });
                      kefir_esm.merge([
                        // if we get a presending then we let the other stream wait for
                        // sent. But if we get a sendCanceled, then a regular destroy can
                        // pass through
                        __privateGet(this, _removedFromDOMStopper).filterBy(__privateGet(this, _eventStream).filter((_ref3) => {
                          let {
                            eventName
                          } = _ref3;
                          return eventName === "presending" || eventName === "sendCanceled";
                        }).map((_ref4) => {
                          let {
                            eventName
                          } = _ref4;
                          return eventName === "sendCanceled";
                        }).toProperty(() => true)),
                        kefir_esm.combine([__privateGet(this, _removedFromDOMStopper), __privateGet(this, _eventStream).filter((_ref5) => {
                          let {
                            eventName
                          } = _ref5;
                          return eventName === "sent";
                        })])
                      ]).take(1).flatMap(() => (0, delay_asap.A)(null)).onValue(() => __privateMethod(this, _GmailComposeView_instances, destroy_fn).call(this));
                      detectClassicRecipientsArea();
                    }
                    destroy() {
                      __privateGet(this, _removedFromDOMStopper).destroy();
                      __privateGet(this, _page).dump();
                    }
                    getStopper() {
                      return __privateGet(this, _stopper);
                    }
                    getEventStream() {
                      return __privateGet(this, _eventStream);
                    }
                    getGmailDriver() {
                      return __privateGet(this, _driver);
                    }
                    isDestroyed() {
                      return __privateGet(this, _destroyed);
                    }
                    focus() {
                      gmail_compose_view_focus(this);
                    }
                    insertBodyTextAtCursor(text) {
                      return this.insertBodyHTMLAtCursor(escape_default()(text).replace(/\n/g, "<br>"));
                    }
                    insertBodyHTMLAtCursor(html) {
                      var retVal = (0, insert_html_at_cursor.A)(this.getBodyElement(), html, this.getLastSelectionRange());
                      __privateMethod(this, _GmailComposeView_instances, triggerDraftSave_fn).call(this);
                      simulateKey(this.getBodyElement(), 13, 13);
                      return retVal;
                    }
                    insertLinkIntoBody(text, href) {
                      var retVal = insertLinkIntoBody(this, text, href);
                      __privateMethod(this, _GmailComposeView_instances, triggerDraftSave_fn).call(this);
                      return retVal;
                    }
                    insertLinkChipIntoBody(options) {
                      var retVal = (0, insert_link_chip_into_body.A)(this, options);
                      __privateMethod(this, _GmailComposeView_instances, triggerDraftSave_fn).call(this);
                      return retVal;
                    }
                    setSubject(text) {
                      __privateGet(this, _element).querySelector("input[name=subjectbox]").value = text;
                      __privateMethod(this, _GmailComposeView_instances, triggerDraftSave_fn).call(this);
                    }
                    setBodyHTML(html) {
                      this.getBodyElement().innerHTML = html;
                      __privateMethod(this, _GmailComposeView_instances, triggerDraftSave_fn).call(this);
                    }
                    setBodyText(text) {
                      this.getBodyElement().textContent = text;
                      __privateMethod(this, _GmailComposeView_instances, triggerDraftSave_fn).call(this);
                    }
                    setToRecipients(emails) {
                      setRecipients(this, "to", emails);
                      __privateMethod(this, _GmailComposeView_instances, triggerDraftSave_fn).call(this);
                    }
                    setCcRecipients(emails) {
                      setRecipients(this, "cc", emails);
                      __privateMethod(this, _GmailComposeView_instances, triggerDraftSave_fn).call(this);
                    }
                    setBccRecipients(emails) {
                      setRecipients(this, "bcc", emails);
                      __privateMethod(this, _GmailComposeView_instances, triggerDraftSave_fn).call(this);
                    }
                    addRecipientRow(options) {
                      return addRecipientRow(this, options);
                    }
                    forceRecipientRowsOpen() {
                      __privateGet(this, _element).classList.add("inboxsdk__compose_forceRecipientsOpen");
                      return () => {
                        __privateGet(this, _element).classList.remove("inboxsdk__compose_forceRecipientsOpen");
                      };
                    }
                    hideNativeRecipientRows() {
                      const nativeRecipientRows = getRecipientRowElements(__privateGet(this, _element));
                      nativeRecipientRows.forEach((row) => {
                        row.classList.add("inboxsdk__compose_forceRecipientRowHidden");
                      });
                      return () => {
                        nativeRecipientRows.forEach((row) => {
                          row.classList.remove("inboxsdk__compose_forceRecipientRowHidden");
                        });
                      };
                    }
                    hideRecipientArea() {
                      __privateGet(this, _element).classList.add("inboxsdk__compose_hideRecipientArea");
                      return () => {
                        __privateGet(this, _element).classList.remove("inboxsdk__compose_hideRecipientArea");
                      };
                    }
                    getFromContact() {
                      return getFromContact(__privateGet(this, _driver), this);
                    }
                    getFromContactChoices() {
                      return getFromContactChoices(__privateGet(this, _driver), this);
                    }
                    setFromEmail(email) {
                      setFromEmail(__privateGet(this, _driver), this, email);
                    }
                    addButton(buttonDescriptor, groupOrderHint, extraOnClickOptions, bus) {
                      addButton(this, buttonDescriptor, groupOrderHint, extraOnClickOptions, bus);
                    }
                    addTooltipToButton(buttonViewController, buttonDescriptor, tooltipDescriptor) {
                      var tooltip = addTooltipToButton(this, buttonViewController, buttonDescriptor, tooltipDescriptor);
                      __privateGet(this, _buttonViewControllerTooltipMap).set(buttonViewController, tooltip);
                    }
                    closeButtonTooltip(buttonViewController) {
                      if (!__privateGet(this, _buttonViewControllerTooltipMap)) {
                        return;
                      }
                      var tooltip = __privateGet(this, _buttonViewControllerTooltipMap).get(buttonViewController);
                      if (tooltip) {
                        tooltip.destroy();
                        __privateGet(this, _buttonViewControllerTooltipMap).delete(buttonViewController);
                      }
                    }
                    addComposeNotice() {
                      let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      const composeNotice = addComposeNotice(this, options);
                      __privateGet(this, _element).dispatchEvent(new CustomEvent("resize", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      kefir_esm.fromEvents(composeNotice, "destroy").flatMap(delay_asap.A).takeUntilBy(__privateGet(this, _stopper)).onValue(() => {
                        __privateGet(this, _element).dispatchEvent(new CustomEvent("resize", {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      });
                      return composeNotice;
                    }
                    addStatusBar() {
                      let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      const statusBar = (0, add_status_bar.A)(this, options);
                      __privateGet(this, _element).dispatchEvent(new CustomEvent("resize", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      kefir_esm.fromEvents(statusBar, "destroy").flatMap(delay_asap.A).takeUntilBy(__privateGet(this, _stopper)).onValue(() => {
                        __privateGet(this, _element).dispatchEvent(new CustomEvent("resize", {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      });
                      return statusBar;
                    }
                    hideNativeStatusBar() {
                      const statusArea = this.getStatusArea();
                      const nativeStatusBar = (0, querySelectorOrFail.A)(statusArea, "table");
                      const formattingToolbar = this.getFormattingToolbar();
                      const isFormattingToolbarOpen = formattingToolbar && formattingToolbar.style.display !== "none";
                      nativeStatusBar.style.display = "none";
                      if (formattingToolbar && isFormattingToolbarOpen) {
                        formattingToolbar.style.display = "none";
                      }
                      return () => {
                        nativeStatusBar.style.display = "";
                        if (formattingToolbar && isFormattingToolbarOpen) {
                          formattingToolbar.style.display = "";
                        }
                      };
                    }
                    replaceSendButton(el) {
                      const sendButton = this.getSendButtonGroup();
                      const sendAndArchive = this.getSendAndArchiveButton();
                      sendButton.style.display = "none";
                      const sendAndArchiveParent = sendAndArchive && sendAndArchive.parentElement;
                      if (sendAndArchiveParent instanceof HTMLElement) {
                        sendAndArchiveParent.style.display = "none";
                      }
                      const container = document.createElement("div");
                      container.classList.add("inboxsdk__compose_customSendContainer");
                      container.appendChild(el);
                      sendButton.insertAdjacentElement("afterend", container);
                      __privateGet(this, _element).setAttribute("data-inboxsdk-send-replaced", "");
                      const removalStopper = kefir_stopper_js_default()();
                      kefir_esm.fromEvents(this.getBodyElement(), "keydown").takeUntilBy(__privateGet(this, _stopper)).takeUntilBy(removalStopper).filter((domEvent) => (domEvent.which === 9 || domEvent.keyCode === 9) && !domEvent.shiftKey).onValue((domEvent) => {
                        const statusArea = this.getStatusArea();
                        const focusableEls = statusArea.querySelectorAll("[tabindex]");
                        if (focusableEls.length === 0) return;
                        const firstVisibleEl = Array.from(focusableEls).find((el2) => el2.offsetParent !== null);
                        if (!firstVisibleEl) return;
                        domEvent.preventDefault();
                        domEvent.stopPropagation();
                        domEvent.stopImmediatePropagation();
                        firstVisibleEl.focus();
                      });
                      return () => {
                        removalStopper.destroy();
                        container.remove();
                        __privateGet(this, _element).removeAttribute("data-inboxsdk-send-replaced");
                        sendButton.style.display = "";
                        if (sendAndArchiveParent instanceof HTMLElement) {
                          sendAndArchiveParent.style.display = "";
                        }
                      };
                    }
                    hideDiscardButton() {
                      const discardBtn = this.getDiscardButton();
                      discardBtn.style.display = "none";
                      return () => {
                        discardBtn.style.display = "";
                      };
                    }
                    ensureFormattingToolbarIsHidden() {
                      const formattingToggleButton = this.getFormattingToolbarToggleButton();
                      const formattingToolbar = this.getFormattingToolbar();
                      if (formattingToggleButton && formattingToolbar && formattingToolbar.style.display === "") {
                        (0, simulate_mouse_event.jp)(formattingToggleButton);
                      }
                    }
                    close() {
                      if (this.isInlineReplyForm()) {
                        console.warn("Trying to close an inline reply which doesn't work.");
                        return;
                      }
                      __privateGet(this, _element).dispatchEvent(new CustomEvent("closedProgrammatically", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      if (__privateGet(this, _isFullscreen)) {
                        __privateGet(this, _eventStream).filter((_ref6) => {
                          let {
                            eventName
                          } = _ref6;
                          return eventName === "fullscreenChanged";
                        }).onValue(() => (0, simulate_mouse_event.jp)(this.getCloseButton()));
                        (0, simulate_mouse_event.jp)(this.getMoleSwitchButton());
                      } else {
                        (0, simulate_mouse_event.jp)(this.getCloseButton());
                      }
                    }
                    send(_ref7) {
                      let {
                        sendAndArchive
                      } = _ref7;
                      browser_asap_default()(() => {
                        const sendAndArchiveButton = this.getSendAndArchiveButton();
                        if (sendAndArchive && sendAndArchiveButton) {
                          (0, simulate_mouse_event.jp)(sendAndArchiveButton);
                        } else {
                          (0, simulate_mouse_event.jp)(this.getSendButton());
                        }
                      });
                    }
                    openScheduleSendMenu() {
                      browser_asap_default()(() => {
                        (0, simulate_mouse_event.jp)(this.getScheduleSendButton());
                      });
                    }
                    discard() {
                      (0, simulate_mouse_event.jp)(this.getDiscardButton());
                    }
                    popOut() {
                      if (!this.isInlineReplyForm()) {
                        throw new Error("Can only pop out inline reply compose views");
                      }
                      const popOutBtn = (0, querySelectorOrFail.A)(__privateGet(this, _element), ".M9 > [role=menu]:first-child > .SK > [role=menuitem]:last-child");
                      (0, simulate_mouse_event.jp)(popOutBtn);
                    }
                    overrideEditSubject() {
                      overrideEditSubject(__privateGet(this, _driver), this);
                    }
                    attachFiles(files) {
                      return __privateMethod(this, _GmailComposeView_instances, attachFiles_fn).call(this, files, false);
                    }
                    attachInlineFiles(files) {
                      return __privateMethod(this, _GmailComposeView_instances, attachFiles_fn).call(this, files, true);
                    }
                    isForward() {
                      return Boolean(__privateGet(this, _element).querySelector(".Un.J-JN-M-I .mI"));
                    }
                    isReply() {
                      return __privateGet(this, _isInlineReplyForm) || !!__privateGet(this, _element).querySelector(".HQ");
                    }
                    isInlineReplyForm() {
                      return __privateGet(this, _isInlineReplyForm);
                    }
                    getBodyElement() {
                      const el = this.getMaybeBodyElement();
                      if (!el) throw new Error("Could not find body element");
                      return el;
                    }
                    getMaybeBodyElement() {
                      return __privateGet(this, _element).querySelector(".Ap [g_editable=true]");
                    }
                    getTopFormElement() {
                      return (0, querySelectorOrFail.A)(__privateGet(this, _element), "td > form");
                    }
                    getHTMLContent() {
                      return this.getBodyElement().innerHTML;
                    }
                    getTextContent() {
                      return this.getBodyElement().textContent;
                    }
                    getSelectedBodyHTML() {
                      return getSelectedHTMLInElement(this.getBodyElement(), this.getLastSelectionRange());
                    }
                    getSelectedBodyText() {
                      return getSelectedTextInElement(this.getBodyElement(), this.getLastSelectionRange());
                    }
                    getSubject() {
                      return this.getSubjectInput().value;
                    }
                    getSubjectInput() {
                      return __privateGet(this, _element).querySelector("input[name=subjectbox]");
                    }
                    getMetadataFormElement() {
                      const container = this.getBodyElement().closest(".aoP");
                      if (!container) {
                        throw new Error("Could not find compose container");
                      }
                      return (0, querySelectorOrFail.A)(container, "form.bAs");
                    }
                    getToRecipients() {
                      return getRecipients(this, "to");
                    }
                    getCcRecipients() {
                      return getRecipients(this, "cc");
                    }
                    getBccRecipients() {
                      return getRecipients(this, "bcc");
                    }
                    getAdditionalActionToolbar() {
                      return __webpack_require__2(9e3).A(this);
                    }
                    updateInsertMoreAreaLeft(oldFormattingAreaOffsetLeft) {
                      updateInsertMoreAreaLeft(this, oldFormattingAreaOffsetLeft);
                    }
                    /** @internal non-public method used outside this class */
                    _getFormattingAreaOffsetLeft() {
                      return getFormattingAreaOffsetLeft(this);
                    }
                    getFormattingArea() {
                      let formattingArea = __privateGet(this, _formattingArea);
                      if (!formattingArea) {
                        formattingArea = __privateSet(this, _formattingArea, __privateGet(this, _element).querySelector(".oc"));
                      }
                      return formattingArea;
                    }
                    getFormattingToolbar() {
                      return __privateGet(this, _element).querySelector(".aX");
                    }
                    getFormattingToolbarArrow() {
                      const el = this.getFormattingToolbar();
                      if (!el) throw new Error("Failed to find formatting toolbar");
                      return (0, querySelectorOrFail.A)(el, ".aA4");
                    }
                    getFormattingToolbarToggleButton() {
                      const innerElement = (0, querySelectorOrFail.A)(__privateGet(this, _element), "[role=button] .dv");
                      const btn = innerElement.closest("[role=button]");
                      if (!btn) throw new Error("failed to find button");
                      return btn;
                    }
                    getStatusBarPrependContainer() {
                      return __privateGet(this, _element).querySelector(".inboxsdk__compose_statusBarPrependContainer");
                    }
                    getScrollBody() {
                      var scrollBody = __privateGet(this, _element).querySelector("table .GP");
                      if (!scrollBody) {
                        throw new Error("Failed to find scroll body");
                      }
                      return scrollBody;
                    }
                    getStatusArea() {
                      const statusArea = __privateGet(this, _element).querySelector(".aDg .aDj > .aDh");
                      if (!statusArea) throw new Error("Failed to find status area");
                      return statusArea;
                    }
                    getInsertMoreArea() {
                      return (0, querySelectorOrFail.A)(__privateGet(this, _element), ".eq");
                    }
                    getInsertLinkButton() {
                      return (0, querySelectorOrFail.A)(__privateGet(this, _element), ".e5.aaA.aMZ");
                    }
                    getSendButton() {
                      return (0, querySelectorOrFail.A)(__privateGet(this, _element), ".IZ .Up div > div[role=button]:not(.Uo):not([aria-haspopup=true]):not([class^=inboxsdk_])");
                    }
                    getScheduleSendButton() {
                      return (0, querySelectorOrFail.A)(__privateGet(this, _element), '[selector="scheduledSend"]');
                    }
                    getMoreSendOptionsButton() {
                      return (0, querySelectorOrFail.A)(__privateGet(this, _element), ".hG");
                    }
                    // When schedule send is available, this returns the element that contains both buttons.
                    getSendButtonGroup() {
                      const scheduleSend = __privateGet(this, _element).querySelector(".IZ .Up div > [role=button][aria-haspopup=true]:not([class^=inboxsdk_])");
                      if (scheduleSend) {
                        return scheduleSend.parentElement;
                      }
                      return this.getSendButton();
                    }
                    getSendAndArchiveButton() {
                      if (!this.isReply()) {
                        return null;
                      }
                      const sendAndArchiveButton = __privateGet(this, _element).querySelector(".IZ .Up div > div[role=button].Uo:not([aria-haspopup=true]):not([class^=inboxsdk_])");
                      if (sendAndArchiveButton) {
                        return sendAndArchiveButton;
                      }
                      const sendButton = this.getSendButton();
                      const parent = sendButton.parentElement;
                      if (!(parent instanceof HTMLElement)) throw new Error("should not happen");
                      if (parent.childElementCount <= 1) {
                        __privateGet(this, _driver).getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find, childElementCount <= 1");
                        return null;
                      }
                      const firstNotSendElement = parent.children[0] !== sendButton ? parent.children[0] : parent.children[1];
                      const result = !firstNotSendElement ? null : firstNotSendElement.querySelector("[role=button]");
                      if (result) {
                        __privateGet(this, _driver).getLogger().eventSdkPassive("getSendAndArchiveButton - old method - found");
                      } else {
                        __privateGet(this, _driver).getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find");
                      }
                      return result;
                    }
                    getCloseButton() {
                      return __privateGet(this, _element).querySelectorAll(".Hm > img")[2];
                    }
                    getMoleSwitchButton() {
                      return __privateGet(this, _element).querySelectorAll(".Hm > img")[1];
                    }
                    getBottomBarTable() {
                      return (0, querySelectorOrFail.A)(__privateGet(this, _element), ".aoP .aDh > table");
                    }
                    getBottomToolbarContainer() {
                      return (0, querySelectorOrFail.A)(__privateGet(this, _element), ".aoP .aDj");
                    }
                    getDiscardButton() {
                      return (0, querySelectorOrFail.A)(__privateGet(this, _element), ".gU .oh");
                    }
                    getComposeID() {
                      return __privateGet(this, _composeID);
                    }
                    getInitialMessageID() {
                      return __privateGet(this, _initialMessageId);
                    }
                    getMessageID() {
                      return __privateGet(this, _messageId);
                    }
                    getTargetMessageID() {
                      return __privateGet(this, _targetMessageID);
                    }
                    getThreadID() {
                      return __privateGet(this, _threadID);
                    }
                    async getCurrentDraftID() {
                      const draftID = __privateMethod(this, _GmailComposeView_instances, getDraftIDfromForm_fn).call(this);
                      if (__privateGet(this, _messageId)) {
                        return draftID;
                      } else {
                        const syncMessageId = __privateMethod(this, _GmailComposeView_instances, getMessageIDfromForm_fn).call(this);
                        if (syncMessageId) {
                          try {
                            await __privateGet(this, _driver).getGmailMessageIdForSyncDraftId(syncMessageId);
                          } catch (e) {
                            return null;
                          }
                          return draftID;
                        }
                      }
                    }
                    getDraftID() {
                      let draftIDpromise = __privateGet(this, _draftIDpromise);
                      if (!draftIDpromise) {
                        draftIDpromise = __privateSet(this, _draftIDpromise, __privateMethod(this, _GmailComposeView_instances, getDraftIDimplementation_fn).call(this));
                      }
                      return draftIDpromise;
                    }
                    addManagedViewController(viewController) {
                      __privateGet(this, _managedViewControllers).push(viewController);
                    }
                    ensureGroupingIsOpen(type) {
                      ensureGroupingIsOpen(__privateGet(this, _element), type);
                    }
                    ensureAppButtonToolbarsAreClosed() {
                      ensureAppButtonToolbarsAreClosed(__privateGet(this, _element));
                    }
                    isMinimized() {
                      const element = this.getElement();
                      const bodyElement = this.getMaybeBodyElement();
                      const bodyContainer = find_default()(element.children, (child) => child.contains(bodyElement));
                      if (!bodyContainer) {
                        if (!hasReportedMissingBody) {
                          hasReportedMissingBody = true;
                          __privateGet(this, _driver).getLogger().error(new Error("isMinimized failed to find bodyContainer"), {
                            bodyElement: !!bodyElement,
                            hasMessageIDElement: !!__privateGet(this, _messageIDElement),
                            ended: __privateGet(this, _eventStream).ended,
                            bodyElStillInCompose: __privateGet(this, _element).contains(__privateGet(this, _seenBodyElement)),
                            seenBodyElHtml: (0, censorHTMLstring.A)(__privateGet(this, _seenBodyElement).outerHTML),
                            composeHtml: (0, censorHTMLstring.A)(element.outerHTML)
                          });
                        }
                        return false;
                      }
                      return bodyContainer.style.display !== "";
                    }
                    setMinimized(minimized) {
                      if (minimized !== this.isMinimized()) {
                        if (__privateGet(this, _isInlineReplyForm)) throw new Error("Not implemented for inline compose views");
                        const minimizeButton = (0, querySelectorOrFail.A)(__privateGet(this, _element), ".Hm > img");
                        (0, simulate_mouse_event.jp)(minimizeButton);
                      }
                    }
                    setFullscreen(fullscreen) {
                      if (fullscreen !== this.isFullscreen()) {
                        if (__privateGet(this, _isInlineReplyForm)) throw new Error("Not implemented for inline compose views");
                        const fullscreenButton = (0, querySelectorOrFail.A)(__privateGet(this, _element), ".Hm > img:nth-of-type(2)");
                        (0, simulate_mouse_event.jp)(fullscreenButton);
                      }
                    }
                    setTitleBarColor(color) {
                      const buttonParent = (0, querySelectorOrFail.A)(__privateGet(this, _element), ".nH.Hy.aXJ table.cf.Ht td.Hm");
                      const elementsToModify = [(0, querySelectorOrFail.A)(__privateGet(this, _element), ".nH.Hy.aXJ .pi > .l.o"), (0, querySelectorOrFail.A)(__privateGet(this, _element), ".nH.Hy.aXJ .l.m"), (0, querySelectorOrFail.A)(__privateGet(this, _element), ".nH.Hy.aXJ .l.m > .l.n")];
                      buttonParent.classList.add("inboxsdk__compose_customTitleBarColor");
                      elementsToModify.forEach((el) => {
                        el.style.backgroundColor = color;
                      });
                      return () => {
                        buttonParent.classList.remove("inboxsdk__compose_customTitleBarColor");
                        elementsToModify.forEach((el) => {
                          el.style.backgroundColor = "";
                        });
                      };
                    }
                    setTitleBarText(text) {
                      if (this.isInlineReplyForm()) {
                        throw new Error("setTitleBarText() is not supported on inline compose views");
                      }
                      const titleBarTable = (0, querySelectorOrFail.A)(__privateGet(this, _element), ".nH.Hy.aXJ table.cf.Ht");
                      if (titleBarTable.classList.contains("inboxsdk__compose_hasCustomTitleBarText")) {
                        throw new Error("Custom title bar text is already registered for this compose view");
                      }
                      const titleTextParent = (0, querySelectorOrFail.A)(titleBarTable, "div.Hp").parentElement;
                      if (!(titleTextParent instanceof HTMLElement)) {
                        throw new Error("Could not locate title bar text parent");
                      }
                      titleBarTable.classList.add("inboxsdk__compose_hasCustomTitleBarText");
                      titleTextParent.classList.add("inboxsdk__compose_nativeTitleBarText");
                      const customTitleText = document.createElement("td");
                      customTitleText.classList.add("inboxsdk__compose_customTitleBarText");
                      customTitleText.innerHTML = js_default()`
      <div class="Hp">
        <h2 class="a3E">
          <div class="aYF">${text}</div>
        </h2>
      </div>
    `;
                      titleTextParent.insertAdjacentElement("afterend", customTitleText);
                      return () => {
                        customTitleText.remove();
                        titleBarTable.classList.remove("inboxsdk__compose_hasCustomTitleBarText");
                        titleTextParent.classList.remove("inboxsdk__compose_nativeTitleBarText");
                      };
                    }
                    getElement() {
                      return __privateGet(this, _element);
                    }
                    isFullscreen() {
                      return __privateGet(this, _isFullscreen);
                    }
                    getLastSelectionRange() {
                      const range = __privateGet(this, _lastSelectionRange);
                      if (range && !this.getBodyElement().contains(range.commonAncestorContainer)) {
                        __privateSet(this, _lastSelectionRange, void 0);
                      }
                      return __privateGet(this, _lastSelectionRange);
                    }
                    setLastSelectionRange(lastSelectionRange) {
                      __privateSet(this, _lastSelectionRange, lastSelectionRange);
                    }
                    registerRequestModifier(modifier) {
                      const keyId = __privateMethod(this, _GmailComposeView_instances, getDraftIDfromForm_fn).call(this);
                      if (!keyId) throw new Error("keyId should be set here");
                      const modifierId = __privateGet(this, _driver).getPageCommunicator().registerComposeRequestModifier(keyId, __privateGet(this, _driver).getAppId());
                      __privateGet(this, _requestModifiers)[modifierId] = modifier;
                      __privateMethod(this, _GmailComposeView_instances, startListeningForModificationRequests_fn).call(this);
                      __privateGet(this, _stopper).onValue(() => {
                        __privateGet(this, _driver).getPageCommunicator().unregisterComposeRequestModifier(keyId, modifierId);
                      });
                    }
                    setupLinkPopOvers() {
                      if (!__privateGet(this, _hasSetupLinkPopOvers)) {
                        __privateSet(this, _hasSetupLinkPopOvers, true);
                        __privateGet(this, _eventStream).plug(setupLinkPopOvers(this));
                      }
                    }
                  }
                  _element = new WeakMap();
                  _seenBodyElement = new WeakMap();
                  _isInlineReplyForm = new WeakMap();
                  _isFullscreen = new WeakMap();
                  _isStandalone = new WeakMap();
                  _driver = new WeakMap();
                  _managedViewControllers = new WeakMap();
                  _eventStream = new WeakMap();
                  _isTriggeringADraftSavePending = new WeakMap();
                  _buttonViewControllerTooltipMap = new WeakMap();
                  _composeID = new WeakMap();
                  _messageIDElement = new WeakMap();
                  _messageId = new WeakMap();
                  _initialMessageId = new WeakMap();
                  _targetMessageID = new WeakMap();
                  _draftIDpromise = new WeakMap();
                  _threadID = new WeakMap();
                  _stopper = new WeakMap();
                  _lastSelectionRange = new WeakMap();
                  _requestModifiers = new WeakMap();
                  _isListeningToAjaxInterceptStream = new WeakMap();
                  _formattingArea = new WeakMap();
                  _closedProgrammatically = new WeakMap();
                  _destroyed = new WeakMap();
                  _removedFromDOMStopper = new WeakMap();
                  _hasSetupLinkPopOvers = new WeakMap();
                  _page = new WeakMap();
                  _GmailComposeView_instances = new WeakSet();
                  destroy_fn = function() {
                    __privateGet(this, _eventStream).emit({
                      eventName: "destroy",
                      data: {
                        messageID: this.getMessageID(),
                        closedByInboxSDK: __privateGet(this, _closedProgrammatically)
                      }
                    });
                    __privateGet(this, _eventStream).end();
                    __privateGet(this, _managedViewControllers).forEach((vc) => {
                      vc.destroy();
                    });
                    __privateSet(this, _requestModifiers, {});
                    __privateGet(this, _managedViewControllers).length = 0;
                    __privateGet(this, _stopper).destroy();
                    __privateSet(this, _destroyed, true);
                  };
                  getSubjectChangesStream_fn = function() {
                    const subjectElement = this.getSubjectInput();
                    return kefir_esm.fromEvents(subjectElement, "input").map(() => {
                      return {
                        eventName: "subjectChanged"
                      };
                    });
                  };
                  setupStreams_fn = function() {
                    __privateGet(this, _eventStream).plug(getAddressChangesStream(this));
                    __privateGet(this, _eventStream).plug(__privateMethod(this, _GmailComposeView_instances, getSubjectChangesStream_fn).call(this));
                    __privateGet(this, _eventStream).plug(get_body_changes_stream(this));
                    __privateGet(this, _eventStream).plug(get_response_type_changes_stream(this));
                    __privateGet(this, _eventStream).plug(getPresendingStream({
                      element: this.getElement(),
                      sendButton: this.getSendButton(),
                      sendAndArchive: this.getSendAndArchiveButton()
                    }));
                    __privateGet(this, _eventStream).plug(getPrescheduledSendingStream({
                      element: this.getElement(),
                      scheduleSendButton: this.getScheduleSendButton(),
                      moreSendOptionsButton: this.getMoreSendOptionsButton()
                    }));
                    let discardButton;
                    try {
                      discardButton = this.getDiscardButton();
                    } catch (err) {
                      __privateGet(this, _driver).getLogger().errorSite(new Error("Failed to find discard button"), {
                        html: (0, censorHTMLstring.A)(__privateGet(this, _element).outerHTML)
                      });
                    }
                    if (discardButton) {
                      __privateGet(this, _eventStream).plug(getDiscardStream({
                        element: this.getElement(),
                        discardButton
                      }));
                    }
                    __privateGet(this, _eventStream).plug(kefir_esm.fromEvents(this.getElement(), "inboxSDKsendCanceled").map(() => ({
                      eventName: "sendCanceled"
                    })));
                    __privateGet(this, _eventStream).plug(kefir_esm.fromEvents(this.getElement(), "inboxSDKscheduleSendMenuOpenCanceled").map(() => ({
                      eventName: "scheduleSendMenuOpenCanceled"
                    })));
                    __privateGet(this, _eventStream).plug(kefir_esm.fromEvents(this.getElement(), "inboxSDKdiscardCanceled").map(() => ({
                      eventName: "discardCanceled"
                    })));
                    __privateGet(this, _eventStream).plug(kefir_esm.later(10, void 0).flatMap(() => (0, get_minimized_stream.A)(this)).changes().map((minimized) => ({
                      eventName: minimized ? "minimized" : "restored"
                    })));
                  };
                  setupConsistencyCheckers_fn = function() {
                    try {
                      (0, handle_compose_link_chips.A)(this);
                      monitor_selection_range(this);
                      (0, manage_button_grouping.A)(this);
                      sizeFixer(__privateGet(this, _driver), this);
                    } catch (err) {
                      __privateGet(this, _driver).getLogger().error(err);
                    }
                  };
                  setupIDs_fn = function() {
                    const syncTargetMessageID = __privateMethod(this, _GmailComposeView_instances, getTargetMessageID_fn).call(this);
                    if (syncTargetMessageID) {
                      __privateGet(this, _driver).getGmailMessageIdForSyncMessageId(syncTargetMessageID).then((gmailMessageId) => __privateSet(this, _targetMessageID, gmailMessageId));
                    }
                    const syncMessageId = __privateMethod(this, _GmailComposeView_instances, getMessageIDfromForm_fn).call(this);
                    if (syncMessageId) {
                      __privateGet(this, _driver).getGmailMessageIdForSyncDraftId(syncMessageId).then((gmailMessageId) => {
                        __privateSet(this, _initialMessageId, gmailMessageId);
                        __privateSet(this, _messageId, gmailMessageId);
                      }).catch(() => {
                      });
                      __privateGet(this, _driver).reportRecentSyncDraftId(syncMessageId);
                      __privateGet(this, _stopper).onValue(() => {
                        __privateGet(this, _driver).reportDraftClosed(syncMessageId);
                      });
                    } else {
                      __privateGet(this, _driver).getLogger().error(new Error("Draft is missing sync draft id"));
                    }
                    const legacyThreadIdElement = __privateGet(this, _element).querySelector('input[name="lts"]');
                    if (legacyThreadIdElement && typeof legacyThreadIdElement.value === "string") __privateSet(this, _threadID, legacyThreadIdElement.value);
                  };
                  updateComposeFullscreenState_fn = function() {
                    if (__privateGet(this, _isInlineReplyForm)) {
                      __privateSet(this, _isFullscreen, false);
                    } else {
                      if (__privateGet(this, _isStandalone)) {
                        __privateSet(this, _isFullscreen, true);
                      } else {
                        const fullScreenContainer = gmail_element_getter.A.getFullscreenComposeWindowContainer();
                        if (!fullScreenContainer) {
                          __privateSet(this, _isFullscreen, false);
                        } else {
                          __privateSet(this, _isFullscreen, fullScreenContainer.contains(__privateGet(this, _element)));
                        }
                      }
                    }
                  };
                  hideDropzones_fn = function() {
                    setCss("compose dropzone hider", "body > .aC7 .aC9 {visibility: hidden;}");
                  };
                  reenableDropzones_fn = function() {
                    setCss("compose dropzone hider", null);
                  };
                  dropzonesVisible_fn = function() {
                    return find_default()(document.querySelectorAll("body > .aC7:not(.aWP)"), isElementVisible.A) != null;
                  };
                  findDropzoneForThisCompose_fn = function(inline) {
                    const rect = __privateGet(this, _element).getBoundingClientRect();
                    const dropzoneSelector = inline ? "body > .aC7:not(.aWP)" : "body > .aC7.aWP";
                    const el = [...document.querySelectorAll(dropzoneSelector)].find((dropzone) => {
                      if (!(0, isElementVisible.A)(dropzone)) {
                        return false;
                      }
                      const top = parseInt(dropzone.style.top, 10);
                      const bottom = top + parseInt(dropzone.style.height, 10);
                      const left = parseInt(dropzone.style.left, 10);
                      const right = left + parseInt(dropzone.style.width, 10);
                      return top >= rect.top && left >= rect.left && right <= rect.right && (this.isFullscreen() || bottom <= rect.bottom);
                    });
                    if (!el) {
                      throw new Error("Failed to find dropzone");
                    }
                    return el;
                  };
                  attachFiles_fn = async function(files, inline) {
                    __privateMethod(this, _GmailComposeView_instances, hideDropzones_fn).call(this);
                    const endDrag = once_default()(() => simulateDragEnd(__privateGet(this, _element), files));
                    try {
                      let firstLoop = true;
                      for (const partitionedFiles of transducers_default().partition(files, 3)) {
                        if (firstLoop) {
                          firstLoop = false;
                        } else {
                          await (0, pdelay_js.A)(500);
                        }
                        simulateDragOver(__privateGet(this, _element), partitionedFiles);
                        await (0, wait_for.A)(() => __privateMethod(this, _GmailComposeView_instances, dropzonesVisible_fn).call(this), 20 * 1e3);
                        const dropzone = __privateMethod(this, _GmailComposeView_instances, findDropzoneForThisCompose_fn).call(this, inline);
                        simulateDrop(dropzone, partitionedFiles);
                        endDrag();
                        await (0, wait_for.A)(() => !__privateMethod(this, _GmailComposeView_instances, dropzonesVisible_fn).call(this), 20 * 1e3);
                      }
                    } catch (err) {
                      __privateGet(this, _driver).getLogger().error(err);
                    } finally {
                      endDrag();
                      __privateMethod(this, _GmailComposeView_instances, reenableDropzones_fn).call(this);
                    }
                  };
                  /**
                   * gets the draft ID
                   * from the input that used to hold the hex message ID. Still does not
                   * populate until first save.
                   */
                  getDraftIDfromForm_fn = function() {
                    const value = __privateGet(this, _messageIDElement) && __privateGet(this, _messageIDElement).value || null;
                    if (typeof value === "string" && value !== "undefined" && value !== "null") {
                      return value.replace("#", "").replace("msg-a:", "");
                    }
                    return null;
                  };
                  getMessageIDfromForm_fn = function() {
                    const value = __privateGet(this, _messageIDElement) && __privateGet(this, _messageIDElement).value || null;
                    if (typeof value === "string" && value !== "undefined" && value !== "null") {
                      return value.replace("#", "");
                    }
                    return null;
                  };
                  getDraftIDimplementation_fn = async function() {
                    const draftID = __privateMethod(this, _GmailComposeView_instances, getDraftIDfromForm_fn).call(this);
                    if (__privateGet(this, _messageId)) {
                      return draftID;
                    } else {
                      const syncMessageId = __privateMethod(this, _GmailComposeView_instances, getMessageIDfromForm_fn).call(this);
                      if (syncMessageId) {
                        try {
                          const gmailMessageId = await __privateGet(this, _driver).getGmailMessageIdForSyncDraftId(syncMessageId);
                        } catch (e) {
                          await __privateGet(this, _eventStream).filter((_ref8) => {
                            let {
                              eventName
                            } = _ref8;
                            return eventName === "draftSaved";
                          }).beforeEnd(() => null).map(() => __privateMethod(this, _GmailComposeView_instances, getDraftIDfromForm_fn).call(this)).take(1).toPromise();
                        }
                        return draftID;
                      }
                    }
                  };
                  triggerDraftSave_fn = function() {
                    if (__privateGet(this, _isTriggeringADraftSavePending)) {
                      return;
                    } else {
                      __privateSet(this, _isTriggeringADraftSavePending, true);
                      kefir_esm.later(0, void 0).takeUntilBy(__privateGet(this, _stopper)).onValue(() => {
                        __privateSet(this, _isTriggeringADraftSavePending, false);
                        const body = this.getMaybeBodyElement();
                        if (body) {
                          const unsilence = __privateGet(this, _driver).getPageCommunicator().silenceGmailErrorsForAMoment();
                          try {
                            simulateKey(body, 190, 0);
                          } finally {
                            unsilence();
                          }
                        }
                      });
                    }
                  };
                  // If this compose is a reply, then this gets the message ID of the message
                  // we're replying to.
                  getTargetMessageID_fn = function() {
                    const input = __privateGet(this, _element).querySelector('input[name="rm"]');
                    return input && typeof input.value === "string" && input.value != "undefined" ? input.value.replace("#", "") : null;
                  };
                  startListeningForModificationRequests_fn = function() {
                    if (__privateGet(this, _isListeningToAjaxInterceptStream)) {
                      return;
                    }
                    const keyId = __privateMethod(this, _GmailComposeView_instances, getDraftIDfromForm_fn).call(this);
                    if (!keyId) throw new Error("keyId should be set here");
                    __privateGet(this, _driver).getPageCommunicator().ajaxInterceptStream.filter((_ref9) => {
                      let {
                        type,
                        composeid,
                        draftID,
                        modifierId
                      } = _ref9;
                      return type === "inboxSDKmodifyComposeRequest" && (composeid === keyId || keyId === draftID) && Boolean(__privateGet(this, _requestModifiers)[modifierId]);
                    }).takeUntilBy(__privateGet(this, _stopper)).onValue((_ref10) => {
                      let {
                        modifierId,
                        composeParams
                      } = _ref10;
                      if (__privateGet(this, _driver).getLogger().shouldTrackEverything()) {
                        __privateGet(this, _driver).getLogger().eventSite("inboxSDKmodifyComposeRequest");
                      }
                      const modifier = __privateGet(this, _requestModifiers)[modifierId];
                      const result = new Promise((resolve) => resolve(modifier(composeParams)));
                      result.then((newComposeParams) => __privateGet(this, _driver).getPageCommunicator().modifyComposeRequest(keyId, modifierId, newComposeParams || composeParams)).then((x) => {
                        if (__privateGet(this, _driver).getLogger().shouldTrackEverything()) {
                          __privateGet(this, _driver).getLogger().eventSite("composeRequestModified");
                        }
                        return x;
                      }).catch((err) => {
                        __privateGet(this, _driver).getPageCommunicator().modifyComposeRequest(keyId, modifierId, composeParams);
                        __privateGet(this, _driver).getLogger().error(err);
                      });
                    });
                    __privateSet(this, _isListeningToAjaxInterceptStream, true);
                  };
                  const gmail_compose_view = GmailComposeView;
                })
              ),
              /***/
              9121: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__2(7332);
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__2(4924);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_7___default = /* @__PURE__ */ __webpack_require__2.n(kefir_stopper__WEBPACK_IMPORTED_MODULE_7__);
                  var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(5755);
                  var classnames__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(classnames__WEBPACK_IMPORTED_MODULE_1__);
                  var _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(5389);
                  var _lib_logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__2(2617);
                  var _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__2(9860);
                  var _views_SimpleElementView__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__2(3741);
                  module2 = __webpack_require__2.hmd(module2);
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_6__.defn)(module2, addStatusBar);
                  function addStatusBar(gmailComposeView, options) {
                    const {
                      height,
                      orderHint,
                      addAboveNativeStatusBar
                    } = {
                      height: 40,
                      orderHint: 0,
                      addAboveNativeStatusBar: false,
                      ...options
                    };
                    const statusbar = new StatusBar(gmailComposeView, height, orderHint, addAboveNativeStatusBar);
                    gmailComposeView.getStopper().takeUntilBy(kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(statusbar, "destroy")).onValue(() => statusbar.destroy());
                    return statusbar;
                  }
                  function createElement(orderHint, addAboveNativeStatusBar) {
                    const el = document.createElement("div");
                    el.className = classnames__WEBPACK_IMPORTED_MODULE_1___default()("aDh", "inboxsdk__compose_statusbar", {
                      inboxsdk__addAboveNative: addAboveNativeStatusBar
                    });
                    el.style.fontFamily = "Roboto,RobotoDraft,Helvetica,Arial,sans-serif";
                    el.style.fontSize = "15.6px";
                    el.setAttribute("data-order-hint", String(orderHint));
                    return el;
                  }
                  class StatusBar extends _views_SimpleElementView__WEBPACK_IMPORTED_MODULE_5__.A {
                    constructor(gmailComposeView, height, orderHint, addAboveNativeStatusBar) {
                      super(createElement(orderHint, addAboveNativeStatusBar));
                      __publicField(this, "_prependContainer", null);
                      __publicField(this, "_stopper", kefir_stopper__WEBPACK_IMPORTED_MODULE_7___default()());
                      this._addAboveNativeStatusBar = addAboveNativeStatusBar;
                      this._gmailComposeView = gmailComposeView;
                      this._nativeStatusContainer = (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_4__.A)(gmailComposeView.getElement(), ".iN > tbody .aDj");
                      this._setStatusBar();
                      this.setHeight(height);
                    }
                    destroy() {
                      if (this.destroyed) {
                        return;
                      }
                      super.destroy();
                      this._stopper.destroy();
                      if (this._prependContainer && this._prependContainer.children.length === 0) {
                        this._prependContainer.remove();
                      }
                      this._updateTotalHeight();
                    }
                    setHeight(newHeight) {
                      this.el.style.height = newHeight + "px";
                      this._updateTotalHeight();
                    }
                    _updateTotalHeight() {
                      const totalAddedStatusBarHeight = Array.from(this._gmailComposeView.getElement().querySelectorAll(".inboxsdk__compose_statusbar")).map((el) => el.getBoundingClientRect().height).reduce((a, b) => a + b, 0);
                      this._gmailComposeView.getElement().style.setProperty("--inboxsdk-total-added-statusbar-height", totalAddedStatusBarHeight + "px");
                    }
                    _setStatusBar() {
                      try {
                        const statusArea = this._gmailComposeView.getStatusArea();
                        this._gmailComposeView.getElement().classList.add("inboxsdk__compose_statusbarActive");
                        if (this._addAboveNativeStatusBar) {
                          const prependContainer = this._prependContainer = statusArea.querySelector(".inboxsdk__compose_statusBarPrependContainer") || document.createElement("div");
                          prependContainer.classList.add("inboxsdk__compose_statusBarPrependContainer");
                          statusArea.insertAdjacentElement("afterbegin", prependContainer);
                          (0, _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_2__.A)(prependContainer, this.el);
                        } else {
                          if (this._gmailComposeView.isInlineReplyForm()) {
                            const nativeStatusBar = (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_4__.A)(this._gmailComposeView.getElement(), ".iN > tbody .aDj .aDh .IZ");
                            (0, _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_2__.A)(nativeStatusBar, this.el);
                          } else {
                            (0, _lib_dom_insert_element_in_order__WEBPACK_IMPORTED_MODULE_2__.A)(statusArea, this.el);
                          }
                        }
                      } catch (err) {
                        _lib_logger__WEBPACK_IMPORTED_MODULE_3__.A.error(err);
                      }
                    }
                  }
                })
              ),
              /***/
              9e3: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      getAdditionalActionToolbar
                    )
                    /* harmony export */
                  });
                  const composeViewActionToolbars = /* @__PURE__ */ new WeakMap();
                  function getAdditionalActionToolbar(gmailComposeView) {
                    var groupedActionToolbar = gmailComposeView.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar > div");
                    if (groupedActionToolbar) {
                      return groupedActionToolbar;
                    }
                    let actionToolbar = gmailComposeView.getElement().querySelector(".inboxsdk__compose_actionToolbar > div");
                    if (actionToolbar) {
                      return actionToolbar;
                    }
                    actionToolbar = composeViewActionToolbars.get(gmailComposeView);
                    if (!actionToolbar) {
                      const _actionToolbar = actionToolbar = _addActionToolbar(gmailComposeView);
                      gmailComposeView.getStopper().onValue(() => {
                        _actionToolbar.remove();
                      });
                      composeViewActionToolbars.set(gmailComposeView, actionToolbar);
                    }
                    return actionToolbar;
                  }
                  function _addActionToolbar(gmailComposeView) {
                    const td = document.createElement("td");
                    td.setAttribute("class", "inboxsdk__compose_actionToolbar gU");
                    const formattingArea = gmailComposeView.getFormattingArea();
                    if (!formattingArea) throw new Error("formatting area missing");
                    formattingArea.insertAdjacentElement("beforebegin", td);
                    let parent = td.parentElement;
                    while (parent) {
                      if (parent.tagName === "TABLE") break;
                      parent = parent.parentElement;
                    }
                    if (parent) {
                      const col = parent.querySelector("colgroup col");
                      if (col) {
                        const newCol1 = document.createElement("col");
                        newCol1.setAttribute("class", "inboxsdk__compose_actionToolbarColumn");
                        const newCol2 = document.createElement("col");
                        newCol2.setAttribute("class", "inboxsdk__compose_separatorColumn");
                        col.insertAdjacentElement("afterend", newCol2);
                        col.insertAdjacentElement("afterend", newCol1);
                      }
                    }
                    var toolbarDiv = document.createElement("div");
                    td.appendChild(toolbarDiv);
                    return toolbarDiv;
                  }
                })
              ),
              /***/
              5845: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      getMinimizedStream
                    )
                    /* harmony export */
                  });
                  var lodash_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(4455);
                  var lodash_find__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(lodash_find__WEBPACK_IMPORTED_MODULE_0__);
                  var ud_kefir__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(616);
                  var ud_kefir__WEBPACK_IMPORTED_MODULE_2___default = /* @__PURE__ */ __webpack_require__2.n(ud_kefir__WEBPACK_IMPORTED_MODULE_2__);
                  var _lib_dom_make_mutation_observer_stream__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(5938);
                  module2 = __webpack_require__2.hmd(module2);
                  const fnStream = ud_kefir__WEBPACK_IMPORTED_MODULE_2___default()(module2, getMinimizedStream_);
                  function getMinimizedStream(gmailComposeView) {
                    return fnStream.flatMapLatest((fn) => fn(gmailComposeView));
                  }
                  function getMinimizedStream_(gmailComposeView) {
                    const element = gmailComposeView.getElement();
                    const bodyElement = gmailComposeView.getBodyElement();
                    const bodyContainer = lodash_find__WEBPACK_IMPORTED_MODULE_0___default()(element.children, (child) => child.contains(bodyElement));
                    return (0, _lib_dom_make_mutation_observer_stream__WEBPACK_IMPORTED_MODULE_1__.A)(bodyContainer, {
                      attributes: true,
                      attributeFilter: ["style"]
                    }).map(() => gmailComposeView.isMinimized());
                  }
                })
              ),
              /***/
              5865: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      GmailComposeButtonView
                    )
                    /* harmony export */
                  });
                  var lodash_includes__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(5193);
                  var lodash_includes__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(lodash_includes__WEBPACK_IMPORTED_MODULE_0__);
                  var kefir__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(7249);
                  var kefir_bus__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__2(8631);
                  var kefir_bus__WEBPACK_IMPORTED_MODULE_4___default = /* @__PURE__ */ __webpack_require__2.n(kefir_bus__WEBPACK_IMPORTED_MODULE_4__);
                  var _lib_logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(2617);
                  var _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__2(4603);
                  var _lib_dom_keyboard_shortcut_stream__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__2(5235);
                  class GmailComposeButtonView {
                    constructor(options) {
                      __publicField(this, "_element", document.createElement("div"));
                      __publicField(this, "_iconElement", document.createElement("div"));
                      this._isEnabled = options.enabled !== false;
                      this._iconClass = options.iconClass;
                      this._iconUrl = options.iconUrl;
                      this._tooltip = options.tooltip || options.title || options.text;
                      this._hasDropdown = !!options.hasDropdown;
                      this._keyboardShortcutHandle = options.keyboardShortcutHandle;
                      this._createElement(options);
                      this._eventStream = kefir_bus__WEBPACK_IMPORTED_MODULE_4___default()();
                      this._setupEventStream();
                      this._setupAestheticEvents();
                      if (options.enabled !== false) {
                        this._setupKeyboardShortcutEvent();
                      }
                    }
                    destroy() {
                      this._element.remove();
                      this._eventStream.end();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    activate() {
                      this.addClass("inboxsdk__composeButton_active");
                    }
                    deactivate() {
                      this.removeClass("inboxsdk__composeButton_active");
                    }
                    addClass(className) {
                      this._element.classList.add(className);
                    }
                    removeClass(className) {
                      this._element.classList.remove(className);
                    }
                    simulateHover() {
                      (0, _lib_dom_simulate_mouse_event__WEBPACK_IMPORTED_MODULE_5__.zU)(this._element);
                    }
                    setEnabled(value) {
                      this._setEnabled(value);
                    }
                    isEnabled() {
                      return this._isEnabled;
                    }
                    update(options) {
                      if (!options) {
                        this._element.style.display = "none";
                        return;
                      } else if (this._element.style.display === "none") {
                        this._element.style.display = "";
                      }
                      const newTooltip = options.tooltip || options.title || options.text;
                      if (newTooltip != this._tooltip) {
                        this._updateTooltip(newTooltip);
                      }
                      if (options.iconUrl != this._iconUrl) {
                        this._updateIconUrl(options.iconUrl);
                      }
                      if (options.iconClass != this._iconClass) {
                        this._updateIconClass(options.iconClass);
                      }
                      if (options.enabled === false || options.enabled === true) {
                        this._setEnabled(options.enabled);
                      }
                    }
                    _createElement(options) {
                      this._createMainElement(options);
                      this._createIconElement();
                    }
                    _createMainElement(options) {
                      this._element.setAttribute("class", "inboxsdk__composeButton");
                      if (options.tooltip) {
                        this._element.setAttribute("aria-label", options.tooltip);
                      }
                      this._element.setAttribute("role", "button");
                      this._element.setAttribute("tabindex", "0");
                      const newTooltip = options.tooltip || options.title || options.text;
                      if (newTooltip) {
                        this._element.setAttribute("data-tooltip", newTooltip);
                      }
                      if (options.enabled === false) {
                        this._element.classList.add("inboxsdk__button_disabled");
                      }
                      if (options.noOverflow) {
                        this._element.setAttribute("data-no-overflow", "");
                      }
                    }
                    _createIconElement() {
                      const iconElement = this._iconElement;
                      if (this._iconClass) {
                        iconElement.innerHTML = "&nbsp;";
                        iconElement.setAttribute("class", this._iconClass);
                      }
                      iconElement.classList.add("inboxsdk__button_icon");
                      this._element.appendChild(iconElement);
                      if (this._iconUrl) {
                        this._createIconImgElement();
                      }
                    }
                    _createIconImgElement() {
                      this._iconElement.innerHTML = "";
                      const iconImgElement = this._iconImgElement = document.createElement("img");
                      iconImgElement.classList.add("inboxsdk__button_iconImg");
                      if (this._iconUrl) {
                        iconImgElement.src = this._iconUrl;
                      } else {
                        _lib_logger__WEBPACK_IMPORTED_MODULE_2__.A.error(new Error("_createIconImgElement should not be called with null _iconUrl"));
                      }
                      this._iconElement.appendChild(iconImgElement);
                    }
                    _updateTooltip(newTooltip) {
                      this._tooltip = newTooltip;
                      if (newTooltip) {
                        this._element.setAttribute("data-tooltip", newTooltip);
                      } else {
                        this._element.removeAttribute("data-tooltip");
                      }
                    }
                    _updateIconUrl(newIconUrl) {
                      this._iconUrl = newIconUrl;
                      if (!newIconUrl && this._iconImgElement) {
                        this._iconImgElement.remove();
                        this._iconImgElement = null;
                      } else if (newIconUrl && !this._iconImgElement) {
                        this._createIconImgElement();
                      } else if (newIconUrl && this._iconImgElement) {
                        this._iconImgElement.src = newIconUrl;
                      }
                    }
                    _updateIconClass(newIconClass) {
                      this._iconClass = newIconClass;
                      this._iconElement.setAttribute("class", "inboxsdk__button_icon " + (newIconClass || ""));
                    }
                    _setEnabled(value) {
                      if (this._isEnabled === value) {
                        return;
                      }
                      this._isEnabled = value;
                      if (this._isEnabled) {
                        this._element.classList.remove("inboxsdk__button_disabled");
                      } else {
                        this._element.classList.add("inboxsdk__button_disabled");
                      }
                      this._eventStream.emit({
                        eventName: "enabledChanged",
                        isEnabled: this._isEnabled
                      });
                      if (this._isEnabled) {
                        this._setupKeyboardShortcutEvent();
                      }
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir__WEBPACK_IMPORTED_MODULE_1__.fromEvents(this._element, "click");
                      clickEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.filter(() => this.isEnabled()).map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      const isEnterOrSpace = (event) => lodash_includes__WEBPACK_IMPORTED_MODULE_0___default()([
                        32,
                        13
                        /* enter */
                      ], event.which);
                      const keydownEventStream = kefir__WEBPACK_IMPORTED_MODULE_1__.fromEvents(this._element, "keydown").filter(() => this.isEnabled());
                      const enterEventStream = keydownEventStream.filter(isEnterOrSpace);
                      this._eventStream.plug(enterEventStream.map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      enterEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                    }
                    _setupKeyboardShortcutEvent() {
                      const keyboardShortcutHandle = this._keyboardShortcutHandle;
                      if (keyboardShortcutHandle) {
                        this._eventStream.plug((0, _lib_dom_keyboard_shortcut_stream__WEBPACK_IMPORTED_MODULE_3__.A)(keyboardShortcutHandle.chord).takeUntilBy(this._eventStream.filter(function(event) {
                          return event.eventName === "enabledChanged" && event.isEnabled === false;
                        })).map(function(domEvent) {
                          return {
                            eventName: "click",
                            domEvent
                          };
                        }));
                      }
                    }
                    _setupAestheticEvents() {
                      kefir__WEBPACK_IMPORTED_MODULE_1__.fromEvents(this._element, "mouseenter").filter(() => this.isEnabled()).onValue(() => {
                        this._element.classList.add("inboxsdk__button_hover");
                      });
                      kefir__WEBPACK_IMPORTED_MODULE_1__.fromEvents(this._element, "mouseleave").onValue(() => {
                        this._element.classList.remove("inboxsdk__button_hover");
                      });
                    }
                  }
                })
              ),
              /***/
              7389: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      manage_button_grouping
                    )
                  });
                  var js = __webpack_require__2(7332);
                  var gmail_compose_button_view = __webpack_require__2(5865);
                  var basic_button_view_controller = __webpack_require__2(9755);
                  var insert_element_in_order = __webpack_require__2(5389);
                  var simulate_mouse_event = __webpack_require__2(4603);
                  var wait_for = __webpack_require__2(5156);
                  var logger = __webpack_require__2(2617);
                  var querySelectorOrFail = __webpack_require__2(9860);
                  var censorHTMLtree = __webpack_require__2(1443);
                  ;
                  function positionFormattingToolbar(gmailComposeView) {
                    const formattingToolbar = gmailComposeView.getFormattingToolbar();
                    if (formattingToolbar && formattingToolbar.style.display === "") {
                      const arrowElement = gmailComposeView.getFormattingToolbarArrow();
                      const buttonElement = gmailComposeView.getFormattingToolbarToggleButton();
                      const left = buttonElement.offsetLeft + buttonElement.clientWidth / 2 - arrowElement.offsetWidth / 2;
                      arrowElement.style.left = left + "px";
                      const statusBarPrependContainer = gmailComposeView.getStatusBarPrependContainer();
                      if (statusBarPrependContainer) {
                        formattingToolbar.style.bottom = -1 * statusBarPrependContainer.offsetHeight + "px";
                      } else {
                        formattingToolbar.style.bottom = "";
                      }
                    }
                  }
                  var get_or_fail = __webpack_require__2(4531);
                  ;
                  module2 = __webpack_require__2.hmd(module2);
                  const memberMap = (0, js.defonce)(module2, () => /* @__PURE__ */ new Map());
                  const manage_button_grouping = (0, js.defn)(module2, function manageButtonGrouping(gmailComposeView) {
                    if (gmailComposeView.getElement().getAttribute("data-button-grouping-managed") === "true") {
                      return;
                    }
                    var members = {};
                    memberMap.set(gmailComposeView, members);
                    gmailComposeView.getElement().setAttribute("data-button-grouping-managed", "true");
                    gmailComposeView.getEventStream().filter((event) => event.eventName === "fullscreenChanged").debounce(10).onValue(() => {
                      _handleComposeFullscreenStateChanged(gmailComposeView);
                    });
                    gmailComposeView.getEventStream().filter(function(event) {
                      return event.eventName === "buttonAdded";
                    }).onValue(() => {
                      groupButtonsAndAdjustToolbarPosition(gmailComposeView);
                    });
                    gmailComposeView.getEventStream().filter((event) => event.eventName === "resize" || event.eventName === "restored").onValue(() => {
                      groupButtonsAndAdjustToolbarPosition(gmailComposeView);
                    });
                    var el = gmailComposeView.getElement();
                    gmailComposeView.getStopper().onValue(function() {
                      memberMap.delete(gmailComposeView);
                      el.setAttribute("data-button-grouping-managed", "false");
                    });
                  });
                  function _handleComposeFullscreenStateChanged(gmailComposeView) {
                    if (gmailComposeView.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar")) {
                      _ungroupButtons(gmailComposeView);
                    }
                    groupButtonsAndAdjustToolbarPosition(gmailComposeView);
                  }
                  function _ungroupButtons(gmailComposeView) {
                    const members = (0, get_or_fail.A)(memberMap, gmailComposeView);
                    if (members.groupedToolbarButtonViewController) members.groupedToolbarButtonViewController.destroy();
                    if (members.formattingToolbarMutationObserver) members.formattingToolbarMutationObserver.disconnect();
                    const buttonToolbar = members.groupedActionToolbarContainer.firstElementChild;
                    if (buttonToolbar) {
                      _moveNoOverflowButtonsToContainer(gmailComposeView, buttonToolbar);
                      buttonToolbar.remove();
                      const composeActionToolbar = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), ".inboxsdk__compose_actionToolbar");
                      composeActionToolbar.innerHTML = "";
                      composeActionToolbar.appendChild(buttonToolbar);
                    }
                  }
                  function groupButtonsAndAdjustToolbarPosition(gmailComposeView) {
                    _groupButtonsIfNeeded(gmailComposeView);
                    _fixToolbarPosition(gmailComposeView);
                  }
                  const groupButtonsIfNeededMap = /* @__PURE__ */ new WeakSet();
                  function _groupButtonsIfNeeded(gmailComposeView) {
                    if (groupButtonsIfNeededMap.has(gmailComposeView)) return;
                    groupButtonsIfNeededMap.add(gmailComposeView);
                    window.requestAnimationFrame(() => {
                      groupButtonsIfNeededMap.delete(gmailComposeView);
                      if (gmailComposeView.isDestroyed()) return;
                      if (_doButtonsNeedToGroup(gmailComposeView)) {
                        var groupedActionToolbarContainer = _createGroupedActionToolbarContainer(gmailComposeView);
                        var groupToggleButtonViewController = _createGroupToggleButtonViewController(gmailComposeView);
                        _swapToActionToolbar(gmailComposeView, groupToggleButtonViewController);
                        _checkAndSetInitialState(gmailComposeView, groupToggleButtonViewController);
                        _startMonitoringFormattingToolbar(gmailComposeView, groupToggleButtonViewController);
                        gmailComposeView.getStopper().onValue(function() {
                          groupedActionToolbarContainer.remove();
                          groupToggleButtonViewController.destroy();
                        });
                      }
                    });
                  }
                  function _doButtonsNeedToGroup(gmailComposeView) {
                    const composeEl = gmailComposeView.getElement();
                    if (composeEl.querySelector(".inboxsdk__compose_groupedActionToolbar")) return false;
                    if (composeEl.querySelectorAll(".inboxsdk__composeButton:not([data-no-overflow])").length < 2) return false;
                    if (areNativeToolbarButtonsGrouped(composeEl)) {
                      return true;
                    }
                    return false;
                  }
                  const toolbarButtonStyles = /* @__PURE__ */ new WeakMap();
                  function areNativeToolbarButtonsGrouped(composeEl) {
                    const nativeButtonsContainer = composeEl.querySelector(".bAK");
                    const containerWidth = nativeButtonsContainer?.offsetWidth ?? 0;
                    const nativeButtons = Array.from(nativeButtonsContainer?.querySelectorAll(".wG") ?? []);
                    let buttonsWidth = 0;
                    for (const button of nativeButtons) {
                      const style = toolbarButtonStyles.get(button) ?? getComputedStyle(button);
                      if (!toolbarButtonStyles.has(button)) {
                        toolbarButtonStyles.set(button, style);
                      }
                      const margin = parseFloat(style.marginLeft) + parseFloat(style.marginRight);
                      buttonsWidth += button.offsetWidth;
                      buttonsWidth += margin;
                      if (buttonsWidth > containerWidth) {
                        return true;
                      }
                    }
                    return false;
                  }
                  function _createGroupedActionToolbarContainer(gmailComposeView) {
                    var groupedActionToolbarContainer = document.createElement("div");
                    groupedActionToolbarContainer.classList.add("inboxsdk__compose_groupedActionToolbar");
                    groupedActionToolbarContainer.innerHTML = '<div class="inboxsdk__compose_groupedActionToolbar_arrow"> </div>';
                    (0, get_or_fail.A)(memberMap, gmailComposeView).groupedActionToolbarContainer = groupedActionToolbarContainer;
                    groupedActionToolbarContainer.style.display = "none";
                    return groupedActionToolbarContainer;
                  }
                  function _createGroupToggleButtonViewController(gmailComposeView) {
                    var members = (0, get_or_fail.A)(memberMap, gmailComposeView);
                    var buttonView = _createGroupToggleButtonView();
                    var buttonViewController = new basic_button_view_controller.A({
                      buttonView,
                      activateFunction: function() {
                        _toggleGroupButtonToolbar(gmailComposeView, buttonViewController);
                        if (_isToggleExpanded()) {
                          (0, get_or_fail.A)(memberMap, gmailComposeView).groupedActionToolbarContainer.querySelectorAll(".inboxsdk__composeButton")[0].focus();
                        }
                      }
                    });
                    members.groupedActionToolbarContainer.addEventListener("keydown", function(event) {
                      if (event.which === 27) {
                        buttonViewController.activate();
                        buttonView.getElement().focus();
                        event.preventDefault();
                        event.stopPropagation();
                      }
                    });
                    (0, get_or_fail.A)(memberMap, gmailComposeView).groupedToolbarButtonViewController = buttonViewController;
                    return buttonViewController;
                  }
                  function _createGroupToggleButtonView() {
                    var buttonView = new gmail_compose_button_view.A({
                      tooltip: "More Tools",
                      iconUrl: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAAADxJREFUOBFjYKASYISa8x/NPJLFmdAMIJs7+Awi2ys000hy7EBdghHLgy+wqeYimgU+2QaPxhrZQUe6RgBYwgkWqJftAwAAAABJRU5ErkJggg=="
                    });
                    buttonView.addClass("inboxsdk__compose_groupedActionButton");
                    buttonView.getElement().setAttribute("tabindex", "1");
                    return buttonView;
                  }
                  function _swapToActionToolbar(gmailComposeView, buttonViewController) {
                    const actionToolbar = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), ".inboxsdk__compose_actionToolbar > div");
                    const actionToolbarContainer = actionToolbar.parentElement;
                    const newActionToolbar = document.createElement("div");
                    newActionToolbar.appendChild(buttonViewController.getView().getElement());
                    actionToolbarContainer.appendChild(newActionToolbar);
                    const groupedActionToolbarContainer = (0, get_or_fail.A)(memberMap, gmailComposeView).groupedActionToolbarContainer;
                    groupedActionToolbarContainer.insertBefore(actionToolbar, groupedActionToolbarContainer.firstElementChild);
                    actionToolbarContainer.appendChild(groupedActionToolbarContainer);
                    _moveNoOverflowButtonsToActionToolbar(gmailComposeView);
                  }
                  function _moveNoOverflowButtonsToActionToolbar(gmailComposeView) {
                    const actionToolbar = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), ".inboxsdk__compose_actionToolbar > div");
                    _moveNoOverflowButtonsToContainer(gmailComposeView, actionToolbar);
                  }
                  function _moveNoOverflowButtonsToContainer(gmailComposeView, container) {
                    const noOverflowButtons = gmailComposeView.getElement().querySelectorAll(".inboxsdk__composeButton[data-no-overflow]");
                    Array.from(noOverflowButtons).forEach((buttonElement) => (0, insert_element_in_order.A)(container, buttonElement, void 0, true));
                  }
                  function _checkAndSetInitialState(gmailComposeView, groupToggleButtonViewController) {
                    if (_isToggleExpanded()) {
                      _expandGroupButtonToolbar(gmailComposeView, groupToggleButtonViewController);
                    }
                  }
                  function _collapseGroupButtonToolbar(gmailComposeView, buttonViewController) {
                    (0, get_or_fail.A)(memberMap, gmailComposeView).groupedActionToolbarContainer.style.display = "none";
                    gmailComposeView.getElement().classList.remove("inboxsdk__compose_groupedActionToolbar_visible");
                    buttonViewController.getView().deactivate();
                    localStorage["inboxsdk__compose_groupedActionButton_state"] = "collapsed";
                    const bottomToolbarTable = gmailComposeView.getBottomBarTable();
                    bottomToolbarTable.style.position = "";
                    const bodyScrollContainer = gmailComposeView.getElement().querySelector(".qz");
                    if (bodyScrollContainer) {
                      bodyScrollContainer.scrollTop = bodyScrollContainer.scrollTop - 1;
                    }
                  }
                  function _expandGroupButtonToolbar(gmailComposeView, buttonViewController) {
                    (0, get_or_fail.A)(memberMap, gmailComposeView).groupedActionToolbarContainer.style.display = "";
                    gmailComposeView.getElement().classList.add("inboxsdk__compose_groupedActionToolbar_visible");
                    buttonViewController.getView().activate();
                    localStorage["inboxsdk__compose_groupedActionButton_state"] = "expanded";
                    _positionGroupToolbar(gmailComposeView);
                    const formattingToolbar = gmailComposeView.getFormattingToolbar();
                    if (formattingToolbar && formattingToolbar.style.display === "") {
                      (0, simulate_mouse_event.jp)(gmailComposeView.getFormattingToolbarToggleButton());
                    }
                    const bodyScrollContainer = gmailComposeView.getElement().querySelector(".qz");
                    if (bodyScrollContainer) {
                      bodyScrollContainer.scrollTop = bodyScrollContainer.scrollTop + 1;
                    }
                  }
                  function _toggleGroupButtonToolbar(gmailComposeView, buttonViewController) {
                    if (_isToggleExpanded()) {
                      _collapseGroupButtonToolbar(gmailComposeView, buttonViewController);
                    } else {
                      _expandGroupButtonToolbar(gmailComposeView, buttonViewController);
                    }
                  }
                  function _isToggleExpanded() {
                    return localStorage["inboxsdk__compose_groupedActionButton_state"] === "expanded";
                  }
                  const fixToolbarPositionMap = /* @__PURE__ */ new WeakSet();
                  function _fixToolbarPosition(gmailComposeView) {
                    if (fixToolbarPositionMap.has(gmailComposeView)) return;
                    fixToolbarPositionMap.add(gmailComposeView);
                    window.requestAnimationFrame(() => {
                      fixToolbarPositionMap.delete(gmailComposeView);
                      if (gmailComposeView.isDestroyed()) return;
                      positionFormattingToolbar(gmailComposeView);
                      var groupedActionToolbarContainer = gmailComposeView.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");
                      if (!groupedActionToolbarContainer) {
                        return;
                      }
                      if (groupedActionToolbarContainer.style.display === "none") {
                        return;
                      }
                      _positionGroupToolbar(gmailComposeView);
                    });
                  }
                  function _positionGroupToolbar(gmailComposeView) {
                    if (gmailComposeView.isMinimized()) {
                      return;
                    }
                    var groupedActionToolbarContainer = gmailComposeView.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");
                    if (!groupedActionToolbarContainer) {
                      return;
                    }
                    const groupedToolbarButton = (0, querySelectorOrFail.A)(gmailComposeView.getElement(), ".inboxsdk__compose_groupedActionButton");
                    const groupedActionToolbarArrow = (0, querySelectorOrFail.A)(groupedActionToolbarContainer, ".inboxsdk__compose_groupedActionToolbar_arrow");
                    groupedActionToolbarContainer.style.display = "";
                    if (groupedToolbarButton.offsetLeft + groupedToolbarButton.clientWidth > groupedActionToolbarContainer.offsetWidth) {
                      var marginLeft = groupedToolbarButton.clientWidth / 2 - groupedActionToolbarContainer.offsetWidth / 2 - 3;
                      groupedActionToolbarContainer.style.left = groupedToolbarButton.offsetLeft + marginLeft + "px";
                      groupedActionToolbarArrow.style.left = -(marginLeft + 1) + "px";
                    } else {
                      groupedActionToolbarContainer.style.left = "";
                      groupedActionToolbarArrow.style.left = groupedToolbarButton.offsetLeft - 1 + "px";
                    }
                    const bottomToolbarTable = gmailComposeView.getBottomBarTable();
                    bottomToolbarTable.style.position = "relative";
                    const bottomToolbarHeight = gmailComposeView.getBottomBarTable().clientHeight;
                    groupedActionToolbarContainer.style.bottom = `${bottomToolbarHeight + 1}px`;
                    if (bottomToolbarHeight < 1) {
                      const heElements = gmailComposeView.getElement().querySelectorAll("td.HE");
                      logger.A.error(new Error("bottom toolbar had bad height"), {
                        bottomToolbarHeight,
                        heElementHeights: Array.from(heElements).map((el) => el.clientHeight),
                        heElementsHTML: Array.from(heElements).map(censorHTMLtree.A)
                      });
                    }
                  }
                  function _startMonitoringFormattingToolbar(gmailComposeView, groupToggleButtonViewController) {
                    (0, wait_for.A)(function() {
                      if (gmailComposeView.isDestroyed()) throw "skip";
                      return gmailComposeView.getFormattingToolbar();
                    }).then((formattingToolbar) => {
                      const mutationObserver = new MutationObserver(function(mutations) {
                        const target = mutations[0].target;
                        if (target instanceof HTMLElement && target.style.display === "" && localStorage["inboxsdk__compose_groupedActionButton_state"] === "expanded") {
                          groupToggleButtonViewController.activate();
                        }
                      });
                      mutationObserver.observe(formattingToolbar, {
                        attributes: true,
                        attributeFilter: ["style"]
                      });
                      (0, get_or_fail.A)(memberMap, gmailComposeView).formattingToolbarMutationObserver = mutationObserver;
                      gmailComposeView.getStopper().onValue(() => mutationObserver.disconnect());
                    }).catch((err) => {
                      if (err !== "skip") {
                        logger.A.error(err);
                        throw err;
                      }
                    });
                  }
                })
              ),
              /***/
              6134: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  var _counts, _GmailThreadRowView_instances, getButtonToolbar_fn, getCounts_fn;
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      gmail_thread_row_view
                    ),
                    v: () => (
                      /* binding */
                      removeAllThreadRowUnclaimedModifications
                    )
                  });
                  var once = __webpack_require__2(8921);
                  var once_default = /* @__PURE__ */ __webpack_require__2.n(once);
                  var flatten2 = __webpack_require__2(4176);
                  var flatten_default = /* @__PURE__ */ __webpack_require__2.n(flatten2);
                  var includes = __webpack_require__2(5193);
                  var includes_default = /* @__PURE__ */ __webpack_require__2.n(includes);
                  var intersection = __webpack_require__2(4225);
                  var intersection_default = /* @__PURE__ */ __webpack_require__2.n(intersection);
                  var uniqBy = __webpack_require__2(8496);
                  var uniqBy_default = /* @__PURE__ */ __webpack_require__2.n(uniqBy);
                  var flatMap = __webpack_require__2(6501);
                  var flatMap_default = /* @__PURE__ */ __webpack_require__2.n(flatMap);
                  var js = __webpack_require__2(7332);
                  var kefir_esm = __webpack_require__2(7249);
                  var browser_asap = __webpack_require__2(4622);
                  var browser_asap_default = /* @__PURE__ */ __webpack_require__2.n(browser_asap);
                  var querySelectorOrFail = __webpack_require__2(9860);
                  var make_mutation_observer_chunked_stream = __webpack_require__2(3197);
                  var insert_element_in_order = __webpack_require__2(5389);
                  var kefir_cast = __webpack_require__2(5164);
                  var kefir_cast_default = /* @__PURE__ */ __webpack_require__2.n(kefir_cast);
                  var delay_asap = __webpack_require__2(1136);
                  var kefir_stopper_js = __webpack_require__2(4924);
                  var js_default = /* @__PURE__ */ __webpack_require__2.n(kefir_stopper_js);
                  var gmail_dropdown_view = __webpack_require__2(3612);
                  var dropdown_view = __webpack_require__2(3046);
                  var isEqual = __webpack_require__2(1470);
                  var isEqual_default = /* @__PURE__ */ __webpack_require__2.n(isEqual);
                  var update_icon = __webpack_require__2(2621);
                  ;
                  class GmailLabelView {
                    constructor() {
                      let opts = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      this._element = document.createElement("div");
                      this._element.className = "inboxsdk__gmail_label ar as " + (opts.classes || []).join(" ");
                      this._element.innerHTML = `
			<div class="at">
				<div class="au">
					<div class="av"></div>
				</div>
			</div>`;
                      this._labelDescriptor = {};
                      this._iconSettings = {};
                    }
                    getElement() {
                      return this._element;
                    }
                    updateLabelDescriptor(labelDescriptor) {
                      this._handleNewLabelDescriptor(labelDescriptor);
                    }
                    _handleNewLabelDescriptor(labelDescriptor) {
                      if (!labelDescriptor) {
                        this._labelDescriptor = {};
                        return;
                      }
                      labelDescriptor = Object.assign({
                        foregroundColor: "rgb(102, 102, 102)",
                        //dark grey
                        backgroundColor: "rgb(221, 221, 221)",
                        //light grey
                        maxWidth: "90px"
                      }, labelDescriptor);
                      if (isEqual_default()(this._labelDescriptor, labelDescriptor)) {
                        return;
                      }
                      (0, update_icon.A)(this._iconSettings, (0, querySelectorOrFail.A)(this._element, ".at"), false, labelDescriptor.iconClass, labelDescriptor.iconUrl, void 0, labelDescriptor.iconHtml);
                      if (labelDescriptor.iconClass || labelDescriptor.iconUrl || labelDescriptor.iconHtml) {
                        this._element.classList.add("inboxsdk__label_has_icon");
                      } else {
                        this._element.classList.remove("inboxsdk__label_has_icon");
                      }
                      this._updateBackgroundColor(labelDescriptor.backgroundColor);
                      this._updateForegroundColor(labelDescriptor.foregroundColor);
                      this._updateIconBackgroundColor(labelDescriptor.iconBackgroundColor);
                      this._updateTitle(labelDescriptor.title, labelDescriptor.titleHtml);
                      this._updateTextMaxWidth(labelDescriptor.maxWidth);
                      this._labelDescriptor = labelDescriptor;
                    }
                    _updateTextMaxWidth(maxWidth) {
                      if (this._labelDescriptor.maxWidth === maxWidth) {
                        return;
                      }
                      const childEl = this._element.querySelector(".av");
                      if (childEl) {
                        childEl.style.maxWidth = maxWidth;
                      }
                    }
                    _updateBackgroundColor(backgroundColor) {
                      if (this._labelDescriptor.backgroundColor === backgroundColor) {
                        return;
                      }
                      const elToChange = (0, querySelectorOrFail.A)(this._element, ".at");
                      elToChange.style.backgroundColor = backgroundColor;
                      elToChange.style.borderColor = backgroundColor;
                      (0, querySelectorOrFail.A)(this._element, ".au").style.borderColor = backgroundColor;
                    }
                    _updateForegroundColor(foregroundColor) {
                      if (this._labelDescriptor.foregroundColor === foregroundColor) {
                        return;
                      }
                      (0, querySelectorOrFail.A)(this._element, ".at").style.color = foregroundColor;
                    }
                    _updateIconBackgroundColor(iconBackgroundColor) {
                      const icon = this.getElement().querySelector(".inboxsdk__button_icon");
                      if (icon) {
                        icon.style.backgroundColor = iconBackgroundColor || "";
                      }
                    }
                    _updateTitle(title, titleHtml) {
                      if (this._labelDescriptor.title === title && this._labelDescriptor.titleHtml === titleHtml) {
                        return;
                      }
                      if (titleHtml) {
                        (0, querySelectorOrFail.A)(this._element, ".au").innerHTML = titleHtml || "";
                        return;
                      }
                      let contentEl;
                      try {
                        contentEl = (0, querySelectorOrFail.A)(this._element, ".av");
                      } catch (e) {
                        const outerEl = (0, querySelectorOrFail.A)(this._element, ".au");
                        outerEl.innerHTML = "";
                        contentEl = document.createElement("div");
                        contentEl.setAttribute("class", "av");
                        outerEl.appendChild(contentEl);
                      }
                      contentEl.textContent = title;
                      this._element.children[0].setAttribute("data-tooltip", title);
                    }
                  }
                  const gmail_label_view = GmailLabelView;
                  ;
                  class GmailActionButtonView {
                    constructor() {
                      this._element = document.createElement("div");
                      this._element.tabIndex = 0;
                      this._element.setAttribute("role", "button");
                      this._element.className = "inboxsdk__gmail_action ";
                      this._element.innerHTML = `
			<div>
			</div>`;
                      this._actionDescriptor = null;
                    }
                    getElement() {
                      return this._element;
                    }
                    updateDescriptor(actionButtonDescriptor) {
                      if (!actionButtonDescriptor) {
                        this._actionDescriptor = actionButtonDescriptor;
                        return;
                      }
                      if (isEqual_default()(this._actionDescriptor, actionButtonDescriptor)) {
                        return;
                      }
                      this._updateTitle(actionButtonDescriptor.title);
                      this._element.className = "inboxsdk__gmail_action " + (actionButtonDescriptor.className || "");
                      this._actionDescriptor = actionButtonDescriptor;
                    }
                    setOnClick(callback) {
                      this._element.onclick = callback;
                    }
                    _updateTitle(title) {
                      if (this._actionDescriptor && this._actionDescriptor.title === title) {
                        return;
                      }
                      (0, querySelectorOrFail.A)(this._element, "div").textContent = title;
                    }
                  }
                  const gmail_action_button_view = GmailActionButtonView;
                  var assert2 = __webpack_require__2(1602);
                  ;
                  module2 = __webpack_require__2.hmd(module2);
                  const cachedModificationsByRow = (0, js.defonce)(module2, () => /* @__PURE__ */ new WeakMap());
                  const BUTTON_CLASS = "inboxsdk__thread_row_button";
                  function focusAndNoPropagation(event) {
                    this.focus();
                    event.stopImmediatePropagation();
                  }
                  function onClickStarGroup(event) {
                    const isOnSdkButton = !!event.target?.closest(`.${BUTTON_CLASS}`);
                    if (isOnSdkButton) {
                      event.stopImmediatePropagation();
                    }
                  }
                  class GmailThreadRowView {
                    constructor(element, rowListViewDriver, gmailDriver) {
                      __privateAdd(this, _GmailThreadRowView_instances);
                      __publicField(this, "_stopper", js_default()());
                      __privateAdd(this, _counts, null);
                      __publicField(this, "_isDestroyed", false);
                      (0, assert2.v)(element.hasAttribute("id"), "check element is main thread row");
                      this._isVertical = intersection_default()(Array.from(element.classList), ["zA", "apv"]).length === 2;
                      if (this._isVertical) {
                        const threadRow2 = element.nextElementSibling;
                        if (!threadRow2) throw new Error("threadRow2 not found");
                        const threadRow3 = threadRow2.nextElementSibling;
                        const has3Rows = threadRow3 && threadRow3.classList.contains("apw");
                        this._elements = has3Rows ? [element, element.nextElementSibling, element.nextElementSibling.nextElementSibling] : [element, element.nextElementSibling];
                      } else {
                        this._elements = [element];
                      }
                      const modifications = cachedModificationsByRow.get(this._elements[0]);
                      if (!modifications) {
                        this._alreadyHadModifications = false;
                        this._modifications = {
                          label: {
                            unclaimed: [],
                            claimed: []
                          },
                          action: {
                            unclaimed: [],
                            claimed: []
                          },
                          button: {
                            unclaimed: [],
                            claimed: []
                          },
                          image: {
                            unclaimed: [],
                            claimed: []
                          },
                          replacedDate: {
                            unclaimed: [],
                            claimed: []
                          },
                          replacedDraftLabel: {
                            unclaimed: [],
                            claimed: []
                          }
                        };
                        cachedModificationsByRow.set(this._elements[0], this._modifications);
                      } else {
                        this._modifications = modifications;
                        this._alreadyHadModifications = true;
                      }
                      this._rowListViewDriver = rowListViewDriver;
                      this._driver = gmailDriver;
                      this._userView = null;
                      this._cachedThreadID = null;
                      this._refresher = null;
                      this._subjectRefresher = null;
                      this._imageRefresher = null;
                      this._elements[0].setAttribute("data-inboxsdk-thread-row", "true");
                    }
                    destroy() {
                      if (!this._elements.length) {
                        return;
                      }
                      this._isDestroyed = true;
                      this._modifications.label.unclaimed = this._modifications.label.claimed.concat(this._modifications.label.unclaimed);
                      this._modifications.label.claimed.length = 0;
                      this._modifications.action.unclaimed = this._modifications.action.claimed.concat(this._modifications.action.unclaimed);
                      this._modifications.action.claimed.length = 0;
                      this._modifications.button.unclaimed = this._modifications.button.claimed.concat(this._modifications.button.unclaimed);
                      this._modifications.button.claimed.length = 0;
                      this._modifications.image.unclaimed = this._modifications.image.claimed.concat(this._modifications.image.unclaimed);
                      this._modifications.image.claimed.length = 0;
                      this._modifications.replacedDate.unclaimed = this._modifications.replacedDate.claimed.concat(this._modifications.replacedDate.unclaimed);
                      this._modifications.replacedDate.claimed.length = 0;
                      this._modifications.replacedDraftLabel.unclaimed = this._modifications.replacedDraftLabel.claimed.concat(this._modifications.replacedDraftLabel.unclaimed);
                      this._modifications.replacedDraftLabel.claimed.length = 0;
                      flatMap_default()(this._elements, (el) => Array.from(el.getElementsByClassName("inboxsdk__thread_row_addition"))).forEach((el) => {
                        el.remove();
                      });
                      this._stopper.destroy();
                      this._elements.length = 0;
                    }
                    getElement() {
                      return this._elements[0];
                    }
                    _removeUnclaimedModifications() {
                      _removeThreadRowUnclaimedModifications(this._modifications);
                    }
                    getAlreadyHadModifications() {
                      return this._alreadyHadModifications;
                    }
                    /**
                     * @returns a Kefir stream that emits this object once this object is ready for the user.
                     *
                     * It should almost always synchronously ready immediately, but there's
                     * a few cases such as with multiple inbox or the drafts page that it needs a moment.
                     * make sure you take until by on the @see GmailThreadRowView#getStopper because waitForReady
                     * must not be called after the GmailThreadRowView is destroyed
                     */
                    waitForReady() {
                      const time = [0, 10, 100, 1e3, 15e3];
                      const step = () => {
                        if (this._threadIdReady()) {
                          browser_asap_default()(() => {
                            if (this._elements.length) this._removeUnclaimedModifications();
                          });
                          return kefir_esm.constant(this);
                        } else {
                          const stepTime = time.shift();
                          if (stepTime == void 0) {
                            console.log("Should not happen: ThreadRowViewDriver never became ready", this);
                            return kefir_esm.never();
                          } else {
                            return kefir_esm.later(stepTime, void 0).flatMap(step);
                          }
                        }
                      };
                      return step();
                    }
                    setUserView(userView) {
                      this._userView = userView;
                    }
                    _expandColumn(colSelector, width) {
                      this._rowListViewDriver.expandColumn(colSelector, width);
                    }
                    addLabel(label) {
                      if (!this._elements.length) {
                        console.warn("addLabel called on destroyed thread row");
                        return;
                      }
                      const prop = kefir_cast_default()(kefir_esm, label).takeUntilBy(this._stopper).toProperty();
                      let labelMod = null;
                      prop.combine(this._getRefresher(), (value, _ignored) => value).takeUntilBy(this._stopper).onValue((labelDescriptor) => {
                        if (!labelDescriptor) {
                          if (labelMod) {
                            labelMod.remove();
                            this._modifications.label.claimed.splice(this._modifications.label.claimed.indexOf(labelMod), 1);
                            labelMod = null;
                          }
                        } else {
                          if (!labelMod) {
                            labelMod = this._modifications.label.unclaimed.shift();
                            if (!labelMod) {
                              const gmailLabelView = new gmail_label_view({
                                classes: ["inboxsdk__thread_row_label"]
                              });
                              const el = gmailLabelView.getElement();
                              labelMod = {
                                gmailLabelView,
                                remove: el.remove.bind(el)
                              };
                            }
                            this._modifications.label.claimed.push(labelMod);
                          }
                          labelMod.gmailLabelView.updateLabelDescriptor(labelDescriptor);
                          const labelParentDiv = this._getLabelParent();
                          if (labelParentDiv !== labelMod.gmailLabelView.getElement().parentElement) {
                            labelParentDiv.insertAdjacentElement("afterbegin", labelMod.gmailLabelView.getElement());
                          }
                        }
                      });
                    }
                    addImage(inIconDescriptor) {
                      if (!this._elements.length) {
                        console.warn("addImage called on destroyed thread row");
                        return;
                      }
                      const prop = kefir_cast_default()(kefir_esm, inIconDescriptor).toProperty().combine(kefir_esm.merge([this._getRefresher(), this._getSubjectRefresher(), this._getImageContainerRefresher()]), function(value) {
                        return value;
                      }).takeUntilBy(this._stopper);
                      let imageMod = null;
                      prop.onValue((iconDescriptor) => {
                        if (!iconDescriptor) {
                          if (imageMod) {
                            imageMod.remove();
                            this._modifications.image.claimed.splice(this._modifications.image.claimed.indexOf(imageMod), 1);
                            imageMod = null;
                          }
                        } else {
                          if (!imageMod) {
                            imageMod = this._modifications.image.unclaimed.shift();
                            if (!imageMod) {
                              imageMod = {
                                iconSettings: {},
                                iconWrapper: document.createElement("div"),
                                remove() {
                                  this.iconWrapper.dispatchEvent(new MouseEvent("mouseleave"));
                                  this.iconWrapper.remove();
                                }
                              };
                              imageMod.iconWrapper.className = "inboxsdk__thread_row_icon_wrapper";
                            }
                            this._modifications.image.claimed.push(imageMod);
                          }
                          const {
                            iconSettings,
                            iconWrapper
                          } = imageMod;
                          (0, update_icon.A)(iconSettings, iconWrapper, false, iconDescriptor.imageClass, iconDescriptor.imageUrl);
                          const containerRow = this._elements.length === 3 ? this._elements[2] : this._elements[0];
                          containerRow.classList.add("inboxsdk__thread_row_image_added");
                          if (iconDescriptor.tooltip) {
                            iconWrapper.setAttribute("data-tooltip", iconDescriptor.tooltip);
                          } else {
                            iconWrapper.removeAttribute("data-tooltip");
                          }
                          if (iconDescriptor.onHover) {
                            const {
                              onHover
                            } = iconDescriptor;
                            iconWrapper.onmouseenter = () => {
                              const hoverEnd = new Promise((resolve) => {
                                iconWrapper.addEventListener("mouseleave", () => {
                                  resolve();
                                }, {
                                  once: true
                                });
                              });
                              onHover({
                                hoverEnd
                              });
                            };
                          }
                          const labelParent = this._getLabelParent();
                          if (!labelParent.contains(iconWrapper)) {
                            (0, querySelectorOrFail.A)(labelParent, ".y6").insertAdjacentElement("beforebegin", iconWrapper);
                          }
                        }
                      });
                    }
                    addButton(buttonDescriptor) {
                      if (!this._elements.length) {
                        console.warn("addButton called on destroyed thread row");
                        return;
                      }
                      if (this._elements.length != 1) return;
                      let activeDropdown = null;
                      let buttonMod = null;
                      const prop = kefir_cast_default()(kefir_esm, buttonDescriptor).toProperty().takeUntilBy(this._stopper);
                      prop.merge(this._stopper).onValue((buttonDescriptor2) => {
                        if (!buttonDescriptor2) {
                          if (activeDropdown) {
                            activeDropdown.close();
                            activeDropdown = null;
                          }
                        }
                      });
                      this._stopper.onValue(() => {
                        if (buttonMod && buttonMod.buttonEl) {
                          buttonMod.buttonEl.onclick = null;
                        }
                      });
                      prop.combine(this._getRefresher(), (value, _ignored) => value).onValue((_buttonDescriptor) => {
                        const buttonDescriptor2 = _buttonDescriptor;
                        if (!buttonDescriptor2) {
                          if (buttonMod) {
                            buttonMod.remove();
                            this._modifications.button.claimed.splice(this._modifications.button.claimed.indexOf(buttonMod), 1);
                            buttonMod = null;
                          }
                        } else {
                          if (buttonDescriptor2.className) {
                            buttonDescriptor2.iconClass = buttonDescriptor2.className;
                            delete buttonDescriptor2.className;
                          }
                          const buttonToolbar = __privateMethod(this, _GmailThreadRowView_instances, getButtonToolbar_fn).call(this);
                          let buttonEl, iconSettings;
                          if (!buttonMod) {
                            buttonMod = this._modifications.button.unclaimed.shift();
                            if (!buttonMod) {
                              if (buttonToolbar) {
                                buttonEl = document.createElement("li");
                                buttonEl.classList.add("bqX");
                              } else {
                                buttonEl = document.createElement("span");
                                buttonEl.classList.add("T-KT");
                              }
                              buttonEl.classList.add(BUTTON_CLASS);
                              buttonEl.setAttribute("tabindex", "-1");
                              buttonEl.setAttribute("data-order-hint", String(buttonDescriptor2.orderHint || 0));
                              buttonEl.addEventListener("onmousedown", focusAndNoPropagation);
                              iconSettings = {};
                              buttonMod = {
                                buttonEl,
                                iconSettings,
                                remove: buttonEl.remove.bind(buttonEl)
                              };
                            }
                            this._modifications.button.claimed.push(buttonMod);
                          }
                          const starGroup = buttonToolbar ? null : (0, querySelectorOrFail.A)(this._elements[0], "td.apU.xY, td.aqM.xY");
                          buttonEl = buttonMod.buttonEl;
                          iconSettings = buttonMod.iconSettings;
                          if (buttonDescriptor2.title) {
                            buttonEl.setAttribute("aria-label", buttonDescriptor2.title);
                            buttonEl.setAttribute("data-tooltip", buttonDescriptor2.title);
                          } else {
                            buttonEl.removeAttribute("aria-label");
                            buttonEl.removeAttribute("data-tooltip");
                          }
                          if (buttonDescriptor2.onClick) {
                            buttonEl.onclick = (event) => {
                              const appEvent = {
                                dropdown: null,
                                threadRowView: this._userView
                              };
                              if (buttonDescriptor2.hasDropdown) {
                                if (activeDropdown) {
                                  this._elements[0].classList.remove("inboxsdk__dropdown_active");
                                  this._elements[0].classList.remove("buL");
                                  activeDropdown.close();
                                  activeDropdown = null;
                                  return;
                                } else {
                                  this._elements[0].classList.add("inboxsdk__dropdown_active");
                                  this._elements[0].classList.add("buL");
                                  appEvent.dropdown = activeDropdown = new dropdown_view.A(new gmail_dropdown_view.A(), buttonEl, null);
                                  activeDropdown.setPlacementOptions({
                                    position: "bottom",
                                    hAlign: "left",
                                    vAlign: "top"
                                  });
                                  const firstEl = this._elements[0];
                                  activeDropdown.on("destroy", () => {
                                    setTimeout(() => {
                                      firstEl.classList.remove("inboxsdk__dropdown_active");
                                      firstEl.classList.remove("buL");
                                      activeDropdown = null;
                                    }, 1);
                                  });
                                }
                              }
                              buttonDescriptor2.onClick.call(null, appEvent);
                            };
                          }
                          (0, update_icon.A)(iconSettings, buttonEl, false, buttonDescriptor2.iconClass, buttonDescriptor2.iconUrl);
                          if (buttonToolbar && buttonEl.parentElement !== buttonToolbar) {
                            (0, insert_element_in_order.A)(buttonToolbar, buttonEl, void 0, true);
                          } else if (starGroup && buttonEl.parentElement !== starGroup) {
                            (0, insert_element_in_order.A)(starGroup, buttonEl);
                            this._expandColumn("col.y5", 26 * starGroup.children.length);
                            starGroup.onclick = onClickStarGroup;
                          }
                        }
                      });
                    }
                    addActionButton(actionButtonDescriptor) {
                      if (this._elements.length !== 1) {
                        return;
                      }
                      const prop = kefir_cast_default()(kefir_esm, actionButtonDescriptor).takeUntilBy(this._stopper).toProperty();
                      let actionMod = null;
                      this._stopper.onEnd(() => {
                        if (actionMod) {
                          actionMod.gmailActionButtonView.setOnClick(null);
                        }
                      });
                      prop.takeUntilBy(this._stopper).onValue((actionButtonDescriptor2) => {
                        if (actionButtonDescriptor2 && actionButtonDescriptor2.type !== "LINK") {
                          console.error("Only type=LINK is currently supported");
                          return;
                        }
                        if (!actionButtonDescriptor2) {
                          if (actionMod) {
                            actionMod.remove();
                            this._modifications.action.claimed.splice(this._modifications.action.claimed.indexOf(actionMod), 1);
                            actionMod = null;
                          }
                        } else {
                          if (!actionMod) {
                            actionMod = this._modifications.action.unclaimed.shift();
                            if (!actionMod) {
                              const gmailActionButtonView = new gmail_action_button_view();
                              const el = gmailActionButtonView.getElement();
                              actionMod = {
                                gmailActionButtonView,
                                remove: el.remove.bind(el)
                              };
                            }
                            this._modifications.action.claimed.push(actionMod);
                          }
                          actionMod.gmailActionButtonView.updateDescriptor(actionButtonDescriptor2);
                          const {
                            url,
                            onClick
                          } = actionButtonDescriptor2;
                          actionMod.gmailActionButtonView.setOnClick((event) => {
                            event.stopPropagation();
                            window.open(url, "_blank");
                            if (onClick) {
                              onClick.call(null, {});
                            }
                          });
                          const actionParentDiv = this._elements[0].querySelector("td.a4W .a4X .aKS") || this._elements[0].querySelector("td.a4W div.xS");
                          if (!actionParentDiv) throw new Error("Failed to find actionParentDiv");
                          if (!includes_default()(actionParentDiv.children, actionMod.gmailActionButtonView.getElement())) {
                            actionParentDiv.insertBefore(actionMod.gmailActionButtonView.getElement(), actionParentDiv.firstChild);
                          }
                        }
                      });
                    }
                    addAttachmentIcon(opts) {
                      if (!this._elements.length) {
                        console.warn("addAttachmentIcon called on destroyed thread row");
                        return;
                      }
                      const getImgElement = once_default()(() => {
                        const img = document.createElement("img");
                        img.src = "images/cleardot.gif";
                        return img;
                      });
                      const getCustomIconWrapper = once_default()(() => {
                        const div = document.createElement("div");
                        return div;
                      });
                      var added = false;
                      var currentIconUrl;
                      var prop = kefir_cast_default()(kefir_esm, opts).toProperty();
                      prop.combine(this._getRefresher(), (value, _ignored) => value).takeUntilBy(this._stopper).onValue((opts2) => {
                        const attachmentDiv = (0, querySelectorOrFail.A)(this._elements[0], "td.yf.xY");
                        if (!opts2) {
                          if (added) {
                            getCustomIconWrapper().remove();
                            getImgElement().remove();
                            added = false;
                            if (!attachmentDiv.querySelector(".inboxsdk__thread_row_attachment_icon")) {
                              attachmentDiv.classList.remove("inboxsdk__thread_row_attachment_icons_present");
                            }
                          }
                        } else {
                          const img = opts2.iconHtml != null ? getCustomIconWrapper() : getImgElement();
                          if (opts2.tooltip) {
                            img.setAttribute("data-tooltip", opts2.tooltip);
                          } else {
                            img.removeAttribute("data-tooltip");
                          }
                          img.className = opts2.iconHtml != null ? "inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_iconWrapper " + (opts2.iconClass || "") : "inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_icon " + (opts2.iconClass || "");
                          if (opts2.iconHtml != null) {
                            if (attachmentDiv.contains(getImgElement())) {
                              getImgElement().remove();
                            }
                            img.innerHTML = opts2.iconHtml;
                          } else if (currentIconUrl != opts2.iconUrl) {
                            if (attachmentDiv.contains(getCustomIconWrapper())) {
                              getCustomIconWrapper().remove();
                            }
                            img.style.background = opts2.iconUrl ? "url(" + opts2.iconUrl + ") no-repeat 0 0" : "";
                            currentIconUrl = opts2.iconUrl;
                          }
                          if (!attachmentDiv.contains(img)) {
                            attachmentDiv.appendChild(img);
                            added = true;
                            this._expandColumn("col.yg", attachmentDiv.children.length * 16);
                            if (this._elements.length > 1) {
                              this._fixDateColumnWidth();
                            }
                          }
                          attachmentDiv.classList.add("inboxsdk__thread_row_attachment_icons_present");
                        }
                      });
                    }
                    _fixDateColumnWidth() {
                      browser_asap_default()(() => {
                        if (!this._elements.length) return;
                        const dateContainer = this._elements[0].querySelector("td.xW, td.yf > div.apm");
                        if (!dateContainer) return;
                        const visibleDateSpan = dateContainer.querySelector(".inboxsdk__thread_row_custom_date") || dateContainer.firstElementChild;
                        if (!visibleDateSpan || !(visibleDateSpan instanceof HTMLElement)) return;
                        const dateColumnAttachmentIconCount = this._elements[0].querySelectorAll("td.yf > img").length;
                        this._expandColumn("col.xX", visibleDateSpan.offsetWidth + 8 + 2 + 20 + dateColumnAttachmentIconCount * 16);
                      });
                    }
                    replaceDraftLabel(opts) {
                      if (!this._elements.length) {
                        console.warn("replaceDraftLabel called on destroyed thread row");
                        return;
                      }
                      let labelMod;
                      let draftElement, countElement;
                      const prop = kefir_cast_default()(kefir_esm, opts).toProperty();
                      prop.combine(this._getRefresher(), (value, _ignored) => value).takeUntilBy(this._stopper).onValue((opts2) => {
                        const originalLabel = (0, querySelectorOrFail.A)(this._elements[0], "td > div.yW");
                        const recipientsContainer = originalLabel.parentElement;
                        if (!recipientsContainer) throw new Error("Should not happen");
                        if (!opts2) {
                          if (labelMod) {
                            labelMod.remove();
                            this._modifications.replacedDraftLabel.claimed.splice(this._modifications.replacedDraftLabel.claimed.indexOf(labelMod), 1);
                            labelMod = null;
                          }
                        } else {
                          opts2 = Object.assign({
                            count: 1
                          }, opts2);
                          if (!labelMod) {
                            labelMod = this._modifications.replacedDraftLabel.unclaimed.shift();
                            if (!labelMod) {
                              labelMod = {
                                el: Object.assign(document.createElement("span"), {
                                  className: "inboxsdk__thread_row_custom_draft_label"
                                }),
                                remove() {
                                  this.el.remove();
                                }
                              };
                            }
                            this._modifications.replacedDraftLabel.claimed.push(labelMod);
                          }
                          const needToAdd = !includes_default()(recipientsContainer.children, labelMod.el);
                          if (needToAdd || !draftElement) {
                            labelMod.el.innerHTML = originalLabel.innerHTML;
                            const materiaUIlDraftElements = Array.from(labelMod.el.querySelectorAll(".boq"));
                            if (materiaUIlDraftElements.length > 0) {
                              materiaUIlDraftElements.forEach((el) => el.remove());
                              draftElement = Object.assign(document.createElement("span"), {
                                className: "boq"
                              });
                              labelMod.el.appendChild(draftElement);
                            } else {
                              draftElement = labelMod.el.querySelector("font");
                              if (!draftElement) {
                                return;
                              }
                              const nextSibling = draftElement.nextElementSibling;
                              if (nextSibling) {
                                nextSibling.remove();
                              }
                            }
                            draftElement.classList.add("inboxsdk__thread_row_custom_draft_part");
                            countElement = Object.assign(document.createElement("span"), {
                              className: "inboxsdk__thread_row_custom_draft_count"
                            });
                            labelMod.el.appendChild(countElement);
                          }
                          draftElement.textContent = opts2.text;
                          countElement.textContent = opts2.count !== 1 ? ` (${opts2.count})` : "";
                          if (needToAdd) {
                            recipientsContainer.insertBefore(labelMod.el, originalLabel);
                          }
                        }
                      });
                    }
                    replaceDate(opts) {
                      if (!this._elements.length) {
                        console.warn("replaceDate called on destroyed thread row");
                        return;
                      }
                      let dateMod;
                      const prop = kefir_cast_default()(kefir_esm, opts).toProperty();
                      prop.combine(this._getRefresher(), (value, _ignored) => value).takeUntilBy(this._stopper).onValue((opts2) => {
                        const dateContainer = (0, querySelectorOrFail.A)(this._elements[0], "td.xW, td.yf > div.apm");
                        const originalDateSpan = dateContainer.firstElementChild;
                        if (!opts2) {
                          if (dateMod) {
                            dateMod.remove();
                            this._modifications.replacedDate.claimed.splice(this._modifications.replacedDate.claimed.indexOf(dateMod), 1);
                            dateMod = null;
                          }
                        } else {
                          if (!dateMod) {
                            dateMod = this._modifications.replacedDate.unclaimed.shift();
                            if (!dateMod) {
                              dateMod = {
                                el: Object.assign(document.createElement("span"), {
                                  className: "inboxsdk__thread_row_custom_date"
                                }),
                                remove() {
                                  this.el.remove();
                                  dateContainer.classList.remove("inboxsdk__thread_row_custom_date_container");
                                }
                              };
                            }
                            this._modifications.replacedDate.claimed.push(dateMod);
                          }
                          dateMod.el.textContent = opts2.text;
                          if (opts2.tooltip) {
                            dateMod.el.setAttribute("data-tooltip", opts2.tooltip);
                            dateMod.el.setAttribute("aria-label", opts2.tooltip);
                          } else {
                            dateMod.el.removeAttribute("data-tooltip");
                            dateMod.el.removeAttribute("aria-label");
                          }
                          dateMod.el.style.color = opts2.textColor || "";
                          if (!includes_default()(dateContainer.children, dateMod.el)) {
                            dateContainer.insertBefore(dateMod.el, dateContainer.firstChild);
                            dateContainer.classList.add("inboxsdk__thread_row_custom_date_container");
                          }
                          this._fixDateColumnWidth();
                        }
                      });
                    }
                    getEventStream() {
                      return this._stopper;
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getSubject() {
                      return this._getSubjectSelector().textContent;
                    }
                    _getSubjectSelector() {
                      return this._elements.length > 1 ? (0, querySelectorOrFail.A)(this._elements[1], "div.xS div.xT div.y6 > span[id]") : (0, querySelectorOrFail.A)(this._elements[0], "td.a4W div.xS div.xT div.y6 > span[id]");
                    }
                    replaceSubject(newSubjectStr) {
                      const subjectEleSelector = this._getSubjectSelector();
                      if (subjectEleSelector) {
                        subjectEleSelector.textContent = newSubjectStr;
                      }
                    }
                    getDateString() {
                      return (0, querySelectorOrFail.A)(this._elements[0], "td.xW > span[title]:not(.inboxsdk__thread_row_custom_date), td.yf.apt > div.apm > span[title]:not(.inboxsdk__thread_row_custom_date)").title;
                    }
                    _threadIdReady() {
                      return !!this._getThreadID();
                    }
                    _getThreadID() {
                      if (this._cachedThreadID) {
                        return this._cachedThreadID;
                      }
                      const elementWithId = flatten_default()(this._elements.map((el) => Array.from(el.querySelectorAll("[data-thread-id][data-legacy-thread-id]")))).filter(Boolean)[0];
                      if (elementWithId) {
                        this._cachedSyncThreadID = elementWithId.getAttribute("data-thread-id").replace("#", "");
                        this._cachedThreadID = elementWithId.getAttribute("data-legacy-thread-id").replace("#", "");
                        return this._cachedThreadID;
                      } else {
                        const threadID = this._driver.getThreadRowIdentifier().getThreadIdForThreadRow(this, this._elements);
                        this._cachedSyncThreadID = threadID;
                        if (threadID) {
                          this._driver.getOldGmailThreadIdFromSyncThreadId(threadID).then((oldGmailThreadID) => {
                            this._cachedThreadID = oldGmailThreadID;
                          });
                        }
                      }
                      return this._cachedThreadID;
                    }
                    getThreadID() {
                      const threadID = this._getThreadID();
                      if (!threadID) {
                        throw new Error("Should not happen: thread id was null");
                      }
                      return threadID;
                    }
                    /**
                     * This method is never called in the view proper.
                     * GmailThreadRowView#getThreadIDAsync is called though.
                     */
                    getSyncThreadID() {
                      return Promise.resolve(this._cachedSyncThreadID);
                    }
                    async getThreadIDAsync() {
                      return this.getThreadID();
                    }
                    getDraftID() {
                      if (this._cachedSyncDraftIDPromise) return this._cachedSyncDraftIDPromise;
                      const elementWithId = flatten_default()(this._elements.map((el) => Array.from(el.querySelectorAll("[data-standalone-draft-id]")))).filter(Boolean)[0];
                      this._cachedSyncDraftIDPromise = Promise.resolve(elementWithId ? elementWithId.getAttribute("data-standalone-draft-id").replace("#msg-a:", "") : null);
                      return this._cachedSyncDraftIDPromise;
                    }
                    getVisibleDraftCount() {
                      return __privateMethod(this, _GmailThreadRowView_instances, getCounts_fn).call(this).draftCount;
                    }
                    getVisibleMessageCount() {
                      return __privateMethod(this, _GmailThreadRowView_instances, getCounts_fn).call(this).messageCount;
                    }
                    getContacts() {
                      const senderSpans = this._elements[0].querySelectorAll("[email]");
                      const contacts = Array.from(senderSpans).map((span) => ({
                        emailAddress: span.getAttribute("email"),
                        name: span.getAttribute("name")
                      }));
                      return uniqBy_default()(contacts, (contact) => contact.emailAddress);
                    }
                    isSelected() {
                      return !!this._elements[0].querySelector("div[role=checkbox][aria-checked=true]");
                    }
                    _getLabelParent() {
                      return this._elements.length > 1 ? (0, querySelectorOrFail.A)(this._elements[this._elements.length === 2 ? 0 : 2], "div.apu") : (0, querySelectorOrFail.A)(this._elements[0], "td.a4W div.xS div.xT");
                    }
                    _getWatchElement() {
                      return this._elements.length === 1 ? this._elements[0] : this._elements[0].children[2];
                    }
                    _getRefresher() {
                      let refresher = this._refresher;
                      if (!refresher) {
                        refresher = this._refresher = (0, make_mutation_observer_chunked_stream.A)(this._getWatchElement(), {
                          childList: true
                        }).map(() => null).takeUntilBy(this._stopper).toProperty(() => null);
                      }
                      return refresher;
                    }
                    _getSubjectRefresher() {
                      let subjectRefresher = this._subjectRefresher;
                      if (!subjectRefresher) {
                        if (this._isVertical) {
                          subjectRefresher = this._subjectRefresher = kefir_esm.constant(null);
                        } else {
                          const watchElement = this._getWatchElement();
                          const subjectElement = (0, querySelectorOrFail.A)(watchElement, ".y6");
                          subjectRefresher = this._subjectRefresher = (0, make_mutation_observer_chunked_stream.A)(subjectElement, {
                            childList: true
                          }).map(() => null).takeUntilBy(this._stopper).toProperty(() => null);
                        }
                      }
                      return subjectRefresher;
                    }
                    _getImageContainerRefresher() {
                      let imageRefresher = this._imageRefresher;
                      if (!imageRefresher) {
                        if (this._isVertical) {
                          const containerRow = this._elements.length === 3 ? this._elements[2] : this._elements[0];
                          const classChangeStream = (0, make_mutation_observer_chunked_stream.A)(containerRow, {
                            attributes: true,
                            attributeFilter: ["class"]
                          });
                          imageRefresher = this._imageRefresher = classChangeStream.bufferBy(classChangeStream.flatMapLatest(() => (0, delay_asap.A)())).filter(() => containerRow.querySelectorAll(".inboxsdk__thread_row_icon_wrapper").length > 0 && !containerRow.classList.contains("inboxsdk__thread_row_image_added")).map(() => null).takeUntilBy(this._stopper).toProperty(() => null);
                        } else {
                          imageRefresher = this._imageRefresher = kefir_esm.constant(null);
                        }
                      }
                      return imageRefresher;
                    }
                  }
                  _counts = new WeakMap();
                  _GmailThreadRowView_instances = new WeakSet();
                  /**
                   *  Provides the button toolbar element.
                   *  Will be null when the element is not present - this happens when the "Hover actions" setting is disabled.
                   */
                  getButtonToolbar_fn = function() {
                    return this._elements[0]?.querySelector("ul[role=toolbar]") || null;
                  };
                  getCounts_fn = function() {
                    if (__privateGet(this, _counts)) {
                      return __privateGet(this, _counts);
                    }
                    let recipientsElement;
                    try {
                      recipientsElement = (0, querySelectorOrFail.A)(this._elements[0], "td div.yW");
                    } catch (e) {
                      if (e instanceof querySelectorOrFail.a) {
                        this._driver.logger.errorSite(e);
                      } else {
                        throw e;
                      }
                    }
                    if (!recipientsElement) {
                      return __privateSet(this, _counts, {
                        messageCount: 0,
                        draftCount: 0
                      });
                    }
                    const draftCount = recipientsElement.querySelectorAll(".boq").length;
                    const messageCountMatch = recipientsElement.querySelector(".bx0");
                    const messageCount = messageCountMatch?.innerHTML ? +messageCountMatch.innerHTML : draftCount ? 0 : 1;
                    __privateSet(this, _counts, {
                      messageCount,
                      draftCount
                    });
                    return __privateGet(this, _counts);
                  };
                  const gmail_thread_row_view = GmailThreadRowView;
                  function removeAllThreadRowUnclaimedModifications() {
                    setTimeout(() => {
                      const modifiedRows = document.querySelectorAll("tr[data-inboxsdk-thread-row]");
                      Array.prototype.forEach.call(modifiedRows, (row) => {
                        const modifications = cachedModificationsByRow.get(row);
                        if (modifications) {
                          _removeThreadRowUnclaimedModifications(modifications);
                        }
                      });
                    }, 15);
                  }
                  function _removeThreadRowUnclaimedModifications(modifications) {
                    for (let ii = 0; ii < modifications.label.unclaimed.length; ii++) {
                      const mod = modifications.label.unclaimed[ii];
                      mod.remove();
                    }
                    modifications.label.unclaimed.length = 0;
                    for (let ii = 0; ii < modifications.button.unclaimed.length; ii++) {
                      const mod = modifications.button.unclaimed[ii];
                      mod.remove();
                    }
                    modifications.button.unclaimed.length = 0;
                    for (let ii = 0; ii < modifications.image.unclaimed.length; ii++) {
                      const mod = modifications.image.unclaimed[ii];
                      mod.remove();
                    }
                    modifications.image.unclaimed.length = 0;
                    for (let ii = 0; ii < modifications.replacedDate.unclaimed.length; ii++) {
                      const mod = modifications.replacedDate.unclaimed[ii];
                      mod.remove();
                    }
                    modifications.replacedDate.unclaimed.length = 0;
                    for (let ii = 0; ii < modifications.replacedDraftLabel.unclaimed.length; ii++) {
                      const mod = modifications.replacedDraftLabel.unclaimed[ii];
                      mod.remove();
                    }
                    modifications.replacedDraftLabel.unclaimed.length = 0;
                  }
                })
              ),
              /***/
              9341: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  var _iconLiga;
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      ButtonView
                    )
                  });
                  var includes = __webpack_require__2(5193);
                  var includes_default = /* @__PURE__ */ __webpack_require__2.n(includes);
                  var kefir_esm = __webpack_require__2(7249);
                  var kefir_bus = __webpack_require__2(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__2.n(kefir_bus);
                  var logger = __webpack_require__2(2617);
                  var simulate_mouse_event = __webpack_require__2(4603);
                  var keyboard_shortcut_stream = __webpack_require__2(5235);
                  ;
                  const ButtonColorClasses = {
                    default: {
                      INACTIVE_CLASS: "T-I-ax7",
                      HOVER_CLASS: "T-I-JW",
                      ACTIVE_CLASS: "T-I-Kq"
                    },
                    flatIcon: {
                      INACTIVE_CLASS: "J-Z-I",
                      HOVER_CLASS: "J-Z-I-JW",
                      ACTIVE_CLASS: "J-Z-I-KO"
                    },
                    pureIcon: {
                      INACTIVE_CLASS: "inboxsdk__button_pureIcon_inactive",
                      HOVER_CLASS: "inboxsdk__button_pureIcon_hover",
                      ACTIVE_CLASS: "inboxsdk__button_pureIcon_active"
                    },
                    blue: {
                      INACTIVE_CLASS: "T-I-atl",
                      HOVER_CLASS: "T-I-JW",
                      ACTIVE_CLASS: "T-I-JO"
                    },
                    red: {
                      INACTIVE_CLASS: "T-I-KE",
                      HOVER_CLASS: "T-I-JW",
                      ACTIVE_CLASS: "T-I-JO"
                    },
                    green: {
                      INACTIVE_CLASS: "inboxsdk__button_green_inactive",
                      HOVER_CLASS: "inboxsdk__button_green_hover",
                      ACTIVE_CLASS: "inboxsdk__button_green_active"
                    },
                    outline: {
                      INACTIVE_CLASS: "ams",
                      HOVER_CLASS: "ams",
                      ACTIVE_CLASS: "ams"
                    }
                  };
                  const button_color_classes = ButtonColorClasses;
                  ;
                  class ButtonView {
                    constructor(options) {
                      __publicField(this, "_element", document.createElement("div"));
                      __publicField(this, "_innerElement", document.createElement("div"));
                      __privateAdd(this, _iconLiga);
                      const {
                        iconLiga,
                        iconClass,
                        iconUrl
                      } = options;
                      this._hasDropdown = false;
                      this._isEnabled = options.enabled !== false;
                      this._iconClass = iconClass;
                      this._iconUrl = iconUrl;
                      __privateSet(this, _iconLiga, iconLiga);
                      this._title = options.text || options.title;
                      this._tooltip = options.tooltip || options.title;
                      this._hasDropdown = !!options.hasDropdown;
                      this._buttonColor = options.buttonColor || "default";
                      this._keyboardShortcutHandle = options.keyboardShortcutHandle;
                      this._createElement(options);
                      this._eventStream = kefir_bus_default()();
                      this._setupEventStream();
                      this._setupAestheticEvents();
                      if (options.enabled !== false) {
                        this._setupKeyboardShortcutEvent();
                      }
                    }
                    destroy() {
                      this._element.remove();
                      this._eventStream.end();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    activate() {
                      this.addClass(button_color_classes[this._buttonColor].ACTIVE_CLASS);
                      this.addClass(button_color_classes[this._buttonColor].HOVER_CLASS);
                    }
                    deactivate() {
                      this.removeClass(button_color_classes[this._buttonColor].ACTIVE_CLASS);
                      this.removeClass(button_color_classes[this._buttonColor].HOVER_CLASS);
                    }
                    addClass(className) {
                      this._element.classList.add(className);
                    }
                    removeClass(className) {
                      this._element.classList.remove(className);
                    }
                    simulateHover() {
                      (0, simulate_mouse_event.zU)(this._element);
                    }
                    setEnabled(value) {
                      this._setEnabled(value);
                    }
                    isEnabled() {
                      return this._isEnabled;
                    }
                    update(options) {
                      if (!options) {
                        this._element.style.display = "none";
                        return;
                      } else if (this._element.style.display === "none") {
                        this._element.style.display = "";
                      }
                      if (options.buttonColor != this._buttonColor && this._buttonColor) {
                        this._updateButtonColor(options.buttonColor);
                      }
                      if (options.title != this._title) {
                        this._updateTitle(options.title);
                      }
                      if (options.tooltip != this._tooltip) {
                        this._updateTooltip(options.tooltip);
                      }
                      if (options.iconUrl != this._iconUrl) {
                        this._updateIconUrl(options.iconUrl);
                      }
                      if (options.iconClass != this._iconClass) {
                        this._updateIconClass(options.iconClass);
                      }
                      if (options.enabled === false || options.enabled === true) {
                        this._setEnabled(options.enabled);
                      }
                    }
                    _createElement(options) {
                      this._setupMainElement(options);
                      this._setupInnerElement(options);
                      this._createTextElement();
                      this._createIconElement();
                    }
                    _setupMainElement(options) {
                      this._element.setAttribute("class", "T-I J-J5-Ji ar7 inboxsdk__button " + button_color_classes[this._buttonColor].INACTIVE_CLASS);
                      if (options.tooltip) {
                        this._element.setAttribute("aria-label", options.tooltip);
                      }
                      this._element.setAttribute("role", "button");
                      this._element.setAttribute("tabindex", "0");
                      if (options.hasButtonToRight) {
                        this._element.classList.add("T-I-Js-IF");
                      }
                      if (options.hasButtonToLeft) {
                        this._element.classList.add("T-I-Js-Gs");
                      }
                      if (options.tooltip || options.title) {
                        this._element.setAttribute("data-tooltip", String(options.tooltip || options.title));
                      }
                      if (options.enabled === false) {
                        this._element.classList.add("inboxsdk__button_disabled");
                      }
                    }
                    _setupInnerElement(options) {
                      this._innerElement.classList.add("asa");
                      if (this._hasDropdown && !options.noArrow) {
                        this._innerElement.innerHTML = '<div class="G-asx T-I-J3 - J-J5-Ji">&nbsp;</div>';
                      }
                      this._element.appendChild(this._innerElement);
                    }
                    _createTextElement() {
                      if (!this._title) {
                        return;
                      }
                      this._textElement = document.createElement("span");
                      this._textElement.setAttribute("class", "inboxsdk__button_text");
                      this._textElement.textContent = this._title;
                      if (this._iconElement) {
                        const parent = this._iconElement.parentElement;
                        if (!parent) throw new Error("Could not find parent");
                        parent.insertBefore(this._textElement, this._iconElement.nextSibling);
                      } else {
                        this._innerElement.insertBefore(this._textElement, this._innerElement.firstElementChild);
                      }
                    }
                    _createIconElement() {
                      if (!this._iconClass && !this._iconUrl) {
                        return;
                      }
                      const iconElement = this._iconElement = document.createElement("div");
                      iconElement.classList.add("inboxsdk__button_icon");
                      if (this._iconClass) {
                        if (__privateGet(this, _iconLiga) != null) {
                          iconElement.innerText = __privateGet(this, _iconLiga);
                        } else {
                          iconElement.innerHTML = "&nbsp;";
                        }
                        iconElement.setAttribute("class", "inboxsdk__button_icon " + this._iconClass);
                      }
                      if (this._iconUrl) {
                        this._createIconImgElement();
                      }
                      this._innerElement.insertBefore(iconElement, this._innerElement.firstElementChild);
                    }
                    _createIconImgElement() {
                      if (!this._iconElement) {
                        this._createIconElement();
                      }
                      const iconElement = this._iconElement;
                      if (!iconElement) throw new Error("Should not happen");
                      if (iconElement.innerHTML !== "") {
                        iconElement.innerHTML = "";
                      }
                      const iconImgElement = this._iconImgElement = document.createElement("img");
                      iconImgElement.classList.add("inboxsdk__button_iconImg");
                      if (this._iconUrl) {
                        iconImgElement.src = this._iconUrl;
                      } else {
                        logger.A.error(new Error("_createIconImgElement should not be called with null _iconUrl"));
                      }
                      iconElement.appendChild(iconImgElement);
                    }
                    _updateButtonColor(newButtonColor) {
                      this._element.classList.remove(button_color_classes[this._buttonColor].INACTIVE_CLASS);
                      this._buttonColor = newButtonColor;
                      this._element.classList.add(button_color_classes[this._buttonColor].INACTIVE_CLASS);
                    }
                    _updateTitle(newTitle) {
                      if (!this._title && newTitle) {
                        this._title = newTitle;
                        this._createTextElement();
                      } else if (this._title && !newTitle && this._textElement) {
                        this._textElement.remove();
                        this._textElement = void 0;
                        this._title = newTitle;
                      } else if (this._textElement) {
                        this._textElement.textContent = newTitle;
                        this._title = newTitle;
                      }
                    }
                    _updateTooltip(newTooltip) {
                      this._tooltip = newTooltip;
                      if (newTooltip) {
                        this._element.setAttribute("data-tooltip", newTooltip);
                      } else {
                        this._element.removeAttribute("data-tooltip");
                      }
                    }
                    _updateIconUrl(newIconUrl) {
                      this._iconUrl = newIconUrl;
                      if (this._iconImgElement && !newIconUrl) {
                        this._iconImgElement.remove();
                        this._iconImgElement = void 0;
                      } else if (!this._iconImgElement && newIconUrl) {
                        this._createIconImgElement();
                      }
                      if (this._iconImgElement && newIconUrl) {
                        this._iconImgElement.src = newIconUrl;
                      }
                    }
                    _updateIconClass(newIconClass) {
                      if (this._iconElement && !newIconClass && !this._iconUrl) {
                        this._iconElement.remove();
                        this._iconElement = void 0;
                      } else if (!this._iconElement && newIconClass) {
                        this._createIconElement();
                      }
                      this._iconClass = newIconClass;
                      if (this._iconElement) {
                        this._iconElement.setAttribute("class", "inboxsdk__button_icon " + (newIconClass || ""));
                      }
                    }
                    _setEnabled(value) {
                      if (this._isEnabled === value) {
                        return;
                      }
                      this._isEnabled = value;
                      if (this._isEnabled) {
                        this._element.classList.remove("inboxsdk__button_disabled");
                      } else {
                        this._element.classList.add("inboxsdk__button_disabled");
                      }
                      this._eventStream.emit({
                        eventName: "enabledChanged",
                        isEnabled: this._isEnabled
                      });
                      if (this._isEnabled) {
                        this._setupKeyboardShortcutEvent();
                      }
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir_esm.fromEvents(this._element, "click");
                      clickEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.filter(() => this.isEnabled()).map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      const isEnterOrSpace = (event) => includes_default()([
                        32,
                        13
                        /* enter */
                      ], event.which);
                      const keydownEventStream = kefir_esm.fromEvents(this._element, "keydown").filter(() => this.isEnabled());
                      const enterEventStream = keydownEventStream.filter(isEnterOrSpace);
                      this._eventStream.plug(enterEventStream.map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      enterEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                    }
                    _setupKeyboardShortcutEvent() {
                      const keyboardShortcutHandle = this._keyboardShortcutHandle;
                      if (keyboardShortcutHandle) {
                        this._eventStream.plug((0, keyboard_shortcut_stream.A)(keyboardShortcutHandle.chord).takeUntilBy(this._eventStream.filter(function(event) {
                          return event.eventName === "enabledChanged" && event.isEnabled === false;
                        })).map(function(domEvent) {
                          return {
                            eventName: "click",
                            domEvent
                          };
                        }));
                      }
                    }
                    _setupAestheticEvents() {
                      kefir_esm.fromEvents(this._element, "mouseenter").filter(() => this.isEnabled()).onValue(() => {
                        this._element.classList.add(button_color_classes[this._buttonColor].HOVER_CLASS);
                        this._element.classList.add("inboxsdk__button_hover");
                      });
                      kefir_esm.fromEvents(this._element, "mouseleave").onValue(() => {
                        this._element.classList.remove(button_color_classes[this._buttonColor].HOVER_CLASS);
                        this._element.classList.remove("inboxsdk__button_hover");
                        this._element.classList.add(button_color_classes[this._buttonColor].INACTIVE_CLASS);
                      });
                      kefir_esm.fromEvents(this._element, "focus").onValue(() => {
                        if (!this._buttonColor.match(/outline/)) {
                          this._element.classList.add("T-I-JO");
                        }
                      });
                      if (!this._hasDropdown && !this._buttonColor.match(/outline/)) {
                        kefir_esm.fromEvents(this._element, "mouseup").onValue(() => {
                          this._element.classList.remove("T-I-JO");
                        });
                      }
                      kefir_esm.fromEvents(this._element, "blur").onValue(() => {
                        this._element.classList.remove("T-I-JO");
                      });
                    }
                  }
                  _iconLiga = new WeakMap();
                })
              ),
              /***/
              3612: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      GmailDropdownView
                    )
                    /* harmony export */
                  });
                  var _lib_dom_block_and_reemit_keyboard_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(8416);
                  class GmailDropdownView {
                    constructor() {
                      this._containerElement = document.createElement("div");
                      this._containerElement.setAttribute("class", "inboxsdk__menu");
                      this._contentElement = document.createElement("div");
                      this._contentElement.setAttribute("class", "inboxsdk__menuContent");
                      this._containerElement.appendChild(this._contentElement);
                      (0, _lib_dom_block_and_reemit_keyboard_events__WEBPACK_IMPORTED_MODULE_0__.A)(this._containerElement);
                    }
                    destroy() {
                      this._containerElement.remove();
                    }
                    getContainerElement() {
                      return this._containerElement;
                    }
                    getContentElement() {
                      return this._contentElement;
                    }
                  }
                })
              ),
              /***/
              4806: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      GmailTooltipView
                    )
                    /* harmony export */
                  });
                  var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(3281);
                  var lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(lodash_sortBy__WEBPACK_IMPORTED_MODULE_0__);
                  var lodash_escape__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(3131);
                  var lodash_escape__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(lodash_escape__WEBPACK_IMPORTED_MODULE_1__);
                  var asap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(4622);
                  var asap__WEBPACK_IMPORTED_MODULE_2___default = /* @__PURE__ */ __webpack_require__2.n(asap__WEBPACK_IMPORTED_MODULE_2__);
                  var kefir_bus__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__2(8631);
                  var kefir_bus__WEBPACK_IMPORTED_MODULE_5___default = /* @__PURE__ */ __webpack_require__2.n(kefir_bus__WEBPACK_IMPORTED_MODULE_5__);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__2(4924);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_6___default = /* @__PURE__ */ __webpack_require__2.n(kefir_stopper__WEBPACK_IMPORTED_MODULE_6__);
                  var _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__2(9860);
                  var _buttons_button_view__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__2(9341);
                  var _widgets_buttons_basic_button_view_controller__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__2(9755);
                  const ARROW_HORIZONTAL_HEIGHT = 9;
                  const ARROW_HORIZONTAL_WIDTH = 18;
                  const ARROW_VERTICAL_HEIGHT = 18;
                  const ARROW_VERTICAL_WIDTH = 9;
                  class GmailTooltipView {
                    constructor() {
                      __publicField(this, "_eventStream", kefir_bus__WEBPACK_IMPORTED_MODULE_5___default()());
                      __publicField(this, "_stopper", kefir_stopper__WEBPACK_IMPORTED_MODULE_6___default()());
                      let options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      this._setupElement(options);
                    }
                    destroy() {
                      this._eventStream.end();
                      this._stopper.destroy();
                      this._element.remove();
                    }
                    getElement() {
                      return this._element;
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    anchor(anchorElement, placementOptions) {
                      if (!anchorElement) {
                        return;
                      }
                      if (!this._element) {
                        return;
                      }
                      var targetBoundingBox = anchorElement.getBoundingClientRect();
                      var tipBoundingBox = this._element.getBoundingClientRect();
                      var theBoundingBoxWrapperToUse;
                      if (placementOptions && placementOptions.position) {
                        switch (placementOptions.position) {
                          case "top":
                            theBoundingBoxWrapperToUse = {
                              type: "top",
                              value: this._getTopPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                            };
                            break;
                          case "bottom":
                            theBoundingBoxWrapperToUse = {
                              type: "bottom",
                              value: this._getBottomPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                            };
                            break;
                        }
                      }
                      if (!theBoundingBoxWrapperToUse) theBoundingBoxWrapperToUse = this._getAutomaticPlacementBoundingBox(targetBoundingBox, tipBoundingBox);
                      var containedBoundingBox = this._containBoundingBox(theBoundingBoxWrapperToUse.value, placementOptions && placementOptions.offset);
                      this._setPositionAtBoundingBox(containedBoundingBox);
                      this._setArrowPosition(theBoundingBoxWrapperToUse.type, containedBoundingBox, targetBoundingBox);
                    }
                    getContainerElement() {
                      return this._element;
                    }
                    getContentElement() {
                      return (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__.A)(this._element, ".aRM");
                    }
                    close() {
                      this.destroy();
                    }
                    _setupElement(options) {
                      this._element = document.createElement("div");
                      this._element.setAttribute("class", "inboxsdk__tooltip");
                      if (options.el) {
                        const html = `<div class="T-P aRL">
						<div class="T-P-Jz-UR">
							<div class="aRM" tabindex="0">
							</div>
						</div>

						<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">
							<div class="T-P-atD"></div>
							<div class="T-P-atC"></div>
						</div>
					</div>`;
                        this._element.innerHTML = html;
                        this._element.classList.add("inboxdk__tooltip_content");
                        (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__.A)(this._element, ".aRM").appendChild(options.el);
                      } else {
                        const html = [
                          '<div class="T-P aRL">',
                          '<div class="T-P-Jz-UR">',
                          '<div class="aRM" tabindex="0">',
                          '<div class="aVn inboxsdk__tooltip_image">',
                          //image goes here
                          "</div>",
                          '<div class="aRR">',
                          lodash_escape__WEBPACK_IMPORTED_MODULE_1___default()(options.title || ""),
                          "</div>",
                          '<div class="aRQ">',
                          lodash_escape__WEBPACK_IMPORTED_MODULE_1___default()(options.subtitle || ""),
                          "</div>",
                          '<div class="inboxsdk__tooltip_button">',
                          //button goes here
                          "</div>",
                          "</div>",
                          "</div>",
                          '<div class="T-P-aut-UR T-P-aut inboxsdk__tooltip_close" aria-label="Close" role="button"></div>',
                          '<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">',
                          '<div class="T-P-atD"></div>',
                          '<div class="T-P-atC"></div>',
                          "</div>",
                          "</div>"
                        ].join("");
                        this._element.innerHTML = html;
                        const closeElement = this._element.querySelector(".inboxsdk__tooltip_close");
                        if (closeElement) {
                          closeElement.addEventListener("click", () => {
                            this.destroy();
                          });
                        }
                        if (options.imageUrl) {
                          const image = document.createElement("img");
                          image.src = options.imageUrl;
                          (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__.A)(this._element, ".inboxsdk__tooltip_image").appendChild(image);
                          image.addEventListener("load", () => {
                            asap__WEBPACK_IMPORTED_MODULE_2___default()(() => {
                              this._eventStream.emit({
                                eventName: "imageLoaded"
                              });
                            });
                          });
                        }
                        if (options.button) {
                          const buttonOptions = Object.assign({}, options.button);
                          buttonOptions.buttonColor = "blue";
                          const oldOnClick = buttonOptions.onClick;
                          buttonOptions.onClick = () => {
                            this.destroy();
                            if (oldOnClick) {
                              oldOnClick();
                            }
                          };
                          buttonOptions.buttonView = new _buttons_button_view__WEBPACK_IMPORTED_MODULE_4__.A(buttonOptions);
                          new _widgets_buttons_basic_button_view_controller__WEBPACK_IMPORTED_MODULE_7__.A(buttonOptions);
                          (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__.A)(this._element, ".inboxsdk__tooltip_button").appendChild(buttonOptions.buttonView.getElement());
                        }
                      }
                    }
                    _getAutomaticPlacementBoundingBox(targetBoundingBox, tipBoundingBox) {
                      var boundingBoxWrappers = [{
                        type: "top",
                        value: this._getTopPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                      }, {
                        type: "left",
                        value: this._getLeftPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                      }, {
                        type: "right",
                        value: this._getRightPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                      }, {
                        type: "bottom",
                        value: this._getBottomPositionBoundingBox(targetBoundingBox, tipBoundingBox)
                      }];
                      var bestBoundingBoxWrapper = this._figureOutBestBoundingBox(boundingBoxWrappers);
                      return bestBoundingBoxWrapper;
                    }
                    _getTopPositionBoundingBox(targetBoundingBox, tipBoundingBox) {
                      var top = targetBoundingBox.top - tipBoundingBox.height - ARROW_HORIZONTAL_HEIGHT;
                      var left = targetBoundingBox.left + targetBoundingBox.width / 2 - tipBoundingBox.width / 2;
                      return [{
                        x: left,
                        y: top
                      }, {
                        x: left + tipBoundingBox.width,
                        y: top + tipBoundingBox.height
                      }];
                    }
                    _getRightPositionBoundingBox(targetBoundingBox, tipBoundingBox) {
                      var left = targetBoundingBox.right + ARROW_VERTICAL_WIDTH;
                      var top = targetBoundingBox.top + targetBoundingBox.height / 2 - tipBoundingBox.height / 2;
                      return [{
                        x: left,
                        y: top
                      }, {
                        x: left + tipBoundingBox.width,
                        y: top + tipBoundingBox.height
                      }];
                    }
                    _getBottomPositionBoundingBox(targetBoundingBox, tipBoundingBox) {
                      var top = targetBoundingBox.bottom + ARROW_HORIZONTAL_HEIGHT;
                      var left = targetBoundingBox.left + targetBoundingBox.width / 2 - tipBoundingBox.width / 2;
                      return [{
                        x: left,
                        y: top
                      }, {
                        x: left + tipBoundingBox.width,
                        y: top + tipBoundingBox.height
                      }];
                    }
                    _getLeftPositionBoundingBox(targetBoundingBox, tipBoundingBox) {
                      var left = targetBoundingBox.left - ARROW_VERTICAL_WIDTH - tipBoundingBox.width;
                      var top = targetBoundingBox.top + targetBoundingBox.height / 2 - tipBoundingBox.height / 2;
                      return [{
                        x: left,
                        y: top
                      }, {
                        x: left + tipBoundingBox.width,
                        y: top + tipBoundingBox.height
                      }];
                    }
                    _figureOutBestBoundingBox(boundingBoxWrappers) {
                      for (var ii = 0; ii < boundingBoxWrappers.length; ii++) {
                        boundingBoxWrappers[ii].smallestDistance = this._getSmallestDistance(boundingBoxWrappers[ii]);
                      }
                      return lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()(boundingBoxWrappers, function(boundingBoxWrapper) {
                        return boundingBoxWrapper.smallestDistance;
                      }).reverse()[0];
                    }
                    _getSmallestDistance(boundingBoxWrapper) {
                      var distances = [
                        boundingBoxWrapper.value[0].y,
                        //top
                        boundingBoxWrapper.value[0].x,
                        //left
                        document.body.clientWidth - boundingBoxWrapper.value[1].x,
                        //right
                        document.body.clientHeight - boundingBoxWrapper.value[1].y
                        //bottom
                      ];
                      return lodash_sortBy__WEBPACK_IMPORTED_MODULE_0___default()(distances, function(distance) {
                        return distance;
                      })[0];
                    }
                    _containBoundingBox(boundingBox, offset) {
                      var boundingBoxHeight = boundingBox[1].y - boundingBox[0].y;
                      var boundingBoxWidth = boundingBox[1].x - boundingBox[0].x;
                      if (boundingBox[0].y < -1) {
                        boundingBox[0].y = 0;
                        boundingBox[1].y = boundingBox[0].y + boundingBoxHeight;
                      } else if (boundingBox[1].y > document.body.clientHeight) {
                        boundingBox[0].y = document.body.clientHeight - boundingBoxHeight;
                        boundingBox[1].y = boundingBox[0].y + boundingBoxHeight;
                      }
                      if (boundingBox[0].x < -1) {
                        boundingBox[0].x = 0;
                        boundingBox[1].x = boundingBox[0].x + boundingBoxWidth;
                      } else if (boundingBox[1].x > document.body.clientWidth) {
                        boundingBox[0].x = document.body.clientWidth - boundingBoxWidth - 20;
                        boundingBox[1].x = boundingBox[0].x + boundingBoxWidth;
                      }
                      if (offset) {
                        if (offset.left) {
                          boundingBox[0].x += offset.left;
                          boundingBox[1].x += offset.left;
                        }
                        if (offset.top) {
                          boundingBox[0].y += offset.top;
                          boundingBox[1].y += offset.top;
                        }
                      }
                      return boundingBox;
                    }
                    _setPositionAtBoundingBox(boundingBox) {
                      this._element.style.left = boundingBox[0].x + "px";
                      this._element.style.top = boundingBox[0].y + "px";
                    }
                    _setArrowPosition(type, containedBoundingBox, targetBoundingBox) {
                      var position = {};
                      switch (type) {
                        case "top":
                          position.top = containedBoundingBox[1].y;
                          position.left = targetBoundingBox.left + targetBoundingBox.width / 2;
                          break;
                        case "left":
                          position.top = (containedBoundingBox[0].y + containedBoundingBox[1].y) / 2 - ARROW_VERTICAL_HEIGHT / 2;
                          position.left = containedBoundingBox[1].x;
                          break;
                        case "right":
                          position.top = (containedBoundingBox[0].y + containedBoundingBox[1].y) / 2 - ARROW_VERTICAL_HEIGHT / 2;
                          position.left = containedBoundingBox[0].x - ARROW_HORIZONTAL_WIDTH / 2 + 1;
                          break;
                        case "bottom":
                          position.top = containedBoundingBox[0].y - ARROW_HORIZONTAL_HEIGHT + 1;
                          position.left = (containedBoundingBox[0].x + containedBoundingBox[1].x) / 2;
                          break;
                      }
                      const arrow = (0, _lib_dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_3__.A)(this._element, ".inboxsdk__tooltip_arrow");
                      arrow.style.left = position.left + "px";
                      arrow.style.top = position.top + "px";
                    }
                  }
                })
              ),
              /***/
              8105: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      getAccountUrlPart
                    )
                    /* harmony export */
                  });
                  function getAccountUrlPart() {
                    const delegatedAccountMatch = document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/);
                    if (delegatedAccountMatch) {
                      const delegatedAccountId = delegatedAccountMatch[1];
                      const delegatedAccountNumber = delegatedAccountMatch[2];
                      return `/u/${delegatedAccountNumber}/d/${delegatedAccountId}`;
                    } else {
                      const accountParamMatch = document.location.pathname.match(/(\/u\/\d+)\//i);
                      const accountParam = accountParamMatch ? accountParamMatch[1] : "/u/0";
                      return accountParam;
                    }
                  }
                })
              ),
              /***/
              1158: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(7332);
                  var _getOriginalMessagePage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(2903);
                  module2 = __webpack_require__2.hmd(module2);
                  async function getGmailMessageIdForSyncMessageId(driver, syncMessageID) {
                    const text = await (0, _getOriginalMessagePage__WEBPACK_IMPORTED_MODULE_0__.A)(driver, {
                      syncMessageID
                    });
                    const messageIdMatch = text.match(/<a\b[^<>]+\bhref="\/mail[^"]*(?:\?|&(?:amp;)?)view=att&(?:amp;)?th=([a-f0-9]+)&/i);
                    if (!messageIdMatch) {
                      throw new Error("Failed to find gmail message id for inbox message id");
                    }
                    return messageIdMatch[1];
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_1__.defn)(module2, getGmailMessageIdForSyncMessageId);
                })
              ),
              /***/
              5187: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(7332);
                  var _getSyncThreadsForSearch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(6743);
                  module2 = __webpack_require__2.hmd(module2);
                  async function getGmailThreadIdForRfcMessageId(driver, rfcMessageId) {
                    const {
                      threads: threadDescriptors
                    } = await (0, _getSyncThreadsForSearch__WEBPACK_IMPORTED_MODULE_0__.A)(driver, "rfc822msgid:" + rfcMessageId);
                    return threadDescriptors[0].oldGmailThreadID;
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_1__.defn)(module2, getGmailThreadIdForRfcMessageId);
                })
              ),
              /***/
              2903: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(7332);
                  var _gmailAjax__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(5609);
                  module2 = __webpack_require__2.hmd(module2);
                  async function getOriginalMessagePage(driver, options) {
                    const data = {
                      ik: driver.getPageCommunicator().getIkValue(),
                      view: "om"
                    };
                    if (options.oldGmailMessageID) {
                      data.th = options.oldGmailMessageID;
                    } else if (options.syncMessageID) {
                      data.permmsgid = options.syncMessageID;
                    }
                    let url;
                    const delegatedAccountMatch = document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/);
                    if (delegatedAccountMatch) {
                      url = document.location.origin + document.location.pathname;
                    } else {
                      const accountParamMatch = document.location.pathname.match(/(\/u\/\d+)\//i);
                      const accountParam = accountParamMatch ? accountParamMatch[1] : "/u/0";
                      url = `https://mail.google.com/mail${accountParam}`;
                    }
                    const {
                      text
                    } = await (0, _gmailAjax__WEBPACK_IMPORTED_MODULE_0__.A)({
                      url,
                      method: "GET",
                      canRetry: true,
                      data
                    });
                    return text;
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_1__.defn)(module2, getOriginalMessagePage);
                })
              ),
              /***/
              6743: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__2(7332);
                  var _dom_driver_gmail_gmail_sync_response_processor__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(6811);
                  var _gmailAjax__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(5609);
                  var _getAccountUrlPart__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(8105);
                  module2 = __webpack_require__2.hmd(module2);
                  async function getSyncThreadsForSearch(driver, searchTerm) {
                    let responseText = null;
                    try {
                      const {
                        text
                      } = await (0, _gmailAjax__WEBPACK_IMPORTED_MODULE_1__.A)({
                        method: "POST",
                        url: `https://mail.google.com/sync${(0, _getAccountUrlPart__WEBPACK_IMPORTED_MODULE_2__.A)()}/i/bv`,
                        headers: {
                          "Content-Type": "application/json",
                          "X-Framework-Xsrf-Token": await driver.getPageCommunicator().getXsrfToken(),
                          "X-Gmail-BTAI": await driver.getPageCommunicator().getBtaiHeader(),
                          "X-Google-BTD": "1"
                        },
                        data: JSON.stringify({
                          "1": {
                            "2": 1,
                            "4": searchTerm
                          }
                        })
                      });
                      responseText = text;
                    } catch (err) {
                      const {
                        text
                      } = await (0, _gmailAjax__WEBPACK_IMPORTED_MODULE_1__.A)({
                        method: "POST",
                        url: `https://mail.google.com/sync${(0, _getAccountUrlPart__WEBPACK_IMPORTED_MODULE_2__.A)()}/i/bv?rt=r&pt=ji`,
                        headers: {
                          "Content-Type": "application/json",
                          "X-Framework-Xsrf-Token": await driver.getPageCommunicator().getXsrfToken(),
                          "X-Gmail-BTAI": await driver.getPageCommunicator().getBtaiHeader(),
                          "X-Google-BTD": "1"
                        },
                        data: JSON.stringify([[null, 51, null, searchTerm]])
                      });
                      responseText = text;
                    }
                    return {
                      threads: (0, _dom_driver_gmail_gmail_sync_response_processor__WEBPACK_IMPORTED_MODULE_0__.Uf)(responseText),
                      _text: responseText
                    };
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = (0, ud__WEBPACK_IMPORTED_MODULE_3__.defn)(module2, getSyncThreadsForSearch);
                })
              ),
              /***/
              5609: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      driver_common_gmailAjax
                    )
                  });
                  var js = __webpack_require__2(7332);
                  var kefir_esm = __webpack_require__2(7249);
                  ;
                  function imageRequest(url) {
                    return new Promise((resolve, reject) => {
                      const img = new Image();
                      img.addEventListener("load", () => resolve(img));
                      img.addEventListener("error", reject);
                      img.src = url;
                    });
                  }
                  ;
                  function rateLimitQueuer(fn, period, count) {
                    let callTimestamps = [];
                    const queue = [];
                    let runningQueue = false;
                    function runJob() {
                      const job = queue.shift();
                      job();
                      if (queue.length) {
                        runQueue();
                      } else {
                        runningQueue = false;
                      }
                    }
                    function runQueue() {
                      runningQueue = true;
                      const timeToWait = getTimeToUnqueueItem();
                      if (timeToWait > 0) {
                        setTimeout(runJob, timeToWait);
                      } else {
                        runJob();
                      }
                    }
                    function getTimeToUnqueueItem() {
                      const now = Date.now();
                      const periodAgo = now - period;
                      callTimestamps = callTimestamps.filter((time) => time > periodAgo);
                      if (callTimestamps.length >= count) {
                        return callTimestamps[0] - periodAgo;
                      }
                      return -1;
                    }
                    return function attempt() {
                      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                        args[_key] = arguments[_key];
                      }
                      let job;
                      const promise = new Promise((resolve, reject) => {
                        job = () => {
                          callTimestamps.push(Date.now());
                          try {
                            resolve(fn.apply(this, args));
                          } catch (err) {
                            reject(err);
                          }
                        };
                      });
                      if (!job) throw new Error("Should not happen");
                      queue.push(job);
                      if (!runningQueue) {
                        runQueue();
                      }
                      return promise;
                    };
                  }
                  var ajax = __webpack_require__2(8587);
                  ;
                  module2 = __webpack_require__2.hmd(module2);
                  const IMAGE_REQUEST_TIMEOUT = 1e3 * 60;
                  const limitedAjax = rateLimitQueuer(rateLimitQueuer(ajax.A, 1e3, 7), 10 * 1e3, 50);
                  async function gmailAjax(opts) {
                    if (!/^https:\/\/mail\.google\.com(?:$|\/)/.test(opts.url)) {
                      throw new Error("Should not happen: gmailAjax called with non-gmail url");
                    }
                    if (document.location.origin === "https://mail.google.com") {
                      return await limitedAjax(opts);
                    }
                    try {
                      return await limitedAjax({
                        ...opts,
                        canRetry: false
                      });
                    } catch (e) {
                      if (e && e.status === 0) {
                        try {
                          await kefir_esm["default"].fromPromise(imageRequest("https://mail.google.com/mail/u/0/")).merge(kefir_esm["default"].later(IMAGE_REQUEST_TIMEOUT, void 0)).take(1).takeErrors(1).toPromise();
                        } catch (e2) {
                        }
                        return await limitedAjax(opts);
                      } else if (e && typeof e.status === "number" && e.status >= 500) {
                        return await limitedAjax(opts);
                      } else {
                        throw e;
                      }
                    }
                  }
                  const driver_common_gmailAjax = (0, js.defn)(module2, gmailAjax);
                })
              ),
              /***/
              2621: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      updateIcon
                    )
                    /* harmony export */
                  });
                  function createIconElement(containerElement, append, insertBeforeEl) {
                    const iconElement = document.createElement("div");
                    iconElement.classList.add("inboxsdk__button_icon");
                    iconElement.innerHTML = "&nbsp;";
                    if (append) {
                      containerElement.appendChild(iconElement);
                    } else {
                      containerElement.insertBefore(iconElement, insertBeforeEl || containerElement.firstElementChild);
                    }
                    return iconElement;
                  }
                  function createIconImgElement(iconUrl, containerElement, append, insertBeforeEl) {
                    const iconElement = createIconElement(containerElement, append, insertBeforeEl);
                    iconElement.innerHTML = "";
                    const iconImgElement = document.createElement("img");
                    iconImgElement.classList.add("inboxsdk__button_iconImg");
                    iconImgElement.src = iconUrl;
                    iconElement.appendChild(iconImgElement);
                    return iconElement;
                  }
                  function updateIcon(iconSettings, containerElement, append, newIconClass, newIconUrl, insertBeforeEl, newIconHtml, iconLiga) {
                    if (append && insertBeforeEl) throw new Error("append and insertBeforeEl should not be used together");
                    if (newIconHtml && (newIconClass || newIconUrl)) {
                      throw new Error("iconHtml can not be used together with iconClass or iconUrl");
                    }
                    if (newIconHtml) {
                      if (!iconSettings.iconHtmlElement) {
                        iconSettings.iconHtmlElement = createIconElement(containerElement, append, insertBeforeEl);
                      }
                      iconSettings.iconHtmlElement.innerHTML = newIconHtml;
                      if (iconSettings.iconImgElement) {
                        iconSettings.iconImgElement.remove();
                        iconSettings.iconImgElement = null;
                      }
                      if (iconSettings.iconElement) {
                        iconSettings.iconElement.remove();
                        iconSettings.iconElement = null;
                      }
                    } else if (newIconUrl) {
                      if (!iconSettings.iconImgElement) {
                        iconSettings.iconImgElement = createIconImgElement(newIconUrl, containerElement, append, insertBeforeEl);
                      } else {
                        iconSettings.iconImgElement.firstElementChild.src = newIconUrl;
                      }
                      iconSettings.iconImgElement.setAttribute("class", `inboxsdk__button_icon ${newIconClass || ""}`);
                      if (iconSettings.iconHtmlElement) {
                        iconSettings.iconHtmlElement.remove();
                        iconSettings.iconHtmlElement = null;
                      }
                      if (iconSettings.iconElement) {
                        iconSettings.iconElement.remove();
                        iconSettings.iconElement = null;
                      }
                    } else if (newIconClass) {
                      if (!iconSettings.iconElement) {
                        iconSettings.iconElement = createIconElement(containerElement, append, insertBeforeEl);
                      }
                      if (iconLiga) {
                        iconSettings.iconElement.innerText = iconLiga;
                      }
                      iconSettings.iconElement.setAttribute("class", "inboxsdk__button_icon " + newIconClass);
                      if (iconSettings.iconHtmlElement) {
                        iconSettings.iconHtmlElement.remove();
                        iconSettings.iconHtmlElement = null;
                      }
                      if (iconSettings.iconImgElement) {
                        iconSettings.iconImgElement.remove();
                        iconSettings.iconImgElement = null;
                      }
                    } else {
                      if (iconSettings.iconElement) {
                        iconSettings.iconElement.remove();
                        iconSettings.iconElement = null;
                      }
                      if (iconSettings.iconHtmlElement) {
                        iconSettings.iconHtmlElement.remove();
                        iconSettings.iconHtmlElement = null;
                      }
                      if (iconSettings.iconImgElement) {
                        iconSettings.iconImgElement.remove();
                        iconSettings.iconImgElement = null;
                      }
                    }
                  }
                })
              ),
              /***/
              1136: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      delayAsap
                    )
                    /* harmony export */
                  });
                  var asap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(4622);
                  var asap__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(asap__WEBPACK_IMPORTED_MODULE_0__);
                  var kefir__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(7249);
                  function delayAsap(value) {
                    return kefir__WEBPACK_IMPORTED_MODULE_1__.stream((emitter) => {
                      asap__WEBPACK_IMPORTED_MODULE_0___default()(() => {
                        emitter.emit(value);
                        emitter.end();
                      });
                    });
                  }
                })
              ),
              /***/
              8416: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      blockAndReemiteKeyboardEvents
                    )
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  function blockAndReemiteKeyboardEvents(element) {
                    kefir__WEBPACK_IMPORTED_MODULE_0__["default"].merge([kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "keypress"), kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "keydown"), kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "keyup")]).onValue((event) => {
                      event.stopPropagation();
                      const fakeEvent = new KeyboardEvent(event.type, {
                        bubbles: true
                      });
                      Object.defineProperties(fakeEvent, {
                        cancelable: {
                          value: event.cancelable
                        },
                        bubbles: {
                          value: event.bubbles
                        },
                        target: {
                          value: event.target
                        },
                        detail: {
                          value: event.detail
                        },
                        key: {
                          value: event.key
                        },
                        code: {
                          value: event.code
                        },
                        location: {
                          value: event.location
                        },
                        ctrlKey: {
                          value: event.ctrlKey
                        },
                        shiftKey: {
                          value: event.shiftKey
                        },
                        altKey: {
                          value: event.altKey
                        },
                        metaKey: {
                          value: event.metaKey
                        },
                        repeat: {
                          value: event.repeat
                        },
                        isComposing: {
                          value: event.isComposing
                        },
                        charCode: {
                          value: event.charCode
                        },
                        keyCode: {
                          value: event.keyCode
                        },
                        which: {
                          value: event.which
                        }
                      });
                      document.dispatchEvent(fakeEvent);
                    });
                  }
                })
              ),
              /***/
              5389: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      insertElementInOrder
                    )
                    /* harmony export */
                  });
                  var transducers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(6046);
                  var transducers_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(transducers_js__WEBPACK_IMPORTED_MODULE_0__);
                  const DEFAULT_ORDER_ATTRS = ["data-group-order-hint", "data-order-hint", "data-insertion-order-hint"];
                  function insertElementInOrder(container, el) {
                    let orderAttrs = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : DEFAULT_ORDER_ATTRS;
                    let insertBeforeNonSdk = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false;
                    const insertBeforeElement = transducers_js__WEBPACK_IMPORTED_MODULE_0___default().toArray(Array.prototype.slice.call(container.children), transducers_js__WEBPACK_IMPORTED_MODULE_0___default().compose(transducers_js__WEBPACK_IMPORTED_MODULE_0___default().filter((cel) => {
                      let hadAnyOrderAttrs = false;
                      for (const name of orderAttrs) {
                        const attr = el.getAttribute(name);
                        const cattr = cel.getAttribute(name);
                        if (attr == null || cattr == null) continue;
                        hadAnyOrderAttrs = true;
                        let comparison;
                        if (!isNaN(parseFloat(attr)) && !isNaN(parseFloat(cattr))) {
                          comparison = parseFloat(cattr) - parseFloat(attr);
                        } else {
                          comparison = cattr.localeCompare(attr);
                        }
                        if (comparison > 0) return true;
                        if (comparison < 0) return false;
                      }
                      if (insertBeforeNonSdk) {
                        return !hadAnyOrderAttrs;
                      } else {
                        return false;
                      }
                    }), transducers_js__WEBPACK_IMPORTED_MODULE_0___default().take(1)))[0];
                    container.insertBefore(el, insertBeforeElement);
                  }
                })
              ),
              /***/
              3166: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(7332);
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  module2 = __webpack_require__2.hmd(module2);
                  var insertHTMLatCursor = ud__WEBPACK_IMPORTED_MODULE_1__.defn(module2, function insertHTMLatCursor2(element, html, oldRange) {
                    element.focus();
                    if (element instanceof HTMLTextAreaElement) {
                      var oldStart = element.selectionStart;
                      if (element.selectionStart < element.selectionEnd) {
                        element.value = element.value.substring(0, element.selectionStart) + element.value.substring(element.selectionEnd);
                      }
                      element.value = element.value.substring(0, oldStart) + html + element.value.substring(oldStart);
                      element.selectionStart = oldStart + html.length;
                      element.selectionEnd = oldStart + html.length;
                    } else {
                      var editable = null;
                      if (element.getSelection) {
                        editable = element;
                      } else if (element.ownerDocument && element.ownerDocument.getSelection) {
                        editable = element.ownerDocument;
                      }
                      if (editable) {
                        var sel = editable.getSelection();
                        if (sel.getRangeAt && sel.rangeCount) {
                          var range = oldRange || sel.getRangeAt(0);
                          range.deleteContents();
                          var frag;
                          if (html instanceof DocumentFragment) {
                            frag = html;
                          } else {
                            frag = document.createDocumentFragment();
                            if (html instanceof HTMLElement) {
                              frag.appendChild(html);
                            } else {
                              var el = document.createElement("div");
                              el.innerHTML = html;
                              var node;
                              while (node = el.firstChild) {
                                frag.appendChild(node);
                              }
                            }
                          }
                          var firstChild = frag.firstElementChild;
                          range.insertNode(frag);
                          var event = document.createEvent("MouseEvents");
                          event.initMouseEvent("mousedown", false, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
                          event.preventDefault();
                          element.dispatchEvent(event);
                          range.collapse(false);
                          sel.removeAllRanges();
                          sel.addRange(range);
                          var nextUserCursorMove = kefir__WEBPACK_IMPORTED_MODULE_0__["default"].merge([kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "mousedown"), kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "keypress")]);
                          kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(element, "focus").takeUntilBy(nextUserCursorMove).onValue(function() {
                            sel.removeAllRanges();
                            sel.addRange(range);
                          });
                          return firstChild;
                        }
                      }
                    }
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = insertHTMLatCursor;
                })
              ),
              /***/
              5235: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      keyboardShortcutStream
                    )
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  var combokeys_capture__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(4400);
                  var combokeys_capture__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(combokeys_capture__WEBPACK_IMPORTED_MODULE_1__);
                  const combokeys = typeof document !== "undefined" && new (combokeys_capture__WEBPACK_IMPORTED_MODULE_1___default())(document.body, true);
                  function keyboardShortcutStream(chord) {
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.stream((emitter) => {
                      return combokeys && combokeys.bind(chord, function(domEvent) {
                        emitter.emit(domEvent);
                        return false;
                      }, "keydown");
                    });
                  }
                })
              ),
              /***/
              2843: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      makeElementChildStream
                    )
                    /* harmony export */
                  });
                  var asap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(4622);
                  var asap__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(asap__WEBPACK_IMPORTED_MODULE_0__);
                  var kefir__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(7249);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(4924);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_2___default = /* @__PURE__ */ __webpack_require__2.n(kefir_stopper__WEBPACK_IMPORTED_MODULE_2__);
                  function makeElementChildStream(element) {
                    if (!element || !element.nodeType) {
                      throw new Error("Expected element, got " + String(element));
                    }
                    return kefir__WEBPACK_IMPORTED_MODULE_1__.stream((emitter) => {
                      const removalStreams = /* @__PURE__ */ new Map();
                      let ended = false;
                      function newEl(el) {
                        if (el.nodeType !== 1) return;
                        if (removalStreams.has(el)) {
                          throwLater(new Error("Already had removalStream for element with class " + el.className));
                        }
                        const removalStream = kefir_stopper__WEBPACK_IMPORTED_MODULE_2___default()();
                        removalStreams.set(el, removalStream);
                        try {
                          emitter.emit({
                            el,
                            removalStream
                          });
                        } catch (err) {
                          throwLater(err);
                        }
                      }
                      function removedEl(el) {
                        if (el.nodeType !== 1) return;
                        const removalStream = removalStreams.get(el);
                        removalStreams.delete(el);
                        if (removalStream) {
                          try {
                            removalStream.destroy();
                          } catch (err) {
                            throwLater(err);
                          }
                        } else {
                          throwLater(new Error("Could not find removalStream for element with class " + el.className));
                        }
                      }
                      const observer2 = new MutationObserver(function(mutations) {
                        mutations.forEach((mutation) => {
                          Array.prototype.forEach.call(mutation.addedNodes, newEl);
                          Array.prototype.forEach.call(mutation.removedNodes, removedEl);
                        });
                      });
                      asap__WEBPACK_IMPORTED_MODULE_0___default()(() => {
                        if (!ended) {
                          observer2.observe(element, {
                            childList: true
                          });
                          Array.prototype.slice.call(element.children).forEach(newEl);
                        }
                      });
                      return function() {
                        ended = true;
                        observer2.disconnect();
                        asap__WEBPACK_IMPORTED_MODULE_0___default()(() => {
                          removalStreams.forEach((removalStream) => {
                            removalStream.destroy();
                          });
                        });
                      };
                    });
                  }
                  function throwLater(err) {
                    setTimeout(() => {
                      throw err;
                    }, 1);
                  }
                })
              ),
              /***/
              3197: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      makeMutationObserverChunkedStream
                    )
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  function makeMutationObserverChunkedStream(element, options) {
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.stream((emitter) => {
                      const observer2 = new MutationObserver((mutations) => {
                        emitter.emit(mutations instanceof Array ? mutations : Array.from(mutations));
                      });
                      observer2.observe(element, options);
                      return () => {
                        observer2.disconnect();
                      };
                    });
                  }
                })
              ),
              /***/
              5938: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      makeMutationObserverStream
                    )
                    /* harmony export */
                  });
                  var _make_mutation_observer_chunked_stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(3197);
                  function makeMutationObserverStream(element, options) {
                    return (0, _make_mutation_observer_chunked_stream__WEBPACK_IMPORTED_MODULE_0__.A)(element, options).flatten();
                  }
                })
              ),
              /***/
              8734: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var _from_event_target_capture__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(3985);
                  var ud__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(7332);
                  module2 = __webpack_require__2.hmd(module2);
                  const pageMouseUps = (0, _from_event_target_capture__WEBPACK_IMPORTED_MODULE_0__.A)(document.body, "mouseup");
                  const onMouseDownAndUp = (0, ud__WEBPACK_IMPORTED_MODULE_1__.defn)(module2, function onMouseDownAndUp2(el) {
                    const elMouseDowns = (0, _from_event_target_capture__WEBPACK_IMPORTED_MODULE_0__.A)(el, "mousedown");
                    return elMouseDowns.flatMapLatest(() => pageMouseUps.take(1).filter((event) => el.contains(event.target)));
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = onMouseDownAndUp;
                })
              ),
              /***/
              9860: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      querySelector
                    ),
                    /* harmony export */
                    a: () => (
                      /* binding */
                      SelectorError
                    )
                    /* harmony export */
                  });
                  class SelectorError extends Error {
                    constructor(selector, options) {
                      super(`Failed to find element with selector: ${selector}`, options);
                      __publicField(this, "name", "SelectorError");
                    }
                  }
                  function querySelector(el, selector) {
                    const r = el.querySelector(selector);
                    if (!r) throw new SelectorError(selector);
                    return r;
                  }
                })
              ),
              /***/
              4603: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    jp: () => (
                      /* binding */
                      simulateClick
                    ),
                    /* harmony export */
                    zU: () => (
                      /* binding */
                      simulateHover
                    )
                    /* harmony export */
                  });
                  function simulateMouseEvent(element, mouseEventName) {
                    const event = document.createEvent("MouseEvents");
                    event.initMouseEvent(mouseEventName, true, true, window, 0, element.offsetLeft, element.offsetTop, 0, 0, false, false, false, false, 0, null);
                    element.dispatchEvent(event);
                  }
                  function simulateHover(element) {
                    simulateMouseEvent(element, "mouseover");
                  }
                  function simulateClick(element) {
                    simulateMouseEvent(element, "mousedown");
                    simulateMouseEvent(element, "mouseup");
                    simulateMouseEvent(element, "click");
                    simulateMouseEvent(element, "mouseleave");
                    simulateMouseEvent(element, "mouseout");
                    element.blur();
                  }
                })
              ),
              /***/
              3324: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      extractContactFromEmailContactString
                    )
                  });
                  ;
                  const re = /^([^<>()[\]\\,;:\s"]+|".+")@[^\s<>]+$/;
                  function isValidEmail(candidate) {
                    if (candidate == null) {
                      return false;
                    }
                    return re.test(candidate);
                  }
                  ;
                  function extractContactFromEmailContactString(contactInfoString) {
                    let name;
                    let emailAddress = null;
                    const contactInfoParts = contactInfoString.split("<");
                    const firstPartTrimmed = contactInfoParts[0].replace(/\u202c/g, "").trim();
                    if (contactInfoParts.length > 1) {
                      name = firstPartTrimmed;
                      emailAddress = contactInfoParts[1].split(">")[0].replace(/\u202c/g, "").trim();
                    } else {
                      if (isValidEmail(firstPartTrimmed)) {
                        emailAddress = firstPartTrimmed;
                      } else {
                        throw Object.assign(new Error("Invalid email address"), {
                          firstPartTrimmed
                        });
                      }
                    }
                    return {
                      name,
                      emailAddress
                    };
                  }
                })
              ),
              /***/
              652: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      fakeWindowResize
                    )
                    /* harmony export */
                  });
                  function fakeWindowResize() {
                    const event = document.createEvent("HTMLEvents");
                    event.initEvent("resize", true, false);
                    window.dispatchEvent(event);
                  }
                })
              ),
              /***/
              3985: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      fromEventTargetCapture
                    )
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  function fromEventTargetCapture(target, eventName) {
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.stream((emitter) => {
                      function sink(event) {
                        emitter.value(event);
                      }
                      target.addEventListener(eventName, sink, true);
                      return () => {
                        target.removeEventListener(eventName, sink, true);
                      };
                    });
                  }
                })
              ),
              /***/
              6907: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  var ud__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__2(7332);
                  var _dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(9860);
                  var _dom_make_mutation_observer_chunked_stream__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(3197);
                  module2 = __webpack_require__2.hmd(module2);
                  const extId = "" + Math.random();
                  const X_URL = "https://ssl.gstatic.com/ui/v1/icons/common/x_8px.png";
                  const handleComposeLinkChips = (0, ud__WEBPACK_IMPORTED_MODULE_3__.defn)(module2, function(composeView) {
                    try {
                      composeView.getBodyElement();
                    } catch (err) {
                      return;
                    }
                    const mainElement = composeView.getElement();
                    _waitToClaim(mainElement).takeUntilBy(composeView.getStopper()).onValue(() => {
                      mainElement.classList.add("inboxsdk__ensure_link_active");
                      composeView.getStopper().onValue(() => {
                        mainElement.classList.remove("inboxsdk__ensure_link_active");
                      });
                      composeView.getEventStream().filter((event) => event.eventName === "bodyChanged").toProperty(() => null).debounce(100, {
                        immediate: true
                      }).takeUntilBy(composeView.getStopper()).onValue(() => {
                        doFixing(composeView);
                      });
                      composeView.getEventStream().filter((event) => event.eventName === "presending").onValue(() => {
                        doPresendFixing(composeView);
                      });
                    });
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = handleComposeLinkChips;
                  const doFixing = (0, ud__WEBPACK_IMPORTED_MODULE_3__.defn)(module2, function(composeView) {
                    const bodyElement = composeView.getBodyElement();
                    const chips = _getChipElements(bodyElement);
                    chips.filter(_isNotEnhanced).forEach(_addEnhancements);
                  }, "doFixing");
                  const doPresendFixing = (0, ud__WEBPACK_IMPORTED_MODULE_3__.defn)(module2, function(composeView) {
                    const bodyElement = composeView.getBodyElement();
                    const chips = _getChipElements(bodyElement);
                    chips.filter(_isOurEnhanced).forEach((chip) => {
                      const xBtn = chip.querySelector(`img[src="${X_URL}"]`);
                      if (xBtn) {
                        xBtn.remove();
                      }
                      const title = chip.querySelector("a > span");
                      if (title) {
                        title.style.textDecoration = "none";
                      }
                    });
                  }, "doPresendFixing");
                  function _getChipElements(bodyElement) {
                    const chipInnerEls = bodyElement.querySelectorAll("[hspace=inboxsdk__chip]");
                    return [...Array.from(chipInnerEls).map((x) => x.parentElement), ...Array.from(bodyElement.querySelectorAll("[hspace=inboxsdk__chip_main]"))];
                  }
                  function _waitToClaim(el) {
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.later(0, void 0).merge((0, _dom_make_mutation_observer_chunked_stream__WEBPACK_IMPORTED_MODULE_2__.A)(el, {
                      attributes: true,
                      attributeFilter: ["class"]
                    })).map(() => !el.classList.contains("inboxsdk__ensure_link_active")).filter(Boolean).take(1);
                  }
                  function _isNotEnhanced(chipElement) {
                    var claim = chipElement.getAttribute("data-sdk-linkchip-claimed");
                    if (extId === claim) {
                      return !chipElement._linkChipEnhancedByThisExtension;
                    }
                    return claim == null;
                  }
                  function _isOurEnhanced(chipElement) {
                    return !!chipElement._linkChipEnhancedByThisExtension;
                  }
                  function _addEnhancements(chipElement) {
                    const anchor = chipElement.querySelector("a");
                    if (anchor) {
                      anchor.addEventListener("mousedown", function(e) {
                        e.stopImmediatePropagation();
                      }, true);
                      anchor.addEventListener("click", function(e) {
                        e.stopImmediatePropagation();
                      }, true);
                    }
                    const xElement = document.createElement("img");
                    xElement.src = X_URL;
                    xElement.setAttribute("style", "opacity: 0.55; cursor: pointer; float: right; position: relative; top: -1px;");
                    xElement.addEventListener("mousedown", function() {
                      chipElement.remove();
                    }, true);
                    xElement.addEventListener("click", function(e) {
                      e.stopImmediatePropagation();
                      e.preventDefault();
                    }, true);
                    chipElement.addEventListener("mouseenter", function() {
                      chipElement.appendChild(xElement);
                      (0, _dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_1__.A)(chipElement, "a > span").style.textDecoration = "underline";
                    });
                    chipElement.addEventListener("mouseleave", function() {
                      xElement.remove();
                      (0, _dom_querySelectorOrFail__WEBPACK_IMPORTED_MODULE_1__.A)(chipElement, "a > span").style.textDecoration = "none";
                    });
                    chipElement.addEventListener("mousedown", function(e) {
                      e.preventDefault();
                    });
                    chipElement.contentEditable = "false";
                    chipElement.setAttribute("data-sdk-linkchip-claimed", extId);
                    chipElement._linkChipEnhancedByThisExtension = true;
                  }
                })
              ),
              /***/
              3247: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      HandlerRegistry
                    )
                    /* harmony export */
                  });
                  var lodash_remove__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(2036);
                  var lodash_remove__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(lodash_remove__WEBPACK_IMPORTED_MODULE_0__);
                  var asap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(4622);
                  var asap__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(asap__WEBPACK_IMPORTED_MODULE_1__);
                  var _logger__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(2617);
                  class HandlerRegistry {
                    constructor() {
                      __publicField(this, "_targets", []);
                      __publicField(this, "_pendingHandlers", []);
                      __publicField(this, "_handlers", []);
                    }
                    registerHandler(handler) {
                      if (this._pendingHandlers.indexOf(handler) === -1) {
                        this._pendingHandlers.push(handler);
                        asap__WEBPACK_IMPORTED_MODULE_1___default()(() => {
                          const pendingHandlers = this._pendingHandlers.slice();
                          for (let ii = pendingHandlers.length - 1; ii >= 0; ii--) {
                            const handler2 = pendingHandlers[ii];
                            if (this._handlers.indexOf(handler2) === -1) {
                              this._handlers.push(handler2);
                              this._informHandlerOfTargets(handler2);
                            }
                          }
                          this._pendingHandlers = [];
                        });
                      }
                      return () => {
                        lodash_remove__WEBPACK_IMPORTED_MODULE_0___default()(this._pendingHandlers, (h) => h === handler);
                        lodash_remove__WEBPACK_IMPORTED_MODULE_0___default()(this._handlers, (h) => h === handler);
                      };
                    }
                    addTarget(target) {
                      this._targets.push(target);
                      if (target && typeof target === "object" && typeof target.on === "function") {
                        target.on("destroy", () => {
                          this.removeTarget(target);
                        });
                      }
                      this._informHandlersOfTarget(target);
                    }
                    removeTarget(target) {
                      lodash_remove__WEBPACK_IMPORTED_MODULE_0___default()(this._targets, (t2) => t2 === target);
                    }
                    dumpHandlers() {
                      this._pendingHandlers = [];
                      this._handlers = [];
                    }
                    _informHandlerOfTargets(handler) {
                      const targets = this._targets.slice();
                      for (let ii = 0; ii < targets.length; ii++) {
                        _tryCatch(handler, targets[ii]);
                      }
                    }
                    _informHandlersOfTarget(target) {
                      const handlers = this._handlers.slice();
                      for (let ii = 0; ii < handlers.length; ii++) {
                        _tryCatch(handlers[ii], target);
                      }
                    }
                  }
                  function _tryCatch(fn, arg) {
                    try {
                      fn(arg);
                    } catch (err) {
                      _logger__WEBPACK_IMPORTED_MODULE_2__.A.error(err);
                    }
                  }
                })
              ),
              /***/
              5183: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      idMap
                    ),
                    r: () => (
                      /* binding */
                      legacyIdMap
                    )
                  });
                  var gmail_namespaceObject = {};
                  __webpack_require__2.r(gmail_namespaceObject);
                  __webpack_require__2.d(gmail_namespaceObject, {
                    app_sidebar: () => gmail.nc,
                    app_sidebar_container: () => gmail.zC,
                    app_sidebar_content_area: () => gmail.th,
                    app_sidebar_content_panel: () => gmail.E3,
                    app_sidebar_content_panel_content: () => gmail.i1,
                    app_sidebar_content_panel_grip: () => gmail.PD,
                    app_sidebar_content_panel_title: () => gmail.Pl,
                    app_sidebar_content_panel_title_icon: () => gmail.lt,
                    app_sidebar_content_panel_title_icon_container: () => gmail.x1,
                    app_sidebar_content_panel_title_text: () => gmail.bh,
                    app_sidebar_content_panel_toggle: () => gmail.V,
                    app_sidebar_content_panel_toggle_button: () => gmail.Y8,
                    app_sidebar_content_panel_top_line: () => gmail.T6,
                    app_sidebar_in_use: () => gmail.JR,
                    app_sidebar_main: () => gmail.dG,
                    app_sidebar_waiting_platform: () => gmail.$8,
                    companion_container_app_sidebar_in_use: () => gmail.OW,
                    container_app_sidebar_no_icons: () => gmail.qX,
                    "default": () => style_gmail,
                    dragged: () => gmail.rz,
                    expanded: () => gmail.sz,
                    hideTitleBar: () => gmail.uj,
                    showControls: () => gmail.mz,
                    sidebar_button_container: () => gmail.Go,
                    sidebar_iconArea: () => gmail.Yf,
                    thread_noticeBar: () => gmail.vQ
                  });
                  var injectStylesIntoStyleTag = __webpack_require__2(6186);
                  var injectStylesIntoStyleTag_default = /* @__PURE__ */ __webpack_require__2.n(injectStylesIntoStyleTag);
                  var styleDomAPI = __webpack_require__2(2155);
                  var styleDomAPI_default = /* @__PURE__ */ __webpack_require__2.n(styleDomAPI);
                  var setAttributesWithoutAttributes = __webpack_require__2(8626);
                  var setAttributesWithoutAttributes_default = /* @__PURE__ */ __webpack_require__2.n(setAttributesWithoutAttributes);
                  var insertStyleElement = __webpack_require__2(8990);
                  var insertStyleElement_default = /* @__PURE__ */ __webpack_require__2.n(insertStyleElement);
                  var styleTagTransform = __webpack_require__2(9827);
                  var styleTagTransform_default = /* @__PURE__ */ __webpack_require__2.n(styleTagTransform);
                  var gmail = __webpack_require__2(7510);
                  ;
                  var options = {};
                  options.styleTagTransform = styleTagTransform_default();
                  options.setAttributes = setAttributesWithoutAttributes_default();
                  options.insert = (htmlElement) => {
                    htmlElement.setAttribute(
                      "data-inboxsdk-version",
                      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- this is injected by webpack
                      ///@ts-ignore
                      "2.2.11-1764118012397-e51ed7952926d731"
                    );
                    document.head.append(htmlElement);
                  };
                  options.domAPI = styleDomAPI_default();
                  options.insertStyleElement = insertStyleElement_default();
                  var update = injectStylesIntoStyleTag_default()(gmail.Ay, options);
                  const style_gmail = gmail.Ay && gmail.Ay.locals ? gmail.Ay.locals : void 0;
                  var sha256 = __webpack_require__2(6049);
                  var sha256_default = /* @__PURE__ */ __webpack_require__2.n(sha256);
                  ;
                  const cache = /* @__PURE__ */ new Map();
                  let seed = null;
                  function legacyIdMap(name) {
                    const id = cache.get(name);
                    if (id != null) return id;
                    if (seed == null) {
                      seed = document.documentElement.getAttribute("data-map-id");
                      if (seed == null) {
                        const hasher2 = new (sha256_default())();
                        hasher2.update("PWVe" + Math.floor(Date.now() / (1e3 * 60 * 60)) + "PYiE0");
                        seed = hasher2.digest("hex").slice(0, 16) + (false ? 0 : "");
                        document.documentElement.setAttribute("data-map-id", seed);
                      }
                    }
                    const hasher = new (sha256_default())();
                    hasher.update("4iYi29W" + name + ":" + seed + "jn2mPvTG");
                    const newId = hasher.digest("hex").slice(0, 16).replace(/[0-9]/g, (match) => String.fromCharCode("A".charCodeAt(0) + Number(match)));
                    cache.set(name, newId);
                    return newId;
                  }
                  function idMap(id) {
                    return gmail_namespaceObject[id];
                  }
                })
              ),
              /***/
              3174: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7332);
                  var auto_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(1812);
                  var auto_html__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(auto_html__WEBPACK_IMPORTED_MODULE_1__);
                  module2 = __webpack_require__2.hmd(module2);
                  var insertLinkChipIntoBody = ud__WEBPACK_IMPORTED_MODULE_0__.defn(module2, function(composeViewDriver, options) {
                    composeViewDriver.focus();
                    var chipElement = _getChipElement(options);
                    var frag = document.createDocumentFragment();
                    frag.appendChild(document.createTextNode("\u200B"));
                    frag.appendChild(chipElement);
                    frag.appendChild(document.createTextNode("\u200B"));
                    composeViewDriver.insertBodyHTMLAtCursor(frag);
                    if (!composeViewDriver.isFullscreen() && !composeViewDriver.isInlineReplyForm() && document.activeElement !== composeViewDriver.getBodyElement()) {
                      composeViewDriver.setMinimized(true);
                      composeViewDriver.setMinimized(false);
                    }
                    composeViewDriver.focus();
                    return chipElement;
                  });
                  const __WEBPACK_DEFAULT_EXPORT__ = insertLinkChipIntoBody;
                  function _getChipElement(options) {
                    var chipElement = document.createElement("div");
                    var iconHtml = options.iconUrl ? auto_html__WEBPACK_IMPORTED_MODULE_1___default()`
<img style="height:16px; width:16px; vertical-align: bottom; border: none;" height="16px" width="16px" src="${options.iconUrl}">&nbsp;
` : "";
                    var chipHTML = auto_html__WEBPACK_IMPORTED_MODULE_1___default()`
<div contenteditable="false" class="inboxsdk__compose_linkChip"
style="width: 396px; height: 18px; max-height: 18px; padding: 5px; color: rgb(34, 34, 34); font-family: arial; font-style: normal; font-weight: bold; font-size: 13px; cursor: default; border: 1px solid rgb(221, 221, 221); line-height: 1; background-color: rgb(245, 245, 245);" hspace="inboxsdk__chip_main">
  <a href="${options.url}" target="_blank" style=" display:inline-block; max-width: 366px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-height: 1.2em; text-decoration: none; cursor: pointer; padding: 1px 0; border: none; ">
    ${{
                      __html: iconHtml
                    }}
    <span dir="ltr" style="color: rgb(17, 85, 204); text-decoration: none; vertical-align: bottom;">${options.text}</span>
  </a>
</div>
`;
                    chipElement.innerHTML = chipHTML;
                    return chipElement.children[0];
                  }
                })
              ),
              /***/
              8579: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      isStreakAppId
                    )
                    /* harmony export */
                  });
                  var sha_js_sha256__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(6049);
                  var sha_js_sha256__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(sha_js_sha256__WEBPACK_IMPORTED_MODULE_0__);
                  function hash(x) {
                    const hasher = new (sha_js_sha256__WEBPACK_IMPORTED_MODULE_0___default())();
                    hasher.update("bdnanNrDjv" + x);
                    return hasher.digest("hex").slice(0, 32);
                  }
                  function isStreakAppId(appId) {
                    return hash(appId) === "f471fe7b7343b47a202437c3962cc335";
                  }
                })
              ),
              /***/
              2617: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  var _appId, _isMaster;
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      Logger
                    )
                  });
                  var sha256 = __webpack_require__2(6049);
                  var sha256_default = /* @__PURE__ */ __webpack_require__2.n(sha256);
                  var ajax = __webpack_require__2(8587);
                  var once = __webpack_require__2(8921);
                  var once_default = /* @__PURE__ */ __webpack_require__2.n(once);
                  ;
                  const getExtensionId = once_default()(() => {
                    try {
                      const chrome2 = globalThis.chrome;
                      if (chrome2?.runtime?.getURL) {
                        return chrome2.runtime.getURL("");
                      }
                      if (chrome2?.extension?.getURL) {
                        return chrome2.extension.getURL("");
                      }
                    } catch (e) {
                      console.error("Failed to read extension ID:", e);
                    }
                    return null;
                  });
                  getExtensionId();
                  const get_extension_id = getExtensionId;
                  ;
                  function getSessionId() {
                    const attrValue = typeof document !== "undefined" && document.documentElement.getAttribute("data-inboxsdk-session-id");
                    if (typeof attrValue === "string") {
                      return attrValue;
                    } else {
                      const sessionId2 = Date.now() + "-" + Math.random();
                      if (typeof document !== "undefined") {
                        document.documentElement.setAttribute("data-inboxsdk-session-id", sessionId2);
                      }
                      return sessionId2;
                    }
                  }
                  ;
                  function rateLimit(fn, period, count) {
                    let calls = [];
                    return function() {
                      const now = Date.now();
                      calls = calls.filter((time) => time > now - period);
                      if (calls.length >= count) {
                        throw new Error("Function rate limit exceeded");
                      }
                      calls.push(now);
                      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                        args[_key] = arguments[_key];
                      }
                      return fn.apply(this, args);
                    };
                  }
                  ;
                  function getStackTrace() {
                    const err = new Error("Stack saver");
                    return ("" + err.stack).replace(/^([^\n]*\n){2}/, "");
                  }
                  var version = __webpack_require__2(4782);
                  var isObject = __webpack_require__2(5603);
                  var isObject_default = /* @__PURE__ */ __webpack_require__2.n(isObject);
                  ;
                  const sessionId = getSessionId();
                  function logError(err, details, context) {
                    if (typeof document === "undefined") {
                      throw err;
                    }
                    try {
                      if (haveWeSeenThisErrorAlready(err)) {
                        return;
                      } else {
                        markErrorAsSeen(err);
                      }
                      if (!(err instanceof Error)) {
                        console.warn("First parameter to Logger.error was not an error object:", err);
                        err = new Error("Logger.error called with non-error: " + err);
                        markErrorAsSeen(err);
                      }
                      const {
                        appIds,
                        implVersion,
                        userEmailHash
                      } = context;
                      const loaderVersion = context.loaderVersion || version.Q;
                      const sentByApp = !!context.sentByApp;
                      const errorProperties = {};
                      for (const name in err) {
                        if (Object.prototype.hasOwnProperty.call(err, name)) {
                          try {
                            const value = err[name];
                            JSON.stringify(value);
                            errorProperties[name] = value;
                          } catch (err2) {
                          }
                        }
                      }
                      if (Object.keys(errorProperties).length > 0) {
                        details = {
                          errorProperties,
                          details
                        };
                      }
                      const nowStack = getStackTrace();
                      const stuffToLog = ["Error logged:", err];
                      if (details) {
                        stuffToLog.push("\n\nError details:", details);
                      }
                      stuffToLog.push(`

Extension App Ids: ${JSON.stringify(appIds, null, 2)}
Sent by App: ${sentByApp}
Session Id: ${sessionId}
Extension Id: ${get_extension_id()}
InboxSDK Loader Version: ${loaderVersion}
InboxSDK Implementation Version: ${implVersion}`);
                      console.error(...stuffToLog);
                      const report = {
                        message: err && err.message || err,
                        stack: err && err.stack,
                        loggedFrom: nowStack,
                        details,
                        appIds,
                        sentByApp,
                        sessionId,
                        emailHash: userEmailHash,
                        extensionId: get_extension_id(),
                        loaderVersion,
                        implementationVersion: implVersion,
                        origin: document.location.origin,
                        timestamp: Date.now() * 1e3
                      };
                      sendError(report);
                      if (document.documentElement.getAttribute("inboxsdk-emit-error-event") === "true") {
                        document.documentElement.dispatchEvent(new CustomEvent("inboxSDKerror", {
                          bubbles: false,
                          cancelable: false,
                          detail: {
                            message: err && err.message || err,
                            stack: err && err.stack,
                            loggedFrom: nowStack,
                            details,
                            sentByApp
                          }
                        }));
                      }
                    } catch (err2) {
                      tooManyErrors(err2, [err, details, context]);
                    }
                  }
                  const _extensionSeenErrors = (() => {
                    if (!__webpack_require__2.g.__inboxsdk_extensionSeenErrors && __webpack_require__2.g.WeakMap) {
                      Object.defineProperty(__webpack_require__2.g, "__inboxsdk_extensionSeenErrors", {
                        value: new __webpack_require__2.g.WeakMap()
                      });
                    }
                    return {
                      has(e) {
                        if (__webpack_require__2.g.__inboxsdk_extensionSeenErrors) {
                          return __webpack_require__2.g.__inboxsdk_extensionSeenErrors.has(e);
                        } else {
                          try {
                            return !!e.__inboxsdk_extensionHasSeenError;
                          } catch (err) {
                            console.error(err);
                            return false;
                          }
                        }
                      },
                      add(e) {
                        if (__webpack_require__2.g.__inboxsdk_extensionSeenErrors && __webpack_require__2.g.__inboxsdk_extensionSeenErrors.set) {
                          __webpack_require__2.g.__inboxsdk_extensionSeenErrors.set(e, true);
                        } else if (__webpack_require__2.g.__inboxsdk_extensionSeenErrors && __webpack_require__2.g.__inboxsdk_extensionSeenErrors.add) {
                          __webpack_require__2.g.__inboxsdk_extensionSeenErrors.add(e);
                        } else {
                          try {
                            Object.defineProperty(e, "__inboxsdk_extensionHasSeenError", {
                              value: true
                            });
                          } catch (err) {
                            console.error(err);
                          }
                        }
                      }
                    };
                  })();
                  function haveWeSeenThisErrorAlready(error) {
                    if (isObject_default()(error)) {
                      return _extensionSeenErrors.has(error);
                    }
                    return false;
                  }
                  function markErrorAsSeen(error) {
                    if (isObject_default()(error)) {
                      _extensionSeenErrors.add(error);
                    }
                  }
                  const sendError = rateLimit(function(report) {
                    try {
                      (0, ajax.A)({
                        url: "https://api.inboxsdk.com/api/v2/errors",
                        method: "POST",
                        headers: {
                          "Content-Type": "application/json"
                        },
                        data: JSON.stringify(report)
                      }).catch((err2) => {
                        tooManyErrors(err2, [report]);
                      });
                    } catch (err2) {
                      tooManyErrors(err2, [report]);
                    }
                  }, 60 * 1e3, 10);
                  function tooManyErrors(err2, originalArgs) {
                    console.error("ERROR REPORTING ERROR", err2);
                    console.error("ORIGINAL ERROR", originalArgs);
                  }
                  ;
                  class PersistentQueue {
                    constructor(id) {
                      __publicField(this, "_fallbackQueue", []);
                      this._sid = "inboxsdk__persistentqueue_" + id;
                    }
                    _getSavedQueue() {
                      let queue = JSON.parse(localStorage.getItem(this._sid));
                      if (queue == null) {
                        queue = [];
                      }
                      return queue;
                    }
                    _putSavedQueue(queue) {
                      localStorage.setItem(this._sid, JSON.stringify(queue));
                    }
                    _clearSavedQueue() {
                      localStorage.removeItem(this._sid);
                    }
                    add(val) {
                      let success = false;
                      if (typeof localStorage !== "undefined") {
                        try {
                          const queue = this._getSavedQueue();
                          queue.push(val);
                          this._putSavedQueue(queue);
                          success = true;
                        } catch (e) {
                        }
                      }
                      if (!success) {
                        this._fallbackQueue.push(val);
                      }
                    }
                    remove() {
                      let ret;
                      if (typeof localStorage !== "undefined") {
                        try {
                          const queue = this._getSavedQueue();
                          const tmpRet = queue.shift();
                          this._putSavedQueue(queue);
                          ret = tmpRet;
                        } catch (e) {
                        }
                      }
                      if (ret === void 0) {
                        ret = this._fallbackQueue.shift();
                      }
                      return ret;
                    }
                    removeAll() {
                      let ret = void 0;
                      if (typeof localStorage !== "undefined") {
                        try {
                          const queue = this._getSavedQueue();
                          this._clearSavedQueue();
                          ret = queue;
                        } catch (e) {
                        }
                      }
                      if (ret === void 0) {
                        ret = [];
                      }
                      ret = ret.concat(this._fallbackQueue);
                      this._fallbackQueue = [];
                      return ret;
                    }
                    peekAll() {
                      let ret = void 0;
                      if (typeof localStorage !== "undefined") {
                        try {
                          ret = this._getSavedQueue();
                        } catch (e) {
                        }
                      }
                      if (ret === void 0) {
                        ret = [];
                      }
                      ret = ret.concat(this._fallbackQueue);
                      return ret;
                    }
                    clear() {
                      if (typeof localStorage !== "undefined") {
                        try {
                          this._clearSavedQueue();
                        } catch (e) {
                        }
                      }
                      this._fallbackQueue.length = 0;
                    }
                  }
                  var make_mutation_observer_stream = __webpack_require__2(5938);
                  var src = __webpack_require__2(9482);
                  var isStreakAppId = __webpack_require__2(8579);
                  ;
                  var Buffer2 = __webpack_require__2(2313)["Buffer"];
                  const _extensionAppIds = [];
                  let _extensionLoaderVersion;
                  let _extensionImplVersion;
                  let _extensionUserEmailHash;
                  let _extensionUseEventTracking = false;
                  const _sessionId = getSessionId();
                  const _loggedDeprecatedMessages = /* @__PURE__ */ new Set();
                  const _extensionIsLoggerMaster = (function() {
                    if (typeof document === "undefined") {
                      return true;
                    }
                    if (document.documentElement.hasAttribute("data-inboxsdk-master-claimed")) {
                      return false;
                    } else {
                      document.documentElement.setAttribute("data-inboxsdk-master-claimed", "true");
                      return true;
                    }
                  })();
                  function getAllAppIds() {
                    const str = typeof document !== "undefined" && document.documentElement.getAttribute("data-inboxsdk-active-app-ids") || "[]";
                    return JSON.parse(str);
                  }
                  const _trackedEventsQueue = new PersistentQueue("events");
                  const FIRST_LOADED_TIME = Date.now();
                  const _Logger = class _Logger {
                    constructor(appId, opts, loaderVersion, implVersion) {
                      __privateAdd(this, _appId);
                      __privateAdd(this, _isMaster);
                      _extensionLoggerSetup(appId, opts, loaderVersion, implVersion);
                      __privateSet(this, _appId, appId);
                      __privateSet(this, _isMaster, (() => {
                        if (!_extensionUseEventTracking || typeof document !== "undefined" && document.documentElement.hasAttribute("data-inboxsdk-app-logger-master-chosen")) {
                          return false;
                        } else {
                          document.documentElement.setAttribute("data-inboxsdk-app-logger-master-chosen", "true");
                          return true;
                        }
                      })());
                      if (__privateGet(this, _isMaster) && typeof document !== "undefined") {
                        document.addEventListener("inboxSDKinjectedError", (event) => {
                          if (!(event instanceof CustomEvent && event?.detail)) {
                            this.error(new Error("Invalid inboxSDKinjectedError event"), event);
                            return;
                          }
                          const detail = event.detail;
                          this.error(Object.assign(new Error(detail.message), {
                            stack: detail.stack
                          }), detail.details);
                        });
                        document.addEventListener("inboxSDKinjectedEventSdkPassive", (event) => {
                          const detail = event.detail;
                          this.eventSdkPassive(detail.name, detail.details, detail.sensitive);
                        });
                      }
                    }
                    setUserEmailAddress(email) {
                      _extensionUserEmailHash = hashEmail(email);
                    }
                    shouldTrackEverything() {
                      return _extensionUserEmailHash === "ca05afe92819df590a4196c31814fdb24050e8f49d8a41613f3d6cfb5729c785";
                    }
                    static run(cb, details) {
                      try {
                        return cb();
                      } catch (err) {
                        _Logger.error(err, details);
                        throw err;
                      }
                    }
                    run(cb, details) {
                      try {
                        return cb();
                      } catch (err) {
                        this.error(err, details);
                        throw err;
                      }
                    }
                    static error(err, details) {
                      _logError(err, details, void 0, false);
                    }
                    error(err, details) {
                      _logError(err, details, __privateGet(this, _appId), false);
                    }
                    errorApp(err, details) {
                      _logError(err, details, __privateGet(this, _appId), true);
                    }
                    /** Only the first logger instance reports Site errors. */
                    errorSite(err, details) {
                      if (!__privateGet(this, _isMaster)) {
                        return;
                      }
                      this.error(err, details);
                    }
                    /** Should only be used by the InboxSDK users for their own app events. */
                    eventApp(name, details) {
                      _trackEvent(__privateGet(this, _appId), "app", name, details);
                    }
                    /**
                     * For tracking app events that are possibly triggered by the user. Extensions
                     * can opt out of this with a flag passed to InboxSDK.load().
                     */
                    eventSdkActive(name, details) {
                      if (!_extensionUseEventTracking) {
                        return;
                      }
                      _trackEvent(__privateGet(this, _appId), "sdkActive", name, details);
                    }
                    // Track events unrelated to user activity about how the app uses the SDK.
                    // Examples include the app being initialized, and calls to any of the
                    // register___ViewHandler functions.
                    eventSdkPassive(name, details, sensitive) {
                      if (sensitive && !(0, isStreakAppId.A)(__privateGet(this, _appId))) {
                        return;
                      }
                      _trackEvent(__privateGet(this, _appId), "sdkPassive", name, details);
                    }
                    // Track Site events.
                    eventSite(name, details) {
                      if (!__privateGet(this, _isMaster)) {
                        return;
                      }
                      _trackEvent(__privateGet(this, _appId), "gmail", name, details);
                    }
                    deprecationWarning(name, suggestion) {
                      console.warn(`InboxSDK: ${name} is deprecated.` + (suggestion ? ` Please use ${suggestion} instead.` : ""));
                      const key = name + (suggestion ? ":" + suggestion : "");
                      if (!_loggedDeprecatedMessages.has(key)) {
                        this.eventSdkPassive(`deprecated.${name}`);
                        _loggedDeprecatedMessages.add(key);
                      }
                    }
                    getAppLogger() {
                      return {
                        error: (err, details) => this.errorApp(err, details),
                        event: (name, details) => this.eventApp(name, details)
                      };
                    }
                    trackFunctionPerformance(fn, sampleRate, details) {
                      if (Math.random() < sampleRate && document.visibilityState === "visible" && __privateGet(this, _isMaster)) {
                        const start = Date.now();
                        fn();
                        setTimeout(() => {
                          const now = Date.now();
                          this.eventSdkPassive("function performance result", {
                            value: now - start,
                            timeSinceFirstLoad: now - FIRST_LOADED_TIME,
                            ...details
                          });
                        }, 10);
                      } else {
                        fn();
                      }
                    }
                  };
                  _appId = new WeakMap();
                  _isMaster = new WeakMap();
                  let Logger = _Logger;
                  function _extensionLoggerSetup(appId, opts, loaderVersion, implVersion) {
                    _extensionAppIds.push(Object.freeze({
                      appId,
                      version: opts.appVersion || void 0
                    }));
                    document.documentElement.setAttribute("data-inboxsdk-active-app-ids", JSON.stringify(getAllAppIds().concat([{
                      appId,
                      version: opts.appVersion || void 0
                    }])));
                    if (_extensionLoaderVersion) {
                      return;
                    }
                    _extensionLoaderVersion = loaderVersion;
                    _extensionImplVersion = implVersion;
                    _extensionUseEventTracking = opts.eventTracking;
                    if (opts.globalErrorLogging) {
                      if (Error.stackTraceLimit < 40) {
                        Error.stackTraceLimit = 40;
                      }
                      window.addEventListener("error", function(event) {
                        if (event.error) {
                          Logger.error(event.error, "Uncaught exception");
                        }
                      });
                      replaceFunction(window, "setTimeout", function(original) {
                        return function wrappedSetTimeout() {
                          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                            args[_key] = arguments[_key];
                          }
                          if (typeof args[0] == "function") {
                            args[0] = makeLoggedFunction(args[0], "setTimeout callback");
                          }
                          return original.apply(this, args);
                        };
                      });
                      replaceFunction(window, "setInterval", function(original) {
                        return function wrappedSetInterval() {
                          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                            args[_key2] = arguments[_key2];
                          }
                          if (typeof args[0] == "function") {
                            args[0] = makeLoggedFunction(args[0], "setInterval callback");
                          }
                          return original.apply(this, args);
                        };
                      });
                      const ETp = window.EventTarget && window.EventTarget.prototype || window.Node.prototype;
                      replaceFunction(ETp, "addEventListener", function(original) {
                        return function wrappedAddEventListener() {
                          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
                            args[_key3] = arguments[_key3];
                          }
                          if (typeof args[1] == "function") {
                            try {
                              let loggedFn = args[1].__inboxsdk_logged;
                              if (!loggedFn) {
                                loggedFn = makeLoggedFunction(args[1], "event listener");
                                args[1].__inboxsdk_logged = loggedFn;
                              }
                              args[1] = loggedFn;
                            } catch (e) {
                              console.error("Failed to error wrap function", e);
                            }
                          }
                          return original.apply(this, args);
                        };
                      });
                      replaceFunction(ETp, "removeEventListener", function(original) {
                        return function wrappedRemoveEventListener() {
                          for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
                            args[_key4] = arguments[_key4];
                          }
                          if (typeof args[1] == "function" && args[1].__inboxsdk_logged) {
                            args[1] = args[1].__inboxsdk_logged;
                          }
                          return original.apply(this, args);
                        };
                      });
                      replaceFunction(window, "MutationObserver", function(Original) {
                        Original = Original || window.WebKitMutationObserver;
                        function WrappedMutationObserver() {
                          for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
                            args[_key5] = arguments[_key5];
                          }
                          if (typeof args[0] == "function") {
                            args[0] = makeLoggedFunction(args[0], "MutationObserver callback");
                          }
                          if (Original.bind && Original.bind.apply) {
                            return new (Original.bind.apply(Original, [null].concat(args)))();
                          } else {
                            return new Original(args[0]);
                          }
                        }
                        WrappedMutationObserver.prototype = Original.prototype;
                        return WrappedMutationObserver;
                      });
                    }
                  }
                  function getAppIdsProperty(causedByAppId) {
                    let onlyExtensionApps = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
                    const appIds = onlyExtensionApps ? _extensionAppIds : getAllAppIds();
                    if (!causedByAppId) {
                      return appIds;
                    } else {
                      const appIdsWithCause = appIds.slice();
                      let hasSetCause = false;
                      appIdsWithCause.forEach((entry, i) => {
                        if (!hasSetCause && entry.appId === causedByAppId) {
                          hasSetCause = true;
                          appIdsWithCause[i] = {
                            ...entry,
                            causedBy: true
                          };
                        }
                        Object.freeze(appIdsWithCause[i]);
                      });
                      return Object.freeze(appIdsWithCause);
                    }
                  }
                  function _logError(err, details, appId, sentByApp) {
                    logError(err, details, {
                      appId,
                      sentByApp,
                      appIds: getAppIdsProperty(appId),
                      loaderVersion: _extensionLoaderVersion,
                      implVersion: _extensionImplVersion,
                      userEmailHash: _extensionUserEmailHash
                    });
                  }
                  function makeLoggedFunction(func, name) {
                    const msg = name ? "Uncaught error in " + name : "Uncaught error";
                    return function() {
                      for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
                        args[_key6] = arguments[_key6];
                      }
                      return Logger.run(() => func.apply(this, args), msg);
                    };
                  }
                  function replaceFunction(parent, name, newFnMaker) {
                    const newFn = newFnMaker(parent[name]);
                    newFn.__original = parent[name];
                    parent[name] = newFn;
                  }
                  function hashEmail(str) {
                    const hasher = new (sha256_default())();
                    hasher.update("inboxsdk:" + str);
                    return hasher.digest("hex");
                  }
                  function _trackEvent(appId, type, eventName, properties) {
                    if (properties && typeof properties != "object") {
                      throw new Error("properties must be object or null: " + properties);
                    }
                    const event = {
                      type,
                      event: eventName,
                      timestamp: Date.now() * 1e3,
                      origin: document.location.origin,
                      sessionId: _sessionId,
                      emailHash: _extensionUserEmailHash,
                      loaderVersion: _extensionLoaderVersion,
                      implementationVersion: _extensionImplVersion,
                      properties
                    };
                    if (type != "gmail") {
                      Object.assign(event, {
                        extensionId: get_extension_id(),
                        appIds: getAppIdsProperty(appId)
                      });
                    } else {
                      Object.assign(event, {
                        appIds: getAppIdsProperty(null, false)
                      });
                    }
                    if (typeof document === "undefined") {
                      return;
                    }
                    _trackedEventsQueue.add(event);
                    document.documentElement.setAttribute("data-inboxsdk-last-event", "" + Date.now());
                  }
                  let currentAccessToken = null;
                  function isTimestampExpired(n) {
                    return Date.now() + 10 * 60 * 1e3 > n;
                  }
                  async function retrieveNewEventsAccessToken() {
                    const {
                      text
                    } = await (0, ajax.A)({
                      url: "https://api.inboxsdk.com/api/v2/events/oauth",
                      // Work around CORB for extensions that have permissions to inboxsdk.com
                      XMLHttpRequest: (0, src.np)()
                    });
                    const accessToken = JSON.parse(text);
                    if (isTimestampExpired(accessToken.expirationDate)) {
                      console.warn("Got an apparently already expired token. Assuming our clock is busted...");
                      accessToken.expirationDate = Date.now() + 30 * 60 * 1e3;
                    }
                    return accessToken;
                  }
                  async function getEventsAccessToken() {
                    const t2 = currentAccessToken;
                    if (t2 && !isTimestampExpired(t2.expirationDate)) {
                      return t2;
                    } else {
                      currentAccessToken = await retrieveNewEventsAccessToken();
                      return currentAccessToken;
                    }
                  }
                  if (_extensionIsLoggerMaster && typeof document !== "undefined" && typeof MutationObserver !== "undefined") {
                    (0, make_mutation_observer_stream.A)(document.documentElement, {
                      attributes: true,
                      attributeFilter: ["data-inboxsdk-last-event"]
                    }).map(() => null).throttle(120 * 1e3).onValue(function() {
                      const events = _trackedEventsQueue.removeAll();
                      if (events.length === 0) {
                        return;
                      }
                      (async function() {
                        const {
                          oauthToken
                        } = await getEventsAccessToken();
                        const apiKey = "AIzaSyAwlvUR2x3OnCeas8hW8NDzVMswL5hZGg8";
                        await (0, ajax.A)({
                          url: `https://pubsub.googleapis.com/v1/projects/mailfoogae/topics/events:publish?key=${encodeURIComponent(apiKey)}`,
                          method: "POST",
                          headers: {
                            Authorization: `Bearer ${oauthToken}`,
                            "Content-Type": "application/json"
                          },
                          data: JSON.stringify({
                            messages: [{
                              data: Buffer2.from(JSON.stringify({
                                data: events,
                                timestamp: Date.now() * 1e3
                              })).toString("base64")
                            }]
                          })
                        });
                      })().catch((err) => {
                        Logger.error(err, {
                          type: "Failed to log events"
                        });
                      });
                    });
                  }
                })
              ),
              /***/
              2788: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      SafeEventEmitter
                    )
                    /* harmony export */
                  });
                  var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(4785);
                  var events__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(events__WEBPACK_IMPORTED_MODULE_0__);
                  var _logger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(2617);
                  class SafeEventEmitter extends events__WEBPACK_IMPORTED_MODULE_0___default() {
                    emit(_event) {
                      for (var _len = arguments.length, _args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                        _args[_key - 1] = arguments[_key];
                      }
                      try {
                        return super.emit.apply(this, arguments);
                      } catch (e) {
                        _logger__WEBPACK_IMPORTED_MODULE_1__.A.error(e);
                        return true;
                      }
                    }
                  }
                })
              ),
              /***/
              1539: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      streamWaitFor
                    )
                    /* harmony export */
                  });
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  function streamWaitFor(condition) {
                    let timeout = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 60 * 1e3;
                    let steptime = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 250;
                    const timeoutError = new Error("waitFor timeout");
                    const timeoutStream = kefir__WEBPACK_IMPORTED_MODULE_0__.later(timeout, null).flatMap(() => {
                      const result = condition();
                      if (result) {
                        return kefir__WEBPACK_IMPORTED_MODULE_0__.constant(result);
                      }
                      setTimeout(() => {
                        throw timeoutError;
                      }, 0);
                      return kefir__WEBPACK_IMPORTED_MODULE_0__.constantError(timeoutError);
                    });
                    const isTruthy = Boolean;
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.later(0, null).merge(kefir__WEBPACK_IMPORTED_MODULE_0__.interval(steptime, null)).map(() => condition()).filter(isTruthy).merge(timeoutStream).take(1).takeErrors(1);
                  }
                })
              ),
              /***/
              370: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      toItemWithLifetimeStream
                    )
                    /* harmony export */
                  });
                  var live_set_toValueObservable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(3507);
                  var live_set_toValueObservable__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(live_set_toValueObservable__WEBPACK_IMPORTED_MODULE_1__);
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  function toItemWithLifetimeStream(liveSet) {
                    return kefir__WEBPACK_IMPORTED_MODULE_0__.fromESObservable(live_set_toValueObservable__WEBPACK_IMPORTED_MODULE_1___default()(liveSet).map((event) => {
                      const removal = event.removal;
                      const removalStream = kefir__WEBPACK_IMPORTED_MODULE_0__.fromPromise(removal);
                      return {
                        el: event.value,
                        removalStream
                      };
                    }));
                  }
                })
              ),
              /***/
              5156: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      waitFor
                    ),
                    /* harmony export */
                    D: () => (
                      /* binding */
                      WaitForError
                    )
                    /* harmony export */
                  });
                  class WaitForError extends Error {
                    constructor() {
                      super("waitFor timeout");
                      __publicField(this, "name", "WaitForError");
                    }
                  }
                  function waitFor(condition) {
                    let timeout = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 120 * 1e3;
                    let steptime = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 250;
                    const timeoutError = new WaitForError();
                    return new Promise(function(resolve, reject) {
                      let waited = 0;
                      function step() {
                        try {
                          const result = condition();
                          if (result) {
                            resolve(result);
                          } else {
                            if (waited >= timeout) {
                              reject(timeoutError);
                            } else {
                              waited += steptime;
                              setTimeout(step, steptime);
                            }
                          }
                        } catch (e) {
                          reject(e);
                        }
                      }
                      setTimeout(step, 1);
                    });
                  }
                })
              ),
              /***/
              130: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.r(__webpack_exports__2);
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  if (!globalThis.__InboxSDKImpLoader) {
                    var piMainStarted = Date.now();
                    var wasAccountSwitcherReadyAtStart = !!document.querySelector('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."], [role=banner]+div div[aria-label] div div a[href^="https://myaccount.google."]');
                    var onready = new Promise((resolve) => {
                      if (document.readyState === "complete" || document.readyState === "interactive") {
                        resolve(null);
                      } else {
                        resolve(kefir__WEBPACK_IMPORTED_MODULE_0__["default"].merge([kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(document, "DOMContentLoaded"), kefir__WEBPACK_IMPORTED_MODULE_0__["default"].fromEvents(window, "load")]).take(1).map(() => null).toPromise());
                      }
                    });
                    globalThis.__InboxSDKImpLoader = {
                      async load(version, appId, opts) {
                        if (version !== "0.1") {
                          throw new Error("Unsupported InboxSDK version");
                        }
                        if (appId === "dropbox") {
                          throw new Error("No longer supported");
                        }
                        if (location.hostname === "mail.google.com" && location.pathname.endsWith("/popout")) {
                          throw new URIError(`@inboxsdk/core doesn't currently support Gmail pop out windows. See
              https://github.com/InboxSDK/InboxSDK/issues/1062#issuecomment-1821327292 for context on why we'd be open to supporting them.`);
                        }
                        var piLoadStarted = Date.now();
                        await onready;
                        const {
                          makePlatformImplementation
                        } = await Promise.resolve(
                          /* import() eager */
                        ).then(__webpack_require__2.bind(__webpack_require__2, 932));
                        return makePlatformImplementation(appId, opts, {
                          piMainStarted,
                          piLoadStarted,
                          wasAccountSwitcherReadyAtStart
                        });
                      }
                    };
                  }
                })
              ),
              /***/
              1140: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      Compose
                    )
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(7332);
                  var kefir__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(7249);
                  var _common_get_or_fail__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__2(4531);
                  var _lib_handler_registry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(3247);
                  module2 = __webpack_require__2.hmd(module2);
                  const memberMap = ud__WEBPACK_IMPORTED_MODULE_2__.defonce(module2, () => /* @__PURE__ */ new WeakMap());
                  const SAMPLE_RATE = 0.01;
                  class Compose {
                    constructor(driver, membrane) {
                      const members = {
                        driver,
                        membrane,
                        handlerRegistry: new _lib_handler_registry__WEBPACK_IMPORTED_MODULE_1__.A(),
                        composeViewStream: driver.getComposeViewDriverStream().map((viewDriver) => membrane.get(viewDriver))
                      };
                      memberMap.set(this, members);
                      driver.getStopper().onValue(() => {
                        members.handlerRegistry.dumpHandlers();
                      });
                      members.composeViewStream.onValue((view) => {
                        driver.getLogger().trackFunctionPerformance(() => {
                          members.handlerRegistry.addTarget(view);
                        }, SAMPLE_RATE, {
                          type: "composeViewHandler",
                          isInlineReplyForm: view.isInlineReplyForm()
                        });
                      });
                    }
                    registerComposeViewHandler(handler) {
                      return (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_3__.A)(memberMap, this).handlerRegistry.registerHandler(handler);
                    }
                    async openNewComposeView() {
                      const members = (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_3__.A)(memberMap, this);
                      const composeViewDriver = await members.driver.openNewComposeViewDriver();
                      return members.membrane.get(composeViewDriver);
                    }
                    async openDraftByMessageID(messageID) {
                      const members = (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_3__.A)(memberMap, this);
                      const newComposePromise = members.composeViewStream.take(1).toPromise();
                      await members.driver.openDraftByMessageID(messageID);
                      return kefir__WEBPACK_IMPORTED_MODULE_0__.fromPromise(newComposePromise).merge(kefir__WEBPACK_IMPORTED_MODULE_0__.later(15 * 1e3, null).flatMap(() => kefir__WEBPACK_IMPORTED_MODULE_0__.constantError(new Error("draft did not open in time")))).take(1).takeErrors(1).toPromise();
                    }
                    /** @deprecated Use {@link openNewComposeView} instead */
                    getComposeView() {
                      const {
                        driver
                      } = (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_3__.A)(memberMap, this);
                      driver.getLogger().deprecationWarning("Compose.getComposeView", "Compose.openNewComposeView");
                      if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return this.openNewComposeView();
                    }
                  }
                })
              ),
              /***/
              1351: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      keyboard
                    )
                  });
                  var js = __webpack_require__2(7332);
                  var get_or_fail = __webpack_require__2(4531);
                  var safe_event_emitter = __webpack_require__2(2788);
                  ;
                  class KeyboardShortcutHandle extends safe_event_emitter.A {
                    constructor(chord, description) {
                      super();
                      this.chord = chord;
                      this.description = description;
                    }
                    remove() {
                      this.emit("destroy");
                    }
                  }
                  ;
                  module2 = __webpack_require__2.hmd(module2);
                  const memberMap = js.defonce(module2, () => /* @__PURE__ */ new WeakMap());
                  class Keyboard {
                    constructor(appId, appName, appIconUrl, driver) {
                      const members = {
                        appId,
                        appName,
                        appIconUrl,
                        driver
                      };
                      memberMap.set(this, members);
                    }
                    createShortcutHandle(shortcutDescriptor) {
                      const members = (0, get_or_fail.A)(memberMap, this);
                      let {
                        chord,
                        description
                      } = shortcutDescriptor;
                      if (!chord) throw new Error("Keyboard.createShortcutHandle chord missing");
                      if (description == null) {
                        console.error("Keyboard.createShortcutHandle chord missing");
                        description = "";
                      }
                      const keyboardShortcutHandle = new KeyboardShortcutHandle(chord, description);
                      members.driver.activateShortcut(keyboardShortcutHandle, members.appName, members.appIconUrl);
                      return keyboardShortcutHandle;
                    }
                  }
                  const keyboard = Keyboard;
                })
              ),
              /***/
              932: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  var _attachmentCardImplementation, _driver, _membrane, _ContentPanelView_instances, bindToStreamEvents_fn, _threadViewImplementation, _appId, _driver2, _membrane2, _ThreadView_instances, bindToStreamEvents_fn2, _driver3, _linksInBody, _membrane3, _messageViewImplementation, _MessageView_instances, bindToEventStream_fn, _element, _driver4, _eventStream, _stopper, _threadViewDriver, _moreMenuItemDescriptors, _moreMenuAddedElements, _replyElementStream, _readyStream, _replyElement, _gmailAttachmentAreaView, _messageLoaded, _openMoreMenu, _sender, _recipients, _recipientEmailAddresses, _recipientsFull, _GmailMessageView_instances, setupMoreMenuWatching_fn, getMoreButton_fn, getOpenMoreMenu_fn, closeActiveEmailMenu_fn, updateMoreMenu_fn, setupMessageStateStream_fn, processInitialState_fn, checkMessageOpenState_fn, setupReplyStream_fn, monitorEmailAddressHovering_fn, getAttachmentArea_fn, createAttachmentArea_fn, getUpdatedContact_fn, _el, _iconEl, _contentEl, _contentHeaderEl, _contentBodyEl, _stopper2, _isCollapsed, _lastDescriptor, _element2, _routeViewDriver, _driver5, _isPreviewedThread, _eventStream2, _stopper3, _toolbarView, _messageViewDrivers, _newMessageMutationObserver, _readyStream2, _threadID, _syncThreadID, _customMessageViews, _hiddenCustomMessageViews, _hiddenCustomMessageNoticeProvider, _hiddenCustomMessageNoticeElement, _resolveUnmountHiddenNoticePromise, _subjectContainerSelectors, _subjectContainerSelectorsAfterNov162023, _subjectAISuggestionsContainerSelectors, _GmailThreadView_instances, setupHiddenCustomMessage_fn, updateHiddenNotice_fn, setupToolbarView_fn, findToolbarElement_fn, findSubjectToolbarElement_fn, findBottomReplyToolbarElement_fn, isToolbarContainerRelevant_fn, setupMessageViewStream_fn, initializeExistingMessages_fn, observeNewMessages_fn, handleNewMessageMutations_fn, createMessageView_fn, logAddonElementInfo_fn, listenToExpandCollapseAll_fn, _eventStream3, _stopper4, _groupOrderHint, _isReadyDeferred, _isCollapsible, _collapsibleSectionDescriptor, _isSearch, _element3, _headerElement, _titleElement, _bodyElement, _contentElement, _tableBodyElement, _collapsedContainer, _messageElement, _footerElement, _eventStream4, _isCollapsed2, _inboxDropdownButtonView, _dropdownViewController, _tableRowsUnmountResolution, _driver6, _GmailCollapsibleSectionView_instances, unmountRows_fn, updateValues_fn, setupElement_fn, setupHeader_fn, setupGmailv2Header_fn, setupFooter_fn, updateElement_fn, updateHeader_fn, updateTitle_fn, updateSubtitle_fn, updateSummaryText_fn, updateDropdown_fn, updateContentElement_fn, updateTableRows_fn, renderTable_fn, updateMessageElement_fn, showLoadingMessage_fn, showEmptyMessage_fn, updateFooter_fn, toggleCollapseState_fn, collapse_fn, expand_fn, addToCollapsedContainer_fn, removeFromCollapsedContainer_fn, pulloutSectionsFromCollapsedContainer_fn, readdToCollapsedContainer_fn, isCollapsedContainer_fn, recollapse_fn, createCollapsedContainer_fn, destroyCollapsedContainer_fn, _driver7, _page, _destroyed, _GmailRouteView_instances, addCollapsibleSection_fn, waitForMainElementSafe_fn, monitorRowListElements_fn, setupContentAndSidebarView_fn, waitForThreadContainerSafe_fn, startMonitoringPreviewPaneForThread_fn, getSectionsContainer_fn, _driver8, _piOpts, _appId2, _driver9, _navItemDescriptorPropertyStream, _navItemViews, _navItemViewDriver, _navItemViewDriverPromise, _NavItemView_instances, handleViewDriverStreamEvent_fn, _menuItemDescriptor, _element4, _destroyed2, _driver10, _GmailAppMenuItemView_instances, setupElement_fn2, update_fn, updateName_fn, _preloadedIcons, updateIcon_fn, updateARIA_fn, onClick_fn, _onBlur, _onHover, _panelDescriptor, _element5, _destroyed3, _id, _driver11, _loading, _orderGroup, _CollapsiblePanelView_instances, extractPrimaryButtonTheme_fn, setupElement_fn3, _onPrimaryButtonClick, update_fn2, _preloadedIcons2, updateIcon_fn2, updateName_fn2, updateScrollablePanelLoading_fn, _menuItemChangeStream, _menuItemChangeBus, _menuItemAddedDeferred, _routeViewDriverStream, _menuItemToPanelMap, _appMenuItemViews, _AppMenuItemView_static, isPanelLess_fn, adjustTooltipNub_fn, isPanelDropdownShown_fn, setUpRouteViewDriverStream_fn, __, __2, __3, _driver12, _destroyed4, _gmailViewPromise, _collapsiblePanel, _menuItemDescriptor2, _driver13, _events, _monitorInitialized, _AppMenu_static, monitorAppMenuState_fn, _collapsibleSectionViewDriver, _sectionViewDriver, _routeViewDriver2, _driver14, _appId3, _sectionViews, _ListRouteView_instances, bindToEventStream_fn2, _appId4, _driver15, _currentRouteViewDriver, _allRoutesHandlerRegistry, _customRoutes, _membrane4, _listRouteHandlerRegistries, _Router_instances, handleRouteViewChange_fn, informRelevantCustomRoutes_fn, updateNavMenu_fn, _driver16, _driver17, _membrane5, _piOpts2, _driver18, _piOpts3, _driver19, _page2, _moleParentReadyEvent, _moleParent, __4, _GmailMoleViewDriver_static, maybeMoveMole_fn, _driver20, _eventStream5, _stopper5, _element6, _doShow, _GmailMoleViewDriver_instances, moveToRightmostPosition_fn, setTitleEl_fn, setMinimizedTitleEl_fn, _userEmail, _eventStream6, _sectionKey, _GmailNavItemView_instances, setupElement_fn4, cleanupDOMElements_fn, setupSectionElement_fn, updateSpacing_fn, updateSectionTooltip_fn, updateValues_fn2, _gmailTheme, _appId5, _logger, _opts, _envData, _customRouteIDs, _customListRouteIDs, _customListSearchStringsToRouteIds, _messageIDsToThreadIDs, _threadRowIdentifier, _gmailRouteProcessor, _keyboardShortcutHelpModifier, _page3, _pageCommunicator, _pageCommunicatorPromise, _butterBar, _butterBarDriver, _routeViewDriverStream2, _rowListViewDriverStream, _threadRowViewDriverKefirStream, _threadViewDriverLiveSet, _toolbarViewDriverLiveSet, _composeViewDriverStream, _xhrInterceptorStream, _messageViewDriverStream, _stopper6, _navMarkerHiddenChanged, _addonSidebarHiddenChanged, _userInfo, _timestampAccountSwitcherReady, _timestampGlobalsFound, _timestampOnready, _lastCustomThreadListActivity, _currentRouteViewDriver2, _appSidebarView, _GmailDriver_instances, setupEventStreams_fn, setupComposeViewDriverStream_fn, setupRouteSubViewDriver_fn, setupThreadRowViewDriverKefirStream_fn, setupToolbarViewDriverStream_fn, setupMessageViewDriverStream_fn, _recentSyncDraftIds, _selectedThreadRows, _threadRowViewSelectionChanges, _driver21;
                  __webpack_require__2.d(__webpack_exports__2, {
                    makePlatformImplementation: () => (
                      /* binding */
                      makePlatformImplementation
                    )
                  });
                  var safe_event_emitter = __webpack_require__2(2788);
                  var version = __webpack_require__2(4782);
                  ;
                  class Membrane {
                    constructor(mappers) {
                      __publicField(this, "_map", /* @__PURE__ */ new WeakMap());
                      this._mappers = new Map(mappers);
                    }
                    get(wet) {
                      let dry = this._map.get(wet);
                      if (!dry) {
                        const mapperFn = this._mappers.get(wet.constructor);
                        if (!mapperFn) {
                          throw new Error(`Unknown class ${wet.constructor.name}`);
                        }
                        dry = mapperFn(wet);
                        this._map.set(wet, dry);
                      }
                      return dry;
                    }
                  }
                  ;
                  class AttachmentCardView extends safe_event_emitter.A {
                    constructor(attachmentCardImplementation, driver, membrane) {
                      super();
                      __privateAdd(this, _attachmentCardImplementation);
                      __privateAdd(this, _driver);
                      __privateAdd(this, _membrane);
                      __publicField(this, "destroyed", false);
                      __privateSet(this, _driver, driver);
                      __privateSet(this, _membrane, membrane);
                      __privateSet(this, _attachmentCardImplementation, attachmentCardImplementation);
                      __privateGet(this, _attachmentCardImplementation).getStopper().onValue(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                      });
                    }
                    getAttachmentType() {
                      return __privateGet(this, _attachmentCardImplementation).getAttachmentType();
                    }
                    addButton(buttonOptions) {
                      __privateGet(this, _attachmentCardImplementation).addButton(buttonOptions);
                    }
                    getTitle() {
                      return __privateGet(this, _attachmentCardImplementation).getTitle();
                    }
                    /**
                     * Get the URL for the attachment card's download link as a promise for a string.
                     * For FILE attachment cards, the URL will be a short-lived URL that can be
                     * accessed without cookies. For CUSTOM attachment cards, the URL will be the
                     * downloadUrl property of the card's download button if it has one, otherwise
                     * null. Other attachment card types may not have a download URL, and the promise
                     * may resolve to null.
                     */
                    getDownloadURL() {
                      return __privateGet(this, _attachmentCardImplementation).getDownloadURL();
                    }
                    getMessageView() {
                      const messageViewDriver = __privateGet(this, _attachmentCardImplementation).getMessageViewDriver();
                      return messageViewDriver ? __privateGet(this, _membrane).get(messageViewDriver) : null;
                    }
                    get _attachmentCardImplementation() {
                      __privateGet(this, _driver).getLogger().deprecationWarning("AttachmentCardView._attachmentCardImplementation._element", "AttachmentCardView.getElement");
                      return {
                        _element: this.getElement()
                      };
                    }
                    getElement() {
                      return __privateGet(this, _attachmentCardImplementation).getElement();
                    }
                  }
                  _attachmentCardImplementation = new WeakMap();
                  _driver = new WeakMap();
                  _membrane = new WeakMap();
                  var find = __webpack_require__2(4455);
                  var find_default = /* @__PURE__ */ __webpack_require__2.n(find);
                  var kefir_esm = __webpack_require__2(7249);
                  var js = __webpack_require__2(4924);
                  var js_default = /* @__PURE__ */ __webpack_require__2.n(js);
                  var auto_html_js = __webpack_require__2(1812);
                  var auto_html_js_default = /* @__PURE__ */ __webpack_require__2.n(auto_html_js);
                  var from_event_target_capture = __webpack_require__2(3985);
                  var querySelectorOrFail = __webpack_require__2(9860);
                  var button_view = __webpack_require__2(9341);
                  var basic_button_view_controller = __webpack_require__2(9755);
                  var simulate_mouse_event = __webpack_require__2(4603);
                  var wait_for = __webpack_require__2(5156);
                  ;
                  class GmailAttachmentCardView {
                    constructor(options2, driver, messageViewDriver) {
                      __publicField(this, "_stopper", js_default()());
                      __publicField(this, "_previewClicks", kefir_esm.pool());
                      this._driver = driver;
                      this._messageViewDriver = messageViewDriver;
                      if (options2.element) {
                        this._element = options2.element;
                      } else {
                        this._createNewElement(options2);
                      }
                    }
                    destroy() {
                      this._stopper.destroy();
                    }
                    getElement() {
                      return this._element;
                    }
                    getMessageViewDriver() {
                      return this._messageViewDriver;
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getPreviewClicks() {
                      return this._previewClicks.takeUntilBy(this._stopper);
                    }
                    _isStandardAttachment() {
                      return this.getAttachmentType() === "FILE";
                    }
                    getAttachmentType() {
                      if (this._cachedType) {
                        return this._cachedType;
                      }
                      const type = this._readAttachmentType();
                      if (type !== "UNLOADED") {
                        this._cachedType = type;
                      }
                      return type;
                    }
                    _readAttachmentType() {
                      if (this._element.classList.contains("inboxsdk__attachmentCard")) {
                        return "CUSTOM";
                      }
                      if (this._element.children.length === 1 && this._element.children[0].children.length === 0) {
                        return "UNLOADED";
                      }
                      const link = this._getDownloadLink();
                      if (!link || link.match(/^https?:\/\/mail\.google\.com\//)) {
                        return "FILE";
                      }
                      if (link.match(/^https?:\/\/([^/]*\.)?google(usercontent)?\.com\//)) {
                        return "DRIVE";
                      }
                      return "UNKNOWN";
                    }
                    addButton(options2) {
                      var buttonView = new button_view.A({
                        iconUrl: options2.iconUrl,
                        tooltip: options2.tooltip
                      });
                      new basic_button_view_controller.A({
                        activateFunction: () => {
                          if (options2.onClick) {
                            options2.onClick({
                              getDownloadURL: () => this.getDownloadURL()
                            });
                          }
                        },
                        buttonView
                      });
                      this._addButton(buttonView);
                    }
                    getTitle() {
                      const title = this._element.querySelector("span .aV3");
                      return title ? title.textContent : "";
                    }
                    _getDownloadLink() {
                      const firstChild = this._element.firstElementChild;
                      if (!firstChild) throw new Error("Failed to find link");
                      if (firstChild.tagName !== "A" || !firstChild.href) {
                        const download_url = this._element.getAttribute("download_url");
                        if (download_url) {
                          const m = /:(https:\/\/.+)/.exec(download_url);
                          return m ? m[1] : null;
                        }
                      } else {
                        const firstChildHref = firstChild.href;
                        if (firstChildHref) {
                          return firstChildHref.replace(/([?&])disp=inline(?=&|$)/, "$1disp=safe");
                        }
                        return firstChildHref;
                      }
                    }
                    // Resolves the short-lived cookie-less download URL
                    async getDownloadURL() {
                      try {
                        if (this._isStandardAttachment()) {
                          const downloadUrl = await (0, wait_for.A)(() => this._getDownloadLink());
                          if (!downloadUrl) return null;
                          const finalUrl = await this._driver.resolveUrlRedirects(downloadUrl);
                          if (!/^https:\/\/mail-attachment\.googleusercontent\.com\/attachment\//.test(finalUrl)) {
                            console.error("getDownloadURL returned unexpected url", finalUrl);
                            const err = new Error("getDownloadURL returned unexpected url");
                            this._driver.getLogger().error(err, {
                              finalUrlCensored: finalUrl.replace(/\?[^/]+$/, "?[...]")
                            });
                            if (/^https:\/\/mail\.google\.com\//.test(finalUrl)) {
                              throw err;
                            }
                          }
                          return finalUrl;
                        } else {
                          const downloadButton = this._element.querySelector("[data-inboxsdk-download-url]");
                          return downloadButton ? downloadButton.getAttribute("data-inboxsdk-download-url") : null;
                        }
                      } catch (err) {
                        this._driver.getLogger().error(err);
                        throw err;
                      }
                    }
                    _extractFileNameFromElement() {
                      return (0, querySelectorOrFail.A)(this._element, ".aQA > span").textContent;
                    }
                    _createNewElement(options2) {
                      this._element = document.createElement("span");
                      this._element.classList.add("aZo");
                      this._element.classList.add("inboxsdk__attachmentCard");
                      var htmlArray = [auto_html_js_default()`
			<a target="_blank" role="link" class="aQy e" href="">
				<div aria-hidden="true">
					<div class="aSG"></div>
					<div class="aVY aZn">
						<div class="aZm"></div>
					</div>
					<div class="aSH">`];
                      if (options2.iconThumbnailUrl) {
                        htmlArray = htmlArray.concat([auto_html_js_default()`
				<div class="aYv">
					<img class="aZG aYw" src="${options2.iconThumbnailUrl}">
				</div>`]);
                      } else {
                        htmlArray = htmlArray.concat([auto_html_js_default()`
				<img class="aQG aYB inboxsdk__attachmentCard_previewThumbnailUrl"
					src="${options2.previewThumbnailUrl}">`]);
                      }
                      htmlArray = htmlArray.concat([auto_html_js_default()`
			<div class="aYy">
				<div class="aYA">
					<img class="aSM" src="${options2.fileIconImageUrl}">
				</div>
				<div class="aYz">
					<div class="a12">
						<div class="aQA">
							<span class="aV3 a6U"></span>
						</div>
						<div class="aYp">
							<span class="SaH2Ve"></span>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="aSI">
			<div class="aSJ"></div>
		</div>
	</div>
</a>
<div class="aQw"></div>`]);
                      this._element.innerHTML = htmlArray.join("");
                      this._element.children[0].href = options2.previewUrl;
                      if (options2.mimeType && options2.mimeType.split("/")[0] === "image") {
                        this._element.children[0].classList.add("aZI");
                      }
                      (0, querySelectorOrFail.A)(this._element, "span .aV3").textContent = options2.title;
                      (0, querySelectorOrFail.A)(this._element, "div.aYp > span").textContent = options2.description || "";
                      (0, querySelectorOrFail.A)(this._element, "div.aSJ").style.borderColor = options2.foldColor;
                      this._addHoverEvents();
                      if (options2.buttons) {
                        const downloadButton = find_default()(options2.buttons, function(button) {
                          return button.downloadUrl;
                        });
                        if (downloadButton) {
                          this._addDownloadButton(downloadButton);
                        }
                        this._addMoreButtons(options2.buttons);
                      }
                      var self2 = this;
                      this._previewClicks.plug(kefir_esm.fromEvents(this._element, "click").map((event) => ({
                        preventDefault: () => event.preventDefault()
                      })));
                      if (options2.previewThumbnailUrl && options2.failoverPreviewIconUrl) {
                        const previewThumbnailUrlImage = (0, querySelectorOrFail.A)(this._element, ".inboxsdk__attachmentCard_previewThumbnailUrl");
                        previewThumbnailUrlImage.onerror = (e) => {
                          var iconDiv = document.createElement("div");
                          iconDiv.classList.add("aYv");
                          iconDiv.innerHTML = '<img class="aZG aYw" src="' + options2.failoverPreviewIconUrl + '">';
                          const parent = previewThumbnailUrlImage.parentElement;
                          if (!parent) throw new Error("Could not find parent element");
                          parent.insertBefore(iconDiv, previewThumbnailUrlImage.nextElementSibling);
                          previewThumbnailUrlImage.remove();
                        };
                      }
                    }
                    _addHoverEvents() {
                      kefir_esm.merge([kefir_esm.fromEvents(this._element, "mouseenter"), (0, from_event_target_capture.A)(this._element, "focus")]).onValue(() => {
                        this._element.classList.add("aZp");
                      });
                      kefir_esm.merge([kefir_esm.fromEvents(this._element, "mouseleave"), (0, from_event_target_capture.A)(this._element, "blur")]).onValue(() => {
                        this._element.classList.remove("aZp");
                      });
                      const anchor = (0, querySelectorOrFail.A)(this._element, "a");
                      kefir_esm.fromEvents(anchor, "focus").onValue(() => {
                        anchor.classList.add("a1U");
                      });
                      kefir_esm.fromEvents(anchor, "blur").onValue(() => {
                        anchor.classList.remove("a1U");
                      });
                    }
                    _addDownloadButton(options2) {
                      const buttonView = new button_view.A({
                        tooltip: "Download",
                        iconClass: "aSK J-J5-Ji aYr"
                      });
                      buttonView.getElement().setAttribute("data-inboxsdk-download-url", options2.downloadUrl);
                      const basicButtonViewController = new basic_button_view_controller.A({
                        activateFunction: function() {
                          let prevented = false;
                          if (options2.onClick) {
                            options2.onClick({
                              preventDefault: function() {
                                prevented = true;
                              }
                            });
                          }
                          if (prevented) {
                            return;
                          }
                          const downloadLink = document.createElement("a");
                          downloadLink.href = options2.downloadUrl;
                          if (options2.downloadFilename) {
                            downloadLink.download = options2.downloadFilename;
                          }
                          downloadLink.addEventListener("click", function(e) {
                            e.stopPropagation();
                          }, true);
                          if (options2.openInNewTab) {
                            downloadLink.setAttribute("target", "_blank");
                          }
                          document.body.appendChild(downloadLink);
                          (0, simulate_mouse_event.jp)(downloadLink);
                          downloadLink.remove();
                        },
                        buttonView
                      });
                      this._addButton(buttonView);
                    }
                    _addMoreButtons(buttonDescriptors) {
                      (buttonDescriptors || []).filter(function(buttonDescriptor) {
                        return !buttonDescriptor.downloadUrl;
                      }).forEach((desc) => {
                        this.addButton(desc);
                      });
                    }
                    _addButton(buttonView) {
                      buttonView.addClass("aQv");
                      this._getButtonContainerElement().appendChild(buttonView.getElement());
                    }
                    _getPreviewImageUrl() {
                      var previewImage = this._getPreviewImage();
                      if (!previewImage) {
                        return null;
                      }
                      return previewImage.src;
                    }
                    _getPreviewImage() {
                      return this._element.querySelector("img.aQG");
                    }
                    _getButtonContainerElement() {
                      return (0, querySelectorOrFail.A)(this._element, ".aQw");
                    }
                  }
                  const gmail_attachment_card_view = GmailAttachmentCardView;
                  var browser_asap = __webpack_require__2(4622);
                  var browser_asap_default = /* @__PURE__ */ __webpack_require__2.n(browser_asap);
                  var get_or_fail = __webpack_require__2(4531);
                  var kefir_cast = __webpack_require__2(5164);
                  var kefir_cast_default = /* @__PURE__ */ __webpack_require__2.n(kefir_cast);
                  ;
                  const membersMap = /* @__PURE__ */ new WeakMap();
                  class ContentPanelView extends safe_event_emitter.A {
                    constructor(contentPanelViewImplementation) {
                      super();
                      __privateAdd(this, _ContentPanelView_instances);
                      __publicField(this, "destroyed", false);
                      const members = {
                        contentPanelViewImplementation
                      };
                      membersMap.set(this, members);
                      __privateMethod(this, _ContentPanelView_instances, bindToStreamEvents_fn).call(this);
                    }
                    remove() {
                      (0, get_or_fail.A)(membersMap, this).contentPanelViewImplementation.remove();
                    }
                    close() {
                      (0, get_or_fail.A)(membersMap, this).contentPanelViewImplementation.close();
                    }
                    open() {
                      (0, get_or_fail.A)(membersMap, this).contentPanelViewImplementation.open();
                    }
                    isActive() {
                      return (0, get_or_fail.A)(membersMap, this).contentPanelViewImplementation.isActive();
                    }
                  }
                  _ContentPanelView_instances = new WeakSet();
                  bindToStreamEvents_fn = function() {
                    const stream = (0, get_or_fail.A)(membersMap, this).contentPanelViewImplementation.getEventStream();
                    stream.onValue((_ref) => {
                      let {
                        eventName
                      } = _ref;
                      this.emit(eventName);
                    });
                    stream.onEnd(() => {
                      this.destroyed = true;
                      this.emit("destroy");
                    });
                  };
                  ;
                  class ThreadView extends safe_event_emitter.A {
                    constructor(threadViewImplementation, appId, driver, membrane) {
                      super();
                      __privateAdd(this, _ThreadView_instances);
                      __privateAdd(this, _threadViewImplementation);
                      __privateAdd(this, _appId);
                      __privateAdd(this, _driver2);
                      __privateAdd(this, _membrane2);
                      __publicField(this, "destroyed", false);
                      __privateSet(this, _threadViewImplementation, threadViewImplementation);
                      __privateSet(this, _appId, appId);
                      __privateSet(this, _driver2, driver);
                      __privateSet(this, _membrane2, membrane);
                      __privateMethod(this, _ThreadView_instances, bindToStreamEvents_fn2).call(this);
                    }
                    addSidebarContentPanel(descriptor) {
                      const descriptorPropertyStream = kefir_cast_default()(kefir_esm["default"], descriptor).toProperty();
                      __privateGet(this, _driver2).getLogger().eventSdkPassive("threadView.addSidebarContentPanel");
                      const contentPanelImplementation = __privateGet(this, _threadViewImplementation).addSidebarContentPanel(descriptorPropertyStream);
                      if (contentPanelImplementation) {
                        return new ContentPanelView(contentPanelImplementation);
                      }
                      return null;
                    }
                    addNoticeBar() {
                      return __privateGet(this, _threadViewImplementation).addNoticeBar();
                    }
                    /**
                     * @alpha
                     * @internal
                     */
                    registerHiddenCustomMessageNoticeProvider(provider) {
                      return __privateGet(this, _threadViewImplementation).registerHiddenCustomMessageNoticeProvider(provider);
                    }
                    /**
                     * @alpha
                     * @internal
                     */
                    addCustomMessage(descriptor) {
                      const descriptorPropertyStream = kefir_cast_default()(kefir_esm["default"], descriptor).toProperty();
                      __privateGet(this, _driver2).getLogger().eventSdkPassive("threadView.addCustomMessage");
                      return __privateGet(this, _threadViewImplementation).addCustomMessage(descriptorPropertyStream);
                    }
                    /**
                     * @returns {MessageView[]} of all the loaded MessageView objects currently in the thread. @see MessageView for more information on what "loaded" means. Note that more messages may load into the thread later! If it's important to get future messages, use {@link Conversations#registerMessageViewHandler} instead.
                     */
                    getMessageViews() {
                      const threadViewImplementation = __privateGet(this, _threadViewImplementation);
                      const membrane = __privateGet(this, _membrane2);
                      return threadViewImplementation.getMessageViewDrivers().filter((messageViewDriver) => messageViewDriver.isLoaded()).map((messageViewDriver) => membrane.get(messageViewDriver));
                    }
                    getMessageViewsAll() {
                      const threadViewImplementation = __privateGet(this, _threadViewImplementation);
                      const membrane = __privateGet(this, _membrane2);
                      return threadViewImplementation.getMessageViewDrivers().map((messageViewDriver) => membrane.get(messageViewDriver));
                    }
                    getSubject() {
                      return __privateGet(this, _threadViewImplementation).getSubject();
                    }
                    /**
                     * @deprecated
                     */
                    getThreadID() {
                      __privateGet(this, _driver2).getLogger().deprecationWarning("threadView.getThreadID", "threadView.getThreadIDAsync");
                      return __privateGet(this, _threadViewImplementation).getThreadID();
                    }
                    getThreadIDAsync() {
                      return __privateGet(this, _threadViewImplementation).getThreadIDAsync();
                    }
                    addLabel() {
                      return __privateGet(this, _threadViewImplementation).addLabel();
                    }
                    /**
                     * @internal
                     */
                    addSubjectButton(buttonDescriptor) {
                      return __privateGet(this, _threadViewImplementation).addSubjectButton(buttonDescriptor);
                    }
                    /**
                     * @internal
                     */
                    addFooterButton(buttonDescriptor) {
                      return __privateGet(this, _threadViewImplementation).addFooterButton(buttonDescriptor);
                    }
                  }
                  _threadViewImplementation = new WeakMap();
                  _appId = new WeakMap();
                  _driver2 = new WeakMap();
                  _membrane2 = new WeakMap();
                  _ThreadView_instances = new WeakSet();
                  bindToStreamEvents_fn2 = function() {
                    __privateGet(this, _threadViewImplementation).getEventStream().onEnd(() => {
                      this.destroyed = true;
                      this.emit("destroy");
                      this.removeAllListeners();
                    });
                    __privateGet(this, _threadViewImplementation).getEventStream().filter(function(event) {
                      return event.type !== "internal" && event.eventName === "contactHover";
                    }).onValue((event) => {
                      const membrane = __privateGet(this, _membrane2);
                      this.emit(event.eventName, {
                        contactType: event.contactType,
                        messageView: membrane.get(event.messageViewDriver),
                        contact: event.contact,
                        threadView: this
                      });
                    });
                  };
                  const thread_view = ThreadView;
                  var handler_registry = __webpack_require__2(3247);
                  ;
                  const memberMap = /* @__PURE__ */ new WeakMap();
                  const MessageViewViewStates = Object.freeze({
                    /**
                     * One case where a {@link MessageView} is 'HIDDEN' is when there are too many messages in a thread,
                     * and the message doesn't show at all.
                     */
                    HIDDEN: "HIDDEN",
                    /**
                     * {@link MessageView}s are collapsed when they are partially shown. The {@link MessageView}'s subject line and timestamp is visible, but the body of the message may be truncated.
                     */
                    COLLAPSED: "COLLAPSED",
                    EXPANDED: "EXPANDED"
                  });
                  const MessageViewToolbarSectionNames = Object.freeze({
                    MORE: "MORE"
                  });
                  class Conversations {
                    constructor(appId, driver, membrane) {
                      __publicField(this, "MessageViewViewStates", MessageViewViewStates);
                      __publicField(this, "MessageViewToolbarSectionNames", MessageViewToolbarSectionNames);
                      const members = {
                        appId,
                        driver,
                        threadViewHandlerRegistry: new handler_registry.A(),
                        messageViewHandlerRegistries: {
                          all: new handler_registry.A(),
                          loaded: new handler_registry.A()
                        },
                        attachmentCardViewHandlerRegistry: new handler_registry.A()
                      };
                      memberMap.set(this, members);
                      driver.getStopper().onValue(() => {
                        members.threadViewHandlerRegistry.dumpHandlers();
                        members.messageViewHandlerRegistries.all.dumpHandlers();
                        members.messageViewHandlerRegistries.loaded.dumpHandlers();
                      });
                      driver.getAttachmentCardViewDriverStream().filter((cardDriver) => cardDriver.getAttachmentType() === "FILE").onValue((attachmentCardViewDriver) => {
                        const attachmentCardView = membrane.get(attachmentCardViewDriver);
                        members.attachmentCardViewHandlerRegistry.addTarget(attachmentCardView);
                      });
                      _setupViewDriverWatcher(appId, driver.getThreadViewDriverStream().filter((t2) => !t2.isLoadingStub()), thread_view, members.threadViewHandlerRegistry, this, membrane);
                      _setupViewDriverWatcher(appId, driver.getMessageViewDriverStream(), MessageView, members.messageViewHandlerRegistries.all, this, membrane);
                      _setupViewDriverWatcher(appId, driver.getMessageViewDriverStream().flatMap((messageViewDriver) => messageViewDriver.isLoaded() ? kefir_esm.constant(messageViewDriver) : messageViewDriver.getEventStream().filter((event) => event.eventName === "messageLoad").map(() => messageViewDriver).take(1)), MessageView, members.messageViewHandlerRegistries.loaded, this, membrane);
                    }
                    registerThreadViewHandler(handler) {
                      return (0, get_or_fail.A)(memberMap, this).threadViewHandlerRegistry.registerHandler(handler);
                    }
                    registerMessageViewHandler(handler) {
                      return (0, get_or_fail.A)(memberMap, this).messageViewHandlerRegistries.loaded.registerHandler(handler);
                    }
                    registerMessageViewHandlerAll(handler) {
                      return (0, get_or_fail.A)(memberMap, this).messageViewHandlerRegistries.all.registerHandler(handler);
                    }
                    registerFileAttachmentCardViewHandler(handler) {
                      return (0, get_or_fail.A)(memberMap, this).attachmentCardViewHandlerRegistry.registerHandler(handler);
                    }
                  }
                  function _setupViewDriverWatcher(appId, stream, ViewClass, handlerRegistry, ConversationsInstance, membrane) {
                    var combinedStream = stream.map(function(viewDriver) {
                      const view = membrane.get(viewDriver);
                      return {
                        viewDriver,
                        view
                      };
                    });
                    combinedStream.flatMap((event) => event.viewDriver.getReadyStream().map(() => event).takeUntilBy(kefir_esm.fromEvents(event.view, "destroy"))).onValue(function(event) {
                      handlerRegistry.addTarget(event.view);
                    });
                  }
                  const conversations = Conversations;
                  ;
                  class MessageView extends safe_event_emitter.A {
                    constructor(messageViewImplementation, membrane, driver) {
                      super();
                      __privateAdd(this, _MessageView_instances);
                      __publicField(this, "destroyed", false);
                      __privateAdd(this, _driver3);
                      __privateAdd(this, _linksInBody);
                      __privateAdd(this, _membrane3);
                      __privateAdd(this, _messageViewImplementation);
                      __privateSet(this, _driver3, driver);
                      __privateSet(this, _linksInBody, null);
                      __privateSet(this, _membrane3, membrane);
                      __privateSet(this, _messageViewImplementation, messageViewImplementation);
                      __privateMethod(this, _MessageView_instances, bindToEventStream_fn).call(this, messageViewImplementation.getEventStream());
                    }
                    addAttachmentCardView(cardOptions) {
                      const attachmentCardViewDriver = __privateGet(this, _messageViewImplementation).addAttachmentCard(cardOptions);
                      const attachmentCardView = __privateGet(this, _membrane3).get(attachmentCardViewDriver);
                      attachmentCardViewDriver.getPreviewClicks().onValue((e) => {
                        if (cardOptions.previewOnClick) {
                          cardOptions.previewOnClick({
                            attachmentCardView,
                            preventDefault: () => e.preventDefault()
                          });
                        }
                      });
                      return attachmentCardView;
                    }
                    // TODO why is this a separate method?
                    addAttachmentCardViewNoPreview(cardOptions) {
                      return this.addAttachmentCardView(cardOptions);
                    }
                    addAttachmentsToolbarButton(buttonOptions) {
                      __privateGet(this, _messageViewImplementation).addButtonToDownloadAllArea({
                        tooltip: buttonOptions.tooltip,
                        iconUrl: buttonOptions.iconUrl,
                        onClick: () => {
                          const attachmentCardViews = __privateGet(this, _messageViewImplementation).getAttachmentCardViewDrivers().map((cardDriver) => __privateGet(this, _membrane3).get(cardDriver));
                          buttonOptions.onClick({
                            attachmentCardViews
                          });
                        }
                      });
                    }
                    addToolbarButton(buttonOptions) {
                      if (typeof buttonOptions.onClick !== "function" || typeof buttonOptions.title !== "string" || !Object.prototype.hasOwnProperty.call(MessageViewToolbarSectionNames, buttonOptions.section)) {
                        throw new Error("Missing required properties on MessageViewToolbarButtonDescriptor object");
                      }
                      __privateGet(this, _messageViewImplementation).addMoreMenuItem(buttonOptions);
                    }
                    getElement() {
                      return __privateGet(this, _messageViewImplementation).getElement();
                    }
                    getBodyElement() {
                      return __privateGet(this, _messageViewImplementation).getContentsElement();
                    }
                    getMessageID() {
                      __privateGet(this, _driver3).getLogger().deprecationWarning("messageView.getMessageID", "messageView.getMessageIDAsync");
                      return __privateGet(this, _messageViewImplementation).getMessageID();
                    }
                    getMessageIDAsync() {
                      return __privateGet(this, _messageViewImplementation).getMessageIDAsync();
                    }
                    // TODO non-file-attachment card views are asynchronously loaded. Add some sort of
                    // registerAttachmentCardViewHandler function to listen for other types of
                    // attachment cards if we want to continue support for them.
                    getFileAttachmentCardViews() {
                      return __privateGet(this, _messageViewImplementation).getAttachmentCardViewDrivers().filter((cardDriver) => cardDriver.getAttachmentType() === "FILE").map((attachmentCardViewDriver) => __privateGet(this, _membrane3).get(attachmentCardViewDriver));
                    }
                    // Deprecated name
                    getAttachmentCardViews() {
                      __privateGet(this, _driver3).getLogger().deprecationWarning("MessageView.getAttachmentCardViews", "MessageView.getFileAttachmentCardViews");
                      if (__privateGet(this, _driver3).getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return this.getFileAttachmentCardViews();
                    }
                    isElementInQuotedArea(element) {
                      return __privateGet(this, _messageViewImplementation).isElementInQuotedArea(element);
                    }
                    /**
                     * Returns whether this message has been loaded yet. If the message has not been loaded, some of the data related methods on this object may return empty results. The message may be loaded once the user clicks on the message stub.
                     */
                    isLoaded() {
                      return __privateGet(this, _messageViewImplementation).isLoaded();
                    }
                    getLinksInBody() {
                      if (!__privateGet(this, _linksInBody)) {
                        const anchors = this.getBodyElement().querySelectorAll("a");
                        __privateSet(this, _linksInBody, Array.from(anchors).map((anchor) => ({
                          text: anchor.textContent,
                          html: anchor.innerHTML,
                          href: anchor.href,
                          element: anchor,
                          isInQuotedArea: this.isElementInQuotedArea(anchor)
                        })));
                      }
                      return __privateGet(this, _linksInBody);
                    }
                    /**
                     * Get the contact of the sender of this message.
                       * @returns {Contact} The contact of the sender of this message.
                      * @throws {Error} If the message has not been loaded yet.
                      *
                      * @note If you're using this method on an array of {MessageView}s returned by {@link ThreadRowView#getMessageViewsAll}, make sure to check {@link MessageView#isLoaded} before calling this method.
                     */
                    getSender() {
                      return __privateGet(this, _messageViewImplementation).getSender();
                    }
                    getRecipients() {
                      __privateGet(this, _driver3).getLogger().deprecationWarning("MessageView.getRecipients", "MessageView.getRecipientEmailAddresses() or MessageView.getRecipientsFull()");
                      return this.getRecipientEmailAddresses().map((emailAddress) => ({
                        emailAddress,
                        name: void 0
                      }));
                    }
                    getRecipientEmailAddresses() {
                      return __privateGet(this, _messageViewImplementation).getRecipientEmailAddresses();
                    }
                    getRecipientsFull() {
                      return __privateGet(this, _messageViewImplementation).getRecipientsFull();
                    }
                    getThreadView() {
                      return __privateGet(this, _membrane3).get(__privateGet(this, _messageViewImplementation).getThreadViewDriver());
                    }
                    getDateString() {
                      return __privateGet(this, _messageViewImplementation).getDateString();
                    }
                    addAttachmentIcon(iconDescriptor) {
                      return __privateGet(this, _messageViewImplementation).addAttachmentIcon(iconDescriptor);
                    }
                    getViewState() {
                      return MessageViewViewStates[__privateGet(this, _messageViewImplementation).getViewState()];
                    }
                    hasOpenReply() {
                      __privateGet(this, _driver3).getLogger().deprecationWarning("MessageView.hasOpenReply");
                      if (__privateGet(this, _driver3).getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return __privateGet(this, _messageViewImplementation).hasOpenReply();
                    }
                  }
                  _driver3 = new WeakMap();
                  _linksInBody = new WeakMap();
                  _membrane3 = new WeakMap();
                  _messageViewImplementation = new WeakMap();
                  _MessageView_instances = new WeakSet();
                  bindToEventStream_fn = function(stream) {
                    stream.onEnd(() => {
                      this.destroyed = true;
                      this.emit("destroy");
                      this.removeAllListeners();
                    });
                    stream.filter((event) => event.type !== "internal" && event.eventName === "contactHover").onValue((event) => {
                      this.emit(event.eventName, {
                        contactType: event.contactType,
                        contact: event.contact,
                        messageView: this,
                        threadView: this.getThreadView()
                      });
                    });
                    if (this.isLoaded()) {
                      browser_asap_default()(() => {
                        this.emit("load", {
                          messageView: this
                        });
                      });
                    } else {
                      stream.filter((event) => event.eventName === "messageLoad").onValue(() => {
                        this.emit("load", {
                          messageView: this
                        });
                      });
                    }
                    stream.filter((event) => event.eventName === "viewStateChange").onValue((event) => {
                      this.emit("viewStateChange", {
                        oldViewState: MessageViewViewStates[event.oldValue],
                        newViewState: MessageViewViewStates[event.newValue],
                        messageView: this
                      });
                    });
                  };
                  var sortBy = __webpack_require__2(3281);
                  var sortBy_default = /* @__PURE__ */ __webpack_require__2.n(sortBy);
                  var once = __webpack_require__2(8921);
                  var once_default = /* @__PURE__ */ __webpack_require__2.n(once);
                  var kefir_bus = __webpack_require__2(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__2.n(kefir_bus);
                  ;
                  class GmailAttachmentAreaView {
                    constructor(element, driver, messageViewDriver) {
                      this._driver = driver;
                      this._messageViewDriver = messageViewDriver;
                      this._elsToCardViews = /* @__PURE__ */ new WeakMap();
                      if (element) {
                        this._element = element;
                      } else {
                        this._setupElement();
                      }
                    }
                    destroy() {
                      this.getAttachmentCardViews().forEach((view) => {
                        view.destroy();
                      });
                    }
                    getElement() {
                      return this._element;
                    }
                    getAttachmentCardViews() {
                      const attachments = this._element.querySelectorAll(".aQH > span");
                      return Array.from(attachments).map((attachment) => {
                        let cardView = this._elsToCardViews.get(attachment);
                        if (!cardView) {
                          cardView = new gmail_attachment_card_view({
                            element: attachment
                          }, this._driver, this._messageViewDriver);
                          this._elsToCardViews.set(attachment, cardView);
                        }
                        return cardView;
                      });
                    }
                    _setupElement() {
                      this._element = document.createElement("div");
                      this._element.setAttribute("class", "hq gt a10");
                      this._element.innerHTML = ['<div class="hp"></div>', '<div class="a3I">Attachments area</div>', "<div></div>", '<div class="aQH">', '<div class="aZK"></div>', "</div>"].join("");
                    }
                    _createAreaToolbarIfNeeded() {
                      const preexistingToolbar = this._element.querySelector(".ho");
                      if (preexistingToolbar) {
                        return preexistingToolbar;
                      }
                      const toolbar = document.createElement("div");
                      toolbar.className = "ho";
                      toolbar.innerHTML = `<span class="aVW"><span>${this.getAttachmentCardViews().length}</span> Attachments</span><div class="aZi J-J5-Ji"></div>`;
                      this._element.insertBefore(toolbar, this._element.lastElementChild);
                      this._element.classList.remove("a10");
                      return toolbar;
                    }
                    _updateToolbarCardCount() {
                      const cardCount = this.getAttachmentCardViews().length;
                      if (cardCount > 1) {
                        const toolbar = this._createAreaToolbarIfNeeded();
                        const counter = (0, querySelectorOrFail.A)(toolbar, ".aVW > span");
                        counter.textContent = String(cardCount);
                      }
                    }
                    addGmailAttachmentCardView(gmailAttachmentCardView) {
                      const zone = this._element.querySelector(".aXK, .aQH");
                      if (!zone) {
                        this._driver.getLogger().error(new Error("Could not find attachment zone"));
                        return;
                      }
                      zone.insertBefore(gmailAttachmentCardView.getElement(), zone.lastElementChild);
                      this._updateToolbarCardCount();
                    }
                    addButtonToDownloadAllArea(options2) {
                      var buttonView = new button_view.A({
                        iconClass: "T-I-J3",
                        iconUrl: options2.iconUrl,
                        tooltip: options2.tooltip,
                        hasButtonToLeft: true
                      });
                      buttonView.addClass("aZj");
                      buttonView.getElement().children[0].className = "asa";
                      new basic_button_view_controller.A({
                        activateFunction: () => {
                          if (options2.onClick) {
                            options2.onClick();
                          }
                        },
                        buttonView
                      });
                      const toolbar = this._createAreaToolbarIfNeeded();
                      (0, querySelectorOrFail.A)(toolbar, ".aZi").appendChild(buttonView.getElement());
                    }
                  }
                  const gmail_attachment_area_view = GmailAttachmentAreaView;
                  var lib_logger = __webpack_require__2(2617);
                  var extract_contact_from_email_contact_string = __webpack_require__2(3324);
                  ;
                  const cache = {};
                  function getUpdatedContact(headerContact, element) {
                    let cacheEntry = cache[headerContact.emailAddress];
                    if (cacheEntry) {
                      if (cacheEntry.headerContact.name !== headerContact.name) {
                        delete cache[headerContact.emailAddress];
                      } else {
                        return cacheEntry.modalContact;
                      }
                    }
                    const menuElement = element.querySelector(".ajA.SK");
                    const isMenuElementHidden = menuElement && menuElement.style.visibility === "hidden";
                    const menuButtonElement = element.querySelector(".ajy[aria-haspopup=true]");
                    if (menuButtonElement && isMenuElementHidden) {
                      const block = (event) => {
                        event.stopPropagation();
                      };
                      const modifyFocusEvent = (event) => {
                        event.shouldIgnore = true;
                      };
                      element.addEventListener("click", block);
                      document.addEventListener("focus", modifyFocusEvent, true);
                      (0, simulate_mouse_event.jp)(menuButtonElement);
                      try {
                        updateContactCacheFromModal(headerContact);
                      } catch (err) {
                        lib_logger.A.error(err);
                      } finally {
                        (0, simulate_mouse_event.jp)(menuButtonElement);
                        element.removeEventListener("click", block);
                        document.removeEventListener("focus", modifyFocusEvent, true);
                      }
                      cacheEntry = cache[headerContact.emailAddress];
                      if (cacheEntry) {
                        return cacheEntry.modalContact;
                      }
                    }
                    return headerContact;
                  }
                  function updateContactCacheFromModal(headerContact) {
                    const spans = document.querySelectorAll(".ajC [email]");
                    for (let ii = 0; ii < spans.length; ii++) {
                      const span = spans[ii];
                      const emailAddress = span.getAttribute("email");
                      if (!emailAddress) continue;
                      if (cache[emailAddress]) continue;
                      let modalContact = {
                        emailAddress,
                        name: void 0
                      };
                      const name = span.getAttribute("name");
                      if (name) {
                        modalContact.name = name;
                      } else {
                        const stringContact = (0, extract_contact_from_email_contact_string.A)(span.textContent);
                        if (emailAddress === stringContact.emailAddress) {
                          modalContact = stringContact;
                        }
                      }
                      cache[emailAddress] = {
                        headerContact,
                        modalContact
                      };
                    }
                  }
                  ;
                  class AttachmentIcon extends safe_event_emitter.A {
                  }
                  const attachment_icon = AttachmentIcon;
                  var make_mutation_observer_stream = __webpack_require__2(5938);
                  var make_mutation_observer_chunked_stream = __webpack_require__2(3197);
                  var censorHTMLtree = __webpack_require__2(1443);
                  ;
                  function findParent(el, cb) {
                    let candidate = el.parentElement;
                    while (candidate) {
                      if (cb(candidate)) {
                        return candidate;
                      }
                      candidate = candidate.parentElement;
                    }
                    return null;
                  }
                  ;
                  function reemitClickEvent(event) {
                    const fakeEvent = new MouseEvent("click");
                    Object.defineProperties(fakeEvent, {
                      target: {
                        value: event.target
                      },
                      detail: {
                        value: event.detail
                      },
                      screenX: {
                        value: event.screenX
                      },
                      screenY: {
                        value: event.screenY
                      },
                      clientX: {
                        value: event.clientX
                      },
                      clientY: {
                        value: event.clientY
                      },
                      button: {
                        value: event.button
                      },
                      buttons: {
                        value: event.buttons
                      },
                      ctrlKey: {
                        value: event.ctrlKey
                      },
                      shiftKey: {
                        value: event.shiftKey
                      },
                      altKey: {
                        value: event.altKey
                      },
                      metaKey: {
                        value: event.metaKey
                      }
                    });
                    document.dispatchEvent(fakeEvent);
                  }
                  ;
                  let hasSeenOldElement = false;
                  class GmailMessageView {
                    constructor(element, gmailThreadView, driver) {
                      __privateAdd(this, _GmailMessageView_instances);
                      __privateAdd(this, _element);
                      __privateAdd(this, _driver4);
                      __privateAdd(this, _eventStream, kefir_bus_default()());
                      __privateAdd(this, _stopper, js_default()());
                      __privateAdd(this, _threadViewDriver);
                      __privateAdd(this, _moreMenuItemDescriptors);
                      __privateAdd(this, _moreMenuAddedElements);
                      __privateAdd(this, _replyElementStream);
                      __privateAdd(this, _readyStream);
                      __privateAdd(this, _replyElement);
                      __privateAdd(this, _gmailAttachmentAreaView);
                      __privateAdd(this, _messageLoaded, false);
                      __privateAdd(this, _openMoreMenu);
                      __privateAdd(this, _sender, null);
                      __privateAdd(this, _recipients, null);
                      __privateAdd(this, _recipientEmailAddresses, null);
                      __privateAdd(this, _recipientsFull, null);
                      __privateSet(this, _element, element);
                      __privateSet(this, _threadViewDriver, gmailThreadView);
                      __privateSet(this, _driver4, driver);
                      __privateSet(this, _moreMenuItemDescriptors, []);
                      __privateSet(this, _moreMenuAddedElements, []);
                      __privateSet(this, _replyElement, null);
                      __privateSet(this, _replyElementStream, __privateGet(this, _eventStream).filter(function(event) {
                        return event.eventName === "replyElement";
                      }).map((event) => event.change));
                      __privateMethod(this, _GmailMessageView_instances, setupMessageStateStream_fn).call(this);
                      __privateMethod(this, _GmailMessageView_instances, monitorEmailAddressHovering_fn).call(this);
                      __privateMethod(this, _GmailMessageView_instances, setupMoreMenuWatching_fn).call(this);
                      let partialReadyStream;
                      const messageIdElement = __privateGet(this, _element).querySelector("[data-message-id]");
                      if (messageIdElement) {
                        const syncMessageId = messageIdElement.getAttribute("data-message-id");
                        if (!syncMessageId) throw new Error("data-message-id attribute has no value");
                        if (messageIdElement.hasAttribute("data-legacy-message-id") && !__privateGet(this, _driver4).isRecentSyncDraftId(syncMessageId.replace("#", ""))) {
                          partialReadyStream = kefir_esm.constant(null);
                        } else {
                          partialReadyStream = kefir_esm.fromPromise((async () => {
                            for (let ii = 0; ii < 10; ii++) {
                              try {
                                const gmailMessageId = await __privateGet(this, _driver4).getGmailMessageIdForSyncMessageId(syncMessageId.replace("#", ""));
                                messageIdElement.setAttribute("data-legacy-message-id", gmailMessageId);
                                return null;
                              } catch (e) {
                                await new Promise((resolve) => setTimeout(resolve, ii * 200));
                              }
                            }
                            throw new Error("gmail message id never became available");
                          })());
                        }
                      } else {
                        partialReadyStream = kefir_esm.constant(null);
                      }
                      __privateSet(this, _readyStream, partialReadyStream.takeUntilBy(__privateGet(this, _stopper)).onValue(() => __privateMethod(this, _GmailMessageView_instances, processInitialState_fn).call(this)));
                    }
                    destroy() {
                      __privateGet(this, _stopper).destroy();
                      __privateGet(this, _eventStream).end();
                      if (__privateGet(this, _gmailAttachmentAreaView)) __privateGet(this, _gmailAttachmentAreaView).destroy();
                      __privateGet(this, _moreMenuAddedElements).forEach((el) => {
                        el.remove();
                      });
                    }
                    getEventStream() {
                      return __privateGet(this, _eventStream);
                    }
                    getReplyElementStream() {
                      return __privateGet(this, _replyElementStream);
                    }
                    getElement() {
                      return __privateGet(this, _element);
                    }
                    getThreadViewDriver() {
                      return __privateGet(this, _threadViewDriver);
                    }
                    isLoaded() {
                      return __privateGet(this, _messageLoaded);
                    }
                    getContentsElement() {
                      if (!__privateGet(this, _messageLoaded)) {
                        throw new Error("tried to get message contents before message is loaded");
                      }
                      try {
                        return (0, querySelectorOrFail.A)(__privateGet(this, _element), "div.ii.gt");
                      } catch (err) {
                        __privateGet(this, _driver4).getLogger().error(err);
                        return (0, querySelectorOrFail.A)(__privateGet(this, _element), ".adP");
                      }
                    }
                    isElementInQuotedArea(element) {
                      return findParent(element, (el) => el.nodeName === "BLOCKQUOTE") != null;
                    }
                    getSender() {
                      let sender = __privateGet(this, _sender);
                      if (sender) return sender;
                      const senderSpan = (0, querySelectorOrFail.A)(__privateGet(this, _element), "td.gF span[email]");
                      const emailAddress = senderSpan.getAttribute("email");
                      if (!emailAddress) throw new Error("Could not find email address");
                      sender = __privateSet(this, _sender, {
                        name: senderSpan.getAttribute("name"),
                        emailAddress
                      });
                      return sender;
                    }
                    getRecipients() {
                      let recipients = __privateGet(this, _recipients);
                      if (recipients) return recipients;
                      const receipientSpans = Array.from(__privateGet(this, _element).querySelectorAll(".hb span[email]"));
                      recipients = __privateSet(this, _recipients, receipientSpans.map((span) => {
                        return __privateMethod(this, _GmailMessageView_instances, getUpdatedContact_fn).call(this, {
                          name: span.getAttribute("name"),
                          emailAddress: span.getAttribute("email") || ""
                        });
                      }));
                      return recipients;
                    }
                    getRecipientEmailAddresses() {
                      let recipients = __privateGet(this, _recipientEmailAddresses);
                      if (recipients) return recipients;
                      const receipientSpans = Array.from(__privateGet(this, _element).querySelectorAll(".hb span[email]"));
                      recipients = __privateSet(this, _recipientEmailAddresses, receipientSpans.map((span) => span.getAttribute("email") || ""));
                      return recipients;
                    }
                    async getRecipientsFull() {
                      let recipients = __privateGet(this, _recipientsFull);
                      if (recipients) return recipients;
                      const threadID = __privateGet(this, _threadViewDriver).getInternalID();
                      recipients = __privateSet(this, _recipientsFull, (await __privateGet(this, _driver4).getPageCommunicator().getMessageRecipients(threadID, __privateGet(this, _element)))?.map((recipient) => ({
                        name: recipient.name ?? void 0,
                        emailAddress: recipient.emailAddress
                      })));
                      if (!recipients) {
                        __privateGet(this, _driver4).getLogger().error(new Error("Failed to find message recipients from response"), {
                          threadID
                        });
                        recipients = __privateSet(this, _recipientsFull, this.getRecipients());
                      }
                      return recipients;
                    }
                    getDateString() {
                      return (0, querySelectorOrFail.A)(__privateGet(this, _element), ".ads .gK .g3").title;
                    }
                    async getDate() {
                      const threadID = __privateGet(this, _threadViewDriver).getInternalID();
                      return await __privateGet(this, _driver4).getPageCommunicator().getMessageDate(threadID, __privateGet(this, _element));
                    }
                    getAttachmentCardViewDrivers() {
                      if (!__privateGet(this, _gmailAttachmentAreaView)) {
                        return [];
                      }
                      return __privateGet(this, _gmailAttachmentAreaView).getAttachmentCardViews();
                    }
                    addButtonToDownloadAllArea(options2) {
                      var gmailAttachmentAreaView = __privateMethod(this, _GmailMessageView_instances, getAttachmentArea_fn).call(this);
                      if (!gmailAttachmentAreaView) {
                        return;
                      }
                      gmailAttachmentAreaView.addButtonToDownloadAllArea(options2);
                    }
                    addMoreMenuItem(options2) {
                      __privateSet(this, _moreMenuItemDescriptors, sortBy_default()(__privateGet(this, _moreMenuItemDescriptors).concat([options2]), (o) => o.orderHint));
                      __privateMethod(this, _GmailMessageView_instances, updateMoreMenu_fn).call(this);
                    }
                    getMessageID() {
                      let ignoreLoadStatus = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
                      if (!ignoreLoadStatus && !__privateGet(this, _messageLoaded)) {
                        throw new Error("tried to get message id before message is loaded");
                      }
                      const messageIdElement = __privateGet(this, _element).querySelector("[data-legacy-message-id]");
                      if (messageIdElement) {
                        const messageId = messageIdElement.getAttribute("data-legacy-message-id");
                        if (!messageId) throw new Error("message id attribute with no value, wtf?");
                        return messageId;
                      }
                      const messageEl = __privateGet(this, _element).querySelector("div.ii.gt");
                      if (!messageEl) {
                        const err = new Error("Could not find message id element");
                        __privateGet(this, _driver4).getLogger().error(err, {
                          elementHtml: (0, censorHTMLtree.A)(__privateGet(this, _element))
                        });
                        throw err;
                      }
                      const m = messageEl.className.match(/\bm([0-9a-f]+)\b/);
                      if (m) {
                        if (!hasSeenOldElement) {
                          hasSeenOldElement = true;
                          __privateGet(this, _driver4).getLogger().eventSite("old messageid location");
                        }
                        return m[1];
                      } else {
                        const messageElChild = messageEl.firstElementChild;
                        if (!messageElChild) {
                          const err = new Error("Could not find message id value");
                          __privateGet(this, _driver4).getLogger().error(err, {
                            reason: "Could not find element",
                            messageHtml: (0, censorHTMLtree.A)(messageEl)
                          });
                          throw err;
                        }
                        const m2 = messageElChild.className.match(/\bm([0-9a-f]+)\b/);
                        if (!m2) {
                          const err = new Error("Could not find message id value");
                          __privateGet(this, _driver4).getLogger().error(err, {
                            reason: "Element was missing message className",
                            messageHtml: (0, censorHTMLtree.A)(messageEl)
                          });
                          throw err;
                        }
                        return m2[1];
                      }
                    }
                    async getMessageIDAsync() {
                      return this.getMessageID();
                    }
                    addAttachmentIcon(iconDescriptor) {
                      const attachmentIcon = new attachment_icon();
                      if (!__privateGet(this, _element)) {
                        console.warn("addDateIcon called on destroyed message");
                        return attachmentIcon;
                      }
                      __privateGet(this, _element).setAttribute("inboxsdk__message_added_attachment_icon", "true");
                      const getImgElement = once_default()(() => {
                        const img = document.createElement("img");
                        img.src = "images/cleardot.gif";
                        return img;
                      });
                      const getCustomIconWrapper = once_default()(() => {
                        const div = document.createElement("div");
                        return div;
                      });
                      const getTooltipNodeWrapper = once_default()(() => {
                        const div = document.createElement("div");
                        return div;
                      });
                      let added = false;
                      let currentIconUrl = null;
                      __privateGet(this, _stopper).onValue(() => {
                        if (added) {
                          getCustomIconWrapper().remove();
                          getTooltipNodeWrapper().remove();
                          getImgElement().remove();
                          added = false;
                        }
                      });
                      kefir_cast_default()(kefir_esm, iconDescriptor).combine(__privateGet(this, _eventStream).filter((event) => event.eventName === "viewStateChange").toProperty(() => null), (opts) => opts).takeUntilBy(__privateGet(this, _stopper)).onValue((opts) => {
                        if (!opts) {
                          if (added) {
                            getCustomIconWrapper().remove();
                            getImgElement().remove();
                            getTooltipNodeWrapper().remove();
                            added = false;
                          }
                        } else {
                          let attachmentDiv;
                          if (this.getViewState() === "COLLAPSED") {
                            attachmentDiv = (0, querySelectorOrFail.A)(__privateGet(this, _element), ".adf.ads td.gH span");
                          } else {
                            attachmentDiv = (0, querySelectorOrFail.A)(__privateGet(this, _element), "td.gH div.gK span");
                          }
                          const img = opts.iconHtml != null ? getCustomIconWrapper() : getImgElement();
                          const onClick = opts.onClick;
                          if (onClick) {
                            img.onclick = function(event) {
                              event.preventDefault();
                              event.stopPropagation();
                              onClick();
                            };
                            img.style.cursor = "pointer";
                          } else {
                            img.onclick = null;
                            img.style.cursor = "";
                          }
                          if (opts.tooltip && typeof opts.tooltip == "object" && opts.tooltip instanceof HTMLElement) {
                            const tooltipWrapper = getTooltipNodeWrapper();
                            tooltipWrapper.className = "inboxsdk__message_attachment_tooltipWrapper";
                            tooltipWrapper.onclick = function(event) {
                              event.stopPropagation();
                              reemitClickEvent(event);
                            };
                            tooltipWrapper.appendChild(opts.tooltip);
                            img.onmouseenter = function(event) {
                              event.preventDefault();
                              event.stopPropagation();
                              img.appendChild(tooltipWrapper);
                              attachmentIcon.emit("tooltipShown");
                            };
                            img.onmouseleave = function(event) {
                              event.preventDefault();
                              event.stopPropagation();
                              img.removeChild(tooltipWrapper);
                              attachmentIcon.emit("tooltipHidden");
                            };
                            img.removeAttribute("data-tooltip");
                          } else if (opts.tooltip && typeof opts.tooltip == "string") {
                            img.setAttribute("data-tooltip", opts.tooltip);
                          } else {
                            img.removeAttribute("data-tooltip");
                          }
                          img.className = opts.iconHtml != null ? `inboxsdk__message_attachment_iconWrapper ${opts.iconClass || ""}` : "inboxsdk__message_attachment_icon " + (opts.iconClass || "");
                          if (opts.iconHtml != null) {
                            if (attachmentDiv.contains(getImgElement())) {
                              getImgElement().remove();
                            }
                            img.innerHTML = opts.iconHtml;
                          } else if (currentIconUrl != opts.iconUrl) {
                            if (attachmentDiv.contains(getCustomIconWrapper())) {
                              getCustomIconWrapper().remove();
                            }
                            img.style.background = opts.iconUrl ? "url(" + opts.iconUrl + ") no-repeat 0 0" : "";
                            currentIconUrl = opts.iconUrl;
                          }
                          if (!attachmentDiv.contains(img)) {
                            attachmentDiv.appendChild(img);
                            added = true;
                          }
                        }
                      });
                      return attachmentIcon;
                    }
                    getViewState() {
                      if (__privateGet(this, _element).classList.contains("kQ") || __privateGet(this, _element).classList.contains("kx")) {
                        return "HIDDEN";
                      } else if (__privateGet(this, _element).classList.contains("kv")) {
                        return "COLLAPSED";
                      } else {
                        return "EXPANDED";
                      }
                    }
                    hasOpenReply() {
                      return Boolean(__privateGet(this, _replyElement));
                    }
                    addAttachmentCard(options2) {
                      var gmailAttachmentCardView = new gmail_attachment_card_view(options2, __privateGet(this, _driver4), this);
                      if (!__privateGet(this, _gmailAttachmentAreaView)) {
                        __privateSet(this, _gmailAttachmentAreaView, __privateMethod(this, _GmailMessageView_instances, getAttachmentArea_fn).call(this));
                      }
                      if (!__privateGet(this, _gmailAttachmentAreaView)) {
                        __privateSet(this, _gmailAttachmentAreaView, __privateMethod(this, _GmailMessageView_instances, createAttachmentArea_fn).call(this));
                      }
                      __privateGet(this, _gmailAttachmentAreaView).addGmailAttachmentCardView(gmailAttachmentCardView);
                      return gmailAttachmentCardView;
                    }
                    // Is this used?
                    getReadyStream() {
                      return __privateGet(this, _readyStream);
                    }
                  }
                  _element = new WeakMap();
                  _driver4 = new WeakMap();
                  _eventStream = new WeakMap();
                  _stopper = new WeakMap();
                  _threadViewDriver = new WeakMap();
                  _moreMenuItemDescriptors = new WeakMap();
                  _moreMenuAddedElements = new WeakMap();
                  _replyElementStream = new WeakMap();
                  _readyStream = new WeakMap();
                  _replyElement = new WeakMap();
                  _gmailAttachmentAreaView = new WeakMap();
                  _messageLoaded = new WeakMap();
                  _openMoreMenu = new WeakMap();
                  _sender = new WeakMap();
                  _recipients = new WeakMap();
                  _recipientEmailAddresses = new WeakMap();
                  _recipientsFull = new WeakMap();
                  _GmailMessageView_instances = new WeakSet();
                  setupMoreMenuWatching_fn = function() {
                    __privateSet(this, _openMoreMenu, null);
                    __privateGet(this, _eventStream).filter((e) => e.eventName === "viewStateChange").toProperty(() => null).flatMapLatest(() => {
                      const moreButton = __privateMethod(this, _GmailMessageView_instances, getMoreButton_fn).call(this);
                      if (!moreButton) {
                        return kefir_esm.constant(null);
                      }
                      return (0, make_mutation_observer_chunked_stream.A)(moreButton, {
                        attributes: true,
                        attributeFilter: ["aria-expanded"]
                      }).map(() => moreButton.getAttribute("aria-expanded") === "true" ? __privateMethod(this, _GmailMessageView_instances, getOpenMoreMenu_fn).call(this) : null);
                    }).takeUntilBy(__privateGet(this, _stopper)).onValue((openMoreMenu) => {
                      __privateSet(this, _openMoreMenu, openMoreMenu);
                      __privateMethod(this, _GmailMessageView_instances, updateMoreMenu_fn).call(this);
                    });
                  };
                  getMoreButton_fn = function() {
                    if (this.getViewState() !== "EXPANDED") {
                      return null;
                    }
                    return __privateGet(this, _element).querySelector("tr.acZ div.T-I.J-J5-Ji.aap.L3[role=button][aria-haspopup]");
                  };
                  getOpenMoreMenu_fn = function() {
                    const selector_2022_11_23 = "td > div.nH.a98.iY > div.nH .aHU .b7.J-M[aria-haspopup=true]";
                    const selector_2023_11_16 = "div.nH.a98.iY > div.nH .aHU .b7.J-M[aria-haspopup=true]";
                    const maybeMoreMenu = document.body.querySelector(selector_2023_11_16) || document.body.querySelector(selector_2022_11_23);
                    return maybeMoreMenu || document.body.querySelector("td > div.nH.if > div.nH.aHU div.b7.J-M[aria-haspopup=true]");
                  };
                  closeActiveEmailMenu_fn = function() {
                    const moreButton = __privateMethod(this, _GmailMessageView_instances, getMoreButton_fn).call(this);
                    if (moreButton) {
                      (0, simulate_mouse_event.jp)(moreButton);
                    }
                  };
                  updateMoreMenu_fn = function() {
                    __privateGet(this, _moreMenuAddedElements).forEach((el) => {
                      el.remove();
                    });
                    __privateGet(this, _moreMenuAddedElements).length = 0;
                    const openMoreMenu = __privateGet(this, _openMoreMenu);
                    if (openMoreMenu && __privateGet(this, _moreMenuItemDescriptors).length) {
                      const originalHeight = openMoreMenu.offsetHeight;
                      const originalWidth = openMoreMenu.offsetWidth;
                      const dividerEl = document.createElement("div");
                      dividerEl.className = "J-Kh";
                      __privateGet(this, _moreMenuAddedElements).push(dividerEl);
                      openMoreMenu.appendChild(dividerEl);
                      __privateGet(this, _moreMenuItemDescriptors).forEach((options2) => {
                        const itemEl = document.createElement("div");
                        itemEl.className = "J-N";
                        itemEl.setAttribute("role", "menuitem");
                        itemEl.innerHTML = auto_html_js_default()`<div class="J-N-Jz">${options2.title}</div>`;
                        itemEl.addEventListener("mouseenter", () => itemEl.classList.add("J-N-JT"));
                        itemEl.addEventListener("mouseleave", () => itemEl.classList.remove("J-N-JT"));
                        itemEl.addEventListener("click", () => {
                          __privateMethod(this, _GmailMessageView_instances, closeActiveEmailMenu_fn).call(this);
                          options2.onClick();
                        });
                        if (options2.iconUrl || options2.iconClass) {
                          const iconEl = document.createElement("img");
                          iconEl.className = `f4 J-N-JX inboxsdk__message_more_icon ${options2.iconClass || ""}`;
                          iconEl.src = options2.iconUrl || "images/cleardot.gif";
                          const insertionPoint = itemEl.firstElementChild;
                          if (insertionPoint) insertionPoint.appendChild(iconEl);
                        }
                        __privateGet(this, _moreMenuAddedElements).push(itemEl);
                        openMoreMenu.appendChild(itemEl);
                      });
                      const menuRect = openMoreMenu.getBoundingClientRect();
                      const addedWidth = menuRect.width - originalWidth;
                      if (addedWidth > 0) {
                        openMoreMenu.style.left = Math.max(0, parseInt(openMoreMenu.style.left) - addedWidth) + "px";
                      }
                      const moreButton = __privateMethod(this, _GmailMessageView_instances, getMoreButton_fn).call(this);
                      if (moreButton) {
                        const moreButtonRect = moreButton.getBoundingClientRect();
                        if (menuRect.top < moreButtonRect.top) {
                          const addedHeight = menuRect.height - originalHeight;
                          openMoreMenu.style.top = Math.max(0, parseInt(openMoreMenu.style.top) - addedHeight) + "px";
                        }
                      }
                    }
                  };
                  setupMessageStateStream_fn = function() {
                    var self2 = this;
                    __privateGet(this, _eventStream).plug((0, make_mutation_observer_stream.A)(__privateGet(this, _element), {
                      attributes: true,
                      attributeFilter: ["class"],
                      attributeOldValue: true
                    }).takeUntilBy(__privateGet(this, _stopper)).map((mutation) => {
                      const currentClassList = mutation.target.classList;
                      const mutationOldValue = mutation.oldValue;
                      let oldValue;
                      let newValue;
                      if (mutationOldValue.indexOf("kQ") > -1 || mutationOldValue.indexOf("kx") > -1) {
                        oldValue = "HIDDEN";
                      } else if (mutationOldValue.indexOf("kv") > -1 || mutationOldValue.indexOf("ky") > -1) {
                        oldValue = "COLLAPSED";
                      } else if (mutationOldValue.indexOf("h7") > -1) {
                        oldValue = "EXPANDED";
                      }
                      if (currentClassList.contains("kQ") || currentClassList.contains("kx")) {
                        newValue = "HIDDEN";
                      } else if (currentClassList.contains("kv") || currentClassList.contains("ky")) {
                        newValue = "COLLAPSED";
                      } else if (currentClassList.contains("h7")) {
                        newValue = "EXPANDED";
                      }
                      return {
                        oldValue,
                        newValue,
                        currentClassList
                      };
                    }).map((event) => {
                      var _a;
                      if (event.newValue === "EXPANDED" && event.oldValue !== "EXPANDED") {
                        __privateMethod(_a = self2, _GmailMessageView_instances, checkMessageOpenState_fn).call(_a, event.currentClassList);
                      }
                      return event;
                    }).filter((event) => {
                      return event.newValue !== event.oldValue && !!event.oldValue && !!event.newValue;
                    }).map((event) => {
                      return {
                        eventName: "viewStateChange",
                        oldValue: event.oldValue,
                        newValue: event.newValue
                      };
                    }));
                  };
                  processInitialState_fn = function() {
                    __privateMethod(this, _GmailMessageView_instances, checkMessageOpenState_fn).call(this, __privateGet(this, _element).classList);
                  };
                  checkMessageOpenState_fn = function(classList) {
                    if (!classList.contains("h7")) {
                      return;
                    }
                    if (__privateGet(this, _messageLoaded)) {
                      return;
                    }
                    let messageId;
                    try {
                      messageId = this.getMessageID(true);
                    } catch (err) {
                      __privateGet(this, _driver4).getLogger().error(err);
                      return;
                    }
                    __privateSet(this, _messageLoaded, true);
                    try {
                      __privateGet(this, _driver4).associateThreadAndMessageIDs(__privateGet(this, _threadViewDriver).getThreadID(), messageId);
                    } catch (err) {
                      __privateGet(this, _driver4).getLogger().error(err);
                    }
                    __privateSet(this, _gmailAttachmentAreaView, __privateMethod(this, _GmailMessageView_instances, getAttachmentArea_fn).call(this));
                    __privateGet(this, _eventStream).emit({
                      type: "internal",
                      eventName: "messageLoad"
                    });
                    __privateMethod(this, _GmailMessageView_instances, setupReplyStream_fn).call(this);
                  };
                  setupReplyStream_fn = function() {
                    const replyContainer = __privateGet(this, _element).querySelector(".ip");
                    if (!replyContainer) {
                      return;
                    }
                    var self2 = this;
                    var currentReplyElementRemovalStream = null;
                    kefir_esm.combine([(0, make_mutation_observer_chunked_stream.A)(replyContainer, {
                      attributes: true,
                      attributeFilter: ["class"]
                    }), kefir_esm.later(1, null)]).merge(kefir_esm.later(1, void 0)).takeUntilBy(__privateGet(this, _stopper)).beforeEnd(() => "END").onValue((mutation) => {
                      if (mutation !== "END" && replyContainer.classList.contains("adB")) {
                        if (!currentReplyElementRemovalStream) {
                          const replyElement = replyContainer.getElementsByClassName("M9")?.[0] || replyContainer.firstElementChild;
                          __privateSet(self2, _replyElement, replyElement);
                          if (replyElement) {
                            currentReplyElementRemovalStream = kefir_bus_default()();
                            __privateGet(self2, _eventStream).emit({
                              type: "internal",
                              eventName: "replyElement",
                              change: {
                                el: replyElement,
                                removalStream: currentReplyElementRemovalStream
                              }
                            });
                          }
                        }
                      } else {
                        if (currentReplyElementRemovalStream) {
                          var temp = currentReplyElementRemovalStream;
                          currentReplyElementRemovalStream = null;
                          temp.emit(null);
                          temp.end();
                          __privateSet(self2, _replyElement, null);
                        }
                      }
                    });
                  };
                  monitorEmailAddressHovering_fn = function() {
                    var self2 = this;
                    __privateGet(this, _eventStream).plug(kefir_esm.fromEvents(__privateGet(this, _element), "mouseover").map((e) => e.target).filter(function(element) {
                      return element && element.getAttribute("email");
                    }).map(function(element) {
                      let contactType = null;
                      if (!__privateGet(self2, _element).classList.contains("h7")) {
                        contactType = "sender";
                      } else {
                        if (__privateGet(self2, _element).querySelector("h3.iw").contains(element)) {
                          contactType = "sender";
                        } else {
                          contactType = "recipient";
                        }
                      }
                      return {
                        get contact() {
                          var _a;
                          return __privateMethod(_a = self2, _GmailMessageView_instances, getUpdatedContact_fn).call(_a, _extractContactInformation(element));
                        },
                        contactType,
                        eventName: "contactHover",
                        messageViewDriver: self2
                      };
                    }));
                  };
                  getAttachmentArea_fn = function() {
                    if (__privateGet(this, _element).querySelector(".hq")) {
                      return new gmail_attachment_area_view(__privateGet(this, _element).querySelector(".hq"), __privateGet(this, _driver4), this);
                    }
                    return null;
                  };
                  createAttachmentArea_fn = function() {
                    const gmailAttachmentAreaView = new gmail_attachment_area_view(null, __privateGet(this, _driver4), this);
                    const beforeElement = (0, querySelectorOrFail.A)(__privateGet(this, _element), ".hi");
                    const parentNode = beforeElement.parentNode;
                    if (!parentNode) throw new Error("parentNode not found");
                    parentNode.insertBefore(gmailAttachmentAreaView.getElement(), beforeElement);
                    return gmailAttachmentAreaView;
                  };
                  getUpdatedContact_fn = function(inContact) {
                    return getUpdatedContact(inContact, __privateGet(this, _element));
                  };
                  function _extractContactInformation(span) {
                    return {
                      name: span.getAttribute("name"),
                      emailAddress: span.getAttribute("email")
                    };
                  }
                  const gmail_message_view = GmailMessageView;
                  var pdelay_js = __webpack_require__2(8498);
                  var idMap = __webpack_require__2(5183);
                  var SimpleElementView = __webpack_require__2(3741);
                  ;
                  class CustomMessageView extends safe_event_emitter.A {
                    constructor(descriptorStream, onReady) {
                      super();
                      __privateAdd(this, _el);
                      __privateAdd(this, _iconEl);
                      __privateAdd(this, _contentEl);
                      __privateAdd(this, _contentHeaderEl);
                      __privateAdd(this, _contentBodyEl);
                      __publicField(this, "destroyed", false);
                      __privateAdd(this, _stopper2, js_default()());
                      __privateAdd(this, _isCollapsed, true);
                      __privateAdd(this, _lastDescriptor);
                      __privateSet(this, _el, document.createElement("div"));
                      __privateGet(this, _el).classList.add("inboxsdk__custom_message_view");
                      __privateGet(this, _el).classList.add("inboxsdk__custom_message_view_collapsed");
                      __privateSet(this, _iconEl, document.createElement("div"));
                      __privateGet(this, _iconEl).classList.add("inboxsdk__custom_message_view_icon");
                      __privateSet(this, _contentEl, document.createElement("div"));
                      __privateGet(this, _contentEl).classList.add("inboxsdk__custom_message_view_content");
                      __privateSet(this, _contentHeaderEl, document.createElement("div"));
                      __privateGet(this, _contentHeaderEl).classList.add("inboxsdk__custom_message_view_header");
                      __privateSet(this, _contentBodyEl, document.createElement("div"));
                      __privateGet(this, _contentBodyEl).classList.add("inboxsdk__custom_message_view_body");
                      __privateGet(this, _el).appendChild(__privateGet(this, _iconEl));
                      __privateGet(this, _el).appendChild(__privateGet(this, _contentEl));
                      __privateGet(this, _el).addEventListener("click", (e) => {
                        if (__privateGet(this, _isCollapsed)) {
                          this.expand();
                          e.preventDefault();
                          e.stopPropagation();
                        }
                      });
                      __privateGet(this, _contentHeaderEl).addEventListener("click", (e) => {
                        this.collapse();
                        e.preventDefault();
                        e.stopPropagation();
                      });
                      descriptorStream.takeUntilBy(__privateGet(this, _stopper2)).onValue((descriptor) => {
                        __privateGet(this, _el).setAttribute("data-inboxsdk-sortdate", String(descriptor.sortDate.getTime()));
                        const previousDescriptor = __privateGet(this, _lastDescriptor);
                        __privateSet(this, _lastDescriptor, descriptor);
                        if (!previousDescriptor || previousDescriptor.iconUrl !== descriptor.iconUrl) {
                          const img = document.createElement("img");
                          img.src = descriptor.iconUrl;
                          __privateGet(this, _iconEl).innerHTML = "";
                          __privateGet(this, _iconEl).appendChild(img);
                        }
                        if ((!previousDescriptor || previousDescriptor.collapsedEl !== descriptor.collapsedEl) && __privateGet(this, _isCollapsed)) {
                          if (previousDescriptor) previousDescriptor.collapsedEl.remove();
                          __privateGet(this, _contentEl).appendChild(descriptor.collapsedEl);
                        }
                        if (!previousDescriptor || previousDescriptor.headerEl !== descriptor.headerEl) {
                          if (previousDescriptor) previousDescriptor.headerEl.remove();
                          __privateGet(this, _contentHeaderEl).appendChild(descriptor.headerEl);
                        }
                        if (!previousDescriptor || previousDescriptor.bodyEl !== descriptor.bodyEl) {
                          if (previousDescriptor) previousDescriptor.bodyEl.remove();
                          __privateGet(this, _contentBodyEl).appendChild(descriptor.bodyEl);
                        }
                      }).take(1).onValue(onReady);
                    }
                    destroy() {
                      if (this.destroyed) return;
                      this.destroyed = true;
                      __privateGet(this, _stopper2).destroy();
                      this.emit("destroy");
                      __privateGet(this, _el).remove();
                    }
                    expand() {
                      __privateSet(this, _isCollapsed, false);
                      const descriptor = __privateGet(this, _lastDescriptor);
                      if (descriptor) descriptor.collapsedEl.remove();
                      __privateGet(this, _contentEl).appendChild(__privateGet(this, _contentHeaderEl));
                      __privateGet(this, _contentEl).appendChild(__privateGet(this, _contentBodyEl));
                      __privateGet(this, _el).classList.remove("inboxsdk__custom_message_view_collapsed");
                      this.emit("expanded");
                    }
                    collapse() {
                      __privateSet(this, _isCollapsed, true);
                      __privateGet(this, _contentHeaderEl).remove();
                      __privateGet(this, _contentBodyEl).remove();
                      const descriptor = __privateGet(this, _lastDescriptor);
                      if (descriptor) {
                        __privateGet(this, _contentEl).appendChild(descriptor.collapsedEl);
                      }
                      __privateGet(this, _el).classList.add("inboxsdk__custom_message_view_collapsed");
                      this.emit("collapsed");
                    }
                    getElement() {
                      return __privateGet(this, _el);
                    }
                    getSortDate() {
                      if (__privateGet(this, _lastDescriptor)) return __privateGet(this, _lastDescriptor).sortDate;
                      else return null;
                    }
                  }
                  _el = new WeakMap();
                  _iconEl = new WeakMap();
                  _contentEl = new WeakMap();
                  _contentHeaderEl = new WeakMap();
                  _contentBodyEl = new WeakMap();
                  _stopper2 = new WeakMap();
                  _isCollapsed = new WeakMap();
                  _lastDescriptor = new WeakMap();
                  var gmail_element_getter = __webpack_require__2(4003);
                  var lodash_escape = __webpack_require__2(3131);
                  var escape_default = /* @__PURE__ */ __webpack_require__2.n(lodash_escape);
                  var stream_wait_for = __webpack_require__2(1539);
                  var insert_element_in_order = __webpack_require__2(5389);
                  var isElementVisible = __webpack_require__2(8130);
                  var gmail_dropdown_view = __webpack_require__2(3612);
                  var dropdown_button_view_controller = __webpack_require__2(9374);
                  var zip = __webpack_require__2(7981);
                  var zip_default = /* @__PURE__ */ __webpack_require__2.n(zip);
                  var delay_asap = __webpack_require__2(1136);
                  var gmail_thread_row_view = __webpack_require__2(6134);
                  var make_element_child_stream = __webpack_require__2(2843);
                  var assert2 = __webpack_require__2(1602);
                  ;
                  const THREAD_ROW_SELECTED_CLASSNAME = "x7";
                  const THREAD_ROW_SELECTED_CLASSNAME_REGEX = /\bx7\b/;
                  class GmailRowListView {
                    constructor(rootElement, routeViewDriver, gmailDriver) {
                      __publicField(this, "_threadRowViewDrivers", /* @__PURE__ */ new Set());
                      __publicField(this, "_elementsToViews", /* @__PURE__ */ new Map());
                      __publicField(this, "_selectedThreadRowViews", /* @__PURE__ */ new Set());
                      __publicField(this, "_batchedSignalThreadRowViewSelectionChangeScheduled", false);
                      this._eventStreamBus = kefir_bus_default()();
                      this._stopper = this._eventStreamBus.ignoreValues().beforeEnd(() => null);
                      this._gmailDriver = gmailDriver;
                      this._element = rootElement;
                      this._routeViewDriver = routeViewDriver;
                      this._selectionMutationObserver = new MutationObserver((mutations) => {
                        let changed = false;
                        for (let i = 0, len = mutations.length; i < len; i++) {
                          const mutation = mutations[i];
                          const target = mutation.target;
                          const wasSelected = THREAD_ROW_SELECTED_CLASSNAME_REGEX.test(mutation.oldValue);
                          const isSelected = THREAD_ROW_SELECTED_CLASSNAME_REGEX.test(target.className);
                          if (wasSelected !== isSelected) {
                            const view = this._elementsToViews.get(target);
                            if (view) {
                              changed = true;
                              if (isSelected) {
                                this._selectedThreadRowViews.add(view);
                              } else {
                                this._selectedThreadRowViews.delete(view);
                              }
                            }
                          }
                        }
                        if (changed) {
                          this._gmailDriver.signalThreadRowViewSelectionChange();
                        }
                      });
                      this._pendingExpansions = /* @__PURE__ */ new Map();
                      this._pendingExpansionsSignal = kefir_bus_default()();
                      this._pendingExpansionsSignal.bufferBy(this._pendingExpansionsSignal.flatMap(delay_asap.A)).filter((x) => x.length > 0).takeUntilBy(this._stopper).onValue(this._expandColumnJob.bind(this));
                      this._setupToolbarView();
                      this._startWatchingForRowViews();
                    }
                    destroy() {
                      this._selectionMutationObserver.disconnect();
                      this._threadRowViewDrivers.forEach((threadRow) => threadRow.destroy());
                      this._eventStreamBus.end();
                      if (this._toolbarView) {
                        this._toolbarView.destroy();
                      }
                      if (this._selectedThreadRowViews.size) {
                        this._selectedThreadRowViews.clear();
                        this._gmailDriver.signalThreadRowViewSelectionChange();
                      }
                    }
                    getElement() {
                      return this._element;
                    }
                    getRouteViewDriver() {
                      return this._routeViewDriver;
                    }
                    getToolbarView() {
                      return this._toolbarView;
                    }
                    getSelectedThreadRowViewDrivers() {
                      return this._selectedThreadRowViews;
                    }
                    getThreadRowViewDrivers() {
                      return this._threadRowViewDrivers;
                    }
                    getRowViewDriverStream() {
                      return this._rowViewDriverStream;
                    }
                    getEventStream() {
                      return this._eventStreamBus;
                    }
                    _setupToolbarView() {
                      var toolbarElement = this._findToolbarElement();
                      if (toolbarElement) {
                        this._toolbarView = new gmail_toolbar_view(toolbarElement, this._gmailDriver, this._routeViewDriver, this);
                      } else {
                        this._toolbarView = null;
                      }
                    }
                    _findToolbarElement() {
                      const firstTry = this._element.querySelector("[gh=mtb]");
                      if (firstTry) {
                        return firstTry;
                      }
                      const el = find_default()(document.querySelectorAll("[gh=tm]"), (toolbarContainerElement) => toolbarContainerElement.parentElement.parentElement === this._element.parentElement.parentElement.parentElement.parentElement.parentElement || toolbarContainerElement.parentElement.parentElement === this._element.parentElement);
                      return el ? el.querySelector("[gh=mtb]") : null;
                    }
                    // When a new table is added to a row list, if an existing table has had its
                    // column widths modified (by GmailThreadRowView), then the new table needs to
                    // match.
                    _fixColumnWidths(newTableParent) {
                      if (!newTableParent || !newTableParent.parentElement) {
                        return;
                      }
                      const firstTableParent = newTableParent.parentElement.firstElementChild;
                      if (firstTableParent !== newTableParent && firstTableParent) {
                        const firstCols = firstTableParent.querySelectorAll("table.cf > colgroup > col");
                        const newCols = newTableParent.querySelectorAll("table.cf > colgroup > col");
                        (0, assert2.v)(Object.is(firstCols.length, newCols.length));
                        zip_default()(firstCols, newCols).forEach((_ref) => {
                          let [firstCol, newCol] = _ref;
                          newCol.style.width = firstCol.style.width;
                        });
                      }
                    }
                    expandColumn(colSelector, width) {
                      const pendingWidth = this._pendingExpansions.get(colSelector);
                      if (!pendingWidth || width > pendingWidth) {
                        this._pendingExpansions.set(colSelector, width);
                        this._pendingExpansionsSignal.emit(void 0);
                      }
                    }
                    _expandColumnJob() {
                      this._pendingExpansions.forEach((width, colSelector) => {
                        Array.prototype.forEach.call(this._element.querySelectorAll("table.cf > colgroup > " + colSelector), (col) => {
                          const currentWidth = parseInt(col.style.width, 10);
                          if (isNaN(currentWidth) || currentWidth < width) {
                            col.style.width = width + "px";
                          }
                        });
                      });
                      this._pendingExpansions.clear();
                    }
                    _batchedSignalThreadRowViewSelectionChange() {
                      if (this._batchedSignalThreadRowViewSelectionChangeScheduled) {
                        return;
                      }
                      this._batchedSignalThreadRowViewSelectionChangeScheduled = true;
                      (0, delay_asap.A)(null).takeUntilBy(this._stopper).onValue(() => {
                        this._batchedSignalThreadRowViewSelectionChangeScheduled = false;
                        this._gmailDriver.signalThreadRowViewSelectionChange();
                      });
                    }
                    _startWatchingForRowViews() {
                      const tableDivParents = Array.from(this._element.querySelectorAll("div.Cp"));
                      const elementStream = kefir_esm.merge(tableDivParents.map(make_element_child_stream.A)).flatMap((event) => {
                        this._fixColumnWidths(event.el);
                        const tbody = (0, querySelectorOrFail.A)(event.el, "table > tbody");
                        return (0, make_element_child_stream.A)(tbody).takeUntilBy(event.removalStream);
                      }).filter((rowEvent) => Boolean(rowEvent.el.id) && // let other extensions opt their rows out of our processing
                      !rowEvent.el.classList.contains("inboxsdk__ignore_row") && !rowEvent.el.classList.contains("bundle"));
                      const laterStream = kefir_esm.later(2, void 0);
                      this._rowViewDriverStream = elementStream.map((event) => {
                        const element = event.el;
                        this._selectionMutationObserver.observe(element, {
                          attributes: true,
                          attributeFilter: ["class"],
                          attributeOldValue: true
                        });
                        const view = new gmail_thread_row_view.A(element, this, this._gmailDriver);
                        this._elementsToViews.set(element, view);
                        if (element.classList.contains(THREAD_ROW_SELECTED_CLASSNAME)) {
                          this._selectedThreadRowViews.add(view);
                          this._batchedSignalThreadRowViewSelectionChange();
                        }
                        event.removalStream.take(1).onValue(() => {
                          if (this._selectedThreadRowViews.has(view)) {
                            this._selectedThreadRowViews.delete(view);
                            this._batchedSignalThreadRowViewSelectionChange();
                          }
                          this._elementsToViews.delete(element);
                          view.destroy();
                        });
                        return view;
                      }).flatMap((threadRowView) => {
                        if (threadRowView.getAlreadyHadModifications()) {
                          return laterStream.flatMap(() => threadRowView.waitForReady()).takeUntilBy(threadRowView.getStopper());
                        } else {
                          return threadRowView.waitForReady().takeUntilBy(threadRowView.getStopper());
                        }
                      }).takeUntilBy(this._stopper);
                      this._rowViewDriverStream.onValue((x) => this._addThreadRowView(x));
                    }
                    _addThreadRowView(gmailThreadRowView) {
                      this._threadRowViewDrivers.add(gmailThreadRowView);
                      gmailThreadRowView.getStopper().takeUntilBy(this._stopper).onValue(() => {
                        this._threadRowViewDrivers.delete(gmailThreadRowView);
                      });
                    }
                  }
                  const gmail_row_list_view = GmailRowListView;
                  ;
                  const SECTION_NAMES = Object.freeze({
                    INBOX_STATE: "INBOX_STATE",
                    METADATA_STATE: "METADATA_STATE",
                    OTHER: "OTHER"
                  });
                  ;
                  class GmailToolbarView {
                    constructor(element, driver, routeViewDriver, parent) {
                      __publicField(this, "_buttonViewControllers", /* @__PURE__ */ new Set());
                      __publicField(this, "_moreMenuItems", []);
                      __publicField(this, "_isUpdateButtonClassesScheduled", false);
                      __publicField(this, "_moreMenuItemsContainer", null);
                      this._element = element;
                      this._driver = driver;
                      this._stopper = js_default()();
                      this._routeViewDriver = routeViewDriver;
                      if (this._getMoveSectionElement()) {
                        this._ready = kefir_esm.constant(this);
                      } else {
                        this._ready = (0, stream_wait_for.A)(() => !!this._getMoveSectionElement()).takeUntilBy(this._stopper).map(() => this).toProperty();
                      }
                      this._ready.onValue(() => {
                        this._startMonitoringMoreMenu();
                        this._determineToolbarState();
                        this._determineToolbarIconMode();
                        this._setupToolbarStateMonitoring();
                      });
                      if (parent instanceof gmail_thread_view) {
                        this._threadViewDriver = parent;
                        this._ready.onValue(() => {
                          this._element.setAttribute("data-thread-toolbar", "true");
                        });
                      } else if (parent instanceof gmail_row_list_view) {
                        this._rowListViewDriver = parent;
                        this._ready.onValue(() => {
                          this._element.setAttribute("data-rowlist-toolbar", "true");
                        });
                      } else {
                        throw new Error("Invalid parent");
                      }
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getElement() {
                      return this._element;
                    }
                    getRouteViewDriver() {
                      return this._routeViewDriver;
                    }
                    getThreadViewDriver() {
                      return this._threadViewDriver;
                    }
                    isForRowList() {
                      return this._rowListViewDriver != null;
                    }
                    isForThread() {
                      return this._threadViewDriver != null;
                    }
                    getThreadRowViewDrivers() {
                      if (!this._rowListViewDriver) {
                        console.error("missing this._rowListViewDriver");
                        return /* @__PURE__ */ new Set();
                      }
                      return this._rowListViewDriver.getThreadRowViewDrivers();
                    }
                    addButton(buttonDescriptor, id) {
                      const buttonStopper = js_default()();
                      this._stopper.takeUntilBy(buttonStopper).onValue(() => {
                        buttonStopper.destroy();
                      });
                      const toolbarSections = SECTION_NAMES;
                      this._ready.takeUntilBy(buttonStopper).onValue(() => {
                        if (buttonDescriptor.section === toolbarSections.OTHER) {
                          const entry = {
                            buttonDescriptor
                          };
                          this._moreMenuItems.push(entry);
                          this._addToOpenMoreMenu(buttonDescriptor);
                          buttonStopper.onValue(() => {
                            this._moreMenuItems = this._moreMenuItems.filter((_entry) => _entry !== entry);
                            this._addMoreItems();
                          });
                        } else {
                          const sectionElement = this._getSectionElement(buttonDescriptor.section, toolbarSections);
                          if (sectionElement) {
                            const buttonViewController = this._createButtonViewController(buttonDescriptor);
                            this._buttonViewControllers.add(buttonViewController);
                            buttonStopper.onValue(() => {
                              this._buttonViewControllers.delete(buttonViewController);
                              buttonViewController.destroy();
                            });
                            buttonViewController.getView().getElement().__addButton_ownedByExtension = true;
                            buttonViewController.getView().getElement().setAttribute("data-add-button-debug", JSON.stringify({
                              id,
                              title: buttonDescriptor.title,
                              hasThreadViewDriver: this.isForThread(),
                              hasRowListViewDriver: this.isForRowList()
                            }));
                            buttonViewController.getView().getElement().setAttribute("data-order-hint", String(buttonDescriptor.orderHint || 0));
                            (0, insert_element_in_order.A)(sectionElement, buttonViewController.getView().getElement());
                            kefir_esm.merge([kefir_esm.constant(-1), kefir_esm.later(1e3, 1e3)]).map((delay) => {
                              const duplicates = Array.from(sectionElement.children).filter((el) => buttonViewController.getView().getElement().getAttribute("data-rowlist-toolbar") === el.getAttribute("data-rowlist-toolbar") && buttonViewController.getView().getElement().getAttribute("data-toolbar-expanded") === el.getAttribute("data-toolbar-expanded")).filter((el) => el.hasAttribute("data-add-button-debug")).map((el) => Object.assign({
                                ownedByExtension: !!el.__addButton_ownedByExtension
                              }, JSON.parse(el.getAttribute("data-add-button-debug") || "null"))).filter((_ref) => {
                                let {
                                  title
                                } = _ref;
                                return title === buttonDescriptor.title;
                              });
                              return {
                                delay,
                                duplicates
                              };
                            }).filter((_ref2) => {
                              let {
                                duplicates
                              } = _ref2;
                              return duplicates.length > 1;
                            }).take(1).takeUntilBy(this._stopper).onValue((_ref3) => {
                              let {
                                delay,
                                duplicates
                              } = _ref3;
                              lib_logger.A.error(new Error("Duplicate toolbar button"), {
                                delay,
                                duplicates,
                                dataThreadToolbar: this._element.getAttribute("data-thread-toolbar"),
                                dataRowlistToolbar: this._element.getAttribute("data-rowlist-toolbar")
                              });
                            });
                            this._updateButtonClasses(this._element);
                            buttonViewController.getView().setEnabled(this._toolbarState === "EXPANDED");
                          }
                        }
                      });
                      return {
                        getStopper: () => buttonStopper,
                        destroy: () => {
                          buttonStopper.destroy();
                        }
                      };
                    }
                    waitForReady() {
                      return this._ready;
                    }
                    _createButtonViewController(buttonDescriptor) {
                      const buttonView = this._getButtonView(buttonDescriptor);
                      buttonDescriptor.buttonView = buttonView;
                      let buttonViewController = null;
                      if (buttonDescriptor.hasDropdown) {
                        buttonViewController = new dropdown_button_view_controller.A({
                          buttonView,
                          dropdownViewDriverClass: gmail_dropdown_view.A,
                          dropdownShowFunction: buttonDescriptor.onClick,
                          dropdownPositionOptions: {
                            position: "bottom",
                            hAlign: "left"
                          }
                        });
                      } else {
                        buttonViewController = new basic_button_view_controller.A(buttonDescriptor);
                      }
                      return buttonViewController;
                    }
                    _getButtonView(buttonDescriptor) {
                      const buttonView = new button_view.A({
                        ...buttonDescriptor,
                        noArrow: true
                      });
                      if (this._rowListViewDriver) {
                        buttonView.getElement().setAttribute("data-rowlist-toolbar", "true");
                        buttonView.getElement().setAttribute("data-toolbar-expanded", "true");
                      } else if (this._threadViewDriver) {
                        buttonView.getElement().setAttribute("data-thread-toolbar", "true");
                      }
                      buttonView.getElement().setAttribute("role", "button");
                      return buttonView;
                    }
                    _startMonitoringMoreMenu() {
                      const moreButtonElement = this._element.querySelector(".nf[role=button]");
                      if (!moreButtonElement) {
                        return;
                      }
                      (0, make_mutation_observer_stream.A)(moreButtonElement, {
                        attributes: true,
                        attributeFilter: ["aria-expanded"]
                      }).toProperty(() => null).takeUntilBy(this._stopper).map(() => moreButtonElement.getAttribute("aria-expanded")).onValue((ariaExpanded) => {
                        if (ariaExpanded !== "true") {
                          this._clearMoreItems();
                        } else {
                          this._addMoreItems();
                        }
                      });
                    }
                    _determineToolbarState() {
                      const moveSectionElement = this._getMoveSectionElement();
                      if (!moveSectionElement) throw new Error("No move section element");
                      if (moveSectionElement.style.display === "none") {
                        this._toolbarState = "COLLAPSED";
                      } else {
                        this._toolbarState = "EXPANDED";
                      }
                    }
                    _determineToolbarIconMode() {
                      const moveSectionElement = this._getMoveSectionElement();
                      if (!moveSectionElement) throw new Error("No move section element");
                      const isIconMode = Array.from(moveSectionElement.querySelectorAll("[role=button]:not(.inboxsdk__button)")).some((buttonElement) => buttonElement.hasAttribute("title") || buttonElement.hasAttribute("data-tooltip"));
                      this._element.setAttribute("data-toolbar-icononly", isIconMode ? "true" : "false");
                    }
                    _setupToolbarStateMonitoring() {
                      const moveSectionElement = this._getMoveSectionElement();
                      if (!moveSectionElement) throw new Error("No move section element");
                      (0, make_mutation_observer_stream.A)(moveSectionElement, {
                        attributes: true,
                        attributeFilter: ["style"]
                      }).takeUntilBy(this._stopper).onValue((mutation) => {
                        if (mutation.target instanceof HTMLElement && mutation.target.style.display === "none") {
                          this._toolbarState = "COLLAPSED";
                        } else {
                          this._toolbarState = "EXPANDED";
                        }
                        this._updateButtonClasses(this._element);
                        this._updateButtonEnabledState();
                      });
                    }
                    _getSectionElement(sectionName, toolbarSections) {
                      switch (sectionName) {
                        case toolbarSections.INBOX_STATE:
                          return this._getArchiveSectionElement();
                        case toolbarSections.METADATA_STATE:
                          return this._getMoveSectionElement();
                        default:
                          return null;
                      }
                    }
                    _getArchiveSectionElement() {
                      return this._getSectionElementForButtonSelector(".ar9, .aFh, .aFj, .lR, .nN, .nX, .aFk");
                    }
                    _getCheckboxSectionElement() {
                      return this._getSectionElementForButtonSelector(".T-Jo-auh");
                    }
                    _getMoveSectionElement() {
                      return this._getSectionElementForButtonSelector(".asb, .ase, .ns, .mw, .bq5");
                    }
                    _getSectionElementForButtonSelector(buttonSelector) {
                      const sectionElements = this._element.querySelectorAll(".G-Ni");
                      for (let ii = 0; ii < sectionElements.length; ii++) {
                        if (sectionElements[ii].querySelector(buttonSelector)) {
                          return sectionElements[ii];
                        }
                      }
                      return null;
                    }
                    _updateButtonClasses(element) {
                      if (this._isUpdateButtonClassesScheduled) return;
                      this._isUpdateButtonClassesScheduled = true;
                      browser_asap_default()(() => {
                        if (this._toolbarState === "EXPANDED") {
                          element.setAttribute("data-toolbar-expanded", "true");
                        } else if (this._toolbarState === "COLLAPSED") {
                          element.setAttribute("data-toolbar-expanded", "false");
                        }
                        const buttons = element.querySelectorAll(".G-Ni > [role=button]");
                        Array.prototype.forEach.call(buttons, (button) => {
                          let current = button;
                          for (let ii = 0; ii < 1e5; ii++) {
                            if (current.previousElementSibling) {
                              if (current.previousElementSibling.classList.contains("inboxsdk__button")) {
                                if ((0, isElementVisible.A)(current.previousElementSibling)) {
                                  button.classList.add("T-I-Js-Gs");
                                  break;
                                } else {
                                  current = current.previousElementSibling;
                                }
                              } else {
                                button.classList.add("T-I-Js-Gs");
                                break;
                              }
                            } else {
                              button.classList.remove("T-I-Js-Gs");
                              break;
                            }
                          }
                          current = button;
                          for (let ii = 0; ii < 1e5; ii++) {
                            if (current.nextElementSibling) {
                              if (current.nextElementSibling.classList.contains("inboxsdk__button")) {
                                if ((0, isElementVisible.A)(current.nextElementSibling)) {
                                  button.classList.add("T-I-Js-IF");
                                  break;
                                } else {
                                  current = current.nextElementSibling;
                                }
                              } else {
                                button.classList.add("T-I-Js-IF");
                                break;
                              }
                            } else {
                              button.classList.remove("T-I-Js-IF");
                              break;
                            }
                          }
                        });
                        this._isUpdateButtonClassesScheduled = false;
                      });
                    }
                    _updateButtonEnabledState() {
                      const enabled = this._toolbarState === "EXPANDED";
                      this._buttonViewControllers.forEach((buttonViewController) => {
                        buttonViewController.getView().setEnabled(enabled);
                      });
                    }
                    _addMoreItems() {
                      this._clearMoreItems();
                      if (this._toolbarState !== "EXPANDED") {
                        return;
                      }
                      this._moreMenuItems.forEach((item) => {
                        this._addToOpenMoreMenu(item.buttonDescriptor);
                      });
                    }
                    _clearMoreItems() {
                      if (this._moreMenuItemsContainer) {
                        this._moreMenuItemsContainer.remove();
                        this._moreMenuItemsContainer = null;
                      }
                    }
                    _addToOpenMoreMenu(buttonDescriptor) {
                      const moreMenu = gmail_element_getter.A.getActiveMoreMenu();
                      if (!moreMenu) {
                        return;
                      }
                      const appDiv = this._getMoreMenuItemsContainer(moreMenu);
                      const menuItemElement = this._getMoreMenuItemElement(buttonDescriptor);
                      (0, insert_element_in_order.A)(appDiv, menuItemElement);
                    }
                    _getMoreMenuItemsContainer(moreMenu) {
                      if (this._moreMenuItemsContainer) {
                        return this._moreMenuItemsContainer;
                      }
                      const container = this._moreMenuItemsContainer = document.createElement("div");
                      container.setAttribute("data-group-order-hint", this._driver.getAppId());
                      container.innerHTML = '<div class="J-Kh"></div>';
                      (0, insert_element_in_order.A)(moreMenu, container);
                      return container;
                    }
                    _getMoreMenuItemElement(buttonDescriptor) {
                      const itemElement = document.createElement("div");
                      itemElement.setAttribute("class", "J-N inboxsdk__menuItem");
                      itemElement.setAttribute("role", "menuitem");
                      itemElement.setAttribute("data-order-hint", String(buttonDescriptor.orderHint || 0));
                      itemElement.innerHTML = ['<div class="J-N-Jz" style="-webkit-user-select: none;">', buttonDescriptor.iconUrl ? '<img class="J-N-JX" src="' + escape_default()(buttonDescriptor.iconUrl) + '" />' : "", buttonDescriptor.iconClass ? '<span class="inboxsdk__icon J-N-JX ' + escape_default()(buttonDescriptor.iconClass) + '"></span>' : "", escape_default()(buttonDescriptor.title), "</div>"].join("");
                      itemElement.addEventListener("mouseenter", () => itemElement.classList.add("J-N-JT"));
                      itemElement.addEventListener("mouseleave", () => itemElement.classList.remove("J-N-JT"));
                      itemElement.addEventListener("click", () => {
                        if (buttonDescriptor.onClick) {
                          buttonDescriptor.onClick({});
                        }
                      });
                      return itemElement;
                    }
                    destroy() {
                      const element = this._element;
                      if (this._threadViewDriver) {
                        this._element.removeAttribute("data-thread-toolbar");
                      } else if (this._rowListViewDriver) {
                        this._element.removeAttribute("data-rowlist-toolbar");
                      }
                      this._clearMoreItems();
                      this._stopper.destroy();
                      this._updateButtonClasses(element);
                    }
                  }
                  const gmail_toolbar_view = GmailToolbarView;
                  var isStreakAppId = __webpack_require__2(8579);
                  var censorHTMLstring = __webpack_require__2(4158);
                  ;
                  let hasLoggedAddonInfo = false;
                  class GmailThreadView {
                    constructor(element, routeViewDriver, driver) {
                      __privateAdd(this, _GmailThreadView_instances);
                      __privateAdd(this, _element2);
                      __privateAdd(this, _routeViewDriver);
                      __privateAdd(this, _driver5);
                      __privateAdd(this, _isPreviewedThread);
                      __privateAdd(this, _eventStream2);
                      __privateAdd(this, _stopper3, js_default()());
                      __privateAdd(this, _toolbarView);
                      __privateAdd(this, _messageViewDrivers);
                      __privateAdd(this, _newMessageMutationObserver);
                      __privateAdd(this, _readyStream2);
                      __privateAdd(this, _threadID);
                      __privateAdd(this, _syncThreadID);
                      __privateAdd(this, _customMessageViews, /* @__PURE__ */ new Set());
                      __privateAdd(this, _hiddenCustomMessageViews, /* @__PURE__ */ new Set());
                      __privateAdd(this, _hiddenCustomMessageNoticeProvider);
                      __privateAdd(this, _hiddenCustomMessageNoticeElement);
                      __privateAdd(this, _resolveUnmountHiddenNoticePromise);
                      __privateAdd(this, _subjectContainerSelectors, {
                        "2022_10_21": ".a98.iY > .nH",
                        "2022_10_12": ".PeIF1d > .nH",
                        [2018]: ".if > .nH"
                      });
                      __privateAdd(this, _subjectContainerSelectorsAfterNov162023, {
                        "2023_11_16": "* > .nH"
                      });
                      __privateAdd(this, _subjectAISuggestionsContainerSelectors, {
                        "2024_04_26": ".nH > .einvLd"
                      });
                      let isPreviewedThread = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false;
                      __privateSet(this, _element2, element);
                      __privateSet(this, _routeViewDriver, routeViewDriver);
                      __privateSet(this, _driver5, driver);
                      __privateSet(this, _isPreviewedThread, isPreviewedThread);
                      __privateSet(this, _eventStream2, kefir_bus_default()());
                      __privateSet(this, _messageViewDrivers, []);
                      __privateMethod(this, _GmailThreadView_instances, logAddonElementInfo_fn).call(this).catch((err) => __privateGet(this, _driver5).getLogger().error(err));
                      const waitForSidebarReady = __privateGet(this, _driver5).waitForGlobalSidebarReady().merge(__privateGet(this, _driver5).delayToTimeAfterReady(15 * 1e3).flatMap(() => kefir_esm.constantError(new Error("15 second timeout while waiting for sidebar fired")))).take(1).takeErrors(1).flatMapErrors((err) => {
                        __privateGet(this, _driver5).getLogger().error(err);
                        return kefir_esm.constant(null);
                      }).toProperty();
                      let combinedReadyStream;
                      if (driver.getOpts().REQUESTED_API_VERSION === 1) {
                        combinedReadyStream = kefir_esm.combine([waitForSidebarReady, kefir_esm.fromPromise(this.getThreadIDAsync())]);
                      } else {
                        combinedReadyStream = waitForSidebarReady;
                      }
                      __privateSet(this, _readyStream2, combinedReadyStream.map(() => {
                        __privateMethod(this, _GmailThreadView_instances, setupToolbarView_fn).call(this);
                        __privateMethod(this, _GmailThreadView_instances, setupMessageViewStream_fn).call(this);
                        return null;
                      }).takeUntilBy(__privateGet(this, _stopper3)).toProperty());
                      __privateMethod(this, _GmailThreadView_instances, listenToExpandCollapseAll_fn).call(this);
                      __privateGet(this, _stopper3).take(1).onValue(() => {
                        if (__privateGet(this, _resolveUnmountHiddenNoticePromise)) {
                          __privateGet(this, _resolveUnmountHiddenNoticePromise).call(this);
                        }
                      });
                    }
                    // TODO use livesets eventually
                    getMessageViewDriverStream() {
                      return kefir_esm.constant(__privateGet(this, _messageViewDrivers)).flatten().merge(__privateGet(this, _eventStream2).filter((event) => event.type === "internal" && event.eventName === "messageCreated").map((event) => event.view));
                    }
                    isLoadingStub() {
                      return false;
                    }
                    getStopper() {
                      return __privateGet(this, _stopper3);
                    }
                    getEventStream() {
                      return __privateGet(this, _eventStream2);
                    }
                    getElement() {
                      return __privateGet(this, _element2);
                    }
                    getRouteViewDriver() {
                      return __privateGet(this, _routeViewDriver);
                    }
                    getIsPreviewedThread() {
                      return __privateGet(this, _isPreviewedThread);
                    }
                    getToolbarView() {
                      return __privateGet(this, _toolbarView);
                    }
                    getMessageViewDrivers() {
                      return __privateGet(this, _messageViewDrivers);
                    }
                    destroy() {
                      __privateGet(this, _eventStream2).end();
                      __privateGet(this, _stopper3).destroy();
                      if (__privateGet(this, _toolbarView)) __privateGet(this, _toolbarView).destroy();
                      __privateGet(this, _messageViewDrivers).forEach((messageView) => {
                        messageView.destroy();
                      });
                      __privateGet(this, _messageViewDrivers).length = 0;
                      if (__privateGet(this, _newMessageMutationObserver)) {
                        __privateGet(this, _newMessageMutationObserver).disconnect();
                      }
                      for (const customMessageView of __privateGet(this, _customMessageViews)) {
                        customMessageView.destroy();
                      }
                    }
                    addSidebarContentPanel(descriptor) {
                      const sidebar = __privateGet(this, _driver5).getGlobalSidebar();
                      return sidebar.addThreadSidebarContentPanel(descriptor, this);
                    }
                    addNoticeBar() {
                      const el = document.createElement("div");
                      el.className = (0, idMap.A)("thread_noticeBar");
                      let version2;
                      let subjectContainer;
                      let selectorsToTry = __privateGet(this, _subjectContainerSelectors);
                      if (__privateGet(this, _element2).matches(".a98.iY")) {
                        selectorsToTry = __privateGet(this, _subjectContainerSelectorsAfterNov162023);
                      }
                      for (const [currentVersion, selector] of Object.entries(selectorsToTry)) {
                        const el2 = __privateGet(this, _element2).querySelector(selector);
                        if (!el2) {
                          continue;
                        }
                        version2 = currentVersion;
                        subjectContainer = el2;
                        break;
                      }
                      if (!subjectContainer) throw new Error("Failed to find subject container");
                      __privateGet(this, _driver5).getLogger().eventSdkPassive("addNoticeBar subjectContainer", {
                        version: version2
                      });
                      for (const [currentVersion, selector] of Object.entries(__privateGet(this, _subjectAISuggestionsContainerSelectors))) {
                        const hasAIButtonsSubjectContainer = !!__privateGet(this, _element2).querySelector(selector);
                        if (!hasAIButtonsSubjectContainer) {
                          continue;
                        }
                        __privateGet(this, _driver5).getLogger().eventSdkPassive("addNoticeBar AIButtonsSubjectContainer", {
                          version: currentVersion
                        });
                        el.style.marginBottom = "8px";
                        break;
                      }
                      subjectContainer.insertAdjacentElement("afterend", el);
                      const view = new SimpleElementView.A(el);
                      __privateGet(this, _stopper3).takeUntilBy(kefir_esm.fromEvents(view, "destroy")).onValue(() => view.destroy());
                      return view;
                    }
                    registerHiddenCustomMessageNoticeProvider(provider) {
                      __privateSet(this, _hiddenCustomMessageNoticeProvider, provider);
                    }
                    addCustomMessage(descriptorStream) {
                      const parentElement = __privateGet(this, _element2).parentElement;
                      if (!parentElement) throw new Error("missing parent element");
                      const customMessageView = new CustomMessageView(descriptorStream, () => {
                        __privateGet(this, _readyStream2).onValue(async () => {
                          const messageContainer = __privateGet(this, _element2).querySelector("[role=list]");
                          if (!messageContainer) return;
                          let mostRecentDate = Number.MIN_SAFE_INTEGER;
                          let insertBeforeMessage;
                          let isInHidden = false;
                          const messages = [...await Promise.all(__privateGet(this, _messageViewDrivers).map(async (messageView) => ({
                            sortDatetime: await messageView.getDate() || 0,
                            isHidden: messageView.getViewState() === "HIDDEN",
                            element: messageView.getElement()
                          }))), ...Array.from(__privateGet(this, _customMessageViews)).filter(
                            (cmv) => cmv !== customMessageView && cmv.getElement().parentElement
                            /* it has been inserted into dom */
                          ).map((cmv) => {
                            const date = cmv.getSortDate();
                            const datetime = date ? date.getTime() : null;
                            return {
                              sortDatetime: datetime || 0,
                              isHidden: cmv.getElement().classList.contains("inboxsdk__custom_message_view_hidden"),
                              element: cmv.getElement()
                            };
                          })].sort((a, b) => a.sortDatetime - b.sortDatetime);
                          const messageDate = customMessageView.getSortDate();
                          if (!messageDate) return;
                          for (const message of messages) {
                            isInHidden = message.isHidden;
                            if (messageDate.getTime() >= mostRecentDate && messageDate.getTime() <= message.sortDatetime) {
                              insertBeforeMessage = message.element;
                              break;
                            }
                            mostRecentDate = message.sortDatetime;
                          }
                          if (insertBeforeMessage) insertBeforeMessage.insertAdjacentElement("beforebegin", customMessageView.getElement());
                          else messageContainer.insertAdjacentElement("beforeend", customMessageView.getElement());
                          if (isInHidden) {
                            __privateMethod(this, _GmailThreadView_instances, setupHiddenCustomMessage_fn).call(this, customMessageView);
                          }
                          parentElement.classList.add("inboxsdk__thread_view_with_custom_view");
                        });
                      });
                      __privateGet(this, _customMessageViews).add(customMessageView);
                      customMessageView.on("destroy", () => {
                        __privateGet(this, _customMessageViews).delete(customMessageView);
                        if (__privateGet(this, _customMessageViews).size > 0) parentElement.classList.add("inboxsdk__thread_view_with_custom_view");
                        else parentElement.classList.remove("inboxsdk__thread_view_with_custom_view");
                      });
                      return customMessageView;
                    }
                    getSubject() {
                      var subjectElement = __privateGet(this, _element2).querySelector(".ha h2");
                      if (!subjectElement) {
                        return "";
                      }
                      if (subjectElement.querySelector("img[data-emoji]")) {
                        return Array.from(subjectElement.childNodes).map((c) => {
                          if (c instanceof HTMLElement && c.nodeName === "IMG") {
                            const maybeEmoji = c.getAttribute("data-emoji");
                            return maybeEmoji;
                          }
                          if (c.nodeName === "#text") {
                            return c.wholeText;
                          }
                        }).filter((x) => x != null).join("");
                      }
                      return subjectElement.textContent;
                    }
                    getInternalID() {
                      return __privateGet(this, _syncThreadID) || this.getThreadID();
                    }
                    // Follows a similar structure to getThreadIDAsync, but gives up if async work is needed
                    getThreadID() {
                      if (__privateGet(this, _threadID)) return __privateGet(this, _threadID);
                      const idElement = __privateGet(this, _element2).querySelector("[data-legacy-thread-id]");
                      if (!idElement) throw new Error("threadID element not found");
                      const syncAttributeValue = idElement.getAttribute("data-thread-perm-id");
                      if (!__privateGet(this, _syncThreadID) && syncAttributeValue && syncAttributeValue !== "undefined") {
                        __privateSet(this, _syncThreadID, syncAttributeValue);
                      }
                      let threadID = idElement.getAttribute("data-legacy-thread-id");
                      if (!threadID) {
                        const err = new Error("Failed to get id for thread: data-legacy-thread-id attribute missing");
                        __privateGet(this, _driver5).getLogger().error(err);
                      }
                      if (!threadID) {
                        if (__privateGet(this, _isPreviewedThread)) {
                          threadID = __privateGet(this, _driver5).getPageCommunicator().getCurrentThreadID(__privateGet(this, _element2), true);
                        } else {
                          const params = __privateGet(this, _routeViewDriver) ? __privateGet(this, _routeViewDriver).getParams() : null;
                          if (params && typeof params.threadID === "string") {
                            threadID = params.threadID;
                          } else {
                            const err = new Error("Failed to get id for thread");
                            __privateGet(this, _driver5).getLogger().error(err);
                            throw err;
                          }
                        }
                      }
                      __privateSet(this, _threadID, threadID);
                      return threadID;
                    }
                    async getThreadIDAsync() {
                      if (__privateGet(this, _threadID)) return __privateGet(this, _threadID);
                      const idElement = __privateGet(this, _element2).querySelector("[data-legacy-thread-id]");
                      if (!idElement) throw new Error("threadID element not found");
                      const syncAttributeValue = idElement.getAttribute("data-thread-perm-id");
                      if (!__privateGet(this, _syncThreadID) && syncAttributeValue && syncAttributeValue !== "undefined") {
                        __privateSet(this, _syncThreadID, syncAttributeValue);
                      }
                      __privateSet(this, _threadID, idElement.getAttribute("data-legacy-thread-id"));
                      if (!__privateGet(this, _threadID) && __privateGet(this, _syncThreadID)) {
                        __privateSet(this, _threadID, await __privateGet(this, _driver5).getOldGmailThreadIdFromSyncThreadId(__privateGet(this, _syncThreadID)));
                      }
                      if (__privateGet(this, _threadID)) return __privateGet(this, _threadID);
                      else throw new Error("Failed to get id for thread");
                    }
                    addLabel() {
                      const labelContainer = __privateGet(this, _element2).querySelector(".ha .J-J5-Ji");
                      if (!labelContainer) {
                        throw new Error("Thread view label container not found");
                      }
                      const el = document.createElement("span");
                      labelContainer.appendChild(el);
                      const view = new SimpleElementView.A(el);
                      const observer2 = new MutationObserver((mutationsList) => {
                        if (mutationsList.some((mutation) => mutation.type === "childList" && mutation.removedNodes && mutation.removedNodes.length && mutation.removedNodes.length > 0)) {
                          if (!labelContainer.contains(el)) {
                            labelContainer.appendChild(el);
                          }
                        }
                      });
                      observer2.observe(labelContainer, {
                        childList: true
                      });
                      __privateGet(this, _stopper3).takeUntilBy(kefir_esm.fromEvents(view, "destroy")).onValue(() => view.destroy());
                      kefir_esm.fromEvents(view, "destroy").take(1).onValue(() => {
                        observer2.disconnect();
                      });
                      return view;
                    }
                    addSubjectButton(button) {
                      const subjectParent = __privateGet(this, _element2).querySelector(".V8djrc.byY");
                      if (!subjectParent) {
                        throw new querySelectorOrFail.a(".V8djrc.byY", {
                          cause: "Subject wrapper element not found"
                        });
                      }
                      const buttonOptions = {
                        buttonView: new button_view.A(button),
                        activateFunction: button.activateFunction,
                        onClick: button.onClick
                      };
                      const buttonElement = buttonOptions.buttonView.getElement();
                      const subjectToolbarElement = __privateMethod(this, _GmailThreadView_instances, findSubjectToolbarElement_fn).call(this);
                      if (subjectToolbarElement) {
                        subjectToolbarElement.prepend(buttonElement);
                      }
                      const observer2 = new MutationObserver((mutationsList) => {
                        if (mutationsList.some((mutation) => mutation.type === "childList")) {
                          const subjectToolbarElement2 = __privateMethod(this, _GmailThreadView_instances, findSubjectToolbarElement_fn).call(this);
                          if (subjectToolbarElement2 && !subjectToolbarElement2.contains(buttonElement)) {
                            subjectToolbarElement2.prepend(buttonElement);
                          }
                        }
                      });
                      observer2.observe(subjectParent, {
                        childList: true,
                        subtree: true
                      });
                      __privateGet(this, _stopper3).takeUntilBy(kefir_esm.fromEvents(buttonElement, "destroy")).onValue(() => buttonOptions.buttonView.destroy());
                      kefir_esm.fromEvents(buttonElement, "destroy").take(1).onValue(() => {
                        observer2.disconnect();
                      });
                      return new basic_button_view_controller.A(buttonOptions);
                    }
                    addFooterButton(button) {
                      const messagesSelector = "div.nH .aHU";
                      const messagesContainer = __privateGet(this, _element2).querySelector(messagesSelector);
                      if (!messagesContainer) {
                        __privateGet(this, _driver5).getLogger().eventSdkPassive("Footer button selector fail", {
                          html: (0, censorHTMLtree.A)(__privateGet(this, _element2))
                        });
                        throw new querySelectorOrFail.a(messagesSelector, {
                          cause: "Last message footer element not found"
                        });
                      }
                      const buttonOptions = {
                        buttonView: new button_view.A(button),
                        activateFunction: button.activateFunction,
                        onClick: button.onClick
                      };
                      const buttonElement = buttonOptions.buttonView.getElement();
                      const subjectToolbarElement = __privateMethod(this, _GmailThreadView_instances, findBottomReplyToolbarElement_fn).call(this);
                      if (subjectToolbarElement) {
                        subjectToolbarElement.appendChild(buttonElement);
                      }
                      const observer2 = new MutationObserver((mutationsList) => {
                        if (mutationsList.some((mutation) => mutation.type === "childList")) {
                          const subjectToolbarElement2 = __privateMethod(this, _GmailThreadView_instances, findBottomReplyToolbarElement_fn).call(this);
                          if (subjectToolbarElement2 && !subjectToolbarElement2.contains(buttonElement)) {
                            subjectToolbarElement2.appendChild(buttonElement);
                          }
                        }
                      });
                      observer2.observe(messagesContainer, {
                        childList: true,
                        subtree: true
                      });
                      __privateGet(this, _stopper3).takeUntilBy(kefir_esm.fromEvents(buttonElement, "destroy")).onValue(() => buttonOptions.buttonView.destroy());
                      kefir_esm.fromEvents(buttonElement, "destroy").take(1).onValue(() => {
                        observer2.disconnect();
                      });
                      return new basic_button_view_controller.A(buttonOptions);
                    }
                    getReadyStream() {
                      return __privateGet(this, _readyStream2);
                    }
                  }
                  _element2 = new WeakMap();
                  _routeViewDriver = new WeakMap();
                  _driver5 = new WeakMap();
                  _isPreviewedThread = new WeakMap();
                  _eventStream2 = new WeakMap();
                  _stopper3 = new WeakMap();
                  _toolbarView = new WeakMap();
                  _messageViewDrivers = new WeakMap();
                  _newMessageMutationObserver = new WeakMap();
                  _readyStream2 = new WeakMap();
                  _threadID = new WeakMap();
                  _syncThreadID = new WeakMap();
                  _customMessageViews = new WeakMap();
                  _hiddenCustomMessageViews = new WeakMap();
                  _hiddenCustomMessageNoticeProvider = new WeakMap();
                  _hiddenCustomMessageNoticeElement = new WeakMap();
                  _resolveUnmountHiddenNoticePromise = new WeakMap();
                  _subjectContainerSelectors = new WeakMap();
                  _subjectContainerSelectorsAfterNov162023 = new WeakMap();
                  _subjectAISuggestionsContainerSelectors = new WeakMap();
                  _GmailThreadView_instances = new WeakSet();
                  setupHiddenCustomMessage_fn = function(customMessageView) {
                    __privateGet(this, _hiddenCustomMessageViews).add(customMessageView);
                    customMessageView.getElement().classList.add("inboxsdk__custom_message_view_hidden");
                    let hiddenNoticeMessageElement = __privateGet(this, _element2).querySelector(".adv");
                    let nativeHiddenNoticePresent = true;
                    if (!hiddenNoticeMessageElement) {
                      nativeHiddenNoticePresent = false;
                      const superCollapsedMessageElements = Array.from(__privateGet(this, _element2).querySelectorAll(".kQ"));
                      if (superCollapsedMessageElements.length < 2) return;
                      hiddenNoticeMessageElement = superCollapsedMessageElements[1];
                    }
                    (0, make_mutation_observer_chunked_stream.A)(hiddenNoticeMessageElement, {
                      attributes: true,
                      attributeFilter: ["class"]
                    }).takeUntilBy(kefir_esm.merge([__privateGet(this, _stopper3), kefir_esm.fromEvents(customMessageView, "destroy")])).filter(() => hiddenNoticeMessageElement && !hiddenNoticeMessageElement.classList.contains("kQ")).onValue(() => {
                      customMessageView.getElement().classList.remove("inboxsdk__custom_message_view_hidden");
                      if (__privateGet(this, _hiddenCustomMessageNoticeElement)) __privateGet(this, _hiddenCustomMessageNoticeElement).remove();
                      __privateSet(this, _hiddenCustomMessageNoticeElement, null);
                    });
                    __privateMethod(this, _GmailThreadView_instances, updateHiddenNotice_fn).call(this, hiddenNoticeMessageElement, nativeHiddenNoticePresent);
                    kefir_esm.fromEvents(customMessageView, "destroy").takeUntilBy(__privateGet(this, _stopper3)).take(1).onValue(() => {
                      __privateGet(this, _hiddenCustomMessageViews).delete(customMessageView);
                      if (hiddenNoticeMessageElement) __privateMethod(this, _GmailThreadView_instances, updateHiddenNotice_fn).call(this, hiddenNoticeMessageElement, nativeHiddenNoticePresent);
                    });
                  };
                  updateHiddenNotice_fn = function(hiddenNoticeMessageElement, nativeHiddenNoticePresent) {
                    const existingAppNoticeElement = __privateGet(this, _hiddenCustomMessageNoticeElement);
                    if (existingAppNoticeElement) {
                      existingAppNoticeElement.remove();
                      __privateSet(this, _hiddenCustomMessageNoticeElement, null);
                      if (__privateGet(this, _resolveUnmountHiddenNoticePromise)) __privateGet(this, _resolveUnmountHiddenNoticePromise).call(this);
                    }
                    const noticeProvider = __privateGet(this, _hiddenCustomMessageNoticeProvider);
                    if (!noticeProvider) return;
                    const appNoticeContainerElement = __privateSet(this, _hiddenCustomMessageNoticeElement, document.createElement("span"));
                    appNoticeContainerElement.classList.add("inboxsdk__custom_message_view_app_notice_content");
                    const numberCustomHiddenMessages = __privateGet(this, _hiddenCustomMessageViews).size;
                    let numberNativeHiddenMessages = null;
                    if (nativeHiddenNoticePresent) {
                      const nativeHiddenNoticeCountSpan = (0, querySelectorOrFail.A)(hiddenNoticeMessageElement, ".adx span");
                      numberNativeHiddenMessages = Number(nativeHiddenNoticeCountSpan.innerHTML);
                      if (isNaN(numberNativeHiddenMessages)) {
                        throw new Error("Couldn't find number of native hidden messages in dom structure");
                      }
                    }
                    const appNoticeElement = noticeProvider(numberCustomHiddenMessages, numberNativeHiddenMessages, new Promise((resolve) => {
                      __privateSet(this, _resolveUnmountHiddenNoticePromise, resolve);
                    }));
                    if (!appNoticeElement) {
                      return;
                    }
                    appNoticeContainerElement.appendChild(appNoticeElement);
                    if (!nativeHiddenNoticePresent) {
                      const fakeAppNoticeElement = document.createElement("span");
                      fakeAppNoticeElement.classList.add("adx");
                      const insertionPoint = (0, querySelectorOrFail.A)(hiddenNoticeMessageElement, ".G3");
                      insertionPoint.appendChild(fakeAppNoticeElement);
                    }
                    const hiddenNoticeElement = (0, querySelectorOrFail.A)(hiddenNoticeMessageElement, ".adx");
                    hiddenNoticeElement.classList.add("inboxsdk__custom_message_view_app_notice_container");
                    hiddenNoticeElement.appendChild(appNoticeContainerElement);
                  };
                  setupToolbarView_fn = function() {
                    const toolbarElement = __privateMethod(this, _GmailThreadView_instances, findToolbarElement_fn).call(this);
                    if (!toolbarElement) {
                      if ((0, isStreakAppId.A)(__privateGet(this, _driver5).getAppId())) {
                        const threadViewEl = document.querySelector(".nH.bkK");
                        if (threadViewEl instanceof HTMLElement) {
                          __privateGet(this, _driver5).getLogger().error(new Error("Thread view toolbar cannot be found"), {
                            threadViewHtml: (0, censorHTMLstring.A)(threadViewEl.innerHTML)
                          });
                        } else {
                          const pageHtml = document.querySelector(".nH");
                          if (pageHtml instanceof HTMLElement) {
                            __privateGet(this, _driver5).getLogger().error(new Error("Thread view toolbar cannot be found"), {
                              threadViewHtml: ".nH.bkK cannot be found",
                              pageHtml: (0, censorHTMLstring.A)(pageHtml.innerHTML)
                            });
                          } else {
                            __privateGet(this, _driver5).getLogger().error(new Error("Thread view toolbar cannot be found"), {
                              threadViewHtml: ".nH.bkK cannot be found",
                              pageHtml: ".nH cannot be found"
                            });
                          }
                        }
                      }
                      throw new Error("No toolbar element found");
                    }
                    const toolbarParent = toolbarElement.parentElement;
                    if (toolbarParent) toolbarParent.classList.add("inboxsdk__thread_toolbar_parent");
                    __privateSet(this, _toolbarView, new gmail_toolbar_view(toolbarElement, __privateGet(this, _driver5), __privateGet(this, _routeViewDriver), this));
                  };
                  findToolbarElement_fn = function() {
                    var toolbarContainerElements = document.querySelectorAll("[gh=tm]");
                    for (var ii = 0; ii < toolbarContainerElements.length; ii++) {
                      if (__privateMethod(this, _GmailThreadView_instances, isToolbarContainerRelevant_fn).call(this, toolbarContainerElements[ii])) {
                        return toolbarContainerElements[ii].querySelector("[gh=mtb]");
                      }
                    }
                    return null;
                  };
                  findSubjectToolbarElement_fn = function() {
                    var toolbarContainerElement = __privateGet(this, _element2).querySelector(".bHJ");
                    return toolbarContainerElement;
                  };
                  findBottomReplyToolbarElement_fn = function() {
                    var allAmnElements = __privateGet(this, _element2).querySelectorAll(".amn");
                    for (const element of allAmnElements) {
                      const isInsideTable = element.closest("table") !== null;
                      const isHidden = window.getComputedStyle(element).display === "none";
                      if (!isInsideTable && !isHidden) {
                        return element;
                      }
                    }
                    return allAmnElements[0] || null;
                  };
                  isToolbarContainerRelevant_fn = function(toolbarContainerElement) {
                    if (toolbarContainerElement.parentElement.parentElement === __privateGet(this, _element2).parentElement.parentElement) {
                      return true;
                    }
                    if (toolbarContainerElement.parentElement.getAttribute("role") !== "main" && __privateGet(this, _element2).parentElement.getAttribute("role") !== "main") {
                      return true;
                    }
                    if (toolbarContainerElement.parentElement.getAttribute("role") === "main" && toolbarContainerElement.parentElement.querySelector(".if, .PeIF1d, .a98.iY") && (toolbarContainerElement.parentElement.querySelector(".if, .PeIF1d, .a98.iY").parentElement === __privateGet(this, _element2) || toolbarContainerElement.parentElement.querySelector(".a98.iY") === __privateGet(this, _element2))) {
                      let version2 = "2018";
                      if (__privateGet(this, _element2).matches(".a98.iY")) {
                        version2 = "2023-11-16";
                      } else if (toolbarContainerElement.parentElement.querySelector(".a98.iY")) {
                        version2 = "2022-10-20";
                      } else if (toolbarContainerElement.parentElement.querySelector(".PeIF1d")) {
                        version2 = "2022-10-12";
                      }
                      __privateGet(this, _driver5).getLogger().eventSdkPassive("gmailThreadView_isToolbarContainerRelevant", {
                        version: version2
                      });
                      return true;
                    }
                    return false;
                  };
                  setupMessageViewStream_fn = function() {
                    var openMessage = __privateGet(this, _element2).querySelector(".h7");
                    if (!openMessage) {
                      var self2 = this;
                      setTimeout(function() {
                        var _a;
                        if (__privateGet(self2, _element2)) {
                          __privateMethod(_a = self2, _GmailThreadView_instances, setupMessageViewStream_fn).call(_a);
                        }
                      }, 500);
                      return;
                    }
                    var messageContainer = openMessage.parentElement;
                    __privateMethod(this, _GmailThreadView_instances, initializeExistingMessages_fn).call(this, messageContainer);
                    __privateMethod(this, _GmailThreadView_instances, observeNewMessages_fn).call(this, messageContainer);
                  };
                  initializeExistingMessages_fn = function(messageContainer) {
                    var self2 = this;
                    var children = messageContainer.children;
                    Array.prototype.forEach.call(children, function(childElement) {
                      var _a;
                      __privateMethod(_a = self2, _GmailThreadView_instances, createMessageView_fn).call(_a, childElement);
                    });
                  };
                  observeNewMessages_fn = function(messageContainer) {
                    __privateSet(this, _newMessageMutationObserver, new MutationObserver(__privateMethod(this, _GmailThreadView_instances, handleNewMessageMutations_fn).bind(this)));
                    __privateGet(this, _newMessageMutationObserver).observe(messageContainer, {
                      childList: true
                    });
                  };
                  handleNewMessageMutations_fn = function(mutations) {
                    var self2 = this;
                    mutations.forEach(function(mutation) {
                      Array.prototype.forEach.call(mutation.addedNodes, function(addedNode) {
                        var _a;
                        if (!addedNode.classList.contains("inboxsdk__custom_message_view")) __privateMethod(_a = self2, _GmailThreadView_instances, createMessageView_fn).call(_a, addedNode);
                      });
                    });
                  };
                  createMessageView_fn = function(messageElement) {
                    var messageView = new gmail_message_view(messageElement, this, __privateGet(this, _driver5));
                    __privateGet(this, _eventStream2).plug(messageView.getEventStream());
                    __privateGet(this, _messageViewDrivers).push(messageView);
                    __privateGet(this, _eventStream2).emit({
                      type: "internal",
                      eventName: "messageCreated",
                      view: messageView
                    });
                  };
                  logAddonElementInfo_fn = async function() {
                    if (hasLoggedAddonInfo) return;
                    function readInfo() {
                      const container = gmail_element_getter.A.getAddonSidebarContainerElement();
                      if (!container) return null;
                      const isDisplayNone = {
                        parent: container.parentElement ? container.parentElement.style.display === "none" : null,
                        self: container.style.display === "none",
                        children: Array.from(container.children).map((el) => el.style ? el.style.display === "none" : null)
                      };
                      const rect = container.getBoundingClientRect();
                      const size = {
                        width: rect.width,
                        height: rect.height
                      };
                      return {
                        isDisplayNone,
                        size
                      };
                    }
                    const eventData = {
                      time: {}
                    };
                    eventData.time[0] = readInfo();
                    await Promise.all([30, 5e3].map(async (time) => {
                      await (0, pdelay_js.A)(time);
                      if (__privateGet(this, _stopper3).stopped) return;
                      eventData.time[time] = readInfo();
                    }));
                    if (__privateGet(this, _stopper3).stopped) return;
                    __privateGet(this, _driver5).getLogger().eventSdkPassive("gmailSidebarElementInfo", eventData);
                    hasLoggedAddonInfo = true;
                  };
                  listenToExpandCollapseAll_fn = function() {
                    const expandAllElementImg = __privateGet(this, _element2).querySelector("img.gx");
                    if (expandAllElementImg) {
                      const expandAllElement = findParent(expandAllElementImg, (el) => el.getAttribute("role") === "button");
                      if (expandAllElement) {
                        kefir_esm.merge([kefir_esm.fromEvents(expandAllElement, "click"), kefir_esm.fromEvents(expandAllElement, "keydown").filter(
                          (e) => e.which === 13
                          /* enter */
                        )]).takeUntilBy(__privateGet(this, _stopper3)).onValue(() => {
                          for (const customMessageView of __privateGet(this, _customMessageViews)) {
                            customMessageView.expand();
                          }
                        });
                      }
                    }
                    const collapseAllElementImg = __privateGet(this, _element2).querySelector("img.gq");
                    if (collapseAllElementImg) {
                      const collapseAllElement = findParent(collapseAllElementImg, (el) => el.getAttribute("role") === "button");
                      if (collapseAllElement) {
                        kefir_esm.merge([kefir_esm.fromEvents(collapseAllElement, "click"), kefir_esm.fromEvents(collapseAllElement, "keydown").filter(
                          (e) => e.which === 13
                          /* enter */
                        )]).takeUntilBy(__privateGet(this, _stopper3)).onValue(() => {
                          for (const customMessageView of __privateGet(this, _customMessageViews)) {
                            customMessageView.collapse();
                          }
                        });
                      }
                    }
                  };
                  const gmail_thread_view = GmailThreadView;
                  ;
                  const thread_row_view_membersMap = /* @__PURE__ */ new WeakMap();
                  class ThreadRowView extends safe_event_emitter.A {
                    /**
                     * This property is set to true once the view is destroyed
                     */
                    constructor(threadRowViewDriver) {
                      super();
                      const members = {
                        threadRowViewDriver
                      };
                      thread_row_view_membersMap.set(this, members);
                      this.destroyed = false;
                      threadRowViewDriver.getEventStream().onEnd(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                      });
                      threadRowViewDriver.setUserView(this);
                    }
                    addLabel(labelDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.addLabel(labelDescriptor);
                    }
                    addImage(imageDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.addImage(imageDescriptor);
                    }
                    addButton(buttonDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.addButton(buttonDescriptor);
                    }
                    addActionButton(actionButtonDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.addActionButton(actionButtonDescriptor);
                    }
                    addAttachmentIcon(threadRowAttachmentIconDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.addAttachmentIcon(threadRowAttachmentIconDescriptor);
                    }
                    replaceDate(threadRowDateDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.replaceDate(threadRowDateDescriptor);
                    }
                    replaceDraftLabel(draftLabelDescriptor) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.replaceDraftLabel(draftLabelDescriptor);
                    }
                    getElement() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getElement();
                    }
                    getSubject() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getSubject();
                    }
                    replaceSubject(newSubjectStr) {
                      (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.replaceSubject(newSubjectStr);
                    }
                    getDateString() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getDateString();
                    }
                    /** @deprecated */
                    getThreadID() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getThreadID();
                    }
                    getThreadIDAsync() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getThreadIDAsync();
                    }
                    /** @deprecated */
                    getThreadIDIfStable() {
                      if (this.getVisibleMessageCount() > 0) {
                        return this.getThreadID();
                      } else {
                        return null;
                      }
                    }
                    getThreadIDIfStableAsync() {
                      if (this.getVisibleMessageCount() > 0) {
                        return this.getThreadIDAsync();
                      } else {
                        return Promise.resolve(null);
                      }
                    }
                    getDraftID() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getDraftID();
                    }
                    /**
                     * @returns the {number} of visible draft messages in the row. This is purely an estimate based on what is visible in the row.
                     */
                    getVisibleDraftCount() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getVisibleDraftCount();
                    }
                    getVisibleMessageCount() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getVisibleMessageCount();
                    }
                    getContacts() {
                      return (0, get_or_fail.A)(thread_row_view_membersMap, this).threadRowViewDriver.getContacts();
                    }
                  }
                  var compose_view = __webpack_require__2(7600);
                  var gmail_compose_view = __webpack_require__2(3737);
                  ;
                  class DummyRouteViewDriver {
                    constructor() {
                      __privateAdd(this, _eventStream3, kefir_bus_default()());
                      __privateAdd(this, _stopper4, js_default()());
                    }
                    getRouteType() {
                      return "UNKNOWN";
                    }
                    getRouteID() {
                      return "UNKNOWN";
                    }
                    getParams() {
                      return {};
                    }
                    getEventStream() {
                      return __privateGet(this, _eventStream3);
                    }
                    getStopper() {
                      return __privateGet(this, _stopper4);
                    }
                    destroy() {
                      __privateGet(this, _eventStream3).end();
                      __privateGet(this, _stopper4).destroy();
                    }
                  }
                  _eventStream3 = new WeakMap();
                  _stopper4 = new WeakMap();
                  const dummy_route_view_driver = DummyRouteViewDriver;
                  var route_view = __webpack_require__2(321);
                  var includes = __webpack_require__2(5193);
                  var includes_default = /* @__PURE__ */ __webpack_require__2.n(includes);
                  var last2 = __webpack_require__2(6456);
                  var last_default = /* @__PURE__ */ __webpack_require__2.n(last2);
                  var querystring_es3 = __webpack_require__2(6448);
                  ;
                  function makeElementViewStream(viewFn) {
                    return (event) => {
                      const view = viewFn(event.el);
                      if (view) {
                        event.removalStream.take(1).onValue(() => {
                          view.destroy();
                        });
                        return kefir_esm.constant(view);
                      } else {
                        return kefir_esm.never();
                      }
                    };
                  }
                  ;
                  function getInsertBeforeElement(checkElement, childElements, dataAttributes) {
                    const checkValues = {};
                    dataAttributes.forEach(function(attribute) {
                      const stringValue = checkElement.getAttribute(attribute);
                      checkValues[attribute] = stringValue == null ? null : parseIfNumber(stringValue) ?? stringValue;
                    });
                    for (let ii = 0; ii < childElements.length; ii++) {
                      const child = childElements[ii];
                      if (_isChildAfter(checkValues, child, dataAttributes)) {
                        return child;
                      }
                    }
                    return null;
                  }
                  function _isChildAfter(checkValues, child, dataAttributes) {
                    for (let ii = 0; ii < dataAttributes.length; ii++) {
                      const attribute = dataAttributes[ii];
                      const stringValue = child.getAttribute(attribute);
                      const value = stringValue == null ? null : parseIfNumber(stringValue) ?? stringValue;
                      if (value > checkValues[attribute]) {
                        return true;
                      } else if (value < checkValues[attribute]) {
                        return false;
                      }
                    }
                    return false;
                  }
                  function parseIfNumber(value) {
                    const n = parseFloat(value);
                    if (!isNaN(n) && isFinite(n)) {
                      return n;
                    } else {
                      return null;
                    }
                  }
                  ;
                  function defer() {
                    let resolve = void 0;
                    let reject = void 0;
                    const promise = new Promise((_resolve, _reject) => {
                      resolve = _resolve;
                      reject = _reject;
                    });
                    return {
                      resolve,
                      reject,
                      promise
                    };
                  }
                  ;
                  class GenericButtonView {
                    constructor(element) {
                      __publicField(this, "_eventStream", kefir_bus_default()());
                      this._element = element;
                      this._setupEventStream();
                    }
                    destroy() {
                      this._element.remove();
                      this._eventStream.end();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    activate() {
                    }
                    deactivate() {
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir_esm.fromEvents(this._element, "click");
                      clickEventStream.onValue((event) => {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.map((event) => {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                    }
                  }
                  ;
                  class InboxDropdownButtonView extends GenericButtonView {
                    constructor() {
                      const element = document.createElement("div");
                      element.setAttribute("class", "aAE qi J-J5-Ji J-JN-M-I");
                      element.innerHTML = '<div class="J-J5-Ji J-JN-M-I-JG">&nbsp;</div>';
                      element.addEventListener("mouseenter", function() {
                        element.classList.add("J-JN-M-I-JW");
                      });
                      element.addEventListener("mouseleave", function() {
                        element.classList.remove("J-JN-M-I-JW");
                      });
                      super(element);
                    }
                    activate() {
                      this.getElement().classList.add("J-JN-M-I-JO");
                      this.getElement().classList.add("J-JN-M-I-Kq");
                    }
                    deactivate() {
                      this.getElement().classList.remove("J-JN-M-I-JO");
                      this.getElement().classList.remove("J-JN-M-I-Kq");
                    }
                  }
                  var injectStylesIntoStyleTag = __webpack_require__2(6186);
                  var injectStylesIntoStyleTag_default = /* @__PURE__ */ __webpack_require__2.n(injectStylesIntoStyleTag);
                  var styleDomAPI = __webpack_require__2(2155);
                  var styleDomAPI_default = /* @__PURE__ */ __webpack_require__2.n(styleDomAPI);
                  var setAttributesWithoutAttributes = __webpack_require__2(8626);
                  var setAttributesWithoutAttributes_default = /* @__PURE__ */ __webpack_require__2.n(setAttributesWithoutAttributes);
                  var insertStyleElement = __webpack_require__2(8990);
                  var insertStyleElement_default = /* @__PURE__ */ __webpack_require__2.n(insertStyleElement);
                  var styleTagTransform = __webpack_require__2(9827);
                  var styleTagTransform_default = /* @__PURE__ */ __webpack_require__2.n(styleTagTransform);
                  var gmail_collapsible_section_view_module = __webpack_require__2(9245);
                  ;
                  var options = {};
                  options.styleTagTransform = styleTagTransform_default();
                  options.setAttributes = setAttributesWithoutAttributes_default();
                  options.insert = (htmlElement) => {
                    htmlElement.setAttribute(
                      "data-inboxsdk-version",
                      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- this is injected by webpack
                      ///@ts-ignore
                      "2.2.11-1764118012397-e51ed7952926d731"
                    );
                    document.head.append(htmlElement);
                  };
                  options.domAPI = styleDomAPI_default();
                  options.insertStyleElement = insertStyleElement_default();
                  var update = injectStylesIntoStyleTag_default()(gmail_collapsible_section_view_module.Ay, options);
                  const views_gmail_collapsible_section_view_module = gmail_collapsible_section_view_module.Ay && gmail_collapsible_section_view_module.Ay.locals ? gmail_collapsible_section_view_module.Ay.locals : void 0;
                  ;
                  class GmailCollapsibleSectionView {
                    constructor(driver, groupOrderHint, isSearch, isCollapsible) {
                      __privateAdd(this, _GmailCollapsibleSectionView_instances);
                      __privateAdd(this, _groupOrderHint);
                      __privateAdd(this, _isReadyDeferred);
                      __privateAdd(this, _isCollapsible);
                      __privateAdd(this, _collapsibleSectionDescriptor, {});
                      __privateAdd(this, _isSearch);
                      __privateAdd(this, _element3, null);
                      __privateAdd(this, _headerElement, null);
                      __privateAdd(this, _titleElement, null);
                      __privateAdd(this, _bodyElement, null);
                      __privateAdd(this, _contentElement, null);
                      __privateAdd(this, _tableBodyElement, null);
                      __privateAdd(this, _collapsedContainer, null);
                      __privateAdd(this, _messageElement, null);
                      __privateAdd(this, _footerElement, null);
                      __privateAdd(this, _eventStream4);
                      __privateAdd(this, _isCollapsed2, false);
                      __privateAdd(this, _inboxDropdownButtonView, null);
                      __privateAdd(this, _dropdownViewController, null);
                      __privateAdd(this, _tableRowsUnmountResolution, null);
                      __privateAdd(this, _driver6);
                      __privateSet(this, _driver6, driver);
                      __privateSet(this, _isSearch, isSearch);
                      __privateSet(this, _groupOrderHint, groupOrderHint);
                      __privateSet(this, _isCollapsible, isCollapsible);
                      __privateSet(this, _eventStream4, kefir_bus_default()());
                      __privateSet(this, _isReadyDeferred, defer());
                    }
                    destroy() {
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, unmountRows_fn).call(this);
                      __privateGet(this, _element3)?.remove();
                      if (__privateGet(this, _eventStream4)) __privateGet(this, _eventStream4).end();
                      __privateGet(this, _headerElement)?.remove();
                      __privateGet(this, _titleElement)?.remove();
                      __privateGet(this, _bodyElement)?.remove();
                      __privateGet(this, _contentElement)?.remove();
                      __privateGet(this, _tableBodyElement)?.remove();
                      __privateGet(this, _collapsedContainer)?.remove();
                      __privateGet(this, _messageElement)?.remove();
                      __privateGet(this, _inboxDropdownButtonView)?.destroy();
                      __privateGet(this, _dropdownViewController)?.destroy();
                    }
                    getElement() {
                      const element = __privateGet(this, _element3);
                      if (!element) throw new Error("tried to access element that does not exist");
                      return element;
                    }
                    get eventStream() {
                      return __privateGet(this, _eventStream4);
                    }
                    setCollapsibleSectionDescriptorProperty(collapsibleSectionDescriptorProperty) {
                      const stoppedProperty = collapsibleSectionDescriptorProperty.takeUntilBy(__privateGet(this, _eventStream4).filter(() => false).beforeEnd(() => null));
                      stoppedProperty.onValue((x) => __privateMethod(this, _GmailCollapsibleSectionView_instances, updateValues_fn).call(this, x));
                      stoppedProperty.take(1).onValue(() => __privateGet(this, _isReadyDeferred).resolve(this));
                      __privateGet(this, _driver6).gmailThemeStream.onValue(() => {
                        if (Object.keys(__privateGet(this, _collapsibleSectionDescriptor)).length) {
                          __privateMethod(this, _GmailCollapsibleSectionView_instances, updateValues_fn).call(this, __privateGet(this, _collapsibleSectionDescriptor));
                        }
                      });
                    }
                    setCollapsed(value) {
                      if (!__privateGet(this, _isCollapsible)) {
                        return;
                      }
                      __privateGet(this, _isReadyDeferred).promise.then(() => {
                        if (value) __privateMethod(this, _GmailCollapsibleSectionView_instances, collapse_fn).call(this);
                        else __privateMethod(this, _GmailCollapsibleSectionView_instances, expand_fn).call(this);
                      });
                    }
                  }
                  _groupOrderHint = new WeakMap();
                  _isReadyDeferred = new WeakMap();
                  _isCollapsible = new WeakMap();
                  _collapsibleSectionDescriptor = new WeakMap();
                  _isSearch = new WeakMap();
                  _element3 = new WeakMap();
                  _headerElement = new WeakMap();
                  _titleElement = new WeakMap();
                  _bodyElement = new WeakMap();
                  _contentElement = new WeakMap();
                  _tableBodyElement = new WeakMap();
                  _collapsedContainer = new WeakMap();
                  _messageElement = new WeakMap();
                  _footerElement = new WeakMap();
                  _eventStream4 = new WeakMap();
                  _isCollapsed2 = new WeakMap();
                  _inboxDropdownButtonView = new WeakMap();
                  _dropdownViewController = new WeakMap();
                  _tableRowsUnmountResolution = new WeakMap();
                  _driver6 = new WeakMap();
                  _GmailCollapsibleSectionView_instances = new WeakSet();
                  unmountRows_fn = function() {
                    var _a;
                    (_a = __privateGet(this, _tableRowsUnmountResolution)) == null ? void 0 : _a.call(this);
                    __privateSet(this, _tableRowsUnmountResolution, null);
                  };
                  updateValues_fn = function(collapsibleSectionDescriptor) {
                    const element = __privateGet(this, _element3);
                    if (!collapsibleSectionDescriptor) {
                      if (element) {
                        element.style.display = "none";
                      }
                      return;
                    } else if (element) {
                      element.style.display = "";
                    }
                    if (!element) {
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, setupElement_fn).call(this, collapsibleSectionDescriptor);
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, showLoadingMessage_fn).call(this);
                    } else {
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, updateElement_fn).call(this, collapsibleSectionDescriptor);
                    }
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, updateHeader_fn).call(this, collapsibleSectionDescriptor);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, updateTitle_fn).call(this, collapsibleSectionDescriptor);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, updateSubtitle_fn).call(this, collapsibleSectionDescriptor);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, updateSummaryText_fn).call(this, collapsibleSectionDescriptor);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, updateDropdown_fn).call(this, collapsibleSectionDescriptor);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, updateContentElement_fn).call(this, collapsibleSectionDescriptor);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, updateTableRows_fn).call(this, collapsibleSectionDescriptor);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, updateMessageElement_fn).call(this, collapsibleSectionDescriptor);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, updateFooter_fn).call(this, collapsibleSectionDescriptor);
                    __privateSet(this, _collapsibleSectionDescriptor, collapsibleSectionDescriptor);
                  };
                  setupElement_fn = function(collapsibleSectionDescriptor) {
                    const element = __privateSet(this, _element3, document.createElement("div"));
                    element.setAttribute("class", "inboxsdk__resultsSection");
                    element.setAttribute("data-group-order-hint", String(__privateGet(this, _groupOrderHint)));
                    element.setAttribute("data-order-hint", String(typeof collapsibleSectionDescriptor.orderHint === "number" ? collapsibleSectionDescriptor.orderHint : 0));
                    if (!__privateGet(this, _isCollapsible)) element.classList.add("inboxsdk__resultsSection_nonCollapsible");
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, setupHeader_fn).call(this, collapsibleSectionDescriptor);
                    const bodyElement = __privateSet(this, _bodyElement, document.createElement("div"));
                    const bodyContentsElement = document.createElement("div");
                    bodyContentsElement.classList.add("zE");
                    bodyElement.appendChild(bodyContentsElement);
                    element.appendChild(bodyElement);
                    const contentElement = __privateSet(this, _contentElement, document.createElement("div"));
                    bodyContentsElement.appendChild(contentElement);
                    const messageElement = __privateSet(this, _messageElement, document.createElement("div"));
                    bodyContentsElement.appendChild(messageElement);
                    const tableBodyElement = __privateSet(this, _tableBodyElement, document.createElement("div"));
                    bodyContentsElement.appendChild(tableBodyElement);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, setupFooter_fn).call(this);
                    if (__privateGet(this, _isCollapsible) && __privateGet(this, _titleElement)) {
                      kefir_esm.fromEvents(__privateGet(this, _titleElement), "click").onValue(() => __privateMethod(this, _GmailCollapsibleSectionView_instances, toggleCollapseState_fn).call(this));
                    }
                    kefir_esm.fromEvents(element, "removeCollapsedContainer").onValue(() => __privateMethod(this, _GmailCollapsibleSectionView_instances, destroyCollapsedContainer_fn).call(this));
                    kefir_esm.fromEvents(element, "readdToCollapsedContainer").onValue(() => __privateMethod(this, _GmailCollapsibleSectionView_instances, addToCollapsedContainer_fn).call(this));
                    __privateGet(this, _eventStream4).emit({
                      type: "update",
                      property: "orderHint",
                      sectionDescriptor: collapsibleSectionDescriptor
                    });
                  };
                  setupHeader_fn = function(collapsibleSectionDescriptor) {
                    const headerElement = __privateSet(this, _headerElement, document.createElement("div"));
                    headerElement.classList.add("inboxsdk__resultsSection_header", "Wg");
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, setupGmailv2Header_fn).call(this, headerElement, collapsibleSectionDescriptor);
                    if (__privateGet(this, _element3)) __privateGet(this, _element3).appendChild(headerElement);
                  };
                  setupGmailv2Header_fn = function(headerElement, collapsibleSectionDescriptor) {
                    const titleElement = __privateSet(this, _titleElement, document.createElement("div"));
                    titleElement.setAttribute("class", "inboxsdk__resultsSection_title");
                    titleElement.innerHTML = ['<h3 class="Wr iR">', '<img alt="" src="//ssl.gstatic.com/ui/v1/icons/mail/images/cleardot.gif" class="qi Wp Wq">', `<div class="Wn ${gmail_collapsible_section_view_module.DD}">`, escape_default()(collapsibleSectionDescriptor.title), "</div>", "</h3>"].join("");
                    const headerRightElement = document.createElement("div");
                    headerRightElement.classList.add("chp5lb");
                    headerElement.appendChild(titleElement);
                    headerElement.appendChild(headerRightElement);
                  };
                  setupFooter_fn = function() {
                    const footerElement = __privateSet(this, _footerElement, document.createElement("div"));
                    footerElement.classList.add("inboxsdk__resultsSection_footer");
                    if (__privateGet(this, _bodyElement)) __privateGet(this, _bodyElement).appendChild(footerElement);
                  };
                  updateElement_fn = function(collapsibleSectionDescriptor) {
                    if (__privateGet(this, _collapsibleSectionDescriptor).orderHint !== collapsibleSectionDescriptor.orderHint) {
                      const element = __privateGet(this, _element3);
                      if (element) element.setAttribute("data-order-hint", "" + (typeof collapsibleSectionDescriptor.orderHint === "number" ? collapsibleSectionDescriptor.orderHint : 0));
                      __privateGet(this, _eventStream4).emit({
                        type: "update",
                        property: "orderHint"
                      });
                    }
                  };
                  updateHeader_fn = function(collapsibleSectionDescriptor) {
                    if (__privateGet(this, _isCollapsible) || collapsibleSectionDescriptor.title || collapsibleSectionDescriptor.subtitle || collapsibleSectionDescriptor.titleLinkText || collapsibleSectionDescriptor.hasDropdown) {
                      if (__privateGet(this, _headerElement)) __privateGet(this, _headerElement).style.display = "";
                    } else {
                      if (__privateGet(this, _headerElement)) __privateGet(this, _headerElement).style.display = "none";
                    }
                  };
                  updateTitle_fn = function(collapsibleSectionDescriptor) {
                    if (__privateGet(this, _collapsibleSectionDescriptor).title !== collapsibleSectionDescriptor.title) {
                      if (__privateGet(this, _titleElement)) {
                        (0, querySelectorOrFail.A)(__privateGet(this, _titleElement), "h3 > .Wn").textContent = collapsibleSectionDescriptor.title;
                      }
                    }
                  };
                  updateSubtitle_fn = function(collapsibleSectionDescriptor) {
                    const titleElement = __privateGet(this, _titleElement);
                    if (!titleElement) return;
                    let subtitleElement = titleElement.getElementsByClassName(gmail_collapsible_section_view_module.VA)[0];
                    if (!collapsibleSectionDescriptor.subtitle) {
                      if (subtitleElement) {
                        subtitleElement.remove();
                      }
                    } else if (__privateGet(this, _collapsibleSectionDescriptor).subtitle !== collapsibleSectionDescriptor.subtitle) {
                      if (!subtitleElement) {
                        subtitleElement = document.createElement("span");
                        if (subtitleElement && titleElement) {
                          subtitleElement.classList.add(gmail_collapsible_section_view_module.VA);
                          const insertionPoint = titleElement.querySelector(".Wn");
                          if (insertionPoint) {
                            insertionPoint.prepend(subtitleElement);
                          }
                        }
                      }
                      subtitleElement.textContent = collapsibleSectionDescriptor.subtitle;
                    }
                  };
                  updateSummaryText_fn = function(collapsibleSectionDescriptor) {
                    const headerElement = __privateGet(this, _headerElement);
                    if (!headerElement) return;
                    let summaryTextElement = headerElement.querySelector(".inboxsdk__resultsSection_header_summaryText");
                    if (!collapsibleSectionDescriptor.titleLinkText) {
                      if (summaryTextElement) {
                        summaryTextElement.remove();
                      }
                    } else if (collapsibleSectionDescriptor.titleLinkText !== __privateGet(this, _collapsibleSectionDescriptor).titleLinkText) {
                      if (!summaryTextElement) {
                        summaryTextElement = document.createElement("div");
                        summaryTextElement.setAttribute("class", "inboxsdk__resultsSection_header_summaryText Wm");
                        summaryTextElement.innerHTML = ['<span class="Di">&nbsp;', '<div class="J-J5-Ji amH">', '<span class="Dj">', "<span></span>", "</span>", "&nbsp;", "</div>", "</span>"].join("");
                        __privateGet(this, _eventStream4).plug(kefir_esm.fromEvents(summaryTextElement, "click").map(() => ({
                          eventName: "titleLinkClicked",
                          sectionDescriptor: __privateGet(this, _collapsibleSectionDescriptor)
                        })));
                        const _summaryTextElement = summaryTextElement;
                        summaryTextElement.addEventListener("mouseenter", function() {
                          _summaryTextElement.classList.add("aqi");
                        });
                        summaryTextElement.addEventListener("mouseleave", function() {
                          _summaryTextElement.classList.remove("aqi");
                        });
                        const insertionPoint = headerElement.querySelector(`.${"chp5lb"}`);
                        if (insertionPoint) insertionPoint.insertAdjacentElement("afterbegin", summaryTextElement);
                      }
                      (0, querySelectorOrFail.A)(summaryTextElement, ".Dj > *").textContent = collapsibleSectionDescriptor.titleLinkText;
                    }
                  };
                  updateDropdown_fn = function(collapsibleSectionDescriptor) {
                    if (!collapsibleSectionDescriptor.hasDropdown || !collapsibleSectionDescriptor.onDropdownClick) {
                      if (__privateGet(this, _inboxDropdownButtonView)) __privateGet(this, _inboxDropdownButtonView).destroy();
                      if (__privateGet(this, _dropdownViewController)) __privateGet(this, _dropdownViewController).destroy();
                    } else if (collapsibleSectionDescriptor.hasDropdown && collapsibleSectionDescriptor.onDropdownClick) {
                      if (!__privateGet(this, _inboxDropdownButtonView) || !__privateGet(this, _dropdownViewController)) {
                        const inboxDropdownButtonView = __privateSet(this, _inboxDropdownButtonView, new InboxDropdownButtonView());
                        __privateSet(this, _dropdownViewController, new dropdown_button_view_controller.A({
                          buttonView: inboxDropdownButtonView,
                          dropdownViewDriverClass: gmail_dropdown_view.A,
                          dropdownShowFunction: collapsibleSectionDescriptor.onDropdownClick
                        }));
                        const headerElement = __privateGet(this, _headerElement);
                        if (headerElement) {
                          const childElement = headerElement.querySelector(`.${"chp5lb"}`);
                          if (childElement) childElement.appendChild(inboxDropdownButtonView.getElement());
                        }
                      } else if (collapsibleSectionDescriptor.onDropdownClick !== __privateGet(this, _collapsibleSectionDescriptor).onDropdownClick) {
                        if (__privateGet(this, _dropdownViewController)) __privateGet(this, _dropdownViewController).setDropdownShowFunction(collapsibleSectionDescriptor.onDropdownClick);
                      }
                    }
                  };
                  updateContentElement_fn = function(collapsibleSectionDescriptor) {
                    const contentElement = __privateGet(this, _contentElement);
                    if (!contentElement) return;
                    contentElement.innerHTML = "";
                    if (collapsibleSectionDescriptor.contentElement) {
                      contentElement.style.display = "";
                      contentElement.appendChild(collapsibleSectionDescriptor.contentElement);
                    } else {
                      contentElement.style.display = "none";
                    }
                  };
                  updateTableRows_fn = function(collapsibleSectionDescriptor) {
                    const {
                      tableRows
                    } = collapsibleSectionDescriptor;
                    const tableBodyElement = __privateGet(this, _tableBodyElement);
                    if (!tableBodyElement) return;
                    tableBodyElement.innerHTML = "";
                    if (!tableRows || tableRows.length === 0) {
                      tableBodyElement.style.display = "none";
                    } else {
                      tableBodyElement.style.display = "";
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, renderTable_fn).call(this, tableRows);
                    }
                  };
                  renderTable_fn = function(tableRows) {
                    const tableElement = document.createElement("table");
                    tableElement.setAttribute("class", "F cf zt");
                    tableElement.innerHTML = _getTableHTML();
                    if (__privateGet(this, _tableBodyElement)) __privateGet(this, _tableBodyElement).appendChild(tableElement);
                    const tbody = tableElement.querySelector("tbody");
                    const eventStream = __privateGet(this, _eventStream4);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, unmountRows_fn).call(this);
                    const promise = new Promise((res) => __privateSet(this, _tableRowsUnmountResolution, res));
                    for (const result of tableRows) {
                      const rowElement = document.createElement("tr");
                      const {
                        iconHtml,
                        isRead = {
                          background: false
                        },
                        title: recipients,
                        shortDetailText,
                        attachmentIcon
                      } = result;
                      const useReadBackground = typeof isRead === "object" && isRead.background || isRead === true;
                      const arbitraryHTMLAndClassName = [[iconHtml, gmail_collapsible_section_view_module.Lm], [recipients, gmail_collapsible_section_view_module.Lf], ..."snippet" in result ? [[result.snippet, gmail_collapsible_section_view_module.UA]] : [], [attachmentIcon, gmail_collapsible_section_view_module.$r], [shortDetailText, gmail_collapsible_section_view_module.Ad]];
                      rowElement.setAttribute("class", "inboxsdk__resultsSection_tableRow zA " + (useReadBackground ? "yO" : "zE"));
                      rowElement.innerHTML = _getRowHTML(result);
                      for (const [maybeRenderer, className] of arbitraryHTMLAndClassName) {
                        if (!maybeRenderer || typeof maybeRenderer === "string") {
                          continue;
                        }
                        const el = (0, querySelectorOrFail.A)(rowElement, `.${className}`);
                        maybeRenderer({
                          el,
                          unmountPromise: promise
                        });
                      }
                      if (!tbody) throw new Error("should not happen");
                      tbody.appendChild(rowElement);
                      eventStream.plug(kefir_esm.fromEvents(rowElement, "click").map(() => ({
                        eventName: "rowClicked",
                        rowDescriptor: result
                      })));
                    }
                  };
                  updateMessageElement_fn = function(collapsibleSectionDescriptor) {
                    const messageElement = __privateGet(this, _messageElement);
                    if (collapsibleSectionDescriptor.tableRows && collapsibleSectionDescriptor.tableRows.length > 0 || collapsibleSectionDescriptor.contentElement) {
                      if (messageElement) {
                        messageElement.innerHTML = "";
                        messageElement.style.display = "none";
                      }
                    } else if (collapsibleSectionDescriptor.tableRows && collapsibleSectionDescriptor.tableRows.length === 0 && !collapsibleSectionDescriptor.contentElement) {
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, showEmptyMessage_fn).call(this);
                    }
                  };
                  showLoadingMessage_fn = function() {
                    const messageElement = __privateGet(this, _messageElement);
                    if (messageElement) {
                      messageElement.setAttribute("class", "TB TC inboxsdk__resultsSection_loading");
                      messageElement.innerHTML = "loading...";
                      messageElement.style.display = "";
                    }
                  };
                  showEmptyMessage_fn = function() {
                    const messageElement = __privateGet(this, _messageElement);
                    if (messageElement) {
                      messageElement.setAttribute("class", "TB TC");
                      messageElement.innerHTML = "No results found";
                      messageElement.style.display = "";
                    }
                  };
                  updateFooter_fn = function(collapsibleSectionDescriptor) {
                    const footerElement = __privateGet(this, _footerElement);
                    if (!footerElement) return;
                    footerElement.innerHTML = "";
                    if (!collapsibleSectionDescriptor.footerLinkText && !collapsibleSectionDescriptor.footerLinkIconUrl && !collapsibleSectionDescriptor.footerLinkIconClass) {
                      footerElement.style.display = "none";
                    } else {
                      footerElement.style.display = "";
                      const footerLinkElement = document.createElement("span");
                      footerLinkElement.setAttribute("class", "e Wb");
                      footerLinkElement.textContent = collapsibleSectionDescriptor.footerLinkText;
                      __privateGet(this, _eventStream4).plug(kefir_esm.fromEvents(footerLinkElement, "click").map(() => {
                        return {
                          eventName: "footerClicked",
                          sectionDescriptor: __privateGet(this, _collapsibleSectionDescriptor)
                        };
                      }));
                      footerElement.appendChild(footerLinkElement);
                      footerElement.insertAdjacentHTML("beforeend", '<br style="clear:both;">');
                    }
                  };
                  toggleCollapseState_fn = function() {
                    if (__privateGet(this, _isCollapsed2)) {
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, expand_fn).call(this);
                    } else {
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, collapse_fn).call(this);
                    }
                  };
                  collapse_fn = function() {
                    const element = __privateGet(this, _element3);
                    if (!element) {
                      return;
                    }
                    element.classList.add("inboxsdk__resultsSection_collapsed");
                    if (!__privateGet(this, _isSearch)) {
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, addToCollapsedContainer_fn).call(this);
                    }
                    const selector = "h3 > img.Wp";
                    if (__privateGet(this, _titleElement)) {
                      const arrowSpan = (0, querySelectorOrFail.A)(__privateGet(this, _titleElement), selector);
                      if (arrowSpan) {
                        arrowSpan.classList.remove("Wq");
                        arrowSpan.classList.add("Wo");
                      }
                    }
                    if (__privateGet(this, _bodyElement)) __privateGet(this, _bodyElement).style.display = "none";
                    __privateSet(this, _isCollapsed2, true);
                    __privateGet(this, _eventStream4).emit({
                      eventName: "collapsed"
                    });
                  };
                  expand_fn = function() {
                    const element = __privateGet(this, _element3);
                    if (!element) {
                      return;
                    }
                    element.classList.remove("inboxsdk__resultsSection_collapsed");
                    if (!__privateGet(this, _isSearch)) {
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, removeFromCollapsedContainer_fn).call(this);
                    }
                    const selector = "h3 > img.Wp";
                    if (__privateGet(this, _titleElement)) {
                      const arrowSpan = (0, querySelectorOrFail.A)(__privateGet(this, _titleElement), selector);
                      if (arrowSpan) {
                        arrowSpan.classList.remove("Wo");
                        arrowSpan.classList.add("Wq");
                      }
                    }
                    if (__privateGet(this, _bodyElement)) __privateGet(this, _bodyElement).style.display = "";
                    __privateSet(this, _isCollapsed2, false);
                    __privateGet(this, _eventStream4).emit({
                      eventName: "expanded"
                    });
                  };
                  addToCollapsedContainer_fn = function() {
                    const element = __privateGet(this, _element3);
                    if (!element) return;
                    if (__privateMethod(this, _GmailCollapsibleSectionView_instances, isCollapsedContainer_fn).call(this, element.previousElementSibling) && __privateMethod(this, _GmailCollapsibleSectionView_instances, isCollapsedContainer_fn).call(this, element.nextElementSibling)) {
                      const otherCollapseContainer = element.nextElementSibling;
                      const previousSibling = element.previousElementSibling;
                      if (!previousSibling) throw new Error("previousSibling does not exist");
                      if (!otherCollapseContainer) throw new Error("otherCollapseContainer does not exist");
                      previousSibling.children[0].appendChild(element);
                      const elementsToRecollapse = Array.from(otherCollapseContainer.children[0].children).concat(Array.from(otherCollapseContainer.children[1].children));
                      if (otherCollapseContainer) __privateMethod(this, _GmailCollapsibleSectionView_instances, pulloutSectionsFromCollapsedContainer_fn).call(this, otherCollapseContainer);
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, recollapse_fn).call(this, elementsToRecollapse);
                    } else {
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, readdToCollapsedContainer_fn).call(this);
                    }
                  };
                  removeFromCollapsedContainer_fn = function() {
                    const element = __privateGet(this, _element3);
                    if (!element) return;
                    const parentElement = element.parentElement;
                    if (!parentElement) return;
                    const container = parentElement.parentElement;
                    if (!container || !container.classList.contains("inboxsdk__results_collapsedContainer")) {
                      return;
                    }
                    const elementsToRecollapse = Array.from(container.children[0].children).concat(Array.from(container.children[1].children));
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, pulloutSectionsFromCollapsedContainer_fn).call(this, container);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, destroyCollapsedContainer_fn).call(this);
                    __privateMethod(this, _GmailCollapsibleSectionView_instances, recollapse_fn).call(this, elementsToRecollapse.filter((child) => child !== element));
                  };
                  pulloutSectionsFromCollapsedContainer_fn = function(container) {
                    const prependedChildren = Array.from(container.children[0].children);
                    prependedChildren.forEach((child) => container.insertAdjacentElement("beforebegin", child));
                    const appendedChildren = Array.from(container.children[1].children).reverse();
                    appendedChildren.forEach((child) => container.insertAdjacentElement("afterend", child));
                  };
                  readdToCollapsedContainer_fn = function() {
                    const element = __privateGet(this, _element3);
                    if (!element) return;
                    if (__privateGet(this, _collapsedContainer)) {
                      __privateGet(this, _collapsedContainer).children[0].insertBefore(element, __privateGet(this, _collapsedContainer).children[1].firstElementChild);
                      return;
                    }
                    let collapsedContainer;
                    let isPrepend;
                    if (__privateMethod(this, _GmailCollapsibleSectionView_instances, isCollapsedContainer_fn).call(this, element.previousElementSibling)) {
                      isPrepend = false;
                      collapsedContainer = element.previousElementSibling;
                    } else if (__privateMethod(this, _GmailCollapsibleSectionView_instances, isCollapsedContainer_fn).call(this, element.nextElementSibling)) {
                      isPrepend = true;
                      collapsedContainer = element.nextElementSibling;
                    } else {
                      isPrepend = true;
                      __privateMethod(this, _GmailCollapsibleSectionView_instances, createCollapsedContainer_fn).call(this);
                      collapsedContainer = __privateGet(this, _collapsedContainer);
                    }
                    if (isPrepend && collapsedContainer) {
                      collapsedContainer.children[0].insertBefore(element, collapsedContainer.children[0].firstElementChild);
                    } else if (collapsedContainer) {
                      collapsedContainer.children[0].appendChild(element);
                    }
                  };
                  isCollapsedContainer_fn = function(element) {
                    return element && element.classList.contains("inboxsdk__results_collapsedContainer");
                  };
                  recollapse_fn = function(children) {
                    children.forEach((child) => {
                      const removeEvent = document.createEvent("CustomEvent");
                      removeEvent.initCustomEvent("removeCollapsedContainer", false, false, null);
                      child.dispatchEvent(removeEvent);
                      const readdEvent = document.createEvent("CustomEvent");
                      readdEvent.initCustomEvent("readdToCollapsedContainer", false, false, null);
                      child.dispatchEvent(readdEvent);
                    });
                  };
                  createCollapsedContainer_fn = function() {
                    const collapsedContainer = __privateSet(this, _collapsedContainer, document.createElement("div"));
                    collapsedContainer.setAttribute("class", "inboxsdk__results_collapsedContainer Wg");
                    collapsedContainer.innerHTML = '<div class="inboxsdk__results_collapsedContainer_prepend"></div><div class="inboxsdk__results_collapsedContainer_append"></div>';
                    const element = __privateGet(this, _element3);
                    if (element) element.insertAdjacentElement("afterend", collapsedContainer);
                  };
                  destroyCollapsedContainer_fn = function() {
                    if (__privateGet(this, _collapsedContainer)) {
                      __privateGet(this, _collapsedContainer).remove();
                      __privateSet(this, _collapsedContainer, null);
                    }
                  };
                  function _getTableHTML() {
                    return ["<colgroup>", '<col class="k0vOLb">', '<col class="Ci">', '<col class="y5">', '<col class="WA">', '<col class="yY">', "<col>", '<col class="xX">', "</colgroup>", "<tbody>", "</tbody>"].join("");
                  }
                  function _getRowHTML(result) {
                    let iconHtml = "";
                    if (result.iconHtml != null && typeof result.iconHtml === "string") {
                      iconHtml = auto_html_js_default()`<div class="inboxsdk__resultsSection_result_icon inboxsdk__resultsSection_result_iconHtml">
        ${{
                        __html: result.iconHtml
                      }}
      </div>`;
                    } else if (result.iconUrl) {
                      iconHtml = auto_html_js_default()`<img class="inboxsdk__resultsSection_result_icon ${result.iconClass || ""}" src="${result.iconUrl}">`;
                    } else if (result.iconClass) iconHtml = auto_html_js_default()`<div class="${result.iconClass}"></div>`;
                    const labelsHtml = Array.isArray(result.labels) ? result.labels.map(_getLabelHTML).join("") : "";
                    const {
                      isRead = {
                        text: true
                      },
                      title,
                      shortDetailText
                    } = result;
                    const useReadText = typeof isRead === "object" && isRead.text || result.isRead === true;
                    const rowArr = [
                      '<td class="xY PF"></td>',
                      `<td class="xY oZ-x3 ${gmail_collapsible_section_view_module.Lm}">`,
                      iconHtml,
                      "</td>",
                      // Native Gmail thread rows include this '<td class="xY WA"></td>',
                      // and this '<td class="xY WA"></td>',
                      `<td class="xY yX ${gmail_collapsible_section_view_module.kk}">`,
                      '<div class="yW">',
                      `<span class="${gmail_collapsible_section_view_module.Lf}${useReadText ? "" : " zF"}">`,
                      ...typeof title === "string" ? [escape_default()(title)] : [],
                      "</span>",
                      "</div>",
                      "</td>",
                      '<td class="xY a4W">',
                      '<div class="xS">',
                      '<div class="xT">',
                      '<div class="yi">',
                      labelsHtml,
                      "</div>",
                      `<div class="y6 ${gmail_collapsible_section_view_module.UA}">`,
                      `<span class="bog${useReadText ? "" : " " + gmail_collapsible_section_view_module.gy}">`,
                      useReadText ? "" : "<b>",
                      escape_default()("body" in result && result.body || ""),
                      useReadText ? "" : "</b>",
                      "</span>",
                      "</div>",
                      `<div class="${gmail_collapsible_section_view_module.$r}"></div>`,
                      "</div>",
                      "</div>",
                      "</td>",
                      '<td class="xY xW">',
                      `<span class="${gmail_collapsible_section_view_module.Ad} ${useReadText ? gmail_collapsible_section_view_module.gy : "bq3"}">`,
                      ...typeof shortDetailText === "string" ? [escape_default()(shortDetailText)] : [],
                      "</span>",
                      "</td>"
                    ];
                    return rowArr.join("");
                  }
                  function _getLabelHTML(label) {
                    const backgroundColor = label.backgroundColor || "rgb(194, 194, 194)";
                    const foregroundColor = label.foregroundColor || "rgb(255, 255, 255)";
                    const maxWidth = label.maxWidth || "90px";
                    const retArray = [auto_html_js_default()`<div class="ar as" data-tooltip="${label.title}">
      <div class="at" style="background-color: ${backgroundColor}; border-color: ${backgroundColor};">
        <div class="au" style="border-color: ${backgroundColor};">`];
                    const styleHtml = label.iconBackgroundColor ? auto_html_js_default()`style="background-color: ${label.iconBackgroundColor}"` : "";
                    if (label.iconHtml != null) {
                      retArray.push(auto_html_js_default()`<div class="inboxsdk__resultsSection_label_icon inboxsdk__resultsSection_label_iconHtml"
        ${{
                        __html: styleHtml
                      }}
      >
        ${{
                        __html: label.iconHtml
                      }}
      </div>`);
                    } else if (label.iconClass) {
                      retArray.push(auto_html_js_default()`<div
        class="inboxsdk__resultsSection_label_icon ${label.iconClass || ""}"
        ${{
                        __html: styleHtml
                      }}
        >
      </div>`);
                    } else if (label.iconUrl) {
                      retArray.push(auto_html_js_default()`<img
        class="inboxsdk__resultsSection_label_icon"
        ${{
                        __html: styleHtml
                      }}
        src="${label.iconUrl}" />`);
                    }
                    retArray.push(auto_html_js_default()`
          <div class="av" style="color: ${foregroundColor}; max-width: ${maxWidth}">
            ${label.title}
          </div>
        </div>
      </div>
    </div>
    `);
                    return retArray.join("");
                  }
                  const gmail_collapsible_section_view = GmailCollapsibleSectionView;
                  var page_parser_tree_js = __webpack_require__2(855);
                  var page_parser_tree_js_default = /* @__PURE__ */ __webpack_require__2.n(page_parser_tree_js);
                  var isNotNil = __webpack_require__2(960);
                  ;
                  function makePageParser(element, logger) {
                    return new (page_parser_tree_js_default())(element, {
                      logError(err, el) {
                        const details = {
                          el,
                          html: el ? (0, censorHTMLtree.A)(el) : null
                        };
                        logger.errorSite(err, details);
                      },
                      tags: {},
                      watchers: [{
                        sources: [null],
                        tag: "rowListElementContainer",
                        selectors: [{
                          $map: () => document.querySelector(".bGI.nH")?.parentElement
                        }]
                      }, {
                        sources: ["rowListElementContainer"],
                        tag: "rowListElement",
                        selectors: [{
                          $or: [[], [".bGI.nH", ".bf5", ".bv9", ".bGC"]]
                        }, ".bGI[role=main]", "[gh=tl]"]
                      }],
                      finders: {
                        rowListElementContainer: {
                          fn: (root) => [root.querySelector(".bGI.nH")?.parentElement].filter(isNotNil.A)
                        },
                        rowListElement: {
                          fn: (root) => root.querySelectorAll("[gh=tl]")
                        }
                      }
                    });
                  }
                  var toItemWithLifetimeStream = __webpack_require__2(370);
                  ;
                  function extractDocumentHtmlAndCss() {
                    let options2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {
                      censor: true
                    };
                    try {
                      const css = Array.from(document.styleSheets).flatMap((sheet) => {
                        try {
                          const name = `
/* Stylesheet : ${sheet.href || "[inline styles]"} */`;
                          const rules = Array.from(sheet.cssRules).map((cssRule) => cssRule.cssText);
                          rules.splice(0, 0, name);
                          return rules;
                        } catch (e) {
                          return [];
                        }
                      }).join("\n").replaceAll(`url("//`, `url("https://`);
                      const links = Array.from(document.querySelectorAll("link")).filter((link) => link.href?.includes("fonts") || link.as === "image").map((link) => link.outerHTML).join("\n");
                      let body = document.body.innerHTML;
                      body = body.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, "");
                      if (options2.censor) {
                        body = (0, censorHTMLstring.A)(body);
                      }
                      return `
      <!DOCTYPE html>
      <html>
          <head>
            ${links}
            <style>
              ${css}
            </style>
          </head>
          <body>
            ${body}
          </body>
      </html>
      `;
                    } catch (err) {
                      return `couldn't extract document html and css: ${err}`;
                    }
                  }
                  ;
                  class GmailRouteView {
                    constructor(_ref, gmailRouteProcessor, driver) {
                      __privateAdd(this, _GmailRouteView_instances);
                      __publicField(this, "_stopper", js_default()());
                      __privateAdd(this, _driver7);
                      __privateAdd(this, _page);
                      __privateAdd(this, _destroyed, false);
                      __publicField(this, "getParams", once_default()(() => {
                        let params;
                        if (this._customRouteID) {
                          params = this._getCustomParams();
                        } else {
                          params = this._getNativeParams();
                          const routeID = this.getRouteID();
                          if (routeID) {
                            const routeIDParams = this._extractParamKeysFromRouteID(routeID);
                            const routeParams = {};
                            routeIDParams.forEach(function(param) {
                              if (params[param]) {
                                routeParams[param] = params[param];
                              }
                            });
                            params = routeParams;
                          }
                        }
                        return Object.freeze(params);
                      }));
                      let {
                        urlObject,
                        type,
                        routeID,
                        cachedRouteData
                      } = _ref;
                      this._type = type;
                      this._hash = urlObject.hash;
                      this._name = urlObject.name;
                      this._paramsArray = urlObject.params;
                      this._customRouteID = routeID;
                      this._cachedRouteData = cachedRouteData;
                      this._stopper = js_default()();
                      this._rowListViews = [];
                      this._gmailRouteProcessor = gmailRouteProcessor;
                      __privateSet(this, _driver7, driver);
                      this._eventStream = kefir_bus_default()();
                      this._hasAddedCollapsibleSection = false;
                      __privateSet(this, _page, makePageParser(document.body, driver.getLogger()));
                      if (this._type === "CUSTOM") {
                        this._setupCustomViewElement();
                        driver.getStopper().takeUntilBy(this._stopper.delay(0)).onValue(() => {
                          driver.showNativeRouteView();
                          window.location.hash = "#inbox";
                        });
                      } else if (includes_default()(["NATIVE", "CUSTOM_LIST"], this._type)) {
                        this._setupSubViews();
                      }
                      if (this._type === "CUSTOM_LIST") {
                        kefir_esm.later(500, void 0).takeUntilBy(this._stopper).onValue(async () => {
                          await __privateMethod(this, _GmailRouteView_instances, waitForMainElementSafe_fn).call(this);
                          if (this._stopper.stopped) return;
                          var last3 = driver.getLastCustomThreadListActivity();
                          if (!last3 || last3.customRouteID !== this._customRouteID || Date.now() - last3.timestamp > 5e3) {
                            this.refresh();
                          }
                        });
                      }
                    }
                    destroy() {
                      __privateSet(this, _destroyed, true);
                      this._stopper.destroy();
                      this._eventStream.end();
                      __privateGet(this, _page).dump();
                      if (this._customViewElement) {
                        this._customViewElement.remove();
                      }
                      var rowListViews = this._rowListViews;
                      this._rowListViews = [];
                      rowListViews.forEach((view) => {
                        view.destroy();
                      });
                      if (this._threadView) {
                        this._threadView.destroy();
                        this._threadView = null;
                      }
                    }
                    getHash() {
                      return this._hash;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getCustomViewElement() {
                      return this._customViewElement;
                    }
                    getRowListViews() {
                      return this._rowListViews;
                    }
                    getThreadView() {
                      return this._threadView;
                    }
                    getType() {
                      if (this._type === "OTHER_APP_CUSTOM") {
                        return "CUSTOM";
                      } else {
                        return this._type;
                      }
                    }
                    isCustomRouteBelongingToApp() {
                      return this._type === "CUSTOM";
                    }
                    addCollapsibleSection(sectionDescriptorProperty, groupOrderHint) {
                      return __privateMethod(this, _GmailRouteView_instances, addCollapsibleSection_fn).call(this, sectionDescriptorProperty, groupOrderHint, true);
                    }
                    addSection(sectionDescriptorProperty, groupOrderHint) {
                      return __privateMethod(this, _GmailRouteView_instances, addCollapsibleSection_fn).call(this, sectionDescriptorProperty, groupOrderHint, false);
                    }
                    hideSearchPageFilterToolbar() {
                      (0, toItemWithLifetimeStream.A)(__privateGet(this, _page).tree.getAllByTag("rowListElementContainer")).takeUntilBy(this._stopper).onValue((_ref3) => {
                        let {
                          el,
                          removalStream
                        } = _ref3;
                        el.getValue().classList.add("inboxsdk__hide_filter_toolbar");
                        removalStream.onValue(() => {
                          el.getValue().classList.remove("inboxsdk__hide_filter_toolbar");
                        });
                      });
                    }
                    _setupCustomViewElement() {
                      this._customViewElement = document.createElement("div");
                      this._customViewElement.classList.add("inboxsdk__custom_view_element");
                      this._monitorLeftNavHeight();
                      this._setCustomViewElementHeight();
                    }
                    _monitorLeftNavHeight() {
                      var leftNav = gmail_element_getter.A.getLeftNavHeightElement();
                      if (!leftNav) {
                        return;
                      }
                      (0, make_mutation_observer_chunked_stream.A)(leftNav, {
                        attributes: true,
                        attributeFilter: ["style"]
                      }).takeUntilBy(this._stopper).onValue(() => {
                        this._setCustomViewElementHeight();
                      });
                    }
                    _setCustomViewElementHeight() {
                      const leftNav = gmail_element_getter.A.getLeftNavHeightElement();
                      const gtalkButtons = gmail_element_getter.A.getGtalkButtons();
                      const customViewEl = this._customViewElement;
                      if (!leftNav || !customViewEl) throw new Error("Should not happen");
                      const contentSectionElement = gmail_element_getter.A.getContentSectionElement();
                      const contentSectionElementBottomMargin = contentSectionElement ? parseInt(getComputedStyle(contentSectionElement).marginBottom, 10) : 0;
                      customViewEl.style.height = `${parseInt(leftNav.style.height, 10) + (gtalkButtons ? gtalkButtons.offsetHeight : 0) - contentSectionElementBottomMargin}px`;
                    }
                    _setupSubViews() {
                      browser_asap_default()(async () => {
                        if (!this._eventStream) return;
                        await __privateMethod(this, _GmailRouteView_instances, waitForMainElementSafe_fn).call(this);
                        __privateMethod(this, _GmailRouteView_instances, monitorRowListElements_fn).call(this);
                        __privateMethod(this, _GmailRouteView_instances, setupContentAndSidebarView_fn).call(this);
                        this._setupScrollStream();
                      });
                    }
                    _processRowListElement(rowListElement) {
                      var rootElement = rowListElement.parentElement;
                      if (!rootElement) throw new Error("no rootElement");
                      var gmailRowListView = new gmail_row_list_view(rootElement, this, __privateGet(this, _driver7));
                      this._rowListViews.push(gmailRowListView);
                      this._eventStream.emit({
                        eventName: "newGmailRowListView",
                        view: gmailRowListView
                      });
                    }
                    _setupScrollStream() {
                      const SCROLL_DEBOUNCE_MS = 100;
                      const scrollContainer = gmail_element_getter.A.getScrollContainer();
                      const {
                        scrollTop: cachedScrollTop
                      } = this._cachedRouteData;
                      if (scrollContainer && this._hasAddedCollapsibleSection) {
                        if (cachedScrollTop) {
                          scrollContainer.scrollTop = cachedScrollTop;
                        }
                        kefir_esm.fromEvents(scrollContainer, "scroll").throttle(SCROLL_DEBOUNCE_MS).map((e) => e.target.scrollTop).takeUntilBy(this._stopper).onValue((scrollTop) => {
                          this._cachedRouteData.scrollTop = scrollTop;
                        });
                      }
                    }
                    _getCustomParams() {
                      var params = /* @__PURE__ */ Object.create(null);
                      if (!this._customRouteID) throw new Error("Should not happen, can't get custom params for non-custom view");
                      this._customRouteID.split("/").slice(1).forEach((part, index) => {
                        if (part[0] !== ":") {
                          return;
                        }
                        part = part.substring(1);
                        if (this._paramsArray[index]) {
                          params[part] = this._paramsArray[index];
                        }
                      });
                      return params;
                    }
                    _getNativeParams() {
                      if (this._isSearchRoute()) {
                        return this._getSearchRouteParams();
                      } else if (this._isListRoute()) {
                        return this._getListRouteParams();
                      } else if (this._isThreadRoute()) {
                        return this._getThreadRouteParams();
                      } else if (this._isSettingsRoute()) {
                        return this._getSettingsRouteParams();
                      }
                      return {};
                    }
                    _isSearchRoute() {
                      return this.getRouteID() === this._gmailRouteProcessor.NativeRouteIDs.SEARCH;
                    }
                    /* FEB 2023 */
                    _isChatWelcomeRoute() {
                      return this._hash === this._gmailRouteProcessor.NativeRouteIDs.CHAT_WELCOME;
                    }
                    _isChatDmRoute() {
                      return this._name === "chat" && this._paramsArray?.[0] === "dm" && !!this._paramsArray?.[1];
                    }
                    _isSpacesWelcomeRoute() {
                      return this._hash === this._gmailRouteProcessor.NativeRouteIDs.SPACES_WELCOME;
                    }
                    _isSpaceRoute() {
                      return this._name === "chat" && this._paramsArray?.[0] === "space" && !!this._paramsArray?.[1];
                    }
                    _isMeetRoute() {
                      return this._hash === this._gmailRouteProcessor.NativeRouteIDs.MEET;
                    }
                    /* end FEB 2023 */
                    getRouteType() {
                      if (includes_default()(["CUSTOM", "OTHER_APP_CUSTOM"], this._type)) {
                        return this._gmailRouteProcessor.RouteTypes.CUSTOM;
                      } else if (this._isListRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.LIST;
                      } else if (this._isThreadRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.THREAD;
                      } else if (this._isSettingsRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.SETTINGS;
                      } else if (this._isChatWelcomeRoute() || this._isChatDmRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.CHAT;
                      } else if (this._isSpacesWelcomeRoute() || this._isSpaceRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.SPACE;
                      } else if (this._isMeetRoute()) {
                        return this._gmailRouteProcessor.RouteTypes.MEET;
                      }
                      return this._gmailRouteProcessor.RouteTypes.UNKNOWN;
                    }
                    _isThreadRoute() {
                      return !!this._getThreadContainerElement();
                    }
                    _isListRoute() {
                      return (this._type === "CUSTOM_LIST" || this._gmailRouteProcessor.isListRouteName(this._name)) && // this case is for when you're on a THREAD route, but the thread renders a list like our thread breaker does
                      !this._isThreadRoute();
                    }
                    _isSettingsRoute() {
                      return this._gmailRouteProcessor.isSettingsRouteName(this._name);
                    }
                    _getSearchRouteParams() {
                      return {
                        query: this._paramsArray[0],
                        includesDriveResults: this._name === "apps",
                        page: this._getPageParam()
                      };
                    }
                    _getListRouteParams() {
                      var params = {
                        page: this._getPageParam()
                      };
                      if (this.getRouteID() === this._gmailRouteProcessor.NativeRouteIDs.LABEL && this._paramsArray[0]) {
                        params.labelName = this._paramsArray[0];
                      }
                      return params;
                    }
                    _getThreadRouteParams() {
                      if (this._paramsArray && this._paramsArray.length > 0) {
                        const threadID2 = last_default()(this._paramsArray);
                        if (threadID2 && (threadID2.length === 16 || //for old hex style
                        threadID2[0] === "#")) {
                          return {
                            threadID: threadID2.replace("#", "")
                          };
                        }
                      }
                      const threadContainerElement = this._getThreadContainerElement();
                      let threadID;
                      if (threadContainerElement) {
                        try {
                          threadID = __privateGet(this, _driver7).getPageCommunicator().getCurrentThreadID(threadContainerElement);
                        } catch (err) {
                        }
                      }
                      if (!threadID) {
                        threadID = (0, querystring_es3.parse)(document.location.search, null, null).th || "";
                      }
                      return {
                        threadID
                      };
                    }
                    _getSettingsRouteParams() {
                      return {
                        tabName: this._paramsArray[0]
                      };
                    }
                    _getPageParam() {
                      for (var ii = 1; ii < this._paramsArray.length; ii++) {
                        if (this._paramsArray[ii].match(/p\d+/)) {
                          return parseInt(this._paramsArray[ii].replace(/[a-zA-Z]/, ""), 10);
                        }
                      }
                      return 1;
                    }
                    getRouteID() {
                      if (this._customRouteID) {
                        return this._customRouteID;
                      } else if (this._isThreadRoute()) {
                        return this._gmailRouteProcessor.NativeRouteIDs.THREAD;
                      } else if (this._isChatWelcomeRoute()) {
                        return this._gmailRouteProcessor.NativeRouteIDs.CHAT_WELCOME;
                      } else if (this._isChatDmRoute()) {
                        return this._gmailRouteProcessor.NativeRouteIDs.CHAT_DM;
                      } else if (this._isSpacesWelcomeRoute()) {
                        return this._gmailRouteProcessor.NativeRouteIDs.SPACES_WELCOME;
                      } else if (this._isSpaceRoute()) {
                        return this._gmailRouteProcessor.NativeRouteIDs.SPACE;
                      } else {
                        return this._gmailRouteProcessor.getRouteID(this._name);
                      }
                    }
                    // Used to click gmail refresh button in thread lists
                    refresh() {
                      var el = gmail_element_getter.A.getToolbarElement().querySelector("div.T-I.nu");
                      if (el) {
                        var prevActive = document.activeElement;
                        var prevClassName = el.className;
                        (0, simulate_mouse_event.jp)(el);
                        el.className = prevClassName;
                        if (prevActive) {
                          prevActive.focus();
                        } else {
                          el.blur();
                        }
                      }
                    }
                    /** @deprecated */
                    setFullWidth() {
                    }
                    _extractParamKeysFromRouteID(routeID) {
                      return routeID.split("/").filter((part) => part[0] === ":").map((part) => part.substring(1));
                    }
                    _getThreadContainerElement() {
                      return gmail_element_getter.A.getThreadContainerElement();
                    }
                  }
                  _driver7 = new WeakMap();
                  _page = new WeakMap();
                  _destroyed = new WeakMap();
                  _GmailRouteView_instances = new WeakSet();
                  addCollapsibleSection_fn = function(collapsibleSectionDescriptorProperty, groupOrderHint, isCollapsible) {
                    this._hasAddedCollapsibleSection = true;
                    var gmailResultsSectionView = new gmail_collapsible_section_view(__privateGet(this, _driver7), groupOrderHint, this.getRouteID() === this._gmailRouteProcessor.NativeRouteIDs.SEARCH, isCollapsible);
                    kefir_esm.combine([__privateMethod(this, _GmailRouteView_instances, getSectionsContainer_fn).call(this), gmailResultsSectionView.eventStream.filter((event) => {
                      return "type" in event && event.type === "update" && event.property === "orderHint";
                    })]).onValue((_ref2) => {
                      let [sectionsContainer] = _ref2;
                      const children = sectionsContainer.children;
                      const insertBeforeElement = getInsertBeforeElement(gmailResultsSectionView.getElement(), children, ["data-group-order-hint", "data-order-hint"]);
                      if (insertBeforeElement) {
                        sectionsContainer.insertBefore(gmailResultsSectionView.getElement(), insertBeforeElement);
                      } else {
                        sectionsContainer.appendChild(gmailResultsSectionView.getElement());
                      }
                    });
                    gmailResultsSectionView.setCollapsibleSectionDescriptorProperty(collapsibleSectionDescriptorProperty);
                    return gmailResultsSectionView;
                  };
                  waitForMainElementSafe_fn = async function() {
                    try {
                      await (0, wait_for.A)(() => document.querySelector("[role=main]"), 15e3);
                    } catch {
                      __privateGet(this, _driver7).getLogger().error(new querySelectorOrFail.a("[role=main]"), {
                        html: extractDocumentHtmlAndCss()
                      });
                    }
                  };
                  monitorRowListElements_fn = function() {
                    (0, toItemWithLifetimeStream.A)(__privateGet(this, _page).tree.getAllByTag("rowListElement")).takeUntilBy(this._stopper).onValue((_ref4) => {
                      let {
                        el
                      } = _ref4;
                      this._processRowListElement(el.getValue());
                    });
                  };
                  setupContentAndSidebarView_fn = async function() {
                    const parseResult = await __privateMethod(this, _GmailRouteView_instances, waitForThreadContainerSafe_fn).call(this);
                    if (__privateGet(this, _destroyed)) {
                      return;
                    }
                    if (parseResult?.threadContainerElement) {
                      var gmailThreadView = new gmail_thread_view(parseResult.threadContainerElement, this, __privateGet(this, _driver7));
                      this._threadView = gmailThreadView;
                      this._eventStream.emit({
                        eventName: "newGmailThreadView",
                        view: gmailThreadView
                      });
                    } else if (parseResult?.previewPaneContainerElement) {
                      __privateMethod(this, _GmailRouteView_instances, startMonitoringPreviewPaneForThread_fn).call(this, parseResult.previewPaneContainerElement);
                    } else {
                    }
                  };
                  waitForThreadContainerSafe_fn = async function() {
                    let parseResult = null;
                    try {
                      parseResult = await (0, wait_for.A)(() => {
                        if (__privateGet(this, _destroyed)) {
                          return {};
                        }
                        const threadContainerElement = this._getThreadContainerElement();
                        if (threadContainerElement) {
                          return {
                            threadContainerElement
                          };
                        }
                        const previewPaneContainerElement = gmail_element_getter.A.getPreviewPaneContainerElement();
                        if (previewPaneContainerElement) {
                          return {
                            previewPaneContainerElement
                          };
                        }
                        return null;
                      }, 15e3);
                    } catch {
                    }
                    if (parseResult === null) {
                      const viewWithRows = __privateGet(this, _page).tree.getAllByTag("rowListElement").values().size > 0;
                      const readingPaneDisabled = !document.querySelector(".bGI[role=main] .Nu.S3.aZ6");
                      if (viewWithRows && readingPaneDisabled) {
                      } else {
                        const error = new Error("Thread container element wasn't found");
                        if ((0, isStreakAppId.A)(__privateGet(this, _driver7).getAppId())) {
                          __privateGet(this, _driver7).getLogger().error(error, {
                            html: extractDocumentHtmlAndCss()
                          });
                        }
                      }
                    }
                    return parseResult;
                  };
                  startMonitoringPreviewPaneForThread_fn = async function(previewPaneContainer) {
                    let threadContainerElement;
                    const selector = "table.Bs > tr";
                    const selector_2023_11_30 = ".ao9:has(.a98.iY, .apa)";
                    try {
                      threadContainerElement = await (0, wait_for.A)(() => {
                        if (__privateGet(this, _destroyed)) {
                          return "destroyed";
                        }
                        const threadContainerElement2 = previewPaneContainer.querySelector(selector);
                        if (threadContainerElement2) {
                          return threadContainerElement2;
                        }
                        return previewPaneContainer.querySelector(selector_2023_11_30);
                      }, 15e3);
                    } catch {
                      const selectorError = new querySelectorOrFail.a(`${selector}, ${selector_2023_11_30}`, {
                        cause: new Error("Thread container for preview pane wasn't found")
                      });
                      if ((0, isStreakAppId.A)(__privateGet(this, _driver7).getAppId())) {
                        __privateGet(this, _driver7).getLogger().error(selectorError, {
                          html: extractDocumentHtmlAndCss()
                        });
                      }
                      throw selectorError;
                    }
                    if (threadContainerElement === "destroyed") {
                      return;
                    }
                    const elementStream = (0, make_element_child_stream.A)(threadContainerElement).filter((event) => event.el.matches(".a98.iY"));
                    this._eventStream.plug(elementStream.flatMap(makeElementViewStream((element) => new gmail_thread_view(element, this, __privateGet(this, _driver7), true))).map((view) => {
                      this._threadView = view;
                      return {
                        eventName: "newGmailThreadView",
                        view
                      };
                    }));
                  };
                  getSectionsContainer_fn = function() {
                    return (0, toItemWithLifetimeStream.A)(__privateGet(this, _page).tree.getAllByTag("rowListElementContainer")).takeUntilBy(this._stopper).take(1).map((_ref5) => {
                      let {
                        el
                      } = _ref5;
                      const main = el.getValue();
                      let sectionsContainer = main.querySelector(".inboxsdk__custom_sections");
                      if (!sectionsContainer) {
                        sectionsContainer = document.createElement("div");
                        sectionsContainer.classList.add("inboxsdk__custom_sections");
                        main.insertBefore(sectionsContainer, main.firstChild);
                      } else if (sectionsContainer.classList.contains("Wc") && !this._isSearchRoute()) {
                        sectionsContainer.classList.remove("Wc");
                      }
                      return sectionsContainer;
                    }).toProperty();
                  };
                  const gmail_route_view = GmailRouteView;
                  var defaults = __webpack_require__2(8278);
                  var defaults_default = /* @__PURE__ */ __webpack_require__2.n(defaults);
                  ;
                  const ancientComplainTime = 2 * 60 * 1e3;
                  const dummyPacket = Object.freeze({
                    destroy: Object.freeze(function() {
                    })
                  });
                  const butter_bar_memberMap = /* @__PURE__ */ new WeakMap();
                  class ButterBar {
                    constructor(appId, driver) {
                      const members = {
                        driver,
                        messagesByKey: /* @__PURE__ */ new Map(),
                        queuedPackets: []
                      };
                      butter_bar_memberMap.set(this, members);
                    }
                    showMessage(options2) {
                      defaults_default()(options2, {
                        priority: 0,
                        time: 15 * 1e3,
                        hideOnViewChanged: true,
                        persistent: false
                      });
                      this.hideMessage(options2.messageKey);
                      const members = (0, get_or_fail.A)(butter_bar_memberMap, this);
                      const butterBarDriver = members.driver.getButterBarDriver();
                      const messageId = Date.now() + "-" + Math.random();
                      {
                        let queue = butterBarDriver.getSharedMessageQueue();
                        queue.unshift({
                          messageId,
                          priority: options2.priority,
                          persistent: options2.persistent
                        });
                        queue = sortBy_default()(queue, (item) => -item.priority);
                        queue = queue.filter((item, i) => i === 0 || item.persistent);
                        butterBarDriver.setSharedMessageQueue(queue);
                        if (!find_default()(queue, (item) => item.messageId === messageId)) {
                          return dummyPacket;
                        }
                      }
                      const stopper = kefir_bus_default()();
                      if (options2.hideOnViewChanged) {
                        stopper.plug(kefir_esm["default"].later(0, null).flatMap(() => members.driver.getRouteViewDriverStream().changes()).map(() => null));
                      }
                      if (isFinite(options2.time)) {
                        stopper.plug(kefir_esm["default"].later(options2.time, null));
                      }
                      const timeoutErr = new Error("Butter bar message timed out");
                      stopper.plug(kefir_esm["default"].later(ancientComplainTime, null).map((x) => {
                        members.driver.getLogger().errorApp(timeoutErr);
                        return x;
                      }));
                      stopper.take(1).onValue(() => {
                        if (options2.messageKey) {
                          members.messagesByKey.delete(options2.messageKey);
                        }
                        const queue = butterBarDriver.getSharedMessageQueue();
                        butterBarDriver.setSharedMessageQueue(queue.filter((item) => item.messageId !== messageId));
                      });
                      butterBarDriver.getNoticeAvailableStream().toProperty(() => null).takeUntilBy(stopper).filter(() => {
                        const queue = butterBarDriver.getSharedMessageQueue();
                        if (!queue[0]) stopper.value(void 0);
                        return queue[0] && queue[0].messageId === messageId;
                      }).onValue(() => {
                        const rawHandle = butterBarDriver.showMessage(options2);
                        stopper.take(1).onValue(() => {
                          rawHandle.destroy();
                        });
                      });
                      const message = {
                        destroy() {
                          stopper.value(void 0);
                        }
                      };
                      if (options2.messageKey) {
                        members.messagesByKey.set(options2.messageKey, message);
                      }
                      return message;
                    }
                    showLoading() {
                      let options2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      defaults_default()(options2, {
                        text: "Loading...",
                        priority: -3,
                        time: Infinity,
                        persistent: true,
                        hideOnViewChanged: true
                      });
                      options2.time = Infinity;
                      return this.showMessage(options2);
                    }
                    showError(options2) {
                      defaults_default()(options2, {
                        priority: 100,
                        className: "inboxsdk__butterbar_error"
                      });
                      return this.showMessage(options2);
                    }
                    showSaving() {
                      let options2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
                      defaults_default()(options2, {
                        text: "Saving...",
                        confirmationText: "Saved",
                        confirmationTime: 1 * 1e3,
                        priority: -2,
                        time: Infinity,
                        persistent: true,
                        hideOnViewChanged: false,
                        showConfirmation: true
                      });
                      const savingMessage = this.showMessage(options2);
                      const deferred = defer();
                      deferred.promise.then(() => {
                        savingMessage.destroy();
                        if (options2.showConfirmation) {
                          this.showMessage({
                            text: options2.confirmationText,
                            messageKey: options2.messageKey,
                            time: options2.confirmationTime,
                            priority: 200
                          });
                        }
                      }, () => {
                        savingMessage.destroy();
                      });
                      return deferred;
                    }
                    hideMessage(messageKey) {
                      if (messageKey) {
                        const members = (0, get_or_fail.A)(butter_bar_memberMap, this);
                        const message = members.messagesByKey.get(messageKey);
                        if (message) {
                          message.destroy();
                        }
                      }
                    }
                    hideGmailMessage() {
                      const members = (0, get_or_fail.A)(butter_bar_memberMap, this);
                      const butterBarDriver = members.driver.getButterBarDriver();
                      butterBarDriver.hideGmailMessage();
                    }
                  }
                  var compose = __webpack_require__2(1140);
                  var keyboard = __webpack_require__2(1351);
                  ;
                  class ModalView extends safe_event_emitter.A {
                    constructor(options2) {
                      super();
                      __publicField(this, "destroyed", false);
                      this._driver = options2.driver;
                      this._modalViewDriver = options2.modalViewDriver;
                      options2.modalViewDriver.getEventStream().filter((event) => event.eventName === "closeClick").onValue(() => {
                        this.close();
                      });
                      options2.modalViewDriver.getEventStream().onEnd(() => {
                        this._modalViewDriver = null;
                        this.destroyed = true;
                        _handleModalStackOnModalDestroy(this);
                        this.emit("destroy");
                      });
                    }
                    show() {
                      const modalViewDriver = this._modalViewDriver;
                      if (!modalViewDriver) {
                        throw new Error("Modal can not be shown after being hidden");
                      }
                      const hideAndDestroyStream = kefir_esm["default"].merge([kefir_esm["default"].fromEvents(this, "destroy"), hideStream.filter((modalView) => modalView === this)]);
                      document.body.appendChild(modalViewDriver.getModalContainerElement());
                      modalViewDriver.getModalContainerElement().focus();
                      kefir_esm["default"].fromEvents(document.body, "keydown").filter((domEvent) => domEvent.keyCode === 27).takeUntilBy(hideAndDestroyStream).onValue((domEvent) => {
                        domEvent.stopImmediatePropagation();
                        domEvent.stopPropagation();
                        domEvent.preventDefault();
                        this.close();
                      });
                      _replaceCurrentlyShowingModal(this, modalViewDriver);
                    }
                    setTitle(title) {
                      if (!this._modalViewDriver) {
                        throw new Error("Modal can not be shown after being hidden");
                      }
                      this._modalViewDriver.setTitle(title);
                    }
                    close() {
                      if (this._modalViewDriver) {
                        this._modalViewDriver.destroy();
                      }
                    }
                    addButton() {
                      throw new Error("not implemented");
                    }
                  }
                  let activeBackdrop = null;
                  let currentlyShowingModal = null;
                  const hideStream = kefir_bus_default()();
                  const hiddenModalStack = [];
                  function _handleModalStackOnModalDestroy(modalView) {
                    if (currentlyShowingModal && currentlyShowingModal.modalView === modalView) {
                      currentlyShowingModal = null;
                      if (hiddenModalStack.length > 0) {
                        hiddenModalStack.pop().show();
                      } else {
                        if (activeBackdrop) {
                          activeBackdrop.destroy();
                        }
                      }
                    } else if (hiddenModalStack.indexOf(modalView) > -1) {
                      hiddenModalStack.splice(hiddenModalStack.indexOf(modalView), 1);
                    }
                  }
                  function _replaceCurrentlyShowingModal(modalView, modalViewDriver) {
                    if (currentlyShowingModal) {
                      hideStream.emit(currentlyShowingModal.modalView);
                      hiddenModalStack.push(currentlyShowingModal.modalView);
                      currentlyShowingModal.modalViewDriver.getModalContainerElement().remove();
                    } else {
                      if (!activeBackdrop) {
                        activeBackdrop = modalView._driver.createBackdrop(502);
                        activeBackdrop.getStopper().onValue(() => {
                          activeBackdrop = null;
                          hiddenModalStack.slice().forEach((modalView2) => {
                            modalView2.close();
                          });
                          if (currentlyShowingModal) {
                            currentlyShowingModal.modalView.close();
                          }
                        });
                      }
                    }
                    currentlyShowingModal = {
                      modalView,
                      modalViewDriver
                    };
                  }
                  const modal_view = ModalView;
                  ;
                  const mole_view_memberMap = /* @__PURE__ */ new WeakMap();
                  class MoleView extends safe_event_emitter.A {
                    constructor(options2) {
                      super();
                      __publicField(this, "destroyed", false);
                      const members = {
                        driver: options2.moleViewDriver
                      };
                      mole_view_memberMap.set(this, members);
                      members.driver.getEventStream().onValue((e) => {
                        this.emit(e.eventName);
                      });
                      members.driver.getEventStream().onEnd(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                      });
                    }
                    close() {
                      const members = (0, get_or_fail.A)(mole_view_memberMap, this);
                      members.driver.destroy();
                    }
                    setTitle(text) {
                      const members = (0, get_or_fail.A)(mole_view_memberMap, this);
                      members.driver.setTitle(text);
                    }
                    setMinimized(minimized) {
                      const members = (0, get_or_fail.A)(mole_view_memberMap, this);
                      members.driver.setMinimized(minimized);
                    }
                    getMinimized() {
                      const members = (0, get_or_fail.A)(mole_view_memberMap, this);
                      return members.driver.getMinimized();
                    }
                  }
                  ;
                  class DrawerView extends safe_event_emitter.A {
                    constructor(drawerViewDriver) {
                      super();
                      __publicField(this, "destroyed", false);
                      this._driver = drawerViewDriver;
                      this._driver.getSlideAnimationDone().onValue(() => {
                        this.emit("slideAnimationDone");
                      });
                      this._driver.getClosingStream().onValue(() => {
                        this.emit("closing");
                      });
                      this._driver.getClosedStream().onValue(() => {
                        this.destroyed = true;
                        this.emit("destroy");
                      });
                      this._driver.getPreAutoCloseStream().onValue((event) => {
                        this.emit("preautoclose", event);
                      });
                      document.dispatchEvent(new CustomEvent("inboxSDKcloseDrawers", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      kefir_esm["default"].fromEvents(document, "inboxSDKcloseDrawers").takeUntilBy(kefir_esm["default"].fromEvents(this, "closing")).onValue(() => {
                        this.close();
                      });
                    }
                    close() {
                      this._driver.close();
                    }
                    associateComposeView(composeView, closeWithCompose) {
                      if (!(composeView instanceof compose_view.A)) throw new Error("argument was not a ComposeView");
                      this._driver.associateComposeView(composeView, closeWithCompose);
                    }
                    disassociateComposeView() {
                      this._driver.disassociateComposeView();
                    }
                  }
                  const drawer_view = DrawerView;
                  ;
                  const top_message_bar_view_memberMap = /* @__PURE__ */ new WeakMap();
                  class TopMessageBarView extends safe_event_emitter.A {
                    constructor(options2) {
                      super();
                      const members = {
                        driver: options2.topMessageBarViewDriver
                      };
                      top_message_bar_view_memberMap.set(this, members);
                    }
                    remove() {
                      (0, get_or_fail.A)(top_message_bar_view_memberMap, this).driver.remove();
                    }
                  }
                  ;
                  function isGmailRuleForTitlebarWideIcons() {
                    return !![...document.styleSheets].find((s) => {
                      try {
                        if (s.cssRules) {
                          return [...s.cssRules].find((rule) => rule instanceof CSSStyleRule && rule.selectorText === ".Hl" && rule.style.width === "24px");
                        }
                      } catch (e) {
                      }
                      return false;
                    });
                  }
                  const isComposeTitleBarLightColor = once_default()(() => {
                    return !isGmailRuleForTitlebarWideIcons();
                  });
                  const is_compose_titlebar_light_color = isComposeTitleBarLightColor;
                  ;
                  class Widgets {
                    constructor(appId, driver) {
                      const members = {
                        driver
                      };
                      widgets_memberMap.set(this, members);
                    }
                    showModalView(options2) {
                      if (options2.buttons) {
                        options2.buttons = options2.buttons.map((button) => {
                          if (button.onClick) {
                            const appOnClick = button.onClick;
                            return {
                              ...button,
                              onClick() {
                                appOnClick({
                                  modalView
                                });
                              }
                            };
                          }
                          return button;
                        });
                      }
                      const {
                        driver
                      } = (0, get_or_fail.A)(widgets_memberMap, this);
                      const modalViewDriver = driver.createModalViewDriver(options2);
                      const modalView = new modal_view({
                        driver,
                        modalViewDriver
                      });
                      modalView.show();
                      return modalView;
                    }
                    showMoleView(options2) {
                      const moleViewDriver = (0, get_or_fail.A)(widgets_memberMap, this).driver.createMoleViewDriver(options2);
                      const moleView = new MoleView({
                        moleViewDriver
                      });
                      moleViewDriver.show();
                      return moleView;
                    }
                    showTopMessageBarView(options2) {
                      const topMessageBarViewDriver = (0, get_or_fail.A)(widgets_memberMap, this).driver.createTopMessageBarDriver(kefir_cast_default()(kefir_esm["default"], options2));
                      return new TopMessageBarView({
                        topMessageBarViewDriver
                      });
                    }
                    showDrawerView(options2) {
                      (0, get_or_fail.A)(widgets_memberMap, this).driver.getLogger().eventSdkActive("Widgets.showDrawerView used", {
                        keys: Object.keys(options2)
                      });
                      if (options2.composeView && !(options2.composeView instanceof compose_view.A)) throw new Error("composeView option was not a ComposeView");
                      const drawerViewDriver = (0, get_or_fail.A)(widgets_memberMap, this).driver.createDrawerViewDriver(options2);
                      return new drawer_view(drawerViewDriver);
                    }
                    isMoleViewTitleBarLightColor() {
                      return is_compose_titlebar_light_color();
                    }
                  }
                  const widgets_memberMap = /* @__PURE__ */ new Map();
                  const widgets = Widgets;
                  ;
                  class Modal {
                    constructor(appId, driver, piOpts) {
                      __privateAdd(this, _driver8);
                      __privateAdd(this, _piOpts);
                      __privateSet(this, _driver8, driver);
                      __privateSet(this, _piOpts, piOpts);
                    }
                    /**
                     * @deprecated use Widgets.showModalView
                     */
                    show(options2) {
                      const driver = __privateGet(this, _driver8);
                      if (__privateGet(this, _piOpts).REQUESTED_API_VERSION < 2) {
                        driver.getLogger().deprecationWarning("Modal.show", "Widgets.showModalView");
                      }
                      const modalViewDriver = driver.createModalViewDriver(options2);
                      const modalView = new modal_view({
                        driver,
                        modalViewDriver
                      });
                      modalView.show();
                      return modalView;
                    }
                    // Deprecated, does not have an exact replacement. Use Widgets.showModalView.
                    createModalView(options2) {
                      const driver = __privateGet(this, _driver8);
                      driver.getLogger().deprecationWarning("Modal.createModalView", "Widgets.showModalView");
                      const modalViewDriver = driver.createModalViewDriver(options2);
                      return new modal_view({
                        driver,
                        modalViewDriver
                      });
                    }
                  }
                  _driver8 = new WeakMap();
                  _piOpts = new WeakMap();
                  const modal = Modal;
                  ;
                  const lists_memberMap = /* @__PURE__ */ new WeakMap();
                  class Lists {
                    constructor(appId, driver, membrane) {
                      __publicField(this, "ActionButtonTypes", ActionButtonTypes);
                      const members = {
                        appId,
                        driver,
                        membrane,
                        threadRowViewRegistry: new handler_registry.A()
                      };
                      lists_memberMap.set(this, members);
                      driver.getStopper().onValue(() => {
                        members.threadRowViewRegistry.dumpHandlers();
                      });
                      members.driver.getThreadRowViewDriverStream().onValue((viewDriver) => {
                        const view = membrane.get(viewDriver);
                        members.threadRowViewRegistry.addTarget(view);
                      });
                    }
                    registerThreadRowViewHandler(handler) {
                      return (0, get_or_fail.A)(lists_memberMap, this).threadRowViewRegistry.registerHandler(handler);
                    }
                    getSelectedThreadRowViews() {
                      const members = (0, get_or_fail.A)(lists_memberMap, this);
                      const threadRowViewDrivers = members.driver.getSelectedThreadRowViewDrivers();
                      const threadRowViews = threadRowViewDrivers.map((d) => members.membrane.get(d));
                      return threadRowViews;
                    }
                    registerThreadRowViewSelectionHandler(handler) {
                      const members = (0, get_or_fail.A)(lists_memberMap, this);
                      return members.driver.registerThreadRowViewSelectionHandler(handler);
                    }
                  }
                  const ActionButtonTypes = Object.freeze({
                    LINK: "LINK",
                    DROPDOWN: "DROPDOWN",
                    ACTION: "ACTION"
                  });
                  var isEqual = __webpack_require__2(1470);
                  var isEqual_default = /* @__PURE__ */ __webpack_require__2.n(isEqual);
                  ;
                  const navItemTypes = Object.freeze({
                    /**
                     * standard nav item for navigating
                     */
                    NAVIGATION: "NAVIGATION",
                    /**
                     * nav item that looks like a link
                     */
                    LINK: "LINK",
                    /**
                     * nav item for logical grouping. In Gmailv2, the entire nav item can be clicked to expand/collapse its children
                     * and it ignores all NavItemDescriptor options other than `name` and `subtitle`.
                     * Behaves identically to NAVIGATION when in Gmailv1.
                     */
                    GROUPER: "GROUPER",
                    /** Old alias for LINK */
                    MANAGE: "MANAGE",
                    SECTION: "SECTION"
                  });
                  const nav_item_types = navItemTypes;
                  ;
                  const _NavItemView = class _NavItemView extends safe_event_emitter.A {
                    constructor(appId, driver, navItemDescriptorPropertyStream, navItemViewDriverPromise) {
                      super();
                      __privateAdd(this, _NavItemView_instances);
                      __privateAdd(this, _appId2);
                      __privateAdd(this, _driver9);
                      __privateAdd(this, _navItemDescriptorPropertyStream);
                      __privateAdd(this, _navItemViews, []);
                      __privateAdd(this, _navItemViewDriver, null);
                      __privateAdd(this, _navItemViewDriverPromise);
                      __publicField(this, "destroyed", false);
                      __privateSet(this, _appId2, appId);
                      __privateSet(this, _driver9, driver);
                      __privateSet(this, _navItemDescriptorPropertyStream, navItemDescriptorPropertyStream);
                      __privateSet(this, _navItemViewDriverPromise, navItemViewDriverPromise);
                      driver.getStopper().onValue(this.remove.bind(this));
                      navItemViewDriverPromise.then((navItemViewDriver) => {
                        if (this.destroyed || !navItemViewDriver) {
                          return;
                        }
                        const driver2 = __privateGet(this, _driver9);
                        __privateSet(this, _navItemViewDriver, navItemViewDriver);
                        __privateGet(this, _navItemDescriptorPropertyStream).sampledBy(navItemViewDriver.getEventStream(), (a, b) => [a, b]).onValue((navItemDescriptor) => __privateMethod(this, _NavItemView_instances, handleViewDriverStreamEvent_fn).call(this, navItemViewDriver, navItemDescriptor));
                        kefir_esm["default"].combine([__privateGet(this, _navItemDescriptorPropertyStream), driver2.getRouteViewDriverStream()]).takeUntilBy(navItemViewDriver.getEventStream().filter(() => false).beforeEnd(() => null)).onValue((x) => {
                          _handleRouteViewChange(navItemViewDriver, x);
                        });
                        this.emit("inserted");
                      });
                    }
                    addNavItem(navItemDescriptor) {
                      if (this.destroyed) throw new Error("this nav item view does not exist");
                      const driver = __privateGet(this, _driver9);
                      const appId = __privateGet(this, _appId2);
                      const navItemViews = __privateGet(this, _navItemViews);
                      const navItemDescriptorPropertyStream = kefir_cast_default()(kefir_esm["default"], navItemDescriptor).toProperty();
                      const childNavItemView = new _NavItemView(appId, driver, navItemDescriptorPropertyStream, __privateGet(this, _navItemViewDriverPromise).then((navItemViewDriver) => {
                        const childNavItemViewDriver = navItemViewDriver.addNavItem(__privateGet(this, _appId2), navItemDescriptorPropertyStream);
                        return childNavItemViewDriver;
                      }));
                      navItemViews.push(childNavItemView);
                      return childNavItemView;
                    }
                    remove() {
                      if (this.destroyed) {
                        return;
                      }
                      const navItemViews = __privateGet(this, _navItemViews);
                      this.destroyed = true;
                      this.emit("destroy");
                      navItemViews.forEach(function(navItemView) {
                        navItemView.remove();
                      });
                      __privateGet(this, _navItemViewDriverPromise).then((navItemViewDriver) => {
                        navItemViewDriver.destroy();
                      });
                    }
                    isCollapsed() {
                      const navItemViewDriver = __privateGet(this, _navItemViewDriver);
                      if (navItemViewDriver) {
                        return navItemViewDriver.isCollapsed();
                      } else {
                        return false;
                      }
                    }
                    setCollapsed(collapseValue) {
                      __privateGet(this, _navItemViewDriverPromise).then((navItemViewDriver) => {
                        navItemViewDriver.setCollapsed(collapseValue);
                      });
                    }
                    getElement() {
                      return __privateGet(this, _navItemViewDriverPromise).then((navItemViewDriver) => navItemViewDriver.getElement());
                    }
                  };
                  _appId2 = new WeakMap();
                  _driver9 = new WeakMap();
                  _navItemDescriptorPropertyStream = new WeakMap();
                  _navItemViews = new WeakMap();
                  _navItemViewDriver = new WeakMap();
                  _navItemViewDriverPromise = new WeakMap();
                  _NavItemView_instances = new WeakSet();
                  handleViewDriverStreamEvent_fn = function(navItemViewDriver, _ref) {
                    let [navItemDescriptor, event] = _ref;
                    switch (event.eventName) {
                      case "click":
                        if (navItemDescriptor.type === nav_item_types.GROUPER) return;
                        if (typeof navItemDescriptor.onClick === "function") {
                          let defaultPrevented = false;
                          const syntheticEvent = {
                            preventDefault() {
                              defaultPrevented = true;
                            }
                          };
                          navItemDescriptor.onClick(syntheticEvent);
                          if (defaultPrevented) {
                            break;
                          }
                        }
                        if (navItemDescriptor.routeID) {
                          __privateGet(this, _driver9).goto(navItemDescriptor.routeID, navItemDescriptor.routeParams);
                        } else {
                          navItemViewDriver.toggleCollapse();
                        }
                        break;
                      case "expanded":
                      case "collapsed":
                        this.emit(event.eventName);
                        break;
                    }
                  };
                  let NavItemView = _NavItemView;
                  function _handleRouteViewChange(navItemViewDriver, _ref2) {
                    let [navItemDescriptor, routeViewDriver] = _ref2;
                    let isActive = false;
                    if (navItemDescriptor) {
                      const routesToCheck = [{
                        routeID: navItemDescriptor.routeID,
                        routeParams: navItemDescriptor.routeParams
                      }, ...navItemDescriptor.secondaryRoutes || []];
                      isActive = routesToCheck.some((route) => routeViewDriver.getRouteID() === route.routeID && isEqual_default()(routeViewDriver.getParams(), route.routeParams || {}));
                    }
                    navItemViewDriver.setActive(isActive);
                  }
                  ;
                  const native_nav_item_view_memberMap = /* @__PURE__ */ new WeakMap();
                  class NativeNavItemView extends safe_event_emitter.A {
                    constructor(appId, driver, labelName, navItemViewDriverPromise) {
                      super();
                      const members = {
                        appId,
                        driver,
                        labelName,
                        navItemViews: [],
                        navItemViewDriver: null,
                        navItemViewDriverPromise
                      };
                      native_nav_item_view_memberMap.set(this, members);
                      navItemViewDriverPromise.then((navItemViewDriver) => {
                        if (!navItemViewDriver) {
                          return;
                        }
                        members.navItemViewDriver = navItemViewDriver;
                        navItemViewDriver.getEventStream().onValue((event) => _handleStreamEvent(this, event));
                        this.emit("inserted");
                      });
                    }
                    addNavItem(navItemDescriptor) {
                      const members = (0, get_or_fail.A)(native_nav_item_view_memberMap, this);
                      const navItemDescriptorPropertyStream = kefir_cast_default()(kefir_esm, navItemDescriptor).toProperty();
                      const childNavItemView = new NavItemView(members.appId, members.driver, navItemDescriptorPropertyStream, members.navItemViewDriverPromise.then((navItemViewDriver) => {
                        const childNavItemViewDriver = navItemViewDriver.addNavItem(members.appId, navItemDescriptorPropertyStream);
                        return childNavItemViewDriver;
                      }));
                      members.navItemViews.push(childNavItemView);
                      return childNavItemView;
                    }
                    isCollapsed() {
                      return localStorage.getItem("inboxsdk__nativeNavItem__state_" + (0, get_or_fail.A)(native_nav_item_view_memberMap, this).labelName) === "collapsed";
                    }
                    setCollapsed(collapseValue) {
                      const members = (0, get_or_fail.A)(native_nav_item_view_memberMap, this);
                      if (members.navItemViewDriver) {
                        members.navItemViewDriver.setCollapsed(collapseValue);
                      } else {
                        localStorage.setItem("inboxsdk__nativeNavItem__state_" + members.labelName, collapseValue ? "collapsed" : "expanded");
                      }
                    }
                  }
                  function _handleStreamEvent(emitter, event) {
                    switch (event.eventName) {
                      case "expanded":
                      case "collapsed":
                        emitter.emit(event.eventName);
                        break;
                    }
                  }
                  ;
                  const nav_menu_memberMap = /* @__PURE__ */ new WeakMap();
                  class NavMenu {
                    constructor(appId, driver) {
                      __publicField(this, "NavItemTypes", nav_item_types);
                      const members = {
                        appId,
                        driver,
                        navItemViews: []
                      };
                      nav_menu_memberMap.set(this, members);
                      this.SENT_MAIL = _setupSentMail(appId, driver);
                    }
                    addNavItem(navItemDescriptor) {
                      const members = (0, get_or_fail.A)(nav_menu_memberMap, this);
                      const navItemDescriptorPropertyStream = kefir_cast_default()(kefir_esm["default"], navItemDescriptor).toProperty();
                      const navItemView = new NavItemView(members.appId, members.driver, navItemDescriptorPropertyStream, members.driver.addNavItem(members.appId, navItemDescriptorPropertyStream));
                      members.navItemViews.push(navItemView);
                      return navItemView;
                    }
                  }
                  // TODO: this doesn't seem to be used.
                  __publicField(NavMenu, "SENT_MAIL", null);
                  function _setupSentMail(appId, driver) {
                    const nativeNavItemView = new NativeNavItemView(appId, driver, "sent", driver.getSentMailNativeNavItem());
                    return nativeNavItemView;
                  }
                  var classnames = __webpack_require__2(5755);
                  var classnames_default = /* @__PURE__ */ __webpack_require__2.n(classnames);
                  var events = __webpack_require__2(4785);
                  ;
                  const RGB_REGEX = /^rgba?\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*(,\s*(0\.)?\d+)?\)/;
                  function getDensity() {
                    const navItemElement = document.querySelector(".aim");
                    if (!navItemElement) {
                      lib_logger.A.error(new Error("Failed to find a nav item element"));
                      return "default";
                    }
                    const rect = navItemElement.getBoundingClientRect();
                    return rect?.height === 24 ? "compact" : "default";
                  }
                  const navItemSelector = ".aio";
                  function getNavItem() {
                    return document.querySelector(navItemSelector);
                  }
                  async function checkForDarkThemeSafe() {
                    try {
                      await (0, wait_for.A)(() => getNavItem());
                    } catch (e) {
                      if (e instanceof wait_for.D) {
                        return null;
                      }
                      throw e;
                    }
                    return isFrameDarkTheme();
                  }
                  function extractRgbColor(colorString) {
                    const match = RGB_REGEX.exec(colorString);
                    if (!match) {
                      lib_logger.A.error(new Error("Failed to read color string"), {
                        colorString
                      });
                      return;
                    }
                    return {
                      r: +match[1],
                      g: +match[2],
                      b: +match[3]
                    };
                  }
                  function isFrameDarkTheme() {
                    const navItem = getNavItem();
                    if (!navItem) {
                      lib_logger.A.error(new Error("Failed to find nav item"));
                      return false;
                    }
                    const colorString = getComputedStyle(navItem).getPropertyValue("color");
                    const {
                      r
                    } = extractRgbColor(colorString) ?? {};
                    if (r === void 0) {
                      return false;
                    }
                    return r > 128;
                  }
                  function isBodyDarkTheme() {
                    const bodyEl = document.querySelector(".bkK > .nH");
                    if (!bodyEl) {
                      return false;
                    }
                    const bgColor = getComputedStyle(bodyEl).backgroundColor;
                    const {
                      r
                    } = extractRgbColor(bgColor) ?? {};
                    if (r != null) {
                      return r < 128;
                    }
                    return false;
                  }
                  const stylesStream = kefir_bus_default()();
                  async function trackGmailStyles() {
                    if (document.head.hasAttribute("data-inboxsdk-gmail-style-tracker") || gmail_element_getter.A.isStandalone()) {
                      return;
                    }
                    document.head.setAttribute("data-inboxsdk-gmail-style-tracker", "true");
                    let currentDensity = null;
                    let currentDarkTheme = null;
                    function checkStyles() {
                      const newDensity = getDensity();
                      if (currentDensity !== newDensity) {
                        if (currentDensity) {
                          document.body.classList.remove("inboxsdk__gmail_density_" + currentDensity);
                        }
                        currentDensity = newDensity;
                        document.body.classList.add("inboxsdk__gmail_density_" + currentDensity);
                      }
                      const newDarkTheme = isFrameDarkTheme();
                      if (currentDarkTheme !== newDarkTheme) {
                        currentDarkTheme = newDarkTheme;
                        if (currentDarkTheme) {
                          document.body.classList.add("inboxsdk__gmail_dark_theme");
                        } else {
                          document.body.classList.remove("inboxsdk__gmail_dark_theme");
                        }
                      }
                      const newBodyDarkTheme = isBodyDarkTheme();
                      if (newBodyDarkTheme) {
                        document.body.classList.add("inboxsdk__gmail_dark_body_theme");
                      } else {
                        document.body.classList.remove("inboxsdk__gmail_dark_body_theme");
                      }
                      stylesStream.emit({
                        type: "theme",
                        isDarkMode: {
                          frame: currentDarkTheme,
                          body: newBodyDarkTheme
                        }
                      });
                    }
                    try {
                      await (0, wait_for.A)(() => document.querySelector(".TO .TN") && document.querySelector(navItemSelector));
                    } catch (err) {
                      lib_logger.A.error(err);
                      return;
                    }
                    const observer2 = new MutationObserver(checkStyles);
                    const options2 = {
                      characterData: true,
                      childList: true
                    };
                    for (const sheet of document.styleSheets) {
                      if (!(sheet.ownerNode instanceof Element)) {
                        continue;
                      }
                      if (sheet.ownerNode.tagName == "STYLE") {
                        observer2.observe(sheet.ownerNode, options2);
                      }
                    }
                    checkStyles();
                  }
                  var fast_deep_equal = __webpack_require__2(5215);
                  var fast_deep_equal_default = /* @__PURE__ */ __webpack_require__2.n(fast_deep_equal);
                  ;
                  const NATIVE_CLASS = "Xa";
                  const INBOXSDK_CLASS = "inboxsdk__appMenuItem";
                  const ELEMENT_CLASS = `${NATIVE_CLASS} ${INBOXSDK_CLASS}`;
                  const ICON_ELEMENT_CLASS = "V6 CL";
                  const HEADING_ELEMENT_CLASS = "apW";
                  const ICON_ELEMENT_SELECTOR = ".V6.CL";
                  const HEADING_ELEMENT_SELECTOR = ".apW";
                  const _GmailAppMenuItemView = class _GmailAppMenuItemView extends events.EventEmitter {
                    constructor(driver, menuItemDescriptor) {
                      super();
                      __privateAdd(this, _GmailAppMenuItemView_instances);
                      __privateAdd(this, _menuItemDescriptor);
                      __privateAdd(this, _element4);
                      __privateAdd(this, _destroyed2, false);
                      __privateAdd(this, _driver10);
                      __privateAdd(this, _onBlur, (e) => {
                        this.emit("blur", e);
                      });
                      __privateAdd(this, _onHover, (e) => {
                        this.emit("hover", e);
                        __privateGet(this, _menuItemDescriptor)?.onHover?.(e);
                      });
                      __privateSet(this, _element4, __privateMethod(this, _GmailAppMenuItemView_instances, setupElement_fn2).call(this));
                      __privateSet(this, _driver10, driver);
                      __privateSet(this, _menuItemDescriptor, menuItemDescriptor);
                      __privateMethod(this, _GmailAppMenuItemView_instances, update_fn).call(this);
                      stylesStream.skipDuplicates((a, b) => fast_deep_equal_default()(a, b)).onValue((_ref) => {
                        let {
                          type
                        } = _ref;
                        if (type === "theme") {
                          __privateMethod(this, _GmailAppMenuItemView_instances, update_fn).call(this);
                        }
                      });
                      driver.getStopper().onValue(() => this.remove());
                      __privateGet(this, _element4).addEventListener("click", (e) => __privateMethod(this, _GmailAppMenuItemView_instances, onClick_fn).call(this, e));
                      __privateGet(this, _element4).addEventListener("mouseleave", __privateGet(this, _onBlur));
                      (0, querySelectorOrFail.A)(__privateGet(this, _element4), ICON_ELEMENT_SELECTOR).addEventListener("mouseenter", __privateGet(this, _onHover));
                    }
                    get element() {
                      return __privateGet(this, _element4);
                    }
                    set menuItemDescriptor(newMenuItemDescriptor) {
                      __privateSet(this, _menuItemDescriptor, newMenuItemDescriptor);
                      __privateMethod(this, _GmailAppMenuItemView_instances, update_fn).call(this);
                    }
                    get menuItemDescriptor() {
                      return __privateGet(this, _menuItemDescriptor);
                    }
                    remove() {
                      if (__privateGet(this, _destroyed2)) return;
                      __privateSet(this, _destroyed2, true);
                      this.element?.remove();
                      this.emit("destroy");
                    }
                  };
                  _menuItemDescriptor = new WeakMap();
                  _element4 = new WeakMap();
                  _destroyed2 = new WeakMap();
                  _driver10 = new WeakMap();
                  _GmailAppMenuItemView_instances = new WeakSet();
                  setupElement_fn2 = function() {
                    const element = document.createElement("div");
                    element.className = ELEMENT_CLASS;
                    element.innerHTML = `
      <div class="${ICON_ELEMENT_CLASS}" aria-label="" role="link" tabindex="-1"></div>
      <div class="${HEADING_ELEMENT_CLASS}" role="heading" aria-level="2"></div>
    `.trim();
                    return element;
                  };
                  update_fn = function() {
                    const element = this.element;
                    if (!element) return;
                    const existingClassNames = Object.values(_GmailAppMenuItemView.elementCss).filter((className) => element.classList.contains(className));
                    element.className = classnames_default()(ELEMENT_CLASS, __privateGet(this, _menuItemDescriptor)?.className, ...existingClassNames);
                    __privateMethod(this, _GmailAppMenuItemView_instances, updateName_fn).call(this, element);
                    __privateMethod(this, _GmailAppMenuItemView_instances, updateIcon_fn).call(this, element);
                    __privateMethod(this, _GmailAppMenuItemView_instances, updateARIA_fn).call(this, element);
                  };
                  updateName_fn = function(element) {
                    const headingElement = (0, querySelectorOrFail.A)(element, HEADING_ELEMENT_SELECTOR);
                    headingElement.textContent = __privateGet(this, _menuItemDescriptor)?.name ?? "";
                  };
                  _preloadedIcons = new WeakMap();
                  updateIcon_fn = function(element) {
                    const iconContainerEl = (0, querySelectorOrFail.A)(element, ICON_ELEMENT_SELECTOR);
                    const {
                      iconUrl,
                      iconClassName
                    } = __privateGet(this, _menuItemDescriptor) ?? {};
                    if (iconUrl) {
                      const rawTheme = gmail_element_getter.A.isDarkTheme() ? iconUrl.darkTheme : iconUrl.lightTheme;
                      if (!rawTheme) return;
                      const theme = typeof rawTheme === "string" ? rawTheme : rawTheme.default;
                      const activeImg = typeof rawTheme === "string" ? rawTheme : rawTheme.active;
                      for (const url of [theme, activeImg]) {
                        if (__privateGet(_GmailAppMenuItemView, _preloadedIcons).has(url)) continue;
                        __privateGet(_GmailAppMenuItemView, _preloadedIcons).add(url);
                        var link = document.createElement("link");
                        link.rel = "preload";
                        link.as = "image";
                        link.href = url;
                        document.head.appendChild(link);
                      }
                      iconContainerEl.style.setProperty("--background-image", `url(${theme})`);
                      iconContainerEl.style.setProperty("--background-image--active", `url(${activeImg})`);
                    }
                    iconContainerEl.className = classnames_default()(ICON_ELEMENT_CLASS, iconClassName);
                  };
                  updateARIA_fn = function(element) {
                    const iconContainerEl = (0, querySelectorOrFail.A)(element, ICON_ELEMENT_SELECTOR);
                    iconContainerEl.setAttribute("aria-label", __privateGet(this, _menuItemDescriptor)?.name ?? "");
                  };
                  onClick_fn = function(e) {
                    this.emit("click", e);
                    __privateGet(this, _menuItemDescriptor)?.onClick?.(e);
                    if (__privateGet(this, _menuItemDescriptor)?.routeID) {
                      __privateGet(this, _driver10).goto(__privateGet(this, _menuItemDescriptor).routeID, __privateGet(this, _menuItemDescriptor).routeParams);
                    }
                  };
                  _onBlur = new WeakMap();
                  _onHover = new WeakMap();
                  __publicField(_GmailAppMenuItemView, "elementCss", {
                    HOVER: "aIk",
                    ACTIVE: "apV",
                    SDK_ACTIVE: "inboxsdk__appMenuItem_active"
                  });
                  __privateAdd(_GmailAppMenuItemView, _preloadedIcons, /* @__PURE__ */ new Set());
                  let GmailAppMenuItemView = _GmailAppMenuItemView;
                  ;
                  const collapsible_panel_view_NATIVE_CLASS = "aqn";
                  const collapsible_panel_view_INBOXSDK_CLASS = "inboxsdk__collapsiblePanel";
                  const collapsible_panel_view_ELEMENT_CLASS = `${collapsible_panel_view_NATIVE_CLASS} ${collapsible_panel_view_INBOXSDK_CLASS} oy8Mbf`;
                  const PANEL_NAV_ITEMS_CONTAINER_CLASS = "inboxsdk__collapsiblePanel_navItems";
                  const PRIMARY_BUTTON_ELEMENT_CLASS = "T-I T-I-KE L3";
                  const PRIMARY_BUTTON_ELEMENT_SELECTOR = ".T-I.T-I-KE.L3";
                  const scrollablePanelClass = "at9";
                  const scrollablePanelSelector = `.${scrollablePanelClass}`;
                  const loadingElementClass = "inboxsdk__collapsiblePanel_loading_container";
                  const panelLoadingClass = `${loadingElementClass}--active`;
                  const loadingElementSelector = `.${loadingElementClass}`;
                  const panelNavItemsContainerSelector = `.${PANEL_NAV_ITEMS_CONTAINER_CLASS}`;
                  const _CollapsiblePanelView = class _CollapsiblePanelView extends safe_event_emitter.A {
                    constructor(driver, panelDescriptor) {
                      super();
                      __privateAdd(this, _CollapsiblePanelView_instances);
                      __privateAdd(this, _panelDescriptor);
                      __privateAdd(this, _element5);
                      __privateAdd(this, _destroyed3, false);
                      __privateAdd(this, _id, Math.random().toFixed(3));
                      __privateAdd(this, _driver11);
                      __privateAdd(this, _loading);
                      __privateAdd(this, _orderGroup, `collapsible-panel-${__privateGet(this, _id)}-nav-item`);
                      __privateAdd(this, _onPrimaryButtonClick, (e) => {
                        this.panelDescriptor.primaryButton?.onClick?.(e);
                      });
                      __privateSet(this, _driver11, driver);
                      __privateSet(this, _panelDescriptor, panelDescriptor);
                      __privateSet(this, _loading, panelDescriptor.loadingIcon != null);
                      __privateSet(this, _element5, __privateMethod(this, _CollapsiblePanelView_instances, setupElement_fn3).call(this));
                      __privateGet(this, _element5).addEventListener("mouseleave", (e) => {
                        this.emit("blur", e);
                      });
                      stylesStream.skipDuplicates((a, b) => fast_deep_equal_default()(a, b)).onValue((_ref) => {
                        let {
                          type
                        } = _ref;
                        if (type === "theme") {
                          __privateMethod(this, _CollapsiblePanelView_instances, update_fn2).call(this);
                        }
                      });
                    }
                    get loading() {
                      return __privateGet(this, _loading);
                    }
                    /**
                     * Updates the loading property of the CollapsiblePanelView.
                     */
                    setLoading(loading) {
                      const changed = __privateGet(this, _loading) !== loading;
                      __privateSet(this, _loading, loading);
                      if (changed) {
                        __privateMethod(this, _CollapsiblePanelView_instances, update_fn2).call(this);
                      }
                    }
                    get panelDescriptor() {
                      return __privateGet(this, _panelDescriptor);
                    }
                    set panelDescriptor(panelDescriptor) {
                      __privateSet(this, _panelDescriptor, panelDescriptor);
                      __privateMethod(this, _CollapsiblePanelView_instances, update_fn2).call(this);
                    }
                    get element() {
                      return __privateGet(this, _element5);
                    }
                    get scrollablePaneElement() {
                      return this.element.querySelector(scrollablePanelSelector);
                    }
                    /**
                     * Remove this CollapsiblePanelView from its parent
                     */
                    remove() {
                      if (__privateGet(this, _destroyed3)) return;
                      __privateSet(this, _destroyed3, true);
                      this.element.remove();
                      this.emit("destroy");
                    }
                    /**
                     * @param navItemDescriptor Add a single or Kefir.Observable nav menu item to the CollapsiblePanel.
                     */
                    addNavItem(navItemDescriptor) {
                      this.setLoading(false);
                      const {
                        element
                      } = this;
                      const orderGroup = __privateGet(this, _orderGroup);
                      const navItemDescriptorPropertyStream = kefir_cast_default()(kefir_esm, navItemDescriptor).toProperty();
                      const gmailNavItemView = __privateGet(this, _driver11).addNavItemToPanel(orderGroup, navItemDescriptorPropertyStream, element);
                      const navItemView = new NavItemView(orderGroup, __privateGet(this, _driver11), navItemDescriptorPropertyStream, gmailNavItemView);
                      return navItemView;
                    }
                  };
                  _panelDescriptor = new WeakMap();
                  _element5 = new WeakMap();
                  _destroyed3 = new WeakMap();
                  _id = new WeakMap();
                  _driver11 = new WeakMap();
                  _loading = new WeakMap();
                  _orderGroup = new WeakMap();
                  _CollapsiblePanelView_instances = new WeakSet();
                  extractPrimaryButtonTheme_fn = function() {
                    const {
                      iconUrl
                    } = this.panelDescriptor.primaryButton ?? {};
                    if (!iconUrl) {
                      return;
                    }
                    const theme = gmail_element_getter.A.isDarkTheme() ? iconUrl.darkTheme : iconUrl.lightTheme;
                    if (!theme) {
                      return;
                    }
                    if (typeof theme === "string") {
                      return {
                        panelHovered: theme,
                        panelDefault: theme
                      };
                    } else {
                      return {
                        panelDefault: theme.panelDefault,
                        panelHovered: theme.panelHovered
                      };
                    }
                  };
                  setupElement_fn3 = function() {
                    const {
                      panelDescriptor
                    } = this;
                    const {
                      loadingIcon
                    } = panelDescriptor;
                    const {
                      className,
                      name = ""
                    } = panelDescriptor?.primaryButton ?? {};
                    const element = document.createElement("div");
                    element.className = classnames_default()(collapsible_panel_view_ELEMENT_CLASS, this.panelDescriptor.className);
                    const primaryButtonClass = classnames_default()(PRIMARY_BUTTON_ELEMENT_CLASS, className);
                    const loadingElClass = classnames_default()(loadingElementClass, {
                      [panelLoadingClass]: __privateGet(this, _loading)
                    });
                    const {
                      panelDefault: defaultIconUrl,
                      panelHovered: hoverPanelIconUrl
                    } = __privateMethod(this, _CollapsiblePanelView_instances, extractPrimaryButtonTheme_fn).call(this) ?? {};
                    element.innerHTML = auto_html_js_default()`
      <div class="aBO">
        <div class="aic">
          <div class="z0">
            <div class="${primaryButtonClass}" style="user-select: none" role="button" tabindex="0">
              ${name}
            </div>
          </div>
        </div>
        <div class="${scrollablePanelClass}">
          <div class="${loadingElClass}">${loadingIcon ? {
                      __html: loadingIcon
                    } : ""}</div>
          <div class="Ls77Lb aZ6">
            <div class="pp" style="user-select: none;">
              <div>
                <div class="${`nM ${PANEL_NAV_ITEMS_CONTAINER_CLASS}`}">
                  <div class="aic"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="aTV"></div>
    `.trim();
                    const primaryBtnEl = (0, querySelectorOrFail.A)(element, PRIMARY_BUTTON_ELEMENT_SELECTOR);
                    primaryBtnEl.style.setProperty("--background-image", defaultIconUrl ? `url(${defaultIconUrl})` : "unset");
                    primaryBtnEl.style.setProperty("--background-image--hover", hoverPanelIconUrl ? `url(${hoverPanelIconUrl})` : "unset");
                    primaryBtnEl.addEventListener("click", __privateGet(this, _onPrimaryButtonClick));
                    return element;
                  };
                  _onPrimaryButtonClick = new WeakMap();
                  update_fn2 = function() {
                    const element = this.element;
                    if (!element) return;
                    const existingClassNames = Object.values(_CollapsiblePanelView.elementCss).filter((className) => element.classList.contains(className));
                    element.className = classnames_default()(collapsible_panel_view_ELEMENT_CLASS, this.panelDescriptor.className, ...existingClassNames);
                    __privateMethod(this, _CollapsiblePanelView_instances, updateName_fn2).call(this, element);
                    __privateMethod(this, _CollapsiblePanelView_instances, updateIcon_fn2).call(this, element);
                    __privateMethod(this, _CollapsiblePanelView_instances, updateScrollablePanelLoading_fn).call(this, element);
                  };
                  _preloadedIcons2 = new WeakMap();
                  updateIcon_fn2 = function(element) {
                    const iconContainerEl = (0, querySelectorOrFail.A)(element, PRIMARY_BUTTON_ELEMENT_SELECTOR);
                    const {
                      panelDefault,
                      panelHovered
                    } = __privateMethod(this, _CollapsiblePanelView_instances, extractPrimaryButtonTheme_fn).call(this) ?? {};
                    for (const url of [panelHovered, panelDefault]) {
                      if (!url || __privateGet(_CollapsiblePanelView, _preloadedIcons2).has(url)) {
                        continue;
                      }
                      __privateGet(_CollapsiblePanelView, _preloadedIcons2).add(url);
                      var link = document.createElement("link");
                      link.rel = "preload";
                      link.as = "image";
                      link.href = url;
                      document.head.appendChild(link);
                    }
                    for (const [key, value] of Object.entries({
                      "--background-image--hover": panelHovered,
                      "--background-image": panelDefault
                    })) {
                      if (value) {
                        iconContainerEl.style.setProperty(key, `url(${value})`);
                      } else {
                        iconContainerEl.style.removeProperty(key);
                      }
                    }
                    const {
                      className
                    } = this.panelDescriptor.primaryButton ?? {};
                    iconContainerEl.className = classnames_default()(PRIMARY_BUTTON_ELEMENT_CLASS, className);
                  };
                  updateName_fn2 = function(element) {
                    const buttonTextEl = element.querySelector(PRIMARY_BUTTON_ELEMENT_SELECTOR);
                    if (!buttonTextEl) {
                      return;
                    }
                    buttonTextEl.textContent = this.panelDescriptor.primaryButton?.name ?? "";
                  };
                  updateScrollablePanelLoading_fn = function(element) {
                    const scrollablePanelLoadingEl = element.querySelector(loadingElementSelector);
                    if (!scrollablePanelLoadingEl) {
                      return;
                    }
                    if (this.loading) {
                      scrollablePanelLoadingEl.classList.add(panelLoadingClass);
                    } else {
                      scrollablePanelLoadingEl.classList.remove(panelLoadingClass);
                    }
                  };
                  __publicField(_CollapsiblePanelView, "elementSelectors", {
                    /** Custom elements match this selector as well. */
                    NATIVE: ".aqn.oy8Mbf",
                    CUSTOM: ".inboxsdk__collapsiblePanel"
                  });
                  __publicField(_CollapsiblePanelView, "elementCss", {
                    ACTIVE: "apV",
                    COLLAPSED: "aBA",
                    /** A hover popover has both ACTIVE _and_ HOVER */
                    HOVER: "aJu",
                    COLLAPSED_HOVER: "bym",
                    PANEL_LESS: "a3W",
                    TOGGLE_OPEN_STATE: "aak",
                    SDK_ACTIVE: "inboxsdk__collapsiblePanel_active"
                  });
                  __privateAdd(_CollapsiblePanelView, _preloadedIcons2, /* @__PURE__ */ new Set());
                  let CollapsiblePanelView = _CollapsiblePanelView;
                  ;
                  async function addCollapsiblePanel(driver, panelDescriptor, insertIndex) {
                    const injectionContainer = await waitForAppMenuParentReady();
                    const collapsiblePanelView = new CollapsiblePanelView(driver, panelDescriptor);
                    if (!injectionContainer || !collapsiblePanelView.element) return;
                    const appMenu = await gmail_element_getter.A.getAppMenuAsync();
                    if (!appMenu) return;
                    const panelNodes = injectionContainer.querySelectorAll(CollapsiblePanelView.elementSelectors.NATIVE) ?? [];
                    const siblingElement = Number.isInteger(insertIndex) ? panelNodes[insertIndex] ?? null : null;
                    if (siblingElement) {
                      siblingElement.insertAdjacentElement("beforebegin", collapsiblePanelView.element);
                    } else {
                      [...panelNodes].at(-1)?.insertAdjacentElement("afterend", collapsiblePanelView.element);
                    }
                    return collapsiblePanelView;
                  }
                  const waitForAppMenuParentReady = once_default()(async () => {
                    if (!gmail_element_getter.A.isStandalone()) {
                      try {
                        const menuParentElement = await (0, wait_for.A)(() => gmail_element_getter.A.getAppMenuContainer());
                        return menuParentElement;
                      } catch (e) {
                        lib_logger.A.error(e);
                      }
                    }
                  });
                  ;
                  var NativeAppMenuClassName = /* @__PURE__ */ (function(NativeAppMenuClassName2) {
                    NativeAppMenuClassName2["MAIL"] = "XJ";
                    NativeAppMenuClassName2["CHAT"] = "ao4";
                    NativeAppMenuClassName2["SPACES"] = "aIt";
                    NativeAppMenuClassName2["MEET"] = "adZ";
                    return NativeAppMenuClassName2;
                  })(NativeAppMenuClassName || {});
                  const nativeButtonToPanelMap = /* @__PURE__ */ new Map([
                    [NativeAppMenuClassName.MAIL, "aIH"],
                    // Mail
                    [NativeAppMenuClassName.CHAT, "arL"],
                    // Chat
                    [NativeAppMenuClassName.SPACES, "arM"],
                    // Spaces
                    [NativeAppMenuClassName.MEET, void 0]
                    // Meet
                  ]);
                  const MAIL_ROUTES = ["inbox/:page"];
                  const CHAT_ROUTES = ["chat/welcome", "chat/dm/:chatID"];
                  const SPACES_ROUTES = ["rooms/welcome", "chat/space/:spaceID"];
                  const MEET_ROUTES = ["calls"];
                  const routeIDtoMenuItemClass = Object.fromEntries([...MAIL_ROUTES.map((route) => [route, NativeAppMenuClassName.MAIL]), ...CHAT_ROUTES.map((route) => [route, NativeAppMenuClassName.CHAT]), ...SPACES_ROUTES.map((route) => [route, NativeAppMenuClassName.SPACES]), ...MEET_ROUTES.map((route) => [route, NativeAppMenuClassName.MEET])]);
                  const _AppMenuItemView = class _AppMenuItemView extends safe_event_emitter.A {
                    constructor(driver, menuItemDescriptor) {
                      var _a;
                      super();
                      __privateAdd(this, _driver12);
                      __privateAdd(this, _destroyed4, false);
                      __privateAdd(this, _gmailViewPromise);
                      __privateAdd(this, _collapsiblePanel);
                      __privateAdd(this, _menuItemDescriptor2);
                      __privateSet(this, _driver12, driver);
                      __privateSet(this, _menuItemDescriptor2, menuItemDescriptor);
                      const gmailAppMenuItemView = __privateGet(this, _driver12).addAppMenuItem(menuItemDescriptor);
                      __privateSet(this, _gmailViewPromise, gmailAppMenuItemView);
                      gmailAppMenuItemView.then((gmailView) => {
                        var _a2;
                        if (__privateGet(this, _destroyed4) || !gmailView) {
                          return;
                        }
                        const gmailElement = gmailView.element;
                        if (gmailElement) {
                          __privateGet(_AppMenuItemView, _menuItemToPanelMap).set(gmailElement, void 0);
                          __privateMethod(_a2 = _AppMenuItemView, _AppMenuItemView_static, adjustTooltipNub_fn).call(_a2);
                        }
                        gmailView.on("destroy", () => {
                          this.remove();
                        });
                        gmailView.on("click", () => {
                          __privateGet(_AppMenuItemView, _menuItemChangeBus).emit(["click", gmailElement]);
                          this.emit("click");
                        });
                        gmailView.on("hover", (e) => {
                          __privateGet(_AppMenuItemView, _menuItemChangeBus).emit(["mouseenter", gmailElement, e]);
                          this.emit("hover");
                        });
                        gmailView.on("blur", (e) => {
                          __privateGet(_AppMenuItemView, _menuItemChangeBus).emit(["mouseleave", gmailElement, e]);
                          this.emit("blur");
                        });
                      });
                      __privateMethod(_a = _AppMenuItemView, _AppMenuItemView_static, setUpRouteViewDriverStream_fn).call(_a, driver);
                      __privateGet(_AppMenuItemView, _menuItemAddedDeferred).resolve(void 0);
                      __privateGet(_AppMenuItemView, _appMenuItemViews).add(this);
                    }
                    static getAllPanels() {
                      const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                      const nativePanels = appMenuElement?.querySelectorAll(`.${collapsible_panel_view_NATIVE_CLASS}`);
                      return Array.from(nativePanels ?? []);
                    }
                    static getActivePanel() {
                      let useSdkActiveSelector = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
                      const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                      const {
                        ACTIVE,
                        SDK_ACTIVE
                      } = CollapsiblePanelView.elementCss;
                      const nativePanel = appMenuElement?.querySelector(useSdkActiveSelector ? `.${collapsible_panel_view_NATIVE_CLASS}.${ACTIVE}.${SDK_ACTIVE}` : `.${collapsible_panel_view_NATIVE_CLASS}.${ACTIVE}`);
                      return nativePanel;
                    }
                    static deactivatePanel(panel) {
                      const {
                        ACTIVE,
                        HOVER,
                        SDK_ACTIVE
                      } = CollapsiblePanelView.elementCss;
                      panel.style.removeProperty("height");
                      if (panel.classList.contains(HOVER)) {
                        panel.classList.remove(HOVER);
                      }
                      if (panel.classList.contains(ACTIVE)) {
                        panel.classList.remove(ACTIVE);
                      }
                      if (panel.classList.contains(SDK_ACTIVE)) {
                        panel.classList.remove(SDK_ACTIVE);
                      }
                    }
                    static isMenuItem(element) {
                      return element.classList.contains(NATIVE_CLASS);
                    }
                    static getAllMenuItems() {
                      const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                      return Array.from(appMenuElement?.querySelectorAll(`.${NATIVE_CLASS}`) ?? []);
                    }
                    static getActiveMenuItem() {
                      const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                      const {
                        ACTIVE,
                        SDK_ACTIVE
                      } = GmailAppMenuItemView.elementCss;
                      const button = appMenuElement?.querySelector(`.${NATIVE_CLASS}.${ACTIVE}.${SDK_ACTIVE}`);
                      return button;
                    }
                    static deactivateMenuItem(menuItem) {
                      const {
                        ACTIVE,
                        HOVER,
                        SDK_ACTIVE
                      } = GmailAppMenuItemView.elementCss;
                      if (menuItem.classList.contains(HOVER)) {
                        menuItem.classList.remove(HOVER);
                      }
                      if (menuItem.classList.contains(ACTIVE)) {
                        menuItem.classList.remove(ACTIVE);
                      }
                      if (menuItem.classList.contains(SDK_ACTIVE)) {
                        menuItem.classList.remove(SDK_ACTIVE);
                      }
                    }
                    get menuItemDescriptor() {
                      return __privateGet(this, _menuItemDescriptor2);
                    }
                    /**
                     * Add a panel to an AppMenuItemView.
                     *
                     * @param panelDescriptor A single descriptor for the app menu item panel.
                     *
                     * @returns A promise that resolves to the CollapsiblePanelView instance. The result is undefined if the SDK doesn't detect the AppMenu being shown.
                     */
                    async addCollapsiblePanel(panelDescriptor) {
                      var _a;
                      const descriptor = {
                        ...panelDescriptor,
                        className: classnames_default()(panelDescriptor.className, {
                          [CollapsiblePanelView.elementCss.COLLAPSED]: !gmail_element_getter.A.isAppBurgerMenuOpen(),
                          [CollapsiblePanelView.elementCss.PANEL_LESS]: __privateMethod(_a = _AppMenuItemView, _AppMenuItemView_static, isPanelLess_fn).call(_a)
                        })
                      };
                      const collapsiblePanel = await addCollapsiblePanel(__privateGet(this, _driver12), descriptor, this.menuItemDescriptor.insertIndex);
                      if (collapsiblePanel) {
                        __privateGet(this, _gmailViewPromise).then((gmailView) => {
                          var _a2;
                          const gmailElement = gmailView.element;
                          if (gmailElement) {
                            collapsiblePanel.on("blur", (e) => {
                              __privateGet(_AppMenuItemView, _menuItemChangeBus).value(["mouseleave", gmailElement, e]);
                            });
                            __privateGet(_AppMenuItemView, _menuItemToPanelMap).set(gmailElement, collapsiblePanel.element);
                            __privateMethod(_a2 = _AppMenuItemView, _AppMenuItemView_static, adjustTooltipNub_fn).call(_a2);
                          }
                        });
                      }
                      __privateSet(this, _collapsiblePanel, collapsiblePanel);
                      return collapsiblePanel;
                    }
                    /**
                     * Updates the AppMenuItem's AppMenuItemDescriptor
                     *
                     * @param menuItemDescriptor The new descriptor for the app menu item panel.
                     */
                    async update(menuItemDescriptor) {
                      const gmailView = await __privateGet(this, _gmailViewPromise);
                      gmailView.menuItemDescriptor = menuItemDescriptor;
                      __privateSet(this, _menuItemDescriptor2, menuItemDescriptor);
                    }
                    /**
                     * Remove this AppMenuItemView from its parent
                     */
                    remove() {
                      if (__privateGet(this, _destroyed4)) return;
                      __privateSet(this, _destroyed4, true);
                      this.emit("destroy");
                      __privateGet(this, _collapsiblePanel)?.remove();
                      __privateGet(this, _gmailViewPromise).then((gmailView) => {
                        var _a;
                        gmailView.element && __privateGet(_AppMenuItemView, _menuItemToPanelMap).delete(gmailView.element);
                        gmailView.remove();
                        __privateMethod(_a = _AppMenuItemView, _AppMenuItemView_static, adjustTooltipNub_fn).call(_a);
                      });
                      __privateGet(_AppMenuItemView, _appMenuItemViews).delete(this);
                    }
                  };
                  _menuItemChangeStream = new WeakMap();
                  _menuItemChangeBus = new WeakMap();
                  _menuItemAddedDeferred = new WeakMap();
                  _routeViewDriverStream = new WeakMap();
                  _menuItemToPanelMap = new WeakMap();
                  _appMenuItemViews = new WeakMap();
                  _AppMenuItemView_static = new WeakSet();
                  isPanelLess_fn = function() {
                    const activePanel = _AppMenuItemView.getActivePanel(false);
                    return !activePanel;
                  };
                  adjustTooltipNub_fn = function() {
                    const appMenuElement = gmail_element_getter.A.getAppMenu();
                    for (const menuItem of appMenuElement?.querySelectorAll(`.${NATIVE_CLASS}`) ?? []) {
                      const panel = __privateGet(_AppMenuItemView, _menuItemToPanelMap).get(menuItem);
                      if (!panel) continue;
                      const nubElement = panel?.querySelector("* > .aTV");
                      const iconElement = menuItem?.querySelector(".V6");
                      const iconElementBox = iconElement?.getBoundingClientRect();
                      const offsetTop = (iconElement?.offsetTop ?? 0) + (iconElementBox?.height ?? 0) * 0.5;
                      const nubSide = 17;
                      const nubDiagonal = nubSide * Math.sqrt(2);
                      const offsetNub = nubDiagonal / 4;
                      const offset = offsetTop - offsetNub;
                      if (nubElement && offset) {
                        nubElement.style.top = `${offset}px`;
                      }
                    }
                  };
                  isPanelDropdownShown_fn = function() {
                    const sdkDropdown = document.querySelector(".inboxsdk__menu");
                    if (sdkDropdown) {
                      return true;
                    }
                    const mailDropdown = document.querySelector(".JM");
                    if (mailDropdown && mailDropdown.style.display !== "none") {
                      return true;
                    }
                    const chatAndSpacesDropdown = document.querySelector(".tP");
                    if (chatAndSpacesDropdown && chatAndSpacesDropdown.style.display !== "none") {
                      return true;
                    }
                    return false;
                  };
                  setUpRouteViewDriverStream_fn = function(driver) {
                    if (__privateGet(_AppMenuItemView, _routeViewDriverStream)) return;
                    __privateSet(_AppMenuItemView, _routeViewDriverStream, driver.getRouteViewDriverStream());
                    __privateGet(_AppMenuItemView, _routeViewDriverStream).onValue(async (routeView) => {
                      const routeViewID = routeView.getRouteID();
                      const routeType = routeView.getRouteType();
                      const descriptors = Array.from(__privateGet(_AppMenuItemView, _appMenuItemViews), async (appMenuItemView) => {
                        const gmailView2 = await __privateGet(appMenuItemView, _gmailViewPromise);
                        return [gmailView2.menuItemDescriptor, gmailView2];
                      });
                      const results = await Promise.all(descriptors);
                      const [, gmailView] = results.find((_ref) => {
                        let [descriptor] = _ref;
                        return descriptor?.isRouteActive(routeView);
                      }) ?? [];
                      if (gmailView?.element) {
                        __privateGet(_AppMenuItemView, _menuItemChangeBus).emit(["route-activated", gmailView.element]);
                        return;
                      }
                      let menuItemClass = "";
                      if (routeViewID) {
                        menuItemClass = routeIDtoMenuItemClass[routeViewID];
                      }
                      if ((!routeViewID || !menuItemClass) && routeType !== "CUSTOM") {
                        menuItemClass = NativeAppMenuClassName.MAIL;
                      }
                      const menuItemElement = menuItemClass && document.querySelector(`.${menuItemClass}`);
                      if (menuItemElement) {
                        __privateGet(_AppMenuItemView, _menuItemChangeBus).emit(["route-activated", menuItemElement]);
                      }
                    });
                  };
                  __ = new WeakMap();
                  __2 = new WeakMap();
                  __3 = new WeakMap();
                  _driver12 = new WeakMap();
                  _destroyed4 = new WeakMap();
                  _gmailViewPromise = new WeakMap();
                  _collapsiblePanel = new WeakMap();
                  _menuItemDescriptor2 = new WeakMap();
                  __privateAdd(_AppMenuItemView, _AppMenuItemView_static);
                  __privateAdd(_AppMenuItemView, _menuItemChangeStream, kefir_esm["default"].pool());
                  __privateAdd(_AppMenuItemView, _menuItemChangeBus, kefir_bus_default()());
                  __privateAdd(_AppMenuItemView, _menuItemAddedDeferred, defer());
                  __privateAdd(_AppMenuItemView, _routeViewDriverStream);
                  __privateAdd(_AppMenuItemView, _menuItemToPanelMap, /* @__PURE__ */ new Map());
                  __privateAdd(_AppMenuItemView, _appMenuItemViews, /* @__PURE__ */ new Set());
                  __privateAdd(_AppMenuItemView, __, (async function init2() {
                    const gmailAppMenu = await gmail_element_getter.A.getAppMenuAsync();
                    if (!gmailAppMenu) {
                      return;
                    }
                    __privateGet(_AppMenuItemView, _menuItemChangeStream).plug(__privateGet(_AppMenuItemView, _menuItemChangeBus));
                    for (const [menuItemClass, panelClass] of nativeButtonToPanelMap) {
                      const menuItemElement = document.querySelector(`.${NATIVE_CLASS}.${menuItemClass}`);
                      const panelElement = panelClass ? document.querySelector(`.${collapsible_panel_view_NATIVE_CLASS}.${panelClass}`) : null;
                      if (menuItemElement) {
                        __privateGet(_AppMenuItemView, _menuItemToPanelMap).set(menuItemElement, panelElement ?? void 0);
                      }
                    }
                  })());
                  __privateAdd(_AppMenuItemView, __2, __privateGet(_AppMenuItemView, _menuItemAddedDeferred).promise.then(() => {
                    const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                    for (const nativeMenuItem of appMenuElement?.querySelectorAll(`.${NATIVE_CLASS}:not(.${INBOXSDK_CLASS})`) ?? []) {
                      const buttonElement = nativeMenuItem.querySelector(".V6.CL");
                      buttonElement?.addEventListener("mouseenter", (e) => {
                        e.stopImmediatePropagation();
                        __privateGet(_AppMenuItemView, _menuItemChangeBus).emit(["mouseenter", nativeMenuItem, e]);
                      }, true);
                      nativeMenuItem.addEventListener("mouseleave", (e) => {
                        e.stopImmediatePropagation();
                        __privateGet(_AppMenuItemView, _menuItemChangeBus).emit(["mouseleave", nativeMenuItem, e]);
                      }, true);
                      nativeMenuItem.addEventListener("click", () => {
                        __privateGet(_AppMenuItemView, _menuItemChangeBus).emit(["click", nativeMenuItem]);
                      });
                      const panel = __privateGet(_AppMenuItemView, _menuItemToPanelMap).get(nativeMenuItem);
                      panel?.addEventListener("mouseleave", (e) => {
                        e.stopImmediatePropagation();
                        __privateGet(_AppMenuItemView, _menuItemChangeBus).emit(["mouseleave", nativeMenuItem, e]);
                      });
                    }
                  }));
                  __privateAdd(_AppMenuItemView, __3, __privateGet(_AppMenuItemView, _menuItemChangeStream).onValue(async (v) => {
                    var _a, _b;
                    const [type, menuItem, mouseEvent] = v;
                    const {
                      HOVER
                    } = GmailAppMenuItemView.elementCss;
                    function handleActivate() {
                      const appMenuElement = gmail_element_getter.A.getAppMenuContainer();
                      for (const menuItem_ of appMenuElement?.querySelectorAll(`.${NATIVE_CLASS}`) ?? []) {
                        _AppMenuItemView.deactivateMenuItem(menuItem_);
                        const iconElement = menuItem_.querySelector(ICON_ELEMENT_SELECTOR);
                        if (iconElement) {
                          iconElement.tabIndex = menuItem_ === menuItem ? 0 : -1;
                        }
                      }
                      activateMenuItem(menuItem);
                      const panel = __privateGet(_AppMenuItemView, _menuItemToPanelMap).get(menuItem);
                      if (panel) {
                        const otherPanels = _AppMenuItemView.getAllPanels().filter((p) => p !== panel);
                        for (const otherPanel of otherPanels) {
                          _AppMenuItemView.deactivatePanel(otherPanel);
                        }
                        activatePanel(panel);
                      }
                    }
                    switch (type) {
                      case "mouseenter": {
                        const panel = __privateGet(_AppMenuItemView, _menuItemToPanelMap).get(menuItem);
                        const activeMenuItem = _AppMenuItemView.getActiveMenuItem();
                        const activePanel = _AppMenuItemView.getActivePanel();
                        const burgerMenuOpen = gmail_element_getter.A.isAppBurgerMenuOpen();
                        if (activeMenuItem === menuItem && activePanel === panel && burgerMenuOpen) return;
                        if (activePanel) {
                          _AppMenuItemView.deactivatePanel(activePanel);
                        }
                        if (panel) {
                          const height = window.innerHeight - panel.getBoundingClientRect().top;
                          panel.style.cssText = `height: ${height}px;`;
                          activatePanel(panel, {
                            hover: true
                          });
                          if (!menuItem.classList.contains(HOVER)) {
                            menuItem.classList.add(HOVER);
                          }
                          if (!burgerMenuOpen) {
                            for (const panel2 of document.querySelectorAll(CollapsiblePanelView.elementSelectors.NATIVE) ?? []) {
                              panel2.classList.add(CollapsiblePanelView.elementCss.COLLAPSED_HOVER);
                            }
                          }
                        } else {
                          const panel2 = activeMenuItem && __privateGet(_AppMenuItemView, _menuItemToPanelMap).get(activeMenuItem);
                          if (panel2) {
                            activatePanel(panel2);
                          }
                        }
                        break;
                      }
                      case "mouseleave": {
                        const isPanelDropdownShown = __privateMethod(_a = _AppMenuItemView, _AppMenuItemView_static, isPanelDropdownShown_fn).call(_a);
                        if (isPanelDropdownShown) return;
                        const activeMenuItem = _AppMenuItemView.getActiveMenuItem();
                        const activePanel = _AppMenuItemView.getActivePanel();
                        const activeMenuItemPanel = activeMenuItem && __privateGet(_AppMenuItemView, _menuItemToPanelMap).get(activeMenuItem);
                        if (mouseEvent.relatedTarget instanceof Node && (menuItem.contains(mouseEvent.relatedTarget) || activePanel?.contains(mouseEvent.relatedTarget))) return;
                        const burgerMenuOpen = gmail_element_getter.A.isAppBurgerMenuOpen();
                        if (activePanel === activeMenuItemPanel && burgerMenuOpen) return;
                        if (menuItem.classList.contains(HOVER)) {
                          menuItem.classList.remove(HOVER);
                        }
                        for (const panel of document.querySelectorAll(CollapsiblePanelView.elementSelectors.NATIVE) ?? []) {
                          panel.classList.remove(CollapsiblePanelView.elementCss.COLLAPSED_HOVER);
                        }
                        if (activePanel) {
                          _AppMenuItemView.deactivatePanel(activePanel);
                        }
                        if (activeMenuItemPanel) {
                          activatePanel(activeMenuItemPanel);
                        }
                        break;
                      }
                      case "click": {
                        handleActivate();
                        const isPanelLess = __privateMethod(_b = _AppMenuItemView, _AppMenuItemView_static, isPanelLess_fn).call(_b);
                        for (const panel of document.querySelectorAll(CollapsiblePanelView.elementSelectors.NATIVE) ?? []) {
                          panel.classList.toggle(CollapsiblePanelView.elementCss.PANEL_LESS, isPanelLess);
                        }
                        gmail_element_getter.A.getAppMenu()?.classList.toggle("aTO", isPanelLess);
                        gmail_element_getter.A.getAppHeader()?.classList.toggle("aTO", isPanelLess);
                        break;
                      }
                      case "route-activated": {
                        handleActivate();
                        break;
                      }
                    }
                  }));
                  let AppMenuItemView = _AppMenuItemView;
                  function activatePanel(panel, options2) {
                    const {
                      ACTIVE,
                      HOVER,
                      SDK_ACTIVE
                    } = CollapsiblePanelView.elementCss;
                    if (!panel.classList.contains(ACTIVE)) {
                      panel.classList.add(ACTIVE);
                    }
                    if (!panel.classList.contains(SDK_ACTIVE)) {
                      panel.classList.add(SDK_ACTIVE);
                    }
                    if (options2?.hover) {
                      if (!panel.classList.contains(HOVER)) {
                        panel.classList.add(HOVER);
                      }
                    } else {
                      if (panel.classList.contains(HOVER)) {
                        panel.classList.remove(HOVER);
                      }
                    }
                  }
                  function activateMenuItem(menuItem) {
                    const {
                      ACTIVE,
                      SDK_ACTIVE
                    } = GmailAppMenuItemView.elementCss;
                    if (!menuItem.classList.contains(ACTIVE)) {
                      menuItem.classList.add(ACTIVE);
                    }
                    if (!menuItem.classList.contains(SDK_ACTIVE)) {
                      menuItem.classList.add(SDK_ACTIVE);
                    }
                  }
                  ;
                  const _AppMenu = class _AppMenu {
                    constructor(driver) {
                      __privateAdd(this, _driver13);
                      __privateAdd(this, _events, (0, kefir_esm.stream)((emitter) => {
                        const f = async () => {
                          const isShown = await this.isShown();
                          if (!isShown) {
                            return;
                          }
                          const appMenu = await gmail_element_getter.A.getAppMenuAsync();
                          if (!appMenu) {
                            return;
                          }
                          const onTransition = async (e) => {
                            const {
                              TOGGLE_OPEN_STATE
                            } = CollapsiblePanelView.elementCss;
                            const {
                              target,
                              type
                            } = e;
                            if (target instanceof HTMLElement && target.matches(CollapsiblePanelView.elementSelectors.NATIVE) && (type === "transitionstart" && target.classList.contains(TOGGLE_OPEN_STATE) || // TOGGLE_OPEN_STATE is removed on transitioncancel TransitionEvents
                            type === "transitioncancel" || type === "transitionend")) {
                              emitter.emit({
                                name: "collapseToggled",
                                event: e
                              });
                            }
                          };
                          kefir_esm["default"].merge(["transitionstart", "transitioncancel", "transitionend"].map((x) => kefir_esm["default"].fromEvents(appMenu.parentElement, x))).onValue(onTransition);
                        };
                        f();
                      }));
                      var _a;
                      __privateSet(this, _driver13, driver);
                      __privateMethod(_a = _AppMenu, _AppMenu_static, monitorAppMenuState_fn).call(_a);
                    }
                    /**
                     * A stream of events related to the AppMenu.
                     *
                     * @note If the AppMenu is not shown, this stream will not emit any events.
                     */
                    get events() {
                      return __privateGet(this, _events);
                    }
                    /**
                     * @returns whether or not the AppMenu Burger is uncollapsed or not.
                     */
                    isMenuOpen() {
                      return gmail_element_getter.A.isAppBurgerMenuOpen();
                    }
                    /**
                     * Adds an app menu item to the app menu. Because the AppMenu may not be shown, this method expects `AppMenu.isShown` to be called first.
                     *
                     * If @see AppMenu#isShown returns `false` and this method is called, the SDK waits a bit for the AppMenu selector and then logs a warning.
                     *
                     * If the `insertOrder` option is provided, the app menu item will be added at that index. If it is not, the SDK adds the app menu item after Gmail's default app menu icons.
                     */
                    addMenuItem(menuItemDescriptor) {
                      const navItemView = new AppMenuItemView(__privateGet(this, _driver13), menuItemDescriptor);
                      return navItemView;
                    }
                    /**
                     * @returns true if the app menu is visible. At time of writing, this typically means they have chose to enable Chat, Meet, or both.
                     */
                    async isShown() {
                      const result = await gmail_element_getter.A.getAppMenuAsync();
                      return !!result;
                    }
                  };
                  _driver13 = new WeakMap();
                  _events = new WeakMap();
                  _monitorInitialized = new WeakMap();
                  _AppMenu_static = new WeakSet();
                  monitorAppMenuState_fn = async function() {
                    if (__privateGet(this, _monitorInitialized)) {
                      return;
                    }
                    __privateSet(this, _monitorInitialized, true);
                    kefir_esm["default"].fromPromise(gmail_element_getter.A.getAppMenuAsync()).filter(isNotNil.A).flatMap((appMenu) => (0, make_mutation_observer_chunked_stream.A)(appMenu, {
                      childList: true,
                      subtree: true,
                      attributes: true,
                      attributeFilter: ["class"]
                    }).delay(0)).filter((mutations) => mutations.some((m) => m.target instanceof HTMLElement && AppMenuItemView.isMenuItem(m.target))).throttle(10, {
                      leading: true,
                      trailing: true
                    }).map(() => {
                      const activeMenuItem = AppMenuItemView.getActiveMenuItem();
                      if (activeMenuItem) {
                        const otherMenuItems = AppMenuItemView.getAllMenuItems().filter((menuItem) => menuItem !== activeMenuItem);
                        otherMenuItems.map((menuItem) => AppMenuItemView.deactivateMenuItem(menuItem));
                      }
                      const activePanel = AppMenuItemView.getActivePanel();
                      if (activePanel) {
                        const otherPanels = AppMenuItemView.getAllPanels().filter((panel) => panel !== activePanel);
                        otherPanels.map((panel) => AppMenuItemView.deactivatePanel(panel));
                      }
                    }).onValue(() => {
                    });
                  };
                  __privateAdd(_AppMenu, _AppMenu_static);
                  __privateAdd(_AppMenu, _monitorInitialized, false);
                  let AppMenu = _AppMenu;
                  var intersection = __webpack_require__2(4225);
                  var intersection_default = /* @__PURE__ */ __webpack_require__2.n(intersection);
                  ;
                  class CollapsibleSectionView extends safe_event_emitter.A {
                    constructor(collapsibleSectionViewDriver, driver) {
                      super();
                      /** This property is set to true once the view is destroyed. */
                      __privateAdd(this, _collapsibleSectionViewDriver);
                      __privateSet(this, _collapsibleSectionViewDriver, collapsibleSectionViewDriver);
                      this.destroyed = false;
                      _bindToEventStream(this, collapsibleSectionViewDriver, driver);
                    }
                    setCollapsed(value) {
                      __privateGet(this, _collapsibleSectionViewDriver).setCollapsed(value);
                    }
                    /** Removes this section from the current Route */
                    remove() {
                      this.destroy();
                    }
                    destroy() {
                      __privateGet(this, _collapsibleSectionViewDriver).destroy();
                      this.removeAllListeners();
                    }
                  }
                  _collapsibleSectionViewDriver = new WeakMap();
                  function _bindToEventStream(collapsibleSectionView, collapsibleSectionViewDriver, driver) {
                    collapsibleSectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event)) {
                        return;
                      }
                      const {
                        eventName
                      } = event;
                      collapsibleSectionView.emit(eventName);
                    });
                    collapsibleSectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "rowClicked") {
                        return;
                      }
                      const {
                        rowDescriptor
                      } = event;
                      if (rowDescriptor.routeID) {
                        driver.goto(rowDescriptor.routeID, rowDescriptor.routeParams);
                      }
                      if (typeof rowDescriptor.onClick === "function") {
                        rowDescriptor.onClick();
                      }
                    });
                    collapsibleSectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "titleLinkClicked") {
                        return;
                      }
                      const {
                        sectionDescriptor
                      } = event;
                      if (sectionDescriptor.onTitleLinkClick) {
                        sectionDescriptor.onTitleLinkClick(collapsibleSectionView);
                      }
                    });
                    collapsibleSectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "footerClicked") {
                        return;
                      }
                      const {
                        sectionDescriptor
                      } = event;
                      if (sectionDescriptor.onFooterLinkClick) {
                        sectionDescriptor.onFooterLinkClick(collapsibleSectionView);
                      }
                    });
                    collapsibleSectionViewDriver.eventStream.onEnd(() => {
                      collapsibleSectionView.destroyed = true;
                      collapsibleSectionView.emit("destroy");
                    });
                  }
                  const collapsible_section_view = CollapsibleSectionView;
                  ;
                  class SectionView extends safe_event_emitter.A {
                    constructor(sectionViewDriver, driver) {
                      super();
                      __privateAdd(this, _sectionViewDriver);
                      __privateSet(this, _sectionViewDriver, sectionViewDriver);
                      this.destroyed = false;
                      section_view_bindToEventStream(this, sectionViewDriver, driver);
                    }
                    /**
                     * Removes this section from the current Route.
                     */
                    remove() {
                      this.destroy();
                    }
                    destroy() {
                      __privateGet(this, _sectionViewDriver).destroy();
                      this.removeAllListeners();
                    }
                  }
                  _sectionViewDriver = new WeakMap();
                  function section_view_bindToEventStream(sectionView, sectionViewDriver, driver) {
                    sectionViewDriver.eventStream.onValue((e) => {
                      if (e != null && "eventName" in e) {
                        sectionView.emit(e.eventName);
                      }
                    });
                    sectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "rowClicked") {
                        return;
                      }
                      const {
                        rowDescriptor
                      } = event;
                      if (rowDescriptor.routeID) {
                        driver.goto(rowDescriptor.routeID, rowDescriptor.routeParams);
                      }
                      if (typeof rowDescriptor.onClick === "function") {
                        rowDescriptor.onClick();
                      }
                    });
                    sectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "titleLinkClicked") {
                        return;
                      }
                      const {
                        sectionDescriptor
                      } = event;
                      if (sectionDescriptor.onTitleLinkClick) {
                        sectionDescriptor.onTitleLinkClick(sectionView);
                      }
                    });
                    sectionViewDriver.eventStream.onValue((event) => {
                      if (!("eventName" in event) || event.eventName !== "footerClicked") {
                        return;
                      }
                      const {
                        sectionDescriptor
                      } = event;
                      if (sectionDescriptor?.onFooterLinkClick) {
                        sectionDescriptor.onFooterLinkClick(sectionView);
                      }
                    });
                    sectionViewDriver.eventStream.onEnd(() => {
                      sectionView.destroyed = true;
                      sectionView.emit("destroy");
                    });
                  }
                  const section_view = SectionView;
                  ;
                  class ListRouteView extends route_view.A {
                    constructor(routeViewDriver, driver, appId) {
                      super(routeViewDriver);
                      __privateAdd(this, _ListRouteView_instances);
                      __privateAdd(this, _routeViewDriver2);
                      __privateAdd(this, _driver14);
                      __privateAdd(this, _appId3);
                      __privateAdd(this, _sectionViews, []);
                      __privateSet(this, _routeViewDriver2, routeViewDriver);
                      __privateSet(this, _driver14, driver);
                      __privateSet(this, _appId3, appId);
                      __privateMethod(this, _ListRouteView_instances, bindToEventStream_fn2).call(this);
                    }
                    /**
                     * Adds a collapsible section to the top of the page.
                     */
                    addCollapsibleSection(collapsibleSectionDescriptor) {
                      const collapsibleSectionViewDriver = __privateGet(this, _routeViewDriver2).addCollapsibleSection(kefir_cast_default()(kefir_esm["default"], collapsibleSectionDescriptor).toProperty(), __privateGet(this, _appId3));
                      const collapsibleSectionView = new collapsible_section_view(collapsibleSectionViewDriver, __privateGet(this, _driver14));
                      __privateGet(this, _sectionViews).push(collapsibleSectionView);
                      return collapsibleSectionView;
                    }
                    /** Adds a non-collapsible section to the top of the page. */
                    addSection(sectionDescriptor) {
                      const sectionViewDriver = __privateGet(this, _routeViewDriver2).addSection(kefir_cast_default()(kefir_esm["default"], sectionDescriptor).toProperty(), __privateGet(this, _appId3));
                      const sectionView = new section_view(sectionViewDriver, __privateGet(this, _driver14));
                      __privateGet(this, _sectionViews).push(sectionView);
                      return sectionView;
                    }
                    /**
                     * Hides the search filter toolbar that appears on search pages.
                     *
                     * This method may not support other pages such as the Sent page, even though
                     * it has a very similar filter toolbar.
                     */
                    hideSearchPageFilterToolbar() {
                      __privateGet(this, _routeViewDriver2).hideSearchPageFilterToolbar();
                    }
                    /** Simulates a click on the Gmail thread list refresh button. */
                    refresh() {
                      __privateGet(this, _routeViewDriver2).refresh();
                    }
                  }
                  _routeViewDriver2 = new WeakMap();
                  _driver14 = new WeakMap();
                  _appId3 = new WeakMap();
                  _sectionViews = new WeakMap();
                  _ListRouteView_instances = new WeakSet();
                  bindToEventStream_fn2 = function() {
                    __privateGet(this, _routeViewDriver2).getEventStream().onEnd(() => {
                      __privateGet(this, _sectionViews).forEach((sectionView) => {
                        sectionView.destroy();
                      });
                    });
                  };
                  const list_route_view = ListRouteView;
                  var custom_route_view = __webpack_require__2(6341);
                  var router = __webpack_require__2(6280);
                  ;
                  const SAMPLE_RATE = 0.01;
                  class Router {
                    constructor(appId, driver, membrane) {
                      __privateAdd(this, _Router_instances);
                      __publicField(this, "NativeRouteIDs", router.Vi);
                      __publicField(this, "NativeListRouteIDs", router.Kc);
                      __publicField(this, "RouteTypes", router.Cs);
                      __privateAdd(this, _appId4);
                      __privateAdd(this, _driver15);
                      __privateAdd(this, _currentRouteViewDriver);
                      __privateAdd(this, _allRoutesHandlerRegistry);
                      __privateAdd(this, _customRoutes, []);
                      __privateAdd(this, _membrane4);
                      __privateAdd(this, _listRouteHandlerRegistries, {});
                      __privateSet(this, _appId4, appId);
                      __privateSet(this, _driver15, driver);
                      __privateSet(this, _currentRouteViewDriver, new dummy_route_view_driver());
                      __privateSet(this, _allRoutesHandlerRegistry, new handler_registry.A());
                      __privateSet(this, _membrane4, membrane);
                      Object.values(router.Kc).forEach((value) => {
                        __privateGet(this, _listRouteHandlerRegistries)[value] = new handler_registry.A();
                      });
                      driver.getRouteViewDriverStream().onValue((routeViewDriver) => {
                        driver.getLogger().trackFunctionPerformance(() => __privateMethod(this, _Router_instances, handleRouteViewChange_fn).call(this, routeViewDriver), SAMPLE_RATE, {
                          type: "handleRouteViewChange",
                          routeID: routeViewDriver.getRouteID()
                        });
                      });
                      driver.getStopper().onValue(() => {
                        __privateGet(this, _allRoutesHandlerRegistry).dumpHandlers();
                        Object.values(__privateGet(this, _listRouteHandlerRegistries)).forEach((reg) => {
                          reg.dumpHandlers();
                        });
                      });
                    }
                    /**
                     * Get a URL that can be used to navigate to a view. You'll typically want to use this to set the href of an element or similar. Returns the encoded URL string.
                     *
                     * @param routeID A route specifying where the link should navigate the user to. This should either be a routeID registered with {@link Router#handleCustomRoute} or {@link Router#handleCustomListRoute}, or a value from {@link Router#NativeRouteIDs}.
                     * @param params an object containing the parameters that will be encoded in the link and decoded when the user subsequently visits the route. Handlers for the specified routeID will receive a copy of this object. This object must contain only simple key value pairs with no nested arrays/objects.
                     */
                    createLink(routeID, params) {
                      return __privateGet(this, _driver15).createLink(routeID, params);
                    }
                    /**
                     * Change the route to be the one with the given ID and have the given parameters.
                     * @param routeID A route specifying where the link should navigate the user to. This should either be a routeID registered with {@link Router#handleCustomRoute} or {@link Router#handleCustomListRoute} a value from {@link Router#NativeRouteIDs}, or a value previously returned by {@link Router#createLink}. If it's a value previously returned by {@link Router#createLink} then the params argument must be omitted.
                     * @param params an object containing the parameters that will be encoded in the link and decoded when the user subsequently visits the route. Handlers for the specified routeID will receive a copy of this object. This object must contain only simple key value pairs with no nested arrays/objects.
                     */
                    goto(routeID, params) {
                      if (typeof routeID !== "string") {
                        throw new Error("routeID must be a string");
                      }
                      const driver = __privateGet(this, _driver15);
                      if (typeof params === "string") {
                        driver.getLogger().deprecationWarning("Router.goto param string", "param object (e.g. {param: value})");
                      }
                      return driver.goto(routeID, params);
                    }
                    /**
                     * Registers a handler (callback) to be called when the user navigates to a custom route which matches the routeID you provide. Use this to create your own routes (pages) with your own custom content. Your callback will be passed an instance of a {@link CustomRouteView} whose contents you may modify.
                     * @param routeID which route this handler is registering for
                     * @param handler The callback to call when the route changes to a custom route matching the provided routeID
                     * @returns a function which removes the handler registration.
                     */
                    handleCustomRoute(routeID, handler) {
                      const customRouteDescriptor = {
                        routeID,
                        onActivate: handler
                      };
                      const removeCustomRouteFromDriver = __privateGet(this, _driver15).addCustomRouteID(routeID);
                      const customRoutes = __privateGet(this, _customRoutes);
                      const driver = __privateGet(this, _driver15);
                      customRoutes.push(customRouteDescriptor);
                      driver.getLogger().eventSdkPassive("Router.handleCustomRoute");
                      return function() {
                        removeCustomRouteFromDriver();
                        const index = customRoutes.indexOf(customRouteDescriptor);
                        if (index > -1) {
                          customRoutes.splice(index, 1);
                        }
                      };
                    }
                    /**
                     * Registers a handler (callback) to be called when the user navigates to any route (both customs and built in routes). Because this can apply to any route, your callback will be given only a generic RouteView. This is typically used when you want to monitor for page changes but don't necessarily need to modify the page.
                     * @param handler The callback to call when the route changes
                     * @returns a function which removes the handler registration.
                     */
                    handleAllRoutes(handler) {
                      return __privateGet(this, _allRoutesHandlerRegistry).registerHandler(handler);
                    }
                    /**
                     * Registers a handler (callback) to be called when the user navigates to a list route which matches the routeID you provide. Gmail have several built in routes which are "Lists". These include routes like Inbox, All Mail, Sent, Drafts, etc. You'll typically use this to modify Gmail's built in List routes.
                     * @param routeID which list route this handler is registering for.
                     * @param handler The callback to call when the route changes to a list route matching the routeId.
                     * @returns a function which removes the handler registration.
                     *
                     * @example
                     *
                     * ```javascript
                     * sdk.Router.handleListRoute(sdk.Router.NativeRouteIDs.INBOX, (listRouteView) => {
                     * ```
                    });
                     */
                    handleListRoute(routeID, handler) {
                      const listRouteHandlerRegistries = __privateGet(this, _listRouteHandlerRegistries);
                      if (!listRouteHandlerRegistries[routeID]) {
                        throw new Error("Invalid routeID specified");
                      }
                      return listRouteHandlerRegistries[routeID].registerHandler(handler);
                    }
                    /**
                     * Used to create a custom view that shows a list of threads. When the user navigates to the given routeID, the handler function will be called. The handler function will be passed the starting offset (if the user sees 50 threads per page and is on page 2, then the offset will be 50), and a maximum number of threads to return. It must return a CustomListDescriptor, or a promise which resolves to one.
                     * @param routeID  Which route this handler is registering for.
                     * @param handler Passed a page offset and a maximum number of threads to return. Must return a CustomListDescriptor, or a promise which resolves to one.
                     * @returns a function which removes the handler registration.
                     */
                    handleCustomListRoute(routeID, handler) {
                      return __privateGet(this, _driver15).addCustomListRouteID(routeID, handler);
                    }
                    /**
                     * @returns a RouteView of the current route view
                     */
                    getCurrentRouteView() {
                      return __privateGet(this, _membrane4).get(__privateGet(this, _currentRouteViewDriver));
                    }
                  }
                  _appId4 = new WeakMap();
                  _driver15 = new WeakMap();
                  _currentRouteViewDriver = new WeakMap();
                  _allRoutesHandlerRegistry = new WeakMap();
                  _customRoutes = new WeakMap();
                  _membrane4 = new WeakMap();
                  _listRouteHandlerRegistries = new WeakMap();
                  _Router_instances = new WeakSet();
                  handleRouteViewChange_fn = function(routeViewDriver) {
                    if (__privateGet(this, _currentRouteViewDriver) instanceof dummy_route_view_driver) {
                      __privateGet(this, _currentRouteViewDriver).destroy();
                    }
                    __privateSet(this, _currentRouteViewDriver, routeViewDriver);
                    const routeView = __privateGet(this, _membrane4).get(routeViewDriver);
                    __privateMethod(this, _Router_instances, updateNavMenu_fn).call(this, routeViewDriver);
                    if (routeView.getRouteType() === router.Cs.CUSTOM) {
                      __privateMethod(this, _Router_instances, informRelevantCustomRoutes_fn).call(this, routeViewDriver, routeView);
                    }
                    __privateGet(this, _allRoutesHandlerRegistry).addTarget(routeView);
                    if (routeView.getRouteType() === router.Cs.LIST) {
                      const listRouteView = new list_route_view(routeViewDriver, __privateGet(this, _driver15), __privateGet(this, _appId4));
                      const listRouteHandlerRegistry = __privateGet(this, _listRouteHandlerRegistries)[routeView.getRouteID()];
                      if (listRouteHandlerRegistry) {
                        listRouteHandlerRegistry.addTarget(listRouteView);
                      }
                      __privateGet(this, _listRouteHandlerRegistries)[router.Vi.ANY_LIST].addTarget(listRouteView);
                    }
                  };
                  informRelevantCustomRoutes_fn = function(routeViewDriver, routeView) {
                    const routeID = routeView.getRouteID();
                    const routeIDArray = Array.isArray(routeID) ? routeID : [routeID];
                    const relevantCustomRoute = __privateGet(this, _customRoutes).find((customRoute) => intersection_default()(Array.isArray(customRoute.routeID) ? customRoute.routeID : [customRoute.routeID], routeIDArray).length);
                    if (relevantCustomRoute) {
                      const customRouteView = new custom_route_view.A(routeViewDriver);
                      const customViewElement = routeViewDriver.getCustomViewElement();
                      if (!customViewElement) throw new Error("should not happen");
                      __privateGet(this, _driver15).showCustomRouteView(customViewElement);
                      try {
                        relevantCustomRoute.onActivate(customRouteView);
                      } catch (err) {
                        __privateGet(this, _driver15).getLogger().error(err);
                      }
                    }
                  };
                  updateNavMenu_fn = function(newRouteViewDriver) {
                    __privateGet(this, _driver15).setShowNativeNavMarker(newRouteViewDriver.getType() !== router.Cs.CUSTOM);
                    __privateGet(this, _driver15).setShowNativeAddonSidebar(newRouteViewDriver.getType() !== router.Cs.CUSTOM);
                  };
                  const namespaces_router = Router;
                  ;
                  class Search {
                    constructor(appId, driver) {
                      __privateAdd(this, _driver16);
                      __privateSet(this, _driver16, driver);
                    }
                    registerSearchSuggestionsProvider(handler) {
                      if (typeof handler != "function") {
                        throw new Error("Incorrect arguments");
                      }
                      __privateGet(this, _driver16).registerSearchSuggestionsProvider(handler);
                    }
                    registerSearchQueryRewriter(rewriter) {
                      if (typeof rewriter.termReplacer != "function" || typeof rewriter.term != "string") {
                        throw new Error("Incorrect arguments");
                      }
                      if (!rewriter.term.match(/^(app|has):/)) {
                        throw new Error("Custom search term must begin with 'app:'");
                      }
                      __privateGet(this, _driver16).registerSearchQueryRewriter(rewriter);
                    }
                  }
                  _driver16 = new WeakMap();
                  ;
                  const app_toolbar_button_view_memberMap = /* @__PURE__ */ new WeakMap();
                  class AppToolbarButtonView extends safe_event_emitter.A {
                    constructor(driver, appToolbarButtonViewDriverPromise) {
                      super();
                      const members = {
                        appToolbarButtonViewDriverPromise,
                        appToolbarButtonViewDriver: null
                      };
                      app_toolbar_button_view_memberMap.set(this, members);
                      this.destroyed = false;
                      members.appToolbarButtonViewDriverPromise.then((appToolbarButtonViewDriver) => {
                        members.appToolbarButtonViewDriver = appToolbarButtonViewDriver;
                        appToolbarButtonViewDriver.getStopper().onValue(() => {
                          this.destroyed = true;
                          this.emit("destroy");
                        });
                      });
                      driver.getStopper().onValue(() => {
                        this.remove();
                      });
                    }
                    open() {
                      const members = (0, get_or_fail.A)(app_toolbar_button_view_memberMap, this);
                      members.appToolbarButtonViewDriverPromise.then(function(appToolbarButtonViewDriver) {
                        appToolbarButtonViewDriver.open();
                      });
                    }
                    close() {
                      const members = (0, get_or_fail.A)(app_toolbar_button_view_memberMap, this);
                      members.appToolbarButtonViewDriverPromise.then(function(appToolbarButtonViewDriver) {
                        appToolbarButtonViewDriver.close();
                      });
                    }
                    remove() {
                      const members = (0, get_or_fail.A)(app_toolbar_button_view_memberMap, this);
                      members.appToolbarButtonViewDriverPromise.then(function(appToolbarButtonViewDriver) {
                        appToolbarButtonViewDriver.destroy();
                      });
                    }
                  }
                  ;
                  class Toolbars extends safe_event_emitter.A {
                    constructor(appId, driver, membrane, piOpts) {
                      super();
                      __privateAdd(this, _driver17);
                      __privateAdd(this, _membrane5);
                      __privateAdd(this, _piOpts2);
                      __publicField(this, "SectionNames", SECTION_NAMES);
                      __privateSet(this, _driver17, driver);
                      __privateSet(this, _membrane5, membrane);
                      __privateSet(this, _piOpts2, piOpts);
                    }
                    /**
                     * Registers a toolbar button to appear on thread rows, above the thread list when some rows are checked, and above threads.
                     *
                     * @returns a function which removes the button registration.
                     */
                    registerThreadButton(buttonDescriptor) {
                      if ((buttonDescriptor.listSection === "OTHER" || buttonDescriptor.threadSection === "OTHER") && buttonDescriptor.hasDropdown) {
                        __privateGet(this, _driver17).getLogger().errorApp(new Error("registerThreadButton does not support listSection=OTHER or threadSection=OTHER and hasDropdown=true together"));
                        buttonDescriptor = {
                          ...buttonDescriptor,
                          hasDropdown: false
                        };
                      }
                      const {
                        hideFor,
                        ..._buttonDescriptor
                      } = buttonDescriptor;
                      const registerThreadButton = () => {
                        return __privateGet(this, _driver17).registerThreadButton({
                          ..._buttonDescriptor,
                          onClick: (event) => {
                            if (!_buttonDescriptor.onClick) return;
                            _buttonDescriptor.onClick({
                              position: event.position,
                              dropdown: event.dropdown,
                              selectedThreadViews: event.selectedThreadViewDrivers.map((x) => __privateGet(this, _membrane5).get(x)),
                              selectedThreadRowViews: event.selectedThreadRowViewDrivers.map((x) => __privateGet(this, _membrane5).get(x))
                            });
                          }
                        });
                      };
                      if (!hideFor) {
                        return registerThreadButton();
                      } else {
                        const stopper = js_default()();
                        let currentRemover = null;
                        __privateGet(this, _driver17).getRouteViewDriverStream().takeUntilBy(stopper).onValue((routeViewDriver) => {
                          const routeView = __privateGet(this, _membrane5).get(routeViewDriver);
                          if (hideFor(routeView)) {
                            if (currentRemover) {
                              currentRemover();
                              currentRemover = null;
                            }
                          } else {
                            if (!currentRemover) {
                              currentRemover = registerThreadButton();
                            }
                          }
                        });
                        return () => {
                          stopper.destroy();
                          if (currentRemover) {
                            currentRemover();
                            currentRemover = null;
                          }
                        };
                      }
                    }
                    /**
                     * @deprecated This method is deprecated in favor of {@link Toolbars.registerThreadButton}.
                     *
                     * Registers a toolbar button to appear above any list page such as the Inbox or Sent Mail.
                     */
                    registerToolbarButtonForList(buttonDescriptor) {
                      return this.registerThreadButton({
                        positions: ["LIST"],
                        listSection: buttonDescriptor.section,
                        title: buttonDescriptor.title,
                        iconUrl: buttonDescriptor.iconUrl,
                        iconClass: buttonDescriptor.iconClass,
                        onClick: (event) => {
                          if (!buttonDescriptor.onClick) return;
                          const driver = __privateGet(this, _driver17);
                          buttonDescriptor.onClick({
                            dropdown: event.dropdown,
                            selectedThreadRowViews: event.selectedThreadRowViews,
                            get threadRowViews() {
                              driver.getLogger().deprecationWarning("Toolbars.registerToolbarButtonForList onClick event.threadRowViews", "Toolbars.registerToolbarButtonForList onClick event.selectedThreadRowViews");
                              return event.selectedThreadRowViews;
                            }
                          });
                        },
                        hasDropdown: buttonDescriptor.hasDropdown,
                        orderHint: buttonDescriptor.orderHint,
                        hideFor: buttonDescriptor.hideFor,
                        keyboardShortcutHandle: buttonDescriptor.keyboardShortcutHandle
                      });
                    }
                    /**
                     * @deprecated This function is deprecated in favor of {@link Toolbars#registerThreadButton}.
                     *
                     * Registers a toolbar button to appear when viewing a thread.
                     */
                    registerToolbarButtonForThreadView(buttonDescriptor) {
                      return this.registerThreadButton({
                        positions: ["THREAD"],
                        threadSection: buttonDescriptor.section,
                        title: buttonDescriptor.title,
                        iconUrl: buttonDescriptor.iconUrl,
                        iconClass: buttonDescriptor.iconClass,
                        onClick: (event) => {
                          if (event.selectedThreadViews.length !== 1) throw new Error("should not happen");
                          if (!buttonDescriptor.onClick) return;
                          buttonDescriptor.onClick({
                            dropdown: event.dropdown,
                            threadView: event.selectedThreadViews[0]
                          });
                        },
                        hasDropdown: buttonDescriptor.hasDropdown,
                        orderHint: buttonDescriptor.orderHint,
                        hideFor: buttonDescriptor.hideFor,
                        keyboardShortcutHandle: buttonDescriptor.keyboardShortcutHandle
                      });
                    }
                    /** @deprecated */
                    setAppToolbarButton(appToolbarButtonDescriptor) {
                      __privateGet(this, _driver17).getLogger().deprecationWarning("Toolbars.setAppToolbarButton", "Toolbars.addToolbarButtonForApp");
                      if (__privateGet(this, _piOpts2).REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return this.addToolbarButtonForApp(appToolbarButtonDescriptor);
                    }
                    /**
                     * Adds a button and dropdown to the "Global Toolbar". This is typically used to show a dropdown with general information about your application. In Gmail, this refers to the navigation area at the top right of the window.
                     */
                    addToolbarButtonForApp(buttonDescriptor) {
                      const buttonDescriptorStream = kefir_cast_default()(kefir_esm["default"], buttonDescriptor);
                      const appToolbarButtonViewDriverPromise = __privateGet(this, _driver17).addToolbarButtonForApp(buttonDescriptorStream);
                      const appToolbarButtonView = new AppToolbarButtonView(__privateGet(this, _driver17), appToolbarButtonViewDriverPromise);
                      return appToolbarButtonView;
                    }
                  }
                  _driver17 = new WeakMap();
                  _membrane5 = new WeakMap();
                  _piOpts2 = new WeakMap();
                  ;
                  class User {
                    constructor(driver, piOpts) {
                      __privateAdd(this, _driver18);
                      __privateAdd(this, _piOpts3);
                      __privateSet(this, _driver18, driver);
                      __privateSet(this, _piOpts3, piOpts);
                    }
                    getEmailAddress() {
                      return __privateGet(this, _driver18).getUserEmailAddress();
                    }
                    isConversationViewDisabled() {
                      return __privateGet(this, _driver18).isConversationViewDisabled();
                    }
                    /** @deprecated */
                    isUsingGmailMaterialUI() {
                      __privateGet(this, _driver18).getLogger().deprecationWarning("User.isUsingGmailMaterialUI");
                      return true;
                    }
                    getLanguage() {
                      return __privateGet(this, _driver18).getUserLanguage();
                    }
                    /** @deprecated use {@link User.getEmailAddress} instead */
                    getUserContact() {
                      __privateGet(this, _driver18).getLogger().deprecationWarning("User.getUserContact", "User.getEmailAddress");
                      if (__privateGet(this, _piOpts3).REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return __privateGet(this, _driver18).getUserContact();
                    }
                    /** @deprecated use {@link User.getEmailAddress} instead */
                    getAccountSwitcherContactList() {
                      __privateGet(this, _driver18).getLogger().deprecationWarning("User.getAccountSwitcherContactList", "User.getEmailAddress");
                      let list = __privateGet(this, _driver18).getAccountSwitcherContactList();
                      const userEmail = this.getEmailAddress();
                      const listHasUser = !!find_default()(list, (item) => item.emailAddress === userEmail);
                      if (!listHasUser) {
                        list = list.concat([{
                          name: userEmail,
                          emailAddress: userEmail
                        }]);
                      }
                      return list;
                    }
                    getPersonDetails(emailAddress) {
                      return __privateGet(this, _driver18).getPersonDetails(emailAddress);
                    }
                  }
                  _driver18 = new WeakMap();
                  _piOpts3 = new WeakMap();
                  ;
                  class Global {
                    constructor(appId, driver) {
                      __privateAdd(this, _driver19);
                      __privateSet(this, _driver19, driver);
                    }
                    get gmailTheme() {
                      return __privateGet(this, _driver19).gmailTheme;
                    }
                    async addSidebarContentPanel(descriptor) {
                      const descriptorPropertyStream = kefir_cast_default()(kefir_esm["default"], descriptor).toProperty();
                      __privateGet(this, _driver19).getLogger().eventSdkPassive("global.addSidebarContentPanel");
                      const contentPanelImplementation = await __privateGet(this, _driver19).addGlobalSidebarContentPanel(descriptorPropertyStream);
                      if (contentPanelImplementation) {
                        return new ContentPanelView(contentPanelImplementation);
                      }
                      return null;
                    }
                    addSupportItem(supportItemDescriptor) {
                      __privateGet(this, _driver19).getLogger().eventSdkPassive("global.addSupportItem");
                      return __privateGet(this, _driver19).addSupportItem(supportItemDescriptor);
                    }
                  }
                  _driver19 = new WeakMap();
                  var toValueObservable = __webpack_require__2(3507);
                  var toValueObservable_default = /* @__PURE__ */ __webpack_require__2.n(toValueObservable);
                  var transducers = __webpack_require__2(6046);
                  var transducers_default = /* @__PURE__ */ __webpack_require__2.n(transducers);
                  ;
                  function showAppIdWarning(driver) {
                    const topDiv = document.createElement("div");
                    topDiv.className = "inboxsdk__appid_warning";
                    topDiv.innerHTML = `
<div class="inboxsdk__appid_warning_main">
  <div class="topline">InboxSDK Developer Warning: Invalid AppId</div>
  <div>You've loaded the InboxSDK with an unregistered appId. Registration is free but necessary to load the SDK.</div>
</div>
<a class="inboxsdk__appid_register" target="_blank" href="https://register.inboxsdk.com/">Register Your App</a>
<input type="button" value="" title="Close" class="inboxsdk__x_close_button" />
`;
                    const topMessageBarDriver = driver.createTopMessageBarDriver(kefir_cast_default()(kefir_esm["default"], {
                      el: topDiv
                    }));
                    const closeBtn = topDiv.querySelector(".inboxsdk__x_close_button");
                    if (!closeBtn) throw new Error("Should not happen");
                    closeBtn.addEventListener("click", function(_e) {
                      topMessageBarDriver.remove();
                    });
                  }
                  var makePageParserTree = __webpack_require__2(745);
                  ;
                  var CustomDomEvent = {
                    tellMeThisThreadIdByDatabase: "inboxSDKtellMeThisThreadIdByDatabase",
                    tellMeThisThreadIdByClick: "inboxSDKtellMeThisThreadIdByClick"
                  };
                  ;
                  class GmailPageCommunicator {
                    constructor() {
                      this.ajaxInterceptStream = kefir_esm["default"].fromEvents(document, "inboxSDKajaxIntercept").map((x) => x.detail);
                    }
                    getUserEmailAddress() {
                      const s = document.head.getAttribute("data-inboxsdk-user-email-address");
                      if (typeof s !== "string") throw new Error("should not happen");
                      return s;
                    }
                    getUserLanguage() {
                      const s = document.head.getAttribute("data-inboxsdk-user-language");
                      if (typeof s !== "string") throw new Error("should not happen");
                      return s;
                    }
                    getIkValue() {
                      const ownIk = document.head.getAttribute("data-inboxsdk-ik-value");
                      if (ownIk) {
                        return ownIk;
                      }
                      if (window.opener) {
                        const openerIk = window.opener.document.head.getAttribute("data-inboxsdk-ik-value");
                        if (openerIk) {
                          return openerIk;
                        } else {
                          throw new Error("Failed to look up parent window 'ik' value");
                        }
                      }
                      throw new Error("Failed to look up 'ik' value");
                    }
                    async getXsrfToken() {
                      const existingHeader = document.head.getAttribute("data-inboxsdk-xsrf-token");
                      if (existingHeader) {
                        return existingHeader;
                      } else {
                        await this.ajaxInterceptStream.filter((_ref) => {
                          let {
                            type
                          } = _ref;
                          return type === "xsrfTokenHeaderReceived";
                        }).take(1).toPromise();
                        const newHeader = document.head.getAttribute("data-inboxsdk-xsrf-token");
                        if (!newHeader) throw new Error("Failed to look up XSRF token");
                        return newHeader;
                      }
                    }
                    async getBtaiHeader() {
                      const existingHeader = document.head.getAttribute("data-inboxsdk-btai-header");
                      if (existingHeader) {
                        return existingHeader;
                      } else {
                        await this.ajaxInterceptStream.filter((_ref2) => {
                          let {
                            type
                          } = _ref2;
                          return type === "btaiHeaderReceived";
                        }).take(1).toPromise();
                        const newHeader = document.head.getAttribute("data-inboxsdk-btai-header");
                        if (!newHeader) throw new Error("Failed to look up BTAI header");
                        return newHeader;
                      }
                    }
                    resolveUrlRedirects(url) {
                      return this.pageAjax({
                        url,
                        method: "HEAD"
                      }).then((result) => result.responseURL);
                    }
                    pageAjax(opts) {
                      const id = `${Date.now()}-${Math.random()}`;
                      const promise = kefir_esm["default"].fromEvents(document, "inboxSDKpageAjaxDone").filter((event) => event.detail && event.detail.id === id).take(1).flatMap((event) => {
                        if (event.detail.error) {
                          const err = Object.assign(new Error(event.detail.message || "Connection error"), {
                            status: event.detail.status
                          });
                          if (event.detail.stack) {
                            err.stack = event.detail.stack;
                          }
                          return kefir_esm["default"].constantError(err);
                        } else {
                          return kefir_esm["default"].constant({
                            text: event.detail.text,
                            responseURL: event.detail.responseURL
                          });
                        }
                      }).toPromise();
                      document.dispatchEvent(new CustomEvent("inboxSDKpageAjax", {
                        bubbles: false,
                        cancelable: false,
                        detail: Object.assign({}, opts, {
                          id
                        })
                      }));
                      return promise;
                    }
                    silenceGmailErrorsForAMoment() {
                      document.dispatchEvent(new CustomEvent("inboxSDKsilencePageErrors", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      const error = new Error("Forgot to unsilence page errors");
                      let unsilenced = false;
                      const unsilence = once_default()(() => {
                        unsilenced = true;
                        document.dispatchEvent(new CustomEvent("inboxSDKunsilencePageErrors", {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      });
                      browser_asap_default()(() => {
                        if (!unsilenced) {
                          lib_logger.A.error(error);
                          unsilence();
                        }
                      });
                      return unsilence;
                    }
                    registerAllowedHashLinkStartTerm(term) {
                      document.dispatchEvent(new CustomEvent("inboxSDKregisterAllowedHashLinkStartTerm", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          term
                        }
                      }));
                    }
                    async getMessageDate(threadId, message) {
                      return this._getMessageData(threadId, message, "data-inboxsdk-sortdate", "inboxSDKtellMeThisMessageDate");
                    }
                    async getMessageRecipients(threadId, message) {
                      return this._getMessageData(threadId, message, "data-inboxsdk-recipients", "inboxSDKtellMeThisMessageRecipients");
                    }
                    async _getMessageData(threadId, message, attribute, eventName) {
                      let data = message.getAttribute(attribute);
                      if (!data) {
                        const [btaiHeader, xsrfToken] = await Promise.all([this.getBtaiHeader(), this.getXsrfToken()]);
                        message.dispatchEvent(new CustomEvent(eventName, {
                          bubbles: true,
                          cancelable: false,
                          detail: {
                            threadId,
                            ikValue: this.getIkValue(),
                            btaiHeader,
                            xsrfToken
                          }
                        }));
                        data = message.getAttribute(attribute);
                        if (!data) {
                          await (0, make_mutation_observer_chunked_stream.A)(message, {
                            attributes: true,
                            attributeFilter: [attribute]
                          }).take(1).toPromise();
                          data = message.getAttribute(attribute);
                        }
                      }
                      if (data && data !== "error") return JSON.parse(data);
                      else return null;
                    }
                    getThreadIdForThreadRowByDatabase(threadRow) {
                      let threadid = threadRow.getAttribute("data-inboxsdk-threadid");
                      if (!threadid) {
                        threadRow.dispatchEvent(new CustomEvent(CustomDomEvent.tellMeThisThreadIdByDatabase, {
                          bubbles: true,
                          cancelable: false,
                          detail: null
                        }));
                        threadid = threadRow.getAttribute("data-inboxsdk-threadid");
                      }
                      return threadid;
                    }
                    getThreadIdForThreadRowByClick(threadRow) {
                      let threadid = threadRow.getAttribute("data-inboxsdk-threadid");
                      if (!threadid) {
                        threadRow.dispatchEvent(new CustomEvent(CustomDomEvent.tellMeThisThreadIdByClick, {
                          bubbles: true,
                          cancelable: false,
                          detail: null
                        }));
                        threadid = threadRow.getAttribute("data-inboxsdk-threadid");
                      }
                      return threadid;
                    }
                    getCurrentThreadID(threadContainerElement) {
                      let isPreviewedThread = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
                      threadContainerElement.dispatchEvent(new CustomEvent("inboxSDKtellMeCurrentThreadId", {
                        bubbles: true,
                        cancelable: false,
                        detail: {
                          isPreviewedThread
                        }
                      }));
                      const s = threadContainerElement.getAttribute("data-inboxsdk-currentthreadid");
                      if (s == null) throw new Error("Failed to read value");
                      return s;
                    }
                    getUserOriginalPreviewPaneMode() {
                      return document.head.getAttribute("data-inboxsdk-user-preview-pane-mode");
                    }
                    getActionTokenValue() {
                      const s = document.head.getAttribute("data-inboxsdk-action-token-value");
                      if (s == null) throw new Error("Failed to read value");
                      return s;
                    }
                    isConversationViewDisabled() {
                      return new Promise((resolve) => {
                        kefir_esm["default"].fromEvents(document, "inboxSDKgmonkeyResponse").take(1).onValue((event) => {
                          resolve(event.detail);
                        });
                        document.dispatchEvent(new CustomEvent("inboxSDKtellMeIsConversationViewDisabled", {
                          bubbles: false,
                          cancelable: false,
                          detail: null
                        }));
                      });
                    }
                    getGoogleRequestHeaders() {
                      document.dispatchEvent(new CustomEvent("inboxSDKgetGoogleRequestHeaders", {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      const json = document.head.getAttribute("data-inboxsdk-google-headers");
                      document.head.removeAttribute("data-inboxsdk-google-headers");
                      if (!json) {
                        throw new Error("Failed to get Google request auth headers");
                      }
                      return JSON.parse(json);
                    }
                    registerSuggestionsModifier(providerID) {
                      document.dispatchEvent(new CustomEvent("inboxSDKregisterSuggestionsModifier", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          providerID
                        }
                      }));
                    }
                    provideAutocompleteSuggestions(providerID, query, suggestions) {
                      document.dispatchEvent(new CustomEvent("inboxSDKprovideSuggestions", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          providerID,
                          query,
                          // Filter out non-JSONifiable things
                          suggestions: JSON.parse(JSON.stringify(suggestions))
                        }
                      }));
                    }
                    setupCustomListResultsQuery(query) {
                      document.dispatchEvent(new CustomEvent("inboxSDKcustomListRegisterQuery", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          query
                        }
                      }));
                    }
                    setCustomListNewQuery(detail) {
                      document.dispatchEvent(new CustomEvent("inboxSDKcustomListNewQuery", {
                        bubbles: false,
                        cancelable: false,
                        detail
                      }));
                    }
                    setCustomListResults(query, newResults) {
                      document.dispatchEvent(new CustomEvent("inboxSDKcustomListResults", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          query,
                          newResults
                        }
                      }));
                    }
                    createCustomSearchTerm(term) {
                      document.dispatchEvent(new CustomEvent("inboxSDKcreateCustomSearchTerm", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          term
                        }
                      }));
                    }
                    setSearchQueryReplacement(query, newQuery) {
                      document.dispatchEvent(new CustomEvent("inboxSDKsearchReplacementReady", {
                        bubbles: false,
                        cancelable: false,
                        detail: {
                          query,
                          newQuery
                        }
                      }));
                    }
                    registerComposeRequestModifier(keyId, appId) {
                      const modifierId = (/* @__PURE__ */ new Date()).getTime() + "_" + appId + "_" + Math.random();
                      const detail = {
                        modifierId
                      };
                      detail.draftID = keyId;
                      document.dispatchEvent(new CustomEvent("inboxSDKregisterComposeRequestModifier", {
                        detail,
                        bubbles: false,
                        cancelable: false
                      }));
                      return modifierId;
                    }
                    unregisterComposeRequestModifier(keyId, modifierId) {
                      document.dispatchEvent(new CustomEvent("inboxSDKunregisterComposeRequestModifier", {
                        detail: {
                          keyId,
                          modifierId
                        },
                        bubbles: false,
                        cancelable: false
                      }));
                    }
                    modifyComposeRequest(keyId, modifierId, composeParams) {
                      const detail = {
                        modifierId,
                        composeParams,
                        draftID: keyId
                      };
                      document.dispatchEvent(new CustomEvent("inboxSDKcomposeRequestModified", {
                        detail,
                        bubbles: false,
                        cancelable: false
                      }));
                    }
                  }
                  ;
                  let injectScriptImplementation = () => {
                    window.chrome.runtime.sendMessage({
                      type: "inboxsdk__injectPageWorld"
                    }, (didExecute) => {
                      if (!didExecute) {
                        if (false) {
                        } else {
                          throw new Error("Couldn't inject pageWorld.js. Check that the extension is using MV3 and has the correct permissions and host_permissions in its manifest.");
                        }
                      }
                    });
                  };
                  const injectScript = once_default()(() => {
                    if (!document.head.hasAttribute("data-inboxsdk-script-injected")) {
                      document.head.setAttribute("data-inboxsdk-script-injected", "true");
                      injectScriptImplementation();
                    }
                    return kefir_esm["default"].later(0, null).merge((0, make_mutation_observer_chunked_stream.A)(document.head, {
                      attributes: true
                    })).filter(() => document.head.hasAttribute("data-inboxsdk-user-email-address")).take(1).map(() => null).toPromise();
                  });
                  function setInjectScriptImplementation(fn) {
                    injectScriptImplementation = fn;
                  }
                  ;
                  function makeXhrInterceptor() {
                    var pageCommunicator = new GmailPageCommunicator();
                    var rawInterceptStream = pageCommunicator.ajaxInterceptStream;
                    var pageCommunicatorPromise = injectScript().then(() => pageCommunicator);
                    var interceptStream = kefir_esm.merge([rawInterceptStream.filter(function(detail) {
                      return detail.type === "emailSending";
                    }).map(function(detail) {
                      if (detail.draftID) {
                        return detail;
                      } else {
                        var body = (0, querystring_es3.parse)(detail.body);
                        return {
                          type: "emailSending",
                          composeId: body.composeid,
                          draft: body.draft
                        };
                      }
                    }), rawInterceptStream.filter(function(detail) {
                      return detail.type === "emailSent";
                    }).map(function(detail) {
                      if (detail.draftID) {
                        return detail;
                      } else {
                        var body = (0, querystring_es3.parse)(detail.originalSendBody);
                        var response = detail.responseText;
                        return {
                          type: "emailSent",
                          composeId: body.composeid,
                          draft: body.draft,
                          response
                        };
                      }
                    }), rawInterceptStream.filter(function(detail) {
                      return detail.type === "emailDraftSaveSending";
                    }).map(function(detail) {
                      if (detail.draftID) {
                        return detail;
                      } else {
                        var body = (0, querystring_es3.parse)(detail.body);
                        return {
                          type: "emailDraftSaveSending",
                          composeId: body.composeid,
                          draft: body.draft
                        };
                      }
                    }), rawInterceptStream.filter(function(detail) {
                      return detail.type === "emailDraftReceived";
                    }).map(function(detail) {
                      if (detail.draftID) {
                        return detail;
                      } else {
                        var body = (0, querystring_es3.parse)(detail.originalSendBody);
                        var response = detail.responseText;
                        return {
                          type: "emailDraftReceived",
                          composeId: body.composeid,
                          draft: body.draft,
                          response,
                          connectionDetails: detail.connectionDetails
                        };
                      }
                    })]);
                    return {
                      xhrInterceptStream: interceptStream,
                      pageCommunicatorPromise
                    };
                  }
                  ;
                  class GmailBackdrop {
                    constructor() {
                      __publicField(this, "_stopper", js_default()());
                      let zIndex2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 500;
                      let target = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : document.body;
                      const el = document.createElement("div");
                      el.className = "Kj-JD-Jh inboxsdk__modal_overlay";
                      el.style.zIndex = String(zIndex2);
                      if (!target) throw new Error("no target");
                      target.appendChild(el);
                      this._stopper.onValue(() => {
                        el.remove();
                      });
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    destroy() {
                      this._stopper.destroy();
                    }
                  }
                  const gmail_backdrop = GmailBackdrop;
                  var fake_window_resize = __webpack_require__2(652);
                  ;
                  class GmailTopMessageBarDriver {
                    constructor(optionStream) {
                      this._eventStream = kefir_bus_default()();
                      const ResizeObserver = __webpack_require__2.g.ResizeObserver;
                      if (ResizeObserver) {
                        this._resizeObserver = new ResizeObserver(() => {
                          this.setTopMessageBarHeight();
                        });
                      }
                      optionStream.takeUntilBy(this._eventStream.filter(() => false).beforeEnd(() => null)).onValue((option) => {
                        if (!option) {
                          if (this._element) {
                            this._element.remove();
                            this._element = null;
                          }
                        } else if (option) {
                          var element = this._element;
                          if (!element) {
                            element = this._element = document.createElement("div");
                            element.classList.add("inboxsdk__topMessageBar");
                            document.body.insertBefore(element, document.body.firstChild);
                            document.body.classList.add("inboxsdk__hasTopMessageBar");
                            (0, fake_window_resize.A)();
                          }
                          if (option.el !== element.children[0]) {
                            element.innerHTML = "";
                            if (option.el) {
                              element.appendChild(option.el);
                              if (this._resizeObserver) {
                                this._resizeObserver.observe(element);
                              }
                              this.setTopMessageBarHeight();
                            }
                          }
                        }
                      });
                    }
                    destroy() {
                      if (this._element) {
                        this._element.remove();
                        this._element = null;
                      }
                      this._eventStream.end();
                      if (this._resizeObserver) {
                        this._resizeObserver.disconnect();
                      }
                      if (document.querySelectorAll(".inboxsdk__topMessageBar").length === 0) {
                        document.body.classList.remove("inboxsdk__hasTopMessageBar");
                      } else {
                        this.setTopMessageBarHeight();
                      }
                      (0, fake_window_resize.A)();
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    remove() {
                      this.destroy();
                    }
                    setTopMessageBarHeight() {
                      const topMessageBars = [...document.querySelectorAll(".inboxsdk__topMessageBar")];
                      const height = topMessageBars.reduce((acc, currValue) => acc + currValue.offsetHeight, 0);
                      document.body.style.setProperty("--inboxsdk__topMessageBar-height", `${height}px`);
                    }
                  }
                  ;
                  class ModalButtonView {
                    constructor(options2) {
                      __publicField(this, "_element", document.createElement("button"));
                      __publicField(this, "_eventStream", kefir_bus_default()());
                      this._isEnabled = options2.enabled !== false;
                      this._title = options2.text || options2.title;
                      this._tooltip = options2.tooltip || options2.title;
                      this._buttonColor = options2.buttonColor || "default";
                      this._createElement(options2);
                      this._eventStream = kefir_bus_default()();
                      this._setupEventStream();
                    }
                    addClass(_className) {
                    }
                    removeClass(_className) {
                    }
                    activate() {
                    }
                    deactivate() {
                    }
                    destroy() {
                      this._element.remove();
                      this._eventStream.end();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    setEnabled(value) {
                      this._setEnabled(value);
                    }
                    update() {
                      throw new Error("not implemented");
                    }
                    isEnabled() {
                      return this._isEnabled;
                    }
                    _createElement(options2) {
                      if (options2.isPrimary) this._element.classList.add("J-at1-auR");
                      this._element.innerText = options2.text || options2.title || "";
                      if (options2.tooltip) {
                        this._element.setAttribute("aria-label", options2.tooltip);
                      }
                      this._element.setAttribute("role", "button");
                      this._element.setAttribute("tabindex", "0");
                      if (options2.tooltip || options2.title) {
                        this._element.setAttribute("data-tooltip", String(options2.tooltip || options2.title));
                      }
                    }
                    _setEnabled(value) {
                      if (this._isEnabled === value) {
                        return;
                      }
                      this._isEnabled = value;
                      if (this._isEnabled) {
                        this._element.classList.remove("inboxsdk__button_disabled");
                      } else {
                        this._element.classList.add("inboxsdk__button_disabled");
                      }
                      this._eventStream.emit({
                        eventName: "enabledChanged",
                        isEnabled: this._isEnabled
                      });
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir_esm.fromEvents(this._element, "click");
                      clickEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.filter(() => this.isEnabled()).map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      const isEnterOrSpace = (event) => includes_default()([
                        32,
                        13
                        /* enter */
                      ], event.which);
                      const keydownEventStream = kefir_esm.fromEvents(this._element, "keydown").filter(() => this.isEnabled());
                      const enterEventStream = keydownEventStream.filter(isEnterOrSpace);
                      this._eventStream.plug(enterEventStream.map(function(event) {
                        return {
                          eventName: "click",
                          domEvent: event
                        };
                      }));
                      enterEventStream.onValue(function(event) {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                    }
                  }
                  ;
                  class GmailModalViewDriver {
                    constructor(options2) {
                      this._setupModalContainerElement(options2);
                      this._processOptions(options2);
                      this._eventStream = kefir_bus_default()();
                      this._setupEventStream();
                    }
                    destroy() {
                      this._modalContainerElement.remove();
                      this._eventStream.end();
                    }
                    getModalContainerElement() {
                      return this._modalContainerElement;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    _processOptions(options2) {
                      this.setTitle(options2.title);
                      this.setContentElement(options2.el);
                      this.setButtons(options2.buttons || []);
                      this.setChromeClass(options2.chrome, options2.showCloseButton, (options2.buttons || []).length > 0);
                    }
                    setTitle(title) {
                      const heading = (0, querySelectorOrFail.A)(this._modalContainerElement, "[role=heading]");
                      if (!title) {
                        heading.style.display = "none";
                      } else {
                        heading.style.display = "";
                        heading.textContent = title;
                      }
                    }
                    setContentElement(element) {
                      const content = (0, querySelectorOrFail.A)(this._modalContainerElement, ".inboxsdk__modal_content");
                      content.innerHTML = "";
                      if (typeof element === "string") {
                        content.innerHTML = element;
                      } else if (element instanceof Element) {
                        content.appendChild(element);
                      }
                    }
                    setButtons(buttons) {
                      const buttonsEl = (0, querySelectorOrFail.A)(this._modalContainerElement, ".inboxsdk__modal_buttons");
                      buttonsEl.innerHTML = "";
                      if (buttons.length === 0) {
                        buttonsEl.style.display = "none";
                        this._modalContainerElement.classList.add("inboxsdk__modal_content_no_buttons");
                      } else {
                        buttonsEl.style.display = "";
                        this._modalContainerElement.classList.remove("inboxsdk__modal_content_no_buttons");
                      }
                      sortBy_default()(buttons, (button) => button.orderHint || 0).forEach(this._addButton.bind(this, buttonsEl));
                    }
                    setChromeClass(chrome2, showCloseButton, hasButtons) {
                      this._modalContainerElement.classList.remove("inboxsdk__modal_hideSides");
                      this._modalContainerElement.classList.remove("inboxsdk__modal_hideTop");
                      this._modalContainerElement.classList.remove("inboxsdk__modal_hideBottom");
                      if (chrome2 === false) {
                        this._modalContainerElement.classList.add("inboxsdk__modal_hideSides");
                        if (!showCloseButton) {
                          this._modalContainerElement.classList.add("inboxsdk__modal_hideTop");
                        }
                        if (!hasButtons) {
                          this._modalContainerElement.classList.add("inboxsdk__modal_hideBottom");
                        }
                      }
                    }
                    _setupModalContainerElement(options2) {
                      const constrainTitleWidthTopRowClass = options2.constrainTitleWidth ? "inboxsdk__modal_toprow--constrain-title-width" : "";
                      this._modalContainerElement = document.createElement("div");
                      this._modalContainerElement.className = "inboxsdk__modal_fullscreen";
                      var htmlString = `
    <div class="Kj-JD inboxsdk__modal_container" tabindex="0" role="alertdialog">
      <div class="Kj-JD-K7 Kj-JD-K7-GIHV4 inboxsdk__modal_toprow ${constrainTitleWidthTopRowClass}">
        <span class="Kj-JD-K7-K0" role="heading"></span>
        <span class="Kj-JD-K7-Jq inboxsdk__modal_close" tabindex="0" role="button"></span>
      </div>
      <div class="Kj-JD-Jz inboxsdk__modal_content">
      </div>
      <div class="Kj-JD-Jl inboxsdk__modal_buttons"></div>
    </div>
    `;
                      this._modalContainerElement.innerHTML = htmlString;
                    }
                    _addButton(buttonContainer, buttonDescriptor) {
                      const buttonOptions = {
                        ...buttonDescriptor
                      };
                      ["blue", "red", "green"].includes(buttonDescriptor.color) && buttonDescriptor.color;
                      buttonOptions.isPrimary = buttonDescriptor.type === "PRIMARY_ACTION";
                      const buttonView = new ModalButtonView(buttonOptions);
                      buttonOptions.buttonView = buttonView;
                      new basic_button_view_controller.A(buttonOptions);
                      if (buttonDescriptor.type === "PRIMARY_ACTION") {
                        buttonContainer.insertBefore(buttonView.getElement(), buttonContainer.firstElementChild);
                      } else {
                        buttonContainer.appendChild(buttonView.getElement());
                      }
                    }
                    _setupEventStream() {
                      const closeElement = (0, querySelectorOrFail.A)(this._modalContainerElement, ".inboxsdk__modal_close");
                      closeElement.addEventListener("click", (event) => {
                        this._eventStream.emit({
                          eventName: "closeClick",
                          domEvent: event
                        });
                      });
                    }
                  }
                  const gmail_modal_view_driver = GmailModalViewDriver;
                  var mole_view_module = __webpack_require__2(8558);
                  ;
                  var mole_view_module_options = {};
                  mole_view_module_options.styleTagTransform = styleTagTransform_default();
                  mole_view_module_options.setAttributes = setAttributesWithoutAttributes_default();
                  mole_view_module_options.insert = (htmlElement) => {
                    htmlElement.setAttribute(
                      "data-inboxsdk-version",
                      // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- this is injected by webpack
                      ///@ts-ignore
                      "2.2.11-1764118012397-e51ed7952926d731"
                    );
                    document.head.append(htmlElement);
                  };
                  mole_view_module_options.domAPI = styleDomAPI_default();
                  mole_view_module_options.insertStyleElement = insertStyleElement_default();
                  var mole_view_module_update = injectStylesIntoStyleTag_default()(mole_view_module.Ay, mole_view_module_options);
                  const widgets_mole_view_module = mole_view_module.Ay && mole_view_module.Ay.locals ? mole_view_module.Ay.locals : void 0;
                  ;
                  const gmail_mole_view_driver_INBOXSDK_CLASS = "inboxsdk__mole_view";
                  const _GmailMoleViewDriver = class _GmailMoleViewDriver {
                    constructor(driver, options2) {
                      __privateAdd(this, _GmailMoleViewDriver_instances);
                      __privateAdd(this, _driver20);
                      __privateAdd(this, _eventStream5, kefir_bus_default()());
                      __privateAdd(this, _stopper5, js_default()());
                      __privateAdd(this, _element6);
                      __privateAdd(this, _doShow, (moleParent) => {
                        const insertBefore = moleParent.lastElementChild;
                        if (insertBefore instanceof HTMLElement) {
                          moleParent.insertBefore(__privateGet(this, _element6), insertBefore);
                        } else if (!insertBefore) {
                          moleParent.appendChild(__privateGet(this, _element6));
                        } else {
                          __privateGet(this, _driver20).logger.error(new Error("Mole show invariant violated. `lastMole` is not an HTMLElement"));
                          return;
                        }
                        const dw = moleParent.closest("div.dw");
                        if (dw) {
                          dw.classList.add("inboxsdk__moles_in_use", mole_view_module.jq);
                        }
                      });
                      __privateSet(this, _driver20, driver);
                      __privateSet(this, _element6, Object.assign(document.createElement("div"), {
                        className: classnames_default()(gmail_mole_view_driver_INBOXSDK_CLASS, mole_view_module.iW, options2.className),
                        innerHTML: getHTMLString(options2)
                      }));
                      if (options2.chrome === false) {
                        __privateGet(this, _element6).classList.add("inboxsdk__mole_view_chromeless");
                      } else {
                        (0, querySelectorOrFail.A)(__privateGet(this, _element6), ".inboxsdk__mole_view_titlebar").addEventListener("click", (e) => {
                          this.setMinimized(!this.getMinimized());
                          e.preventDefault();
                          e.stopPropagation();
                        });
                        const minimizeBtn = (0, querySelectorOrFail.A)(__privateGet(this, _element6), ".Hl");
                        minimizeBtn.addEventListener("click", (e) => {
                          this.setMinimized(true);
                          e.preventDefault();
                          e.stopPropagation();
                        });
                        const maximizeBtn = (0, querySelectorOrFail.A)(__privateGet(this, _element6), ".Hk");
                        maximizeBtn.addEventListener("click", (e) => {
                          this.setMinimized(false);
                          e.preventDefault();
                          e.stopPropagation();
                        });
                        const closeBtn = (0, querySelectorOrFail.A)(__privateGet(this, _element6), ".Ha");
                        closeBtn.addEventListener("click", (e) => {
                          this.destroy();
                          e.preventDefault();
                          e.stopPropagation();
                        });
                        if (options2.titleEl) {
                          __privateMethod(this, _GmailMoleViewDriver_instances, setTitleEl_fn).call(this, options2.titleEl);
                        } else {
                          this.setTitle(options2.title || "");
                        }
                        if (options2.minimizedTitleEl) {
                          __privateMethod(this, _GmailMoleViewDriver_instances, setMinimizedTitleEl_fn).call(this, options2.minimizedTitleEl);
                        }
                        const titleButtons = options2.titleButtons;
                        if (titleButtons) {
                          const titleButtonContainer = (0, querySelectorOrFail.A)(__privateGet(this, _element6), ".inboxsdk__mole_title_buttons");
                          const lastChild = titleButtonContainer.lastElementChild;
                          titleButtons.forEach((titleButton) => {
                            const img = document.createElement("img");
                            if (titleButton.iconClass) {
                              img.className = titleButton.iconClass;
                            }
                            img.setAttribute("data-tooltip", titleButton.title);
                            img.addEventListener("click", (event) => {
                              event.preventDefault();
                              event.stopPropagation();
                              titleButton.onClick.call(null);
                            });
                            if (titleButton.iconUrl) {
                              img.src = titleButton.iconUrl;
                            }
                            titleButtonContainer.insertBefore(img, lastChild);
                          });
                        }
                      }
                      (0, querySelectorOrFail.A)(__privateGet(this, _element6), ".inboxsdk__mole_view_content").appendChild(options2.el);
                    }
                    show() {
                      const moleParent = __privateGet(_GmailMoleViewDriver, _moleParent);
                      if (moleParent) {
                        __privateGet(this, _doShow).call(this, moleParent);
                        return;
                      }
                      const moleParentReadyEvent = __privateGet(_GmailMoleViewDriver, _moleParentReadyEvent).takeUntilBy(__privateGet(this, _stopper5)).onValue(__privateGet(this, _doShow));
                      kefir_esm.fromPromise(gmail_element_getter.A.waitForGmailModeToSettle()).flatMap(() => {
                        return __privateGet(this, _driver20).delayToTimeAfterReady(5e3);
                      }).takeUntilBy(moleParentReadyEvent).takeUntilBy(__privateGet(this, _stopper5)).onValue(async () => {
                        __privateGet(this, _driver20).getLogger().eventSdkActive("mole parent force load");
                        try {
                          document.body.classList.add(mole_view_module.iy);
                          const gmailComposeView = await __privateGet(this, _driver20).openNewComposeViewDriver();
                          gmailComposeView.discard();
                        } finally {
                          document.body.classList.remove(mole_view_module.iy);
                        }
                      });
                    }
                    setMinimized(minimized) {
                      if (minimized) {
                        __privateGet(this, _element6).classList.add("inboxsdk__minimized");
                        __privateGet(this, _eventStream5).emit({
                          eventName: "minimize"
                        });
                      } else {
                        __privateGet(this, _element6).classList.remove("inboxsdk__minimized");
                        __privateMethod(this, _GmailMoleViewDriver_instances, moveToRightmostPosition_fn).call(this);
                        __privateGet(this, _eventStream5).emit({
                          eventName: "restore"
                        });
                      }
                    }
                    getMinimized() {
                      return __privateGet(this, _element6).classList.contains("inboxsdk__minimized");
                    }
                    setTitle(text) {
                      const titleElement = __privateGet(this, _element6).querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");
                      if (titleElement) {
                        titleElement.textContent = text;
                      }
                    }
                    getEventStream() {
                      return __privateGet(this, _eventStream5);
                    }
                    destroy() {
                      __privateGet(this, _element6).remove();
                      __privateGet(this, _eventStream5).end();
                      __privateGet(this, _stopper5).destroy();
                    }
                  };
                  _page2 = new WeakMap();
                  _moleParentReadyEvent = new WeakMap();
                  _moleParent = new WeakMap();
                  __4 = new WeakMap();
                  _GmailMoleViewDriver_static = new WeakSet();
                  maybeMoveMole_fn = function(mole) {
                    const rightSpacer = mole.parentElement?.lastElementChild;
                    if (!(rightSpacer instanceof HTMLElement)) {
                      return;
                    }
                    rightSpacer.insertAdjacentElement("beforebegin", mole);
                  };
                  _driver20 = new WeakMap();
                  _eventStream5 = new WeakMap();
                  _stopper5 = new WeakMap();
                  _element6 = new WeakMap();
                  _doShow = new WeakMap();
                  _GmailMoleViewDriver_instances = new WeakSet();
                  /**
                   * If the mole is off the left edge of the screen, then move it to the
                   * right.
                   */
                  moveToRightmostPosition_fn = function() {
                    if (__privateGet(this, _element6).getBoundingClientRect().left >= 0) {
                      return;
                    }
                    const rightSpacer = __privateGet(this, _element6).parentElement?.lastElementChild;
                    if (!(rightSpacer instanceof HTMLElement)) {
                      return;
                    }
                    rightSpacer.insertAdjacentElement("beforebegin", __privateGet(this, _element6));
                  };
                  setTitleEl_fn = function(el) {
                    const container = __privateGet(this, _element6).querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");
                    if (container) {
                      container.textContent = "";
                      container.appendChild(el);
                    }
                  };
                  setMinimizedTitleEl_fn = function(el) {
                    const container = __privateGet(this, _element6).querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_minimized");
                    if (container) {
                      __privateGet(this, _element6).classList.add("inboxsdk__mole_use_minimize_title");
                      container.textContent = "";
                      container.appendChild(el);
                    }
                  };
                  __privateAdd(_GmailMoleViewDriver, _GmailMoleViewDriver_static);
                  __privateAdd(_GmailMoleViewDriver, _page2);
                  __privateAdd(_GmailMoleViewDriver, _moleParentReadyEvent, kefir_bus_default()());
                  __privateAdd(_GmailMoleViewDriver, _moleParent);
                  __privateAdd(_GmailMoleViewDriver, __4, (() => {
                    __privateSet(_GmailMoleViewDriver, _page2, new (page_parser_tree_js_default())(document, {
                      logError(err, el) {
                        const details = {
                          el,
                          html: el ? (0, censorHTMLtree.A)(el) : null
                        };
                        if (err.message.includes("found element missed by watcher") || err.message.includes("watcher found element already found by finder")) {
                          return;
                        }
                        console.log(err, details);
                      },
                      tags: {
                        mole: {
                          ownedBy: ["moleParent"]
                        }
                      },
                      watchers: [{
                        tag: "mole",
                        selectors: [`${".dw .nH > .nH > .no"} > *:not([style*="order: 0;"], [style*="order: 2147483647;"], .aJl)`],
                        sources: ["moleParent"]
                      }, {
                        tag: "moleParent",
                        selectors: [".dw .nH > .nH > .no"],
                        sources: [null]
                      }],
                      finders: {
                        ["moleParent"]: {
                          fn: (root) => [root.querySelector(".dw .nH > .nH > .no")].filter(isNotNil.A),
                          interval(elementCount, timeRunning) {
                            return timeRunning <= 15e3 && elementCount === 0 ? 100 : 5e3;
                          }
                        },
                        ["mole"]: {
                          fn: (root) => root.querySelectorAll(`${".dw .nH > .nH > .no"} > *:not([style*="order: 0;"], [style*="order: 2147483647;"], .aJl)`),
                          interval(elementCount, timeRunning) {
                            return timeRunning <= 5e3 && elementCount === 0 ? 100 : 5e3;
                          }
                        }
                      }
                    }));
                    const moleParent = __privateGet(_GmailMoleViewDriver, _page2).tree.getAllByTag("moleParent");
                    const moleParentLiveSet = moleParent.subscribe((changes) => {
                      for (const change of changes) {
                        switch (change.type) {
                          case "add": {
                            const el = change.value.getValue();
                            __privateSet(_GmailMoleViewDriver, _moleParent, el);
                            __privateGet(_GmailMoleViewDriver, _moleParentReadyEvent).emit(el);
                            moleParentLiveSet.unsubscribe();
                          }
                        }
                      }
                    });
                    const moles = __privateGet(_GmailMoleViewDriver, _page2).tree.getAllByTag("mole");
                    moles.subscribe((changes) => {
                      var _a;
                      for (const change of changes) {
                        switch (change.type) {
                          case "add": {
                            const el = change.value.getValue();
                            if (el.matches(`${`${".dw .nH > .nH > .no"} > *:not([style*="order: 0;"], [style*="order: 2147483647;"], .aJl)`}.nn.nH`)) {
                              __privateMethod(_a = _GmailMoleViewDriver, _GmailMoleViewDriver_static, maybeMoveMole_fn).call(_a, el);
                            }
                            break;
                          }
                        }
                      }
                    });
                  })());
                  let GmailMoleViewDriver = _GmailMoleViewDriver;
                  const gmail_mole_view_driver = GmailMoleViewDriver;
                  function getHTMLString(options2) {
                    const originalView = !is_compose_titlebar_light_color();
                    return `
    <div class="inboxsdk__mole_view_inner ${originalView ? "inboxsdk__original_view" : ""}">
      ${getTitleHTMLString(options2)}
      <div class="inboxsdk__mole_view_content ${originalView ? "inboxsdk__original_view" : ""}"></div>
    </div>
  `;
                  }
                  function getTitleHTMLString(options2) {
                    if (options2.chrome === false) {
                      return "";
                    } else {
                      const originalView = !is_compose_titlebar_light_color();
                      return `
      <div class="inboxsdk__mole_view_titlebar${originalView ? " inboxsdk__original_view" : ""}">
        <div class="inboxsdk__mole_title_buttons${originalView ? " inboxsdk__original_view" : ""}">
          <img class="Hl" src="images/cleardot.gif" alt="Minimize" aria-label="Minimize" data-tooltip-delay="800" data-tooltip="Minimize"><img class="Hk" id=":rp" src="images/cleardot.gif" alt="Minimize" aria-label="Maximize" data-tooltip-delay="800" data-tooltip="Maximize"><!--<img class="Hq aUG" src="images/cleardot.gif" alt="Pop-out" aria-label="Full-screen (Shift for Pop-out)" data-tooltip-delay="800" data-tooltip="Full-screen (Shift for Pop-out)">--><img class="Ha" src="images/cleardot.gif" alt="Close" aria-label="Close" data-tooltip-delay="800" data-tooltip="Close">
        </div>
        <h2 class="inboxsdk__mole_default"></h2>
        <h2 class="inboxsdk__mole_minimized"></h2>
      </div>`;
                    }
                  }
                  ;
                  class InboxBackdrop {
                    constructor() {
                      __publicField(this, "_preAutoCloseStream", kefir_bus_default()());
                      __publicField(this, "_stopper", js_default()());
                      let zIndex2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 500;
                      let target = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : document.body;
                      const el = this._el = document.createElement("div");
                      el.className = "inboxsdk__inbox_backdrop";
                      el.style.zIndex = String(zIndex2);
                      kefir_esm.fromEvents(el, "click").filter((event) => {
                        let isCanceled = false;
                        const appEvent = {
                          type: "outsideInteraction",
                          cause: event,
                          cancel: () => {
                            isCanceled = true;
                          }
                        };
                        this._preAutoCloseStream.emit(appEvent);
                        return !isCanceled;
                      }).onValue(() => {
                        this.destroy();
                      });
                      if (!target) throw new Error("no target");
                      target.appendChild(el);
                      this._stopper.onValue(() => {
                        el.classList.remove("inboxsdk__active");
                        kefir_esm.fromEvents(el, "transitionend").merge(kefir_esm.later(200, void 0)).take(1).onValue(() => {
                          el.remove();
                        });
                      });
                      el.offsetHeight;
                      el.classList.add("inboxsdk__active");
                    }
                    getElement() {
                      return this._el;
                    }
                    getPreAutoCloseStream() {
                      return this._preAutoCloseStream;
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    destroy() {
                      this._preAutoCloseStream.end();
                      this._stopper.destroy();
                    }
                  }
                  const inbox_backdrop = InboxBackdrop;
                  ;
                  const TAKE_OVER_EVENT = "inboxSDKdrawerViewTakingOver";
                  const zIndex = 500;
                  class InboxDrawerView {
                    constructor(options2) {
                      __publicField(this, "_backdrop", null);
                      __publicField(this, "_closing", js_default()());
                      __publicField(this, "_closed", js_default()());
                      __publicField(this, "_composeChanges", kefir_bus_default()());
                      __publicField(this, "_preAutoCloseStream", kefir_bus_default()());
                      this._chrome = typeof options2.chrome === "boolean" ? options2.chrome : true;
                      let insertionTarget = document.body;
                      let composeRect = null;
                      const {
                        composeView,
                        closeWithCompose
                      } = options2;
                      if (composeView) {
                        const ret = this._setupComposeInsertionTarget(composeView, closeWithCompose);
                        insertionTarget = ret.insertionTarget;
                        composeRect = ret.composeRect;
                      }
                      this._setupElement(options2, insertionTarget);
                      let composeNeedToMoveLeft = 0;
                      if (composeView) {
                        if (!composeRect) throw new Error("should not happen");
                        composeNeedToMoveLeft = this._setupComposeAnimation(composeView, composeRect, true);
                      }
                      this._el.offsetHeight;
                      this._el.classList.add("inboxsdk__active");
                      this._slideAnimationDone = kefir_esm.fromEvents(this._el, "transitionend").take(1).takeUntilBy(this._closing).map(() => null);
                      if (composeView) {
                        this._positionCompose(composeView, composeNeedToMoveLeft);
                      }
                      (0, from_event_target_capture.A)(document, "keydown").filter((e) => e.key ? e.key === "Escape" : e.which === 27).takeUntilBy(this._closing).onValue((e) => {
                        const origPreventDefault = e.preventDefault;
                        e.preventDefault = function() {
                          this._defaultPreventedInContext = true;
                          return origPreventDefault.call(this);
                        };
                      });
                      kefir_esm.fromEvents(document, "keydown").filter((e) => e.key ? e.key === "Escape" : e.which === 27).filter((e) => !e._defaultPreventedInContext).filter((event) => {
                        let isCanceled = false;
                        const appEvent = {
                          type: "escape",
                          cause: event,
                          cancel: () => {
                            isCanceled = true;
                          }
                        };
                        this._preAutoCloseStream.emit(appEvent);
                        return !isCanceled;
                      }).takeUntilBy(this._closing).onValue(() => {
                        this.close();
                      });
                    }
                    _setupComposeInsertionTarget(composeView, closeWithCompose) {
                      if (composeView.isMinimized()) {
                        throw new Error("Can't attach DrawerView to minimized ComposeView");
                      }
                      if (composeView.isInlineReplyForm()) {
                        throw new Error("Can't attach DrawerView to inline ComposeView");
                      }
                      if (composeView.isFullscreen()) {
                        composeView.setFullscreen(false);
                      }
                      const closeEvents = [kefir_esm.fromEvents(composeView, "restored"), kefir_esm.later(10, void 0).flatMap(() => kefir_esm.fromEvents(composeView, "fullscreenChanged"))];
                      if (closeWithCompose) {
                        closeEvents.push(kefir_esm.fromEvents(composeView, "destroy"), kefir_esm.fromEvents(composeView, "minimized"));
                      }
                      kefir_esm.merge(closeEvents).takeUntilBy(this._closing.merge(this._composeChanges)).onValue(() => this.close());
                      const composeEl = composeView.getElement();
                      const composeRect = composeEl.getBoundingClientRect();
                      const composeOffsetParent = composeEl.offsetParent;
                      if (!(composeOffsetParent instanceof HTMLElement)) throw new Error("should not happen");
                      const insertionTarget = findParent(composeOffsetParent, (el) => window.getComputedStyle(el).getPropertyValue("z-index") !== "auto" && el.getBoundingClientRect().left === 0) || document.body;
                      composeEl.dispatchEvent(new CustomEvent(TAKE_OVER_EVENT, {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      composeOffsetParent.dispatchEvent(new CustomEvent(TAKE_OVER_EVENT, {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      insertionTarget.dispatchEvent(new CustomEvent(TAKE_OVER_EVENT, {
                        bubbles: false,
                        cancelable: false,
                        detail: null
                      }));
                      insertionTarget.classList.add("inboxsdk__drawers_in_use");
                      insertionTarget.style.zIndex = String(zIndex);
                      if (!composeOffsetParent.hasAttribute("data-drawer-old-zindex")) {
                        composeOffsetParent.setAttribute("data-drawer-old-zindex", composeOffsetParent.style.zIndex);
                      }
                      composeOffsetParent.style.zIndex = String(zIndex + 2);
                      this._closed.takeUntilBy(kefir_esm.fromEvents(insertionTarget, TAKE_OVER_EVENT)).onValue(() => {
                        insertionTarget.style.zIndex = "";
                      });
                      this._closed.merge(this._composeChanges).takeUntilBy(kefir_esm.fromEvents(composeOffsetParent, TAKE_OVER_EVENT)).onValue(() => {
                        composeOffsetParent.style.zIndex = composeOffsetParent.getAttribute("data-drawer-old-zindex") || "";
                        composeOffsetParent.removeAttribute("data-drawer-old-zindex");
                      });
                      return {
                        composeRect,
                        insertionTarget
                      };
                    }
                    _setupElement(options2, insertionTarget) {
                      const backdrop = this._backdrop = new inbox_backdrop(zIndex, insertionTarget);
                      this._preAutoCloseStream.plug(backdrop.getPreAutoCloseStream());
                      backdrop.getStopper().takeUntilBy(this._closing).onValue(() => {
                        this.close();
                      });
                      this._containerEl = document.createElement("div");
                      this._containerEl.className = "inboxsdk__drawer_view_container";
                      this._containerEl.style.zIndex = String(zIndex + 1);
                      this._el = document.createElement("div");
                      this._el.setAttribute("role", "dialog");
                      this._el.tabIndex = 0;
                      this._el.className = "inboxsdk__drawer_view";
                      if (options2.matchSidebarContentPanelWidth) {
                        this._el.classList.add("inboxsdk__match_sidebar_content_panel_width");
                      }
                      this._containerEl.appendChild(this._el);
                      if (this._chrome) {
                        const titleBar = document.createElement("div");
                        titleBar.className = "inboxsdk__drawer_title_bar";
                        const closeButton = document.createElement("button");
                        closeButton.type = "button";
                        closeButton.title = "Close";
                        closeButton.className = "inboxsdk__close_button";
                        closeButton.addEventListener("click", () => {
                          this.close();
                        });
                        titleBar.appendChild(closeButton);
                        const title = document.createElement("div");
                        title.className = "inboxsdk__drawer_title";
                        title.setAttribute("role", "heading");
                        title.textContent = options2.title || "";
                        titleBar.appendChild(title);
                        this._el.appendChild(titleBar);
                      }
                      this._el.appendChild(options2.el);
                      insertionTarget.appendChild(this._containerEl);
                      this._closing.onValue(() => {
                        if (this._backdrop) this._backdrop.destroy();
                        this._el.classList.remove("inboxsdk__active");
                        kefir_esm.fromEvents(this._el, "transitionend").merge(kefir_esm.later(200, void 0)).take(1).onValue(() => {
                          this._closed.destroy();
                          this._containerEl.remove();
                        });
                      });
                    }
                    _setupComposeAnimation(composeView, composeRect, forceLayout) {
                      const composeEl = composeView.getElement();
                      const parentEl = composeEl.parentElement;
                      const drawerRect = this._el.getBoundingClientRect();
                      const margin = 24;
                      const preexistingLeftAdjustment = parseInt(parentEl.style.left) || 0;
                      const composeNeedToMoveLeft = composeRect.right - preexistingLeftAdjustment - (window.innerWidth - drawerRect.width - margin);
                      if (composeNeedToMoveLeft > 0) {
                        parentEl.style.position = "relative";
                        parentEl.style.transition = "left 150ms cubic-bezier(.4,0,.2,1)";
                        parentEl.style.left = "0";
                        if (forceLayout) {
                          parentEl.offsetHeight;
                        }
                      }
                      return composeNeedToMoveLeft;
                    }
                    _positionCompose(composeView, composeNeedToMoveLeft) {
                      if (composeNeedToMoveLeft > 0) {
                        const composeEl = composeView.getElement();
                        const parentEl = composeEl.parentElement;
                        parentEl.style.left = `${-composeNeedToMoveLeft}px`;
                        this._closing.takeUntilBy(this._composeChanges).takeUntilBy(kefir_esm.fromEvents(composeEl, TAKE_OVER_EVENT)).onValue(() => {
                          parentEl.style.left = "0";
                        }).flatMap(
                          () => kefir_esm.fromEvents(parentEl, "transitionend").merge(kefir_esm.later(200, void 0))
                          // transition might not finish if element is hidden
                        ).merge(this._composeChanges).take(1).takeUntilBy(kefir_esm.fromEvents(composeEl, TAKE_OVER_EVENT)).onValue(() => {
                          parentEl.style.position = "";
                          parentEl.style.left = "";
                          parentEl.style.transition = "";
                        });
                      }
                    }
                    associateComposeView(composeView, closeWithCompose) {
                      this._composeChanges.emit(null);
                      const {
                        insertionTarget,
                        composeRect
                      } = this._setupComposeInsertionTarget(composeView, closeWithCompose);
                      if (this._backdrop) insertionTarget.appendChild(this._backdrop.getElement());
                      if (this._containerEl.parentElement !== insertionTarget) insertionTarget.appendChild(this._containerEl);
                      const composeNeedToMoveLeft = this._setupComposeAnimation(composeView, composeRect, false);
                      this._positionCompose(composeView, composeNeedToMoveLeft);
                    }
                    disassociateComposeView() {
                      this._composeChanges.emit(null);
                    }
                    getSlideAnimationDone() {
                      return this._slideAnimationDone;
                    }
                    getClosingStream() {
                      return this._closing;
                    }
                    getClosedStream() {
                      return this._closed;
                    }
                    getPreAutoCloseStream() {
                      return this._preAutoCloseStream;
                    }
                    close() {
                      this._closing.destroy();
                    }
                  }
                  const inbox_drawer_view = InboxDrawerView;
                  ;
                  class GmailRouteProcessor {
                    constructor() {
                      __publicField(this, "_routeNameToRouteIDMap", null);
                      __publicField(this, "_routeNameToRouteIDMaps", null);
                      __publicField(this, "_compatibleRouteIDMap", null);
                      __publicField(this, "NativeRouteIDs", router.Vi);
                      __publicField(this, "NativeListRouteIDs", router.Kc);
                      __publicField(this, "RouteTypes", router.Cs);
                      this._setupRouteNameToRouteIDMap();
                      this._setupCompatibleRouteIDMap();
                    }
                    isListRouteName(routeName) {
                      var routeID = this.getRouteID(routeName);
                      if (!routeID) {
                        return false;
                      }
                      return includes_default()(Object.values(router.Kc), routeID);
                    }
                    isSettingsRouteName(routeName) {
                      return this._routeNameToRouteIDMap[routeName] === this.NativeRouteIDs.SETTINGS;
                    }
                    isContactRouteName(routeName) {
                      return this._routeNameToRouteIDMap[routeName] === this.NativeRouteIDs.CONTACTS || this._routeNameToRouteIDMap[routeName] === this.NativeRouteIDs.CONTACT;
                    }
                    getRouteID(routeName) {
                      var routeID = this._routeNameToRouteIDMap[routeName];
                      return routeID ? routeID : null;
                    }
                    getRouteName(routeID) {
                      for (var key in this._routeNameToRouteIDMaps) {
                        if (this._routeNameToRouteIDMap[key] === routeID) {
                          return key;
                        }
                      }
                      return null;
                    }
                    isNativeRoute(routeName) {
                      return !!this._routeNameToRouteIDMap[routeName];
                    }
                    getCompatibleRouteID(routeID) {
                      return this._compatibleRouteIDMap[routeID] || routeID;
                    }
                    _setupRouteNameToRouteIDMap() {
                      this._routeNameToRouteIDMap = {
                        inbox: this.NativeRouteIDs.INBOX,
                        section_query: this.NativeRouteIDs.SEARCH,
                        all: this.NativeRouteIDs.ALL_MAIL,
                        imp: this.NativeRouteIDs.IMPORTANT,
                        contacts: this.NativeRouteIDs.CONTACTS,
                        contact: this.NativeRouteIDs.CONTACT,
                        sent: this.NativeRouteIDs.SENT,
                        starred: this.NativeRouteIDs.STARRED,
                        snoozed: this.NativeRouteIDs.SNOOZED,
                        drafts: this.NativeRouteIDs.DRAFTS,
                        label: this.NativeRouteIDs.LABEL,
                        category: this.NativeRouteIDs.LABEL,
                        search: this.NativeRouteIDs.SEARCH,
                        "advanced-search": this.NativeRouteIDs.SEARCH,
                        trash: this.NativeRouteIDs.TRASH,
                        spam: this.NativeRouteIDs.SPAM,
                        apps: this.NativeRouteIDs.SEARCH,
                        circle: this.NativeRouteIDs.LABEL,
                        settings: this.NativeRouteIDs.SETTINGS,
                        chats: this.NativeRouteIDs.CHATS,
                        // new Gmail stuff
                        scheduled: this.NativeRouteIDs.SCHEDULED,
                        // these are added as part of new gmail redesign -- FEB 2023
                        chat: this.NativeRouteIDs.CHAT_WELCOME,
                        rooms: this.NativeRouteIDs.SPACES_WELCOME,
                        calls: this.NativeRouteIDs.MEET
                      };
                    }
                    _setupCompatibleRouteIDMap() {
                      this._compatibleRouteIDMap = {};
                      this._compatibleRouteIDMap[this.NativeRouteIDs.INBOX] = "inbox/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.ALL_MAIL] = "all/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.SENT] = "sent/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.STARRED] = "starred/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.DRAFTS] = "drafts/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.LABEL] = "label/:labelName/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.TRASH] = "trash/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.SPAM] = "spam/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.IMPORTANT] = "imp/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.SEARCH] = "search/:query/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.THREAD] = this.NativeRouteIDs.THREAD;
                      this._compatibleRouteIDMap[this.NativeRouteIDs.CHATS] = "chats/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.CHAT] = this.NativeRouteIDs.CHAT;
                      this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACTS] = "contacts/p:page";
                      this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACT] = this.NativeRouteIDs.CONTACT;
                      this._compatibleRouteIDMap[this.NativeRouteIDs.SETTINGS] = this.NativeRouteIDs.SETTINGS;
                    }
                  }
                  ;
                  class KeyboardShortcutHelpModifier {
                    constructor() {
                      this._appId = null;
                      this._appName = null;
                      this._appIconUrl = null;
                      this._stopper = js_default()();
                      this._shortcuts = /* @__PURE__ */ new Set();
                      this._monitorKeyboardHelp();
                    }
                    destroy() {
                      this._stopper.destroy();
                      this._shortcuts.clear();
                    }
                    set(keyboardShortcutHandle, appId, appName, appIconUrl) {
                      this._initializeAppValues(appId, appName, appIconUrl);
                      this._shortcuts.add(keyboardShortcutHandle);
                    }
                    delete(keyboardShortcutHandle) {
                      this._shortcuts.delete(keyboardShortcutHandle);
                    }
                    _initializeAppValues(appId, appName, appIconUrl) {
                      if (!this._appId) {
                        this._appId = appId;
                      }
                      if (!this._appName) {
                        this._appName = appName;
                      }
                      if (!this._appIconUrl) {
                        this._appIconUrl = appIconUrl;
                      }
                    }
                    _monitorKeyboardHelp() {
                      (0, make_element_child_stream.A)(document.body).map((event) => event.el).filter((node) => node && node.classList && node.classList.contains("wa")).flatMap((node) => (0, make_mutation_observer_chunked_stream.A)(node, {
                        attributes: true,
                        attributeFilter: ["class"]
                      }).filter(() => !node.classList.contains("aou")).toProperty(() => null).map(() => node)).takeUntilBy(this._stopper).onValue((node) => this._renderHelp(node));
                    }
                    _renderHelp(node) {
                      if (this._shortcuts.size === 0) {
                        return;
                      }
                      this._shortcuts.keys();
                      var header = this._renderHeader();
                      var table = this._renderTable();
                      var bodies = table.querySelectorAll("tbody tbody");
                      var index = 0;
                      this._shortcuts.forEach((keyboardShortcutHandle) => {
                        this._renderShortcut(bodies[index % 2], keyboardShortcutHandle);
                        index++;
                      });
                      const firstHeader = (0, querySelectorOrFail.A)(node, ".aov");
                      const parent = firstHeader.parentElement;
                      if (!parent) throw new Error("Could not find parent");
                      parent.insertBefore(header, firstHeader);
                      parent.insertBefore(table, firstHeader);
                    }
                    _renderHeader() {
                      const header = document.createElement("div");
                      header.setAttribute("class", "aov  aox");
                      header.innerHTML = ['<div class="aow">', '<span class="inboxsdk__shortcutHelp_title">', escape_default()(this._appName || this._appId) + " keyboard shortcuts", "</span>", "</div>"].join("");
                      if (this._appIconUrl) {
                        const img = document.createElement("img");
                        if (this._appIconUrl) {
                          img.src = this._appIconUrl;
                        }
                        img.setAttribute("class", "inboxsdk__icon");
                        const title = (0, querySelectorOrFail.A)(header, ".inboxsdk__shortcutHelp_title");
                        title.insertBefore(img, title.firstChild);
                      }
                      return header;
                    }
                    _renderTable() {
                      var table = document.createElement("table");
                      table.setAttribute("cellpadding", "0");
                      table.setAttribute("class", "cf wd inboxsdk__shortcutHelp_table");
                      table.innerHTML = ["<tbody>", "<tr>", '<td class="Dn">', '<table cellpadding="0" class="cf">', "<tbody>", "<tr><th>&nbsp;</th><th>&nbsp;</th></tr>", "</tbody>", "</table>", "</td>", '<td class="Dn">', '<table cellpadding="0" class="cf">', "<tbody>", "<tr><th>&nbsp;</th><th>&nbsp;</th></tr>", "</tbody>", "</table>", "</td>", "</tr", "</tbody>"].join("");
                      return table;
                    }
                    _renderShortcut(tableBody, keyboardShortcutHandle) {
                      var shortcutRow = document.createElement("tr");
                      shortcutRow.innerHTML = ['<td class="wg Dn"> ', _getShortcutHTML(keyboardShortcutHandle.chord), "</td>", '<td class="we Dn"> ', escape_default()(keyboardShortcutHandle.description || ""), "</td>"].join("");
                      tableBody.appendChild(shortcutRow);
                    }
                  }
                  function _getShortcutHTML(chord) {
                    const retArray = [];
                    const parts = chord.split(/[\s+]/g);
                    const separators = chord.match(/[\s+]/g);
                    for (var ii = 0; ii < parts.length; ii++) {
                      retArray.push('<span class="wh">' + escape_default()(_getAngledBracket(parts[ii])) + "</span>");
                      if (separators && separators[ii]) {
                        retArray.push(_getSeparatorHTML(separators[ii]));
                      }
                    }
                    retArray.push(" :");
                    return retArray.join("");
                  }
                  function _getAngledBracket(chordChar) {
                    switch (chordChar.toLowerCase()) {
                      case "shift":
                        return "<Shift>";
                      case "ctrl":
                        return "<Ctrl>";
                      case "alt":
                        return "<Alt>";
                      case "meta":
                      case "command":
                        return "<\u2318>";
                      case "mod":
                        return /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? "<\u2318>" : "<Ctrl>";
                      default:
                        return chordChar;
                    }
                  }
                  function _getSeparatorHTML(separator) {
                    switch (separator) {
                      case " ":
                        return '<span class="wb">then</span> ';
                      case "+":
                        return ' <span class="wb">+</span> ';
                      default:
                        return "";
                    }
                  }
                  var getSyncThreadsForSearch = __webpack_require__2(6743);
                  var dist = __webpack_require__2(6408);
                  ;
                  var Buffer2 = __webpack_require__2(2313)["Buffer"];
                  const B64_ALPHABET = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
                  const GMAIL_ALPHABET = "BCDFGHJKLMNPQRSTVWXZbcdfghjklmnpqrstvwxz";
                  function encodeDraftUrlId(syncThreadId, syncMessageId) {
                    const raw = `${syncThreadId.replace(/^thread-/, "")}+${syncMessageId}`;
                    const b64 = Buffer2.from(raw).toString("base64").replace(/=/g, "");
                    return (0, dist.convertBase)(b64, B64_ALPHABET, GMAIL_ALPHABET);
                  }
                  var getOriginalMessagePage = __webpack_require__2(2903);
                  var html_to_text = __webpack_require__2(6305);
                  ;
                  async function getRfcMessageIdForGmailMessageId(driver, gmailMessageId) {
                    const text = await (0, getOriginalMessagePage.A)(driver, {
                      oldGmailMessageID: gmailMessageId
                    });
                    const match = text.match(/^Message-ID:\s+(\S+)\s*$/im);
                    if (!match) {
                      throw new Error("Failed to find rfc id for gmail thread id. Message may not exist in user's account.");
                    }
                    return (0, html_to_text.A)(match[1]);
                  }
                  ;
                  async function openDraftByMessageID(driver, messageID) {
                    const rfcMessageID = await getRfcMessageIdForGmailMessageId(driver, messageID);
                    const {
                      threads
                    } = await (0, getSyncThreadsForSearch.A)(driver, "rfc822msgid:" + rfcMessageID);
                    if (threads.length === 0) {
                      throw new Error("Failed to get sync message id");
                    }
                    const thread = threads[0];
                    const syncMessageData = thread.extraMetaData.syncMessageData.find((m) => m.oldMessageID === messageID);
                    if (!syncMessageData) {
                      throw new Error("Failed to find syncMessageData");
                    }
                    const {
                      syncMessageID
                    } = syncMessageData;
                    const newHash = makeNewSyncHash(window.location.hash, thread.syncThreadID, syncMessageID);
                    window.location.hash = newHash;
                  }
                  function makeNewHash(oldHash, messageID) {
                    oldHash = "#" + oldHash.replace(/^#/, "");
                    const [pre, query] = oldHash.split("?");
                    const params = qs.parse(query);
                    if (params.compose) {
                      params.compose += "," + messageID;
                    } else {
                      params.compose = messageID;
                    }
                    return pre + "?" + qs.stringify(params);
                  }
                  function makeNewSyncHash(oldHash, syncThreadID, syncMessageID) {
                    oldHash = "#" + oldHash.replace(/^#/, "");
                    const [pre, query] = oldHash.split("?");
                    const params = querystring_es3.parse(query);
                    params.compose = encodeDraftUrlId(syncThreadID, syncMessageID);
                    return pre + "?" + querystring_es3.stringify(params);
                  }
                  var uniqBy = __webpack_require__2(8496);
                  var uniqBy_default = /* @__PURE__ */ __webpack_require__2.n(uniqBy);
                  ;
                  class UserInfo {
                    constructor(driver) {
                      __privateAdd(this, _userEmail);
                      __privateSet(this, _userEmail, driver.getUserEmailAddress());
                    }
                    /** @deprecated */
                    getUserName() {
                      const nameEl = document.querySelector("div.gb_w div.gb_B .gb_D");
                      if (nameEl) {
                        return nameEl.textContent;
                      }
                      const contact = find_default()(this.getAccountSwitcherContactList(), (contact2) => contact2.emailAddress === __privateGet(this, _userEmail));
                      if (contact && contact.name != null) {
                        return contact.name;
                      }
                      return __privateGet(this, _userEmail);
                    }
                    /** @deprecated */
                    getAccountSwitcherContactList() {
                      const main = Array.from(document.querySelectorAll('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."]')).slice(0, 1).map((btn) => {
                        const btnParent = btn.parentElement;
                        const nameEl = btnParent.children[0];
                        const emailAddressEl = btnParent.children[1];
                        if (!nameEl || !emailAddressEl) return null;
                        return {
                          name: nameEl.textContent,
                          emailAddress: emailAddressEl.textContent
                        };
                      }).filter(isNotNil.A);
                      const extras = Array.from(document.querySelectorAll('[role=banner] div[aria-label] div > a[target="_blank"] > img + div')).map((el) => {
                        const match = el.children[1].textContent.match(/\S+/);
                        if (!match) {
                          throw new Error("Failed to match");
                        }
                        return {
                          name: el.children[0].textContent,
                          emailAddress: match[0]
                        };
                      });
                      return uniqBy_default()(main.concat(extras), (x) => x.emailAddress.toLowerCase());
                    }
                  }
                  _userEmail = new WeakMap();
                  ;
                  const gmail_butter_bar_driver_elements = (0, stream_wait_for.A)(() => document.body.querySelector('div.b8[role="alert"]')).map((noticeContainer) => {
                    const googleNotice = (0, querySelectorOrFail.A)(noticeContainer, ".vh:not(.inboxsdk__butterbar)");
                    let sdkNotice = noticeContainer.querySelector(".vh.inboxsdk__butterbar");
                    if (!sdkNotice) {
                      sdkNotice = document.createElement("div");
                      sdkNotice.classList.add("vh", "inboxsdk__butterbar");
                      sdkNotice.style.display = "none";
                      const textAndButtonsContainer = document.createElement("span");
                      textAndButtonsContainer.classList.add("aT");
                      const textContainer = document.createElement("span");
                      textContainer.classList.add("inboxsdk__butterbar-text", "bAq");
                      const buttonsContainer = document.createElement("span");
                      buttonsContainer.classList.add("inboxsdk__butterbar-buttons", "bAo");
                      buttonsContainer.innerHTML = "&nbsp;&nbsp;";
                      const noticeCloseButton = document.createElement("div");
                      noticeCloseButton.classList.add("inboxsdk__butterbar-close", "bBe");
                      noticeCloseButton.innerHTML = '<div class="bBf"></div>';
                      noticeCloseButton.setAttribute("role", "button");
                      noticeCloseButton.tabIndex = 0;
                      textAndButtonsContainer.appendChild(textContainer);
                      textAndButtonsContainer.appendChild(buttonsContainer);
                      sdkNotice.appendChild(textAndButtonsContainer);
                      sdkNotice.appendChild(noticeCloseButton);
                      const parentNode = googleNotice.parentNode;
                      if (!parentNode) {
                        throw new Error("parentNode not found");
                      }
                      parentNode.insertBefore(sdkNotice, googleNotice.nextSibling);
                    }
                    return {
                      noticeContainer,
                      googleNotice,
                      sdkNotice
                    };
                  }).toProperty();
                  const googleNoticeMutationChunks = gmail_butter_bar_driver_elements.flatMapLatest((_ref) => {
                    let {
                      googleNotice
                    } = _ref;
                    return (0, make_mutation_observer_chunked_stream.A)(googleNotice, {
                      childList: true
                    });
                  });
                  const googleAddedNotice = googleNoticeMutationChunks.filter((mutations) => mutations.some((m) => m.addedNodes.length > 0));
                  const googleRemovedNotice = googleNoticeMutationChunks.filter((mutations) => !mutations.some((m) => m.addedNodes.length > 0));
                  const sdkRemovedNotice = gmail_butter_bar_driver_elements.flatMapLatest((_ref2) => {
                    let {
                      sdkNotice
                    } = _ref2;
                    return (0, make_mutation_observer_chunked_stream.A)(sdkNotice, {
                      attributes: true,
                      attributeFilter: ["data-inboxsdk-id"]
                    }).map(() => sdkNotice.getAttribute("data-inboxsdk-id"));
                  }).filter((id) => id == null);
                  const noticeAvailableStream = kefir_esm.merge([googleRemovedNotice, sdkRemovedNotice]);
                  function hideMessage(noticeContainer, googleNotice, sdkNotice) {
                    googleNotice.style.display = "";
                    noticeContainer.style.top = "-10000px";
                    noticeContainer.style.position = "relative";
                    noticeContainer.classList.remove("bAp");
                    sdkNotice.style.display = "none";
                    sdkNotice.removeAttribute("data-inboxsdk-id");
                  }
                  class GmailButterBarDriver {
                    constructor() {
                      kefir_esm.combine([gmail_butter_bar_driver_elements, googleAddedNotice]).onValue((_ref3) => {
                        let [{
                          googleNotice,
                          sdkNotice
                        }] = _ref3;
                        googleNotice.style.display = "";
                        sdkNotice.style.display = "none";
                        sdkNotice.setAttribute("data-inboxsdk-id", "gmail");
                      });
                      noticeAvailableStream.onValue(() => {
                      });
                    }
                    getNoticeAvailableStream() {
                      return noticeAvailableStream;
                    }
                    getSharedMessageQueue() {
                      const attr = document.head.getAttribute("data-inboxsdk-butterbar-queue");
                      return attr ? JSON.parse(attr) : [];
                    }
                    setSharedMessageQueue(queue) {
                      const attr = JSON.stringify(queue);
                      document.head.setAttribute("data-inboxsdk-butterbar-queue", attr);
                    }
                    // Immediately displays the message, overriding anything else on the screen.
                    // Priority and queuing logic is handled by butter-bar.js above this.
                    showMessage(rawOptions) {
                      const instanceId = Date.now() + "-" + Math.random();
                      const destroy = () => {
                        gmail_butter_bar_driver_elements.take(1).onValue((_ref4) => {
                          let {
                            noticeContainer,
                            googleNotice,
                            sdkNotice
                          } = _ref4;
                          if (sdkNotice.getAttribute("data-inboxsdk-id") === instanceId) {
                            if (rawOptions.className) {
                              sdkNotice.classList.remove(rawOptions.className);
                            }
                            hideMessage(noticeContainer, googleNotice, sdkNotice);
                          }
                        });
                      };
                      gmail_butter_bar_driver_elements.take(1).onValue((_ref5) => {
                        let {
                          noticeContainer,
                          googleNotice,
                          sdkNotice
                        } = _ref5;
                        noticeContainer.style.visibility = "visible";
                        noticeContainer.style.top = "";
                        noticeContainer.classList.add("bAp");
                        googleNotice.style.display = "none";
                        sdkNotice.className = googleNotice.className;
                        sdkNotice.classList.add("inboxsdk__butterbar");
                        const textContainer = (0, querySelectorOrFail.A)(sdkNotice, ".inboxsdk__butterbar-text");
                        while (textContainer.firstChild) {
                          textContainer.removeChild(textContainer.firstChild);
                        }
                        const buttonsContainer = (0, querySelectorOrFail.A)(sdkNotice, ".inboxsdk__butterbar-buttons");
                        while (buttonsContainer.firstChild) {
                          buttonsContainer.removeChild(buttonsContainer.firstChild);
                        }
                        if (rawOptions.html) {
                          textContainer.innerHTML = rawOptions.html;
                        } else if (rawOptions.el) {
                          textContainer.appendChild(rawOptions.el);
                        } else {
                          textContainer.textContent = rawOptions.text;
                        }
                        if (rawOptions.buttons) {
                          rawOptions.buttons.forEach((buttonDescriptor) => {
                            const button = document.createElement("span");
                            button.classList.add("ag", "a8k");
                            button.onclick = (e) => buttonDescriptor.onClick(e);
                            button.setAttribute("role", "button");
                            button.tabIndex = 0;
                            button.textContent = buttonDescriptor.title;
                            buttonsContainer.appendChild(button);
                          });
                        }
                        const closeButton = (0, querySelectorOrFail.A)(sdkNotice, ".inboxsdk__butterbar-close");
                        if (closeButton) {
                          kefir_esm.fromEvents(closeButton, "click").take(1).onValue(destroy);
                        }
                        if (rawOptions.className) {
                          sdkNotice.classList.add(rawOptions.className);
                        }
                        sdkNotice.style.display = "";
                        sdkNotice.setAttribute("data-inboxsdk-id", instanceId);
                      });
                      return {
                        destroy
                      };
                    }
                    hideGmailMessage() {
                      gmail_butter_bar_driver_elements.take(1).onValue((_ref6) => {
                        let {
                          noticeContainer,
                          googleNotice,
                          sdkNotice
                        } = _ref6;
                        if (sdkNotice.getAttribute("data-inboxsdk-id") === "gmail") {
                          hideMessage(noticeContainer, googleNotice, sdkNotice);
                        }
                      });
                    }
                  }
                  ;
                  let isTrackingValidity = false;
                  function temporaryTrackDownloadUrlValidity(driver) {
                    if (driver.getAppId() !== "sdk_streak_21e9788951" || !__webpack_require__2.g.fetch || isTrackingValidity) {
                      return;
                    }
                    isTrackingValidity = true;
                    driver.getAttachmentCardViewDriverStream().filter((cardView) => cardView.getAttachmentType() === "FILE").filter(() => Math.random() < 0.01).onValue(async (cardView) => {
                      const downloadLinkBefore = cardView._getDownloadLink();
                      let downloadUrl;
                      try {
                        downloadUrl = await cardView.getDownloadURL();
                      } catch (err) {
                        driver.getLogger().error(err, {
                          reason: "problem getting download url",
                          downloadLinkBefore,
                          downloadLinkAfter: cardView._getDownloadLink()
                        });
                        return;
                      }
                      if (!downloadUrl) {
                        driver.getLogger().error(new Error("no download url found"), {
                          downloadLinkBefore,
                          downloadLinkAfter: cardView._getDownloadLink()
                        });
                        return;
                      }
                      driver.getLogger().eventSdkPassive("testing.getDownloadURL success");
                    });
                  }
                  var getGmailThreadIdForRfcMessageId = __webpack_require__2(5187);
                  var gmailAjax = __webpack_require__2(5609);
                  var gmail_response_processor = __webpack_require__2(1433);
                  ;
                  async function getRfcMessageIdForGmailThreadId(driver, gmailThreadId) {
                    const messageIdQuery = {
                      ui: 2,
                      ik: driver.getPageCommunicator().getIkValue(),
                      view: "cv",
                      th: gmailThreadId,
                      nsc: 1,
                      mb: 0,
                      rt: "j",
                      search: "all"
                    };
                    const gmailMessageIdResponse = await (0, gmailAjax.A)({
                      method: "POST",
                      url: document.location.origin + document.location.pathname + "?" + querystring_es3.stringify(messageIdQuery),
                      canRetry: true
                    });
                    const extractedIds = gmail_response_processor.Yl(gmailMessageIdResponse.text);
                    if (Object.keys(extractedIds).length !== 1) {
                      throw new Error(`Expected to find 1 thread/message ID pair, but got ${Object.keys(extractedIds).length}`);
                    }
                    const gmailMessageId = extractedIds[gmailThreadId];
                    if (!gmailMessageId) {
                      throw new Error("Could not find a message ID for given thread ID");
                    }
                    return getRfcMessageIdForGmailMessageId(driver, gmailMessageId);
                  }
                  var getGmailMessageIdForSyncMessageId = __webpack_require__2(1158);
                  var bimapcache_js = __webpack_require__2(9844);
                  var bimapcache_js_default = /* @__PURE__ */ __webpack_require__2.n(bimapcache_js);
                  var get_draft_id_for_message_id = __webpack_require__2(876);
                  ;
                  class MoreDropdownButtonView extends GenericButtonView {
                    constructor() {
                      super(document.createElement("div"));
                      __publicField(this, "_isActive", false);
                      const element = this._element;
                      element.setAttribute("class", "nL aig");
                      const child = document.createElement("div");
                      child.setAttribute("class", "pM aj0");
                      element.appendChild(child);
                      element.addEventListener("click", () => {
                        this._isActive = true;
                      });
                      element.addEventListener("mouseenter", () => {
                        child.classList.add("aj1");
                      });
                      element.addEventListener("mouseleave", () => {
                        if (!this._isActive) {
                          child.classList.remove("aj1");
                        }
                      });
                    }
                    activate() {
                      this.getElement().children[0].classList.add("aj1");
                    }
                    deactivate() {
                      this.getElement().children[0].classList.remove("aj1");
                      this._isActive = false;
                    }
                  }
                  ;
                  class CreateParentAccessoryButtonView {
                    constructor() {
                      __publicField(this, "_element", document.createElement("div"));
                      __publicField(this, "_eventStream", kefir_bus_default()());
                      __publicField(this, "_stopper", js_default()());
                      this._setupElement();
                      this._setupEventStream();
                    }
                    addClass(_className) {
                    }
                    removeClass(_className) {
                    }
                    activate() {
                      const innerButtonElement = this._element.firstElementChild;
                      if (innerButtonElement) {
                        innerButtonElement.classList.add("aj1");
                      }
                    }
                    deactivate() {
                      const innerButtonElement = this._element.firstElementChild;
                      if (innerButtonElement) {
                        innerButtonElement.classList.remove("aj1");
                      }
                    }
                    destroy() {
                      this._element.remove();
                      this._eventStream.end();
                      this._stopper.destroy();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    setEnabled() {
                      throw new Error("not implemented");
                    }
                    update() {
                    }
                    _setupElement() {
                      this._element.setAttribute("class", "Yh inboxsdk__navItem_parent_accessory_button");
                      this._element.setAttribute("role", "button");
                      this._element.setAttribute("tabindex", "0");
                      this._element.setAttribute("type", "button");
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir_esm.fromEvents(this._element, "click");
                      clickEventStream.onValue((event) => {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.map((event) => ({
                        eventName: "click",
                        domEvent: event
                      })));
                    }
                  }
                  ;
                  class MoreParentAccessoryButtonView extends CreateParentAccessoryButtonView {
                    constructor() {
                      super();
                      this.getElement().style.backgroundImage = "url(https://www.gstatic.com/images/icons/material/system_gm/2x/more_vert_black_20dp.png)";
                    }
                  }
                  ;
                  class CreateAccessoryButtonView {
                    constructor() {
                      __publicField(this, "_element", document.createElement("div"));
                      __publicField(this, "_eventStream", kefir_bus_default()());
                      __publicField(this, "_stopper", js_default()());
                      this._setupElement();
                      this._setupEventStream();
                    }
                    addClass(_className) {
                    }
                    removeClass(_className) {
                    }
                    update() {
                    }
                    setEnabled() {
                      throw new Error("not implemented");
                    }
                    destroy() {
                      this._eventStream.end();
                      this._stopper.destroy();
                      this._element.remove();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    activate() {
                      const innerButtonElement = this._element.firstElementChild;
                      if (innerButtonElement) innerButtonElement.classList.add("aj1");
                    }
                    deactivate() {
                      const innerButtonElement = this._element.firstElementChild;
                      if (innerButtonElement) innerButtonElement.classList.remove("aj1");
                    }
                    _setupElement() {
                      this._element.setAttribute("class", "nL aig");
                      this._element.setAttribute("style", "left: 7px");
                      this._element.innerHTML = ['<div class="pM aRw" style="display: inline-flex; margin-left: 16px;" role="button">', '<div class="p6">', '<div class="p8">\u25BC</div>', "</div>", "</div>"].join("");
                    }
                    _setupEventStream() {
                      const clickEventStream = kefir_esm.fromEvents(this._element, "click");
                      clickEventStream.onValue((event) => {
                        event.stopPropagation();
                        event.preventDefault();
                      });
                      this._eventStream.plug(clickEventStream.map((event) => ({
                        eventName: "click",
                        domEvent: event
                      })));
                    }
                  }
                  var update_icon = __webpack_require__2(2621);
                  ;
                  function renderCustomIcon(containerElement, customIconElement, append, insertBeforeEl) {
                    let iconElementWrapper = containerElement.querySelector(".inboxsdk__button_icon");
                    if (!iconElementWrapper) {
                      iconElementWrapper = document.createElement("div");
                      iconElementWrapper.classList.add("inboxsdk__button_icon");
                      iconElementWrapper.appendChild(customIconElement);
                    }
                    if (append) {
                      containerElement.appendChild(iconElementWrapper);
                    } else {
                      containerElement.insertBefore(containerElement, insertBeforeEl || containerElement.firstElementChild);
                    }
                  }
                  ;
                  const NAV_ITEM_SECTION_CLASS_NAME = "inboxsdk__navItem_section";
                  const SECTION_LIST_CLASS_NAME = "inboxsdk__navItem_section_list";
                  const getSectionListSelector = (sectionKey) => `.${SECTION_LIST_CLASS_NAME}[data-section-key="${sectionKey}"]`;
                  const SECTION_ITEMS_CLASS_NAME = "inboxsdk__navItem_section_list_items";
                  const getSectionItemsSelector = (sectionKey) => `.${SECTION_ITEMS_CLASS_NAME}[data-section-key="${sectionKey}"]`;
                  function createSectionNavItemsContainer() {
                    let sectionKey = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "default";
                    let orderGroup = arguments.length > 1 ? arguments[1] : void 0;
                    let orderHint = arguments.length > 2 ? arguments[2] : void 0;
                    let insertionOrderHint = arguments.length > 3 ? arguments[3] : void 0;
                    const element = document.createElement("div");
                    element.classList.add("yJ", SECTION_LIST_CLASS_NAME);
                    element.dataset.sectionKey = sectionKey;
                    if (orderGroup) {
                      element.setAttribute("data-group-order-hint", orderGroup);
                    }
                    if (orderHint) {
                      element.setAttribute("data-order-hint", orderHint.toString());
                    }
                    if (insertionOrderHint) {
                      element.setAttribute("data-insertion-order-hint", insertionOrderHint.toString());
                    }
                    const ARIA_LABELLED_BY_ID = Math.random().toFixed(3);
                    element.innerHTML = auto_html_js_default()`
    <div class="ajl aib aZ6" aria-labelledby="${ARIA_LABELLED_BY_ID}">
      <h2 class="aWk" id="${ARIA_LABELLED_BY_ID}">Labels</h2>
      <div class="wT">
        <div class="n3">
          <div class="byl">
            <div class="TK ${SECTION_ITEMS_CLASS_NAME}" data-section-key="${sectionKey}"></div>
          </div>
        </div>
      </div>
    </div>
  `;
                    return element;
                  }
                  function getPanelSectionNavItemContainerElement(panelElement) {
                    return (0, querySelectorOrFail.A)(panelElement, panelNavItemsContainerSelector);
                  }
                  function getPanelNavItemContainerElement(panelElement) {
                    let sectionKey = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "default";
                    let orderGroup = arguments.length > 2 ? arguments[2] : void 0;
                    let orderHint = arguments.length > 3 ? arguments[3] : void 0;
                    let insertionOrderHint = arguments.length > 4 ? arguments[4] : void 0;
                    const sectionNavItemsContainer = panelElement.querySelector(getSectionListSelector(sectionKey));
                    if (!sectionNavItemsContainer) {
                      const container = createSectionNavItemsContainer(sectionKey, orderGroup, orderHint, insertionOrderHint);
                      const panelNavItemsContainer = panelElement.querySelector(panelNavItemsContainerSelector);
                      if (!panelNavItemsContainer) {
                        return panelElement;
                      }
                      (0, insert_element_in_order.A)(panelNavItemsContainer, container);
                    }
                    return (0, querySelectorOrFail.A)(panelElement, getSectionItemsSelector(sectionKey));
                  }
                  function getSectionNavItemsContainerElement(sectionElement) {
                    let sectionKey = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "default";
                    let orderGroup = arguments.length > 2 ? arguments[2] : void 0;
                    let orderHint = arguments.length > 3 ? arguments[3] : void 0;
                    let insertionOrderHint = arguments.length > 4 ? arguments[4] : void 0;
                    const parent = sectionElement.parentElement;
                    const sectionNavItemsContainer = parent.querySelector(getSectionListSelector(sectionKey));
                    if (!sectionNavItemsContainer) {
                      const container = createSectionNavItemsContainer(sectionKey, orderGroup, orderHint, insertionOrderHint);
                      (0, insert_element_in_order.A)(parent, container);
                    }
                    return (0, querySelectorOrFail.A)(parent, getSectionItemsSelector(sectionKey));
                  }
                  ;
                  let NUMBER_OF_GMAIL_NAV_ITEM_VIEWS_CREATED = 0;
                  const GMAIL_V2_LEFT_INDENTATION_PADDING = 12;
                  const _GmailNavItemView = class _GmailNavItemView {
                    constructor(driver, orderGroup, level) {
                      __privateAdd(this, _GmailNavItemView_instances);
                      __publicField(this, "_accessory", null);
                      __publicField(this, "_accessoryViewController", null);
                      __privateAdd(this, _eventStream6);
                      __publicField(this, "_expandoElement", null);
                      __publicField(this, "_iconSettings", {});
                      __publicField(this, "_isActive", false);
                      __publicField(this, "_isCollapsed", false);
                      __publicField(this, "_itemContainerElement", null);
                      __publicField(this, "_name", "");
                      __publicField(this, "_type", null);
                      __publicField(this, "_collapseKey", null);
                      __privateAdd(this, _sectionKey);
                      this._driver = driver;
                      __privateSet(this, _eventStream6, kefir_bus_default()());
                      this._level = level || 0;
                      this._navItemNumber = ++NUMBER_OF_GMAIL_NAV_ITEM_VIEWS_CREATED;
                      this._orderGroup = orderGroup;
                      this._isNewLeftNavParent = !gmail_element_getter.A.shouldAddNavItemsInline() && this._level === 1;
                      this._element = __privateMethod(this, _GmailNavItemView_instances, setupElement_fn4).call(this);
                    }
                    // delete after new left nav is fully launched, use this._level === 1 instead
                    get sectionKey() {
                      return __privateGet(this, _sectionKey);
                    }
                    addNavItem(orderGroup, navItemDescriptor) {
                      const nestedNavItemLevel = this._type === nav_item_types.GROUPER || this.isSection() ? this._level : this._level + 1;
                      const gmailNavItemView = new _GmailNavItemView(this._driver, orderGroup, nestedNavItemLevel);
                      gmailNavItemView.getEventStream().filter((event) => event.eventName === "orderChanged").onValue(() => this._addNavItemElement(gmailNavItemView));
                      gmailNavItemView.setNavItemDescriptor(navItemDescriptor);
                      if (this._isNewLeftNavParent && !gmailNavItemView.isSection()) {
                        this._createExpandoParent();
                      }
                      return gmailNavItemView;
                    }
                    destroy() {
                      this._element.remove();
                      if (__privateGet(this, _eventStream6)) __privateGet(this, _eventStream6).end();
                      __privateMethod(this, _GmailNavItemView_instances, cleanupDOMElements_fn).call(this);
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return __privateGet(this, _eventStream6);
                    }
                    getNavItemDescriptor() {
                      return this._navItemDescriptor;
                    }
                    getOrderGroup() {
                      return this._orderGroup;
                    }
                    getOrderHint() {
                      return this._orderHint;
                    }
                    getName() {
                      return this._name;
                    }
                    isCollapsed() {
                      return this._isCollapsed;
                    }
                    isSection() {
                      return this._type === nav_item_types.SECTION;
                    }
                    remove() {
                      this.destroy();
                    }
                    setActive(value) {
                      if (!this._element || this._type === nav_item_types.LINK || this._type === nav_item_types.MANAGE || this._isActive === value || this._isNewLeftNavParent || this.isSection()) {
                        return;
                      }
                      const toElement = (0, querySelectorOrFail.A)(this._element, ".TO");
                      if (value) {
                        this._element.classList.add("ain");
                        toElement.classList.add("nZ");
                        toElement.classList.add("aiq");
                      } else {
                        this._element.classList.remove("ain");
                        toElement.classList.remove("nZ");
                        toElement.classList.remove("aiq");
                      }
                      this._setHeights();
                      this._isActive = value;
                    }
                    setCollapsed(value) {
                      this._isCollapsed = value;
                      if (this._isCollapsible()) {
                        if (value) {
                          this._collapse();
                        } else {
                          this._expand();
                        }
                      }
                      try {
                        const storageKey = "inboxsdk__navitem_collapsed__" + this._collapseKey;
                        if (this._isCollapsed) {
                          localStorage.setItem(storageKey, "true");
                        } else {
                          localStorage.removeItem(storageKey);
                        }
                      } catch (e) {
                        console.error("Caught error", e);
                      }
                    }
                    setNavItemDescriptor(navItemDescriptorPropertyStream) {
                      navItemDescriptorPropertyStream.takeUntilBy(__privateGet(this, _eventStream6).filter(() => false).beforeEnd(() => null)).onValue((x) => __privateMethod(this, _GmailNavItemView_instances, updateValues_fn2).call(this, x));
                    }
                    toggleCollapse() {
                      this.setCollapsed(!this._isCollapsed);
                    }
                    // TODO this method is only called on orderChanged? is that right?
                    _addNavItemElement(gmailNavItemView) {
                      const itemContainerElement = this._getItemContainerElement();
                      const insertBeforeElement = getInsertBeforeElement(gmailNavItemView.getElement(), itemContainerElement.children, ["data-group-order-hint", "data-order-hint", "data-insertion-order-hint"]);
                      itemContainerElement.insertBefore(gmailNavItemView.getElement(), insertBeforeElement);
                      if (gmailNavItemView.isSection() || this.isSection()) {
                        return;
                      }
                      const indentationFactor = this._type === nav_item_types.GROUPER || this._isNewLeftNavParent ? this._level - 1 : this._level;
                      const element = gmailNavItemView.getElement();
                      if (!gmail_element_getter.A.shouldAddNavItemsInline()) {
                        (0, querySelectorOrFail.A)(element, ".TN").style.marginLeft = 6 * indentationFactor + "px";
                      } else {
                        (0, querySelectorOrFail.A)(element, ".TN").style.marginLeft = getLeftIndentationPaddingValue() * indentationFactor + "px";
                      }
                      this._setHeights();
                    }
                    _collapse() {
                      this._isCollapsed = true;
                      if (this._isNewLeftNavParent) {
                        this._element.classList.remove("Xr");
                      } else {
                        const expandoElement = this._expandoElement;
                        if (expandoElement) {
                          expandoElement.classList.remove("aih");
                          expandoElement.classList.add("aii");
                        } else if (this._type === nav_item_types.GROUPER) {
                          const navItemElement = this._element.firstElementChild;
                          if (navItemElement) navItemElement.classList.remove("air");
                        }
                        if (this._itemContainerElement) this._itemContainerElement.style.display = "none";
                        this._setHeights();
                      }
                      __privateGet(this, _eventStream6).emit({
                        eventName: "collapsed"
                      });
                    }
                    _createAccessory(accessoryDescriptor) {
                      switch (accessoryDescriptor.type) {
                        case "CREATE":
                          this._createCreateAccessory(accessoryDescriptor);
                          break;
                        case "ICON_BUTTON":
                          this._createIconButtonAccessory(accessoryDescriptor);
                          break;
                        case "DROPDOWN_BUTTON":
                          this._createDropdownButtonAccessory(accessoryDescriptor);
                          break;
                        case "SETTINGS_BUTTON":
                          this._driver.getLogger().deprecationWarning("SettingsButtonAccessoryDescriptor", "DropdownButtonAccessoryDescriptor");
                          this._createDropdownButtonAccessory({
                            ...accessoryDescriptor,
                            type: "DROPDOWN_BUTTON"
                          });
                          break;
                      }
                    }
                    _createCreateAccessory(accessoryDescriptor) {
                      this._createPlusButtonAccessory(accessoryDescriptor);
                    }
                    _createDropdownButtonAccessory(accessoryDescriptor) {
                      if (this._isNewLeftNavParent) {
                        const buttonOptions2 = {
                          ...accessoryDescriptor
                        };
                        buttonOptions2.buttonView = new MoreParentAccessoryButtonView();
                        buttonOptions2.dropdownViewDriverClass = gmail_dropdown_view.A;
                        buttonOptions2.dropdownPositionOptions = {
                          position: "right",
                          hAlign: "left",
                          vAlign: "top"
                        };
                        buttonOptions2.dropdownShowFunction = (_ref) => {
                          let {
                            dropdown
                          } = _ref;
                          dropdown.el.style.marginLeft = "24px";
                          buttonOptions2.onClick({
                            dropdown
                          });
                        };
                        const accessoryViewController2 = new dropdown_button_view_controller.A(buttonOptions2);
                        this._accessoryViewController = accessoryViewController2;
                        const accessoryEl = (0, querySelectorOrFail.A)(this._element, ".Yh:not(.inboxsdk__navItem_parent_accessory_button)");
                        buttonOptions2.buttonView.getElement().classList.add(...accessoryEl.classList);
                        accessoryEl.style.display = "none";
                        accessoryEl.parentNode.appendChild(buttonOptions2.buttonView.getElement());
                        this._iconSettings.iconElement = null;
                        return;
                      }
                      const buttonOptions = {
                        ...accessoryDescriptor
                      };
                      buttonOptions.buttonView = new MoreDropdownButtonView();
                      buttonOptions.dropdownViewDriverClass = gmail_dropdown_view.A;
                      buttonOptions.dropdownPositionOptions = {
                        position: "bottom",
                        hAlign: "left",
                        vAlign: "top"
                      };
                      const container = gmail_element_getter.A.getLeftNavContainerElement();
                      if (!container) throw new Error("leftNavContainer not found");
                      buttonOptions.dropdownShowFunction = (event) => {
                        if (container.classList.contains("bhZ")) {
                          const stopper = kefir_esm.fromEvents(event.dropdown, "destroy");
                          (0, make_mutation_observer_chunked_stream.A)(container, {
                            attributes: true,
                            attributeFilter: ["class"]
                          }).takeUntilBy(stopper).toProperty(() => null).onValue(() => {
                            if (!container.classList.contains("bym")) container.classList.add("bym");
                          });
                          stopper.onValue(() => {
                            container.classList.remove("bym");
                          });
                        }
                        buttonOptions.onClick(event);
                        event.dropdown.on("destroy", () => {
                          buttonOptions.buttonView.deactivate();
                        });
                      };
                      const accessoryViewController = new dropdown_button_view_controller.A(buttonOptions);
                      this._accessoryViewController = accessoryViewController;
                      const innerElement = (0, querySelectorOrFail.A)(this._element, ".TO");
                      innerElement.addEventListener("mouseenter", () => innerElement.classList.add("inboxsdk__navItem_hover"));
                      innerElement.addEventListener("mouseleave", () => innerElement.classList.remove("inboxsdk__navItem_hover"));
                      const insertionPoint = (0, querySelectorOrFail.A)(this._element, ".TN");
                      insertionPoint.appendChild(buttonOptions.buttonView.getElement());
                      this._setupContextClickHandler(accessoryViewController);
                    }
                    _createExpando() {
                      if (this._type === nav_item_types.GROUPER) {
                        return;
                      }
                      const expandoElement = this._expandoElement = document.createElement("div");
                      expandoElement.setAttribute("class", "TH aih J-J5-Ji inboxsdk__expando");
                      expandoElement.setAttribute("role", "link");
                      expandoElement.title = `Expand ${this._name || ""}`;
                      expandoElement.addEventListener("click", (e) => {
                        this.toggleCollapse();
                        e.stopPropagation();
                      });
                      const insertionPoint = this._element.querySelector(".TN.aik");
                      if (insertionPoint) insertionPoint.insertAdjacentElement("afterbegin", expandoElement);
                      if (this._isCollapsed) {
                        this._collapse();
                      } else {
                        this._expand();
                      }
                    }
                    _createExpandoParent() {
                      const parentExpandoElement = (0, querySelectorOrFail.A)(this._element, ".XR");
                      parentExpandoElement.style.visibility = "visible";
                      this._expandoElement = parentExpandoElement;
                      if (this._isCollapsed) {
                        this._collapse();
                      } else {
                        this._expand();
                      }
                    }
                    _createIconButtonAccessory(accessoryDescriptor) {
                      this._driver.getLogger().deprecationWarning("IconButtonAccessoryDescriptor accessory for a parent level NavItemView", "CreateAccessoryDescriptor or DropdownButtonAccessoryDescriptor");
                      if (this._isNewLeftNavParent) {
                        return;
                      }
                      const buttonOptions = {
                        ...accessoryDescriptor,
                        buttonColor: "pureIcon"
                      };
                      buttonOptions.buttonView = new button_view.A(buttonOptions);
                      this._accessoryViewController = new basic_button_view_controller.A(buttonOptions);
                      const insertionPoint = (0, querySelectorOrFail.A)(this._element, ".TN");
                      insertionPoint.appendChild(buttonOptions.buttonView.getElement());
                    }
                    _createItemContainerElement() {
                      const itemContainerElement = this._itemContainerElement = document.createElement("div");
                      itemContainerElement.classList.add("inboxsdk__navItem_container");
                      this._element.appendChild(itemContainerElement);
                      if (this._isCollapsible()) {
                        if (this._isCollapsed) this._collapse();
                        else this._expand();
                      }
                      return itemContainerElement;
                    }
                    _createLinkButtonAccessory(accessoryDescriptor) {
                      const linkDiv = document.createElement("div");
                      const linkDivClassName = "inboxsdk__navItem_link";
                      linkDiv.setAttribute("class", linkDivClassName);
                      const anchor = document.createElement("a");
                      anchor.classList.add("CK");
                      anchor.textContent = accessoryDescriptor.name;
                      linkDiv.appendChild(anchor);
                      anchor.href = "#";
                      anchor.addEventListener("click", (e) => {
                        e.stopPropagation();
                        e.preventDefault();
                        accessoryDescriptor.onClick();
                      });
                      (0, querySelectorOrFail.A)(this._element, ".aio").appendChild(linkDiv);
                    }
                    _createPlusButtonAccessory(accessoryDescriptor) {
                      if (this._isNewLeftNavParent) {
                        const buttonOptions2 = {
                          ...accessoryDescriptor
                        };
                        buttonOptions2.buttonView = new CreateParentAccessoryButtonView();
                        this._accessoryViewController = new basic_button_view_controller.A(buttonOptions2);
                        const accessoryEl = (0, querySelectorOrFail.A)(this._element, ".Yh:not(.inboxsdk__navItem_parent_accessory_button)");
                        buttonOptions2.buttonView.getElement().classList.add(...accessoryEl.classList);
                        accessoryEl.style.display = "none";
                        accessoryEl.parentNode.appendChild(buttonOptions2.buttonView.getElement());
                        this._iconSettings.iconElement = null;
                        return;
                      }
                      const buttonOptions = {
                        ...accessoryDescriptor
                      };
                      buttonOptions.buttonView = new CreateAccessoryButtonView();
                      this._accessoryViewController = new basic_button_view_controller.A(buttonOptions);
                      const insertionPoint = (0, querySelectorOrFail.A)(this._element, ".TN");
                      insertionPoint.appendChild(buttonOptions.buttonView.getElement());
                    }
                    _expand() {
                      if (this._isNewLeftNavParent) {
                        this._element.classList.add("Xr");
                      } else {
                        const expandoElement = this._expandoElement;
                        if (expandoElement) {
                          expandoElement.classList.add("aih");
                          expandoElement.classList.remove("aii");
                        } else if (this._type === nav_item_types.GROUPER) {
                          const navItemElement = this._element.firstElementChild;
                          if (navItemElement) {
                            navItemElement.classList.add("air");
                          }
                        }
                        if (this._itemContainerElement) {
                          this._itemContainerElement.style.display = "";
                        }
                        this._setHeights();
                      }
                      this._isCollapsed = false;
                      __privateGet(this, _eventStream6).emit({
                        eventName: "expanded"
                      });
                    }
                    _getItemContainerElement() {
                      if (this.isSection()) {
                        return getSectionNavItemsContainerElement(this._element, __privateGet(this, _sectionKey), this._orderGroup.toString(), this._orderHint.toString(), this._navItemNumber.toString());
                      } else if (this._isNewLeftNavParent) {
                        return (0, querySelectorOrFail.A)(this._element, ".TK");
                      } else {
                        let itemContainerElement = this._itemContainerElement;
                        if (!itemContainerElement) {
                          itemContainerElement = this._createItemContainerElement();
                          this._createExpando();
                        }
                        return itemContainerElement;
                      }
                    }
                    _isCollapsible() {
                      return Boolean(this._expandoElement) || this._type === nav_item_types.GROUPER;
                    }
                    _makeEventMapper(eventName) {
                      return function(domEvent) {
                        domEvent.stopPropagation();
                        domEvent.preventDefault();
                        return {
                          eventName,
                          domEvent
                        };
                      };
                    }
                    _setHeights() {
                      if (this._level == 1) {
                        return;
                      }
                      const toElement = (0, querySelectorOrFail.A)(this._element, ".TO");
                      if (this._element.classList.contains("ain") && this._itemContainerElement) {
                        this._element.style.height = "";
                        const totalHeight = this._element.clientHeight;
                        const itemHeight = toElement.clientHeight;
                        this._element.style.height = itemHeight + "px";
                        this._element.style.overflow = "visible";
                        this._element.style.marginBottom = totalHeight - itemHeight + "px";
                      } else {
                        this._element.style.height = "";
                        this._element.style.overflow = "";
                        this._element.style.marginBottom = "";
                      }
                    }
                    _setHighlight(value) {
                      if (!this._element || this._type === nav_item_types.LINK || this._type === nav_item_types.MANAGE) {
                        return;
                      }
                      if (value) {
                        (0, querySelectorOrFail.A)(this._element, ".TO").classList.add("NQ");
                      } else {
                        (0, querySelectorOrFail.A)(this._element, ".TO").classList.remove("NQ");
                      }
                    }
                    _setupContextClickHandler(accessoryViewController) {
                      kefir_esm.fromEvents(this._element, "contextmenu").takeWhile(() => this._accessoryViewController === accessoryViewController).onValue((domEvent) => {
                        domEvent.stopPropagation();
                        domEvent.preventDefault();
                        accessoryViewController.showDropdown();
                      });
                    }
                    _setupChildElement() {
                      const element = document.createElement("div");
                      element.setAttribute("class", "aim inboxsdk__navItem");
                      element.innerHTML = [
                        '<div class="TO">',
                        '<div class="TN aik">',
                        // This element needs a style attribute defined on it as there is a Gmail css rule of
                        // selecting for "gj[style]" the sets the opacity to 1 rather than 0.6.
                        '<div class="qj" style="">',
                        "</div>",
                        '<div class="aio aip">',
                        '<span class="nU" role="link">',
                        "</span>",
                        // This bsU element is the container "subtitle" text.
                        '<span class="bsU">',
                        "</span>",
                        "</div>",
                        "</div>",
                        "</div>"
                      ].join("");
                      const innerElement = (0, querySelectorOrFail.A)(element, ".TO");
                      kefir_esm.merge([kefir_esm.fromEvents(innerElement, "mouseenter").map(this._makeEventMapper("mouseenter")), kefir_esm.fromEvents(innerElement, "mouseleave").map(this._makeEventMapper("mouseleave"))]).onValue((event) => {
                        this._updateHighlight(event);
                      });
                      __privateGet(this, _eventStream6).plug(kefir_esm.fromEvents(innerElement, "click").map(this._makeEventMapper("click")));
                      return element;
                    }
                    _setupParentElement() {
                      const element = document.createElement("div");
                      element.className = "Xa wT W8 XJ inboxsdk__navItem";
                      element.innerHTML = ['<div class="V6 CL Y2">', '<div class="XR" role="button" tabindex="0" type="button" style="visibility: hidden">', "</div>", '<span class="XS">', '<span class="WW inboxsdk__navItem_name" role="heading" aria-level="2">', "</span>", '<span class="XU" aria-hidden="true" style="display: none">', "</span>", "</span>", '<div class="Yh">', "</div>", "</div>", '<div class="V3 ada">', '<div class="wT">', '<div class="TK">', "</div>", "</div>", "</div>"].join("");
                      const scrollContainer = (0, querySelectorOrFail.A)(element, ".V3");
                      kefir_esm.fromEvents(scrollContainer, "scroll").debounce(10).onValue(() => {
                        if (scrollContainer.scrollTop > 0) {
                          scrollContainer.classList.add("adh");
                        } else {
                          scrollContainer.classList.remove("adh");
                        }
                      });
                      const expandoElement = (0, querySelectorOrFail.A)(element, ".XR");
                      kefir_esm.fromEvents(expandoElement, "click").map(this._makeEventMapper("click")).onValue(() => {
                        this.toggleCollapse();
                      });
                      const innerElement = (0, querySelectorOrFail.A)(element, ".V6.CL");
                      __privateGet(this, _eventStream6).plug(kefir_esm.fromEvents(innerElement, "click").map(this._makeEventMapper("click")));
                      return element;
                    }
                    _setupGrouper() {
                      const navItemElement = this._element.firstElementChild;
                      if (navItemElement) {
                        navItemElement.classList.add("n4");
                        navItemElement.addEventListener("click", (e) => {
                          e.stopPropagation();
                          this.toggleCollapse();
                        });
                        if (this._isCollapsed) {
                          this._collapse();
                        } else {
                          this._expand();
                        }
                      }
                      const iconContainerElement = (0, querySelectorOrFail.A)(this._element, ".qj");
                      iconContainerElement.innerHTML = '<div class="G-asx T-I-J3 J-J5-Ji">&nbsp;</div>';
                    }
                    _updateAccessory(accessory) {
                      if (this._accessory === accessory) {
                        return;
                      }
                      if (this._accessoryViewController) {
                        this._accessoryViewController.destroy();
                        this._accessoryViewController = null;
                      }
                      if (accessory) {
                        this._createAccessory(accessory);
                      }
                      this._accessory = accessory;
                    }
                    _updateClickability(navItemDescriptor) {
                      if (navItemDescriptor.type === nav_item_types.LINK || navItemDescriptor.type === nav_item_types.MANAGE) {
                        this._element.classList.add("inboxsdk__navItem_nonClickable");
                      } else {
                        this._element.classList.remove("inboxsdk__navItem_nonClickable");
                      }
                    }
                    _updateHighlight(_ref2) {
                      let {
                        eventName
                      } = _ref2;
                      switch (eventName) {
                        case "mouseenter":
                          this._setHighlight(true);
                          break;
                        case "mouseleave":
                          this._setHighlight(false);
                          break;
                      }
                    }
                    _updateIcon(navItemDescriptor) {
                      if (this.isSection()) {
                        return;
                      }
                      const iconContainerElement = this._isNewLeftNavParent ? (0, querySelectorOrFail.A)(this._element, ".Yh") : (0, querySelectorOrFail.A)(this._element, ".qj");
                      if (navItemDescriptor.iconElement) {
                        renderCustomIcon(iconContainerElement, navItemDescriptor.iconElement, navItemDescriptor.iconPosition !== "BEFORE_NAME");
                        return;
                      }
                      (0, update_icon.A)(this._iconSettings, iconContainerElement, navItemDescriptor.iconPosition !== "BEFORE_NAME", navItemDescriptor.iconClass, navItemDescriptor.iconUrl, void 0, void 0, navItemDescriptor.iconLiga);
                      if (navItemDescriptor.backgroundColor) {
                        const circleColor = navItemDescriptor.backgroundColor;
                        iconContainerElement.style.borderColor = circleColor;
                      }
                    }
                    _updateName(name) {
                      if (this._name === name) {
                        return;
                      }
                      const navItemNameElement = (0, querySelectorOrFail.A)(this._element, ".inboxsdk__navItem_name");
                      navItemNameElement.textContent = name;
                      navItemNameElement.setAttribute("title", name);
                      this._name = name;
                      if (this.isSection()) return;
                      if (this._expandoElement) {
                        this._expandoElement.title = `Expand ${name}`;
                      }
                      if (this._navItemDescriptor?.tooltipAlignment) {
                        const align = this._navItemDescriptor?.tooltipAlignment[0];
                        this._element.firstElementChild?.setAttribute("data-tooltip", name);
                        this._element.firstElementChild?.setAttribute("data-tooltip-align", align);
                      }
                    }
                    _updateOrder(navItemDescriptor) {
                      this._element.setAttribute("data-group-order-hint", "" + this._orderGroup);
                      this._element.setAttribute("data-insertion-order-hint", "" + this._navItemNumber);
                      navItemDescriptor.orderHint = navItemDescriptor.orderHint || navItemDescriptor.orderHint === 0 ? navItemDescriptor.orderHint : Number.MAX_SAFE_INTEGER;
                      if (navItemDescriptor.orderHint !== this._orderHint) {
                        this._element.setAttribute("data-order-hint", "" + navItemDescriptor.orderHint);
                        __privateGet(this, _eventStream6).emit({
                          eventName: "orderChanged"
                        });
                      }
                      this._orderHint = navItemDescriptor.orderHint;
                    }
                    _updateRole(routeID) {
                      if (this.isSection()) {
                        return;
                      }
                      const roleElement = (0, querySelectorOrFail.A)(this._element, ".V6.CL");
                      if (routeID) {
                        roleElement.setAttribute("role", "link");
                      } else {
                        roleElement.setAttribute("role", "group");
                        roleElement.classList.add("X9");
                      }
                    }
                    _updateSubtitle(navItemDescriptor) {
                      if (this._isNewLeftNavParent || this.isSection()) {
                        return;
                      }
                      if (navItemDescriptor.accessory && !["SETTINGS_BUTTON", "DROPDOWN_BUTTON"].includes(navItemDescriptor.accessory.type) && navItemDescriptor.type !== nav_item_types.GROUPER) {
                        return;
                      }
                      (0, querySelectorOrFail.A)(this._element, ".bsU").innerHTML = auto_html_js_default()`${navItemDescriptor.subtitle || ""}`;
                    }
                    _updateType() {
                      let type = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : nav_item_types.NAVIGATION;
                      if (!this._element) {
                        return;
                      }
                      type = type || nav_item_types.NAVIGATION;
                      if (this._type === type) {
                        return;
                      }
                      let nameElement = this._element.querySelector(".inboxsdk__navItem_name");
                      if (nameElement && nameElement.closest(".inboxsdk__navItem") !== this._element) {
                        nameElement = null;
                      }
                      switch (type) {
                        case nav_item_types.GROUPER:
                        case nav_item_types.NAVIGATION:
                          if (!nameElement || nameElement.tagName !== "SPAN") {
                            (0, querySelectorOrFail.A)(this._element, ".nU").innerHTML += auto_html_js_default()`<span class="inboxsdk__navItem_name">${this._name}</span>`;
                          }
                          break;
                        case nav_item_types.LINK:
                        case nav_item_types.MANAGE:
                          if (!nameElement || nameElement.tagName !== "A") {
                            (0, querySelectorOrFail.A)(this._element, ".nU").innerHTML += auto_html_js_default()`<a href="#" class="CK inboxsdk__navItem_name">${this._name}</a>`;
                          }
                          break;
                      }
                      this._type = type;
                    }
                  };
                  _eventStream6 = new WeakMap();
                  _sectionKey = new WeakMap();
                  _GmailNavItemView_instances = new WeakSet();
                  setupElement_fn4 = function(navItemDescriptor) {
                    if (this._isNewLeftNavParent && navItemDescriptor?.type !== nav_item_types.SECTION) {
                      return this._setupParentElement();
                    } else if (navItemDescriptor?.type === nav_item_types.SECTION) {
                      return __privateMethod(this, _GmailNavItemView_instances, setupSectionElement_fn).call(this);
                    } else {
                      return this._setupChildElement();
                    }
                  };
                  cleanupDOMElements_fn = function() {
                    if (this._accessoryViewController) this._accessoryViewController.destroy();
                    if (this._expandoElement) this._expandoElement.remove();
                    if (this._itemContainerElement) this._itemContainerElement.remove();
                  };
                  setupSectionElement_fn = function() {
                    const element = document.createElement("div");
                    element.classList.add("aAw", "FgKVne", NAV_ITEM_SECTION_CLASS_NAME);
                    element.dataset.sectionKey = __privateGet(this, _sectionKey);
                    element.innerHTML = ['<span class="aAv inboxsdk__navItem_name" role="heading">', "Labels", "</span>", '<div class="aAu arN" aria-label="" data-tooltip="" role="button" tabindex="0" type="button">', "</div>"].join("");
                    const innerElement = (0, querySelectorOrFail.A)(element, ".aAu");
                    __privateGet(this, _eventStream6).plug(kefir_esm.fromEvents(innerElement, "click").map(this._makeEventMapper("click")));
                    return element;
                  };
                  updateSpacing_fn = function(navItemDescriptor) {
                    if (this._isNewLeftNavParent) {
                      return;
                    }
                    this._element.classList.toggle("yJ", !!navItemDescriptor.spacingAfter);
                  };
                  updateSectionTooltip_fn = function(navItemDescriptor) {
                    if (!this.isSection()) return;
                    const tooltip = navItemDescriptor.sectionTooltip;
                    if (tooltip) {
                      this._element.querySelector(".aAu")?.setAttribute("data-tooltip", tooltip);
                      this._element.querySelector(".aAu")?.setAttribute("aria-label", tooltip);
                    }
                  };
                  updateValues_fn2 = function(navItemDescriptor) {
                    if (navItemDescriptor.type === nav_item_types.SECTION && !__privateGet(this, _sectionKey)) {
                      __privateSet(this, _sectionKey, (Math.random() * 1e4).toFixed(0));
                    }
                    if (this._navItemDescriptor?.type !== navItemDescriptor.type) {
                      this._element.remove();
                      __privateMethod(this, _GmailNavItemView_instances, cleanupDOMElements_fn).call(this);
                      this._element = __privateMethod(this, _GmailNavItemView_instances, setupElement_fn4).call(this, navItemDescriptor);
                    }
                    this._navItemDescriptor = navItemDescriptor;
                    if (this._collapseKey == null) {
                      this._collapseKey = navItemDescriptor.key || `${navItemDescriptor.name}`;
                      this._isCollapsed = localStorage.getItem("inboxsdk__navitem_collapsed__" + this._collapseKey) === "true";
                    }
                    this._updateType(navItemDescriptor.type);
                    this._updateName(navItemDescriptor.name);
                    this._updateSubtitle(navItemDescriptor);
                    this._updateOrder(navItemDescriptor);
                    __privateMethod(this, _GmailNavItemView_instances, updateSpacing_fn).call(this, navItemDescriptor);
                    if (this._isNewLeftNavParent) {
                      this._updateRole(navItemDescriptor.routeID);
                    }
                    if (this._type === nav_item_types.GROUPER) {
                      this._setupGrouper();
                      return;
                    }
                    this._updateAccessory(navItemDescriptor.accessory);
                    this._updateIcon(navItemDescriptor);
                    this._updateClickability(navItemDescriptor);
                    __privateMethod(this, _GmailNavItemView_instances, updateSectionTooltip_fn).call(this, navItemDescriptor);
                  };
                  let GmailNavItemView = _GmailNavItemView;
                  function getLeftIndentationPaddingValue() {
                    return GMAIL_V2_LEFT_INDENTATION_PADDING;
                  }
                  ;
                  function attachGmailNavItemView(gmailNavItemView, injectionContainer) {
                    try {
                      const attacher = _attachNavItemView(gmailNavItemView, injectionContainer);
                      attacher();
                      gmailNavItemView.getEventStream().filter((event) => event.eventName === "orderChanged").onValue(attacher);
                    } catch (err) {
                      lib_logger.A.error(err);
                    }
                  }
                  async function addNavItem(driver, orderGroup, navItemDescriptor, navMenuInjectionContainer) {
                    await waitForMenuReady();
                    const gmailNavItemView = new GmailNavItemView(driver, orderGroup, 1);
                    gmailNavItemView.setNavItemDescriptor(navItemDescriptor);
                    if (!gmail_element_getter.A.isStandalone()) {
                      attachGmailNavItemView(gmailNavItemView, navMenuInjectionContainer);
                    }
                    return gmailNavItemView;
                  }
                  async function addNavItemToPanel(driver, orderGroup, navItemDescriptor, panelElement) {
                    await waitForMenuReady();
                    const gmailNavItemView = new GmailNavItemView(driver, orderGroup, 1);
                    gmailNavItemView.setNavItemDescriptor(navItemDescriptor);
                    if (!gmail_element_getter.A.isStandalone()) {
                      if (gmailNavItemView.isSection()) {
                        const container = getPanelSectionNavItemContainerElement(panelElement);
                        attachGmailNavItemView(gmailNavItemView, container);
                      } else {
                        const container = getPanelNavItemContainerElement(panelElement, gmailNavItemView.sectionKey);
                        attachGmailNavItemView(gmailNavItemView, container);
                      }
                    }
                    return gmailNavItemView;
                  }
                  const waitForMenuReady = once_default()(async () => {
                    const appMenu = await gmail_element_getter.A.getAppMenuAsync();
                    if (!appMenu) {
                      await waitForNavMenuReady();
                    }
                  });
                  const waitForNavMenuReady = once_default()(async () => {
                    if (!gmail_element_getter.A.isStandalone()) {
                      await gmail_element_getter.A.waitForGmailModeToSettle();
                      await (0, wait_for.A)(() => document.querySelector(".aeN[role=navigation], .aeN [role=navigation]"));
                      await (0, wait_for.A)(() => document.querySelector(".Ls77Lb.aZ6 > .pp"));
                    }
                  });
                  function _attachNavItemView(gmailNavItemView, navMenuInjectionContainer) {
                    if (navMenuInjectionContainer) {
                      return () => {
                        (0, insert_element_in_order.A)(navMenuInjectionContainer, gmailNavItemView.getElement());
                      };
                    }
                    if (!gmail_element_getter.A.shouldAddNavItemsInline()) {
                      return function() {
                        const navMenuInjectionContainer2 = gmail_element_getter.A.getSeparateSectionNavItemMenuInjectionContainer();
                        if (!navMenuInjectionContainer2) {
                          throw new Error("should not happen");
                        }
                        const nonMailLeftNavSections = Array.from(document.querySelectorAll(".Xa.wT:not([data-group-order-hint])")).slice(1);
                        nonMailLeftNavSections.forEach((div) => {
                          div.dataset.groupOrderHint = "zz_gmail";
                        });
                        (0, insert_element_in_order.A)(navMenuInjectionContainer2, gmailNavItemView.getElement());
                      };
                    } else {
                      return function() {
                        (0, insert_element_in_order.A)(_getNavItemsHolder(), gmailNavItemView.getElement());
                      };
                    }
                  }
                  function _getNavItemsHolder() {
                    const holder = document.querySelector(".inboxsdk__navMenu");
                    if (!holder) {
                      return _createNavItemsHolder();
                    } else {
                      return (0, querySelectorOrFail.A)(holder, ".TK");
                    }
                  }
                  function _createNavItemsHolder() {
                    const holder = document.createElement("div");
                    holder.setAttribute("class", "LrBjie inboxsdk__navMenu");
                    holder.innerHTML = '<div class="TK"></div>';
                    const navMenuInjectionContainer = gmail_element_getter.A.getSameSectionNavItemMenuInjectionContainer();
                    if (!navMenuInjectionContainer) throw new Error("should not happen");
                    navMenuInjectionContainer.insertBefore(holder, navMenuInjectionContainer.children[2]);
                    (0, make_mutation_observer_stream.A)(holder, {
                      attributes: true,
                      attributeFilter: ["class"]
                    }).onValue(function() {
                      if (holder.classList.contains("TA")) {
                        holder.classList.remove("TA");
                      }
                    });
                    return (0, querySelectorOrFail.A)(holder, ".TK");
                  }
                  ;
                  async function addAppMenuItem(driver, menuItemDescriptor) {
                    const appMenuInjectionContainer = await gmail_element_getter.A.getAppMenuAsync();
                    const gmailAppMenuItemView = new GmailAppMenuItemView(driver, menuItemDescriptor);
                    try {
                      if (!appMenuInjectionContainer) return void 0;
                      const siblingElement = Number.isInteger(menuItemDescriptor.insertIndex) ? appMenuInjectionContainer.childNodes[menuItemDescriptor.insertIndex] ?? null : null;
                      appMenuInjectionContainer.insertBefore(gmailAppMenuItemView.element, siblingElement);
                    } catch (err) {
                      lib_logger.A.error(err);
                    }
                    return gmailAppMenuItemView;
                  }
                  ;
                  class GmailSupportItemView {
                    constructor(driver, supportItemDescriptor) {
                      __publicField(this, "_stopper", js_default()());
                      __publicField(this, "_insertElementContainer", null);
                      this._driver = driver;
                      this._setup(supportItemDescriptor);
                    }
                    destroy() {
                      this._stopper.destroy();
                      if (this._insertElementContainer) {
                        this._insertElementContainer.remove();
                        this._insertElementContainer = null;
                      }
                    }
                    _setup(supportItemDescriptor) {
                      const supportMenuNodes = this._driver.getTagTree().getAllByTag("supportMenu");
                      const subscription = supportMenuNodes.subscribe((changes) => {
                        changes.forEach((change) => {
                          if (change.type === "add") {
                            this._addSupportElement(change.value.getValue(), supportItemDescriptor);
                          } else if (change.type === "remove") {
                            if (this._insertElementContainer) {
                              this._insertElementContainer.remove();
                              this._insertElementContainer = null;
                            }
                          }
                        });
                      });
                      this._stopper.onValue(() => subscription.unsubscribe());
                    }
                    _addSupportElement(supportElement, supportItemDescriptor) {
                      const insertElementContainer = document.createElement("div");
                      const menuItemAttributes = supportElement.children.item(0).attributes;
                      for (const attribute of menuItemAttributes) {
                        if (attribute.name === "aria-label") {
                          continue;
                        }
                        if (attribute.name === "class") {
                          const classes = `${attribute.value} inboxsdk__support_menuItem`;
                          insertElementContainer.setAttribute(attribute.name, classes);
                          continue;
                        }
                        insertElementContainer.setAttribute(attribute.name, attribute.value);
                      }
                      insertElementContainer.append(supportItemDescriptor.element);
                      let lastSeparatorItem = null;
                      for (const item of supportElement.children) {
                        if (item.getAttribute("role") === "separator") {
                          lastSeparatorItem = item;
                        }
                      }
                      if (lastSeparatorItem) {
                        lastSeparatorItem.insertAdjacentElement("beforebegin", insertElementContainer);
                      } else {
                        supportElement.append(insertElementContainer);
                      }
                      insertElementContainer.onclick = (event) => {
                        event.preventDefault();
                        event.stopPropagation();
                        supportItemDescriptor.onClick();
                        this._closeSupportMenu(supportElement);
                      };
                      insertElementContainer.onkeypress = (event) => {
                        if (event.key === "Enter") {
                          supportItemDescriptor.onClick();
                          this._closeSupportMenu(supportElement);
                        }
                      };
                    }
                    _closeSupportMenu(supportElement) {
                      if (supportElement.getAttribute("aria-hidden") != "true") {
                        const button = supportElement.previousElementSibling;
                        button && button.click();
                      }
                    }
                  }
                  ;
                  function addSupportItem(driver, supportItemDescriptor) {
                    return new GmailSupportItemView(driver, supportItemDescriptor);
                  }
                  var goto_view = __webpack_require__2(7101);
                  var gmail_sync_response_processor = __webpack_require__2(6811);
                  var immutability_helper = __webpack_require__2(2996);
                  var immutability_helper_default = /* @__PURE__ */ __webpack_require__2.n(immutability_helper);
                  ;
                  const threadListHandlersToSearchStrings = /* @__PURE__ */ new Map();
                  const MAX_THREADS_PER_PAGE = 50;
                  function copyAndOmitExcessThreads(ids, logger) {
                    if (ids.length > MAX_THREADS_PER_PAGE) {
                      logger.error(new Error("Received more than the maximum number of threads specified by handler, ignoring additional threads (https://www.inboxsdk.com/docs/#Router)."));
                    }
                    return ids.slice(0, MAX_THREADS_PER_PAGE);
                  }
                  function _findIdFailure(id, err) {
                    console.log("Failed to find id for thread", id, err);
                    return null;
                  }
                  function parseOnActivateResult(logger, start, result) {
                    if (Array.isArray(result)) {
                      logger.deprecationWarning("Returning an array from a handleCustomListRoute handler", "a CustomListDescriptor object");
                      const threads = copyAndOmitExcessThreads(result, logger);
                      return {
                        // default to one page since arrays can't be paginated
                        total: threads.length,
                        threads
                      };
                    } else if (typeof result === "object") {
                      const {
                        total,
                        hasMore,
                        threads
                      } = result;
                      if (!Array.isArray(threads)) {
                        throw new Error('handleCustomListRoute result must contain a "threads" array (https://www.inboxsdk.com/docs/#Router).');
                      }
                      if (total != null && hasMore != null) {
                        throw new Error('handleCustomListRoute result must only contain either a "total" or a "hasMore" property, but not both. (https://www.inboxsdk.com/docs/#Router).');
                      }
                      if (typeof total === "number") {
                        return {
                          total,
                          threads: copyAndOmitExcessThreads(threads, logger)
                        };
                      } else if (typeof hasMore === "boolean") {
                        const threadsWithoutExcess = copyAndOmitExcessThreads(threads, logger);
                        return {
                          total: hasMore ? "MANY" : start + threads.length,
                          threads: threadsWithoutExcess
                        };
                      } else {
                        throw new Error('handleCustomListRoute result must contain either a "total" number or a "hasMore" boolean (https://www.inboxsdk.com/docs/#Router).');
                      }
                    } else {
                      throw new Error("handleCustomListRoute result must be an array or an object (https://www.inboxsdk.com/docs/#Router).");
                    }
                  }
                  function threadDescriptorToInitialIDPair(id) {
                    if (typeof id === "string") {
                      if (id[0] == "<") {
                        return {
                          rfcId: id
                        };
                      } else {
                        return {
                          gtid: id
                        };
                      }
                    } else if (id) {
                      const obj = {
                        gtid: typeof id.gmailThreadId === "string" && id.gmailThreadId,
                        rfcId: typeof id.rfcMessageId === "string" && id.rfcMessageId
                      };
                      if (obj.gtid || obj.rfcId) {
                        return obj;
                      }
                    }
                  }
                  function initialIDPairToIDPairWithRFC(driver, pair, findIdFailure) {
                    if (typeof pair.rfcId === "string") {
                      return Promise.resolve(pair);
                    } else if (typeof pair.gtid === "string") {
                      const gtid = pair.gtid;
                      return driver.getRfcMessageIdForGmailThreadId(gtid).then((rfcId) => ({
                        gtid,
                        rfcId
                      }), (err) => findIdFailure(gtid, err));
                    }
                    throw new Error("Should not happen");
                  }
                  function idPairWithRFCToCompletedIDPair(driver, pair, findIdFailure) {
                    return typeof pair.gtid === "string" ? Promise.resolve(pair) : driver.getGmailThreadIdForRfcMessageId(pair.rfcId).then((gtid) => ({
                      gtid,
                      rfcId: pair.rfcId
                    }), (err) => findIdFailure(pair.rfcId, err));
                  }
                  const setupSearchReplacing = (driver, customRouteID, onActivate, findIdFailure) => {
                    const preexistingQuery = threadListHandlersToSearchStrings.get(onActivate);
                    if (preexistingQuery) {
                      return preexistingQuery;
                    }
                    const newQuery = Date.now() + "-" + Math.random();
                    driver.getPageCommunicator().setupCustomListResultsQuery(newQuery);
                    driver.getPageCommunicator().ajaxInterceptStream.filter((e) => e.type === "searchForReplacement" && e.query === newQuery).onValue((_ref) => {
                      let {
                        start
                      } = _ref;
                      (async () => {
                        driver.signalCustomThreadListActivity(customRouteID);
                        let total;
                        let threadDescriptors;
                        try {
                          const onActivateResult = await Promise.resolve(onActivate(start, MAX_THREADS_PER_PAGE));
                          const parsed = parseOnActivateResult(driver.getLogger(), start, onActivateResult);
                          total = parsed.total;
                          threadDescriptors = parsed.threads;
                        } catch (e) {
                          driver.getLogger().error(e);
                          total = 0;
                          threadDescriptors = [];
                        }
                        const initialIDPairs = threadDescriptors.map(threadDescriptorToInitialIDPair).filter(isNotNil.A);
                        const idPairsWithRFC = (await Promise.all(initialIDPairs.map((pair) => initialIDPairToIDPairWithRFC(driver, pair, findIdFailure)))).filter(isNotNil.A);
                        const messageIDQuery = idPairsWithRFC.length > 0 ? idPairsWithRFC.map((_ref2) => {
                          let {
                            rfcId
                          } = _ref2;
                          return "rfc822msgid:" + rfcId;
                        }).join(" OR ") : "" + Math.random() + Date.now();
                        driver.getPageCommunicator().setCustomListNewQuery({
                          newQuery: messageIDQuery,
                          newStart: 0,
                          query: newQuery,
                          start
                        });
                        const searchResultsResponse_promise = driver.getPageCommunicator().ajaxInterceptStream.filter((e) => e.type === "searchResultsResponse" && e.query === newQuery && e.start === start).map((x) => x.response).take(1).toPromise();
                        const completedIDPairs = uniqBy_default()((await Promise.all(idPairsWithRFC.map((pair) => idPairWithRFCToCompletedIDPair(driver, pair, findIdFailure)))).filter(isNotNil.A), (p) => p.gtid);
                        const response = await searchResultsResponse_promise;
                        driver.signalCustomThreadListActivity(customRouteID);
                        let newResponse;
                        try {
                          const extractedThreads = gmail_sync_response_processor.Uf(response);
                          const extractedThreadsInCompletedIDPairsOrder = completedIDPairs.map((_ref3) => {
                            let {
                              gtid
                            } = _ref3;
                            return find_default()(extractedThreads, (t2) => t2.oldGmailThreadID === gtid);
                          }).filter(isNotNil.A);
                          const doesNeedReorder = extractedThreads.length !== extractedThreadsInCompletedIDPairsOrder.length || extractedThreads.some((extractedThread, index) => extractedThread !== extractedThreadsInCompletedIDPairsOrder[index]);
                          let reorderedThreads;
                          if (doesNeedReorder) {
                            const now = Date.now();
                            reorderedThreads = extractedThreadsInCompletedIDPairsOrder.map((extractedThread, index) => {
                              const newFormat = Array.isArray(extractedThread.rawResponse);
                              const newTime = String(now - index);
                              let newThread = immutability_helper_default()(extractedThread, {
                                rawResponse: newFormat ? {
                                  "0": {
                                    "2": {
                                      $set: newTime
                                    },
                                    "7": {
                                      $set: newTime
                                    }
                                  }
                                } : {
                                  "1": {
                                    "3": {
                                      $set: newTime
                                    },
                                    "8": {
                                      $set: newTime
                                    }
                                  }
                                }
                              });
                              if (newFormat ? extractedThread.rawResponse[0][4] : extractedThread.rawResponse[1][5]) {
                                newThread = immutability_helper_default()(newThread, {
                                  rawResponse: newFormat ? {
                                    "0": {
                                      "4": (oldVal) => oldVal.map((md) => immutability_helper_default()(md, {
                                        "6": {
                                          $set: newTime
                                        },
                                        "17": {
                                          $set: newTime
                                        },
                                        "30": {
                                          $set: newTime
                                        }
                                      }))
                                    }
                                  } : {
                                    "1": {
                                      "5": (oldVal) => oldVal.map((md) => immutability_helper_default()(md, {
                                        "7": {
                                          $set: newTime
                                        },
                                        "18": {
                                          $set: newTime
                                        },
                                        "31": {
                                          $set: newTime
                                        }
                                      }))
                                    }
                                  }
                                });
                              }
                              return newThread;
                            });
                          } else {
                            reorderedThreads = extractedThreads;
                          }
                          newResponse = gmail_sync_response_processor.q6(response, reorderedThreads, {
                            start,
                            total
                          });
                          driver.getPageCommunicator().setCustomListResults(newQuery, newResponse);
                        } catch (e) {
                          driver.getLogger().error(e, {
                            responseReplacementFailure: true,
                            //response: isStreakAppId(driver.getAppId()) ? response : null,
                            idPairsLength: completedIDPairs.length
                          });
                          const butterBar = driver.getButterBar();
                          if (butterBar) {
                            butterBar.showError({
                              text: "Failed to load custom thread list"
                            });
                          }
                          try {
                            driver.getPageCommunicator().setCustomListResults(newQuery, gmail_sync_response_processor.q6(response, [], {
                              start,
                              total
                            }));
                          } catch (e2) {
                            driver.getLogger().error(e2);
                            driver.getPageCommunicator().setCustomListResults(newQuery, null);
                          }
                          return;
                        }
                        setTimeout(() => {
                          const errorBar = document.querySelector(".vY .vX.UC");
                          if (errorBar && errorBar.style.display !== "none" && /#\d+/.test(errorBar.textContent)) {
                            const isStreak = (0, isStreakAppId.A)(driver.getAppId());
                            driver.getLogger().error(new Error("Gmail error with custom thread list"), {
                              message: errorBar.textContent,
                              completedIDPairsLength: completedIDPairs.length,
                              response: isStreak ? response : null,
                              newResponse: isStreak ? newResponse : null
                            });
                          }
                        }, 1e3);
                      })().catch((err) => driver.getLogger().error(err));
                    });
                    driver.getCustomListSearchStringsToRouteIds().set(newQuery, customRouteID);
                    threadListHandlersToSearchStrings.set(onActivate, newQuery);
                    return newQuery;
                  };
                  function showCustomThreadList(driver, customRouteID, onActivate, params) {
                    let findIdFailure = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : _findIdFailure;
                    const uniqueSearch = setupSearchReplacing(driver, customRouteID, onActivate, findIdFailure);
                    const customHash = document.location.hash;
                    const searchInput = gmail_element_getter.A.getSearchInput();
                    if (!searchInput) throw new Error("could not find search input");
                    const inputStream = gmail_element_getter.A.getMainContentElementChangedStream().changes().take(1).map(() => searchInput).flatMapLatest((input) => (0, make_mutation_observer_chunked_stream.A)(input, {
                      attributes: true,
                      attributeOldValue: true
                    }).filter((mutationRecords) => {
                      return mutationRecords.some((mutationRecord) => mutationRecord.attributeName === "role" && mutationRecord.oldValue === "combobox");
                    }).merge(kefir_esm["default"].later(15e3, null)).take(1));
                    inputStream.onValue(() => {
                      searchInput.value = "";
                      searchInput.style.visibility = "visible";
                    });
                    searchInput.style.visibility = "hidden";
                    const searchHash = "#search/" + [uniqueSearch, ...params].map(encodeURIComponent).join("/");
                    window.history.replaceState(null, null, searchHash);
                    const hce = new window.HashChangeEvent("hashchange", {
                      oldURL: document.location.href.replace(/#.*$/, "") + customHash,
                      newURL: document.location.href.replace(/#.*$/, "") + searchHash
                    });
                    window.dispatchEvent(hce);
                  }
                  var show_custom_route_view = __webpack_require__2(3759);
                  ;
                  function showNativeRouteView(_gmailDriver) {
                    const contentSectionElement = gmail_element_getter.A.getContentSectionElement();
                    if (!contentSectionElement) {
                      return;
                    }
                    Array.prototype.forEach.call(contentSectionElement.children, (child) => {
                      child.style.display = "";
                    });
                    if (document.body.classList.contains("inboxsdk__custom_view_active")) {
                      document.body.classList.remove("inboxsdk__custom_view_active");
                      (0, fake_window_resize.A)();
                    }
                  }
                  ;
                  function copyAndValidateAutocompleteResults(driver, results) {
                    if (!Array.isArray(results)) {
                      throw new Error("suggestions must be an array");
                    }
                    return results.map((result) => {
                      const resultCopy = {
                        ...result
                      };
                      if (typeof resultCopy.name !== "string" && typeof resultCopy.nameHTML !== "string") {
                        throw new Error("suggestion must have name or nameHTML property");
                      }
                      if (typeof resultCopy.routeName !== "string" && typeof resultCopy.externalURL !== "string" && typeof resultCopy.searchTerm !== "string" && typeof resultCopy.onClick !== "function") {
                        throw new Error("suggestion must have routeName, externalURL, searchTerm, or onClick property");
                      }
                      if (typeof resultCopy.iconURL === "string") {
                        const iconURL = resultCopy.iconURL;
                        driver.getLogger().deprecationWarning('AutocompleteSearchResult "iconURL" property', "AutocompleteSearchResult.iconUrl");
                        if (!resultCopy.iconUrl) {
                          if (driver.getOpts().REQUESTED_API_VERSION === 1) {
                            resultCopy.iconUrl = iconURL;
                          } else {
                            console.error("Support for iconURL property was dropped after API version 1");
                          }
                        }
                        delete resultCopy.iconURL;
                      }
                      return resultCopy;
                    });
                  }
                  ;
                  function registerSearchSuggestionsProvider(driver, handler) {
                    const providerId = "inboxsdk__suggestions_" + ("" + Date.now() + Math.random()).replace(/\D+/g, "");
                    const pageCommunicator = driver.getPageCommunicator();
                    pageCommunicator.registerSuggestionsModifier(providerId);
                    const suggestionsStream = pageCommunicator.ajaxInterceptStream.filter((event) => event.type === "suggestionsRequest").flatMapLatest((_ref) => {
                      let {
                        query
                      } = _ref;
                      return kefir_esm.fromPromise(Promise.resolve(handler(query))).flatMap((results) => {
                        try {
                          const validatedResults = copyAndValidateAutocompleteResults(driver, results);
                          const validatedResultsWithIds = validatedResults.map((result) => ({
                            ...result,
                            providerId,
                            id: `${Date.now()}-${Math.random()}`
                          }));
                          return kefir_esm.constant(validatedResultsWithIds);
                        } catch (e) {
                          return kefir_esm.constantError(e);
                        }
                      }).mapErrors((err) => {
                        driver.getLogger().error(err);
                        return [];
                      }).map((suggestions) => {
                        return {
                          query,
                          suggestions
                        };
                      });
                    }).onValue((event) => {
                      pageCommunicator.provideAutocompleteSuggestions(providerId, event.query, event.suggestions);
                    }).map((event) => event.suggestions);
                    const searchBoxStream = driver.getRouteViewDriverStream().toProperty(() => null).map(() => gmail_element_getter.A.getSearchInput()).filter(isNotNil.A).take(1);
                    const suggestionsBoxTbodyStream = searchBoxStream.flatMapLatest((searchBox) => kefir_esm.fromEvents(searchBox, "focus")).map(() => gmail_element_getter.A.getSearchSuggestionsBoxParent()).filter(isNotNil.A).flatMapLatest(make_element_child_stream.A).map((x) => x.el.firstElementChild).take(1).toProperty();
                    const suggestionsBoxGmailChanges = suggestionsBoxTbodyStream.flatMap((suggestionsBoxTbody) => (0, make_mutation_observer_chunked_stream.A)(suggestionsBoxTbody, {
                      childList: true
                    }).toProperty(() => null)).map(() => null);
                    const suggestionsBoxEnterPresses = searchBoxStream.flatMap((searchBox) => (0, from_event_target_capture.A)(document, "keydown").filter((event) => event.keyCode == 13 && event.target === searchBox));
                    const providedRows = suggestionsBoxTbodyStream.sampledBy(suggestionsBoxGmailChanges).map((suggestionsBoxTbody) => Array.from(suggestionsBoxTbody.children).filter((row) => row.getElementsByClassName(providerId).length > 0));
                    providedRows.onValue((rows) => {
                      if (rows[0] && rows[0].previousElementSibling) {
                        const prevFirstChild = rows[0].previousElementSibling.firstElementChild;
                        if (prevFirstChild) {
                          prevFirstChild.classList.add("inboxsdk__suggestions_separator_before");
                        }
                        const firstChild = rows[0].firstElementChild;
                        if (firstChild) {
                          firstChild.classList.add("inboxsdk__suggestions_separator_after");
                        }
                      }
                    });
                    const rowSelectionEvents = providedRows.flatMapLatest((rows) => kefir_esm.merge(rows.map((row) => kefir_esm.merge([(0, from_event_target_capture.A)(row, "click"), suggestionsBoxEnterPresses.filter(() => row.classList.contains("gssb_i"))]).map((event) => ({
                      event,
                      row
                    })))));
                    const activeSuggestionsStream = kefir_esm.merge([suggestionsStream, searchBoxStream.flatMapLatest((searchBox) => kefir_esm.fromEvents(searchBox, "blur")).map(() => [])]).toProperty();
                    kefir_esm.combine([rowSelectionEvents, searchBoxStream], [activeSuggestionsStream]).onValue((tuple) => {
                      const [{
                        event,
                        row
                      }, searchBox, suggestions] = tuple;
                      const itemDataSpan = row.querySelector("span[data-inboxsdk-suggestion]");
                      const itemData = itemDataSpan ? JSON.parse(itemDataSpan.getAttribute("data-inboxsdk-suggestion") || "null") : null;
                      const clearSearch = once_default()(() => {
                        event.stopImmediatePropagation();
                        event.preventDefault();
                        searchBox.blur();
                        searchBox.value = "";
                      });
                      if (itemData) {
                        const {
                          id
                        } = itemData;
                        const suggestion = find_default()(suggestions, (s) => s.id === id);
                        if (!suggestion) {
                          driver.getLogger().error(new Error("Failed to find suggestion by id"));
                        }
                        if (suggestion && suggestion.onClick) {
                          clearSearch();
                          suggestion.onClick.call(null);
                        }
                      }
                      if (itemData && itemData.routeName) {
                        clearSearch();
                        driver.goto(itemData.routeName, itemData.routeParams);
                      } else if (itemData && itemData.externalURL) {
                        clearSearch();
                        window.open(itemData.externalURL);
                      }
                    });
                  }
                  var setup_compose_view_driver_stream = __webpack_require__2(7032);
                  ;
                  function trackEvents(gmailDriver) {
                    _setupComposeMonitoring(gmailDriver);
                    _setupAttachmentModalMonitoring(gmailDriver);
                    _setupDragDropMonitoring(gmailDriver);
                  }
                  function _setupComposeMonitoring(gmailDriver) {
                    gmailDriver.getComposeViewDriverStream().onValue((composeViewDriver) => {
                      var logFunction = _getLogFunction(gmailDriver, composeViewDriver);
                      logFunction("compose open");
                      _monitorComposeSpecificEvents(composeViewDriver, logFunction);
                    });
                  }
                  function _getLogFunction(gmailDriver, composeViewDriver) {
                    var logger = gmailDriver.getLogger();
                    var composeStats = {
                      isInlineReply: composeViewDriver.isInlineReplyForm(),
                      isReply: composeViewDriver.isReply()
                    };
                    return function(eventName, extraOptions) {
                      logger.eventSite(eventName, {
                        ...composeStats,
                        ...extraOptions
                      });
                    };
                  }
                  function _monitorComposeSpecificEvents(composeViewDriver, logFunction) {
                    _monitorAttachmentButton(composeViewDriver, logFunction);
                    _monitorDriveButton(composeViewDriver, logFunction);
                  }
                  function _monitorAttachmentButton(composeViewDriver, logFunction) {
                    var attachmentButton = composeViewDriver.getElement().querySelector(".a1");
                    if (attachmentButton) {
                      kefir_esm["default"].fromEvents(attachmentButton, "mousedown").takeUntilBy(composeViewDriver.getStopper()).onValue(() => {
                        logFunction("attachment button clicked");
                        _monitorAttachmentAdded(composeViewDriver, logFunction);
                      });
                    }
                  }
                  function _monitorAttachmentAdded(composeViewDriver, logFunction) {
                    (0, make_element_child_stream.A)(document.body).map((event) => event.el).filter((node) => node && node.type === "file").take(1).flatMap((node) => {
                      return kefir_esm["default"].fromEvents(node, "change").map(() => true).merge(kefir_esm["default"].fromEvents(composeViewDriver.getBodyElement(), "focus").map(() => false).delay(1e3));
                    }).take(1).filter(Boolean).takeUntilBy(composeViewDriver.getStopper()).onValue(() => logFunction("attachment uploaded"));
                  }
                  function _monitorDriveButton(composeViewDriver, logFunction) {
                    var driveButton = composeViewDriver.getElement().querySelector(".aA7");
                    if (driveButton) {
                      kefir_esm["default"].fromEvents(driveButton, "mousedown").takeUntilBy(composeViewDriver.getStopper()).onValue(() => {
                        logFunction("drive button clicked");
                        _monitorDriveFileAdded(composeViewDriver, logFunction);
                      });
                    }
                  }
                  function _monitorDriveFileAdded(composeViewDriver, logFunction) {
                    var numberCurrentDriveChips = composeViewDriver.getBodyElement().querySelectorAll(".gmail_drive_chip").length;
                    (0, make_element_child_stream.A)(document.body).map((event) => event.el).filter((node) => node && node.classList.contains("picker-dialog")).take(1).flatMap((_node) => {
                      return kefir_esm["default"].fromEvents(composeViewDriver.getBodyElement(), "focus").delay(1e3).map(() => {
                        if (composeViewDriver.getBodyElement()) {
                          return composeViewDriver.getBodyElement().querySelectorAll(".gmail_drive_chip").length;
                        }
                        return 0;
                      }).map((newNumber) => numberCurrentDriveChips < newNumber).take(1);
                    }).take(1).filter(Boolean).takeUntilBy(composeViewDriver.getStopper()).onValue(() => logFunction("drive file added"));
                  }
                  function _setupAttachmentModalMonitoring(gmailDriver) {
                    (0, make_element_child_stream.A)(document.body).map((event) => event.el).filter((node) => node.getAttribute && node.getAttribute("role") === "alertdialog").takeUntilBy(gmailDriver.getStopper()).onValue((node) => {
                      var heading = node.querySelector("[role=heading]");
                      if (heading) {
                        if (heading.textContent.indexOf("exceeds the 25MB") > -1) {
                          gmailDriver.getLogger().eventSite("large attachment suggest drive");
                          return;
                        }
                      }
                      var body = node.querySelector(".Kj-JD-Jz");
                      if (body) {
                        if (body.textContent.indexOf("exceeds the maximum") > -1) {
                          gmailDriver.getLogger().eventSite("large attachment from drag and drop");
                          return;
                        }
                      }
                    });
                  }
                  function _setupDragDropMonitoring(gmailDriver) {
                    gmailDriver.getComposeViewDriverStream().flatMapLatest(() => {
                      return kefir_esm["default"].fromEvents(document.body, "dragenter").filter((event) => event.toElement).filter((event) => event.toElement.classList.contains("aC7") || event.toElement.classList.contains("aC9")).take(1);
                    }).takeUntilBy(gmailDriver.getStopper()).onValue(() => gmailDriver.getLogger().eventSite("compose drag file"));
                    gmailDriver.getComposeViewDriverStream().flatMapLatest(() => {
                      return kefir_esm["default"].fromEvents(document.body, "drop").filter((event) => event.toElement).filter((event) => event.toElement.classList.contains("aC7") || event.toElement.classList.contains("aC9")).take(1);
                    }).takeUntilBy(gmailDriver.getStopper()).onValue(() => gmailDriver.getLogger().eventSite("compose drop file"));
                  }
                  var isIntegratedViewGmail = __webpack_require__2(6908);
                  ;
                  async function isSidePanelCollapsed() {
                    const sidePanelSelector = ".brC-aT5-aOt-Jw[role=complementary]";
                    try {
                      await (0, wait_for.A)(() => document.querySelector(sidePanelSelector), 1e4);
                      await (0, wait_for.A)(() => document.querySelector(".aT5-aOt-I[role=button]"));
                    } catch (e) {
                      if (e instanceof wait_for.D) {
                        return null;
                      }
                      throw e;
                    }
                    const maybeCollapsedSidePanel = document.querySelector(`${sidePanelSelector}[style*="display: none;"]`);
                    return maybeCollapsedSidePanel != null;
                  }
                  async function gmailLoadEvent(driver) {
                    const pageCommunicator = driver.getPageCommunicator();
                    const isConversationViewDisabled = await pageCommunicator.isConversationViewDisabled();
                    await waitForMenuReady();
                    const isUsingDarkTheme = await checkForDarkThemeSafe();
                    const sidePanelCollapsed = await isSidePanelCollapsed();
                    const timing = performance?.timing;
                    driver.logger.eventSite("gmailSettings", {
                      /**
                       * Whether or not Google Chat, Google Meet, or both enabled. If they are, the SDK's
                       * AppMenu is available for the left nav.
                       */
                      isGmailIntegratedView: (0, isIntegratedViewGmail.Ay)(),
                      /**
                       * This is the panel on the left side of the screen. If the top left burger of Gmail is collapsed, then this is true.
                       */
                      isCollapsiblePanelHidden: (0, isIntegratedViewGmail.HW)(),
                      isGoogleChatEnabled: (0, isIntegratedViewGmail.Zu)(),
                      /**
                       * This is the sidePanel on the right side of the screen. The collapse button is at the bottom right corner of the screen.
                       */
                      isSidePanelCollapsed: sidePanelCollapsed,
                      isDarkTheme: isUsingDarkTheme,
                      screenWidth: window.screen?.width,
                      screenHeight: window.screen?.height,
                      windowWidth: window.innerWidth,
                      windowHeight: window.innerHeight,
                      language: pageCommunicator.getUserLanguage(),
                      previewPane: pageCommunicator.getUserOriginalPreviewPaneMode(),
                      isConversationViewDisabled,
                      wasAccountSwitcherReadyAtStart: driver.getEnvData().wasAccountSwitcherReadyAtStart,
                      timings: {
                        responseStart: timing?.responseStart,
                        responseEnd: timing?.responseEnd,
                        domLoading: timing?.domLoading,
                        domInteractive: timing?.domInteractive,
                        domComplete: timing?.domComplete,
                        domContentLoadedEventStart: timing?.domContentLoadedEventStart,
                        domContentLoadedEventEnd: timing?.domContentLoadedEventEnd,
                        domainLookupEnd: timing?.domainLookupEnd,
                        domainLookupStart: timing?.domainLookupStart,
                        fetchStart: timing?.fetchStart,
                        loadEventStart: timing?.loadEventStart,
                        loadEventEnd: timing?.loadEventEnd,
                        navigationStart: timing?.navigationStart,
                        requestStart: timing?.requestStart,
                        ...driver.getTimings()
                      }
                    });
                  }
                  ;
                  class ThreadRowIdentifier {
                    constructor(driver) {
                      this._driver = driver;
                      this._composeViews = /* @__PURE__ */ new Set();
                      this._driver.getComposeViewDriverStream().onValue((gmailComposeView) => {
                        this._composeViews.add(gmailComposeView);
                        gmailComposeView.getStopper().onValue(() => {
                          this._composeViews.delete(gmailComposeView);
                        });
                      });
                    }
                    getThreadIdForThreadRow(gmailThreadRowView, elements) {
                      {
                        const threadID = this._driver.getPageCommunicator().getThreadIdForThreadRowByDatabase(elements[0]);
                        if (threadID) {
                          return threadID;
                        }
                      }
                      if (gmailThreadRowView.getVisibleMessageCount() == 0 && gmailThreadRowView.getVisibleDraftCount() > 0) {
                        const composeView = this._findComposeForThreadRow(gmailThreadRowView);
                        if (composeView) {
                          return composeView.getMessageID();
                        }
                      }
                      if (false) {
                      }
                      return null;
                    }
                    async getDraftIdForThreadRow(gmailThreadRowView) {
                      if (gmailThreadRowView.getVisibleMessageCount() > 0 || gmailThreadRowView.getVisibleDraftCount() == 0) {
                        return Promise.resolve(null);
                      }
                      const composeView = this._findComposeForThreadRow(gmailThreadRowView);
                      if (composeView) {
                        return composeView.getDraftID();
                      }
                      const {
                        draftID
                      } = await this._driver.getDraftIDForMessageID(gmailThreadRowView.getThreadID());
                      return draftID;
                    }
                    _findComposeForThreadRow(gmailThreadRowView) {
                      const candidates = [];
                      const subject = gmailThreadRowView.getSubject();
                      for (const gmailComposeView of this._composeViews) {
                        if (subject === gmailComposeView.getSubject()) {
                          candidates.push(gmailComposeView);
                        }
                      }
                      if (candidates.length == 1) {
                        return candidates[0];
                      }
                      return null;
                    }
                  }
                  const thread_row_identifier = ThreadRowIdentifier;
                  var override_gmail_back_button = __webpack_require__2(2268);
                  var gmail_tooltip_view = __webpack_require__2(4806);
                  var dropdown_view = __webpack_require__2(3046);
                  ;
                  const BANNER_WIDTH_LIMIT = 900;
                  function monitorTopBannerSizeAndReact() {
                    const ResizeObserver = __webpack_require__2.g.ResizeObserver;
                    if (!ResizeObserver) return;
                    const body = document.body;
                    if (!body) return;
                    const banner = body.querySelector("[role=banner]");
                    if (!banner) return;
                    if (banner.hasAttribute("inboxsdk__resize_claimed")) return;
                    banner.setAttribute("inboxsdk__resize_claimed", "true");
                    const resizeObserver = new ResizeObserver(() => {
                      if (banner.clientWidth < BANNER_WIDTH_LIMIT) {
                        body.classList.add("inboxsdk__searchIsNarrow");
                      } else {
                        body.classList.remove("inboxsdk__searchIsNarrow");
                      }
                    });
                    resizeObserver.observe(banner);
                  }
                  ;
                  class GmailAppToolbarButtonView {
                    constructor(driver, inButtonDescriptor) {
                      __publicField(this, "_element", null);
                      this._driver = driver;
                      this._stopper = js_default()();
                      this._iconSettings = {};
                      inButtonDescriptor.takeUntilBy(this._stopper).onValue((buttonDescriptor) => {
                        try {
                          this._handleButtonDescriptor(buttonDescriptor);
                        } catch (err) {
                          this._driver.getLogger().error(err);
                        }
                      });
                      monitorTopBannerSizeAndReact();
                    }
                    destroy() {
                      this._stopper.destroy();
                      if (this._element) {
                        this._element.remove();
                      }
                      if (this._activeDropdown) {
                        this._activeDropdown.close();
                      }
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    getElement() {
                      return this._element;
                    }
                    open() {
                      try {
                        if (!this._activeDropdown) {
                          this._handleClick();
                        }
                      } catch (err) {
                        this._driver.getLogger().error(err);
                      }
                    }
                    close() {
                      try {
                        if (this._activeDropdown) {
                          this._handleClick();
                        }
                      } catch (err) {
                        this._driver.getLogger().error(err);
                      }
                    }
                    _handleButtonDescriptor(buttonDescriptor) {
                      if (!buttonDescriptor) {
                        throw new Error("The application passed an invalid value for buttonDescriptor");
                      }
                      const element = this._element = this._element || _createAppButtonElement(this._driver, () => {
                        this._handleClick();
                      });
                      this._buttonDescriptor = buttonDescriptor;
                      (0, update_icon.A)(this._iconSettings, (0, querySelectorOrFail.A)(element, "a"), false, buttonDescriptor.iconClass, buttonDescriptor.iconUrl);
                      _updateTitle((0, querySelectorOrFail.A)(element, "span"), buttonDescriptor);
                    }
                    _handleClick() {
                      const element = this._element;
                      if (!element) {
                        return;
                      }
                      const buttonDescriptor = this._buttonDescriptor;
                      if (!buttonDescriptor) {
                        throw new Error("app toolbar button clicked before receiving button descriptor");
                      }
                      if (this._activeDropdown) {
                        this._activeDropdown.close();
                      } else {
                        var appEvent = {};
                        var tooltipView = new gmail_tooltip_view.A();
                        tooltipView.getContainerElement().classList.add("inboxsdk__appButton_tooltip");
                        tooltipView.getContentElement().innerHTML = "";
                        if (buttonDescriptor.arrowColor) {
                          (0, querySelectorOrFail.A)(tooltipView.getContainerElement(), ".T-P-atC").style.borderTopColor = buttonDescriptor.arrowColor;
                        }
                        appEvent.dropdown = this._activeDropdown = new dropdown_view.A(tooltipView, element, {
                          manualPosition: true
                        });
                        appEvent.dropdown.on("destroy", () => {
                          this._activeDropdown = null;
                        });
                        if (buttonDescriptor.onClick) {
                          buttonDescriptor.onClick.call(null, appEvent);
                        }
                        if (this._element) {
                          tooltipView.anchor(this._element, {
                            position: "bottom",
                            offset: {
                              top: 8
                            }
                          });
                        }
                      }
                    }
                  }
                  function _createAppButtonElement(driver, onclick) {
                    const element = document.createElement("div");
                    element.setAttribute("class", "inboxsdk__appButton");
                    element.innerHTML = `<a href="#">
               <span class="inboxsdk__appButton_title"></span>
             </a>`;
                    element.addEventListener("click", (event) => {
                      event.preventDefault();
                      onclick(event);
                    });
                    const topAccountContainer = gmail_element_getter.A.getTopAccountContainer();
                    if (!topAccountContainer) {
                      const err = new Error("Could not make button");
                      const banner = document.querySelector("[role=banner]");
                      driver.getLogger().error(err, {
                        type: "failed to make appToolbarButton",
                        gbsfwPresent: !!document.getElementById("gbsfw"),
                        bannerHtml: banner && (0, censorHTMLtree.A)(banner)
                      });
                      throw err;
                    }
                    const insertionElement = topAccountContainer;
                    if (!insertionElement) {
                      const err = new Error("Could not make button");
                      driver.getLogger().error(err, {
                        type: "failed to make appToolbarButton",
                        topAccountContainerHTML: (0, censorHTMLtree.A)(topAccountContainer)
                      });
                      throw err;
                    }
                    try {
                      if (!gmail_element_getter.A.isGplusEnabled()) {
                        element.classList.add("inboxsdk__appButton_noGPlus");
                      }
                      insertionElement.insertBefore(element, insertionElement.lastElementChild);
                      return element;
                    } catch (err) {
                      driver.getLogger().error(err, {
                        type: "failed to make appToolbarButton",
                        insertionElementHTML: (0, censorHTMLtree.A)(insertionElement)
                      });
                      throw err;
                    }
                  }
                  function _updateTitle(element, descriptor) {
                    element.textContent = descriptor.title;
                    element.className = `inboxsdk__appButton_title ${descriptor.titleClass || ""}`;
                  }
                  ;
                  function addToolbarButtonForApp(gmailDriver, buttonDescriptor) {
                    return gmail_element_getter.A.waitForGmailModeToSettle().then(() => {
                      if (gmail_element_getter.A.isStandalone()) {
                        return new Promise((_resolve, _reject) => {
                        });
                      } else {
                        return new GmailAppToolbarButtonView(gmailDriver, buttonDescriptor);
                      }
                    });
                  }
                  ;
                  function getURLObject(url) {
                    const m = url.match(/#([^?]*)(?:\?(.*))?/);
                    if (!m) {
                      return {
                        name: "inbox",
                        params: [],
                        hash: "",
                        query: void 0
                      };
                    }
                    const hash = m[1];
                    const hashParts = hash.split("/");
                    return {
                      name: decodeURIComponent(hashParts[0]),
                      params: hashParts.slice(1).map((part) => part.replace(/\+/g, " ")).map(decodeURIComponent),
                      query: m[2],
                      hash
                    };
                  }
                  var memoize = __webpack_require__2(9513);
                  var memoize_default = /* @__PURE__ */ __webpack_require__2.n(memoize);
                  var escapeRegExp = __webpack_require__2(5098);
                  var escapeRegExp_default = /* @__PURE__ */ __webpack_require__2.n(escapeRegExp);
                  ;
                  const routeIDtoRegExp = memoize_default()((routeID) => new RegExp("^" + escapeRegExp_default()(routeID).replace(/\/:[^/]+/g, "/([^/]+)") + "/?$"));
                  function routeIDmatchesHash(routeID, hash) {
                    const routeIDs = Array.isArray(routeID) ? routeID : [routeID];
                    return find_default()(routeIDs, (routeID2) => hash.match(routeIDtoRegExp(routeID2)));
                  }
                  ;
                  function setupRouteViewDriverStream(gmailRouteProcessor, driver) {
                    const customRouteIDs = driver.getCustomRouteIDs();
                    const customListRouteIDs = driver.getCustomListRouteIDs();
                    const customListSearchStringsToRouteIds = driver.getCustomListSearchStringsToRouteIds();
                    let lastNativeHash = getURLObject(document.location.href).hash;
                    let latestGmailRouteView = null;
                    driver.getStopper().onValue(() => {
                      if (latestGmailRouteView) {
                        latestGmailRouteView.destroy();
                      }
                    });
                    let lastHash = lastNativeHash;
                    let sameRouteData = {};
                    const eligibleHashChanges = kefir_esm["default"].fromEvents(window, "hashchange").filter((event) => !event.oldURL.match(/#inboxsdk-fake-no-vc$/)).map((event) => ({
                      new: getURLObject(event.newURL),
                      old: getURLObject(event.oldURL)
                    })).filter((event) => event.new.hash !== event.old.hash).map((event) => event.new).map((urlObject) => {
                      const {
                        hash,
                        name
                      } = urlObject;
                      for (const routeIDs of customRouteIDs) {
                        const routeID = routeIDmatchesHash(routeIDs, hash);
                        if (routeID) {
                          return {
                            urlObject,
                            type: "CUSTOM",
                            routeID
                          };
                        }
                      }
                      for (const [routeIDs] of customListRouteIDs) {
                        const routeID = routeIDmatchesHash(routeIDs, name);
                        if (routeID) {
                          return {
                            urlObject,
                            type: "CUSTOM_LIST_TRIGGER",
                            routeID
                          };
                        }
                      }
                      if (gmailRouteProcessor.isNativeRoute(urlObject.name)) {
                        return {
                          urlObject,
                          type: "NATIVE"
                        };
                      }
                      return {
                        urlObject,
                        type: "OTHER_APP_CUSTOM"
                      };
                    });
                    const customAndCustomListRouteHashChanges = eligibleHashChanges.filter((_ref) => {
                      let {
                        type
                      } = _ref;
                      return type !== "NATIVE";
                    });
                    const revertNativeHashChanges = eligibleHashChanges.filter((_ref2) => {
                      let {
                        type
                      } = _ref2;
                      return type === "NATIVE";
                    }).filter((_ref3) => {
                      let {
                        urlObject
                      } = _ref3;
                      const tmp = lastNativeHash;
                      lastNativeHash = urlObject.hash;
                      return tmp === urlObject.hash;
                    }).filter((_ref4) => {
                      let {
                        urlObject
                      } = _ref4;
                      return urlObject.hash !== lastHash;
                    });
                    return kefir_esm["default"].merge([
                      customAndCustomListRouteHashChanges,
                      revertNativeHashChanges,
                      // when native gmail changes main view there's a div that takes on role=main.
                      // getMainContentElementChangedStream doesn't respect custom views so filter
                      // out events from it. This filter is needed if the user is already at a custom
                      // view of another InboxSDK instance while this starts up.
                      gmail_element_getter.A.getMainContentElementChangedStream().map((_event) => ({
                        urlObject: getURLObject(document.location.href),
                        type: "NATIVE"
                      })).filter((options2) => gmailRouteProcessor.isNativeRoute(options2.urlObject.name))
                    ]).map((options2) => {
                      const {
                        type,
                        urlObject
                      } = options2;
                      if (type === "NATIVE" && urlObject.name === "search") {
                        const customListRouteId = customListSearchStringsToRouteIds.get(urlObject.params[0]);
                        if (customListRouteId) {
                          const searchInput = gmail_element_getter.A.getSearchInput();
                          if (!searchInput) throw new Error("Should not happen");
                          searchInput.value = "";
                          if (urlObject.params.length === 1 || urlObject.params.length === 2 && urlObject.params[1][0] === "p") {
                            driver.hashChangeNoViewChange("#" + customListRouteId + (urlObject.params[1] ? "/" + urlObject.params[1] : ""));
                            return {
                              type: "CUSTOM_LIST",
                              urlObject,
                              routeID: customListRouteId
                            };
                          }
                        }
                      }
                      return options2;
                    }).map((options2) => {
                      const MAX_KEY_CACHE = 50;
                      const {
                        urlObject
                      } = options2;
                      if (!sameRouteData[urlObject.hash]) {
                        sameRouteData[urlObject.hash] = {
                          data: {}
                        };
                      }
                      sameRouteData[urlObject.hash].lastUsedTimestamp = Date.now();
                      if (Object.keys(sameRouteData).length > MAX_KEY_CACHE) {
                        sameRouteData = Object.keys(sameRouteData).sort((a, b) => sameRouteData[b].lastUsedTimestamp - sameRouteData[a].lastUsedTimestamp).slice(0, MAX_KEY_CACHE / 2).reduce((acc, hash) => ({
                          ...acc,
                          [hash]: sameRouteData[hash]
                        }), {});
                      }
                      return {
                        ...options2,
                        cachedRouteData: sameRouteData[urlObject.hash].data
                      };
                    }).map((options2) => {
                      if (options2.type === "NATIVE" || options2.type === "CUSTOM_LIST") {
                        driver.showNativeRouteView();
                      } else if (options2.type === "CUSTOM_LIST_TRIGGER") {
                        driver.showCustomThreadList(options2.routeID, (0, get_or_fail.A)(customListRouteIDs, options2.routeID), options2.urlObject.params);
                        return;
                      }
                      return new gmail_route_view(options2, gmailRouteProcessor, driver);
                    }).filter(isNotNil.A).map((gmailRouteView) => {
                      if (latestGmailRouteView) {
                        latestGmailRouteView.destroy();
                      }
                      latestGmailRouteView = gmailRouteView;
                      lastHash = getURLObject(document.location.href).hash;
                      return gmailRouteView;
                    });
                  }
                  ;
                  class NativeGmailNavItemView {
                    constructor(driver, nativeElement, navItemName) {
                      __publicField(this, "_activeMarkerElement", null);
                      __publicField(this, "_isActive", false);
                      __publicField(this, "_itemContainerElement", null);
                      this._driver = driver;
                      this._element = nativeElement;
                      this._eventStream = kefir_bus_default()();
                      this._elementBus = kefir_bus_default()();
                      this._elementStream = this._elementBus.toProperty(() => this._element);
                      this._navItemName = navItemName;
                      const parentElement = this._element.parentElement;
                      if (parentElement) {
                        (0, make_mutation_observer_chunked_stream.A)(parentElement, {
                          childList: true
                        }).map(() => parentElement.querySelector(`.aim a[href*="#${this._navItemName}"]`)).filter(isNotNil.A).map((link) => findParent(link, (el) => el.classList.contains("aim"))).filter(isNotNil.A).filter((newElement) => newElement !== this._element).onValue((newElement) => {
                          if (newElement) {
                            const currentContainerElement = this._itemContainerElement;
                            if (currentContainerElement) {
                              currentContainerElement.remove();
                              this._itemContainerElement = null;
                            }
                            this._elementBus.emit(newElement);
                          }
                        });
                      }
                      this._elementStream.onValue((element) => {
                        this._element = element;
                        this._monitorElementForActiveChanges();
                        this.setActive(this._isActive);
                      });
                    }
                    destroy() {
                      this._element.classList.remove("inboxsdk__navItem_claimed");
                      this._eventStream.end();
                      this._elementBus.end();
                      if (this._activeMarkerElement) this._activeMarkerElement.remove();
                      if (this._itemContainerElement) this._itemContainerElement.remove();
                    }
                    getElement() {
                      return this._element;
                    }
                    getEventStream() {
                      return this._eventStream;
                    }
                    addNavItem(orderGroup, navItemDescriptor) {
                      const gmailNavItemView = new GmailNavItemView(this._driver, orderGroup, 2);
                      kefir_esm.merge([gmailNavItemView.getEventStream().filter((event) => event.eventName === "orderChanged"), this._elementStream]).onValue(() => this._addNavItemElement(gmailNavItemView));
                      gmailNavItemView.setNavItemDescriptor(navItemDescriptor);
                      return gmailNavItemView;
                    }
                    setActive(value) {
                      this._isActive = value;
                      const toElement = (0, querySelectorOrFail.A)(this._element, ".TO");
                      if (value) {
                        this._element.classList.add("ain");
                        toElement.classList.add("nZ");
                        toElement.classList.add("aiq");
                      } else {
                        this._element.classList.remove("ain");
                        toElement.classList.remove("nZ");
                        toElement.classList.remove("aiq");
                      }
                      this._setHeights();
                    }
                    toggleCollapse() {
                      this._toggleCollapse();
                    }
                    setCollapsed(value) {
                      localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] = value;
                      if (!this._element.querySelector(".inboxsdk__expando")) {
                        return;
                      }
                      if (value) {
                        this._collapse();
                      } else {
                        this._expand();
                      }
                    }
                    remove() {
                    }
                    _monitorElementForActiveChanges() {
                      this._element.classList.add("inboxsdk__navItem_claimed");
                      const element = this._element;
                      const classChangeStream = (0, make_mutation_observer_chunked_stream.A)(element, {
                        attributes: true,
                        attributeFilter: ["class"]
                      }).takeUntilBy(this._eventStream.filter(() => false).beforeEnd(() => null)).toProperty(() => []).map(() => element);
                      classChangeStream.filter((el) => el.classList.contains("ain")).onValue(() => this._createActiveMarkerElement());
                      classChangeStream.filter((el) => !el.classList.contains("ain")).onValue(() => this._removeActiveMarkerElement());
                    }
                    _addNavItemElement(gmailNavItemView) {
                      const itemContainerElement = this._getItemContainerElement();
                      const insertBeforeElement = getInsertBeforeElement(gmailNavItemView.getElement(), itemContainerElement.children, ["data-group-order-hint", "data-order-hint", "data-insertion-order-hint"]);
                      itemContainerElement.insertBefore(gmailNavItemView.getElement(), insertBeforeElement);
                      if (!gmailNavItemView.isSection()) {
                        const element = gmailNavItemView.getElement();
                        (0, querySelectorOrFail.A)(element, ".TN").style.marginLeft = getLeftIndentationPaddingValue() + "px";
                      }
                      this._setHeights();
                    }
                    _getItemContainerElement() {
                      let itemContainerElement = this._itemContainerElement;
                      if (!itemContainerElement) {
                        itemContainerElement = this._itemContainerElement = this._element.querySelector(".inboxsdk__navItem_container");
                        if (!itemContainerElement) {
                          itemContainerElement = this._createItemContainerElement();
                          this._createExpando();
                        }
                      }
                      return itemContainerElement;
                    }
                    _createItemContainerElement() {
                      const itemContainerElement = this._itemContainerElement = document.createElement("div");
                      itemContainerElement.classList.add("inboxsdk__navItem_container");
                      this._element.appendChild(itemContainerElement);
                      return itemContainerElement;
                    }
                    _createExpando() {
                      const link = this._element.querySelector("a");
                      const expandoElement = document.createElement("div");
                      expandoElement.setAttribute("class", "TH aih J-J5-Ji inboxsdk__expando");
                      expandoElement.setAttribute("role", "link");
                      expandoElement.title = `Expand ${link ? link.title || link.textContent : ""}`;
                      expandoElement.addEventListener("click", (e) => {
                        this._toggleCollapse();
                        e.stopPropagation();
                        e.preventDefault();
                        e.stopImmediatePropagation();
                      }, true);
                      const insertionPoint = this._element.querySelector(".TN");
                      if (insertionPoint) {
                        insertionPoint.insertAdjacentElement("afterbegin", expandoElement);
                      }
                      if (localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] === "collapsed") {
                        this._collapse();
                      } else {
                        this._expand();
                      }
                    }
                    _toggleCollapse() {
                      if (!this._element.querySelector(".inboxsdk__expando")) {
                        if (localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] === "collapsed") {
                          localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] = "expanded";
                        } else {
                          localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] = "collapsed";
                        }
                        return;
                      }
                      if (localStorage["inboxsdk__nativeNavItem__state_" + this._navItemName] === "collapsed") {
                        this._expand();
                      } else {
                        this._collapse();
                      }
                    }
                    _collapse() {
                      const expandoElement = (0, querySelectorOrFail.A)(this._element, ".inboxsdk__expando");
                      expandoElement.classList.remove("aih");
                      expandoElement.classList.add("aii");
                      if (this._itemContainerElement) this._itemContainerElement.style.display = "none";
                      localStorage.setItem("inboxsdk__nativeNavItem__state_" + this._navItemName, "collapsed");
                      this._eventStream.emit({
                        eventName: "collapsed"
                      });
                      this._setHeights();
                    }
                    _expand() {
                      const expandoElement = (0, querySelectorOrFail.A)(this._element, ".inboxsdk__expando");
                      expandoElement.classList.add("aih");
                      expandoElement.classList.remove("aii");
                      if (this._itemContainerElement) this._itemContainerElement.style.display = "";
                      localStorage.setItem("inboxsdk__nativeNavItem__state_" + this._navItemName, "expanded");
                      this._eventStream.emit({
                        eventName: "expanded"
                      });
                      this._setHeights();
                    }
                    _isExpanded() {
                      return !!this._element.querySelector(".inboxsdk__expando.aih");
                    }
                    _setHeights() {
                      if (this._element.classList.contains("ain") && this._itemContainerElement) {
                        const toElement = (0, querySelectorOrFail.A)(this._element, ".TO");
                        this._element.style.height = "";
                        const totalHeight = this._element.clientHeight;
                        const itemHeight = toElement.clientHeight;
                        this._element.style.height = itemHeight + "px";
                        this._element.style.overflow = "visible";
                        this._element.style.marginBottom = totalHeight - itemHeight + "px";
                      } else {
                        this._element.style.height = "";
                        this._element.style.overflow = "";
                        this._element.style.marginBottom = "";
                      }
                    }
                    _createActiveMarkerElement() {
                      this._removeActiveMarkerElement();
                      const activeMarkerElement = this._activeMarkerElement = document.createElement("div");
                      activeMarkerElement.classList.add("inboxsdk__navItem_marker");
                      activeMarkerElement.classList.add("ain");
                      activeMarkerElement.innerHTML = "&nbsp;";
                      this._element.insertBefore(activeMarkerElement, this._element.firstElementChild);
                    }
                    _removeActiveMarkerElement() {
                      const activeMarkerElement = this._activeMarkerElement;
                      if (activeMarkerElement) {
                        activeMarkerElement.remove();
                        this._activeMarkerElement = null;
                      }
                    }
                  }
                  ;
                  function getNativeNavItem(driver, label) {
                    return (0, wait_for.A)(() => {
                      const navContainer = gmail_element_getter.A.getLeftNavContainerElement();
                      if (!navContainer) return null;
                      return navContainer.querySelector(`.aim a[href*="#${label}"]`);
                    }, 300 * 1e3).then((labelLinkElement) => {
                      const labelElement = findParent(labelLinkElement, (el) => el.classList.contains("aim"));
                      if (!labelElement) {
                        throw new Error("native nav item structured weird");
                      }
                      if (!labelElement.__nativeGmailNavItemView) {
                        labelElement.__nativeGmailNavItemView = new NativeGmailNavItemView(driver, labelElement, label);
                      }
                      return labelElement.__nativeGmailNavItemView;
                    }).catch((err) => {
                      if (gmail_element_getter.A.isStandalone()) {
                        return new Promise((_resolve, _reject) => {
                        });
                      }
                      throw err;
                    });
                  }
                  ;
                  function populateRouteID(routeID, params) {
                    const paramsObject = params || {};
                    const usedParams = /* @__PURE__ */ new Set();
                    const result = routeID.replace(/:([^/]+)/g, (whole, term) => {
                      if (term in paramsObject) {
                        usedParams.add(term);
                        return encodeURIComponent(String(paramsObject[term]));
                      } else {
                        throw new Error(`Missing param: ${term}`);
                      }
                    });
                    if (Object.keys(paramsObject).length !== usedParams.size) {
                      throw new Error("Extra parameters given");
                    }
                    return result;
                  }
                  ;
                  function createLink(GmailRouteProcessor2, routeID, params) {
                    params = typeof params === "string" ? params : params ? Object.assign({}, params) : {};
                    routeID = GmailRouteProcessor2.getCompatibleRouteID(routeID);
                    if (typeof params === "string") {
                      var matches = routeID.match(/:/g);
                      if (matches && matches.length === 1) {
                        var paramValue = params;
                        params = {};
                        params[routeID.match(/:(\w+)($|\/)?/)[1]] = paramValue;
                      } else {
                        params = {};
                      }
                    }
                    const hasPageParam = routeID.match(/:page(?:\/|$)/);
                    if (hasPageParam && !params.page) {
                      params.page = 0;
                    }
                    const parts = routeID.split("/");
                    let processedRoute;
                    try {
                      processedRoute = populateRouteID(routeID, params);
                    } catch (error) {
                      lib_logger.A.error(error, {
                        routeID,
                        paramsKey: Object.keys(params)
                      });
                      processedRoute = parts.map(function(part) {
                        if (part.indexOf(":") === -1) {
                          return part;
                        }
                        const colonParts = part.split(":");
                        if (params && typeof params[colonParts[1]] !== "undefined") {
                          return colonParts[0] + params[colonParts[1]];
                        }
                        return colonParts[0];
                      }).map(encodeURIComponent).join("/");
                    }
                    if (GmailRouteProcessor2.isListRouteName(parts[0]) && processedRoute.indexOf("p0") === processedRoute.length - 2) {
                      processedRoute = processedRoute.substring(0, processedRoute.length - 3);
                    }
                    return "#" + processedRoute;
                  }
                  ;
                  function registerSearchQueryRewriter(pageCommunicator, obj) {
                    pageCommunicator.createCustomSearchTerm(obj.term);
                    pageCommunicator.ajaxInterceptStream.filter((event) => {
                      return event.type === "searchQueryForReplacement" && event.term === obj.term;
                    }).onValue((event) => {
                      Promise.resolve(obj.termReplacer({})).then((result) => {
                        if (typeof result != "string") {
                          throw new Error("termReplacer response must be a string");
                        }
                        const newTerm = "(" + result + ")";
                        const newQuery = event.query.replace(
                          obj.term,
                          () => newTerm
                          // Callback used so $ escapes aren't interpreted
                        );
                        pageCommunicator.setSearchQueryReplacement(event.query, newQuery);
                      });
                    });
                  }
                  ;
                  async function openComposeWindow(_gmailDriver) {
                    await gmail_element_getter.A.waitForGmailModeToSettle();
                    if (gmail_element_getter.A.isStandaloneComposeWindow() || gmail_element_getter.A.isStandaloneThreadWindow()) {
                      throw new Error("Can not open new compose while in standalone window");
                    }
                    if (!gmail_element_getter.A.getComposeButton()) {
                      await (0, wait_for.A)(() => !!gmail_element_getter.A.getComposeButton());
                    }
                    const composeButton = gmail_element_getter.A.getComposeButton();
                    if (!composeButton) throw new Error("Could not find compose button");
                    (0, simulate_mouse_event.jp)(composeButton);
                  }
                  var gmail_app_sidebar_view = __webpack_require__2(2893);
                  ;
                  function suppressAddon(driver, addonTitle) {
                    (0, stream_wait_for.A)(() => gmail_element_getter.A.getCompanionSidebarIconContainerElement()).map((iconContainerElement) => {
                      const elementToWatch = iconContainerElement.querySelector(".J-KU-Jg, [role=tablist], .brC-bsf-aT5-aOt");
                      if (!elementToWatch) {
                        driver.getLogger().error(new Error("_waitForAddonTitleAndSuppress: elementToWatch not found"));
                        return null;
                      }
                      return elementToWatch;
                    }).filter().flatMap(make_element_child_stream.A).filter((_ref) => {
                      let {
                        el
                      } = _ref;
                      return el.getAttribute("role") === "tab" && (el.getAttribute("data-tooltip") || el.getAttribute("aria-label")) === addonTitle;
                    }).takeUntilBy(driver.getStopper()).onValue((_ref2) => {
                      let {
                        el
                      } = _ref2;
                      if (el.classList.contains("J-KU-KO") || // old pre-2018-07-30 classname?
                      el.classList.contains("bse-bvF-I-KO") || // old pre-2018-10-15 classname?
                      el.classList.contains("aT5-aOt-I-KO")) {
                        (0, simulate_mouse_event.jp)(el);
                      }
                      el.style.display = "none";
                    }).onError((err) => {
                      driver.getLogger().error(err, "error in suppressAddon");
                    });
                  }
                  var getAccountUrlPart = __webpack_require__2(8105);
                  ;
                  async function getThreadFromSyncThreadId(driver, syncThreadId) {
                    const [btaiHeader, xsrfToken] = await Promise.all([driver.getPageCommunicator().getBtaiHeader(), driver.getPageCommunicator().getXsrfToken()]);
                    return getThreadFromSyncThreadIdUsingHeaders(syncThreadId, btaiHeader, xsrfToken);
                  }
                  async function getThreadFromSyncThreadIdUsingHeaders(syncThreadId, btaiHeader, xsrfToken) {
                    let responseText = null;
                    try {
                      const {
                        text
                      } = await (0, gmailAjax.A)({
                        method: "POST",
                        url: `https://mail.google.com/sync${(0, getAccountUrlPart.A)()}/i/fd`,
                        headers: {
                          "Content-Type": "application/json",
                          "X-Framework-Xsrf-Token": xsrfToken,
                          "X-Gmail-BTAI": btaiHeader,
                          "X-Google-BTD": "1"
                        },
                        data: JSON.stringify({
                          "1": [{
                            "1": syncThreadId,
                            "2": 1
                          }]
                        })
                      });
                      responseText = text;
                    } catch (err) {
                      const {
                        text
                      } = await (0, gmailAjax.A)({
                        method: "POST",
                        url: `https://mail.google.com/sync${(0, getAccountUrlPart.A)()}/i/fd?rt=r&pt=ji`,
                        headers: {
                          "Content-Type": "application/json",
                          "X-Framework-Xsrf-Token": xsrfToken,
                          "X-Gmail-BTAI": btaiHeader,
                          "X-Google-BTD": "1"
                        },
                        data: JSON.stringify([[[syncThreadId, 1]], 2])
                      });
                      responseText = text;
                    }
                    const threadDescriptors = (0, gmail_sync_response_processor.gb)(responseText);
                    if (threadDescriptors.length > 0) {
                      const thread = threadDescriptors[0];
                      if (thread.oldGmailThreadID) {
                        return thread;
                      }
                    }
                    return null;
                  }
                  var bignumber = __webpack_require__2(2180);
                  var bignumber_default = /* @__PURE__ */ __webpack_require__2.n(bignumber);
                  ;
                  async function getSyncThreadForOldGmailThreadId(driver, oldGmailThreadId) {
                    const {
                      threads: threadDescriptors,
                      _text
                    } = await (0, getSyncThreadsForSearch.A)(driver, "threadid:" + new (bignumber_default())(oldGmailThreadId, 16).toString(10));
                    const firstThread = threadDescriptors[0];
                    if (firstThread == null) {
                      console.error(`Thread with ID ${oldGmailThreadId} not found by Gmail`);
                      const isStreak = (0, isStreakAppId.A)(driver.getAppId());
                      const err = new Error("Thread not found by getSyncThreadForOldGmailThreadId");
                      driver.getLogger().error(err, {
                        oldGmailThreadId: isStreak ? oldGmailThreadId : null,
                        responseText: isStreak ? _text : null
                      });
                      throw err;
                    }
                    return firstThread;
                  }
                  var live_set = __webpack_require__2(2436);
                  var live_set_default = /* @__PURE__ */ __webpack_require__2.n(live_set);
                  ;
                  function toLiveSet(itemWithLifetimeStream) {
                    return new (live_set_default())({
                      read() {
                        throw new Error("should not happen; liveset was inactive");
                      },
                      listen(setValues, controller) {
                        setValues(/* @__PURE__ */ new Set());
                        const sub = itemWithLifetimeStream.observe({
                          value(_ref) {
                            let {
                              el,
                              removalStream
                            } = _ref;
                            controller.add(el);
                            removalStream.take(1).onValue(() => {
                              controller.remove(el);
                            });
                          }
                        });
                        return () => {
                          sub.unsubscribe();
                        };
                      }
                    });
                  }
                  ;
                  async function getPersonDetails(driver, emailAddress) {
                    const headers = driver.getPageCommunicator().getGoogleRequestHeaders();
                    const requestBody = [[emailAddress], 2, null, null, [null, null, null, ["GMAIL_COMPOSE_WEB_POPULOUS", null, 2]], [[["person.name", "person.photo", "person.email", "person.phone", "person.email.certificate", "person.metadata", "person.name.metadata.verified", "person.email.metadata.verified", "person.phone.metadata.verified"]], null, [2, 1, 7, 8, 10], null, null, []], [], [null, null, [], null, null, [2], [[1]], null, [3]], [[23, 36, 14, 15]], [], null, null, null, null, null, [null, [null, 2]], null, []];
                    const response = await fetch("https://people-pa.clients6.google.com/$rpc/google.internal.people.v2.minimal.InternalPeopleMinimalService/ListPeopleByKnownId", {
                      headers: {
                        ...headers,
                        accept: "*/*",
                        "content-type": "application/json+protobuf",
                        "x-goog-authuser": "0",
                        "x-user-agent": "grpc-web-javascript/0.1"
                      },
                      body: JSON.stringify(requestBody),
                      method: "POST",
                      credentials: "include"
                    });
                    if (!response.ok) {
                      throw new Error(`Bad response from Google People API: ${response.status} ${response.statusText}`);
                    }
                    return parseListPeopleByKnownIdResponse(await response.json());
                  }
                  function parseListPeopleByKnownIdResponse(data) {
                    const mainList = data[1]?.[0]?.[1];
                    if (!mainList) {
                      return void 0;
                    }
                    const response = {};
                    const nameBlock = mainList[2];
                    if (nameBlock) {
                      const firstEntry = nameBlock[0];
                      if (firstEntry) {
                        const fullName = firstEntry[1];
                        if (typeof fullName === "string") {
                          response.fullName = fullName;
                        }
                        const firstName = firstEntry[3];
                        if (typeof firstName === "string") {
                          response.firstName = firstName;
                        }
                        const lastName = firstEntry[4];
                        if (typeof lastName === "string") {
                          response.lastName = lastName;
                        }
                        const nameSortOrder = firstEntry[5]?.[13];
                        if (typeof nameSortOrder === "string") {
                          response.fullNameSortOrder = nameSortOrder;
                        }
                      }
                    }
                    const avatarBlock = mainList[3];
                    if (avatarBlock) {
                      const imageUrl = avatarBlock[0]?.[1];
                      if (typeof imageUrl === "string") {
                        response.imageUrl = imageUrl;
                      }
                    }
                    return response;
                  }
                  ;
                  class GmailDriver {
                    constructor(appId, LOADER_VERSION, IMPL_VERSION, logger, opts, envData) {
                      __privateAdd(this, _GmailDriver_instances);
                      __privateAdd(this, _gmailTheme, {
                        isDarkMode: {
                          frame: false,
                          body: false
                        }
                      });
                      __privateAdd(this, _appId5);
                      __privateAdd(this, _logger);
                      __privateAdd(this, _opts);
                      __privateAdd(this, _envData);
                      __privateAdd(this, _customRouteIDs, /* @__PURE__ */ new Set());
                      __privateAdd(this, _customListRouteIDs, /* @__PURE__ */ new Map());
                      __privateAdd(this, _customListSearchStringsToRouteIds, /* @__PURE__ */ new Map());
                      __privateAdd(this, _messageIDsToThreadIDs, /* @__PURE__ */ new Map());
                      __privateAdd(this, _threadRowIdentifier);
                      __privateAdd(this, _gmailRouteProcessor);
                      __privateAdd(this, _keyboardShortcutHelpModifier);
                      __privateAdd(this, _page3);
                      __privateAdd(this, _pageCommunicator);
                      __privateAdd(this, _pageCommunicatorPromise);
                      __privateAdd(this, _butterBar);
                      __privateAdd(this, _butterBarDriver);
                      __privateAdd(this, _routeViewDriverStream2);
                      __privateAdd(this, _rowListViewDriverStream);
                      __privateAdd(this, _threadRowViewDriverKefirStream);
                      __privateAdd(this, _threadViewDriverLiveSet);
                      __privateAdd(this, _toolbarViewDriverLiveSet);
                      __privateAdd(this, _composeViewDriverStream);
                      __privateAdd(this, _xhrInterceptorStream);
                      __privateAdd(this, _messageViewDriverStream);
                      __privateAdd(this, _stopper6, js_default()());
                      __privateAdd(this, _navMarkerHiddenChanged, kefir_bus_default()());
                      __privateAdd(this, _addonSidebarHiddenChanged, kefir_bus_default()());
                      __privateAdd(this, _userInfo);
                      __privateAdd(this, _timestampAccountSwitcherReady);
                      __privateAdd(this, _timestampGlobalsFound);
                      __privateAdd(this, _timestampOnready);
                      __privateAdd(this, _lastCustomThreadListActivity);
                      __privateAdd(this, _currentRouteViewDriver2);
                      __privateAdd(this, _appSidebarView, null);
                      __privateAdd(this, _recentSyncDraftIds, /* @__PURE__ */ new Map());
                      __privateAdd(this, _selectedThreadRows, transducers_default().mapcat((gmailRowListView) => gmailRowListView.getSelectedThreadRowViewDrivers()));
                      __privateAdd(this, _threadRowViewSelectionChanges, kefir_bus_default()());
                      __privateSet(this, _appId5, appId);
                      __privateSet(this, _logger, logger);
                      __privateSet(this, _opts, opts);
                      __privateSet(this, _envData, envData);
                      __privateSet(this, _page3, (0, makePageParserTree.A)(this, document));
                      __privateGet(this, _stopper6).onValue(() => __privateGet(this, _page3).dump());
                      {
                        const rfcIdCache = new (bimapcache_js_default())({
                          key: "inboxsdk__cached_thread_ids",
                          getAfromB: (gmailThreadId) => getRfcMessageIdForGmailThreadId(this, gmailThreadId),
                          getBfromA: (rfcMessageId) => (0, getGmailThreadIdForRfcMessageId.A)(this, rfcMessageId)
                        });
                        this.getGmailThreadIdForRfcMessageId = (rfcMessageId) => rfcIdCache.getBfromA(rfcMessageId);
                        this.getRfcMessageIdForGmailThreadId = (gmailThreadId) => rfcIdCache.getAfromB(gmailThreadId);
                      }
                      {
                        const syncThreadIdToOldGmailThreadIdCache = new (bimapcache_js_default())({
                          key: "inboxsdk__cached_sync_thread_id_old_gmail_thread_id",
                          getAfromB: (oldGmailThreadId) => {
                            return getSyncThreadForOldGmailThreadId(this, oldGmailThreadId).then((_ref) => {
                              let {
                                syncThreadID
                              } = _ref;
                              return syncThreadID;
                            });
                          },
                          getBfromA: (syncThreadID) => {
                            return getThreadFromSyncThreadId(this, syncThreadID).then((syncThread) => {
                              if (syncThread) return syncThread.oldGmailThreadID;
                              else throw new Error("syncThread not found");
                            });
                          }
                        });
                        this.getSyncThreadIdForOldGmailThreadId = (oldGmailThreadId) => syncThreadIdToOldGmailThreadIdCache.getAfromB(oldGmailThreadId);
                        this.getOldGmailThreadIdFromSyncThreadId = (syncThreadId) => syncThreadIdToOldGmailThreadIdCache.getBfromA(syncThreadId);
                        this.removeCachedOldGmailThreadIdFromSyncThreadId = (syncThreadId) => syncThreadIdToOldGmailThreadIdCache.removeAfromCache(syncThreadId);
                      }
                      {
                        const gmailMessageIdForSyncMessageIdCache = new (bimapcache_js_default())({
                          key: "inboxsdk__cached_gmail_and_inbox_message_ids_3",
                          getAfromB: (sync) => (0, getGmailMessageIdForSyncMessageId.A)(this, sync),
                          getBfromA() {
                            throw new Error("should not happen");
                          }
                        });
                        this.getGmailMessageIdForSyncMessageId = (syncMessageId) => gmailMessageIdForSyncMessageIdCache.getAfromB(syncMessageId);
                        this.removeCachedGmailMessageIdForSyncMessageId = (syncMessageId) => gmailMessageIdForSyncMessageIdCache.removeBfromCache(syncMessageId);
                        this.getGmailMessageIdForSyncDraftId = (syncDraftId) => (0, getGmailMessageIdForSyncMessageId.A)(this, syncDraftId);
                      }
                      __privateSet(this, _gmailRouteProcessor, new GmailRouteProcessor());
                      __privateSet(this, _keyboardShortcutHelpModifier, new KeyboardShortcutHelpModifier());
                      __privateSet(this, _butterBarDriver, new GmailButterBarDriver());
                      kefir_esm.later(45 * 1e3, void 0).takeUntilBy((0, toItemWithLifetimeStream.A)(__privateGet(this, _page3).tree.getAllByTag("supportMenu"))).onValue(() => {
                        __privateGet(this, _logger).errorSite(new Error("Failed to find gmail supportMenu"));
                      });
                      __privateMethod(this, _GmailDriver_instances, setupEventStreams_fn).call(this);
                      this.onready.then(() => {
                        trackEvents(this);
                        gmailLoadEvent(this);
                        (0, override_gmail_back_button.A)(this, __privateGet(this, _gmailRouteProcessor));
                        trackGmailStyles();
                        temporaryTrackDownloadUrlValidity(this);
                        if (opts.suppressAddonTitle != null) {
                          suppressAddon(this, opts.suppressAddonTitle);
                        }
                      }).catch((err) => {
                        __privateGet(this, _logger).error(err);
                      });
                    }
                    destroy() {
                      __privateGet(this, _threadRowViewSelectionChanges).end();
                      __privateGet(this, _keyboardShortcutHelpModifier).destroy();
                      __privateGet(this, _stopper6).destroy();
                      (0, gmail_thread_row_view.v)();
                    }
                    getAppId() {
                      return __privateGet(this, _appId5);
                    }
                    getOpts() {
                      return __privateGet(this, _opts);
                    }
                    getPageCommunicator() {
                      return __privateGet(this, _pageCommunicator);
                    }
                    getPageCommunicatorPromise() {
                      return __privateGet(this, _pageCommunicatorPromise);
                    }
                    get logger() {
                      return __privateGet(this, _logger);
                    }
                    getLogger() {
                      return __privateGet(this, _logger);
                    }
                    getTagTree() {
                      return __privateGet(this, _page3).tree;
                    }
                    getCustomListSearchStringsToRouteIds() {
                      return __privateGet(this, _customListSearchStringsToRouteIds);
                    }
                    getThreadRowIdentifier() {
                      return __privateGet(this, _threadRowIdentifier);
                    }
                    getButterBarDriver() {
                      return __privateGet(this, _butterBarDriver);
                    }
                    getButterBar() {
                      return __privateGet(this, _butterBar);
                    }
                    setButterBar(bb) {
                      __privateSet(this, _butterBar, bb);
                    }
                    getCustomRouteIDs() {
                      return __privateGet(this, _customRouteIDs);
                    }
                    getCustomListRouteIDs() {
                      return __privateGet(this, _customListRouteIDs);
                    }
                    getKeyboardShortcutHelpModifier() {
                      return __privateGet(this, _keyboardShortcutHelpModifier);
                    }
                    getRouteViewDriverStream() {
                      return __privateGet(this, _routeViewDriverStream2);
                    }
                    getThreadRowViewDriverStream() {
                      return __privateGet(this, _threadRowViewDriverKefirStream);
                    }
                    getThreadViewDriverStream() {
                      return (0, toItemWithLifetimeStream.A)(__privateGet(this, _threadViewDriverLiveSet)).map((_ref2) => {
                        let {
                          el
                        } = _ref2;
                        return el;
                      });
                    }
                    getAttachmentCardViewDriverStream() {
                      return __privateGet(this, _messageViewDriverStream).flatMap((messageViewDriver) => messageViewDriver.isLoaded() ? kefir_esm.constant(messageViewDriver) : messageViewDriver.getEventStream().filter((event) => event.eventName === "messageLoad").map(() => messageViewDriver).take(1)).map((messageView) => messageView.getAttachmentCardViewDrivers()).flatten();
                    }
                    getComposeViewDriverStream() {
                      return __privateGet(this, _composeViewDriverStream);
                    }
                    getXhrInterceptorStream() {
                      return __privateGet(this, _xhrInterceptorStream);
                    }
                    getMessageViewDriverStream() {
                      return __privateGet(this, _messageViewDriverStream);
                    }
                    getStopper() {
                      return __privateGet(this, _stopper6);
                    }
                    getEnvData() {
                      return __privateGet(this, _envData);
                    }
                    getTimestampOnReady() {
                      if (__privateGet(this, _timestampOnready) == null) {
                        __privateGet(this, _logger).error(new Error("getTimestampOnReady called before ready"));
                        return Date.now();
                      }
                      return __privateGet(this, _timestampOnready);
                    }
                    // Returns a stream that emits an event once at least `time` milliseconds has
                    // passed since the GmailDriver's ready event.
                    delayToTimeAfterReady(time) {
                      const targetTime = this.getTimestampOnReady() + time;
                      const timeToWait = Math.max(0, targetTime - Date.now());
                      return kefir_esm.later(timeToWait, void 0);
                    }
                    getTimings() {
                      return {
                        piMainStarted: __privateGet(this, _envData).piMainStarted,
                        piLoadStarted: __privateGet(this, _envData).piLoadStarted,
                        globalsFound: __privateGet(this, _timestampGlobalsFound),
                        accountSwitcherReady: __privateGet(this, _timestampAccountSwitcherReady),
                        onready: __privateGet(this, _timestampOnready)
                      };
                    }
                    registerThreadButton(options2) {
                      const unregister = js_default()();
                      const removeButtonOnUnregister = (button) => {
                        unregister.takeUntilBy(button.getStopper()).onValue(() => {
                          button.destroy();
                        });
                      };
                      const toolbarViewSub = toValueObservable_default()(__privateGet(this, _toolbarViewDriverLiveSet)).subscribe((_ref3) => {
                        let {
                          value: gmailToolbarView
                        } = _ref3;
                        if (gmailToolbarView.isForThread()) {
                          if (!options2.positions || includes_default()(options2.positions, "THREAD")) {
                            removeButtonOnUnregister(gmailToolbarView.addButton({
                              ...options2,
                              section: options2.threadSection || "METADATA_STATE",
                              onClick: (event) => {
                                options2.onClick({
                                  position: "THREAD",
                                  dropdown: event.dropdown,
                                  selectedThreadViewDrivers: [gmailToolbarView.getThreadViewDriver()],
                                  selectedThreadRowViewDrivers: []
                                });
                              }
                            }));
                          }
                        } else if (gmailToolbarView.isForRowList()) {
                          if (!options2.positions || includes_default()(options2.positions, "LIST")) {
                            removeButtonOnUnregister(gmailToolbarView.addButton({
                              ...options2,
                              section: options2.listSection || "METADATA_STATE",
                              onClick: (event) => {
                                const selectedThreadRowViewDrivers = Array.from(gmailToolbarView.getThreadRowViewDrivers()).filter((gmailThreadRow) => gmailThreadRow.isSelected());
                                options2.onClick({
                                  position: "LIST",
                                  dropdown: event.dropdown,
                                  selectedThreadViewDrivers: [],
                                  selectedThreadRowViewDrivers
                                });
                              }
                            }));
                          }
                        }
                      });
                      unregister.onValue(() => {
                        toolbarViewSub.unsubscribe();
                      });
                      if (!options2.positions || includes_default()(options2.positions, "ROW")) {
                        const perThreadRow = (gmailThreadRow) => {
                          gmailThreadRow.addButton(kefir_esm.constant({
                            hasDropdown: options2.hasDropdown,
                            iconClass: options2.iconClass,
                            iconUrl: options2.iconUrl,
                            title: options2.title,
                            orderHint: options2.orderHint,
                            onClick: (event) => {
                              if (!options2.onClick) return;
                              options2.onClick({
                                position: "ROW",
                                dropdown: event.dropdown,
                                selectedThreadViewDrivers: [],
                                selectedThreadRowViewDrivers: [gmailThreadRow]
                              });
                            }
                          }).merge(unregister));
                        };
                        if (__privateGet(this, _currentRouteViewDriver2)) {
                          __privateGet(this, _currentRouteViewDriver2).getRowListViews().forEach((gmailRowListView) => {
                            gmailRowListView.getThreadRowViewDrivers().forEach(perThreadRow);
                          });
                        }
                        const threadRowViewSub = __privateGet(this, _threadRowViewDriverKefirStream).observe({
                          value: perThreadRow
                        });
                        unregister.onValue(() => {
                          threadRowViewSub.unsubscribe();
                        });
                      }
                      return () => {
                        unregister.destroy();
                      };
                    }
                    hashChangeNoViewChange(hash) {
                      if (hash[0] !== "#") {
                        throw new Error("bad hash");
                      }
                      window.history.replaceState(null, null, hash);
                      var hce = new window.HashChangeEvent("hashchange", {
                        oldURL: document.location.href.replace(/#.*$/, "") + "#inboxsdk-fake-no-vc",
                        newURL: document.location.href.replace(/#.*$/, "") + hash
                      });
                      window.dispatchEvent(hce);
                    }
                    addCustomRouteID(routeID) {
                      __privateGet(this, _customRouteIDs).add(routeID);
                      __privateGet(this, _pageCommunicator).registerAllowedHashLinkStartTerm(routeID.split("/")[0]);
                      return () => {
                        __privateGet(this, _customRouteIDs).delete(routeID);
                      };
                    }
                    addCustomListRouteID(routeID, handler) {
                      __privateGet(this, _customListRouteIDs).set(routeID, handler);
                      __privateGet(this, _pageCommunicator).registerAllowedHashLinkStartTerm(routeID.split("/")[0]);
                      return () => {
                        __privateGet(this, _customListRouteIDs).delete(routeID);
                      };
                    }
                    signalCustomThreadListActivity(customRouteID) {
                      __privateSet(this, _lastCustomThreadListActivity, {
                        customRouteID,
                        timestamp: /* @__PURE__ */ new Date()
                      });
                    }
                    // Returns the last time a request for a custom thread list search has gone
                    // out or we got a response, and the customRouteID for that.
                    getLastCustomThreadListActivity() {
                      return __privateGet(this, _lastCustomThreadListActivity);
                    }
                    showCustomThreadList(customRouteID, onActivate, params) {
                      showCustomThreadList(this, customRouteID, onActivate, params);
                    }
                    showCustomRouteView(element) {
                      (0, show_custom_route_view.A)(this, element);
                    }
                    showNativeRouteView() {
                      showNativeRouteView(this);
                    }
                    createLink(routeID, params) {
                      return createLink(__privateGet(this, _gmailRouteProcessor), routeID, params);
                    }
                    goto(routeID, params) {
                      return (0, goto_view.A)(this, routeID, params);
                    }
                    resolveUrlRedirects(url) {
                      return __privateGet(this, _pageCommunicatorPromise).then((pageCommunicator) => pageCommunicator.resolveUrlRedirects(url));
                    }
                    registerSearchSuggestionsProvider(handler) {
                      registerSearchSuggestionsProvider(this, handler);
                    }
                    registerSearchQueryRewriter(obj) {
                      registerSearchQueryRewriter(__privateGet(this, _pageCommunicator), obj);
                    }
                    addToolbarButtonForApp(buttonDescriptor) {
                      return addToolbarButtonForApp(this, buttonDescriptor);
                    }
                    async openNewComposeViewDriver() {
                      try {
                        const composeViewDriverPromise = this.getNextComposeViewDriver();
                        await openComposeWindow(this);
                        const composeViewDriver = await composeViewDriverPromise;
                        return composeViewDriver;
                      } catch (err) {
                        __privateGet(this, _logger).error(err);
                        throw err;
                      }
                    }
                    getNextComposeViewDriver() {
                      let timeout = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 10 * 1e3;
                      return __privateGet(this, _composeViewDriverStream).merge(kefir_esm.later(timeout, new Error("Reached timeout while waiting for getNextComposeViewDriver"))).beforeEnd(() => new Error("Driver was shut down before a new compose was found")).flatMap((x) => x instanceof Error ? kefir_esm.constantError(x) : kefir_esm.constant(x)).take(1).takeErrors(1).toPromise();
                    }
                    openDraftByMessageID(messageID) {
                      return openDraftByMessageID(this, messageID);
                    }
                    createModalViewDriver(options2) {
                      return new gmail_modal_view_driver(options2);
                    }
                    createMoleViewDriver(options2) {
                      return new gmail_mole_view_driver(this, options2);
                    }
                    createDrawerViewDriver(options2) {
                      return new inbox_drawer_view(options2);
                    }
                    createBackdrop(zIndex2, target) {
                      return new gmail_backdrop(zIndex2, target);
                    }
                    addNavItem(appId, navItemDescriptorPropertyStream, navMenuInjectionContainer) {
                      return addNavItem(this, appId, navItemDescriptorPropertyStream, navMenuInjectionContainer);
                    }
                    addNavItemToPanel(appId, navItemDescriptorPropertyStream, panelElement) {
                      return addNavItemToPanel(this, appId, navItemDescriptorPropertyStream, panelElement);
                    }
                    addAppMenuItem(menuItemDescriptor) {
                      return addAppMenuItem(this, menuItemDescriptor);
                    }
                    addSupportItem(supportItemDescriptor) {
                      return addSupportItem(this, supportItemDescriptor);
                    }
                    getSentMailNativeNavItem() {
                      const p = getNativeNavItem(this, "sent");
                      p.catch((err) => __privateGet(this, _logger).error(err));
                      return p;
                    }
                    setShowNativeNavMarker(isNative) {
                      __privateGet(this, _navMarkerHiddenChanged).emit(null);
                      const leftNavContainerElement = gmail_element_getter.A.getLeftNavContainerElement();
                      if (leftNavContainerElement) {
                        if (isNative) {
                          leftNavContainerElement.classList.remove("inboxsdk__hide_native_marker");
                        } else {
                          leftNavContainerElement.classList.add("inboxsdk__hide_native_marker");
                          __privateGet(this, _stopper6).takeUntilBy(__privateGet(this, _navMarkerHiddenChanged)).onValue(() => {
                            leftNavContainerElement.classList.remove("inboxsdk__hide_native_marker");
                          });
                        }
                      }
                    }
                    setShowNativeAddonSidebar(isNative) {
                      __privateGet(this, _addonSidebarHiddenChanged).emit(null);
                      const addonContainerElement = gmail_element_getter.A.getAddonSidebarContainerElement();
                      const mainContentBodyContainerElement = gmail_element_getter.A.getMainContentBodyContainerElement();
                      if (addonContainerElement && mainContentBodyContainerElement) {
                        const parent = mainContentBodyContainerElement.parentElement;
                        if (!parent) return;
                        if (isNative) {
                          parent.classList.remove("inboxsdk__hide_addon_container");
                        } else {
                          parent.classList.add("inboxsdk__hide_addon_container");
                          __privateGet(this, _stopper6).takeUntilBy(__privateGet(this, _addonSidebarHiddenChanged)).onValue(() => {
                            parent.classList.remove("inboxsdk__hide_addon_container");
                          });
                        }
                      }
                    }
                    async getGmailActionToken() {
                      return __privateGet(this, _pageCommunicator).getActionTokenValue();
                    }
                    getUserEmailAddress() {
                      return __privateGet(this, _pageCommunicator).getUserEmailAddress();
                    }
                    isConversationViewDisabled() {
                      return __privateGet(this, _pageCommunicator).isConversationViewDisabled();
                    }
                    getUserLanguage() {
                      return __privateGet(this, _pageCommunicator).getUserLanguage();
                    }
                    getUserContact() {
                      return {
                        emailAddress: this.getUserEmailAddress(),
                        name: __privateGet(this, _userInfo).getUserName()
                      };
                    }
                    getAccountSwitcherContactList() {
                      return __privateGet(this, _userInfo).getAccountSwitcherContactList();
                    }
                    activateShortcut(keyboardShortcutHandle, appName, appIconUrl) {
                      this.getKeyboardShortcutHelpModifier().set(keyboardShortcutHandle, __privateGet(this, _appId5), appName, appIconUrl);
                      keyboardShortcutHandle.once("destroy", () => {
                        this.getKeyboardShortcutHelpModifier().delete(keyboardShortcutHandle);
                      });
                    }
                    get gmailTheme() {
                      return __privateGet(this, _gmailTheme);
                    }
                    /**
                     * Listen for if Gmail changes its theme (dark, light, or frame dark / body light mode).
                     */
                    get gmailThemeStream() {
                      return stylesStream.flatMap((event) => {
                        if (event.type !== "theme") {
                          return kefir_esm.never();
                        }
                        __privateGet(this, _gmailTheme).isDarkMode = event.isDarkMode;
                        return kefir_esm.constant(event.isDarkMode);
                      });
                    }
                    async addGlobalSidebarContentPanel(descriptor) {
                      await this.waitForGlobalSidebarReady().merge(__privateGet(this, _stopper6).flatMap(() => kefir_esm.constantError(new Error("Driver instance was destroyed early")))).take(1).takeErrors(1).toPromise();
                      const appSidebar = this.getGlobalSidebar();
                      return appSidebar.addGlobalSidebarContentPanel(descriptor);
                    }
                    waitForGlobalSidebarReady() {
                      const condition = () => gmail_element_getter.A.getCompanionSidebarContentContainerElement() && (gmail_element_getter.A.getCompanionSidebarIconContainerElement() || gmail_element_getter.A.getAddonSidebarContainerElement());
                      if (condition()) {
                        return kefir_esm.constant(void 0);
                      }
                      return (0, stream_wait_for.A)(condition).map(() => void 0);
                    }
                    getGlobalSidebar() {
                      let appSidebarView = __privateGet(this, _appSidebarView);
                      if (!appSidebarView) {
                        const companionSidebarContentContainerEl = gmail_element_getter.A.getCompanionSidebarContentContainerElement();
                        if (!companionSidebarContentContainerEl) throw new Error("did not find companionSidebarContentContainerEl");
                        appSidebarView = __privateSet(this, _appSidebarView, new gmail_app_sidebar_view.A(this, companionSidebarContentContainerEl));
                      }
                      return appSidebarView;
                    }
                    isRunningInPageContext() {
                      return !!(__webpack_require__2.g.GLOBALS && __webpack_require__2.g._GM_main);
                    }
                    showAppIdWarning() {
                      showAppIdWarning(this);
                    }
                    createTopMessageBarDriver(optionStream) {
                      return new GmailTopMessageBarDriver(optionStream);
                    }
                    associateThreadAndMessageIDs(threadID, messageID) {
                      __privateGet(this, _messageIDsToThreadIDs).set(messageID, threadID);
                    }
                    getThreadIDForMessageID(messageID) {
                      return (0, get_or_fail.A)(__privateGet(this, _messageIDsToThreadIDs), messageID);
                    }
                    getDraftIDForMessageID(messageID) {
                      let skipCache = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
                      return (0, get_draft_id_for_message_id.A)(this, messageID, skipCache);
                    }
                    reportRecentSyncDraftId(syncDraftId) {
                      const count = __privateGet(this, _recentSyncDraftIds).get(syncDraftId);
                      const newCount = (count ?? 0) + 1;
                      __privateGet(this, _recentSyncDraftIds).set(syncDraftId, newCount);
                    }
                    reportDraftClosed(syncDraftId) {
                      kefir_esm.later(30 * 1e3, void 0).takeUntilBy(__privateGet(this, _stopper6)).onValue(() => {
                        const count = __privateGet(this, _recentSyncDraftIds).get(syncDraftId);
                        let newCount;
                        if (count == null || count < 1) {
                          newCount = 0;
                          __privateGet(this, _logger).error(new Error("_recentSyncDraftIds count had unexpected value"), {
                            count
                          });
                        } else {
                          newCount = count - 1;
                        }
                        if (newCount === 0) {
                          __privateGet(this, _recentSyncDraftIds).delete(syncDraftId);
                        } else {
                          __privateGet(this, _recentSyncDraftIds).set(syncDraftId, newCount);
                        }
                      });
                    }
                    isRecentSyncDraftId(syncMessageId) {
                      return __privateGet(this, _recentSyncDraftIds).has(syncMessageId);
                    }
                    getSelectedThreadRowViewDrivers() {
                      if (!__privateGet(this, _currentRouteViewDriver2)) {
                        return [];
                      }
                      return transducers_default().toArray(__privateGet(this, _currentRouteViewDriver2).getRowListViews(), __privateGet(this, _selectedThreadRows));
                    }
                    signalThreadRowViewSelectionChange() {
                      __privateGet(this, _threadRowViewSelectionChanges).value(void 0);
                    }
                    registerThreadRowViewSelectionHandler(handler) {
                      __privateGet(this, _threadRowViewSelectionChanges).onValue(handler);
                      return () => {
                        __privateGet(this, _threadRowViewSelectionChanges).offValue(handler);
                      };
                    }
                    getPersonDetails(emailAddress) {
                      return getPersonDetails(this, emailAddress);
                    }
                  }
                  _gmailTheme = new WeakMap();
                  _appId5 = new WeakMap();
                  _logger = new WeakMap();
                  _opts = new WeakMap();
                  _envData = new WeakMap();
                  _customRouteIDs = new WeakMap();
                  _customListRouteIDs = new WeakMap();
                  _customListSearchStringsToRouteIds = new WeakMap();
                  _messageIDsToThreadIDs = new WeakMap();
                  _threadRowIdentifier = new WeakMap();
                  _gmailRouteProcessor = new WeakMap();
                  _keyboardShortcutHelpModifier = new WeakMap();
                  _page3 = new WeakMap();
                  _pageCommunicator = new WeakMap();
                  _pageCommunicatorPromise = new WeakMap();
                  _butterBar = new WeakMap();
                  _butterBarDriver = new WeakMap();
                  _routeViewDriverStream2 = new WeakMap();
                  _rowListViewDriverStream = new WeakMap();
                  _threadRowViewDriverKefirStream = new WeakMap();
                  _threadViewDriverLiveSet = new WeakMap();
                  _toolbarViewDriverLiveSet = new WeakMap();
                  _composeViewDriverStream = new WeakMap();
                  _xhrInterceptorStream = new WeakMap();
                  _messageViewDriverStream = new WeakMap();
                  _stopper6 = new WeakMap();
                  _navMarkerHiddenChanged = new WeakMap();
                  _addonSidebarHiddenChanged = new WeakMap();
                  _userInfo = new WeakMap();
                  _timestampAccountSwitcherReady = new WeakMap();
                  _timestampGlobalsFound = new WeakMap();
                  _timestampOnready = new WeakMap();
                  _lastCustomThreadListActivity = new WeakMap();
                  _currentRouteViewDriver2 = new WeakMap();
                  _appSidebarView = new WeakMap();
                  _GmailDriver_instances = new WeakSet();
                  setupEventStreams_fn = function() {
                    var result = makeXhrInterceptor();
                    __privateSet(this, _xhrInterceptorStream, result.xhrInterceptStream.takeUntilBy(__privateGet(this, _stopper6)));
                    __privateSet(this, _pageCommunicatorPromise, result.pageCommunicatorPromise);
                    this.onready = __privateGet(this, _pageCommunicatorPromise).then((pageCommunicator) => {
                      __privateSet(this, _timestampGlobalsFound, Date.now());
                      __privateSet(this, _pageCommunicator, pageCommunicator);
                      __privateGet(this, _logger).setUserEmailAddress(this.getUserEmailAddress());
                      __privateSet(this, _userInfo, new UserInfo(this));
                      __privateSet(this, _timestampAccountSwitcherReady, Date.now());
                      __privateSet(this, _routeViewDriverStream2, setupRouteViewDriverStream(__privateGet(this, _gmailRouteProcessor), this).takeUntilBy(__privateGet(this, _stopper6)).toProperty());
                      __privateGet(this, _routeViewDriverStream2).onValue((gmailRouteView) => {
                        __privateSet(this, _currentRouteViewDriver2, gmailRouteView);
                      });
                      __privateSet(this, _rowListViewDriverStream, __privateMethod(this, _GmailDriver_instances, setupRouteSubViewDriver_fn).call(this, "newGmailRowListView").takeUntilBy(__privateGet(this, _stopper6)));
                      __privateMethod(this, _GmailDriver_instances, setupThreadRowViewDriverKefirStream_fn).call(this);
                      __privateSet(this, _threadViewDriverLiveSet, toLiveSet(__privateMethod(this, _GmailDriver_instances, setupRouteSubViewDriver_fn).call(this, "newGmailThreadView").takeUntilBy(__privateGet(this, _stopper6)).flatMap((gmailThreadView) => gmailThreadView.getReadyStream().map(() => gmailThreadView)).map((gmailThreadView) => ({
                        el: gmailThreadView,
                        removalStream: gmailThreadView.getStopper()
                      }))));
                      __privateMethod(this, _GmailDriver_instances, setupToolbarViewDriverStream_fn).call(this);
                      __privateMethod(this, _GmailDriver_instances, setupMessageViewDriverStream_fn).call(this);
                      __privateMethod(this, _GmailDriver_instances, setupComposeViewDriverStream_fn).call(this);
                      __privateSet(this, _threadRowIdentifier, new thread_row_identifier(this));
                      __privateSet(this, _timestampOnready, Date.now());
                    });
                  };
                  setupComposeViewDriverStream_fn = function() {
                    __privateSet(this, _composeViewDriverStream, (0, setup_compose_view_driver_stream.A)(this, __privateGet(this, _messageViewDriverStream), __privateGet(this, _xhrInterceptorStream)).takeUntilBy(__privateGet(this, _stopper6)));
                  };
                  setupRouteSubViewDriver_fn = function(viewName) {
                    return __privateGet(this, _routeViewDriverStream2).flatMap((gmailRouteView) => {
                      return gmailRouteView.getEventStream().filter((event) => event.eventName === viewName).map((event) => event.view);
                    });
                  };
                  setupThreadRowViewDriverKefirStream_fn = function() {
                    __privateSet(this, _threadRowViewDriverKefirStream, __privateGet(this, _rowListViewDriverStream).flatMap((rowListViewDriver) => rowListViewDriver.getRowViewDriverStream()).takeUntilBy(__privateGet(this, _stopper6)));
                  };
                  setupToolbarViewDriverStream_fn = function() {
                    __privateSet(this, _toolbarViewDriverLiveSet, toLiveSet(kefir_esm.merge([__privateGet(this, _rowListViewDriverStream).map((gmailRowListView) => gmailRowListView.getToolbarView()), this.getThreadViewDriverStream().map((gmailThreadView) => gmailThreadView.getToolbarView())]).filter(isNotNil.A).flatMap((gmailToolbarView) => gmailToolbarView.waitForReady()).map((gmailToolbarView) => ({
                      el: gmailToolbarView,
                      removalStream: gmailToolbarView.getStopper()
                    })).takeUntilBy(__privateGet(this, _stopper6))));
                    __privateGet(this, _toolbarViewDriverLiveSet).subscribe({});
                  };
                  setupMessageViewDriverStream_fn = function() {
                    __privateSet(this, _messageViewDriverStream, this.getThreadViewDriverStream().flatMap((gmailThreadView) => gmailThreadView.getMessageViewDriverStream()).takeUntilBy(__privateGet(this, _stopper6)));
                  };
                  _recentSyncDraftIds = new WeakMap();
                  _selectedThreadRows = new WeakMap();
                  _threadRowViewSelectionChanges = new WeakMap();
                  const gmail_driver = GmailDriver;
                  var sha1 = __webpack_require__2(799);
                  var sha1_default = /* @__PURE__ */ __webpack_require__2.n(sha1);
                  ;
                  function grandfatherHash(x) {
                    const hasher = new (sha1_default())();
                    hasher.update("YlEHtGl72+c" + x);
                    return hasher.digest("hex");
                  }
                  const whitelist = /* @__PURE__ */ new Set([
                    "b540a2819e4b26823288046869e5577852178d69",
                    // streak
                    "1e9084cb394369dcdfd43cfcd84d17b78b0903dd",
                    // Rockwell
                    "a9b816b86b6085eb0b80315da6b2297ff30cf7b6",
                    // Screenleap
                    "5140e277522fd95ece3d540c94b97f443bcc3256",
                    // docsend
                    "b56a2d6e6f650ed6eae78774d3b1f02d969d8485",
                    // giphy
                    "bc6308648a588258f31f8f4b64f7c4652b6fcaac",
                    // stripe
                    "4cb8e6bd1aab0b4b05c7f07fbe8332b842009358"
                    // godMode
                  ]);
                  const appIdRegex = /^sdk_(.{5,15})_([0-9a-f]{10})$/;
                  function isValidAppId(appId) {
                    if (whitelist.has(grandfatherHash(appId))) return true;
                    const m = appIdRegex.exec(appId);
                    if (!m) return false;
                    const name = m[1], hash = m[2];
                    const shasum = new (sha1_default())();
                    shasum.update(name);
                    return shasum.digest("hex").slice(0, 10) === hash;
                  }
                  ;
                  const loadedAppIds = /* @__PURE__ */ new Set();
                  class PlatformImplementation extends safe_event_emitter.A {
                    constructor(driver, appId, piOpts) {
                      super();
                      /**
                       * @deprecated
                       */
                      __privateAdd(this, _driver21);
                      const {
                        appName,
                        appIconUrl,
                        VERSION: LOADER_VERSION
                      } = piOpts;
                      __privateSet(this, _driver21, driver);
                      const membrane = new Membrane([[gmail_compose_view.A, (viewDriver) => new compose_view.A(driver, viewDriver, membrane)], [gmail_attachment_card_view, (viewDriver) => new AttachmentCardView(viewDriver, driver, membrane)], [gmail_message_view, (viewDriver) => new MessageView(viewDriver, membrane, driver)], [gmail_thread_view, (viewDriver) => new thread_view(viewDriver, appId, driver, membrane)], [gmail_thread_row_view.A, (viewDriver) => new ThreadRowView(viewDriver)], [gmail_route_view, (viewDriver) => new route_view.A(viewDriver)], [dummy_route_view_driver, (viewDriver) => new route_view.A(viewDriver)]]);
                      this.destroyed = false;
                      this.LOADER_VERSION = LOADER_VERSION;
                      this.IMPL_VERSION = version.Q;
                      this.ButterBar = new ButterBar(appId, driver);
                      driver.setButterBar(this.ButterBar);
                      this.Compose = new compose.A(driver, membrane);
                      this.Conversations = new conversations(appId, driver, membrane);
                      this.Keyboard = new keyboard.A(appId, appName, appIconUrl, driver);
                      this.User = new User(driver, piOpts);
                      this.Lists = new Lists(appId, driver, membrane);
                      this.NavMenu = new NavMenu(appId, driver);
                      this.AppMenu = new AppMenu(driver);
                      this.Router = new namespaces_router(appId, driver, membrane);
                      this.Search = new Search(appId, driver);
                      this.Toolbars = new Toolbars(appId, driver, membrane, piOpts);
                      this.Widgets = new widgets(appId, driver);
                      if (piOpts.REQUESTED_API_VERSION === 1) {
                        this.Modal = new modal(appId, driver, piOpts);
                      }
                      if (piOpts.REQUESTED_API_VERSION >= 2) {
                        this.Global = new Global(appId, driver);
                      }
                      this.Logger = driver.getLogger().getAppLogger();
                    }
                    destroy() {
                      if (!this.destroyed) {
                        this.destroyed = true;
                        __privateGet(this, _driver21).destroy();
                        this.emit("destroy");
                      }
                    }
                  }
                  _driver21 = new WeakMap();
                  function makePlatformImplementation(appId, _opts2, envData) {
                    if (typeof appId !== "string") {
                      throw new Error("appId must be a string");
                    }
                    const opts = {
                      // defaults
                      globalErrorLogging: true,
                      eventTracking: true,
                      ..._opts2
                    };
                    opts.REQUESTED_API_VERSION = +opts.REQUESTED_API_VERSION;
                    switch (opts.REQUESTED_API_VERSION) {
                      case 2:
                      case 1:
                        break;
                      default:
                        throw new Error("InboxSDK: Unsupported API version " + opts.REQUESTED_API_VERSION);
                    }
                    const LOADER_VERSION = opts.VERSION;
                    const IMPL_VERSION = version.Q;
                    const logger = new lib_logger.A(appId, opts, LOADER_VERSION, IMPL_VERSION);
                    const origin = document.location.origin;
                    if (origin !== "https://mail.google.com") {
                      return new Promise(() => {
                      });
                    }
                    const driver = new gmail_driver(appId, LOADER_VERSION, IMPL_VERSION, logger, opts, envData);
                    return driver.onready.then(() => {
                      if (!isValidAppId(appId)) {
                        console.error(`
===========================================================
InboxSDK: You have loaded InboxSDK with an invalid appId:
${appId}
Registering an appId is free. Please see
https://www.inboxsdk.com/docs/#RequiredSetup
===========================================================
`);
                        driver.showAppIdWarning();
                      }
                      if (driver.isRunningInPageContext()) {
                        console.warn("Running the InboxSDK outside of an extension content script is not recommended!");
                      }
                      logger.eventSdkPassive("instantiate");
                      const pi = new PlatformImplementation(driver, appId, opts);
                      if (!loadedAppIds.has(appId)) {
                        loadedAppIds.add(appId);
                        logger.eventSdkPassive("load");
                      }
                      return pi;
                    });
                  }
                })
              ),
              /***/
              3741: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      SimpleElementView
                    )
                    /* harmony export */
                  });
                  var _lib_safe_event_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(2788);
                  class SimpleElementView extends _lib_safe_event_emitter__WEBPACK_IMPORTED_MODULE_0__.A {
                    constructor(el) {
                      super();
                      __publicField(this, "destroyed", false);
                      this.el = el;
                    }
                    destroy() {
                      if (this.destroyed) return;
                      this.destroyed = true;
                      this.emit("destroy");
                      this.el.remove();
                    }
                  }
                })
              ),
              /***/
              7600: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  var _addedEventBus;
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      ComposeView
                    )
                  });
                  var safe_event_emitter = __webpack_require__2(2788);
                  var kefir_esm = __webpack_require__2(7249);
                  var kefir_cast = __webpack_require__2(5164);
                  var kefir_cast_default = /* @__PURE__ */ __webpack_require__2.n(kefir_cast);
                  var js = __webpack_require__2(7332);
                  var get_or_fail = __webpack_require__2(4531);
                  ;
                  const memberMap = /* @__PURE__ */ new WeakMap();
                  class ComposeButtonView extends safe_event_emitter.A {
                    constructor(addedEventBus, composeViewDriver, driver) {
                      super();
                      __publicField(this, "destroyed", false);
                      __privateAdd(this, _addedEventBus);
                      __privateSet(this, _addedEventBus, addedEventBus);
                      const members = {
                        composeViewDriver,
                        driver
                      };
                      memberMap.set(this, members);
                      __privateGet(this, _addedEventBus).toProperty().onValue((options) => {
                        if (!options) {
                          _destroy(this);
                          return;
                        }
                        members.composeViewDriver.getStopper().onValue(() => {
                          _destroy(this);
                        });
                      });
                    }
                    showTooltip(tooltipDescriptor) {
                      const members = (0, get_or_fail.A)(memberMap, this);
                      members.driver.getLogger().eventSdkPassive("ComposeButtonView.showTooltip", {
                        keys: Object.keys(tooltipDescriptor)
                      });
                      __privateGet(this, _addedEventBus).onValue((options) => {
                        if (!options) return;
                        members.composeViewDriver.addTooltipToButton(options.buttonViewController, options.buttonDescriptor, tooltipDescriptor);
                      });
                    }
                    closeTooltip() {
                      const members = (0, get_or_fail.A)(memberMap, this);
                      __privateGet(this, _addedEventBus).onValue((options) => {
                        if (!options) return;
                        members.composeViewDriver.closeButtonTooltip(options.buttonViewController);
                      });
                    }
                  }
                  _addedEventBus = new WeakMap();
                  function _destroy(composeButtonViewInstance) {
                    composeButtonViewInstance.destroyed = true;
                    composeButtonViewInstance.emit("destroy");
                  }
                  var kefir_bus = __webpack_require__2(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__2.n(kefir_bus);
                  ;
                  module2 = __webpack_require__2.hmd(module2);
                  const compose_view_memberMap = js.defonce(module2, () => /* @__PURE__ */ new WeakMap());
                  class ComposeView extends safe_event_emitter.A {
                    constructor(driver, composeViewImplementation, membrane) {
                      super();
                      __publicField(this, "destroyed", false);
                      const members = {
                        driver,
                        membrane,
                        composeViewImplementation
                      };
                      compose_view_memberMap.set(this, members);
                      this.on("newListener", (eventName) => {
                        if (eventName === "close") {
                          driver.getLogger().deprecationWarning("composeView close event", "composeView destroy event");
                          if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                            console.error("The composeView close event was removed after API version 1");
                          }
                        } else if (eventName === "messageIDChange") {
                          driver.getLogger().deprecationWarning("composeView messageIDChange event", "composeView.getDraftID");
                          if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                            console.error("The composeView messageIDChange event was removed after API version 1");
                          }
                        } else if (eventName === "linkPopOver") {
                          composeViewImplementation.setupLinkPopOvers();
                        }
                      });
                      members.composeViewImplementation.getEventStream().onValue((event) => {
                        if (event.eventName === "destroy") {
                          this.destroyed = true;
                          if (driver.getOpts().REQUESTED_API_VERSION === 1) {
                            this.emit("close");
                          }
                        } else if (event.eventName === "messageIDChange") {
                          if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                            return;
                          }
                        }
                        this.emit(event.eventName, event.data);
                      });
                    }
                    /**
                     * Inserts a button into the compose bar. This method also accepts a stream of {@link ComposeButtonDescriptor}s so that you can change the appearance of your button after you've added it.
                     *
                     * @param buttonDescriptor The details of the button to add to the compose bar.
                     */
                    addButton(buttonDescriptor) {
                      const members = (0, get_or_fail.A)(compose_view_memberMap, this);
                      const buttonDescriptorStream = kefir_cast_default()(kefir_esm["default"], buttonDescriptor);
                      const bus = kefir_bus_default()();
                      members.composeViewImplementation.addButton(buttonDescriptorStream, members.driver.getAppId(), {
                        composeView: this
                      }, bus);
                      const view = new ComposeButtonView(bus, members.composeViewImplementation, members.driver);
                      view.on("destroy", () => {
                        bus.end();
                      });
                      return view;
                    }
                    addComposeNotice(composeNoticeDescriptor) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.addComposeNotice(composeNoticeDescriptor);
                    }
                    addStatusBar(statusBarDescriptor) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.addStatusBar(statusBarDescriptor);
                    }
                    hideNativeStatusBar() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.hideNativeStatusBar();
                    }
                    addRecipientRow(options) {
                      return {
                        destroy: (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.addRecipientRow(kefir_cast_default()(kefir_esm["default"], options))
                      };
                    }
                    forceRecipientRowsOpen() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.forceRecipientRowsOpen();
                    }
                    hideNativeRecipientRows() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.hideNativeRecipientRows();
                    }
                    hideRecipientArea() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.hideRecipientArea();
                    }
                    close() {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.close();
                    }
                    send() {
                      let {
                        sendAndArchive
                      } = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {
                        sendAndArchive: false
                      };
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.send({
                        sendAndArchive
                      });
                    }
                    openScheduleSendMenu() {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.openScheduleSendMenu();
                    }
                    discard() {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.discard();
                    }
                    getMetadataForm() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getMetadataFormElement();
                    }
                    getSubjectInput() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getSubjectInput();
                    }
                    getBodyElement() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getBodyElement();
                    }
                    // NOT DOCUMENTED BECAUSE NOT SURE IF API USERS NEED THIS
                    // TODO remove?
                    getComposeID() {
                      const {
                        driver,
                        composeViewImplementation
                      } = (0, get_or_fail.A)(compose_view_memberMap, this);
                      driver.getLogger().deprecationWarning("composeView.getComposeID");
                      if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return composeViewImplementation.getComposeID();
                    }
                    getInitialMessageID() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getInitialMessageID();
                    }
                    /* deprecated */
                    getMessageID() {
                      const {
                        driver,
                        composeViewImplementation
                      } = (0, get_or_fail.A)(compose_view_memberMap, this);
                      driver.getLogger().deprecationWarning("composeView.getMessageID", "composeView.getDraftID");
                      if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return composeViewImplementation.getMessageID();
                    }
                    getThreadID() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getThreadID();
                    }
                    getDraftID() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getDraftID();
                    }
                    getCurrentDraftID() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getCurrentDraftID();
                    }
                    getHTMLContent() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getHTMLContent();
                    }
                    getSelectedBodyHTML() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getSelectedBodyHTML() || "";
                    }
                    getSelectedBodyText() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getSelectedBodyText() || "";
                    }
                    getSubject() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getSubject();
                    }
                    getTextContent() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getTextContent();
                    }
                    getToRecipients() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getToRecipients();
                    }
                    getCcRecipients() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getCcRecipients();
                    }
                    getBccRecipients() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getBccRecipients();
                    }
                    insertTextIntoBodyAtCursor(text) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.insertBodyTextAtCursor(text);
                    }
                    insertHTMLIntoBodyAtCursor(html) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.insertBodyHTMLAtCursor(html);
                    }
                    insertLinkChipIntoBodyAtCursor(text, url, iconUrl) {
                      if (!iconUrl || typeof iconUrl !== "string" || iconUrl.indexOf("http") !== 0) {
                        console.warn("You must provide a publicly accessible iconUrl");
                        return;
                      }
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.insertLinkChipIntoBody({
                        text,
                        url,
                        iconUrl
                      });
                    }
                    insertLinkIntoBodyAtCursor(text, url) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.insertLinkIntoBody(text, url);
                    }
                    isForward() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.isForward();
                    }
                    isInlineReplyForm() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.isInlineReplyForm();
                    }
                    isFullscreen() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.isFullscreen();
                    }
                    setFullscreen(fullscreen) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setFullscreen(fullscreen);
                    }
                    isMinimized() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.isMinimized();
                    }
                    setMinimized(minimized) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setMinimized(minimized);
                    }
                    setTitleBarColor(color) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setTitleBarColor(color);
                    }
                    setTitleBarText(text) {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setTitleBarText(text);
                    }
                    async popOut() {
                      const nextComposeViewDriverPromise = (0, get_or_fail.A)(compose_view_memberMap, this).driver.getNextComposeViewDriver();
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.popOut();
                      const nextComposeViewDriver = await nextComposeViewDriverPromise;
                      return (0, get_or_fail.A)(compose_view_memberMap, this).membrane.get(nextComposeViewDriver);
                    }
                    isReply() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.isReply();
                    }
                    setToRecipients(emails) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setToRecipients(emails);
                    }
                    setCcRecipients(emails) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setCcRecipients(emails);
                    }
                    setBccRecipients(emails) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setBccRecipients(emails);
                    }
                    getFromContact() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getFromContact();
                    }
                    getFromContactChoices() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getFromContactChoices();
                    }
                    setFromEmail(email) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setFromEmail(email);
                    }
                    setSubject(text) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setSubject(text);
                    }
                    setBodyHTML(html) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setBodyHTML(html);
                    }
                    setBodyText(text) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.setBodyText(text);
                    }
                    async attachFiles(files) {
                      if (files.length === 0) {
                        return;
                      }
                      if (!(files[0] instanceof Blob)) {
                        throw new Error("parameter must be an array of Blob objects");
                      }
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.attachFiles(Array.from(files));
                    }
                    async attachInlineFiles(files) {
                      if (files.length === 0) {
                        return;
                      }
                      if (!(files[0] instanceof Blob)) {
                        throw new Error("parameter must be an array of Blob objects");
                      }
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.attachInlineFiles(Array.from(files));
                    }
                    // Old alias that we should keep around until we're sure no one is using it.
                    dragFilesIntoCompose(files) {
                      const {
                        driver
                      } = (0, get_or_fail.A)(compose_view_memberMap, this);
                      driver.getLogger().deprecationWarning("ComposeView.dragFilesIntoCompose", "ComposeView.attachInlineFiles");
                      if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      return this.attachInlineFiles(files);
                    }
                    //NOT DOCUMENTED BECAUSE STREAK-ONLY FOR NOW
                    getElement() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.getElement();
                    }
                    registerRequestModifier(modifier) {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.registerRequestModifier(modifier);
                    }
                    replaceSendButton(_ref) {
                      let {
                        el
                      } = _ref;
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.replaceSendButton(el);
                    }
                    hideDiscardButton() {
                      return (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.hideDiscardButton();
                    }
                    ensureFormattingToolbarIsHidden() {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.ensureFormattingToolbarIsHidden();
                    }
                    ensureAppButtonToolbarsAreClosed() {
                      (0, get_or_fail.A)(compose_view_memberMap, this).composeViewImplementation.ensureAppButtonToolbarsAreClosed();
                    }
                    // TODO remove
                    overrideEditSubject() {
                      const {
                        driver,
                        composeViewImplementation
                      } = (0, get_or_fail.A)(compose_view_memberMap, this);
                      driver.getLogger().deprecationWarning("composeView.overrideEditSubject");
                      if (driver.getOpts().REQUESTED_API_VERSION !== 1) {
                        throw new Error("This method was discontinued after API version 1");
                      }
                      if (typeof composeViewImplementation.overrideEditSubject === "function") {
                        composeViewImplementation.overrideEditSubject();
                      }
                    }
                  }
                })
              ),
              /***/
              6341: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var ud__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(7332);
                  var _route_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(321);
                  var _common_get_or_fail__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(4531);
                  module2 = __webpack_require__2.hmd(module2);
                  class CustomRouteView extends _route_view__WEBPACK_IMPORTED_MODULE_0__.A {
                    constructor(routeViewDriver) {
                      super(routeViewDriver);
                      const members = {
                        routeViewDriver
                      };
                      membersMap.set(this, members);
                    }
                    setFullWidth(fullWidth) {
                      const {
                        routeViewDriver
                      } = (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_1__.A)(membersMap, this);
                      routeViewDriver.setFullWidth(fullWidth);
                    }
                    getElement() {
                      const {
                        routeViewDriver
                      } = (0, _common_get_or_fail__WEBPACK_IMPORTED_MODULE_1__.A)(membersMap, this);
                      const el = routeViewDriver.getCustomViewElement();
                      if (!el) throw new Error("Should not happen");
                      return el;
                    }
                  }
                  const membersMap = (0, ud__WEBPACK_IMPORTED_MODULE_2__.defonce)(module2, () => /* @__PURE__ */ new WeakMap());
                  const __WEBPACK_DEFAULT_EXPORT__ = CustomRouteView;
                })
              ),
              /***/
              321: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  var _routeID, _routeType, _params, _routeViewDriver;
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__
                    /* harmony export */
                  });
                  var _lib_safe_event_emitter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(2788);
                  class RouteView extends _lib_safe_event_emitter__WEBPACK_IMPORTED_MODULE_0__.A {
                    constructor(routeViewDriver) {
                      super();
                      __privateAdd(this, _routeID, null);
                      __privateAdd(this, _routeType, null);
                      __privateAdd(this, _params, null);
                      __privateAdd(this, _routeViewDriver);
                      this.destroyed = false;
                      __privateSet(this, _routeViewDriver, routeViewDriver);
                      _bindToEventStream(routeViewDriver, this);
                    }
                    /**
                     * @returns a string of the ID of the RouteView. This is the same routeID that you give Router.goto() or Router.createLink(). This will be a value from NativeRouteIDs.
                     */
                    getRouteID() {
                      if (!__privateGet(this, _routeID)) {
                        __privateSet(this, _routeID, __privateGet(this, _routeViewDriver).getRouteID());
                      }
                      return __privateGet(this, _routeID);
                    }
                    getRouteType() {
                      if (!__privateGet(this, _routeType)) {
                        __privateSet(this, _routeType, __privateGet(this, _routeViewDriver).getRouteType());
                      }
                      return __privateGet(this, _routeType);
                    }
                    getParams() {
                      if (!__privateGet(this, _params)) {
                        __privateSet(this, _params, __privateGet(this, _routeViewDriver).getParams());
                      }
                      return __privateGet(this, _params);
                    }
                  }
                  _routeID = new WeakMap();
                  _routeType = new WeakMap();
                  _params = new WeakMap();
                  _routeViewDriver = new WeakMap();
                  function _bindToEventStream(routeViewDriver, routeView) {
                    routeViewDriver.getEventStream().onEnd(() => {
                      routeView.destroyed = true;
                      routeView.emit("destroy");
                      routeView.removeAllListeners();
                    });
                  }
                  const __WEBPACK_DEFAULT_EXPORT__ = RouteView;
                })
              ),
              /***/
              9755: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      BasicButtonViewController
                    )
                    /* harmony export */
                  });
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(4924);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(kefir_stopper__WEBPACK_IMPORTED_MODULE_0__);
                  class BasicButtonViewController {
                    constructor(options) {
                      __publicField(this, "_stopper", kefir_stopper__WEBPACK_IMPORTED_MODULE_0___default()());
                      this._activateFunction = options.activateFunction || options.onClick;
                      this._view = options.buttonView;
                      this._view.getEventStream().filter((event) => event.eventName === "click").onValue(() => {
                        this.activate();
                      });
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    destroy() {
                      this._activateFunction = null;
                      this._view.destroy();
                      this._stopper.destroy();
                    }
                    update(options) {
                      this.getView().update(options);
                      this.setActivateFunction(options && (options.activateFunction || options.onClick));
                    }
                    getView() {
                      return this._view;
                    }
                    setActivateFunction(f) {
                      this._activateFunction = f;
                    }
                    activate() {
                      if (this._activateFunction) {
                        this._activateFunction({});
                      }
                    }
                  }
                })
              ),
              /***/
              9374: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => (
                      /* binding */
                      DropdownButtonViewController
                    )
                    /* harmony export */
                  });
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(4924);
                  var kefir_stopper__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(kefir_stopper__WEBPACK_IMPORTED_MODULE_1__);
                  var _dropdown_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(3046);
                  class DropdownButtonViewController {
                    constructor(options) {
                      __publicField(this, "_dropdownView", null);
                      __publicField(this, "_stopper", kefir_stopper__WEBPACK_IMPORTED_MODULE_1___default()());
                      this._dropdownShowFunction = options.dropdownShowFunction;
                      this._DropdownViewDriverClass = options.dropdownViewDriverClass;
                      const view = this._view = options.buttonView;
                      this._dropdownPositionOptions = options.dropdownPositionOptions;
                      view.getElement().setAttribute("aria-haspopup", "true");
                      view.getElement().setAttribute("aria-pressed", "false");
                      view.getElement().setAttribute("aria-expanded", "false");
                      this._bindToViewEvents();
                    }
                    getStopper() {
                      return this._stopper;
                    }
                    destroy() {
                      if (this._view) {
                        this._view.destroy();
                        this._view = null;
                      }
                      if (this._dropdownView) {
                        this._dropdownView.close();
                        this._dropdownView = null;
                      }
                      this._stopper.destroy();
                    }
                    update(options) {
                      this.getView().update(options);
                      this.setDropdownShowFunction(options && options.dropdownShowFunction);
                    }
                    getView() {
                      if (!this._view) throw new Error("Already destroyed");
                      return this._view;
                    }
                    setDropdownShowFunction(func) {
                      this._dropdownShowFunction = func;
                    }
                    showDropdown() {
                      this.hideDropdown();
                      const view = this._view;
                      if (!view) throw new Error("Already destroyed");
                      view.activate();
                      const dropdownView = this._dropdownView = new _dropdown_view__WEBPACK_IMPORTED_MODULE_0__.A(new this._DropdownViewDriverClass(), view.getElement(), void 0);
                      if (this._dropdownPositionOptions) {
                        dropdownView.setPlacementOptions(this._dropdownPositionOptions);
                      }
                      dropdownView.on("destroy", this._dropdownClosed.bind(this));
                      if (this._dropdownShowFunction) {
                        this._dropdownShowFunction({
                          dropdown: this._dropdownView
                        });
                      }
                      view.getElement().setAttribute("aria-pressed", "true");
                      view.getElement().setAttribute("aria-expanded", "true");
                    }
                    hideDropdown() {
                      if (this._dropdownView) {
                        this._dropdownView.close();
                      }
                    }
                    isDropdownVisible() {
                      return !!this._dropdownView;
                    }
                    _bindToViewEvents() {
                      if (!this._view) throw new Error("Already destroyed");
                      this._view.getEventStream().filter((event) => event.eventName === "click").onValue(() => {
                        this._toggleDropdownState();
                      });
                    }
                    _toggleDropdownState() {
                      if (this._dropdownView) {
                        this._dropdownView.close();
                      } else {
                        this.showDropdown();
                      }
                    }
                    _dropdownClosed() {
                      const view = this._view;
                      if (view) {
                        view.deactivate();
                        this._dropdownView = null;
                        view.getElement().setAttribute("aria-pressed", "false");
                        view.getElement().setAttribute("aria-expanded", "false");
                      }
                    }
                  }
                })
              ),
              /***/
              3046: (
                /***/
                ((__unused_webpack_module, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    A: () => (
                      /* binding */
                      DropdownView
                    )
                  });
                  var browser_asap = __webpack_require__2(4622);
                  var browser_asap_default = /* @__PURE__ */ __webpack_require__2.n(browser_asap);
                  var safe_event_emitter = __webpack_require__2(2788);
                  var kefir_esm = __webpack_require__2(7249);
                  var make_mutation_observer_chunked_stream = __webpack_require__2(3197);
                  var js = __webpack_require__2(5714);
                  var js_default = /* @__PURE__ */ __webpack_require__2.n(js);
                  var kefir_bus = __webpack_require__2(8631);
                  var kefir_bus_default = /* @__PURE__ */ __webpack_require__2.n(kefir_bus);
                  var kefir_stopper_js = __webpack_require__2(4924);
                  var kefir_stopper_js_default = /* @__PURE__ */ __webpack_require__2.n(kefir_stopper_js);
                  ;
                  function fromEventsWithOptions(target, eventName, options) {
                    return kefir_esm.stream((emitter) => {
                      target.addEventListener(eventName, emitter.emit, options);
                      return () => {
                        target.removeEventListener(eventName, emitter.emit, options);
                      };
                    });
                  }
                  ;
                  class ScrollableContainByScreen {
                    constructor(element, anchorPoint, options) {
                      __publicField(this, "_manualRepositions", kefir_bus_default()());
                      __publicField(this, "_stopper", kefir_stopper_js_default()());
                      kefir_esm["default"].merge([this._manualRepositions, kefir_esm["default"].fromEvents(window, "resize"), fromEventsWithOptions(window, "scroll", {
                        capture: true,
                        passive: true
                      }).filter((event) => event.target.contains(anchorPoint))]).toProperty(() => null).takeUntilBy(this._stopper).onValue(() => {
                        js_default()(element, anchorPoint, options);
                      });
                    }
                    reposition() {
                      this._manualRepositions.emit(null);
                    }
                    destroy() {
                      this._stopper.destroy();
                    }
                  }
                  var from_event_target_capture = __webpack_require__2(3985);
                  ;
                  function* parentNodes(node) {
                    do {
                      yield node;
                    } while (node = node.rfaAnchor || node._logicalParent || node.parentNode);
                  }
                  ;
                  function outsideClicksAndEscape(elements) {
                    return kefir_esm.merge([
                      (0, from_event_target_capture.A)(document, "click"),
                      // We modify the focus event on document sometimes, so we listen for
                      // it on body so our modifications can happen first.
                      (0, from_event_target_capture.A)(document.body, "focus")
                    ]).filter((event) => !event.shouldIgnore && (event.isTrusted || false) && elements.every((el) => {
                      for (const node of parentNodes(event.target)) {
                        if (node === el) return false;
                      }
                      return true;
                    })).map((event) => ({
                      type: "outsideInteraction",
                      cause: event
                    })).merge(kefir_esm.fromEvents(document, "keydown").filter((e) => e.key ? e.key === "Escape" : e.which === 27).map((event) => {
                      event.preventDefault();
                      event.stopPropagation();
                      return {
                        type: "escape",
                        cause: event
                      };
                    })).map((e) => {
                      if (false) {
                      }
                      return e;
                    });
                  }
                  ;
                  class DropdownView extends safe_event_emitter.A {
                    constructor(dropdownViewDriver, anchorElement, options) {
                      super();
                      __publicField(this, "destroyed", false);
                      /*deprecated*/
                      __publicField(this, "closed", false);
                      __publicField(this, "_userPlacementOptions", {
                        hAlign: "left"
                      });
                      __publicField(this, "_scrollableContainByScreen", null);
                      this._dropdownViewDriver = dropdownViewDriver;
                      this._options = {
                        ...dropdownViewDriver.getDropdownOptions && dropdownViewDriver.getDropdownOptions(),
                        ...options
                      };
                      this.el = dropdownViewDriver.getContentElement();
                      const containerEl = dropdownViewDriver.getContainerElement();
                      if (document.contains(containerEl)) {
                        this._didInsertContainerEl = false;
                      } else {
                        document.body.insertBefore(containerEl, document.body.firstElementChild);
                        this._didInsertContainerEl = true;
                      }
                      if (!containerEl.hasAttribute("tabindex")) {
                        containerEl.setAttribute("tabindex", "-1");
                      }
                      const onDestroy = kefir_esm["default"].fromEvents(this, "destroy");
                      const elementsToIgnore = [anchorElement, containerEl];
                      if (this._options.extraElementsToIgnore) {
                        elementsToIgnore.push(...this._options.extraElementsToIgnore);
                      }
                      outsideClicksAndEscape(elementsToIgnore).takeUntilBy(onDestroy).filter((event) => {
                        let isCanceled = false;
                        const appEvent = {
                          type: event.type,
                          cause: event.cause,
                          cancel: () => {
                            isCanceled = true;
                          }
                        };
                        this.emit("preautoclose", appEvent);
                        return !isCanceled;
                      }).onValue(() => {
                        this.close();
                      });
                      if (!this._options.manualPosition) {
                        containerEl.style.position = "fixed";
                        browser_asap_default()(() => {
                          if (this.closed) return;
                          kefir_esm["default"].fromEvents(this, "_placementOptionsUpdated").toProperty(() => null).takeUntilBy(onDestroy).onValue(() => {
                            if (this._scrollableContainByScreen) {
                              this._scrollableContainByScreen.destroy();
                            }
                            this._scrollableContainByScreen = new ScrollableContainByScreen(containerEl, anchorElement, this._userPlacementOptions);
                          });
                          (0, make_mutation_observer_chunked_stream.A)(dropdownViewDriver.getContentElement(), {
                            childList: true,
                            attributes: true,
                            characterData: true,
                            subtree: true
                          }).throttle(200).takeUntilBy(onDestroy).onValue(() => this.reposition());
                        });
                      }
                      const startActiveElement = document.activeElement;
                      browser_asap_default()(() => {
                        if (this.closed) return;
                        if (document.activeElement !== startActiveElement) return;
                        containerEl.focus();
                      });
                    }
                    setPlacementOptions(options) {
                      if (this._options.manualPosition) {
                        console.error("DropdownView.setPlacementOptions() was called on a manually-positioned DropdownView.");
                        return;
                      }
                      this._userPlacementOptions = {
                        ...this._userPlacementOptions,
                        ...options
                      };
                      this.emit("_placementOptionsUpdated");
                    }
                    close() {
                      if (!this.destroyed) {
                        this.destroyed = this.closed = true;
                        if (this._scrollableContainByScreen) {
                          this._scrollableContainByScreen.destroy();
                        }
                        this.emit("destroy");
                        if (this._didInsertContainerEl) {
                          this._dropdownViewDriver.getContainerElement().remove();
                        }
                        this._dropdownViewDriver.destroy();
                      }
                    }
                    reposition() {
                      if (this._scrollableContainByScreen) {
                        this._scrollableContainByScreen.reposition();
                      }
                    }
                  }
                })
              ),
              /***/
              8855: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    A: () => __WEBPACK_DEFAULT_EXPORT__,
                    /* harmony export */
                    N: () => (
                      /* binding */
                      iconLiga
                    )
                    /* harmony export */
                  });
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(5516);
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(1364);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
                  var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());
                  ___CSS_LOADER_EXPORT___.push([module2.id, ".inboxsdk__GBPjAIsupt3H7foDtouM{font-size:20px;line-height:1;position:relative;z-index:1!important}", "", { "version": 3, "sources": ["webpack://./src/platform-implementation-js/dom-driver/gmail/views/gmail-app-sidebar-view/primary/index.module.css"], "names": [], "mappings": "AAAA,gCACE,cAAe,CACf,aAAc,CACd,iBAAkB,CAClB,mBACF", "sourcesContent": [".iconLiga {\n  font-size: 20px;\n  line-height: 1;\n  position: relative;\n  z-index: 1 !important;\n}\n"], "sourceRoot": "" }]);
                  var iconLiga = "inboxsdk__GBPjAIsupt3H7foDtouM";
                  const __WEBPACK_DEFAULT_EXPORT__ = ___CSS_LOADER_EXPORT___;
                })
              ),
              /***/
              9245: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    $r: () => (
                      /* binding */
                      attachmentIcon
                    ),
                    /* harmony export */
                    Ad: () => (
                      /* binding */
                      shortDetail
                    ),
                    /* harmony export */
                    Ay: () => __WEBPACK_DEFAULT_EXPORT__,
                    /* harmony export */
                    DD: () => (
                      /* binding */
                      title
                    ),
                    /* harmony export */
                    Lf: () => (
                      /* binding */
                      recipients
                    ),
                    /* harmony export */
                    Lm: () => (
                      /* binding */
                      iconAtStart
                    ),
                    /* harmony export */
                    UA: () => (
                      /* binding */
                      snippet
                    ),
                    /* harmony export */
                    VA: () => (
                      /* binding */
                      subtitle
                    ),
                    /* harmony export */
                    gy: () => (
                      /* binding */
                      unread
                    ),
                    /* harmony export */
                    kk: () => (
                      /* binding */
                      resultTitle
                    )
                    /* harmony export */
                  });
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(5516);
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(1364);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
                  var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());
                  ___CSS_LOADER_EXPORT___.push([module2.id, '.Wn{--inboxsdk-title-color:rgb(0 0 0 / 87%);--inboxsdk-subtitle-color:rgb(0 0 0 / 54%)}.inboxsdk__gmail_dark_body_theme .Wn{--inboxsdk-title-color:rgb(255 255 255);--inboxsdk-subtitle-color:rgb(255 255 255 / 70%)}.Wn.inboxsdk__ZWrBCcqtIqrDEdUtPOrg{color:var(--inboxsdk-title-color)}.Wn .inboxsdk__WFNlIHJZA6zYVSDGWS2K{color:var(--inboxsdk-subtitle-color)}.xY.inboxsdk__HBTr58WKm0EhmpKhN5k1{max-width:calc(168px + (30px*2));flex-basis:calc(168px + (30px*2))}.inboxsdk__HBTr58WKm0EhmpKhN5k1 span{text-overflow:ellipsis;display:block;overflow:hidden}.inboxsdk__kN8mmVlzZVbzIS_awdJ_,.inboxsdk__Va73Osg6o8dIKLvkvywn,.inboxsdk__oxF6Ne2PQsND932WpK9J,.inboxsdk__N8BEpD1pdj535bJKkz7u,.inboxsdk__rusCS8I3RyomwIQUtkef{content:""}.inboxsdk__POtXLY2WRLq21pk7OxRg b{font-weight:700}.inboxsdk__N8BEpD1pdj535bJKkz7u.inboxsdk__POtXLY2WRLq21pk7OxRg{color:rgb(95 99 104)}.inboxsdk__gmail_dark_body_theme .inboxsdk__N8BEpD1pdj535bJKkz7u.inboxsdk__POtXLY2WRLq21pk7OxRg{color:rgb(255 255 255/50%)}', "", { "version": 3, "sources": ["webpack://./src/platform-implementation-js/dom-driver/gmail/views/gmail-collapsible-section-view.module.css"], "names": [], "mappings": "AAAA,IACE,uCAAwC,CACxC,0CACF,CAEA,qCACE,uCAAwC,CACxC,gDACF,CAEA,mCACE,iCACF,CAEA,oCACE,oCACF,CAGA,mCAKE,gCAAmC,CACnC,iCACF,CAGA,qCACE,sBAAuB,CACvB,aAAc,CACd,eACF,CAEA,gKACE,UACF,CAWA,kCACE,eACF,CAWA,+DACE,oBACF,CAGA,gGACE,0BACF", "sourcesContent": [":global(.Wn) {\n  --inboxsdk-title-color: rgb(0 0 0 / 87%);\n  --inboxsdk-subtitle-color: rgb(0 0 0 / 54%);\n}\n\n:global(.inboxsdk__gmail_dark_body_theme .Wn) {\n  --inboxsdk-title-color: rgb(255 255 255);\n  --inboxsdk-subtitle-color: rgb(255 255 255 / 70%);\n}\n\n:global(.Wn).title {\n  color: var(--inboxsdk-title-color);\n}\n\n:global(.Wn) .subtitle {\n  color: var(--inboxsdk-subtitle-color);\n}\n\n/* Make the recipient's column wider after taking out two of the native rows icons. */\n:global(.xY).resultTitle {\n  /*\n   * 168px is the max width of the recipients' column element.\n   * 30px is the width of each rows' individual icons.\n   */\n  max-width: calc(168px + (30px * 2));\n  flex-basis: calc(168px + (30px * 2));\n}\n\n/* Rows */\n.resultTitle span {\n  text-overflow: ellipsis;\n  display: block;\n  overflow: hidden;\n}\n\n.iconAtStart {\n  content: '';\n}\n\n.recipients {\n  content: '';\n}\n\n.snippet {\n  content: '';\n}\n\n/* if `isRead: { text: false, background: true }` is passed to the corresponding RowDescriptor, account for Gmail rule making b tags 400 weight. */\n.unread b {\n  font-weight: 700;\n}\n\n.attachmentIcon {\n  content: '';\n}\n\n.shortDetail {\n  content: '';\n}\n\n/* Without this monkey patch, in light Gmail themes, .shortDetail is fully opaque black. */\n.shortDetail.unread {\n  color: rgb(95 99 104);\n}\n\n/* Without this monkey patch, in dark Gmail themes, .shortDetail is fully opaque white. */\n:global(.inboxsdk__gmail_dark_body_theme) .shortDetail.unread {\n  color: rgb(255 255 255 / 50%);\n}\n"], "sourceRoot": "" }]);
                  var title = "inboxsdk__ZWrBCcqtIqrDEdUtPOrg";
                  var subtitle = "inboxsdk__WFNlIHJZA6zYVSDGWS2K";
                  var resultTitle = "inboxsdk__HBTr58WKm0EhmpKhN5k1";
                  var attachmentIcon = "inboxsdk__kN8mmVlzZVbzIS_awdJ_";
                  var iconAtStart = "inboxsdk__Va73Osg6o8dIKLvkvywn";
                  var recipients = "inboxsdk__oxF6Ne2PQsND932WpK9J";
                  var shortDetail = "inboxsdk__N8BEpD1pdj535bJKkz7u";
                  var snippet = "inboxsdk__rusCS8I3RyomwIQUtkef";
                  var unread = "inboxsdk__POtXLY2WRLq21pk7OxRg";
                  const __WEBPACK_DEFAULT_EXPORT__ = ___CSS_LOADER_EXPORT___;
                })
              ),
              /***/
              8558: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    Ay: () => __WEBPACK_DEFAULT_EXPORT__,
                    /* harmony export */
                    iW: () => (
                      /* binding */
                      main
                    ),
                    /* harmony export */
                    iy: () => (
                      /* binding */
                      hideComposes
                    ),
                    /* harmony export */
                    jq: () => (
                      /* binding */
                      inboxsdkMolesInUse
                    )
                    /* harmony export */
                  });
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(5516);
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(1364);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
                  var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());
                  ___CSS_LOADER_EXPORT___.push([module2.id, ".inboxsdk___CVI_XgzMBSxR6kVfDAg{order:1}.inboxsdk__UJYCuevuXZxfTgEf23lV .aDj.ahe{position:static!important}.inboxsdk__cZb1_NDJIxsKMlBKVLgD .dw\n      .nH\n      > .nH\n      > .no\n      > *:not([style*='order: 0;'], [style*='order: 2147483647;'], .aJl).nn.nH{display:none!important}", "", { "version": 3, "sources": ["webpack://./src/platform-implementation-js/dom-driver/gmail/widgets/mole-view.module.css"], "names": [], "mappings": "AAAA,gCACE,OACF,CAKA,yCACE,yBACF,CAEA;;;;+EAQE,sBACF", "sourcesContent": [".main {\n  order: 1;\n}\n\n/* .aDj.ahe are the `position: fixed` are elements that contain ComposeView toolbars when the ComposeView body isn't focused.\n * This selector may have been the equivalent of `.aDj.aDi` before 2023-08-30.\n */\n.inboxsdkMolesInUse :global(.aDj.ahe) {\n  position: static !important;\n}\n\n.hideComposes\n  :global(\n    .dw\n      .nH\n      > .nH\n      > .no\n      > *:not([style*='order: 0;'], [style*='order: 2147483647;'], .aJl).nn.nH\n  ) {\n  display: none !important;\n}\n"], "sourceRoot": "" }]);
                  var main = "inboxsdk___CVI_XgzMBSxR6kVfDAg";
                  var inboxsdkMolesInUse = "inboxsdk__UJYCuevuXZxfTgEf23lV";
                  var hideComposes = "inboxsdk__cZb1_NDJIxsKMlBKVLgD";
                  const __WEBPACK_DEFAULT_EXPORT__ = ___CSS_LOADER_EXPORT___;
                })
              ),
              /***/
              7510: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    $8: () => (
                      /* binding */
                      app_sidebar_waiting_platform
                    ),
                    /* harmony export */
                    Ay: () => __WEBPACK_DEFAULT_EXPORT__,
                    /* harmony export */
                    E3: () => (
                      /* binding */
                      app_sidebar_content_panel
                    ),
                    /* harmony export */
                    Go: () => (
                      /* binding */
                      sidebar_button_container
                    ),
                    /* harmony export */
                    JR: () => (
                      /* binding */
                      app_sidebar_in_use
                    ),
                    /* harmony export */
                    OW: () => (
                      /* binding */
                      companion_container_app_sidebar_in_use
                    ),
                    /* harmony export */
                    PD: () => (
                      /* binding */
                      app_sidebar_content_panel_grip
                    ),
                    /* harmony export */
                    Pl: () => (
                      /* binding */
                      app_sidebar_content_panel_title
                    ),
                    /* harmony export */
                    T6: () => (
                      /* binding */
                      app_sidebar_content_panel_top_line
                    ),
                    /* harmony export */
                    V: () => (
                      /* binding */
                      app_sidebar_content_panel_toggle
                    ),
                    /* harmony export */
                    Y8: () => (
                      /* binding */
                      app_sidebar_content_panel_toggle_button
                    ),
                    /* harmony export */
                    Yf: () => (
                      /* binding */
                      sidebar_iconArea
                    ),
                    /* harmony export */
                    bh: () => (
                      /* binding */
                      app_sidebar_content_panel_title_text
                    ),
                    /* harmony export */
                    dG: () => (
                      /* binding */
                      app_sidebar_main
                    ),
                    /* harmony export */
                    i1: () => (
                      /* binding */
                      app_sidebar_content_panel_content
                    ),
                    /* harmony export */
                    lt: () => (
                      /* binding */
                      app_sidebar_content_panel_title_icon
                    ),
                    /* harmony export */
                    mz: () => (
                      /* binding */
                      showControls
                    ),
                    /* harmony export */
                    nc: () => (
                      /* binding */
                      app_sidebar
                    ),
                    /* harmony export */
                    qX: () => (
                      /* binding */
                      container_app_sidebar_no_icons
                    ),
                    /* harmony export */
                    rz: () => (
                      /* binding */
                      dragged
                    ),
                    /* harmony export */
                    sz: () => (
                      /* binding */
                      expanded
                    ),
                    /* harmony export */
                    th: () => (
                      /* binding */
                      app_sidebar_content_area
                    ),
                    /* harmony export */
                    uj: () => (
                      /* binding */
                      hideTitleBar
                    ),
                    /* harmony export */
                    vQ: () => (
                      /* binding */
                      thread_noticeBar
                    ),
                    /* harmony export */
                    x1: () => (
                      /* binding */
                      app_sidebar_content_panel_title_icon_container
                    ),
                    /* harmony export */
                    zC: () => (
                      /* binding */
                      app_sidebar_container
                    )
                    /* harmony export */
                  });
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__2(5516);
                  var _node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /* @__PURE__ */ __webpack_require__2.n(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__2(1364);
                  var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /* @__PURE__ */ __webpack_require__2.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);
                  var _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__2(3615);
                  var _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default = /* @__PURE__ */ __webpack_require__2.n(_node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2__);
                  var ___CSS_LOADER_URL_IMPORT_0___ = new URL(
                    /* asset import */
                    __webpack_require__2(6306),
                    __webpack_require__2.b
                  );
                  var ___CSS_LOADER_URL_IMPORT_1___ = new URL(
                    /* asset import */
                    __webpack_require__2(6948),
                    __webpack_require__2.b
                  );
                  var ___CSS_LOADER_URL_IMPORT_2___ = new URL(
                    /* asset import */
                    __webpack_require__2(6332),
                    __webpack_require__2.b
                  );
                  var ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()(_node_modules_css_loader_dist_runtime_sourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default());
                  var ___CSS_LOADER_URL_REPLACEMENT_0___ = _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default()(___CSS_LOADER_URL_IMPORT_0___);
                  var ___CSS_LOADER_URL_REPLACEMENT_1___ = _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default()(___CSS_LOADER_URL_IMPORT_1___);
                  var ___CSS_LOADER_URL_REPLACEMENT_2___ = _node_modules_css_loader_dist_runtime_getUrl_js__WEBPACK_IMPORTED_MODULE_2___default()(___CSS_LOADER_URL_IMPORT_2___);
                  ___CSS_LOADER_EXPORT___.push([module2.id, '.inboxsdk__notransition{transition:none!important}.inboxsdk__close_button{height:24px;width:24px;opacity:.7;position:relative;background:0 0;border:0;padding:0;box-sizing:content-box;outline:0;cursor:pointer}.inboxsdk__close_button:focus,.inboxsdk__close_button:hover{opacity:1}.inboxsdk__close_button:focus::before{background-color:rgb(0 0 0/12%)}.inboxsdk__close_button::before{border-radius:50%;position:absolute;inset:-4px -4px -4px -4px;padding:4px;content:" "}.inboxsdk__close_button::after{content:" ";background:url(https://www.gstatic.com/images/icons/material/system/1x/close_black_24dp.png);position:absolute;height:24px;width:24px;top:0;left:0}@media (min-resolution:192dpi){.inboxsdk__close_button::after{background:url(https://www.gstatic.com/images/icons/material/system/2x/close_black_24dp.png);background-size:contain}}.inboxsdk__nJrOYb9x4IUalKhkqH70{display:none}.inboxsdk__drawer_view_container{visibility:visible;direction:initial;position:fixed;height:100vh;width:100vw;bottom:0;left:0;z-index:51;pointer-events:none}.inboxsdk__drawer_view{position:absolute;pointer-events:auto;top:0;bottom:0;right:0;width:452px;font:13px"Helvetica Neue",Helvetica,Arial,sans-serif;display:flex;flex-direction:column;background-color:#fff;outline:0;box-shadow:0 0 8px rgb(0 0 0/18%),0 8px 16px rgb(0 0 0/36%);transform:translateX(100%);transition:transform 150ms cubic-bezier(.4,0,.2,1)}.inboxsdk__drawer_view.inboxsdk__match_sidebar_content_panel_width{width:300px}.inboxsdk__drawer_view.inboxsdk__active{transform:none}.inboxsdk__drawer_title_bar{background-color:#f5f5f5;border-bottom:1px solid #e0e0e0;padding:16px 20px;white-space:nowrap;display:flex;flex:0 0 auto}.inboxsdk__drawer_title_bar .inboxsdk__close_button{margin-right:20px;flex-shrink:0}.inboxsdk__drawer_title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font:20px/24px"Helvetica Neue",Helvetica,Arial,sans-serif}.inboxsdk__inbox_backdrop{visibility:visible;position:fixed;height:100vh;width:100vw;bottom:0;left:0;z-index:50;background-color:transparent;transition:background-color 150ms cubic-bezier(.4,0,1,1)}.inboxsdk__inbox_backdrop.inboxsdk__active{background-color:rgb(10 10 10/60%);transition:background-color 70ms cubic-bezier(0,0,.2,1)}.inboxsdk__inbox_backdrop~.inboxsdk__inbox_backdrop{opacity:.6}.inboxsdk__YVRXKNcaUvgm8xbnhvbA{display:flex;flex-direction:column}.inboxsdk__L1YTilBb_3NY6uyjljIg>.inboxsdk__close_button{position:absolute;bottom:10px;right:20px}.inboxsdk__ZsVjiThsnbCmCG_X1Vvn{width:216px}.inboxsdk__RRnCd87hoA2uHeC1Z_FE{overflow:hidden;font:12px Arial,sans-serif;max-height:100%;box-sizing:border-box}.inboxsdk__iYzl6PjYB9v7KGQNbONH{white-space:nowrap;display:flex;user-select:none;cursor:default}.inboxsdk__RRnCd87hoA2uHeC1Z_FE:not(.inboxsdk__o9YcckDJql686JS0n2cc) .inboxsdk__iYzl6PjYB9v7KGQNbONH{border-bottom:1px solid #ddd}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__XdCPRDkO7zSIv6nU4USH .inboxsdk__iYzl6PjYB9v7KGQNbONH,.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__vTsoFgWgM9ldKGsRJYHd .inboxsdk__iYzl6PjYB9v7KGQNbONH:hover{background:rgb(0 0 0/3%)}.inboxsdk__lD1h9YUibxcHdtWGdiWq{min-width:0;overflow:hidden;text-overflow:ellipsis}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__vTsoFgWgM9ldKGsRJYHd .inboxsdk__lD1h9YUibxcHdtWGdiWq{cursor:move}.inboxsdk__p_cMIiZvN4vwQdGOpCts{padding-left:6px;vertical-align:middle;font:700 13px/40px"Helvetica Neue",Helvetica,Arial,sans-serif;color:rgb(0 0 0/87%)}.inboxsdk__L1YTilBb_3NY6uyjljIg.inboxsdk__fQK2Ffccj51PVtC_ibDc .inboxsdk__iYzl6PjYB9v7KGQNbONH{display:none}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__vTsoFgWgM9ldKGsRJYHd .inboxsdk__iYzl6PjYB9v7KGQNbONH:hover .inboxsdk__KudoZ1EBFoQsddbSavvj{position:absolute;top:0;left:0;width:10px;height:40px;background:url(' + ___CSS_LOADER_URL_REPLACEMENT_0___ + ")50%center no-repeat}.inboxsdk__TFQRFr4aJVmDmx2llTVx{width:20px;height:20px;vertical-align:middle;display:inline-flex;justify-content:center;align-items:center;margin-top:-1px}.inboxsdk__Yzt2_upvw7fe6BjWdlhZ,.inboxsdk__Yzt2_upvw7fe6BjWdlhZ>img{width:13px;height:13px}.inboxsdk__M4Frio2Us0lwSTltblkg{flex:1;text-align:right;visibility:hidden}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__vTsoFgWgM9ldKGsRJYHd .inboxsdk__M4Frio2Us0lwSTltblkg{visibility:visible;cursor:pointer}.inboxsdk__Nr6Udyn2ocUynKpdfxh1{margin-top:12px;margin-right:4px;background:url(" + ___CSS_LOADER_URL_REPLACEMENT_1___ + ')center/20px no-repeat;border:0;width:14px;height:14px;transform:rotate(-90deg);transition:-webkit-transform .15s,transform .15s;outline:0;opacity:.6;cursor:pointer}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__XdCPRDkO7zSIv6nU4USH .inboxsdk__iYzl6PjYB9v7KGQNbONH .inboxsdk__Nr6Udyn2ocUynKpdfxh1,.inboxsdk__iYzl6PjYB9v7KGQNbONH:hover .inboxsdk__Nr6Udyn2ocUynKpdfxh1{opacity:.9}.inboxsdk__RRnCd87hoA2uHeC1Z_FE.inboxsdk__o9YcckDJql686JS0n2cc .inboxsdk__Nr6Udyn2ocUynKpdfxh1{transform:rotate(0)}.inboxsdk__QsikHKWmzD0Ovsg3wrIw{margin-bottom:25px}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__ARG5bpD2vntIyElH978u{position:relative}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon:focus,.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon:hover{outline:0}.inboxsdk__appid_warning{margin:0;padding:9px;color:#4b4b4b;background:#ff6c6c;font-size:10pt}.inboxsdk__appid_warning_main,a.inboxsdk__appid_register{display:inline-block;vertical-align:middle}.inboxsdk__appid_warning .topline{font-weight:700;font-size:11pt}a.inboxsdk__appid_register{color:#fff;background:#1989ff;border-radius:3px;text-decoration:none;box-shadow:0 0 5px rgb(0 0 0/30%);padding:7px;font-size:10pt;margin-left:1em}.inboxsdk__thread_row_icon_wrapper{display:inline-block}.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg{margin-top:0}.inboxsdk__QbxpXL1mja3SlO_1nJOS{background:#f8ebc0;margin-bottom:10px;padding:12px 4px 6px 12px}.inboxsdk__suggestions_separator_before{padding-bottom:2px!important}.inboxsdk__suggestions_separator_after{border-top:1px solid #e5e5e5;padding-top:2px!important}div.T-I.inboxsdk__button{user-select:none;min-width:27px}div.bHJ .inboxsdk__button{margin:0 2px 0 10px}.inboxsdk__no_bg{background:0 0}.inboxsdk__button.inboxsdk__button_disabled{opacity:.55}.inboxsdk__button_icon+.inboxsdk__button_text{margin-left:5px}.inboxsdk__button_icon{display:inline-block}.inboxsdk__button_iconImg{height:20px;width:20px;vertical-align:middle;margin-top:-2px;user-drag:none;user-select:none;-webkit-user-drag:none}.inboxsdk__button_green_hover,.inboxsdk__button_green_inactive{background-image:-webkit-linear-gradient(top,transparent,transparent);background-image:linear-gradient(top,transparent,transparent);border:1px solid transparent;text-shadow:none}.inboxsdk__button_green_inactive{box-shadow:0 1px 0 rgb(0 0 0/5%);background-color:#53a93f;color:#fff}.inboxsdk__button_green_hover{box-shadow:inset 0-1px 0#4c8534;background-color:#65b045;border-bottom:1px solid #4c8534}.inboxsdk__button_green_active{box-shadow:inset 0 1px 0#2f6124;background:#3e802f;border:1px solid transparent;border-top:1px solid #2f6124;color:#fff;text-shadow:none}.ams.inboxsdk__button::before{width:0;margin:0}.ams.inboxsdk__button:focus{background:rgb(0 0 0/0%)}.ams.inboxsdk__button .asa:not(.bjy)::after{width:auto;height:auto}.inboxsdk__menu{min-width:1em;min-height:1em;padding:0;overflow:visible;max-height:none;z-index:7;cursor:default;font-size:13px;margin:0;outline:0}.inboxsdk__menu>.inboxsdk__menuContent{padding:0;box-shadow:0 8px 10px 1px rgb(0 0 0/14%),0 3px 14px 2px rgb(0 0 0/12%),0 5px 5px -3px rgb(0 0 0/20%);transition:opacity .218s;border:1px solid rgb(0 0 0/20%);background:#fff;outline:0}.f4.J-N-JX.inboxsdk__message_more_icon{height:16px;margin-top:1px;width:16px}.inboxsdk__composeButton{height:20px;width:20px;padding:4px}.inboxsdk__composeButton,.inboxsdk__compose_sendButton{display:inline-flex;align-items:center;justify-content:center;vertical-align:middle;outline:0;position:relative}.inboxsdk__composeButton+.inboxsdk__composeButton{margin-left:4px}.inboxsdk__composeButton .inboxsdk__button_icon{opacity:.55}.inboxsdk__composeButton.inboxsdk__composeButton_active .inboxsdk__button_icon,.inboxsdk__composeButton:focus .inboxsdk__button_icon,.inboxsdk__composeButton:hover .inboxsdk__button_icon{opacity:1}.inboxsdk__composeButton::before{content:"";display:block;opacity:0;position:absolute;transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);inset:0 0 0 0;background:0 0;box-sizing:border-box;transform:scale(0);transition-property:transform,opacity;border-radius:4px}.inboxsdk__composeButton:hover::before{background-color:rgb(32 33 36/5.9%);border:0;box-shadow:none;opacity:1;transform:scale(1)}.inboxsdk__composeButton.inboxsdk__composeButton_active::before,.inboxsdk__composeButton:focus::before{background-color:rgb(32 33 36/12.2%);border:0;box-shadow:none;opacity:1;transform:scale(1)}.inboxsdk__compose_actionToolbar .inboxsdk__compose_groupedActionToolbar div.inboxsdk__composeButton:last-child{margin-right:0}.inboxsdk__compose_sendButton{background-color:#1a73e8;color:#fff;height:24px;width:auto;border-radius:4px;padding:6px 4px;margin-left:2px}.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton{height:24px}.inboxsdk__compose_sendButton.inboxsdk__composeButton_active,.inboxsdk__compose_sendButton:focus{background-color:#5094ed;box-shadow:0 1px 1px 0 rgb(66 133 244/30%),0 1px 3px 1px rgb(66 133 244/15%);border:0}.T-I~.inboxsdk__compose_sendButton{margin-left:-6px}.inboxsdk__compose_actionToolbar{white-space:nowrap;padding-left:6px}.inboxsdk__compose_actionToolbar .inboxsdk__button_icon{height:20px;width:20px;display:inline-flex;user-select:none}.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg{height:17px;width:17px;display:inline-flex;margin:auto}.inboxsdk__compose_actionToolbar+.gU:not(.inboxsdk__compose_separator){padding-left:8px}.inboxsdk__compose_groupedActionToolbar_visible .aDg .aDh{overflow-y:visible}.inboxsdk__compose_groupedActionToolbar{position:absolute;bottom:44px;z-index:10;border-radius:2px;box-shadow:0 4px 5px 0 rgb(0 0 0/14%),0 1px 10px 0 rgb(0 0 0/12%),0 2px 4px -1px rgb(0 0 0/20%);margin:3px 3px 7px;padding:4px 5px;background:#fff;left:-3px}.inboxsdk__compose_inlineReply .inboxsdk__compose_groupedActionToolbar{left:14px}.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton:first-child{margin-left:0;margin-right:0}.inboxsdk__composeButton.inboxsdk__compose_groupedActionButton{margin-right:0}.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton{padding:4px}.inboxsdk__compose_groupedActionToolbar_visible .bA3{height:40px}.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button{z-index:1;margin-right:0}.inboxsdk__compose_groupedActionToolbar_arrow,span.inboxsdk__thread_row_custom_draft_label+div.yW{display:none}.inboxsdk__compose_customSendContainer{display:inline-block;position:relative;outline:0;margin:6px 0;padding:0;vertical-align:middle;height:36px;line-height:36px}.inboxsdk__compose_customTitleBarColor>img.Ha,.inboxsdk__compose_customTitleBarColor>img.Hl,.inboxsdk__compose_customTitleBarColor>img.Hq{background-color:transparent!important}.inboxsdk__compose_hasCustomTitleBarText,.inboxsdk__compose_hasCustomTitleBarText>tbody>tr{display:flex}.inboxsdk__compose_hasCustomTitleBarText>tbody>tr{align-items:center}.inboxsdk__compose_hasCustomTitleBarText>tbody{width:100%}.inboxsdk__compose_nativeTitleBarText{display:none!important}.inboxsdk__compose_customTitleBarText{width:calc(100% - 80px)}.inboxsdk__compose_hasCustomTitleBarText td.Hm{margin-right:10px;margin-left:auto}.inboxsdk__compose_statusBarPrependContainer{border-top:1px solid #cfcfcf}.inboxsdk__compose_statusBarPrependContainer+table td.gU{border-top:none}input.inboxsdk__x_close_button{background-color:transparent;background-image:url(' + ___CSS_LOADER_URL_REPLACEMENT_2___ + ');background-size:cover;background-repeat:no-repeat;background-position:center center;height:20px;width:20px;border:0;vertical-align:middle;cursor:pointer;float:right;margin:5px}.inboxsdk__gmail_label.inboxsdk__label_has_icon .au{display:inline-block;margin-left:14px}.inboxsdk__thread_row_label .inboxsdk__button_icon,.inboxsdk__thread_row_label .inboxsdk__button_iconImg{height:11px;width:11px}.inboxsdk__thread_row_label .inboxsdk__button_icon{display:inline-block;margin-top:3px;margin-left:4px;position:absolute}.inboxsdk__thread_row_button{outline:0;height:20px;width:20px;padding:0}.inboxsdk__thread_row_button .inboxsdk__button_icon{max-height:100%}.inboxsdk__thread_row_custom_date_container,.zA>.xY.inboxsdk__thread_row_attachment_icons_present{max-width:inherit}.inboxsdk__thread_row_button .inboxsdk__button_iconImg{height:20px;width:20px;margin-top:0}.inboxsdk__gmail_action{float:right;position:relative;background-color:gray;margin-left:1em;cursor:default;background-image:-webkit-linear-gradient(top,#e9e9e9,#e6e6e6);background-image:linear-gradient(top,#e9e9e9,#e6e6e6);border:1px solid rgb(0 0 0/10%);border-color:#ccc;color:#444;height:17px;line-height:17px;min-width:56px;border-radius:2px;font-size:11px;font-weight:700;text-align:center;white-space:nowrap;padding:0 18px 0 6px}.inboxsdk__gmail_action:focus{border:1px solid #4d90fe;outline:0}.inboxsdk__gmail_action:active{box-shadow:inset 0 1px 2px rgb(0 0 0/10%)}.inboxsdk__gmail_action:hover{box-shadow:0 1px 1px rgb(0 0 0/5%);background-color:#ededed;background-image:-webkit-linear-gradient(top,#ededed,#eaeaea);background-image:linear-gradient(top,#ededed,#eaeaea);border-color:#b8b8b8}.inboxsdk__gmail_action::after{content:"";position:absolute;right:5px;top:5px;margin-left:5px;background:no-repeat url(https://ssl.gstatic.com/mail/sprites/smartmail-561acb673be75c1d374881a95997fce4.png)-67px -100px;width:7px;height:7px;opacity:.55}.inboxsdk__thread_row_custom_date{margin-left:2px}span.inboxsdk__thread_row_custom_date+span:not(.inboxsdk__thread_row_custom_date){display:none}.inboxsdk__thread_row_attachment_iconWrapper{margin-left:3px;height:16px}.inboxsdk__thread_row_attachment_icon{margin-left:3px;width:16px;height:16px}.inboxsdk__thread_row_attachment_iconWrapper{display:flex;justify-content:center;align-items:center;width:max-content}.zA td.apU.xY{width:initial}.zA td.apU.xY span.inboxsdk__thread_row_button{margin:0 10px;opacity:.16}.zA.aqw td.apU.xY span.inboxsdk__thread_row_button{opacity:.54}.zA.aqw td.apU.xY span.inboxsdk__thread_row_button:hover{opacity:1}.zA td.apU.xY span.inboxsdk__thread_row_button::before{width:0;height:0}.inboxsdk__thread_row_attachment_icon{vertical-align:middle}.Zs .xY.inboxsdk__thread_row_attachment_icons_present{flex-grow:0}.Zs .xY.inboxsdk__thread_row_label{order:1}.Zs .xY.inboxsdk__thread_row_icon_wrapper{order:1;margin-left:3px;margin-right:0}.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_icon,.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg{height:18px;width:18px}.inboxsdk__thread_row_icon_wrapper{width:20px;margin-right:3px;align-self:center;height:20px;flex:0 0 auto}.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg{vertical-align:top}.inboxsdk__thread_row_image_added .y6 .inboxsdk__thread_row_icon_wrapper~span[id]{margin-left:3px}.inboxsdk__thread_row_image_added .a4W,.inboxsdk__thread_row_image_added .apA,.inboxsdk__thread_row_image_added .apx{position:relative}[inboxsdk__message_added_attachment_icon] td.gH div.gK>span:first-child>img,[inboxsdk__message_added_attachment_icon] td.gH>span:first-child>img{margin-right:3px;margin-left:3px;margin-top:0}[inboxsdk__message_added_attachment_icon] td.gH div.gK>span:first-child>:last-child,[inboxsdk__message_added_attachment_icon] td.gH>span:first-child>:last-child{margin-right:6px}.inboxsdk__message_attachment_icon,.inboxsdk__message_attachment_iconWrapper{width:21px;height:21px;position:relative}.inboxsdk__message_attachment_iconWrapper{margin:auto 3px;display:inline-flex;justify-content:center;align-items:center;vertical-align:top}.inboxsdk__message_attachment_tooltipWrapper{position:absolute;top:19px;z-index:10}.gU .aWQ{max-height:3px}.aQw .inboxsdk__button_icon{display:inline-flex;align-items:center;justify-content:center;height:28px}.aQw .inboxsdk__button_iconImg{height:18px;width:18px;margin-top:2px}.aZi .asa .inboxsdk__button_iconImg{display:inline-block;vertical-align:middle;margin-top:-3px}.aZi .aZj .asa .inboxsdk__button_iconImg{margin:0}body .dw{z-index:6!important}.inboxsdk__compose_outerSidebar_wrapper{position:absolute;left:-401px;top:0;background:#fff;width:400px;bottom:0;border-left:1px solid silver;box-shadow:-2px 0 1px #e6e6e6;display:block}.inboxsdk__outerSidebarActive .aSt .inboxsdk__compose_outerSidebar_wrapper{border-left:0;box-shadow:none;left:-400px}.inboxsdk__outerSidebarActive .aSs>div{width:50%!important;margin-left:30%}.inboxsdk__compose_outerSidebar_header{background:#404040;font-size:80%;padding:10px 10px 11px;color:#fff;border-bottom:1px solid #c4c4c4}.inboxsdk__compose_outerSidebar_body{position:absolute;width:100%;bottom:43px;top:36px;left:-1px;overflow:auto}.inboxsdk__compose_outerSidebar_footer{position:absolute;bottom:0;width:100%;border-top:1px solid rgb(206 206 206);display:block}.inboxsdk__compose_innerSidebarActive .GQ,.inboxsdk__compose_innerSidebarActive form{padding-right:200px}div.inboxsdk__compose_statusbar{border:0;height:40px;margin:0}.inboxsdk__compose_statusbar{background:0 0;position:relative}.HM .I5 .inboxsdk__compose_statusbar{padding:0 16px 16px}table+.inboxsdk__compose_statusbar{margin-top:-8px}body.inboxsdk__classic_gmail_recipients_area .inboxsdk__compose_statusbarActive .aoI{height:auto!important}.inboxsdk__compose_statusbarActive .aDl{z-index:unset}.inboxsdk__compose .qz{max-height:inherit!important}body:not(.inboxsdk_hack_disableComposeSizeFixer) .inboxsdk__size_fixer .aDj.aDi{position:static!important}.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .HM .I5{padding-bottom:var(--inboxsdk-total-added-statusbar-height, 0px)}.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .aDj::before{height:calc(100% + var(--inboxsdk-total-added-statusbar-height, 0px))}.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .aDj.aDi>.aDh{background-color:#fff}.inboxsdk__recipient_row{display:flex}.inboxsdk__compose_notice{background-color:#f5f5f5;border-radius:4px;margin:10px;padding:10px 16px}.inboxsdk__recipient_row td.ok{height:20px;padding:0!important}.inboxsdk__recipient_row td.az3{padding:0 3px}.inboxsdk__compose_forceRecipientsOpen .fX.aXjCH{display:block!important}.inboxsdk__compose_forceRecipientRowHidden,.inboxsdk__compose_forceRecipientsOpen .aoD.hl,.inboxsdk__compose_hideRecipientArea .aoD.hl,.inboxsdk__compose_hideRecipientArea .fX.aXjCH,[data-thread-toolbar=true] [data-rowlist-toolbar=true],[data-toolbar-expanded=false] [data-toolbar-expanded=true],[data-toolbar-expanded=true] [data-toolbar-expanded=false],[data-toolbar-icononly=true] .inboxsdk__button_text{display:none!important}[data-toolbar-icononly=false] .inboxsdk__button_text{color:#5f6368}[data-toolbar-icononly=false] .asa::before{border-radius:4px;border:0!important}[data-toolbar-icononly=false] .inboxsdk__button{align-items:center;border:0;display:inline-flex;justify-content:center;position:relative;z-index:0;-webkit-font-smoothing:antialiased;font-family:"Google Sans",Roboto,RobotoDraft,Helvetica,Arial,sans-serif;font-size:14px;letter-spacing:.15px;background:0 0;box-sizing:border-box;color:#5f6368;cursor:pointer;font-weight:500;outline:0;padding:0 8px}.inboxsdk__menuItem .inboxsdk__icon,.inboxsdk__menuItem img{height:16px;width:16px;margin-top:-1px}.inboxsdk__modal_overlay{right:0;bottom:0}.inboxsdk__modal_fullscreen{position:fixed;inset:0 0 0 0;z-index:503;display:flex;justify-content:center;align-items:center;padding:110px 50px 50px}.inboxsdk__modal_content{margin-top:30px;margin-bottom:30px}.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons .inboxsdk__modal_content{margin-bottom:0}.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons:not(.inboxsdk__modal_hideBottom) .inboxsdk__modal_content{margin-bottom:0;padding-bottom:24px}.inboxsdk__modal_close{outline:0;cursor:pointer}.inboxsdk__modal_fullscreen .inboxsdk__modal_container{position:relative;margin-top:-60px;width:auto;overflow:hidden}.inboxsdk__modal_fullscreen .inboxsdk__modal_container .inboxsdk__modal_toprow{margin-right:16px}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_close{display:none}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_container{padding-top:0}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_content{margin-top:0}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .Kj-JD-K7{margin:0;display:none}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides .inboxsdk__modal_container,.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides .inboxsdk__modal_content{padding-left:0;padding-right:0}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom .inboxsdk__modal_content{margin-bottom:0}.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom .inboxsdk__modal_container{padding-bottom:0}.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width{display:flex}.inboxsdk__modal_toprow--constrain-title-width>span[role=heading]{flex:1;width:0;word-wrap:break-word}.inboxsdk__drawers_in_use .aDi,.inboxsdk__moles_in_use .aDi{left:auto!important;position:static}.inboxsdk__moles_in_use .nH>.nH>.no{white-space:nowrap}.inboxsdk__moles_in_use .nH>.nH>.no>*{white-space:initial}.inboxsdk__moles_in_use .nH>.nH>.no>.nn{display:inline-block;float:none}.inboxsdk__mole_view{position:relative;max-width:564px;height:100vh;vertical-align:top;display:inline-flex;align-items:flex-end}.inboxsdk__mole_view_inner{visibility:visible;box-sizing:border-box;margin-right:5px;box-shadow:rgb(0 0 0/20%)0 2px 6px;min-width:260px;min-height:40px}.inboxsdk__mole_view_inner:not(.inboxsdk__original_view),.inboxsdk__mole_view_titlebar:not(.inboxsdk__original_view){border-radius:8px 8px 0 0}.inboxsdk__mole_view_titlebar{position:absolute;left:0;right:5px;font-size:14px;font-weight:500;box-sizing:border-box;height:40px;cursor:pointer;padding:10px 12px 10px 16px;color:#041e49;background:#f2f6fc}.inboxsdk__mole_view_titlebar.inboxsdk__original_view{color:#fff;font-size:12.8px;font-weight:400;background:#404040;padding:9px 0 0 11px;border-radius:4px 4px 0 0}.inboxsdk__mole_view_titlebar h2{font-size:inherit;font-weight:inherit;margin:4px 0 0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.inboxsdk__mole_title_buttons{white-space:nowrap;float:right;padding-right:5px;margin-top:1px}.inboxsdk__mole_title_buttons.inboxsdk__original_view{margin-top:-3px}.inboxsdk__mole_title_buttons>img{height:24px;width:24px;position:relative;top:2px}.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view)>img{height:16px;width:16px;margin-left:4px}.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view)>img:hover{background-color:rgb(68 71 70/7.8%)}.inboxsdk__mole_title_buttons.inboxsdk__original_view>img:hover{background-color:#737373}.inboxsdk__mole_title_buttons>img:hover{opacity:1}.inboxsdk__mole_view.inboxsdk__minimized .Hl,.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content,.inboxsdk__mole_view.inboxsdk__minimized.inboxsdk__mole_use_minimize_title h2.inboxsdk__mole_default,.inboxsdk__mole_view:not(.inboxsdk__minimized) .Hk,.inboxsdk__mole_view:not(.inboxsdk__minimized) h2.inboxsdk__mole_minimized,.inboxsdk__mole_view:not(.inboxsdk__mole_use_minimize_title) h2.inboxsdk__mole_minimized{display:none}.inboxsdk__mole_view_content:not(.inboxsdk__original_view){margin-top:40px;border:0}.inboxsdk__mole_view_content{margin-top:36px;border:1px solid #cfcfcf;background:#fff;min-width:260px;min-height:20px;max-height:80vh}.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_inner{min-width:0}.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_content{margin-top:0;min-width:0}.inboxsdk__tab{width:30px}.inboxsdk__tab.inboxsdk__fQK2Ffccj51PVtC_ibDc:first-child:last-child{display:none}.inboxsdk__tab.inboxsdk__tab_selected{width:auto}table.aKk .inboxsdk__contentTabContainer .inboxsdk__tab .aAy[role=tab]{height:28px}.inboxsdk__tab_icon{width:30px;height:25px;background-position-x:5px;background-position-y:3px;background-size:16px;background-repeat:no-repeat}.inboxsdk__tab_icon img{height:16px;width:16px;margin-left:5px;margin-top:3px}.inboxsdk__tab .aKx{top:4px}.inboxsdk__sidebar div[role=complementary]{position:static!important}.inboxsdk__sidebar>div.y4,.inboxsdk__lmkPHCz841PzU2vywMZI>div.y4{display:none}table.aKk .inboxsdk__contentTabContainer .inboxsdk__tab:first-child .aAy[role=tab]{border-left-width:1px}.inboxsdk__sidebar .inboxsdk__contentPanelContainer{font:12px Arial,sans-serif;max-width:220px}.inboxsdk__contentPanelContainer_contentContainer{overflow:hidden;margin-bottom:10px;border-bottom:1px solid #d8d8d8}body.inboxsdk__hasTopMessageBar .bq9{top:var(--inboxsdk__topMessageBar-height)}.inboxsdk__lmkPHCz841PzU2vywMZI>div[role=complementary]{position:static!important;width:216px!important}.inboxsdk__lmkPHCz841PzU2vywMZI{will-change:position}.inboxsdk__RRnCd87hoA2uHeC1Z_FE{background:#fff}.inboxsdk__ZsVjiThsnbCmCG_X1Vvn{padding:4px 0 12px}.inboxsdk__L1YTilBb_3NY6uyjljIg.inboxsdk__fQK2Ffccj51PVtC_ibDc .inboxsdk__ZsVjiThsnbCmCG_X1Vvn{padding-top:0}.container_app_sidebar_in_use.no,.inboxsdk__IpDkQtEZuh257muFXot6.no{display:flex;flex-direction:row;width:100%}body[dir=rtl] .container_app_sidebar_in_use.no[dir=ltr],body[dir=rtl] .idm5_container_app_sidebar_no_icons.no[dir=ltr]{flex-direction:row-reverse}.container_app_sidebar_in_use.no .G-atb.inboxsdk__thread_toolbar_parent[gh=tm]{margin-right:-57px!important}.container_addon_sidebar_visible.container_app_sidebar_in_use.no .G-atb.inboxsdk__thread_toolbar_parent[gh=tm],.container_app_sidebar_visible.container_app_sidebar_in_use.no .G-atb.inboxsdk__thread_toolbar_parent[gh=tm]{margin-right:-321px!important}.inboxsdk__IpDkQtEZuh257muFXot6 .G-atb.inboxsdk__thread_toolbar_parent[gh=tm]{margin-right:0!important}.inboxsdk__button.ar7{pointer-events:all!important}.container_app_sidebar_in_use .bkK.nn,.inboxsdk__IpDkQtEZuh257muFXot6 .bkK.nn{width:auto!important;flex:1;min-width:0}.inboxsdk__IpDkQtEZuh257muFXot6 .bnl.nn{z-index:-1;position:absolute}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI{min-width:57px!important;flex-shrink:0}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI.app_sidebar_visible{min-width:321px!important}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI>.J-KU-Jg{display:block!important}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI .inboxsdk__jQiSbhX57v1JCl6fIbdb{display:none}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI.app_sidebar_visible .inboxsdk__jQiSbhX57v1JCl6fIbdb{display:block;float:left;height:100%;border-left:1px solid #e0e0e0;padding-left:16px;width:calc(100% - 74px);overflow:auto}.container_app_sidebar_in_use .inboxsdk__jQiSbhX57v1JCl6fIbdb .inboxsdk__ZsVjiThsnbCmCG_X1Vvn{width:calc(100% - 16px);padding-right:16px}.container_app_sidebar_in_use .inboxsdk__lmkPHCz841PzU2vywMZI.app_sidebar_visible .J-KU-Jz{width:auto;padding-right:50px}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon{margin:18px 18px 10px;border:0;background:0 0;height:20px;width:20px;overflow:hidden;padding:0;cursor:pointer;position:relative}.inboxsdk__z3cCBtGXYneog44Vf16J.sidebar_global_iconArea .inboxsdk__button_icon{margin-bottom:18px}body .inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon{overflow:visible}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon:hover::before,.inboxsdk__z3cCBtGXYneog44Vf16J .sidebar_button_container_active .inboxsdk__button_icon::before{content:"";background:#f1f3f4;position:absolute;inset:-10px -10px -10px -10px;border-radius:50%;z-index:0}.inboxsdk__z3cCBtGXYneog44Vf16J .sidebar_button_container_active .inboxsdk__button_icon::before{background:#e8eaed}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_iconImg{width:20px;height:20px;margin-top:0}.inboxsdk__z3cCBtGXYneog44Vf16J .inboxsdk__button_icon .inboxsdk__button_iconImg{position:absolute;left:0;top:0;z-index:1}.inboxsdk__z3cCBtGXYneog44Vf16J .sidebar_button_container_active .inboxsdk__button_selectedIndicator{height:40px;width:3px;position:absolute;left:0;bottom:0;background-color:rgb(66 133 244);border-radius:0 3px 3px 0}body:not(.inboxsdk__sidebar_icons_right) .inboxsdk__z3cCBtGXYneog44Vf16J .sidebar_button_container_active .inboxsdk__button_selectedIndicator{left:unset;right:0;border-radius:3px 0 0 3px}.inboxsdk__z3cCBtGXYneog44Vf16J.sidebar_global_iconArea .sidebar_button_container_active .inboxsdk__button_selectedIndicator{bottom:8px}.brC-brG.companion_app_sidebar_visible{display:block!important}.bq9:not(.brC-brG).companion_app_sidebar_wrapper_visible{display:block!important}.WN9Ejb.br3.companion_app_sidebar_wrapper_visible{display:block!important}.companion_global_app_sidebar_visible .thread_app_sidebar{display:none}.companion_app_sidebar_visible:not(.companion_global_app_sidebar_visible) .global_app_sidebar,body.inboxsdk__custom_view_active .brC-aT5-aOt-ato-Kp-Jw [role=tablist]>div:not(:last-child){display:none}.nH.companion_container_app_sidebar_visible{width:calc(100% - 300px)!important}.companion_app_sidebar_visible .addon_sidebar~div:not(.addon_sidebar){display:none!important}.inboxsdk__lmkPHCz841PzU2vywMZI .inboxsdk__jQiSbhX57v1JCl6fIbdb.addon_sidebar{height:100%;overflow:auto}.inboxsdk__lmkPHCz841PzU2vywMZI .inboxsdk__jQiSbhX57v1JCl6fIbdb.addon_sidebar .inboxsdk__ZsVjiThsnbCmCG_X1Vvn{width:100%}.inboxsdk__lmkPHCz841PzU2vywMZI:not(.companion_app_sidebar_visible) .addon_sidebar{display:none}.inboxsdk__TFQRFr4aJVmDmx2llTVx{margin-left:0}.inboxsdk__RRnCd87hoA2uHeC1Z_FE .inboxsdk__iYzl6PjYB9v7KGQNbONH{padding:0 16px}.inboxsdk__lmkPHCz841PzU2vywMZI .bvq,.inboxsdk__lmkPHCz841PzU2vywMZI .bvq>div:last-child{display:block!important}.inboxsdk__cnd4jAy3zFUYdR_NdMxT .bvq>div:first-child{display:none!important}.inboxsdk__custom_view_element{overflow:auto}.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem){border-left-color:transparent}.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .bsU,.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .nU:not(.n1) .n0{font-weight:400}.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .TO{background:0 0}.inboxsdk__hide_addon_container{display:flex!important;flex-direction:row;width:100%!important}body[dir=rtl] .inboxsdk__hide_addon_container[dir=ltr]{flex-direction:row-reverse}.inboxsdk__hide_addon_container>.bkK.nn{width:auto!important;flex:1;min-width:0}.inboxsdk__hide_addon_container>.bnl.nn,.inboxsdk__navItem>.TO img.afM.afO~.aio>.bsU{display:none}.inboxsdk__navItem{font-size:14px}.inboxsdk__navItem:not(.Xr)>.V3[style]{flex-grow:0!important}.inboxsdk__navItem>.TO.n4{display:block;padding-left:0}.inboxsdk__collapsiblePanel .inboxsdk__navItem>.TO .TN.aik{padding-left:18px}.inboxsdk__collapsiblePanel .inboxsdk__navItem>.TO .qj{margin-right:14px}.inboxsdk__navItem>.TO.n4 .qj>.G-asx{margin-right:0}.inboxsdk__navItem>.TO .aio>.bsU:empty{display:none}.inboxsdk__navItem>.TO .qj:empty::after{background-color:rgb(118 118 118);border-radius:50%;content:"";height:18px;margin-left:1px;width:18px}.inboxsdk__navItem>.TO .qj[style*=border-color]:empty::after{border-color:inherit}.inboxsdk__navItem>.TO:hover .pM{display:flex;visibility:visible}.inboxsdk__navItem>.TO .afM{cursor:pointer}.inboxsdk__navItem>.TO img.afM.afO,.inboxsdk__navItem>.TO:hover .afM{display:block;visibility:visible}.inboxsdk__collapsiblePanel_loading_container,.inboxsdk__navItem>.TO:hover .bsU{display:none}.inboxsdk__navItem.inboxsdk__navItem_nonClickable>.TO:active{background-color:initial}.inboxsdk__navItem_hover .aj0,.inboxsdk__navItem_hover .p8{visibility:visible}.inboxsdk__appMenuItem .CL.V6::before,.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3::before{background-image:var(--background-image)}.inboxsdk__collapsiblePanel.apV.aJu .T-I.T-I-KE.L3::before{background-image:var(--background-image--hover)}.inboxsdk__appMenuItem.apV .CL.V6::before{background-image:var(--background-image--active)}.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3::before{background-size:24px}.inboxsdk__collapsiblePanel_loading_container.inboxsdk__collapsiblePanel_loading_container--active,.inboxsdk__shortcutHelp_table table.cf,.inboxsdk__shortcutHelp_table tbody tbody,table[role=presentation].inboxsdk__thread_view_with_custom_view>tr{display:block}.inboxsdk__navItem_link{cursor:pointer;margin-left:auto}.inboxsdk__navItem_link>a{margin-left:16px}.inboxsdk__navItem>.TO .inboxsdk__button{margin-right:0}[dir=rtl] .inboxsdk__navItem_link{left:-4px;right:initial}.inboxsdk__navItem_container .aio .inboxsdk__button{position:absolute;top:0;right:-30px}.inboxsdk__navItem_marker{position:absolute;left:0;padding-bottom:2px}.inboxsdk__expando{z-index:1}.aip .CK,.inboxsdk__navItem_link>a{color:#15c}.aip .CK:hover,.inboxsdk__navItem_link>a:hover{text-decoration:underline}.inboxsdk__navItem_container .aio.aip{white-space:nowrap}.WR[role=navigation] .inboxsdk__navItem .Yh:not(.inboxsdk__navItem_parent_accessory_button):empty{display:none}.WR[role=navigation] .inboxsdk__navItem .Yh:not(.inboxsdk__navItem_parent_accessory_button){background:0 0}.WR[role=navigation] .inboxsdk__navItem .Yh .inboxsdk__button_icon{display:none}.WR[role=navigation].bhZ:not(.bym) .inboxsdk__navItem .Yh{opacity:1}.WR[role=navigation].bhZ:not(.bym) .inboxsdk__navItem .Yh.inboxsdk__navItem_parent_accessory_button{background-image:none!important}.WR[role=navigation].bhZ:not(.bym) .inboxsdk__navItem .Yh:empty{background-color:rgb(32 33 36/71%);border-radius:50%;display:inherit;height:18px;margin-left:1px;width:18px}.WR[role=navigation].bhZ:not(.bym) .inboxsdk__navItem .Yh .inboxsdk__button_icon{display:inherit}.inboxsdk__custom_sections{margin-bottom:8px}.inboxsdk__custom_sections.Wc{padding:0;margin-bottom:0}.inboxsdk__resultsSection.inboxsdk__resultsSection_nonCollapsible .inboxsdk__resultsSection_title .Wp{visibility:hidden}.inboxsdk__custom_sections .Wg,.inboxsdk__custom_sections.Wc .inboxsdk__resultsSection{padding-top:0}.inboxsdk__custom_sections.Wc .Wg{border-bottom:0;padding:0}.inboxsdk__results_collapsedContainer.Wg{height:auto}.inboxsdk__results_collapsedContainer>div{display:flex;flex-wrap:wrap;flex:1 0 100%}.inboxsdk__results_collapsedContainer>div>.inboxsdk__resultsSection_collapsed:first-child:last-child{flex:1;margin-right:0}.inboxsdk__results_collapsedContainer>div>.inboxsdk__resultsSection_collapsed:first-child:last-child>.inboxsdk__resultsSection_header{display:flex;align-items:center;flex:1}.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed{display:inline-block;margin-right:20px;display:inline-flex}.Wc .inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed{margin-right:0}.inboxsdk__resultsSection_collapsed .inboxsdk__resultsSection_header{padding-right:0}.inboxsdk__resultsSection_title{white-space:nowrap;cursor:pointer;display:inline-block;display:flex;align-items:center;height:48px}.Wc .inboxsdk__resultsSection_title{padding:3px 0 3px 8px}.inboxsdk__resultsSection_header{min-height:48px;line-height:48px}.inboxsdk__resultsSection_header_summaryText.Wm:last-child .amH{padding-right:0;margin-right:0}.inboxsdk__custom_sections.Wc .inboxsdk__resultsSection_header_summaryText:last-child{margin-right:11px}.inboxsdk__custom_sections.Wc .J-JN-M-I{margin-right:13px}.inboxsdk__resultsSection .TB.TC{text-align:center;padding-left:0;padding-right:0}.inboxsdk__resultsSection .inboxsdk__resultsSection_loading{font-style:italic}.inboxsdk__resultsSection .inboxsdk__resultsSection_result_icon{height:15px;width:15px}.inboxsdk__resultsSection_label_iconHtml,.inboxsdk__resultsSection_result_iconHtml{display:flex;justify-content:center;align-items:center}.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA:hover>.xW{display:flex}.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA>.xW{max-width:none;flex-basis:auto}.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow .xT{align-items:center}.inboxsdk__resultsSection .xX{width:20ex}.inboxsdk__resultsSection tr .xW>span{overflow:hidden;display:block;text-overflow:ellipsis}.inboxsdk__resultsSection .V3{overflow:hidden;white-space:nowrap}.inboxsdk__resultsSection .at{position:relative}.inboxsdk__thread_row_label{flex-shrink:0;align-self:flex-end}.apv .inboxsdk__thread_row_label{align-self:flex-start}.inboxsdk__resultsSection_label_icon{height:11px;width:11px;position:absolute;top:2px;margin-left:4px;margin-top:1px}.inboxsdk__resultsSection .av,.inboxsdk__thread_row_label .av{overflow:hidden;text-overflow:ellipsis}.inboxsdk__resultsSection_label_icon+.av,.inboxsdk__thread_row_label .inboxsdk__button_icon+.av{margin-left:16px}.Wc .inboxsdk__resultsSection_footer{padding:3px 3px 3px 8px}.inboxsdk__tooltip .T-P{box-shadow:0 1px 3px rgb(0 0 0/20%);background-color:#fff;border:1px solid;border-color:#bbb #bbb #a8a8a8;padding:16px;z-index:1201!important}.inboxdk__tooltip_content.inboxsdk__tooltip .aRM,.inboxsdk__tooltip.inboxdk__tooltip_content .T-P,.inboxsdk__tooltip.inboxsdk__appButton_tooltip .T-P{padding:0}.inboxsdk__tooltip .aRM{outline:0;padding:13px 10px 16px;text-align:center;font:16px arial,sans-serif}.inboxsdk__tooltip .aRR{color:#333;font-size:18px;margin-top:13px}.inboxsdk__tooltip .aRQ{color:#777;font-size:13px;margin:3px 0 14px}.inboxsdk__tooltip{position:fixed;z-index:1300;transition:left 200ms ease,top 200ms ease}.inboxsdk__tooltip .T-P{position:relative;width:auto;max-width:500px}.inboxsdk__tooltip .inboxsdk__tooltip_arrow{position:fixed;z-index:1400;margin-top:-1px;transition:left 200ms ease,top 200ms ease}.inboxsdk__tooltip .inboxsdk__tooltip_close{user-select:none}.inboxsdk__tooltip .inboxsdk__button{margin-right:0}.inboxsdk__tooltip .inboxsdk__tooltip_image{max-height:300px;max-width:500px;overflow:hidden;height:auto}.inboxsdk__tooltip .inboxsdk__tooltip_image>img{max-height:300px;max-width:500px}.inboxsdk__attachmentCard img.aQG.aYB{max-width:178px;min-width:178px;min-height:118px}.inboxsdk__attachmentCard img.aZG.aYw{background:0 0}.aQw>.T-I.J-J5-Ji.L3{margin-top:5px}table.cf.wd.inboxsdk__shortcutHelp_table{margin-bottom:15px}.inboxsdk__shortcutHelp_table td.Dn{display:inline-block;width:50%}.inboxsdk__shortcutHelp_table tbody tbody tr{display:block;white-space:nowrap}.inboxsdk__shortcutHelp_table td.wg.Dn{display:inline-block;width:45%}.inboxsdk__shortcutHelp_table span.wb{margin-left:3px}.inboxsdk__shortcutHelp_table td.we.Dn{width:60%;white-space:normal}.inboxsdk__shortcutHelp_title img.inboxsdk__icon{height:21px;width:21px;vertical-align:middle;margin-right:10px;border-radius:4px}.asor.inboxsdk__custom_suggestion,.inboxsdk__custom_suggestion_iconHTML{display:flex;justify-content:center;align-items:center}.inboxsdk__custom_suggestion img{max-width:32px;max-height:32px}.inboxsdk__custom_suggestion_iconHTML{position:absolute;left:8px;height:32px;width:43px}.gstq_d .inboxsdk__custom_suggestion_iconHTML{margin-top:-8px}.inboxsdk__appButton{margin-right:8px}.inboxsdk__appButton+.inboxsdk__appButton{margin-left:16px}.inboxsdk__appButton.inboxsdk__appButton_noGPlus{margin-right:0}.inboxsdk__appButton .inboxsdk__button_icon{margin-right:5px;position:relative}.inboxsdk__appButton a{color:#404040;text-decoration:none;line-height:24px}.inboxsdk__appButton.inboxsdk__appButton_noGPlus a{line-height:30px}.inboxsdk__appButton a:hover{text-decoration:underline;color:#000}.inboxsdk__gmail_dark_theme .inboxsdk__appButton a{color:#eee}.inboxsdk__gmail_dark_theme .inboxsdk__appButton a:hover{color:#fff}.inboxsdk__appButton_tooltip{outline:0;transition:none;animation:gb__a .2s}.inboxsdk__appButton_tooltip .inboxsdk__tooltip_close,.inboxsdk__searchIsNarrow .streak__appToolbarButton_title{display:none}.inboxsdk__tooltip.inboxsdk__appButton_tooltip .aRM{padding:0;white-space:initial;text-align:center;font:16px arial,sans-serif}.inboxsdk__tooltip.inboxsdk__appButton_tooltip .inboxsdk__tooltip_arrow{transform-origin:top;transform:rotateZ(180deg);margin-top:9px}.inboxsdk__custom_message_view{display:flex;padding-top:20px;padding-bottom:20px;border-top:1px solid #efefef;border-collapse:collapse}.inboxsdk__custom_message_view_hidden{display:none}.h7.ie+.inboxsdk__custom_message_view{margin-top:5px}.kQ+.inboxsdk__custom_message_view,.kx+.inboxsdk__custom_message_view{margin-top:1px}.inboxsdk__custom_message_view.inboxsdk__custom_message_view_collapsed{cursor:pointer}.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon{padding-left:16px;padding-right:16px;flex-shrink:0}.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon img{height:32px;width:32px;border-radius:50%}.inboxsdk__custom_message_view .inboxsdk__custom_message_view_content{width:100%;min-width:0}.inboxsdk__custom_message_view .inboxsdk__custom_message_view_header{cursor:pointer}.inboxsdk__custom_message_view_app_notice_content{position:relative;z-index:1;align-items:center;display:flex;font-size:.75rem!important;justify-content:flex-start;margin-left:0;padding:0;top:0}.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container{position:relative;width:auto!important;min-width:32px}.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container:hover::before{content:none!important}.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container>span:first-child{display:none}.inboxsdk__custom_message_view_app_notice_container::before{position:absolute}.inboxsdk__custom_message_view_app_notice_content>*{color:#555}table[role=presentation].inboxsdk__thread_view_with_custom_view{table-layout:fixed}.inboxsdk__butterbar.inboxsdk__butterbar_error{background-color:#c53929!important}.inboxsdk__butterbar.inboxsdk__butterbar_error [role=button]{color:#fff}.inboxsdk__butterbar.inboxsdk__butterbar_error [role=button]::before{background:rgb(255 255 255/8%)}.inboxsdk__support_menuItem:hover{background-color:#eee;outline:1px dashed transparent}.inboxsdk__compose_addressList{display:flex!important}.inboxsdk__linkPopOver_section_container{position:absolute;width:100%;left:0;margin-top:8px;box-sizing:border-box}.VRezbc.phnWcc .inboxsdk__linkPopOver_section_container{padding:0 5px}.inboxsdk__linkPopOver_section{width:100%;background:#fff;border:1px solid;border-color:#bbb #bbb #a8a8a8;font:13px arial,sans-serif;padding:5px 8px;margin-bottom:5px;box-sizing:border-box;box-shadow:0 1px 3px rgb(0 0 0/20%)}.T-I.J-J5-Ji.T-I-ax7.inboxsdk__button .asa::after{width:auto}.inboxsdk__hide_filter_toolbar .G6[role=toolbar],.inboxsdk__hide_filter_toolbar .biW[data-srm=email]{display:none}.inboxsdk__hide_filter_toolbar .G-atb.PY{min-height:32px!important;height:32px!important}', "", { "version": 3, "sources": ["webpack://./src/platform-implementation-js/style/gmail.css", "<no source>"], "names": [], "mappings": "AAAA,wBACE,yBACF,CAEA,wBACE,WAAY,CACZ,UAAW,CACX,UAAY,CACZ,iBAAkB,CAClB,cAAgB,CAChB,QAAY,CACZ,SAAU,CACV,sBAAuB,CACvB,SAAa,CACb,cACF,CAEA,4DAEE,SACF,CAEA,sCACE,+BACF,CAEA,gCACE,iBAAkB,CAClB,iBAAkB,CAClB,yBAA0B,CAC1B,WAAY,CACZ,WACF,CAEA,+BACE,WAAY,CACZ,4FAA6F,CAC7F,iBAAkB,CAClB,WAAY,CACZ,UAAW,CACX,KAAM,CACN,MACF,CAEA,+BACE,+BACE,4FAA6F,CAC7F,uBACF,CACF,CAEA,gCACE,YACF,CAIA,iCACE,kBAAmB,CACnB,iBAAkB,CAClB,cAAe,CACf,YAAa,CACb,WAAY,CACZ,QAAS,CACT,MAAO,CACP,UAAW,CACX,mBACF,CAEA,uBACE,iBAAkB,CAClB,mBAAoB,CACpB,KAAM,CACN,QAAS,CACT,OAAQ,CACR,WAAY,CACZ,oDAIY,CACZ,YAAa,CACb,qBAAsB,CACtB,qBAAsB,CACtB,SAAa,CACb,2DAE6B,CAC7B,0BAA2B,CAC3B,kDACF,CAEA,mEACE,WACF,CAEA,wCACE,cACF,CAEA,4BACE,wBAAyB,CACzB,+BAAgC,CAChC,iBAAkB,CAClB,kBAAmB,CACnB,YAAa,CACb,aACF,CAEA,oDACE,iBAAkB,CAClB,aACF,CAEA,wBACE,eAAgB,CAChB,sBAAuB,CACvB,kBAAmB,CACnB,yDAKF,CAIA,0BACE,kBAAmB,CACnB,cAAe,CACf,YAAa,CACb,WAAY,CACZ,QAAS,CACT,MAAO,CACP,UAAW,CACX,4BAA6B,CAC7B,wDACF,CAEA,2CACE,kCAAqC,CACrC,uDACF,CAEA,oDACE,UACF,CAIA,gCACE,YAAa,CACb,qBACF,CAEA,wDACE,iBAAkB,CAClB,WAAY,CACZ,UACF,CAEA,gCACE,WACF,CAEA,gCACE,eAAgB,CAChB,0BAEY,CACZ,eAAgB,CAChB,qBACF,CAEA,gCACE,kBAAmB,CACnB,YAAa,CACb,gBAAiB,CACjB,cACF,CAEA,qGAEE,4BACF,CAEA,oMAIE,wBACF,CAEA,gCACE,WAAY,CACZ,eAAgB,CAChB,sBACF,CAEA,+FAEE,WACF,CAEA,gCACE,gBAAiB,CACjB,qBAAsB,CACtB,6DAIY,CACZ,oBACF,CAEA,+FAEE,YACF,CAEA,qIAGE,iBAAkB,CAClB,KAAQ,CACR,MAAS,CACT,UAAW,CACX,WAAY,CACZ,qEAEF,CAEA,gCACE,UAAW,CACX,WAAY,CACZ,qBAAsB,CAEtB,mBAAoB,CACpB,sBAAuB,CACvB,kBAAmB,CACnB,eACF,CAEA,oEAEE,UAAW,CACX,WACF,CAEA,gCACE,MAAO,CACP,gBAAiB,CACjB,iBACF,CAEA,+FAEE,kBAAmB,CACnB,cACF,CAEA,gCACE,eAAgB,CAChB,gBAAiB,CACjB,uEACyB,CACzB,QAAY,CACZ,UAAW,CACX,WAAY,CACZ,wBAAyB,CACzB,gDAEiB,CACjB,SAAa,CACb,UAAY,CACZ,cACF,CAEA,qMAKE,UACF,CAEA,+FAEE,mBACF,CAEA,gCACE,kBACF,CAEA,gEACE,iBACF,CAEA,0HAEE,SACF,CAMA,yBACE,QAAS,CACT,WAAY,CACZ,aAAc,CACd,kBAAmB,CACnB,cACF,CAEA,yDACE,oBAAqB,CACrB,qBACF,CAEA,kCACE,eAAiB,CACjB,cACF,CAEA,2BACE,UAAY,CAEZ,kBAAmB,CACnB,iBAAkB,CAClB,oBAAqB,CACrB,iCAAoC,CACpC,WAAY,CACZ,cAAe,CAEf,eACF,CAEA,mCACE,oBACF,CAEA,6DACE,YACF,CAEA,gCACE,kBAAmB,CACnB,kBAAmB,CACnB,yBACF,CAIA,wCACE,4BACF,CAEA,uCACE,4BAA6B,CAC7B,yBACF,CAIA,yBACE,gBAAiB,CACjB,cACF,CAGA,0BACE,mBACF,CAEA,iBACE,cACF,CAEA,4CACE,WACF,CAEA,8CACE,eACF,CAEA,uBACE,oBACF,CAEA,0BACE,WAAY,CACZ,UAAW,CACX,qBAAsB,CACtB,eAAgB,CAEhB,cAAe,CACf,gBAAiB,CACjB,sBACF,CCjZA,+DDmaE,qEAAwE,CAExE,6DAAgE,CAChE,4BAA6B,CAE7B,eAAiB,ECxanB,ADmZA,iCACE,gCAAmC,CACnC,wBAAyB,CAMzB,UAEF,CAEA,8BACE,+BAAkC,CAClC,wBAAyB,CAMzB,+BAEF,CAEA,+BACE,+BAAiC,CACjC,kBAAmB,CACnB,4BAA6B,CAC7B,4BAA6B,CAC7B,UAAW,CACX,gBACF,CAGA,8BACE,OAAQ,CACR,QACF,CAEA,4BACE,wBACF,CAEA,4CACE,UAAW,CACX,WACF,CAEA,gBACE,aAAc,CACd,cAAe,CACf,SAAY,CACZ,gBAAiB,CACjB,eAAgB,CAGhB,SAAU,CACV,cAAe,CACf,cAAe,CACf,QAAS,CACT,SACF,CAEA,uCACE,SAAU,CACV,oGAGiC,CACjC,wBAA0B,CAC1B,+BAAkC,CAClC,eAAgB,CAChB,SACF,CAEA,uCACE,WAAY,CACZ,cAAe,CACf,UACF,CAOA,yBAEE,WAAY,CACZ,UAAW,CACX,WAOF,CAXA,uDAKE,mBAAoB,CACpB,kBAAmB,CACnB,sBAAuB,CACvB,qBAAsB,CACtB,SAAa,CACb,gBAAkB,CACpB,CAEA,kDACE,eACF,CAEA,gDACE,WACF,CAEA,2LAGE,SACF,CAEA,iCACE,UAAW,CACX,aAAc,CACd,SAAU,CACV,iBAAkB,CAClB,wBAA0B,CAC1B,kDAAwD,CACxD,aAAsB,CACtB,cAAgB,CAChB,qBAAsB,CACtB,kBAAmB,CACnB,qCAAuC,CACvC,iBACF,CAEA,uCACE,mCAAsC,CACtC,QAAY,CACZ,eAAgB,CAChB,SAAU,CACV,kBACF,CAEA,uGAEE,oCAAuC,CACvC,QAAY,CACZ,eAAgB,CAChB,SAAU,CACV,kBACF,CAEA,gHAGE,cACF,CAEA,8BACE,wBAAyB,CACzB,UAAY,CACZ,WAAY,CACZ,UAAW,CAGX,iBAAkB,CAKlB,eAAgB,CAChB,cAAgB,CALlB,CAQA,6DAME,UAAY,CAJd,CAOA,iGAEE,wBAAyB,CACzB,4EAEqC,CACrC,QACF,CAEA,mCACE,gBACF,CAEA,iCACE,kBAAmB,CAKnB,eAAiB,CAJnB,CAOA,wDACE,WAAY,CACZ,UAAW,CACX,mBAAoB,CACpB,gBACF,CAEA,2DACE,WAAY,CACZ,UAAW,CACX,mBAAoB,CACpB,WACF,CAEA,uEACE,gBACF,CAGA,0DACE,kBACF,CAEA,wCACE,iBAAkB,CAClB,WAAY,CAEZ,UAAW,CAEX,iBAAkB,CAClB,+FAGiC,CAMjC,kBAAkB,CAClB,eAAgB,CAChB,eAAiB,CACjB,QAAU,CAPZ,CAUA,uEACE,SACF,CAEA,6EACE,aAAgB,CAChB,cACF,CAEA,+DACE,cACF,CAEA,iEACE,WACF,CAOA,qDACE,WACF,CAEA,6DACE,SAAU,CAKV,aAAiB,CAJnB,CAOA,kGACE,YACF,CAIA,uCACE,oBAAqB,CACrB,iBAAkB,CAClB,SAAU,CAEV,YAAa,CACb,SAAU,CAEV,qBAAsB,CAKtB,WAAY,CACZ,eAAiB,CALnB,CAQA,0IAGE,sCACF,CAEA,2FAEE,YACF,CAEA,kDACE,kBACF,CAEA,+CACE,UACF,CAEA,sCACE,sBACF,CAEA,sCACE,uBACF,CAEA,+CACE,iBAAkB,CAClB,gBACF,CAEA,6CACE,4BACF,CAEA,yDACE,eACF,CAMA,+BACE,4BAA6B,CAC7B,wDAAynF,CACznF,qBAAsB,CACtB,2BAA4B,CAC5B,iCAAkC,CAClC,WAAY,CACZ,UAAW,CACX,QAAY,CACZ,qBAAsB,CACtB,cAAe,CAEf,WAAY,CACZ,UACF,CAIA,oDACE,oBAAqB,CACrB,gBACF,CAEA,yGAEE,WAAY,CACZ,UACF,CAEA,mDACE,oBAAqB,CACrB,cAAe,CACf,eAAgB,CAChB,iBACF,CAEA,6BACE,SAAU,CACV,WAAY,CACZ,UAAW,CACX,SACF,CAEA,oDACE,eACF,CAEA,kGACE,iBACF,CAEA,uDACE,WAAY,CACZ,UAAW,CACX,YACF,CAEA,wBACE,WAAY,CACZ,iBAAkB,CAClB,qBAAsB,CACtB,eAAgB,CAChB,cAAe,CAGf,6DAAgE,CAEhE,qDAAwD,CACxD,+BAAkC,CAClC,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,gBAAiB,CACjB,cAAe,CACf,iBAAkB,CAClB,cAAe,CACf,eAAiB,CACjB,iBAAkB,CAClB,kBAAmB,CACnB,oBACF,CAEA,8BACE,wBAAyB,CACzB,SACF,CAEA,+BACE,yCACF,CAEA,8BACE,kCAAqC,CACrC,wBAAyB,CAEzB,6DAAgE,CAEhE,qDAAwD,CACxD,oBACF,CAEA,+BACE,UAAW,CACX,iBAAkB,CAClB,SAAU,CACV,OAAQ,CACR,eAAgB,CAChB,yHACuG,CACvG,SAAU,CACV,UAAW,CACX,WACF,CAEA,kCACE,eACF,CAEA,kFAEE,YACF,CAMA,6CAEE,eAAgB,CAEhB,WACF,CALA,sCAEE,eAAgB,CAChB,UAAW,CACX,UAAY,CACd,CAEA,6CACE,YAAa,CACb,sBAAuB,CACvB,kBAAmB,CACnB,iBACF,CAMA,cACE,aACF,CAEA,+CACE,aAAc,CACd,WACF,CAEA,mDACE,WACF,CAEA,yDACE,SACF,CAEA,uDAGE,OAAU,CACV,QACF,CAEA,sCACE,qBACF,CAOA,sDACE,WACF,CAEA,mCACE,OACF,CAEA,0CACE,OAAQ,CACR,eAAgB,CAChB,cACF,CAIA,uHAEE,WAAY,CACZ,UACF,CAGA,mCACE,UAAW,CACX,gBAAiB,CACjB,iBAAkB,CAClB,WAAY,CACZ,aACF,CAGA,6DACE,kBACF,CAEA,kFAIE,eACF,CAEA,qHAGE,iBACF,CAGA,iJAME,gBAAiB,CACjB,eAAgB,CAChB,YACF,CAEA,iKASE,gBACF,CAEA,6EAEE,UAAW,CACX,WAAY,CACZ,iBACF,CAEA,0CACE,eAAgB,CAChB,mBAAoB,CACpB,sBAAuB,CACvB,kBAAmB,CACnB,kBACF,CAEA,6CACE,iBAAkB,CAClB,QAAS,CACT,UACF,CAIA,SACE,cACF,CAEA,4BACE,mBAAoB,CACpB,kBAAmB,CACnB,sBAAuB,CACvB,WACF,CAEA,+BACE,WAAY,CACZ,UAAW,CAKX,aAAe,CAJjB,CAOA,oCACE,oBAAqB,CACrB,qBAAsB,CACtB,eACF,CAGA,yCACE,QACF,CAEA,SAKE,mBACF,CAEA,wCACE,iBAAkB,CAClB,WAAY,CACZ,KAAQ,CACR,eAAiB,CACjB,WAAY,CACZ,QAAW,CACX,4BAA6B,CAC7B,6BAAgC,CAChC,aACF,CAEA,2EACE,aAAc,CACd,eAAgB,CAChB,WACF,CAEA,uCACE,mBAAqB,CACrB,eACF,CAEA,uCACE,kBAAmB,CACnB,aAAc,CACd,sBAA4B,CAC5B,UAAY,CACZ,+BACF,CAEA,qCACE,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,QAAS,CACT,SAAU,CACV,aACF,CAEA,uCACE,iBAAkB,CAClB,QAAW,CACX,UAAW,CACX,qCAAsC,CACtC,aACF,CAEA,qFAEE,mBACF,CAEA,gCACE,QAAS,CACT,WAAY,CACZ,QACF,CAEA,6BACE,cAAgB,CAChB,iBACF,CAGA,qCACE,mBACF,CAEA,mCACE,eACF,CAKA,qFAGE,qBACF,CAEA,wCACE,aACF,CAIA,uBACE,4BACF,CAKA,gFAGE,yBACF,CAEA,yEACE,gEACF,CAGA,8EACE,qEACF,CAKA,+EAGE,qBACF,CAEA,yBACE,YACF,CAEA,0BACE,wBAAyB,CACzB,iBAAkB,CAClB,WAAY,CACZ,iBACF,CAEA,+BACE,WAAY,CACZ,mBACF,CAEA,gCACE,aACF,CAEA,iDACE,uBACF,CAEA,uZAIE,sBACF,CAoBA,qDACE,aACF,CAEA,2CACE,iBAAkB,CAClB,kBACF,CAEA,gDACE,kBAAmB,CACnB,QAAY,CACZ,mBAAoB,CACpB,sBAAuB,CACvB,iBAAkB,CAClB,SAAU,CACV,kCAAmC,CACnC,uEAA6E,CAC7E,cAAe,CACf,oBAAsB,CACtB,cAAgB,CAChB,qBAAsB,CACtB,aAAc,CACd,cAAe,CACf,eAAgB,CAChB,SAAa,CACb,aACF,CAEA,4DAEE,WAAY,CACZ,UAAW,CACX,eACF,CAMA,yBACE,OAAU,CACV,QACF,CAEA,4BACE,cAAe,CACf,aAAsB,CACtB,WAAY,CACZ,YAAa,CACb,sBAAuB,CACvB,kBAAmB,CACnB,uBACF,CAEA,yBACE,eAAgB,CAChB,kBACF,CAEA,wFAEE,eACF,CAEA,yHAIE,eAAkB,CAClB,mBACF,CAEA,uBACE,SAAa,CACb,cACF,CAEA,uDACE,iBAAkB,CAClB,gBAAiB,CACjB,UAAW,CACX,eACF,CAEA,+EACE,iBACF,CAEA,2EACE,YACF,CAEA,+EACE,aACF,CAEA,6EACE,YACF,CAEA,8DACE,QAAW,CACX,YACF,CAEA,gKAGE,cAAiB,CACjB,eACF,CAEA,gFAEE,eACF,CAEA,kFAEE,gBACF,CAEA,sEACE,YACF,CAEA,kEACE,MAAO,CACP,OAAQ,CACR,oBACF,CAQA,4DAEE,mBAAqB,CAMrB,cAAgB,CALlB,CAUA,oCACE,kBACF,CAEA,sCACE,mBACF,CAEA,wCACE,oBAAqB,CACrB,UACF,CAEA,qBACE,iBAAkB,CAClB,eAAgB,CAChB,YAAa,CACb,kBAAmB,CACnB,mBAAoB,CACpB,oBACF,CAEA,2BACE,kBAAmB,CACnB,qBAAsB,CACtB,gBAAiB,CACjB,kCAAsC,CACtC,eAAgB,CAMhB,cAAgB,CAJlB,CAOA,qHAEE,yBACF,CAEA,8BACE,iBAAkB,CAClB,MAAO,CACP,SAAU,CACV,cAAe,CACf,eAAgB,CAChB,qBAAsB,CACtB,WAAY,CACZ,cAAe,CACf,2BAA4B,CAC5B,aAAc,CACd,kBACF,CAEA,sDACE,UAAY,CACZ,gBAAiB,CACjB,eAAgB,CAChB,kBAAmB,CACnB,oBAAqB,CACrB,yBACF,CAEA,iCACE,iBAAkB,CAClB,mBAAoB,CACpB,cAAiB,CACjB,kBAAmB,CACnB,eAAgB,CAChB,sBACF,CAEA,8BACE,kBAAmB,CACnB,WAAY,CACZ,iBAAkB,CAClB,cACF,CAEA,sDACE,eACF,CAEA,kCACE,WAAY,CACZ,UAAW,CACX,iBAAkB,CAClB,OACF,CAEA,gEACE,WAAY,CACZ,UAAW,CACX,eACF,CAEA,sEACE,mCACF,CAEA,gEACE,wBACF,CAEA,wCACE,SACF,CAEA,+aAQE,YACF,CAEA,2DACE,eAAgB,CAChB,QACF,CAEA,6BACE,eAAgB,CAChB,wBAAyB,CACzB,eAAiB,CACjB,eAAgB,CAChB,eAAgB,CAChB,eACF,CAEA,2DACE,WACF,CAEA,6DACE,YAAe,CACf,WACF,CAMA,eACE,UACF,CAEA,qEACE,YACF,CAEA,sCACE,UACF,CAEA,uEACE,WACF,CAEA,oBACE,UAAW,CACX,WAAY,CACZ,yBAA0B,CAC1B,yBAA0B,CAC1B,oBAAqB,CACrB,2BACF,CAEA,wBACE,WAAY,CACZ,UAAW,CACX,eAAgB,CAChB,cACF,CAEA,oBACE,OACF,CAEA,2CACE,yBACF,CAGA,iEAEE,YACF,CAEA,mFAIE,qBACF,CAMA,oDACE,0BAEY,CACZ,eACF,CAEA,kDACE,eAAgB,CAChB,kBAAmB,CACnB,+BACF,CAMA,qCACE,yCACF,CAEA,wDACE,yBAA2B,CAC3B,qBACF,CAEA,gCAGE,oBACF,CAGA,gCACE,eACF,CAGA,gCACE,kBACF,CAEA,+FACE,aACF,CAIA,oEAEE,YAAa,CACb,kBAAmB,CACnB,UACF,CAEA,uHAEE,0BACF,CAMA,+EAEE,4BACF,CAGA,4NAEE,6BACF,CASA,8EAEE,wBACF,CAGA,sBACE,4BACF,CAEA,8EAEE,oBAAsB,CACtB,MAAO,CACP,WACF,CAGA,wCACE,UAAW,CACX,iBACF,CAEA,8DACE,wBAA0B,CAC1B,aACF,CAEA,kFACE,yBACF,CAEA,uEACE,uBACF,CAEA,8FAGE,YACF,CAEA,kHAGE,aAAc,CACd,UAAW,CACX,WAAY,CACZ,6BAA8B,CAC9B,iBAAkB,CAClB,uBAAwB,CACxB,aACF,CAEA,8FAGE,uBAAwB,CACxB,kBACF,CAEA,2FAGE,UAAW,CACX,kBACF,CAEA,uDACE,qBAA2B,CAC3B,QAAY,CACZ,cAAuB,CACvB,WAAY,CACZ,UAAW,CACX,eAAgB,CAChB,SAAU,CACV,cAAe,CACf,iBACF,CAEA,+EACE,kBACF,CAEA,4DACE,gBACF,CAEA,qKAIE,UAAW,CACX,kBAAmB,CACnB,iBAAkB,CAClB,6BAA8B,CAC9B,iBAAkB,CAClB,SACF,CAEA,gGAGE,kBACF,CAEA,0DACE,UAAW,CACX,WAAY,CACZ,YACF,CAEA,iFACE,iBAAkB,CAClB,MAAS,CACT,KAAQ,CACR,SACF,CAEA,qGAGE,WAAY,CACZ,SAAU,CACV,iBAAkB,CAClB,MAAS,CACT,QAAW,CACX,gCAAiC,CACjC,yBACF,CAGA,8IAIE,UAAW,CACX,OAAQ,CACR,yBACF,CAEA,6HAGE,UACF,CAKA,uCACE,uBACF,CAEA,yDACE,uBACF,CAGA,kDACE,uBACF,CAEA,0DACE,YACF,CAEA,2LAEE,YACF,CAEA,4CACE,kCACF,CAEA,sEACE,sBACF,CAEA,8EACE,WAAY,CACZ,aACF,CAEA,8GAGE,UACF,CAEA,mFACE,YACF,CAGA,gCACE,aACF,CAEA,gEACE,cACF,CAWA,yFAEE,uBACF,CAGA,qDACE,sBACF,CAMA,+BACE,aACF,CAMA,2DACE,6BACF,CAEA,4IACE,eACF,CAMA,+DACE,cACF,CAEA,gCACE,sBAAwB,CACxB,kBAAmB,CACnB,oBACF,CAEA,uDACE,0BACF,CAEA,wCACE,oBAAsB,CACtB,MAAO,CACP,WACF,CAEA,qFACE,YACF,CAEA,mBACE,cACF,CAMA,uCACE,qBACF,CAEA,0BACE,aAAc,CACd,cACF,CAGA,2DACE,iBACF,CAGA,uDACE,iBACF,CAIA,qCACE,cACF,CAEA,uCACE,YACF,CAEA,wCACE,iCAAkC,CAClC,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,eAAgB,CAChB,UACF,CAEA,6DACE,oBACF,CAEA,iCACE,YAAa,CACb,kBACF,CAEA,4BACE,cACF,CAEA,qEACE,aAAc,CACd,kBACF,CAcA,gFACE,YACF,CAEA,6DACE,wBACF,CAEA,2DAEE,kBACF,CAEA,yFAEE,wCACF,CAEA,2DACE,+CACF,CAEA,0CACE,gDACF,CAEA,mDACE,oBACF,CAMA,uPACE,aACF,CAEA,wBACE,cAAe,CACf,gBACF,CAEA,0BACE,gBACF,CAEA,yCACE,cACF,CAEA,kCACE,SAAU,CACV,aACF,CAEA,oDACE,iBAAkB,CAClB,KAAQ,CACR,WACF,CAEA,0BACE,iBAAkB,CAClB,MAAS,CACT,kBACF,CAEA,mBACE,SACF,CAEA,mCAEE,UACF,CAEA,+CAEE,yBACF,CAEA,sCACE,kBACF,CAIA,kGAGE,YACF,CAEA,4FAGE,cACF,CAEA,mEAIE,YACF,CAMA,0DAGE,SACF,CAEA,oGAGE,+BACF,CAEA,gEAGE,kCAAqC,CACrC,iBAAkB,CAClB,eAAgB,CAChB,WAAY,CACZ,eAAgB,CAChB,UACF,CAEA,iFAIE,eACF,CAQA,2BAWE,gBAAkB,CATpB,CAEA,8BACE,SAAY,CACZ,eACF,CAOA,sGAGE,iBACF,CAEA,uFACE,aACF,CAMA,kCACE,eAAgB,CAChB,SACF,CAIA,yCACE,WACF,CAEA,0CACE,YAAa,CACb,cAAe,CACf,aACF,CAKA,qGAGE,MAAO,CACP,cACF,CAEA,sIAIE,YAAa,CACb,kBAAmB,CACnB,MACF,CAIA,6DACE,oBAAqB,CACrB,iBAAkB,CAKlB,kBAAoB,CAJtB,CAOA,iEACE,cACF,CAGA,qEACE,eACF,CAEA,gCACE,kBAAmB,CACnB,cAAe,CACf,oBAAqB,CAKrB,YAAa,CACb,kBAAmB,CACnB,UAAY,CANd,CASA,oCACE,qBACF,CAEA,iCACE,eAAgB,CAChB,gBACF,CAEA,gEACE,eAAkB,CAClB,cACF,CAEA,sFAEE,iBACF,CAEA,wCACE,iBACF,CAEA,iCACE,iBAAkB,CAKlB,cAAe,CACf,eACF,CAEA,4DACE,iBACF,CAEA,gEACE,WAAY,CACZ,UACF,CAEA,mFAEE,YAAa,CACb,sBAAuB,CACvB,kBACF,CAEA,0EAEE,YACF,CAEA,oEACE,cAAe,CACf,eACF,CAEA,iEACE,kBACF,CAEA,8BACE,UACF,CAEA,sCACE,eAAgB,CAChB,aAAc,CACd,sBACF,CAEA,8BACE,eAAgB,CAChB,kBACF,CAEA,8BACE,iBACF,CAEA,4BACE,aAAc,CAMd,kBAAoB,CAJtB,CAQA,iCACE,qBACF,CAEA,qCACE,WAAY,CACZ,UAAW,CACX,iBAAkB,CAClB,OAAQ,CACR,eAAgB,CAKhB,aAAe,CAJjB,CAOA,8DAGE,eAAgB,CAChB,sBACF,CAEA,gGAEE,gBACF,CAEA,qCACE,uBACF,CAQA,wBACE,mCAAsC,CACtC,qBAAsB,CACtB,gBAAiB,CACjB,8BAA+B,CAC/B,YAAa,CAEb,sBACF,CAEA,sJACE,SACF,CAEA,wBACE,SAAa,CACb,sBAAuB,CACvB,iBAAkB,CAClB,0BAGF,CAMA,wBACE,UAAW,CACX,cAAe,CACf,eACF,CAEA,wBACE,UAAW,CACX,cAAe,CACf,iBACF,CAIA,mBACE,cAAe,CACf,YAAa,CACb,yCAGF,CAGA,wBACE,iBAAkB,CAClB,UAAW,CACX,eACF,CAEA,4CACE,cAAe,CACf,YAAa,CACb,eAAgB,CAChB,yCAGF,CAEA,4CACE,gBACF,CAEA,qCACE,cACF,CAEA,4CACE,gBAAiB,CACjB,eAAgB,CAChB,eAAgB,CAChB,WACF,CAEA,gDACE,gBAAiB,CACjB,eACF,CAMA,sCACE,eAAgB,CAChB,eAAgB,CAChB,gBACF,CAEA,sCACE,cACF,CAIA,qBACE,cACF,CAMA,yCACE,kBACF,CAEA,oCACE,oBAAqB,CACrB,SACF,CAUA,6CACE,aAAc,CACd,kBACF,CAEA,uCACE,oBAAqB,CACrB,SACF,CAEA,sCACE,eACF,CAEA,uCACE,SAAU,CACV,kBACF,CAEA,iDACE,WAAY,CACZ,UAAW,CACX,qBAAsB,CACtB,iBAAkB,CAClB,iBACF,CAMA,wEACE,YAAa,CACb,sBAAuB,CACvB,kBACF,CAEA,iCACE,cAAe,CACf,eACF,CAEA,sCAIE,iBAAkB,CAClB,QAAS,CACT,WAAY,CACZ,UACF,CAGA,8CACE,eACF,CAMA,qBACE,gBACF,CAEA,0CACE,gBACF,CAEA,iDACE,cACF,CAEA,4CACE,gBAAiB,CACjB,iBACF,CAEA,uBACE,aAAc,CACd,oBAAqB,CACrB,gBACF,CAEA,mDACE,gBACF,CAEA,6BACE,yBAA0B,CAC1B,UACF,CAEA,mDACE,UACF,CAEA,yDACE,UACF,CAEA,6BACE,SAAa,CACb,eAAgB,CAChB,mBACF,CAEA,gHACE,YACF,CAMA,oDACE,SAAY,CACZ,mBAAoB,CACpB,iBAAkB,CAClB,0BAGF,CAEA,wEACE,oBAAqB,CACrB,yBAA0B,CAC1B,cACF,CAcA,+BACE,YAAa,CACb,gBAAiB,CACjB,mBAAoB,CACpB,4BAA6B,CAC7B,wBACF,CAEA,sCACE,YACF,CAGA,sCACE,cACF,CAGA,sEAEE,cACF,CAEA,uEACE,cACF,CAEA,mEACE,iBAAkB,CAClB,kBAAmB,CACnB,aACF,CAEA,uEACE,WAAY,CACZ,UAAW,CACX,iBACF,CAEA,sEACE,UAAW,CACX,WACF,CAEA,qEACE,cACF,CAEA,kDACE,iBAAkB,CAGlB,SAAU,CAWV,kBAAmB,CACnB,YAAa,CACb,0BAA6B,CAC7B,0BAA2B,CAC3B,aAAc,CACd,SAAY,CACZ,IAAM,CAhBR,CAEA,2GACE,iBAAkB,CAClB,oBAAsB,CACtB,cACF,CAaA,yHACE,sBACF,CAEA,4HAEE,YACF,CAEA,4DACE,iBACF,CAEA,oDACE,UACF,CAEA,gEACE,kBACF,CAUA,+CACE,kCACF,CAEA,6DACE,UACF,CAEA,qEACE,8BACF,CAKA,kCACE,qBAAsB,CACtB,8BACF,CAEA,+BACE,sBACF,CAKA,yCACE,iBAAkB,CAClB,UAAW,CACX,MAAO,CACP,cAAe,CACf,qBACF,CAGA,wDACE,aACF,CAEA,+BACE,UAAW,CACX,eAAgB,CAChB,gBAAiB,CACjB,8BAA+B,CAC/B,0BAEY,CACZ,eAAgB,CAChB,iBAAkB,CAClB,qBAAsB,CACtB,mCACF,CASA,kDACE,UACF,CAGA,qGAEE,YACF,CAEA,yCACE,yBAA2B,CAC3B,qBACF", "sourcesContent": [`.inboxsdk__notransition {
  transition: none !important;
}

.inboxsdk__close_button {
  height: 24px;
  width: 24px;
  opacity: 0.7;
  position: relative;
  background: none;
  border: none;
  padding: 0;
  box-sizing: content-box;
  outline: none;
  cursor: pointer;
}

.inboxsdk__close_button:focus,
.inboxsdk__close_button:hover {
  opacity: 1;
}

.inboxsdk__close_button:focus::before {
  background-color: rgb(0 0 0 / 12%);
}

.inboxsdk__close_button::before {
  border-radius: 50%;
  position: absolute;
  inset: -4px -4px -4px -4px;
  padding: 4px;
  content: ' ';
}

.inboxsdk__close_button::after {
  content: ' ';
  background: url(https://www.gstatic.com/images/icons/material/system/1x/close_black_24dp.png);
  position: absolute;
  height: 24px;
  width: 24px;
  top: 0;
  left: 0;
}

@media (min-resolution: 192dpi) {
  .inboxsdk__close_button::after {
    background: url(https://www.gstatic.com/images/icons/material/system/2x/close_black_24dp.png);
    background-size: contain;
  }
}

:local(.app_sidebar_waiting_platform) {
  display: none;
}

/* drawer */

.inboxsdk__drawer_view_container {
  visibility: visible;
  direction: initial;
  position: fixed;
  height: 100vh;
  width: 100vw;
  bottom: 0;
  left: 0;
  z-index: 51;
  pointer-events: none;
}

.inboxsdk__drawer_view {
  position: absolute;
  pointer-events: auto;
  top: 0;
  bottom: 0;
  right: 0;
  width: 452px;
  font:
    normal normal normal normal 13px / normal 'Helvetica Neue',
    Helvetica,
    Arial,
    sans-serif;
  display: flex;
  flex-direction: column;
  background-color: #fff;
  outline: none;
  box-shadow:
    0 0 8px rgb(0 0 0 / 18%),
    0 8px 16px rgb(0 0 0 / 36%);
  transform: translateX(100%);
  transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

.inboxsdk__drawer_view.inboxsdk__match_sidebar_content_panel_width {
  width: 300px;
}

.inboxsdk__drawer_view.inboxsdk__active {
  transform: none;
}

.inboxsdk__drawer_title_bar {
  background-color: #f5f5f5;
  border-bottom: 1px solid #e0e0e0;
  padding: 16px 20px;
  white-space: nowrap;
  display: flex;
  flex: 0 0 auto;
}

.inboxsdk__drawer_title_bar .inboxsdk__close_button {
  margin-right: 20px;
  flex-shrink: 0;
}

.inboxsdk__drawer_title {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font:
    normal normal normal normal 20px / 24px 'Helvetica Neue',
    Helvetica,
    Arial,
    sans-serif;
}

/* backdrop */

.inboxsdk__inbox_backdrop {
  visibility: visible;
  position: fixed;
  height: 100vh;
  width: 100vw;
  bottom: 0;
  left: 0;
  z-index: 50;
  background-color: transparent;
  transition: background-color 150ms cubic-bezier(0.4, 0, 1, 1);
}

.inboxsdk__inbox_backdrop.inboxsdk__active {
  background-color: rgb(10 10 10 / 60%);
  transition: background-color 70ms cubic-bezier(0, 0, 0.2, 1);
}

.inboxsdk__inbox_backdrop ~ .inboxsdk__inbox_backdrop {
  opacity: 0.6;
}

/* sidebar */

:local(.app_sidebar_main) {
  display: flex;
  flex-direction: column;
}

:local(.app_sidebar) > .inboxsdk__close_button {
  position: absolute;
  bottom: 10px;
  right: 20px;
}

:local(.app_sidebar_content_area) {
  width: 216px;
}

:local(.app_sidebar_content_panel) {
  overflow: hidden;
  font:
    12px Arial,
    sans-serif;
  max-height: 100%;
  box-sizing: border-box;
}

:local(.app_sidebar_content_panel_top_line) {
  white-space: nowrap;
  display: flex;
  user-select: none;
  cursor: default;
}

:local(.app_sidebar_content_panel):not(:local(.expanded))
  :local(.app_sidebar_content_panel_top_line) {
  border-bottom: 1px solid #ddd;
}

:local(.app_sidebar_content_panel):local(.showControls)
  :local(.app_sidebar_content_panel_top_line):hover,
:local(.app_sidebar_content_panel):local(.dragged)
  :local(.app_sidebar_content_panel_top_line) {
  background: rgb(0 0 0 / 3%);
}

:local(.app_sidebar_content_panel_title) {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
}

:local(.app_sidebar_content_panel):local(.showControls)
  :local(.app_sidebar_content_panel_title) {
  cursor: move;
}

:local(.app_sidebar_content_panel_title_text) {
  padding-left: 6px;
  vertical-align: middle;
  font:
    bold 13px / 40px 'Helvetica Neue',
    Helvetica,
    Arial,
    sans-serif;
  color: rgb(0 0 0 / 87%);
}

:local(.app_sidebar):local(.hideTitleBar)
  :local(.app_sidebar_content_panel_top_line) {
  display: none;
}

:local(.app_sidebar_content_panel):local(.showControls)
  :local(.app_sidebar_content_panel_top_line):hover
  :local(.app_sidebar_content_panel_grip) {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 10px;
  height: 40px;
  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI2cHgiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDYgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Q29tYmluZWQgU2hhcGU8L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+PC9kZWZzPiAgICA8ZyBpZD0iRkluYWxzLSoqSmFuLTkqKiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iU2lkZWJhci1jbG9zZWQtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIC0xNC4wMDAwMDApIiBmaWxsPSIjQUFBQUFBIj4gICAgICAgICAgICA8ZyBpZD0iU2lkZWJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgPGcgaWQ9IkJveC1pbmZvLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcmlwcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAxNC41MDAwMDApIj4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC42NjY2NjY2NjcsNS40MTY2NjY2NyBDMC42NjY2NjY2NjcsNC44NjQzODE5MiAxLjExMDUzMTQ5LDQuNDE2NjY2NjcgMS42NjY2NjY2Nyw0LjQxNjY2NjY3IEMyLjIxODk1MTQyLDQuNDE2NjY2NjcgMi42NjY2NjY2Nyw0Ljg2MDUzMTQ5IDIuNjY2NjY2NjcsNS40MTY2NjY2NyBDMi42NjY2NjY2Nyw1Ljk2ODk1MTQyIDIuMjIyODAxODQsNi40MTY2NjY2NyAxLjY2NjY2NjY3LDYuNDE2NjY2NjcgQzEuMTE0MzgxOTIsNi40MTY2NjY2NyAwLjY2NjY2NjY2Nyw1Ljk3MjgwMTg0IDAuNjY2NjY2NjY3LDUuNDE2NjY2NjcgWiBNMC42NjY2NjY2NjcsMS4yNSBDMC42NjY2NjY2NjcsMC42OTc3MTUyNSAxLjExMDUzMTQ5LDAuMjUgMS42NjY2NjY2NywwLjI1IEMyLjIxODk1MTQyLDAuMjUgMi42NjY2NjY2NywwLjY5Mzg2NDgyMiAyLjY2NjY2NjY3LDEuMjUgQzIuNjY2NjY2NjcsMS44MDIyODQ3NSAyLjIyMjgwMTg0LDIuMjUgMS42NjY2NjY2NywyLjI1IEMxLjExNDM4MTkyLDIuMjUgMC42NjY2NjY2NjcsMS44MDYxMzUxOCAwLjY2NjY2NjY2NywxLjI1IFogTTAuNjY2NjY2NjY3LDkuNTgzMzMzMzMgQzAuNjY2NjY2NjY3LDkuMDMxMDQ4NTggMS4xMTA1MzE0OSw4LjU4MzMzMzMzIDEuNjY2NjY2NjcsOC41ODMzMzMzMyBDMi4yMTg5NTE0Miw4LjU4MzMzMzMzIDIuNjY2NjY2NjcsOS4wMjcxOTgxNiAyLjY2NjY2NjY3LDkuNTgzMzMzMzMgQzIuNjY2NjY2NjcsMTAuMTM1NjE4MSAyLjIyMjgwMTg0LDEwLjU4MzMzMzMgMS42NjY2NjY2NywxMC41ODMzMzMzIEMxLjExNDM4MTkyLDEwLjU4MzMzMzMgMC42NjY2NjY2NjcsMTAuMTM5NDY4NSAwLjY2NjY2NjY2Nyw5LjU4MzMzMzMzIFogTTMuMzAwMDAwMTksMS4yNSBDMy4zMDAwMDAxOSwwLjY5NzcxNTI1IDMuNzQzODY1MDEsMC4yNSA0LjMwMDAwMDE5LDAuMjUgQzQuODUyMjg0OTQsMC4yNSA1LjMwMDAwMDE5LDAuNjkzODY0ODIyIDUuMzAwMDAwMTksMS4yNSBDNS4zMDAwMDAxOSwxLjgwMjI4NDc1IDQuODU2MTM1MzcsMi4yNSA0LjMwMDAwMDE5LDIuMjUgQzMuNzQ3NzE1NDQsMi4yNSAzLjMwMDAwMDE5LDEuODA2MTM1MTggMy4zMDAwMDAxOSwxLjI1IFogTTMuMzAwMDAwMTksNS40MTY2NjY2NyBDMy4zMDAwMDAxOSw0Ljg2NDM4MTkyIDMuNzQzODY1MDEsNC40MTY2NjY2NyA0LjMwMDAwMDE5LDQuNDE2NjY2NjcgQzQuODUyMjg0OTQsNC40MTY2NjY2NyA1LjMwMDAwMDE5LDQuODYwNTMxNDkgNS4zMDAwMDAxOSw1LjQxNjY2NjY3IEM1LjMwMDAwMDE5LDUuOTY4OTUxNDIgNC44NTYxMzUzNyw2LjQxNjY2NjY3IDQuMzAwMDAwMTksNi40MTY2NjY2NyBDMy43NDc3MTU0NCw2LjQxNjY2NjY3IDMuMzAwMDAwMTksNS45NzI4MDE4NCAzLjMwMDAwMDE5LDUuNDE2NjY2NjcgWiBNMy4zMDAwMDAxOSw5LjU4MzMzMzMzIEMzLjMwMDAwMDE5LDkuMDMxMDQ4NTggMy43NDM4NjUwMSw4LjU4MzMzMzMzIDQuMzAwMDAwMTksOC41ODMzMzMzMyBDNC44NTIyODQ5NCw4LjU4MzMzMzMzIDUuMzAwMDAwMTksOS4wMjcxOTgxNiA1LjMwMDAwMDE5LDkuNTgzMzMzMzMgQzUuMzAwMDAwMTksMTAuMTM1NjE4MSA0Ljg1NjEzNTM3LDEwLjU4MzMzMzMgNC4zMDAwMDAxOSwxMC41ODMzMzMzIEMzLjc0NzcxNTQ0LDEwLjU4MzMzMzMgMy4zMDAwMDAxOSwxMC4xMzk0Njg1IDMuMzAwMDAwMTksOS41ODMzMzMzMyBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==)
    50% center no-repeat;
}

:local(.app_sidebar_content_panel_title_icon_container) {
  width: 20px;
  height: 20px;
  vertical-align: middle;
  margin-left: 6px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  margin-top: -1px;
}

:local(.app_sidebar_content_panel_title_icon),
:local(.app_sidebar_content_panel_title_icon) > img {
  width: 13px;
  height: 13px;
}

:local(.app_sidebar_content_panel_toggle) {
  flex: 1;
  text-align: right;
  visibility: hidden;
}

:local(.app_sidebar_content_panel):local(.showControls)
  :local(.app_sidebar_content_panel_toggle) {
  visibility: visible;
  cursor: pointer;
}

:local(.app_sidebar_content_panel_toggle_button) {
  margin-top: 12px;
  margin-right: 4px;
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAA30lEQVR4Ae3RO04EMRgE4Q45hlkuxWMPCwdBLNxjZQJPNBkq4U7qm9x/lyb6A0mSJEmSJEmS9NB/iXjKV57DJdd8ZmSzS34yc+cJueaemVvG/vnzSODz596ES77XUZxwzN+b8HjM5wlva/7uhI91DCes+efvPf9u5AYSTvMbfwAm9OfzhNf2fJbQn48S+vNRQn8+SujPRwn9+SjhpT+fJPTno4T+fJTQnw8T+PxyAp/fT+Dz+wl8fj+Bz28n8PnVBD6/msDnVxP4/GoCn99MYPP7xmm+JEmSJEmSJEmSfgG9E96X0mx7vAAAAABJRU5ErkJggg==)
    center / 20px no-repeat;
  border: none;
  width: 14px;
  height: 14px;
  transform: rotate(-90deg);
  transition:
    -webkit-transform 0.15s,
    transform 0.15s;
  outline: none;
  opacity: 0.6;
  cursor: pointer;
}

:local(.app_sidebar_content_panel_top_line):hover
  :local(.app_sidebar_content_panel_toggle_button),
:local(.app_sidebar_content_panel):local(.dragged)
  :local(.app_sidebar_content_panel_top_line)
  :local(.app_sidebar_content_panel_toggle_button) {
  opacity: 0.9;
}

:local(.app_sidebar_content_panel):local(.expanded)
  :local(.app_sidebar_content_panel_toggle_button) {
  transform: rotate(0);
}

:local(.app_sidebar_content_panel_content) {
  margin-bottom: 25px;
}

:local(.sidebar_iconArea) :local(.sidebar_button_container) {
  position: relative;
}

:local(.sidebar_iconArea) .inboxsdk__button_icon:focus,
:local(.sidebar_iconArea) .inboxsdk__button_icon:hover {
  outline: none;
}

/* end sidebar */

/* shared parts of app id warning */

.inboxsdk__appid_warning {
  margin: 0;
  padding: 9px;
  color: #4b4b4b;
  background: #ff6c6c;
  font-size: 10pt;
}

.inboxsdk__appid_warning_main {
  display: inline-block;
  vertical-align: middle;
}

.inboxsdk__appid_warning .topline {
  font-weight: bold;
  font-size: 11pt;
}

a.inboxsdk__appid_register {
  color: white;
  display: inline-block;
  background: #1989ff;
  border-radius: 3px;
  text-decoration: none;
  box-shadow: 0 0 5px rgb(0 0 0 / 30%);
  padding: 7px;
  font-size: 10pt;
  vertical-align: middle;
  margin-left: 1em;
}

.inboxsdk__thread_row_icon_wrapper {
  display: inline-block;
}

.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {
  margin-top: 0px;
}

:local(.thread_noticeBar) {
  background: #f8ebc0;
  margin-bottom: 10px;
  padding: 12px 4px 6px 12px;
}

/* suggestions */

.inboxsdk__suggestions_separator_before {
  padding-bottom: 2px !important;
}

.inboxsdk__suggestions_separator_after {
  border-top: 1px solid #e5e5e5;
  padding-top: 2px !important;
}

/* buttons */

div.T-I.inboxsdk__button {
  user-select: none;
  min-width: 27px;
}

/* subject line buttons */
div.bHJ .inboxsdk__button {
  margin: 0 2px 0 10px;
}

.inboxsdk__no_bg {
  background: none;
}

.inboxsdk__button.inboxsdk__button_disabled {
  opacity: 0.55;
}

.inboxsdk__button_icon + .inboxsdk__button_text {
  margin-left: 5px;
}

.inboxsdk__button_icon {
  display: inline-block;
}

.inboxsdk__button_iconImg {
  height: 20px;
  width: 20px;
  vertical-align: middle;
  margin-top: -2px;
  /* stylelint-disable-next-line property-no-unknown */
  user-drag: none;
  user-select: none;
  -webkit-user-drag: none;
}

.inboxsdk__button_green_inactive {
  box-shadow: 0 1px 0 rgb(0 0 0 / 5%);
  background-color: #53a93f;
  /* stylelint-disable-next-line value-no-vendor-prefix */
  background-image: -webkit-linear-gradient(top, transparent, transparent);
  /* stylelint-disable-next-line function-linear-gradient-no-nonstandard-direction */
  background-image: linear-gradient(top, transparent, transparent);
  border: 1px solid transparent;
  color: #fff;
  text-shadow: none;
}

.inboxsdk__button_green_hover {
  box-shadow: inset 0 -1px 0 #4c8534;
  background-color: #65b045;
  /* stylelint-disable-next-line value-no-vendor-prefix */
  background-image: -webkit-linear-gradient(top, transparent, transparent);
  /* stylelint-disable-next-line function-linear-gradient-no-nonstandard-direction */
  background-image: linear-gradient(top, transparent, transparent);
  border: 1px solid transparent;
  border-bottom: 1px solid #4c8534;
  text-shadow: none;
}

.inboxsdk__button_green_active {
  box-shadow: inset 0 1px 0 #2f6124;
  background: #3e802f;
  border: 1px solid transparent;
  border-top: 1px solid #2f6124;
  color: #fff;
  text-shadow: none;
}

/* For the outline style button (ams). We need to counteract a few of gmail's styles */
.ams.inboxsdk__button::before {
  width: 0;
  margin: 0;
}

.ams.inboxsdk__button:focus {
  background: rgb(0 0 0 / 0%);
}

.ams.inboxsdk__button .asa:not(.bjy)::after {
  width: auto;
  height: auto;
}

.inboxsdk__menu {
  min-width: 1em;
  min-height: 1em;
  padding: 0px;
  overflow: visible;
  max-height: none;

  /* Copied from Gmail's .J-M class */
  z-index: 7;
  cursor: default;
  font-size: 13px;
  margin: 0;
  outline: none;
}

.inboxsdk__menu > .inboxsdk__menuContent {
  padding: 0;
  box-shadow:
    0 8px 10px 1px rgb(0 0 0 / 14%),
    0 3px 14px 2px rgb(0 0 0 / 12%),
    0 5px 5px -3px rgb(0 0 0 / 20%);
  transition: opacity 0.218s;
  border: 1px solid rgb(0 0 0 / 20%);
  background: #fff;
  outline: none;
}

.f4.J-N-JX.inboxsdk__message_more_icon {
  height: 16px;
  margin-top: 1px;
  width: 16px;
}

/* end */

/* compose buttons */

/* mimic button styling */
.inboxsdk__composeButton,
.inboxsdk__compose_sendButton {
  height: 20px;
  width: 20px;
  padding: 4px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  outline: none;
  position: relative;
}

.inboxsdk__composeButton + .inboxsdk__composeButton {
  margin-left: 4px;
}

.inboxsdk__composeButton .inboxsdk__button_icon {
  opacity: 0.55;
}

.inboxsdk__composeButton:hover .inboxsdk__button_icon,
.inboxsdk__composeButton:focus .inboxsdk__button_icon,
.inboxsdk__composeButton.inboxsdk__composeButton_active .inboxsdk__button_icon {
  opacity: 1;
}

.inboxsdk__composeButton::before {
  content: '';
  display: block;
  opacity: 0;
  position: absolute;
  transition-duration: 0.15s;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  inset: 0px 0px 0px 0px;
  background: none;
  box-sizing: border-box;
  transform: scale(0);
  transition-property: transform, opacity;
  border-radius: 4px;
}

.inboxsdk__composeButton:hover::before {
  background-color: rgb(32 33 36 / 5.9%);
  border: none;
  box-shadow: none;
  opacity: 1;
  transform: scale(1);
}

.inboxsdk__composeButton:focus::before,
.inboxsdk__composeButton.inboxsdk__composeButton_active::before {
  background-color: rgb(32 33 36 / 12.2%);
  border: none;
  box-shadow: none;
  opacity: 1;
  transform: scale(1);
}

.inboxsdk__compose_actionToolbar
  .inboxsdk__compose_groupedActionToolbar
  div.inboxsdk__composeButton:last-child {
  margin-right: 0px;
}

.inboxsdk__compose_sendButton {
  background-color: #1a73e8;
  color: white;
  height: 24px;
  width: auto;
  padding-left: 3px;
  padding-right: 3px;
  border-radius: 4px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_sendButton {
  padding: 6px 4px;
  margin-left: 2px;
}

.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {
  height: 20px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {
  height: 24px;
}

.inboxsdk__compose_sendButton:focus,
.inboxsdk__compose_sendButton.inboxsdk__composeButton_active {
  background-color: #5094ed;
  box-shadow:
    0 1px 1px 0 rgb(66 133 244 / 30%),
    0 1px 3px 1px rgb(66 133 244 / 15%);
  border: none;
}

.T-I ~ .inboxsdk__compose_sendButton {
  margin-left: -6px;
}

.inboxsdk__compose_actionToolbar {
  white-space: nowrap;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_actionToolbar {
  padding-left: 6px;
}

.inboxsdk__compose_actionToolbar .inboxsdk__button_icon {
  height: 20px;
  width: 20px;
  display: inline-flex;
  user-select: none;
}

.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg {
  height: 17px;
  width: 17px;
  display: inline-flex;
  margin: auto;
}

.inboxsdk__compose_actionToolbar + .gU:not(.inboxsdk__compose_separator) {
  padding-left: 8px;
}

/* grouped action toolbar */
.inboxsdk__compose_groupedActionToolbar_visible .aDg .aDh {
  overflow-y: visible;
}

.inboxsdk__compose_groupedActionToolbar {
  position: absolute;
  bottom: 44px;
  margin: 3px;
  z-index: 10;
  left: 0px;
  border-radius: 2px;
  box-shadow:
    0 4px 5px 0 rgb(0 0 0 / 14%),
    0 1px 10px 0 rgb(0 0 0 / 12%),
    0 2px 4px -1px rgb(0 0 0 / 20%);
  padding: 5px 15px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_groupedActionToolbar {
  margin-bottom: 7px;
  padding: 4px 5px;
  background: white;
  left: -3px;
}

.inboxsdk__compose_inlineReply .inboxsdk__compose_groupedActionToolbar {
  left: 14px;
}

.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton:first-child {
  margin-left: 0px;
  margin-right: 0px;
}

.inboxsdk__composeButton.inboxsdk__compose_groupedActionButton {
  margin-right: 0px;
}

.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton {
  padding: 4px;
}

/*
there's an element that gets a height of 40px when the gmail formatting toolbar
is visible. This rule makes that same element get the 40px height when
the actionToolbar is visible
*/
.inboxsdk__compose_groupedActionToolbar_visible .bA3 {
  height: 40px;
}

.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {
  z-index: 1;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {
  margin-right: 0px;
}

.inboxsdk__compose_groupedActionToolbar_arrow {
  display: none;
}

/* end grouped action toolbar */

.inboxsdk__compose_customSendContainer {
  display: inline-block;
  position: relative;
  outline: 0;
  height: 29px;
  margin: 6px 0;
  padding: 0;
  line-height: 29px;
  vertical-align: middle;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__compose_customSendContainer {
  height: 36px;
  line-height: 36px;
}

.inboxsdk__compose_customTitleBarColor > img.Hl,
.inboxsdk__compose_customTitleBarColor > img.Hq,
.inboxsdk__compose_customTitleBarColor > img.Ha {
  background-color: transparent !important;
}

.inboxsdk__compose_hasCustomTitleBarText,
.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {
  display: flex;
}

.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {
  align-items: center;
}

.inboxsdk__compose_hasCustomTitleBarText > tbody {
  width: 100%;
}

.inboxsdk__compose_nativeTitleBarText {
  display: none !important;
}

.inboxsdk__compose_customTitleBarText {
  width: calc(100% - 80px);
}

.inboxsdk__compose_hasCustomTitleBarText td.Hm {
  margin-right: 10px;
  margin-left: auto;
}

.inboxsdk__compose_statusBarPrependContainer {
  border-top: 1px solid #cfcfcf;
}

.inboxsdk__compose_statusBarPrependContainer + table td.gU {
  border-top: none;
}

/* end */

/* appid warning gmail specific parts */

input.inboxsdk__x_close_button {
  background-color: transparent;
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA/dpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAzMjIxMUU0REM1MTExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1QzhERjZDREM1MDExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIElsbHVzdHJhdG9yIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzliZDBjZTYtYWVjMy00NWZkLThkOTktMzJhOTNhMTkxZGM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmQ4ZGVjMWJhLTk5NGEtNGViMC04NzE4LTdhMGJkN2FlOGY4OCIvPiA8ZGM6dGl0bGU+IDxyZGY6QWx0PiA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPmdseXBoaWNvbnM8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnRpdGxlPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvfrd2cAAANXSURBVHja5JrPaxNBFMe72wj1lFM8pNUcelLaQFLJRYptDgVBBe9F/BdyzV8h6bWQq0iKQQWhl1psL14VPPQUtErbS3owpIhdv6Mvsl1m3rz9FZv1wZeBdHbmfTozb2fejuN53lSS5jhOCcVNSJUFaJr+9BM6gXrQJ/TbS7LfXAKO51E8gB5Cd6FrwueOUexCL6FXADuN5YgakSiClaE2NFDNxNSA2ipH9icCwDy0BZ0nABDUObU9nxoITcMmNEwBIKgh9ZVLFARWhPbHABCU6rOYCAhsCfr2DyBGUn0v2fx0uPCLyLKK4gWUF8aOr9Ab+k9+hD7TNFE2A81Bi9Ad6B6NtMRURHsEX3dCRy0aib5wgXahOuSGWHMuPdMVBo4+NzLcmpBMp3dQJWrI9PVXgfaE06woAqHoZFvYZ1BDzb64EL5+HWrzTBAAchKQpmCIl5MC0PS/LJjSTRaEXnZDC8RCWhA+PxYsMMPgSzPYwJZlOi0za6oFVUM4W4WeGuf8n5HhpllHC0J7Jy56NAwdzkIHvhGrCSBqvv+4enbWUK9hiZZlHUjbEp0cC4QngQlAeBwMBQAumrUvgNALb8CQV4QQLIwBwgZTYWaK8jnvB1lnqLuGNXEgiG41IYQfpqjpr8s8s+4Hec5UrGsabgn3SX0CqAl3CUobmv7qTP1nfpAjQ6VD3baDIk4/BEyYurcN25lDwzNHo/1iiWl4M+SijSNbkNhkni25lCgw2T6z2XyPYo12pnFNtbFGbYb2RTG4NCIm+2A57ycBI4Gw+fJ7RApMhS+C5EUcGCmEzZeCArnCVBgKMzFRYMJA2HyZdullY/RxajLMdSkDaLKrwmSbimDbIY7Eo93ENj0rsRnmbz9cSmOabC4liCgwnC8nLuViTbaYIkRYGM6XXmZeiJdxi1KNskVxaWjeGoZM7XJXNL8/Fk6nUwrL0tCs2nyi+X2FyYHt/M1rZWkbP6kHq+8XDlaCo+7eRBx1M5V8iJkOUjAbukORJR3USjwdlKkEXWZSpplKYmfms8KkfugZ16c3j84212khj+/T26R9DP1/Pk9n6sKA5qXZSfEKRyfVKxyX/VKNE/e+lu+a031oVXrNCXZMh6LXSVxzclK4eHYDxa1xXzz7JcAA2eNXdJTLzjAAAAAASUVORK5CYII=);
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center center;
  height: 20px;
  width: 20px;
  border: none;
  vertical-align: middle;
  cursor: pointer;

  float: right;
  margin: 5px;
}

/* thread rows */

.inboxsdk__gmail_label.inboxsdk__label_has_icon .au {
  display: inline-block;
  margin-left: 14px;
}

.inboxsdk__thread_row_label .inboxsdk__button_icon,
.inboxsdk__thread_row_label .inboxsdk__button_iconImg {
  height: 11px;
  width: 11px;
}

.inboxsdk__thread_row_label .inboxsdk__button_icon {
  display: inline-block;
  margin-top: 3px;
  margin-left: 4px;
  position: absolute;
}

.inboxsdk__thread_row_button {
  outline: 0;
  height: 20px;
  width: 20px;
  padding: 0px;
}

.inboxsdk__thread_row_button .inboxsdk__button_icon {
  max-height: 100%;
}

.inboxsdk__thread_row_custom_date_container {
  max-width: inherit;
}

.inboxsdk__thread_row_button .inboxsdk__button_iconImg {
  height: 20px;
  width: 20px;
  margin-top: 0px;
}

.inboxsdk__gmail_action {
  float: right;
  position: relative;
  background-color: grey;
  margin-left: 1em;
  cursor: default;
  padding: 0 6px;
  /* stylelint-disable-next-line value-no-vendor-prefix */
  background-image: -webkit-linear-gradient(top, #e9e9e9, #e6e6e6);
  /* stylelint-disable-next-line function-linear-gradient-no-nonstandard-direction */
  background-image: linear-gradient(top, #e9e9e9, #e6e6e6);
  border: 1px solid rgb(0 0 0 / 10%);
  border-color: #ccc;
  color: #444;
  height: 17px;
  line-height: 17px;
  min-width: 56px;
  border-radius: 2px;
  font-size: 11px;
  font-weight: bold;
  text-align: center;
  white-space: nowrap;
  padding-right: 18px;
}

.inboxsdk__gmail_action:focus {
  border: 1px solid #4d90fe;
  outline: none;
}

.inboxsdk__gmail_action:active {
  box-shadow: inset 0 1px 2px rgb(0 0 0 / 10%);
}

.inboxsdk__gmail_action:hover {
  box-shadow: 0 1px 1px rgb(0 0 0 / 5%);
  background-color: #ededed;
  /* stylelint-disable-next-line value-no-vendor-prefix */
  background-image: -webkit-linear-gradient(top, #ededed, #eaeaea);
  /* stylelint-disable-next-line function-linear-gradient-no-nonstandard-direction */
  background-image: linear-gradient(top, #ededed, #eaeaea);
  border-color: #b8b8b8;
}

.inboxsdk__gmail_action::after {
  content: '';
  position: absolute;
  right: 5px;
  top: 5px;
  margin-left: 5px;
  background: no-repeat
    url(https://ssl.gstatic.com/mail/sprites/smartmail-561acb673be75c1d374881a95997fce4.png) -67px -100px;
  width: 7px;
  height: 7px;
  opacity: 0.55;
}

.inboxsdk__thread_row_custom_date {
  margin-left: 2px;
}

span.inboxsdk__thread_row_custom_date
  + span:not(.inboxsdk__thread_row_custom_date) {
  display: none;
}

span.inboxsdk__thread_row_custom_draft_label + div.yW {
  display: none;
}

.inboxsdk__thread_row_attachment_iconWrapper,
.inboxsdk__thread_row_attachment_icon {
  margin-left: 3px;
  width: 16px;
  height: 16px;
}

.inboxsdk__thread_row_attachment_iconWrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  width: max-content;
}

/* .zA td.apU.xy refers to the <td/> element that houses the favorite star in thread row view.
 The <span> element is what inboxSDK will render threadRowButtons as when Gmail hover actions are disabled.
 The following rules fix the issue where threadRowButtons were spilling over into the thread row email text.
 */
.zA td.apU.xY {
  width: initial;
}

.zA td.apU.xY span.inboxsdk__thread_row_button {
  margin: 0 10px;
  opacity: 0.16;
}

.zA.aqw td.apU.xY span.inboxsdk__thread_row_button {
  opacity: 0.54;
}

.zA.aqw td.apU.xY span.inboxsdk__thread_row_button:hover {
  opacity: 1;
}

.zA td.apU.xY span.inboxsdk__thread_row_button::before {
  /* Google adds in a pseduo ::before element to span elems with the T-KT class applied.
  Explicity setting this width and height to zero as remove weird positioning that results */
  width: 0px;
  height: 0px;
}

.inboxsdk__thread_row_attachment_icon {
  vertical-align: middle;
}

.zA > .xY.inboxsdk__thread_row_attachment_icons_present {
  max-width: inherit;
}

/* narrow vertical preview pane */
.Zs .xY.inboxsdk__thread_row_attachment_icons_present {
  flex-grow: 0;
}

.Zs .xY.inboxsdk__thread_row_label {
  order: 1;
}

.Zs .xY.inboxsdk__thread_row_icon_wrapper {
  order: 1;
  margin-left: 3px;
  margin-right: 0px;
}

/* end narrow vertical preview pane */

.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_icon,
.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {
  height: 18px;
  width: 18px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__thread_row_icon_wrapper {
  width: 20px;
  margin-right: 3px;
  align-self: center;
  height: 20px;
  flex: 0 0 auto;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {
  vertical-align: top;
}

.inboxsdk__thread_row_image_added
  .y6
  .inboxsdk__thread_row_icon_wrapper
  ~ span[id] {
  margin-left: 3px;
}

.inboxsdk__thread_row_image_added .a4W,
.inboxsdk__thread_row_image_added .apA,
.inboxsdk__thread_row_image_added .apx {
  position: relative;
}

/* end thread rows */
[inboxsdk__message_added_attachment_icon] td.gH > span:first-child > img,
[inboxsdk__message_added_attachment_icon]
  td.gH
  div.gK
  > span:first-child
  > img {
  margin-right: 3px;
  margin-left: 3px;
  margin-top: 0px;
}

[inboxsdk__message_added_attachment_icon]
  td.gH
  > span:first-child
  > *:last-child,
[inboxsdk__message_added_attachment_icon]
  td.gH
  div.gK
  > span:first-child
  > *:last-child {
  margin-right: 6px;
}

.inboxsdk__message_attachment_iconWrapper,
.inboxsdk__message_attachment_icon {
  width: 21px;
  height: 21px;
  position: relative;
}

.inboxsdk__message_attachment_iconWrapper {
  margin: auto 3px;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  vertical-align: top;
}

.inboxsdk__message_attachment_tooltipWrapper {
  position: absolute;
  top: 19px;
  z-index: 10;
}

/* Work around issue where clicking "Remove formatting" in Compose causes this
 * element to become taller and shift the toolbar down. */
.gU .aWQ {
  max-height: 3px;
}

.aQw .inboxsdk__button_icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 28px;
}

.aQw .inboxsdk__button_iconImg {
  height: 18px;
  width: 18px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.aQw .inboxsdk__button_iconImg {
  margin-top: 2px;
}

.aZi .asa .inboxsdk__button_iconImg {
  display: inline-block;
  vertical-align: middle;
  margin-top: -3px;
}

/* Message view attachments toolbar */
.aZi .aZj .asa .inboxsdk__button_iconImg {
  margin: 0;
}

body .dw {
  /* Fixes issue where a tall compose window opened over a custom view could be
   * overlapped by Gmail's top bar. Also fixes issue where mole widgets are
   * only visible while a compose window is open.
   */
  z-index: 6 !important;
}

.inboxsdk__compose_outerSidebar_wrapper {
  position: absolute;
  left: -401px;
  top: 0px;
  background: white;
  width: 400px;
  bottom: 0px;
  border-left: 1px solid silver;
  box-shadow: -2px 0px 1px #e6e6e6;
  display: block;
}

.inboxsdk__outerSidebarActive .aSt .inboxsdk__compose_outerSidebar_wrapper {
  border-left: 0;
  box-shadow: none;
  left: -400px;
}

.inboxsdk__outerSidebarActive .aSs > div {
  width: 50% !important;
  margin-left: 30%;
}

.inboxsdk__compose_outerSidebar_header {
  background: #404040;
  font-size: 80%;
  padding: 10px 10px 11px 10px;
  color: white;
  border-bottom: 1px solid #c4c4c4;
}

.inboxsdk__compose_outerSidebar_body {
  position: absolute;
  width: 100%;
  bottom: 43px;
  top: 36px;
  left: -1px;
  overflow: auto;
}

.inboxsdk__compose_outerSidebar_footer {
  position: absolute;
  bottom: 0px;
  width: 100%;
  border-top: 1px solid rgb(206 206 206);
  display: block;
}

.inboxsdk__compose_innerSidebarActive form,
.inboxsdk__compose_innerSidebarActive .GQ {
  padding-right: 200px;
}

div.inboxsdk__compose_statusbar {
  border: 0;
  height: 40px;
  margin: 0;
}

.inboxsdk__compose_statusbar {
  background: none;
  position: relative;
}

/* only include padding when in thread inline view */
.HM .I5 .inboxsdk__compose_statusbar {
  padding: 0 16px 16px 16px;
}

table + .inboxsdk__compose_statusbar {
  margin-top: -8px;
}

/* Necessary in pre-new-recipients-area Gmail to stop the compose body
from resizing and pushing the statusbars off-screen when the recipients
area is focused. */
body.inboxsdk__classic_gmail_recipients_area
  .inboxsdk__compose_statusbarActive
  .aoI {
  height: auto !important;
}

.inboxsdk__compose_statusbarActive .aDl {
  z-index: unset;
}

/* compose size fixing.
TODO Can we restrict this to only composes we've modified? */
.inboxsdk__compose .qz {
  max-height: inherit !important;
}

/* aDi is initially position: fixed, which messes things up, so we make static

TODO: 2023-08-31 is .aDi still in use anymore? */
body:not(.inboxsdk_hack_disableComposeSizeFixer)
  .inboxsdk__size_fixer
  .aDj.aDi {
  position: static !important;
}

.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .HM .I5 {
  padding-bottom: var(--inboxsdk-total-added-statusbar-height, 0px);
}

/* Extend the message foreground outline downwards to contain our added status bars */
.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .aDj::before {
  height: calc(100% + var(--inboxsdk-total-added-statusbar-height, 0px));
}

/* When we have a status bar added and the reply status is in position absolute or fixed mode (.aDi),
use a background color on the element containing our added status bars so the message background outline
isn't visible behind it. */
.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive
  .aDj.aDi
  > .aDh {
  background-color: white;
}

.inboxsdk__recipient_row {
  display: flex;
}

.inboxsdk__compose_notice {
  background-color: #f5f5f5;
  border-radius: 4px;
  margin: 10px;
  padding: 10px 16px;
}

.inboxsdk__recipient_row td.ok {
  height: 20px;
  padding: 0px !important;
}

.inboxsdk__recipient_row td.az3 {
  padding: 0px 3px 0px 3px;
}

.inboxsdk__compose_forceRecipientsOpen .fX.aXjCH {
  display: block !important;
}

.inboxsdk__compose_hideRecipientArea .fX.aXjCH,
.inboxsdk__compose_hideRecipientArea .aoD.hl,
.inboxsdk__compose_forceRecipientsOpen .aoD.hl,
.inboxsdk__compose_forceRecipientRowHidden {
  display: none !important;
}

/* toolbar visibility */

[data-thread-toolbar='true'] [data-rowlist-toolbar='true'] {
  display: none !important;
}

[data-toolbar-expanded='true'] [data-toolbar-expanded='false'] {
  display: none !important;
}

[data-toolbar-expanded='false'] [data-toolbar-expanded='true'] {
  display: none !important;
}

[data-toolbar-icononly='true'] .inboxsdk__button_text {
  display: none !important;
}

[data-toolbar-icononly='false'] .inboxsdk__button_text {
  color: #5f6368;
}

[data-toolbar-icononly='false'] .asa::before {
  border-radius: 4px;
  border: none !important;
}

[data-toolbar-icononly='false'] .inboxsdk__button {
  align-items: center;
  border: none;
  display: inline-flex;
  justify-content: center;
  position: relative;
  z-index: 0;
  -webkit-font-smoothing: antialiased;
  font-family: 'Google Sans', Roboto, RobotoDraft, Helvetica, Arial, sans-serif;
  font-size: 14px;
  letter-spacing: 0.15px;
  background: none;
  box-sizing: border-box;
  color: #5f6368;
  cursor: pointer;
  font-weight: 500;
  outline: none;
  padding: 0 8px;
}

.inboxsdk__menuItem img,
.inboxsdk__menuItem .inboxsdk__icon {
  height: 16px;
  width: 16px;
  margin-top: -1px;
}

/* end */

/* modal */

.inboxsdk__modal_overlay {
  right: 0px;
  bottom: 0px;
}

.inboxsdk__modal_fullscreen {
  position: fixed;
  inset: 0px 0px 0px 0px;
  z-index: 503;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 110px 50px 50px 50px;
}

.inboxsdk__modal_content {
  margin-top: 30px;
  margin-bottom: 30px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons
  .inboxsdk__modal_content {
  margin-bottom: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons:not(
    .inboxsdk__modal_hideBottom
  )
  .inboxsdk__modal_content {
  margin-bottom: 0px;
  padding-bottom: 24px;
}

.inboxsdk__modal_close {
  outline: none;
  cursor: pointer;
}

.inboxsdk__modal_fullscreen .inboxsdk__modal_container {
  position: relative;
  margin-top: -60px;
  width: auto;
  overflow: hidden;
}

.inboxsdk__modal_fullscreen .inboxsdk__modal_container .inboxsdk__modal_toprow {
  margin-right: 16px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_close {
  display: none;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_container {
  padding-top: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_content {
  margin-top: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .Kj-JD-K7 {
  margin: 0px;
  display: none;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides
  .inboxsdk__modal_container,
.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides .inboxsdk__modal_content {
  padding-left: 0px;
  padding-right: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom
  .inboxsdk__modal_content {
  margin-bottom: 0px;
}

.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom
  .inboxsdk__modal_container {
  padding-bottom: 0px;
}

.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width {
  display: flex;
}

.inboxsdk__modal_toprow--constrain-title-width > span[role='heading'] {
  flex: 1;
  width: 0;
  word-wrap: break-word;
}

/* end modal */

/* mole */

/* Fix issue where Compose toolbar can become disconnected when moles or
 * drawers are in use */
.inboxsdk__drawers_in_use .aDi,
.inboxsdk__moles_in_use .aDi {
  left: auto !important;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__drawers_in_use .aDi,
.inboxsdk__moles_in_use .aDi {
  position: static;
}

/* Make it so the compose/mole layer doesn't wrap, so we don't have to do a lot
 * of fancy logic to hide moles ourselves when things get too crowded. */
.inboxsdk__moles_in_use .nH > .nH > .no {
  white-space: nowrap;
}

.inboxsdk__moles_in_use .nH > .nH > .no > * {
  white-space: initial;
}

.inboxsdk__moles_in_use .nH > .nH > .no > .nn {
  display: inline-block;
  float: none;
}

.inboxsdk__mole_view {
  position: relative;
  max-width: 564px;
  height: 100vh;
  vertical-align: top;
  display: inline-flex;
  align-items: flex-end;
}

.inboxsdk__mole_view_inner {
  visibility: visible;
  box-sizing: border-box;
  margin-right: 5px;
  box-shadow: rgb(0 0 0 / 20%) 0 2px 6px;
  min-width: 260px;
  min-height: 36px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__mole_view_inner {
  min-height: 40px;
}

.inboxsdk__mole_view_titlebar:not(.inboxsdk__original_view),
.inboxsdk__mole_view_inner:not(.inboxsdk__original_view) {
  border-radius: 8px 8px 0 0;
}

.inboxsdk__mole_view_titlebar {
  position: absolute;
  left: 0;
  right: 5px;
  font-size: 14px;
  font-weight: 500;
  box-sizing: border-box;
  height: 40px;
  cursor: pointer;
  padding: 10px 12px 10px 16px;
  color: #041e49;
  background: #f2f6fc;
}

.inboxsdk__mole_view_titlebar.inboxsdk__original_view {
  color: white;
  font-size: 12.8px;
  font-weight: 400;
  background: #404040;
  padding: 9px 0 0 11px;
  border-radius: 4px 4px 0 0;
}

.inboxsdk__mole_view_titlebar h2 {
  font-size: inherit;
  font-weight: inherit;
  margin: 4px 0 0 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.inboxsdk__mole_title_buttons {
  white-space: nowrap;
  float: right;
  padding-right: 5px;
  margin-top: 1px;
}

.inboxsdk__mole_title_buttons.inboxsdk__original_view {
  margin-top: -3px;
}

.inboxsdk__mole_title_buttons > img {
  height: 24px;
  width: 24px;
  position: relative;
  top: 2px;
}

.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view) > img {
  height: 16px;
  width: 16px;
  margin-left: 4px;
}

.inboxsdk__mole_title_buttons:not(.inboxsdk__original_view) > img:hover {
  background-color: rgb(68 71 70 / 7.8%);
}

.inboxsdk__mole_title_buttons.inboxsdk__original_view > img:hover {
  background-color: #737373;
}

.inboxsdk__mole_title_buttons > img:hover {
  opacity: 1;
}

.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content,
.inboxsdk__mole_view.inboxsdk__minimized.inboxsdk__mole_use_minimize_title
  h2.inboxsdk__mole_default,
.inboxsdk__mole_view:not(.inboxsdk__minimized) h2.inboxsdk__mole_minimized,
.inboxsdk__mole_view:not(.inboxsdk__mole_use_minimize_title)
  h2.inboxsdk__mole_minimized,
.inboxsdk__mole_view.inboxsdk__minimized .Hl,
.inboxsdk__mole_view:not(.inboxsdk__minimized) .Hk {
  display: none;
}

.inboxsdk__mole_view_content:not(.inboxsdk__original_view) {
  margin-top: 40px;
  border: none;
}

.inboxsdk__mole_view_content {
  margin-top: 36px;
  border: 1px solid #cfcfcf;
  background: white;
  min-width: 260px;
  min-height: 20px;
  max-height: 80vh;
}

.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_inner {
  min-width: 0px;
}

.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_content {
  margin-top: 0px;
  min-width: 0px;
}

/* end mole */

/* tabs */

.inboxsdk__tab {
  width: 30px;
}

.inboxsdk__tab:local(.hideTitleBar):first-child:last-child {
  display: none;
}

.inboxsdk__tab.inboxsdk__tab_selected {
  width: auto;
}

table.aKk .inboxsdk__contentTabContainer .inboxsdk__tab .aAy[role='tab'] {
  height: 28px;
}

.inboxsdk__tab_icon {
  width: 30px;
  height: 25px;
  background-position-x: 5px;
  background-position-y: 3px;
  background-size: 16px;
  background-repeat: no-repeat;
}

.inboxsdk__tab_icon img {
  height: 16px;
  width: 16px;
  margin-left: 5px;
  margin-top: 3px;
}

.inboxsdk__tab .aKx {
  top: 4px;
}

.inboxsdk__sidebar div[role='complementary'] {
  position: static !important;
}

/* Fix issue where sidebar causes threadview to be taller than it should */
.inboxsdk__sidebar > div.y4,
:local(.app_sidebar_in_use) > div.y4 {
  display: none;
}

table.aKk
  .inboxsdk__contentTabContainer
  .inboxsdk__tab:first-child
  .aAy[role='tab'] {
  border-left-width: 1px;
}

/* end tabs */

/* old sidebar */

.inboxsdk__sidebar .inboxsdk__contentPanelContainer {
  font:
    12px Arial,
    sans-serif;
  max-width: 220px;
}

.inboxsdk__contentPanelContainer_contentContainer {
  overflow: hidden;
  margin-bottom: 10px;
  border-bottom: 1px solid #d8d8d8;
}

/* end old sidebar */

/* sidebar */

body.inboxsdk__hasTopMessageBar .bq9 {
  top: var(--inboxsdk__topMessageBar-height);
}

:local(.app_sidebar_in_use) > div[role='complementary'] {
  position: static !important;
  width: 216px !important;
}

:local(.app_sidebar_in_use) {
  /* Necessary to prevent z-indexes on sidebar items from causing them to show
  above stuff outside of the sidebar. */
  will-change: position;
}

/* stylelint-disable-next-line no-duplicate-selectors */
:local(.app_sidebar_content_panel) {
  background: #fff;
}

/* stylelint-disable-next-line no-duplicate-selectors */
:local(.app_sidebar_content_area) {
  padding: 4px 0 12px;
}

:local(.app_sidebar):local(.hideTitleBar) :local(.app_sidebar_content_area) {
  padding-top: 0;
}

/* gmail addon support */

.container_app_sidebar_in_use.no,
:local(.container_app_sidebar_no_icons).no {
  display: flex;
  flex-direction: row;
  width: 100%;
}

body[dir='rtl'] .container_app_sidebar_in_use.no[dir='ltr'],
body[dir='rtl'] .idm5_container_app_sidebar_no_icons.no[dir='ltr'] {
  flex-direction: row-reverse;
}

/* overwrite margin right of the gmail page next/back and settings icon buttons
   to line up properly */

/* when no siebar is visible */
.container_app_sidebar_in_use.no
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: -57px !important;
}

/* when addon sidebar visible */
.container_addon_sidebar_visible.container_app_sidebar_in_use.no
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: -321px !important;
}

/* when sdk sidebar visible */
.container_app_sidebar_visible.container_app_sidebar_in_use.no
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: -321px !important;
}

/* no sdk icons and no native addons */
:local(.container_app_sidebar_no_icons)
  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {
  margin-right: 0px !important;
}

/* quickfix, TODO investigate removing ar7 class from our buttons */
.inboxsdk__button.ar7 {
  pointer-events: all !important;
}

.container_app_sidebar_in_use .bkK.nn,
:local(.container_app_sidebar_no_icons) .bkK.nn {
  width: auto !important;
  flex: 1;
  min-width: 0px;
}

/* when removing addon icons */
:local(.container_app_sidebar_no_icons) .bnl.nn {
  z-index: -1;
  position: absolute;
}

.container_app_sidebar_in_use :local(.app_sidebar_in_use) {
  min-width: 57px !important;
  flex-shrink: 0;
}

.container_app_sidebar_in_use :local(.app_sidebar_in_use).app_sidebar_visible {
  min-width: 321px !important;
}

.container_app_sidebar_in_use :local(.app_sidebar_in_use) > .J-KU-Jg {
  display: block !important;
}

.container_app_sidebar_in_use
  :local(.app_sidebar_in_use)
  :local(.app_sidebar_container) {
  display: none;
}

.container_app_sidebar_in_use
  :local(.app_sidebar_in_use).app_sidebar_visible
  :local(.app_sidebar_container) {
  display: block;
  float: left;
  height: 100%;
  border-left: 1px solid #e0e0e0;
  padding-left: 16px;
  width: calc(100% - 74px);
  overflow: auto;
}

.container_app_sidebar_in_use
  :local(.app_sidebar_container)
  :local(.app_sidebar_content_area) {
  width: calc(100% - 16px);
  padding-right: 16px;
}

.container_app_sidebar_in_use
  :local(.app_sidebar_in_use).app_sidebar_visible
  .J-KU-Jz {
  width: auto;
  padding-right: 50px;
}

:local(.sidebar_iconArea) .inboxsdk__button_icon {
  margin: 18px 18px 10px 18px;
  border: none;
  background: transparent;
  height: 20px;
  width: 20px;
  overflow: hidden;
  padding: 0;
  cursor: pointer;
  position: relative;
}

:local(.sidebar_iconArea).sidebar_global_iconArea .inboxsdk__button_icon {
  margin-bottom: 18px;
}

body :local(.sidebar_iconArea) .inboxsdk__button_icon {
  overflow: visible;
}

:local(.sidebar_iconArea)
  .sidebar_button_container_active
  .inboxsdk__button_icon::before,
:local(.sidebar_iconArea) .inboxsdk__button_icon:hover::before {
  content: '';
  background: #f1f3f4;
  position: absolute;
  inset: -10px -10px -10px -10px;
  border-radius: 50%;
  z-index: 0;
}

:local(.sidebar_iconArea)
  .sidebar_button_container_active
  .inboxsdk__button_icon::before {
  background: #e8eaed;
}

:local(.sidebar_iconArea) .inboxsdk__button_iconImg {
  width: 20px;
  height: 20px;
  margin-top: 0px;
}

:local(.sidebar_iconArea) .inboxsdk__button_icon .inboxsdk__button_iconImg {
  position: absolute;
  left: 0px;
  top: 0px;
  z-index: 1;
}

:local(.sidebar_iconArea)
  .sidebar_button_container_active
  .inboxsdk__button_selectedIndicator {
  height: 40px;
  width: 3px;
  position: absolute;
  left: 0px;
  bottom: 0px;
  background-color: rgb(66 133 244);
  border-radius: 0 3px 3px 0;
}

/* old pre-2024-11-07 sidebar where buttons were on the right of the panel */
body:not(.inboxsdk__sidebar_icons_right)
  :local(.sidebar_iconArea)
  .sidebar_button_container_active
  .inboxsdk__button_selectedIndicator {
  left: unset;
  right: 0;
  border-radius: 3px 0 0 3px;
}

:local(.sidebar_iconArea).sidebar_global_iconArea
  .sidebar_button_container_active
  .inboxsdk__button_selectedIndicator {
  bottom: 8px;
}

/* end sidebar */

/* material sidebar */
.brC-brG.companion_app_sidebar_visible {
  display: block !important;
}

.bq9:not(.brC-brG).companion_app_sidebar_wrapper_visible {
  display: block !important;
}

/* for 2024-11-07 gmail change moving sidebar icons to the right */
.WN9Ejb.br3.companion_app_sidebar_wrapper_visible {
  display: block !important;
}

.companion_global_app_sidebar_visible .thread_app_sidebar {
  display: none;
}

.companion_app_sidebar_visible:not(.companion_global_app_sidebar_visible)
  .global_app_sidebar {
  display: none;
}

.nH.companion_container_app_sidebar_visible {
  width: calc(100% - 300px) !important;
}

.companion_app_sidebar_visible .addon_sidebar ~ div:not(.addon_sidebar) {
  display: none !important;
}

:local(.app_sidebar_in_use) :local(.app_sidebar_container).addon_sidebar {
  height: 100%;
  overflow: auto;
}

:local(.app_sidebar_in_use)
  :local(.app_sidebar_container).addon_sidebar
  :local(.app_sidebar_content_area) {
  width: 100%;
}

:local(.app_sidebar_in_use):not(.companion_app_sidebar_visible) .addon_sidebar {
  display: none;
}

/* stylelint-disable-next-line no-duplicate-selectors */
:local(.app_sidebar_content_panel_title_icon_container) {
  margin-left: 0px;
}

:local(.app_sidebar_content_panel) :local(.app_sidebar_content_panel_top_line) {
  padding: 0px 16px;
}

/* hide thread addon icons when in custom view */
body.inboxsdk__custom_view_active
  .brC-aT5-aOt-ato-Kp-Jw
  [role='tablist']
  > div:not(:last-child) {
  display: none;
}

/* make the native addon icon container for thread add-ons (div.bvq) always visible */
:local(.app_sidebar_in_use) .bvq,
:local(.app_sidebar_in_use) .bvq > div:last-child {
  display: block !important;
}

/* hide the native addon loading div */
:local(.companion_container_app_sidebar_in_use) .bvq > div:first-child {
  display: none !important;
}

/* end material sidebar */

/* custom content */

.inboxsdk__custom_view_element {
  overflow: auto;
}

/* end custom content */

/* nav menu */

.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) {
  border-left-color: transparent;
}

.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .nU:not(.n1) .n0 {
  font-weight: normal;
}

.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .bsU {
  font-weight: normal;
}

.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .TO {
  background: none;
}

.inboxsdk__hide_addon_container {
  display: flex !important;
  flex-direction: row;
  width: 100% !important;
}

body[dir='rtl'] .inboxsdk__hide_addon_container[dir='ltr'] {
  flex-direction: row-reverse;
}

.inboxsdk__hide_addon_container > .bkK.nn {
  width: auto !important;
  flex: 1;
  min-width: 0;
}

.inboxsdk__hide_addon_container > .bnl.nn {
  display: none;
}

.inboxsdk__navItem {
  font-size: 14px;
}

/*
fix issue in pre-Chat Gmail versions where somehow a style="flex-grow: 1" attribute
shows up on our elements preventing them from collapsing.
*/
.inboxsdk__navItem:not(.Xr) > .V3[style] {
  flex-grow: 0 !important;
}

.inboxsdk__navItem > .TO.n4 {
  display: block;
  padding-left: 0;
}

/* app menu panel nav item reshaping */
.inboxsdk__collapsiblePanel .inboxsdk__navItem > .TO .TN.aik {
  padding-left: 18px;
}

/* Tweak alignment of  */
.inboxsdk__collapsiblePanel .inboxsdk__navItem > .TO .qj {
  margin-right: 14px;
}

/* end app menu panel nav item reshaping */

.inboxsdk__navItem > .TO.n4 .qj > .G-asx {
  margin-right: 0;
}

.inboxsdk__navItem > .TO .aio > .bsU:empty {
  display: none;
}

.inboxsdk__navItem > .TO .qj:empty::after {
  background-color: rgb(118 118 118);
  border-radius: 50%;
  content: '';
  height: 18px;
  margin-left: 1px;
  width: 18px;
}

.inboxsdk__navItem > .TO .qj[style*='border-color']:empty::after {
  border-color: inherit;
}

.inboxsdk__navItem > .TO:hover .pM {
  display: flex;
  visibility: visible;
}

.inboxsdk__navItem > .TO .afM {
  cursor: pointer;
}

.inboxsdk__navItem > .TO:hover .afM {
  display: block;
  visibility: visible;
}

/* This does slightly break from the native Gmail behavior, but we keep the dropdown button
  visible while it has an active dropdown */
.inboxsdk__navItem > .TO img.afM.afO {
  display: block;
  visibility: visible;
}

/* Keep the subtitle hidden while the dropdown is active */
.inboxsdk__navItem > .TO img.afM.afO ~ .aio > .bsU {
  display: none;
}

.inboxsdk__navItem > .TO:hover .bsU {
  display: none;
}

.inboxsdk__navItem.inboxsdk__navItem_nonClickable > .TO:active {
  background-color: initial;
}

.inboxsdk__navItem_hover .aj0,
.inboxsdk__navItem_hover .p8 {
  visibility: visible;
}

.inboxsdk__appMenuItem .CL.V6::before,
.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3::before {
  background-image: var(--background-image);
}

.inboxsdk__collapsiblePanel.apV.aJu .T-I.T-I-KE.L3::before {
  background-image: var(--background-image--hover);
}

.inboxsdk__appMenuItem.apV .CL.V6::before {
  background-image: var(--background-image--active);
}

.inboxsdk__collapsiblePanel .T-I.T-I-KE.L3::before {
  background-size: 24px;
}

.inboxsdk__collapsiblePanel_loading_container {
  display: none;
}

.inboxsdk__collapsiblePanel_loading_container.inboxsdk__collapsiblePanel_loading_container--active {
  display: block;
}

.inboxsdk__navItem_link {
  cursor: pointer;
  margin-left: auto;
}

.inboxsdk__navItem_link > a {
  margin-left: 16px;
}

.inboxsdk__navItem > .TO .inboxsdk__button {
  margin-right: 0;
}

[dir='rtl'] .inboxsdk__navItem_link {
  left: -4px;
  right: initial;
}

.inboxsdk__navItem_container .aio .inboxsdk__button {
  position: absolute;
  top: 0px;
  right: -30px;
}

.inboxsdk__navItem_marker {
  position: absolute;
  left: 0px;
  padding-bottom: 2px;
}

.inboxsdk__expando {
  z-index: 1;
}

.inboxsdk__navItem_link > a,
.aip .CK {
  color: #15c;
}

.inboxsdk__navItem_link > a:hover,
.aip .CK:hover {
  text-decoration: underline;
}

.inboxsdk__navItem_container .aio.aip {
  white-space: nowrap;
}

/* start nav menu open state */

.WR[role="navigation"] /* new left nav */
  .inboxsdk__navItem
  .Yh:not(.inboxsdk__navItem_parent_accessory_button):empty {
  display: none;
}

.WR[role="navigation"] /* new left nav */
  .inboxsdk__navItem
  .Yh:not(.inboxsdk__navItem_parent_accessory_button) {
  background: none;
}

.WR[role="navigation"] /* new left nav */
  .inboxsdk__navItem
  .Yh
  .inboxsdk__button_icon {
  display: none;
}

/* end nav menu open state */

/* start nav menu close state */

.WR[role="navigation"].bhZ:not(.bym) /* .WR is the new left nav */
  .inboxsdk__navItem
  .Yh {
  opacity: 1;
}

.WR[role="navigation"].bhZ:not(.bym) /* .WR is the new left nav */
  .inboxsdk__navItem
  .Yh.inboxsdk__navItem_parent_accessory_button {
  background-image: none !important;
}

.WR[role="navigation"].bhZ:not(.bym) /* .WR is the new left nav */
  .inboxsdk__navItem
  .Yh:empty {
  background-color: rgb(32 33 36 / 71%);
  border-radius: 50%;
  display: inherit;
  height: 18px;
  margin-left: 1px;
  width: 18px;
}

.WR[role='navigation'].bhZ:not(.bym)
  .inboxsdk__navItem
  .Yh
  .inboxsdk__button_icon {
  display: inherit;
}

/* end nav menu close state */

/* end nav menu */

/* search results section */

.inboxsdk__custom_sections {
  margin-bottom: 15px;
}

.inboxsdk__custom_sections.Wc {
  padding: 0px;
  margin-bottom: 0px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__custom_sections {
  margin-bottom: 8px;
}

.inboxsdk__resultsSection.inboxsdk__resultsSection_nonCollapsible
  .inboxsdk__resultsSection_title
  .Wp {
  visibility: hidden;
}

.inboxsdk__custom_sections.Wc .inboxsdk__resultsSection {
  padding-top: 0px;
}

.inboxsdk__custom_sections .Wg {
  padding-top: 0px;
}

.inboxsdk__custom_sections.Wc .Wg {
  border-bottom: 0;
  padding: 0px;
}

/* end lone collapsed SectionView in Gmailv1 */

.inboxsdk__results_collapsedContainer.Wg {
  height: auto;
}

.inboxsdk__results_collapsedContainer > div {
  display: flex;
  flex-wrap: wrap;
  flex: 1 0 100%;
}

/* lone collapsed SectionView in Gmailv2 */

/* If only a single SectionView is collapsed then its dropdown button and titleTextLink are still shown */
.inboxsdk__results_collapsedContainer
  > div
  > .inboxsdk__resultsSection_collapsed:first-child:last-child {
  flex: 1;
  margin-right: 0;
}

.inboxsdk__results_collapsedContainer
  > div
  > .inboxsdk__resultsSection_collapsed:first-child:last-child
  > .inboxsdk__resultsSection_header {
  display: flex;
  align-items: center;
  flex: 1;
}

/* end lone collapsed SectionView in Gmailv2 */

.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {
  display: inline-block;
  margin-right: 20px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {
  display: inline-flex;
}

.Wc .inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {
  margin-right: 0px;
}

/* 2024-01-25 Prevent the addition of extra padding on the right side of the header from \`.Wg\` */
.inboxsdk__resultsSection_collapsed .inboxsdk__resultsSection_header {
  padding-right: 0;
}

.inboxsdk__resultsSection_title {
  white-space: nowrap;
  cursor: pointer;
  display: inline-block;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__resultsSection_title {
  display: flex;
  align-items: center;
  height: 48px;
}

.Wc .inboxsdk__resultsSection_title {
  padding: 3px 0 3px 8px;
}

.inboxsdk__resultsSection_header {
  min-height: 48px;
  line-height: 48px;
}

.inboxsdk__resultsSection_header_summaryText.Wm:last-child .amH {
  padding-right: 0px;
  margin-right: 0px;
}

.inboxsdk__custom_sections.Wc
  .inboxsdk__resultsSection_header_summaryText:last-child {
  margin-right: 11px;
}

.inboxsdk__custom_sections.Wc .J-JN-M-I {
  margin-right: 13px;
}

.inboxsdk__resultsSection .TB.TC {
  text-align: center;

  /* 2025-07-10: Remove padding from the left and right of the message element.
    prevents .TM .TC from being applied which has a padding 8px on the left and right.
   */
  padding-left: 0;
  padding-right: 0;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_loading {
  font-style: italic;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_result_icon {
  height: 15px;
  width: 15px;
}

.inboxsdk__resultsSection_label_iconHtml,
.inboxsdk__resultsSection_result_iconHtml {
  display: flex;
  justify-content: center;
  align-items: center;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA:hover > .xW {
  /* Gmailv2 tries to hide the "xW" element when a "zA" element is hovered. This prevent that. */
  display: flex;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA > .xW {
  max-width: none;
  flex-basis: auto;
}

.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow .xT {
  align-items: center;
}

.inboxsdk__resultsSection .xX {
  width: 20ex;
}

.inboxsdk__resultsSection tr .xW > span {
  overflow: hidden;
  display: block;
  text-overflow: ellipsis;
}

.inboxsdk__resultsSection .V3 {
  overflow: hidden;
  white-space: nowrap;
}

.inboxsdk__resultsSection .at {
  position: relative;
}

.inboxsdk__thread_row_label {
  flex-shrink: 0;
  align-self: center;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__thread_row_label {
  align-self: flex-end;
}

/* label in vertical preview pane */
.apv .inboxsdk__thread_row_label {
  align-self: flex-start;
}

.inboxsdk__resultsSection_label_icon {
  height: 11px;
  width: 11px;
  position: absolute;
  top: 2px;
  margin-left: 4px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__resultsSection_label_icon {
  margin-top: 1px;
}

.inboxsdk__resultsSection .av,
.inboxsdk__thread_row_label .av {
  /* max-width is set inline, default is 90px */
  overflow: hidden;
  text-overflow: ellipsis;
}

.inboxsdk__resultsSection_label_icon + .av,
.inboxsdk__thread_row_label .inboxsdk__button_icon + .av {
  margin-left: 16px;
}

.Wc .inboxsdk__resultsSection_footer {
  padding: 3px 3px 3px 8px;
}

/* end search results section */

/* tooltip */

/* gmail styles */

.inboxsdk__tooltip .T-P {
  box-shadow: 0 1px 3px rgb(0 0 0 / 20%);
  background-color: #fff;
  border: 1px solid;
  border-color: #bbb #bbb #a8a8a8;
  padding: 16px;
  position: absolute;
  z-index: 1201 !important;
}

.inboxsdk__tooltip.inboxdk__tooltip_content .T-P {
  padding: 0px;
}

.inboxsdk__tooltip .aRM {
  outline: none;
  padding: 13px 10px 16px;
  text-align: center;
  font:
    normal normal normal normal 16px / normal arial,
    sans-serif;
}

.inboxdk__tooltip_content.inboxsdk__tooltip .aRM {
  padding: 0px;
}

.inboxsdk__tooltip .aRR {
  color: #333;
  font-size: 18px;
  margin-top: 13px;
}

.inboxsdk__tooltip .aRQ {
  color: #777;
  font-size: 13px;
  margin: 3px 0 14px 0;
}

/* end gmail styles */

.inboxsdk__tooltip {
  position: fixed;
  z-index: 1300;
  transition:
    left 200ms ease,
    top 200ms ease;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__tooltip .T-P {
  position: relative;
  width: auto;
  max-width: 500px;
}

.inboxsdk__tooltip .inboxsdk__tooltip_arrow {
  position: fixed;
  z-index: 1400;
  margin-top: -1px;
  transition:
    left 200ms ease,
    top 200ms ease;
}

.inboxsdk__tooltip .inboxsdk__tooltip_close {
  user-select: none;
}

.inboxsdk__tooltip .inboxsdk__button {
  margin-right: 0px;
}

.inboxsdk__tooltip .inboxsdk__tooltip_image {
  max-height: 300px;
  max-width: 500px;
  overflow: hidden;
  height: auto;
}

.inboxsdk__tooltip .inboxsdk__tooltip_image > img {
  max-height: 300px;
  max-width: 500px;
}

/* end tooltip */

/* attachment card */

.inboxsdk__attachmentCard img.aQG.aYB {
  max-width: 178px;
  min-width: 178px;
  min-height: 118px;
}

.inboxsdk__attachmentCard img.aZG.aYw {
  background: none;
}

/* add some margins between cards so 4+ cards don't hit each other */

.aQw > .T-I.J-J5-Ji.L3 {
  margin-top: 5px;
}

/* end attachment card */

/* keyboard shortcut help */

table.cf.wd.inboxsdk__shortcutHelp_table {
  margin-bottom: 15px;
}

.inboxsdk__shortcutHelp_table td.Dn {
  display: inline-block;
  width: 50%;
}

.inboxsdk__shortcutHelp_table table.cf {
  display: block;
}

.inboxsdk__shortcutHelp_table tbody tbody {
  display: block;
}

.inboxsdk__shortcutHelp_table tbody tbody tr {
  display: block;
  white-space: nowrap;
}

.inboxsdk__shortcutHelp_table td.wg.Dn {
  display: inline-block;
  width: 45%;
}

.inboxsdk__shortcutHelp_table span.wb {
  margin-left: 3px;
}

.inboxsdk__shortcutHelp_table td.we.Dn {
  width: 60%;
  white-space: normal;
}

.inboxsdk__shortcutHelp_title img.inboxsdk__icon {
  height: 21px;
  width: 21px;
  vertical-align: middle;
  margin-right: 10px;
  border-radius: 4px;
}

/* end keyboard shortcut help */

/* search suggestions */

.asor.inboxsdk__custom_suggestion {
  display: flex;
  justify-content: center;
  align-items: center;
}

.inboxsdk__custom_suggestion img {
  max-width: 32px;
  max-height: 32px;
}

.inboxsdk__custom_suggestion_iconHTML {
  display: flex;
  justify-content: center;
  align-items: center;
  position: absolute;
  left: 8px;
  height: 32px;
  width: 43px;
}

/* Adjust positioning when no description present */
.gstq_d .inboxsdk__custom_suggestion_iconHTML {
  margin-top: -8px;
}

/* end send suggestions */

/* app toolbar */

.inboxsdk__appButton {
  margin-right: 8px;
}

.inboxsdk__appButton + .inboxsdk__appButton {
  margin-left: 16px;
}

.inboxsdk__appButton.inboxsdk__appButton_noGPlus {
  margin-right: 0px;
}

.inboxsdk__appButton .inboxsdk__button_icon {
  margin-right: 5px;
  position: relative;
}

.inboxsdk__appButton a {
  color: #404040;
  text-decoration: none;
  line-height: 24px;
}

.inboxsdk__appButton.inboxsdk__appButton_noGPlus a {
  line-height: 30px;
}

.inboxsdk__appButton a:hover {
  text-decoration: underline;
  color: #000;
}

.inboxsdk__gmail_dark_theme .inboxsdk__appButton a {
  color: #eee;
}

.inboxsdk__gmail_dark_theme .inboxsdk__appButton a:hover {
  color: #fff;
}

.inboxsdk__appButton_tooltip {
  outline: none;
  transition: none;
  animation: gb__a 0.2s;
}

.inboxsdk__appButton_tooltip .inboxsdk__tooltip_close {
  display: none;
}

.inboxsdk__tooltip.inboxsdk__appButton_tooltip .T-P {
  padding: 0px;
}

.inboxsdk__tooltip.inboxsdk__appButton_tooltip .aRM {
  padding: 0px;
  white-space: initial;
  text-align: center;
  font:
    normal normal normal normal 16px / normal arial,
    sans-serif;
}

.inboxsdk__tooltip.inboxsdk__appButton_tooltip .inboxsdk__tooltip_arrow {
  transform-origin: top;
  transform: rotateZ(180deg);
  margin-top: 9px;
}

/* resize based on width */

.inboxsdk__searchIsNarrow .streak__appToolbarButton_title {
  display: none;
}

/* end resize based on width */

/* end app toolbar */

/* custom message views */

.inboxsdk__custom_message_view {
  display: flex;
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid #efefef;
  border-collapse: collapse;
}

.inboxsdk__custom_message_view_hidden {
  display: none;
}

/* when cusotm message is right after the last message with its reply */
.h7.ie + .inboxsdk__custom_message_view {
  margin-top: 5px;
}

/* when custom message is after the super collapsed message elements */
.kQ + .inboxsdk__custom_message_view,
.kx + .inboxsdk__custom_message_view {
  margin-top: 1px;
}

.inboxsdk__custom_message_view.inboxsdk__custom_message_view_collapsed {
  cursor: pointer;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon {
  padding-left: 16px;
  padding-right: 16px;
  flex-shrink: 0;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon img {
  height: 32px;
  width: 32px;
  border-radius: 50%;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_content {
  width: 100%;
  min-width: 0px;
}

.inboxsdk__custom_message_view .inboxsdk__custom_message_view_header {
  cursor: pointer;
}

.inboxsdk__custom_message_view_app_notice_content {
  position: relative;
  display: flex;
  justify-content: center;
  z-index: 1;
}

.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container {
  position: relative;
  width: auto !important;
  min-width: 32px;
}

/* stylelint-disable-next-line no-duplicate-selectors */
.inboxsdk__custom_message_view_app_notice_content {
  align-items: center;
  display: flex;
  font-size: 0.75rem !important;
  justify-content: flex-start;
  margin-left: 0;
  padding: 0px;
  top: 0;
}

.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container:hover::before {
  content: none !important;
}

.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container
  > span:first-child {
  display: none;
}

.inboxsdk__custom_message_view_app_notice_container::before {
  position: absolute;
}

.inboxsdk__custom_message_view_app_notice_content > * {
  color: #555;
}

table[role='presentation'].inboxsdk__thread_view_with_custom_view {
  table-layout: fixed;
}

table[role='presentation'].inboxsdk__thread_view_with_custom_view > tr {
  display: block;
}

/* end custom message views */

/* butter/snack bar */

.inboxsdk__butterbar.inboxsdk__butterbar_error {
  background-color: #c53929 !important;
}

.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button'] {
  color: #fff;
}

.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button']::before {
  background: rgb(255 255 255 / 8%);
}

/* end butter/snack bar */

/* support menu item */
.inboxsdk__support_menuItem:hover {
  background-color: #eee;
  outline: 1px dashed transparent;
}

.inboxsdk__compose_addressList {
  display: flex !important;
}

/* end support menu item */

/* compose popover */
.inboxsdk__linkPopOver_section_container {
  position: absolute;
  width: 100%;
  left: 0;
  margin-top: 8px;
  box-sizing: border-box;
}

/* version with new gmail style (late 2024) popover: match width better */
.VRezbc.phnWcc .inboxsdk__linkPopOver_section_container {
  padding: 0 5px;
}

.inboxsdk__linkPopOver_section {
  width: 100%;
  background: #fff;
  border: 1px solid;
  border-color: #bbb #bbb #a8a8a8;
  font:
    13px arial,
    sans-serif;
  padding: 5px 8px;
  margin-bottom: 5px;
  box-sizing: border-box;
  box-shadow: 0 1px 3px rgb(0 0 0 / 20%);
}

/* end compose popover */

/*
 Toolbar/Thread button style fix for
 when the gmail setting "Button labels" is set to "text"
*/

.T-I.J-J5-Ji.T-I-ax7.inboxsdk__button .asa::after {
  width: auto;
}

/* ListRouteView hideFilterToolbar() support */
.inboxsdk__hide_filter_toolbar .G6[role="toolbar"] /* chat+meet off */,
.inboxsdk__hide_filter_toolbar .biW[data-srm="email"] /* chat+meet on */ {
  display: none;
}

.inboxsdk__hide_filter_toolbar .G-atb.PY /* chat+meet off */ {
  min-height: 32px !important;
  height: 32px !important;
}
`, null], "sourceRoot": "" }]);
                  var app_sidebar_waiting_platform = "inboxsdk__nJrOYb9x4IUalKhkqH70";
                  var app_sidebar_main = "inboxsdk__YVRXKNcaUvgm8xbnhvbA";
                  var app_sidebar = "inboxsdk__L1YTilBb_3NY6uyjljIg";
                  var app_sidebar_content_area = "inboxsdk__ZsVjiThsnbCmCG_X1Vvn";
                  var app_sidebar_content_panel = "inboxsdk__RRnCd87hoA2uHeC1Z_FE";
                  var app_sidebar_content_panel_top_line = "inboxsdk__iYzl6PjYB9v7KGQNbONH";
                  var expanded = "inboxsdk__o9YcckDJql686JS0n2cc";
                  var dragged = "inboxsdk__XdCPRDkO7zSIv6nU4USH";
                  var showControls = "inboxsdk__vTsoFgWgM9ldKGsRJYHd";
                  var app_sidebar_content_panel_title = "inboxsdk__lD1h9YUibxcHdtWGdiWq";
                  var app_sidebar_content_panel_title_text = "inboxsdk__p_cMIiZvN4vwQdGOpCts";
                  var hideTitleBar = "inboxsdk__fQK2Ffccj51PVtC_ibDc";
                  var app_sidebar_content_panel_grip = "inboxsdk__KudoZ1EBFoQsddbSavvj";
                  var app_sidebar_content_panel_title_icon_container = "inboxsdk__TFQRFr4aJVmDmx2llTVx";
                  var app_sidebar_content_panel_title_icon = "inboxsdk__Yzt2_upvw7fe6BjWdlhZ";
                  var app_sidebar_content_panel_toggle = "inboxsdk__M4Frio2Us0lwSTltblkg";
                  var app_sidebar_content_panel_toggle_button = "inboxsdk__Nr6Udyn2ocUynKpdfxh1";
                  var app_sidebar_content_panel_content = "inboxsdk__QsikHKWmzD0Ovsg3wrIw";
                  var sidebar_iconArea = "inboxsdk__z3cCBtGXYneog44Vf16J";
                  var sidebar_button_container = "inboxsdk__ARG5bpD2vntIyElH978u";
                  var thread_noticeBar = "inboxsdk__QbxpXL1mja3SlO_1nJOS";
                  var app_sidebar_in_use = "inboxsdk__lmkPHCz841PzU2vywMZI";
                  var container_app_sidebar_no_icons = "inboxsdk__IpDkQtEZuh257muFXot6";
                  var app_sidebar_container = "inboxsdk__jQiSbhX57v1JCl6fIbdb";
                  var companion_container_app_sidebar_in_use = "inboxsdk__cnd4jAy3zFUYdR_NdMxT";
                  const __WEBPACK_DEFAULT_EXPORT__ = ___CSS_LOADER_EXPORT___;
                })
              ),
              /***/
              6408: (
                /***/
                (function(__unused_webpack_module, exports2, __webpack_require__2) {
                  "use strict";
                  var __importDefault = this && this.__importDefault || function(mod) {
                    return mod && mod.__esModule ? mod : { "default": mod };
                  };
                  Object.defineProperty(exports2, "__esModule", { value: true });
                  exports2._62To10 = exports2._36To10 = exports2._32To10 = exports2._16To10 = exports2._8To10 = exports2._2To10 = exports2._10To62 = exports2._10To36 = exports2._10To32 = exports2._10To16 = exports2._10To8 = exports2._10To2 = exports2.convertBase = void 0;
                  var decimal_js_1 = __importDefault(__webpack_require__2(2400));
                  decimal_js_1.default.set({ precision: 1e9 });
                  decimal_js_1.default.set({ toExpPos: 9e15 });
                  var _convertFromDecimal = function(num, base) {
                    var convertedNumArr = [];
                    var decimalNum = new decimal_js_1.default(num);
                    var decimalBase = new decimal_js_1.default(base.length);
                    while (!decimalNum.isZero()) {
                      var remainder = decimalNum.mod(decimalBase).toNumber();
                      decimalNum = decimalNum.dividedToIntegerBy(decimalBase);
                      convertedNumArr.unshift(base.substr(remainder, 1));
                    }
                    if (convertedNumArr.length === 0) {
                      convertedNumArr.unshift("0");
                    }
                    return convertedNumArr.join("");
                  };
                  var _convertToDecimal = function(num, base) {
                    var baseChar2Idx = {};
                    for (var i = 0; i < base.length; i++) {
                      baseChar2Idx[base.substr(i, 1)] = new decimal_js_1.default(i);
                    }
                    var decimalBase = new decimal_js_1.default(base.length);
                    var convertedNum = new decimal_js_1.default(0);
                    for (var i = 0; i < num.length; i++) {
                      var tmpDecimal1 = baseChar2Idx[num.substr((i + 1) * -1, 1)];
                      var tmpDecimal2 = decimal_js_1.default.pow(decimalBase, i);
                      var tmpDecimal3 = tmpDecimal1.times(tmpDecimal2);
                      convertedNum = convertedNum.plus(tmpDecimal3);
                    }
                    return convertedNum.toString();
                  };
                  var convertBase = function(num, originalBase, newBase) {
                    var BASE62 = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
                    if (typeof num !== "number" && typeof num !== "string" || typeof num === "number" && !isFinite(num)) {
                      throw new Error("First augument must be a number or string.");
                    }
                    if (typeof num === "number") {
                      num = num.toString();
                    }
                    if (typeof originalBase !== "number" && typeof originalBase !== "string") {
                      throw new Error("Second augument must be a number or string.");
                    }
                    if (typeof originalBase === "number") {
                      if (!Number.isInteger(originalBase)) {
                        throw new Error("Second augument must be integer.");
                      }
                      if (!(2 <= originalBase && originalBase <= 62)) {
                        throw new Error("Second augument must be between 2 and 62.");
                      }
                      originalBase = BASE62.substr(0, originalBase);
                    }
                    if (originalBase.length <= 1) {
                      throw new Error("Second augument' length must be larger than 1. Base 1 or smaller cannnot be defined.");
                    }
                    if (originalBase.length !== new Set(originalBase).size) {
                      throw new Error("Second augument must not contain the same characters.");
                    }
                    var availableCharacters = new RegExp("^[" + originalBase + "]+$");
                    if (!availableCharacters.test(num)) {
                      throw new Error("First augument must consist of second augument.");
                    }
                    if (typeof newBase !== "number" && typeof newBase !== "string") {
                      throw new Error("Third augument must be a number or string.");
                    }
                    if (typeof newBase === "number") {
                      if (!Number.isInteger(newBase)) {
                        throw new Error("Third augument must be integer.");
                      }
                      if (!(2 <= newBase && newBase <= 62)) {
                        throw new Error("Third augument must be between 2 and 62.");
                      }
                      newBase = BASE62.substr(0, newBase);
                    }
                    if (newBase.length <= 1) {
                      throw new Error("Third augument' length must be larger than 1. Base 1 or smaller cannnot be defined.");
                    }
                    if (newBase.length !== new Set(newBase).size) {
                      throw new Error("Third augument must not contain the same characters.");
                    }
                    var tmpNum = _convertToDecimal(num, originalBase);
                    return _convertFromDecimal(tmpNum, newBase);
                  };
                  exports2.convertBase = convertBase;
                  var _10To2 = function(num) {
                    return convertBase(num, 10, 2);
                  };
                  exports2._10To2 = _10To2;
                  var _10To8 = function(num) {
                    return convertBase(num, 10, 8);
                  };
                  exports2._10To8 = _10To8;
                  var _10To16 = function(num) {
                    return convertBase(num, 10, 16);
                  };
                  exports2._10To16 = _10To16;
                  var _10To32 = function(num) {
                    return convertBase(num, 10, 32);
                  };
                  exports2._10To32 = _10To32;
                  var _10To36 = function(num) {
                    return convertBase(num, 10, 36);
                  };
                  exports2._10To36 = _10To36;
                  var _10To62 = function(num) {
                    return convertBase(num, 10, 62);
                  };
                  exports2._10To62 = _10To62;
                  var _2To10 = function(num) {
                    return convertBase(num, 2, 10);
                  };
                  exports2._2To10 = _2To10;
                  var _8To10 = function(num) {
                    return convertBase(num, 8, 10);
                  };
                  exports2._8To10 = _8To10;
                  var _16To10 = function(num) {
                    return convertBase(num, 16, 10);
                  };
                  exports2._16To10 = _16To10;
                  var _32To10 = function(num) {
                    return convertBase(num, 32, 10);
                  };
                  exports2._32To10 = _32To10;
                  var _36To10 = function(num) {
                    return convertBase(num, 36, 10);
                  };
                  exports2._36To10 = _36To10;
                  var _62To10 = function(num) {
                    return convertBase(num, 62, 10);
                  };
                  exports2._62To10 = _62To10;
                })
              ),
              /***/
              9060: (
                /***/
                ((module2) => {
                  module2.exports = function newArray(start, end) {
                    var n0 = typeof start === "number", n1 = typeof end === "number";
                    if (n0 && !n1) {
                      end = start;
                      start = 0;
                    } else if (!n0 && !n1) {
                      start = 0;
                      end = 0;
                    }
                    start = start | 0;
                    end = end | 0;
                    var len = end - start;
                    if (len < 0)
                      throw new Error("array length must be positive");
                    var a = new Array(len);
                    for (var i = 0, c = start; i < len; i++, c++)
                      a[i] = c;
                    return a;
                  };
                })
              ),
              /***/
              4622: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  var rawAsap = __webpack_require__2(6285);
                  var freeTasks = [];
                  var pendingErrors = [];
                  var requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);
                  function throwFirstError() {
                    if (pendingErrors.length) {
                      throw pendingErrors.shift();
                    }
                  }
                  module2.exports = asap;
                  function asap(task) {
                    var rawTask;
                    if (freeTasks.length) {
                      rawTask = freeTasks.pop();
                    } else {
                      rawTask = new RawTask();
                    }
                    rawTask.task = task;
                    rawAsap(rawTask);
                  }
                  function RawTask() {
                    this.task = null;
                  }
                  RawTask.prototype.call = function() {
                    try {
                      this.task.call();
                    } catch (error) {
                      if (asap.onerror) {
                        asap.onerror(error);
                      } else {
                        pendingErrors.push(error);
                        requestErrorThrow();
                      }
                    } finally {
                      this.task = null;
                      freeTasks[freeTasks.length] = this;
                    }
                  };
                })
              ),
              /***/
              6285: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = rawAsap;
                  function rawAsap(task) {
                    if (!queue.length) {
                      requestFlush();
                      flushing = true;
                    }
                    queue[queue.length] = task;
                  }
                  var queue = [];
                  var flushing = false;
                  var requestFlush;
                  var index = 0;
                  var capacity = 1024;
                  function flush() {
                    while (index < queue.length) {
                      var currentIndex = index;
                      index = index + 1;
                      queue[currentIndex].call();
                      if (index > capacity) {
                        for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {
                          queue[scan] = queue[scan + index];
                        }
                        queue.length -= index;
                        index = 0;
                      }
                    }
                    queue.length = 0;
                    index = 0;
                    flushing = false;
                  }
                  var scope = typeof __webpack_require__2.g !== "undefined" ? __webpack_require__2.g : self;
                  var BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;
                  if (typeof BrowserMutationObserver === "function") {
                    requestFlush = makeRequestCallFromMutationObserver(flush);
                  } else {
                    requestFlush = makeRequestCallFromTimer(flush);
                  }
                  rawAsap.requestFlush = requestFlush;
                  function makeRequestCallFromMutationObserver(callback) {
                    var toggle = 1;
                    var observer2 = new BrowserMutationObserver(callback);
                    var node = document.createTextNode("");
                    observer2.observe(node, { characterData: true });
                    return function requestCall() {
                      toggle = -toggle;
                      node.data = toggle;
                    };
                  }
                  function makeRequestCallFromTimer(callback) {
                    return function requestCall() {
                      var timeoutHandle = setTimeout(handleTimer, 0);
                      var intervalHandle = setInterval(handleTimer, 50);
                      function handleTimer() {
                        clearTimeout(timeoutHandle);
                        clearInterval(intervalHandle);
                        callback();
                      }
                    };
                  }
                  rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;
                })
              ),
              /***/
              1812: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = autoHtml;
                  var _escape = _interopRequireDefault(__webpack_require__2(3131));
                  function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : { default: obj };
                  }
                  function autoHtml(templateParts) {
                    var parts = new Array(templateParts.length * 2 - 1);
                    parts[0] = templateParts[0];
                    for (var i = 0, len = arguments.length <= 1 ? 0 : arguments.length - 1; i < len; i++) {
                      var value = i + 1 < 1 || arguments.length <= i + 1 ? void 0 : arguments[i + 1];
                      parts[2 * i + 1] = value && Object.prototype.hasOwnProperty.call(value, "__html") ? value.__html : (0, _escape.default)(value);
                      parts[2 * i + 2] = templateParts[i + 1];
                    }
                    return parts.join("");
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              2504: (
                /***/
                ((__unused_webpack_module, exports2) => {
                  "use strict";
                  exports2.byteLength = byteLength;
                  exports2.toByteArray = toByteArray;
                  exports2.fromByteArray = fromByteArray;
                  var lookup = [];
                  var revLookup = [];
                  var Arr = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
                  var code = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
                  for (var i = 0, len = code.length; i < len; ++i) {
                    lookup[i] = code[i];
                    revLookup[code.charCodeAt(i)] = i;
                  }
                  revLookup["-".charCodeAt(0)] = 62;
                  revLookup["_".charCodeAt(0)] = 63;
                  function getLens(b64) {
                    var len2 = b64.length;
                    if (len2 % 4 > 0) {
                      throw new Error("Invalid string. Length must be a multiple of 4");
                    }
                    var validLen = b64.indexOf("=");
                    if (validLen === -1) validLen = len2;
                    var placeHoldersLen = validLen === len2 ? 0 : 4 - validLen % 4;
                    return [validLen, placeHoldersLen];
                  }
                  function byteLength(b64) {
                    var lens = getLens(b64);
                    var validLen = lens[0];
                    var placeHoldersLen = lens[1];
                    return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
                  }
                  function _byteLength(b64, validLen, placeHoldersLen) {
                    return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;
                  }
                  function toByteArray(b64) {
                    var tmp;
                    var lens = getLens(b64);
                    var validLen = lens[0];
                    var placeHoldersLen = lens[1];
                    var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));
                    var curByte = 0;
                    var len2 = placeHoldersLen > 0 ? validLen - 4 : validLen;
                    var i2;
                    for (i2 = 0; i2 < len2; i2 += 4) {
                      tmp = revLookup[b64.charCodeAt(i2)] << 18 | revLookup[b64.charCodeAt(i2 + 1)] << 12 | revLookup[b64.charCodeAt(i2 + 2)] << 6 | revLookup[b64.charCodeAt(i2 + 3)];
                      arr[curByte++] = tmp >> 16 & 255;
                      arr[curByte++] = tmp >> 8 & 255;
                      arr[curByte++] = tmp & 255;
                    }
                    if (placeHoldersLen === 2) {
                      tmp = revLookup[b64.charCodeAt(i2)] << 2 | revLookup[b64.charCodeAt(i2 + 1)] >> 4;
                      arr[curByte++] = tmp & 255;
                    }
                    if (placeHoldersLen === 1) {
                      tmp = revLookup[b64.charCodeAt(i2)] << 10 | revLookup[b64.charCodeAt(i2 + 1)] << 4 | revLookup[b64.charCodeAt(i2 + 2)] >> 2;
                      arr[curByte++] = tmp >> 8 & 255;
                      arr[curByte++] = tmp & 255;
                    }
                    return arr;
                  }
                  function tripletToBase64(num) {
                    return lookup[num >> 18 & 63] + lookup[num >> 12 & 63] + lookup[num >> 6 & 63] + lookup[num & 63];
                  }
                  function encodeChunk(uint8, start, end) {
                    var tmp;
                    var output = [];
                    for (var i2 = start; i2 < end; i2 += 3) {
                      tmp = (uint8[i2] << 16 & 16711680) + (uint8[i2 + 1] << 8 & 65280) + (uint8[i2 + 2] & 255);
                      output.push(tripletToBase64(tmp));
                    }
                    return output.join("");
                  }
                  function fromByteArray(uint8) {
                    var tmp;
                    var len2 = uint8.length;
                    var extraBytes = len2 % 3;
                    var parts = [];
                    var maxChunkLength = 16383;
                    for (var i2 = 0, len22 = len2 - extraBytes; i2 < len22; i2 += maxChunkLength) {
                      parts.push(encodeChunk(uint8, i2, i2 + maxChunkLength > len22 ? len22 : i2 + maxChunkLength));
                    }
                    if (extraBytes === 1) {
                      tmp = uint8[len2 - 1];
                      parts.push(
                        lookup[tmp >> 2] + lookup[tmp << 4 & 63] + "=="
                      );
                    } else if (extraBytes === 2) {
                      tmp = (uint8[len2 - 2] << 8) + uint8[len2 - 1];
                      parts.push(
                        lookup[tmp >> 10] + lookup[tmp >> 4 & 63] + lookup[tmp << 2 & 63] + "="
                      );
                    }
                    return parts.join("");
                  }
                })
              ),
              /***/
              2180: (
                /***/
                (function(module2, exports2, __webpack_require__2) {
                  var __WEBPACK_AMD_DEFINE_RESULT__;
                  ;
                  (function(globalObject) {
                    "use strict";
                    var BigNumber, isNumeric = /^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i, mathceil = Math.ceil, mathfloor = Math.floor, bignumberError = "[BigNumber Error] ", tooManyDigits = bignumberError + "Number primitive has more than 15 significant digits: ", BASE = 1e14, LOG_BASE = 14, MAX_SAFE_INTEGER = 9007199254740991, POWS_TEN = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13], SQRT_BASE = 1e7, MAX = 1e9;
                    function clone(configObject) {
                      var div, convertBase, parseNumeric, P = BigNumber2.prototype = { constructor: BigNumber2, toString: null, valueOf: null }, ONE = new BigNumber2(1), DECIMAL_PLACES = 20, ROUNDING_MODE = 4, TO_EXP_NEG = -7, TO_EXP_POS = 21, MIN_EXP = -1e7, MAX_EXP = 1e7, CRYPTO = false, MODULO_MODE = 1, POW_PRECISION = 0, FORMAT = {
                        prefix: "",
                        groupSize: 3,
                        secondaryGroupSize: 0,
                        groupSeparator: ",",
                        decimalSeparator: ".",
                        fractionGroupSize: 0,
                        fractionGroupSeparator: "\xA0",
                        // non-breaking space
                        suffix: ""
                      }, ALPHABET = "0123456789abcdefghijklmnopqrstuvwxyz";
                      function BigNumber2(v, b) {
                        var alphabet, c, caseChanged, e, i, isNum, len, str, x = this;
                        if (!(x instanceof BigNumber2)) return new BigNumber2(v, b);
                        if (b == null) {
                          if (v && v._isBigNumber === true) {
                            x.s = v.s;
                            if (!v.c || v.e > MAX_EXP) {
                              x.c = x.e = null;
                            } else if (v.e < MIN_EXP) {
                              x.c = [x.e = 0];
                            } else {
                              x.e = v.e;
                              x.c = v.c.slice();
                            }
                            return;
                          }
                          if ((isNum = typeof v == "number") && v * 0 == 0) {
                            x.s = 1 / v < 0 ? (v = -v, -1) : 1;
                            if (v === ~~v) {
                              for (e = 0, i = v; i >= 10; i /= 10, e++) ;
                              if (e > MAX_EXP) {
                                x.c = x.e = null;
                              } else {
                                x.e = e;
                                x.c = [v];
                              }
                              return;
                            }
                            str = String(v);
                          } else {
                            if (!isNumeric.test(str = String(v))) return parseNumeric(x, str, isNum);
                            x.s = str.charCodeAt(0) == 45 ? (str = str.slice(1), -1) : 1;
                          }
                          if ((e = str.indexOf(".")) > -1) str = str.replace(".", "");
                          if ((i = str.search(/e/i)) > 0) {
                            if (e < 0) e = i;
                            e += +str.slice(i + 1);
                            str = str.substring(0, i);
                          } else if (e < 0) {
                            e = str.length;
                          }
                        } else {
                          intCheck(b, 2, ALPHABET.length, "Base");
                          if (b == 10) {
                            x = new BigNumber2(v);
                            return round(x, DECIMAL_PLACES + x.e + 1, ROUNDING_MODE);
                          }
                          str = String(v);
                          if (isNum = typeof v == "number") {
                            if (v * 0 != 0) return parseNumeric(x, str, isNum, b);
                            x.s = 1 / v < 0 ? (str = str.slice(1), -1) : 1;
                            if (BigNumber2.DEBUG && str.replace(/^0\.0*|\./, "").length > 15) {
                              throw Error(tooManyDigits + v);
                            }
                          } else {
                            x.s = str.charCodeAt(0) === 45 ? (str = str.slice(1), -1) : 1;
                          }
                          alphabet = ALPHABET.slice(0, b);
                          e = i = 0;
                          for (len = str.length; i < len; i++) {
                            if (alphabet.indexOf(c = str.charAt(i)) < 0) {
                              if (c == ".") {
                                if (i > e) {
                                  e = len;
                                  continue;
                                }
                              } else if (!caseChanged) {
                                if (str == str.toUpperCase() && (str = str.toLowerCase()) || str == str.toLowerCase() && (str = str.toUpperCase())) {
                                  caseChanged = true;
                                  i = -1;
                                  e = 0;
                                  continue;
                                }
                              }
                              return parseNumeric(x, String(v), isNum, b);
                            }
                          }
                          isNum = false;
                          str = convertBase(str, b, 10, x.s);
                          if ((e = str.indexOf(".")) > -1) str = str.replace(".", "");
                          else e = str.length;
                        }
                        for (i = 0; str.charCodeAt(i) === 48; i++) ;
                        for (len = str.length; str.charCodeAt(--len) === 48; ) ;
                        if (str = str.slice(i, ++len)) {
                          len -= i;
                          if (isNum && BigNumber2.DEBUG && len > 15 && (v > MAX_SAFE_INTEGER || v !== mathfloor(v))) {
                            throw Error(tooManyDigits + x.s * v);
                          }
                          if ((e = e - i - 1) > MAX_EXP) {
                            x.c = x.e = null;
                          } else if (e < MIN_EXP) {
                            x.c = [x.e = 0];
                          } else {
                            x.e = e;
                            x.c = [];
                            i = (e + 1) % LOG_BASE;
                            if (e < 0) i += LOG_BASE;
                            if (i < len) {
                              if (i) x.c.push(+str.slice(0, i));
                              for (len -= LOG_BASE; i < len; ) {
                                x.c.push(+str.slice(i, i += LOG_BASE));
                              }
                              i = LOG_BASE - (str = str.slice(i)).length;
                            } else {
                              i -= len;
                            }
                            for (; i--; str += "0") ;
                            x.c.push(+str);
                          }
                        } else {
                          x.c = [x.e = 0];
                        }
                      }
                      BigNumber2.clone = clone;
                      BigNumber2.ROUND_UP = 0;
                      BigNumber2.ROUND_DOWN = 1;
                      BigNumber2.ROUND_CEIL = 2;
                      BigNumber2.ROUND_FLOOR = 3;
                      BigNumber2.ROUND_HALF_UP = 4;
                      BigNumber2.ROUND_HALF_DOWN = 5;
                      BigNumber2.ROUND_HALF_EVEN = 6;
                      BigNumber2.ROUND_HALF_CEIL = 7;
                      BigNumber2.ROUND_HALF_FLOOR = 8;
                      BigNumber2.EUCLID = 9;
                      BigNumber2.config = BigNumber2.set = function(obj) {
                        var p, v;
                        if (obj != null) {
                          if (typeof obj == "object") {
                            if (obj.hasOwnProperty(p = "DECIMAL_PLACES")) {
                              v = obj[p];
                              intCheck(v, 0, MAX, p);
                              DECIMAL_PLACES = v;
                            }
                            if (obj.hasOwnProperty(p = "ROUNDING_MODE")) {
                              v = obj[p];
                              intCheck(v, 0, 8, p);
                              ROUNDING_MODE = v;
                            }
                            if (obj.hasOwnProperty(p = "EXPONENTIAL_AT")) {
                              v = obj[p];
                              if (v && v.pop) {
                                intCheck(v[0], -MAX, 0, p);
                                intCheck(v[1], 0, MAX, p);
                                TO_EXP_NEG = v[0];
                                TO_EXP_POS = v[1];
                              } else {
                                intCheck(v, -MAX, MAX, p);
                                TO_EXP_NEG = -(TO_EXP_POS = v < 0 ? -v : v);
                              }
                            }
                            if (obj.hasOwnProperty(p = "RANGE")) {
                              v = obj[p];
                              if (v && v.pop) {
                                intCheck(v[0], -MAX, -1, p);
                                intCheck(v[1], 1, MAX, p);
                                MIN_EXP = v[0];
                                MAX_EXP = v[1];
                              } else {
                                intCheck(v, -MAX, MAX, p);
                                if (v) {
                                  MIN_EXP = -(MAX_EXP = v < 0 ? -v : v);
                                } else {
                                  throw Error(bignumberError + p + " cannot be zero: " + v);
                                }
                              }
                            }
                            if (obj.hasOwnProperty(p = "CRYPTO")) {
                              v = obj[p];
                              if (v === !!v) {
                                if (v) {
                                  if (typeof crypto != "undefined" && crypto && (crypto.getRandomValues || crypto.randomBytes)) {
                                    CRYPTO = v;
                                  } else {
                                    CRYPTO = !v;
                                    throw Error(bignumberError + "crypto unavailable");
                                  }
                                } else {
                                  CRYPTO = v;
                                }
                              } else {
                                throw Error(bignumberError + p + " not true or false: " + v);
                              }
                            }
                            if (obj.hasOwnProperty(p = "MODULO_MODE")) {
                              v = obj[p];
                              intCheck(v, 0, 9, p);
                              MODULO_MODE = v;
                            }
                            if (obj.hasOwnProperty(p = "POW_PRECISION")) {
                              v = obj[p];
                              intCheck(v, 0, MAX, p);
                              POW_PRECISION = v;
                            }
                            if (obj.hasOwnProperty(p = "FORMAT")) {
                              v = obj[p];
                              if (typeof v == "object") FORMAT = v;
                              else throw Error(bignumberError + p + " not an object: " + v);
                            }
                            if (obj.hasOwnProperty(p = "ALPHABET")) {
                              v = obj[p];
                              if (typeof v == "string" && !/^.?$|[+\-.\s]|(.).*\1/.test(v)) {
                                ALPHABET = v;
                              } else {
                                throw Error(bignumberError + p + " invalid: " + v);
                              }
                            }
                          } else {
                            throw Error(bignumberError + "Object expected: " + obj);
                          }
                        }
                        return {
                          DECIMAL_PLACES,
                          ROUNDING_MODE,
                          EXPONENTIAL_AT: [TO_EXP_NEG, TO_EXP_POS],
                          RANGE: [MIN_EXP, MAX_EXP],
                          CRYPTO,
                          MODULO_MODE,
                          POW_PRECISION,
                          FORMAT,
                          ALPHABET
                        };
                      };
                      BigNumber2.isBigNumber = function(v) {
                        if (!v || v._isBigNumber !== true) return false;
                        if (!BigNumber2.DEBUG) return true;
                        var i, n, c = v.c, e = v.e, s = v.s;
                        out: if ({}.toString.call(c) == "[object Array]") {
                          if ((s === 1 || s === -1) && e >= -MAX && e <= MAX && e === mathfloor(e)) {
                            if (c[0] === 0) {
                              if (e === 0 && c.length === 1) return true;
                              break out;
                            }
                            i = (e + 1) % LOG_BASE;
                            if (i < 1) i += LOG_BASE;
                            if (String(c[0]).length == i) {
                              for (i = 0; i < c.length; i++) {
                                n = c[i];
                                if (n < 0 || n >= BASE || n !== mathfloor(n)) break out;
                              }
                              if (n !== 0) return true;
                            }
                          }
                        } else if (c === null && e === null && (s === null || s === 1 || s === -1)) {
                          return true;
                        }
                        throw Error(bignumberError + "Invalid BigNumber: " + v);
                      };
                      BigNumber2.maximum = BigNumber2.max = function() {
                        return maxOrMin(arguments, P.lt);
                      };
                      BigNumber2.minimum = BigNumber2.min = function() {
                        return maxOrMin(arguments, P.gt);
                      };
                      BigNumber2.random = (function() {
                        var pow2_53 = 9007199254740992;
                        var random53bitInt = Math.random() * pow2_53 & 2097151 ? function() {
                          return mathfloor(Math.random() * pow2_53);
                        } : function() {
                          return (Math.random() * 1073741824 | 0) * 8388608 + (Math.random() * 8388608 | 0);
                        };
                        return function(dp) {
                          var a, b, e, k, v, i = 0, c = [], rand = new BigNumber2(ONE);
                          if (dp == null) dp = DECIMAL_PLACES;
                          else intCheck(dp, 0, MAX);
                          k = mathceil(dp / LOG_BASE);
                          if (CRYPTO) {
                            if (crypto.getRandomValues) {
                              a = crypto.getRandomValues(new Uint32Array(k *= 2));
                              for (; i < k; ) {
                                v = a[i] * 131072 + (a[i + 1] >>> 11);
                                if (v >= 9e15) {
                                  b = crypto.getRandomValues(new Uint32Array(2));
                                  a[i] = b[0];
                                  a[i + 1] = b[1];
                                } else {
                                  c.push(v % 1e14);
                                  i += 2;
                                }
                              }
                              i = k / 2;
                            } else if (crypto.randomBytes) {
                              a = crypto.randomBytes(k *= 7);
                              for (; i < k; ) {
                                v = (a[i] & 31) * 281474976710656 + a[i + 1] * 1099511627776 + a[i + 2] * 4294967296 + a[i + 3] * 16777216 + (a[i + 4] << 16) + (a[i + 5] << 8) + a[i + 6];
                                if (v >= 9e15) {
                                  crypto.randomBytes(7).copy(a, i);
                                } else {
                                  c.push(v % 1e14);
                                  i += 7;
                                }
                              }
                              i = k / 7;
                            } else {
                              CRYPTO = false;
                              throw Error(bignumberError + "crypto unavailable");
                            }
                          }
                          if (!CRYPTO) {
                            for (; i < k; ) {
                              v = random53bitInt();
                              if (v < 9e15) c[i++] = v % 1e14;
                            }
                          }
                          k = c[--i];
                          dp %= LOG_BASE;
                          if (k && dp) {
                            v = POWS_TEN[LOG_BASE - dp];
                            c[i] = mathfloor(k / v) * v;
                          }
                          for (; c[i] === 0; c.pop(), i--) ;
                          if (i < 0) {
                            c = [e = 0];
                          } else {
                            for (e = -1; c[0] === 0; c.splice(0, 1), e -= LOG_BASE) ;
                            for (i = 1, v = c[0]; v >= 10; v /= 10, i++) ;
                            if (i < LOG_BASE) e -= LOG_BASE - i;
                          }
                          rand.e = e;
                          rand.c = c;
                          return rand;
                        };
                      })();
                      BigNumber2.sum = function() {
                        var i = 1, args = arguments, sum = new BigNumber2(args[0]);
                        for (; i < args.length; ) sum = sum.plus(args[i++]);
                        return sum;
                      };
                      convertBase = /* @__PURE__ */ (function() {
                        var decimal = "0123456789";
                        function toBaseOut(str, baseIn, baseOut, alphabet) {
                          var j, arr = [0], arrL, i = 0, len = str.length;
                          for (; i < len; ) {
                            for (arrL = arr.length; arrL--; arr[arrL] *= baseIn) ;
                            arr[0] += alphabet.indexOf(str.charAt(i++));
                            for (j = 0; j < arr.length; j++) {
                              if (arr[j] > baseOut - 1) {
                                if (arr[j + 1] == null) arr[j + 1] = 0;
                                arr[j + 1] += arr[j] / baseOut | 0;
                                arr[j] %= baseOut;
                              }
                            }
                          }
                          return arr.reverse();
                        }
                        return function(str, baseIn, baseOut, sign, callerIsToString) {
                          var alphabet, d, e, k, r, x, xc, y, i = str.indexOf("."), dp = DECIMAL_PLACES, rm = ROUNDING_MODE;
                          if (i >= 0) {
                            k = POW_PRECISION;
                            POW_PRECISION = 0;
                            str = str.replace(".", "");
                            y = new BigNumber2(baseIn);
                            x = y.pow(str.length - i);
                            POW_PRECISION = k;
                            y.c = toBaseOut(
                              toFixedPoint(coeffToString(x.c), x.e, "0"),
                              10,
                              baseOut,
                              decimal
                            );
                            y.e = y.c.length;
                          }
                          xc = toBaseOut(str, baseIn, baseOut, callerIsToString ? (alphabet = ALPHABET, decimal) : (alphabet = decimal, ALPHABET));
                          e = k = xc.length;
                          for (; xc[--k] == 0; xc.pop()) ;
                          if (!xc[0]) return alphabet.charAt(0);
                          if (i < 0) {
                            --e;
                          } else {
                            x.c = xc;
                            x.e = e;
                            x.s = sign;
                            x = div(x, y, dp, rm, baseOut);
                            xc = x.c;
                            r = x.r;
                            e = x.e;
                          }
                          d = e + dp + 1;
                          i = xc[d];
                          k = baseOut / 2;
                          r = r || d < 0 || xc[d + 1] != null;
                          r = rm < 4 ? (i != null || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2)) : i > k || i == k && (rm == 4 || r || rm == 6 && xc[d - 1] & 1 || rm == (x.s < 0 ? 8 : 7));
                          if (d < 1 || !xc[0]) {
                            str = r ? toFixedPoint(alphabet.charAt(1), -dp, alphabet.charAt(0)) : alphabet.charAt(0);
                          } else {
                            xc.length = d;
                            if (r) {
                              for (--baseOut; ++xc[--d] > baseOut; ) {
                                xc[d] = 0;
                                if (!d) {
                                  ++e;
                                  xc = [1].concat(xc);
                                }
                              }
                            }
                            for (k = xc.length; !xc[--k]; ) ;
                            for (i = 0, str = ""; i <= k; str += alphabet.charAt(xc[i++])) ;
                            str = toFixedPoint(str, e, alphabet.charAt(0));
                          }
                          return str;
                        };
                      })();
                      div = /* @__PURE__ */ (function() {
                        function multiply(x, k, base) {
                          var m, temp, xlo, xhi, carry = 0, i = x.length, klo = k % SQRT_BASE, khi = k / SQRT_BASE | 0;
                          for (x = x.slice(); i--; ) {
                            xlo = x[i] % SQRT_BASE;
                            xhi = x[i] / SQRT_BASE | 0;
                            m = khi * xlo + xhi * klo;
                            temp = klo * xlo + m % SQRT_BASE * SQRT_BASE + carry;
                            carry = (temp / base | 0) + (m / SQRT_BASE | 0) + khi * xhi;
                            x[i] = temp % base;
                          }
                          if (carry) x = [carry].concat(x);
                          return x;
                        }
                        function compare2(a, b, aL, bL) {
                          var i, cmp;
                          if (aL != bL) {
                            cmp = aL > bL ? 1 : -1;
                          } else {
                            for (i = cmp = 0; i < aL; i++) {
                              if (a[i] != b[i]) {
                                cmp = a[i] > b[i] ? 1 : -1;
                                break;
                              }
                            }
                          }
                          return cmp;
                        }
                        function subtract(a, b, aL, base) {
                          var i = 0;
                          for (; aL--; ) {
                            a[aL] -= i;
                            i = a[aL] < b[aL] ? 1 : 0;
                            a[aL] = i * base + a[aL] - b[aL];
                          }
                          for (; !a[0] && a.length > 1; a.splice(0, 1)) ;
                        }
                        return function(x, y, dp, rm, base) {
                          var cmp, e, i, more, n, prod, prodL, q, qc, rem, remL, rem0, xi, xL, yc0, yL, yz, s = x.s == y.s ? 1 : -1, xc = x.c, yc = y.c;
                          if (!xc || !xc[0] || !yc || !yc[0]) {
                            return new BigNumber2(
                              // Return NaN if either NaN, or both Infinity or 0.
                              !x.s || !y.s || (xc ? yc && xc[0] == yc[0] : !yc) ? NaN : (
                                // Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.
                                xc && xc[0] == 0 || !yc ? s * 0 : s / 0
                              )
                            );
                          }
                          q = new BigNumber2(s);
                          qc = q.c = [];
                          e = x.e - y.e;
                          s = dp + e + 1;
                          if (!base) {
                            base = BASE;
                            e = bitFloor(x.e / LOG_BASE) - bitFloor(y.e / LOG_BASE);
                            s = s / LOG_BASE | 0;
                          }
                          for (i = 0; yc[i] == (xc[i] || 0); i++) ;
                          if (yc[i] > (xc[i] || 0)) e--;
                          if (s < 0) {
                            qc.push(1);
                            more = true;
                          } else {
                            xL = xc.length;
                            yL = yc.length;
                            i = 0;
                            s += 2;
                            n = mathfloor(base / (yc[0] + 1));
                            if (n > 1) {
                              yc = multiply(yc, n, base);
                              xc = multiply(xc, n, base);
                              yL = yc.length;
                              xL = xc.length;
                            }
                            xi = yL;
                            rem = xc.slice(0, yL);
                            remL = rem.length;
                            for (; remL < yL; rem[remL++] = 0) ;
                            yz = yc.slice();
                            yz = [0].concat(yz);
                            yc0 = yc[0];
                            if (yc[1] >= base / 2) yc0++;
                            do {
                              n = 0;
                              cmp = compare2(yc, rem, yL, remL);
                              if (cmp < 0) {
                                rem0 = rem[0];
                                if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);
                                n = mathfloor(rem0 / yc0);
                                if (n > 1) {
                                  if (n >= base) n = base - 1;
                                  prod = multiply(yc, n, base);
                                  prodL = prod.length;
                                  remL = rem.length;
                                  while (compare2(prod, rem, prodL, remL) == 1) {
                                    n--;
                                    subtract(prod, yL < prodL ? yz : yc, prodL, base);
                                    prodL = prod.length;
                                    cmp = 1;
                                  }
                                } else {
                                  if (n == 0) {
                                    cmp = n = 1;
                                  }
                                  prod = yc.slice();
                                  prodL = prod.length;
                                }
                                if (prodL < remL) prod = [0].concat(prod);
                                subtract(rem, prod, remL, base);
                                remL = rem.length;
                                if (cmp == -1) {
                                  while (compare2(yc, rem, yL, remL) < 1) {
                                    n++;
                                    subtract(rem, yL < remL ? yz : yc, remL, base);
                                    remL = rem.length;
                                  }
                                }
                              } else if (cmp === 0) {
                                n++;
                                rem = [0];
                              }
                              qc[i++] = n;
                              if (rem[0]) {
                                rem[remL++] = xc[xi] || 0;
                              } else {
                                rem = [xc[xi]];
                                remL = 1;
                              }
                            } while ((xi++ < xL || rem[0] != null) && s--);
                            more = rem[0] != null;
                            if (!qc[0]) qc.splice(0, 1);
                          }
                          if (base == BASE) {
                            for (i = 1, s = qc[0]; s >= 10; s /= 10, i++) ;
                            round(q, dp + (q.e = i + e * LOG_BASE - 1) + 1, rm, more);
                          } else {
                            q.e = e;
                            q.r = +more;
                          }
                          return q;
                        };
                      })();
                      function format(n, i, rm, id) {
                        var c0, e, ne, len, str;
                        if (rm == null) rm = ROUNDING_MODE;
                        else intCheck(rm, 0, 8);
                        if (!n.c) return n.toString();
                        c0 = n.c[0];
                        ne = n.e;
                        if (i == null) {
                          str = coeffToString(n.c);
                          str = id == 1 || id == 2 && (ne <= TO_EXP_NEG || ne >= TO_EXP_POS) ? toExponential(str, ne) : toFixedPoint(str, ne, "0");
                        } else {
                          n = round(new BigNumber2(n), i, rm);
                          e = n.e;
                          str = coeffToString(n.c);
                          len = str.length;
                          if (id == 1 || id == 2 && (i <= e || e <= TO_EXP_NEG)) {
                            for (; len < i; str += "0", len++) ;
                            str = toExponential(str, e);
                          } else {
                            i -= ne;
                            str = toFixedPoint(str, e, "0");
                            if (e + 1 > len) {
                              if (--i > 0) for (str += "."; i--; str += "0") ;
                            } else {
                              i += e - len;
                              if (i > 0) {
                                if (e + 1 == len) str += ".";
                                for (; i--; str += "0") ;
                              }
                            }
                          }
                        }
                        return n.s < 0 && c0 ? "-" + str : str;
                      }
                      function maxOrMin(args, method) {
                        var n, i = 1, m = new BigNumber2(args[0]);
                        for (; i < args.length; i++) {
                          n = new BigNumber2(args[i]);
                          if (!n.s) {
                            m = n;
                            break;
                          } else if (method.call(m, n)) {
                            m = n;
                          }
                        }
                        return m;
                      }
                      function normalise(n, c, e) {
                        var i = 1, j = c.length;
                        for (; !c[--j]; c.pop()) ;
                        for (j = c[0]; j >= 10; j /= 10, i++) ;
                        if ((e = i + e * LOG_BASE - 1) > MAX_EXP) {
                          n.c = n.e = null;
                        } else if (e < MIN_EXP) {
                          n.c = [n.e = 0];
                        } else {
                          n.e = e;
                          n.c = c;
                        }
                        return n;
                      }
                      parseNumeric = /* @__PURE__ */ (function() {
                        var basePrefix = /^(-?)0([xbo])(?=\w[\w.]*$)/i, dotAfter = /^([^.]+)\.$/, dotBefore = /^\.([^.]+)$/, isInfinityOrNaN = /^-?(Infinity|NaN)$/, whitespaceOrPlus = /^\s*\+(?=[\w.])|^\s+|\s+$/g;
                        return function(x, str, isNum, b) {
                          var base, s = isNum ? str : str.replace(whitespaceOrPlus, "");
                          if (isInfinityOrNaN.test(s)) {
                            x.s = isNaN(s) ? null : s < 0 ? -1 : 1;
                          } else {
                            if (!isNum) {
                              s = s.replace(basePrefix, function(m, p1, p2) {
                                base = (p2 = p2.toLowerCase()) == "x" ? 16 : p2 == "b" ? 2 : 8;
                                return !b || b == base ? p1 : m;
                              });
                              if (b) {
                                base = b;
                                s = s.replace(dotAfter, "$1").replace(dotBefore, "0.$1");
                              }
                              if (str != s) return new BigNumber2(s, base);
                            }
                            if (BigNumber2.DEBUG) {
                              throw Error(bignumberError + "Not a" + (b ? " base " + b : "") + " number: " + str);
                            }
                            x.s = null;
                          }
                          x.c = x.e = null;
                        };
                      })();
                      function round(x, sd, rm, r) {
                        var d, i, j, k, n, ni, rd, xc = x.c, pows10 = POWS_TEN;
                        if (xc) {
                          out: {
                            for (d = 1, k = xc[0]; k >= 10; k /= 10, d++) ;
                            i = sd - d;
                            if (i < 0) {
                              i += LOG_BASE;
                              j = sd;
                              n = xc[ni = 0];
                              rd = n / pows10[d - j - 1] % 10 | 0;
                            } else {
                              ni = mathceil((i + 1) / LOG_BASE);
                              if (ni >= xc.length) {
                                if (r) {
                                  for (; xc.length <= ni; xc.push(0)) ;
                                  n = rd = 0;
                                  d = 1;
                                  i %= LOG_BASE;
                                  j = i - LOG_BASE + 1;
                                } else {
                                  break out;
                                }
                              } else {
                                n = k = xc[ni];
                                for (d = 1; k >= 10; k /= 10, d++) ;
                                i %= LOG_BASE;
                                j = i - LOG_BASE + d;
                                rd = j < 0 ? 0 : n / pows10[d - j - 1] % 10 | 0;
                              }
                            }
                            r = r || sd < 0 || // Are there any non-zero digits after the rounding digit?
                            // The expression  n % pows10[d - j - 1]  returns all digits of n to the right
                            // of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.
                            xc[ni + 1] != null || (j < 0 ? n : n % pows10[d - j - 1]);
                            r = rm < 4 ? (rd || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2)) : rd > 5 || rd == 5 && (rm == 4 || r || rm == 6 && // Check whether the digit to the left of the rounding digit is odd.
                            (i > 0 ? j > 0 ? n / pows10[d - j] : 0 : xc[ni - 1]) % 10 & 1 || rm == (x.s < 0 ? 8 : 7));
                            if (sd < 1 || !xc[0]) {
                              xc.length = 0;
                              if (r) {
                                sd -= x.e + 1;
                                xc[0] = pows10[(LOG_BASE - sd % LOG_BASE) % LOG_BASE];
                                x.e = -sd || 0;
                              } else {
                                xc[0] = x.e = 0;
                              }
                              return x;
                            }
                            if (i == 0) {
                              xc.length = ni;
                              k = 1;
                              ni--;
                            } else {
                              xc.length = ni + 1;
                              k = pows10[LOG_BASE - i];
                              xc[ni] = j > 0 ? mathfloor(n / pows10[d - j] % pows10[j]) * k : 0;
                            }
                            if (r) {
                              for (; ; ) {
                                if (ni == 0) {
                                  for (i = 1, j = xc[0]; j >= 10; j /= 10, i++) ;
                                  j = xc[0] += k;
                                  for (k = 1; j >= 10; j /= 10, k++) ;
                                  if (i != k) {
                                    x.e++;
                                    if (xc[0] == BASE) xc[0] = 1;
                                  }
                                  break;
                                } else {
                                  xc[ni] += k;
                                  if (xc[ni] != BASE) break;
                                  xc[ni--] = 0;
                                  k = 1;
                                }
                              }
                            }
                            for (i = xc.length; xc[--i] === 0; xc.pop()) ;
                          }
                          if (x.e > MAX_EXP) {
                            x.c = x.e = null;
                          } else if (x.e < MIN_EXP) {
                            x.c = [x.e = 0];
                          }
                        }
                        return x;
                      }
                      function valueOf(n) {
                        var str, e = n.e;
                        if (e === null) return n.toString();
                        str = coeffToString(n.c);
                        str = e <= TO_EXP_NEG || e >= TO_EXP_POS ? toExponential(str, e) : toFixedPoint(str, e, "0");
                        return n.s < 0 ? "-" + str : str;
                      }
                      P.absoluteValue = P.abs = function() {
                        var x = new BigNumber2(this);
                        if (x.s < 0) x.s = 1;
                        return x;
                      };
                      P.comparedTo = function(y, b) {
                        return compare(this, new BigNumber2(y, b));
                      };
                      P.decimalPlaces = P.dp = function(dp, rm) {
                        var c, n, v, x = this;
                        if (dp != null) {
                          intCheck(dp, 0, MAX);
                          if (rm == null) rm = ROUNDING_MODE;
                          else intCheck(rm, 0, 8);
                          return round(new BigNumber2(x), dp + x.e + 1, rm);
                        }
                        if (!(c = x.c)) return null;
                        n = ((v = c.length - 1) - bitFloor(this.e / LOG_BASE)) * LOG_BASE;
                        if (v = c[v]) for (; v % 10 == 0; v /= 10, n--) ;
                        if (n < 0) n = 0;
                        return n;
                      };
                      P.dividedBy = P.div = function(y, b) {
                        return div(this, new BigNumber2(y, b), DECIMAL_PLACES, ROUNDING_MODE);
                      };
                      P.dividedToIntegerBy = P.idiv = function(y, b) {
                        return div(this, new BigNumber2(y, b), 0, 1);
                      };
                      P.exponentiatedBy = P.pow = function(n, m) {
                        var half, isModExp, i, k, more, nIsBig, nIsNeg, nIsOdd, y, x = this;
                        n = new BigNumber2(n);
                        if (n.c && !n.isInteger()) {
                          throw Error(bignumberError + "Exponent not an integer: " + valueOf(n));
                        }
                        if (m != null) m = new BigNumber2(m);
                        nIsBig = n.e > 14;
                        if (!x.c || !x.c[0] || x.c[0] == 1 && !x.e && x.c.length == 1 || !n.c || !n.c[0]) {
                          y = new BigNumber2(Math.pow(+valueOf(x), nIsBig ? 2 - isOdd(n) : +valueOf(n)));
                          return m ? y.mod(m) : y;
                        }
                        nIsNeg = n.s < 0;
                        if (m) {
                          if (m.c ? !m.c[0] : !m.s) return new BigNumber2(NaN);
                          isModExp = !nIsNeg && x.isInteger() && m.isInteger();
                          if (isModExp) x = x.mod(m);
                        } else if (n.e > 9 && (x.e > 0 || x.e < -1 || (x.e == 0 ? x.c[0] > 1 || nIsBig && x.c[1] >= 24e7 : x.c[0] < 8e13 || nIsBig && x.c[0] <= 9999975e7))) {
                          k = x.s < 0 && isOdd(n) ? -0 : 0;
                          if (x.e > -1) k = 1 / k;
                          return new BigNumber2(nIsNeg ? 1 / k : k);
                        } else if (POW_PRECISION) {
                          k = mathceil(POW_PRECISION / LOG_BASE + 2);
                        }
                        if (nIsBig) {
                          half = new BigNumber2(0.5);
                          if (nIsNeg) n.s = 1;
                          nIsOdd = isOdd(n);
                        } else {
                          i = Math.abs(+valueOf(n));
                          nIsOdd = i % 2;
                        }
                        y = new BigNumber2(ONE);
                        for (; ; ) {
                          if (nIsOdd) {
                            y = y.times(x);
                            if (!y.c) break;
                            if (k) {
                              if (y.c.length > k) y.c.length = k;
                            } else if (isModExp) {
                              y = y.mod(m);
                            }
                          }
                          if (i) {
                            i = mathfloor(i / 2);
                            if (i === 0) break;
                            nIsOdd = i % 2;
                          } else {
                            n = n.times(half);
                            round(n, n.e + 1, 1);
                            if (n.e > 14) {
                              nIsOdd = isOdd(n);
                            } else {
                              i = +valueOf(n);
                              if (i === 0) break;
                              nIsOdd = i % 2;
                            }
                          }
                          x = x.times(x);
                          if (k) {
                            if (x.c && x.c.length > k) x.c.length = k;
                          } else if (isModExp) {
                            x = x.mod(m);
                          }
                        }
                        if (isModExp) return y;
                        if (nIsNeg) y = ONE.div(y);
                        return m ? y.mod(m) : k ? round(y, POW_PRECISION, ROUNDING_MODE, more) : y;
                      };
                      P.integerValue = function(rm) {
                        var n = new BigNumber2(this);
                        if (rm == null) rm = ROUNDING_MODE;
                        else intCheck(rm, 0, 8);
                        return round(n, n.e + 1, rm);
                      };
                      P.isEqualTo = P.eq = function(y, b) {
                        return compare(this, new BigNumber2(y, b)) === 0;
                      };
                      P.isFinite = function() {
                        return !!this.c;
                      };
                      P.isGreaterThan = P.gt = function(y, b) {
                        return compare(this, new BigNumber2(y, b)) > 0;
                      };
                      P.isGreaterThanOrEqualTo = P.gte = function(y, b) {
                        return (b = compare(this, new BigNumber2(y, b))) === 1 || b === 0;
                      };
                      P.isInteger = function() {
                        return !!this.c && bitFloor(this.e / LOG_BASE) > this.c.length - 2;
                      };
                      P.isLessThan = P.lt = function(y, b) {
                        return compare(this, new BigNumber2(y, b)) < 0;
                      };
                      P.isLessThanOrEqualTo = P.lte = function(y, b) {
                        return (b = compare(this, new BigNumber2(y, b))) === -1 || b === 0;
                      };
                      P.isNaN = function() {
                        return !this.s;
                      };
                      P.isNegative = function() {
                        return this.s < 0;
                      };
                      P.isPositive = function() {
                        return this.s > 0;
                      };
                      P.isZero = function() {
                        return !!this.c && this.c[0] == 0;
                      };
                      P.minus = function(y, b) {
                        var i, j, t2, xLTy, x = this, a = x.s;
                        y = new BigNumber2(y, b);
                        b = y.s;
                        if (!a || !b) return new BigNumber2(NaN);
                        if (a != b) {
                          y.s = -b;
                          return x.plus(y);
                        }
                        var xe = x.e / LOG_BASE, ye = y.e / LOG_BASE, xc = x.c, yc = y.c;
                        if (!xe || !ye) {
                          if (!xc || !yc) return xc ? (y.s = -b, y) : new BigNumber2(yc ? x : NaN);
                          if (!xc[0] || !yc[0]) {
                            return yc[0] ? (y.s = -b, y) : new BigNumber2(xc[0] ? x : (
                              // IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity
                              ROUNDING_MODE == 3 ? -0 : 0
                            ));
                          }
                        }
                        xe = bitFloor(xe);
                        ye = bitFloor(ye);
                        xc = xc.slice();
                        if (a = xe - ye) {
                          if (xLTy = a < 0) {
                            a = -a;
                            t2 = xc;
                          } else {
                            ye = xe;
                            t2 = yc;
                          }
                          t2.reverse();
                          for (b = a; b--; t2.push(0)) ;
                          t2.reverse();
                        } else {
                          j = (xLTy = (a = xc.length) < (b = yc.length)) ? a : b;
                          for (a = b = 0; b < j; b++) {
                            if (xc[b] != yc[b]) {
                              xLTy = xc[b] < yc[b];
                              break;
                            }
                          }
                        }
                        if (xLTy) t2 = xc, xc = yc, yc = t2, y.s = -y.s;
                        b = (j = yc.length) - (i = xc.length);
                        if (b > 0) for (; b--; xc[i++] = 0) ;
                        b = BASE - 1;
                        for (; j > a; ) {
                          if (xc[--j] < yc[j]) {
                            for (i = j; i && !xc[--i]; xc[i] = b) ;
                            --xc[i];
                            xc[j] += BASE;
                          }
                          xc[j] -= yc[j];
                        }
                        for (; xc[0] == 0; xc.splice(0, 1), --ye) ;
                        if (!xc[0]) {
                          y.s = ROUNDING_MODE == 3 ? -1 : 1;
                          y.c = [y.e = 0];
                          return y;
                        }
                        return normalise(y, xc, ye);
                      };
                      P.modulo = P.mod = function(y, b) {
                        var q, s, x = this;
                        y = new BigNumber2(y, b);
                        if (!x.c || !y.s || y.c && !y.c[0]) {
                          return new BigNumber2(NaN);
                        } else if (!y.c || x.c && !x.c[0]) {
                          return new BigNumber2(x);
                        }
                        if (MODULO_MODE == 9) {
                          s = y.s;
                          y.s = 1;
                          q = div(x, y, 0, 3);
                          y.s = s;
                          q.s *= s;
                        } else {
                          q = div(x, y, 0, MODULO_MODE);
                        }
                        y = x.minus(q.times(y));
                        if (!y.c[0] && MODULO_MODE == 1) y.s = x.s;
                        return y;
                      };
                      P.multipliedBy = P.times = function(y, b) {
                        var c, e, i, j, k, m, xcL, xlo, xhi, ycL, ylo, yhi, zc, base, sqrtBase, x = this, xc = x.c, yc = (y = new BigNumber2(y, b)).c;
                        if (!xc || !yc || !xc[0] || !yc[0]) {
                          if (!x.s || !y.s || xc && !xc[0] && !yc || yc && !yc[0] && !xc) {
                            y.c = y.e = y.s = null;
                          } else {
                            y.s *= x.s;
                            if (!xc || !yc) {
                              y.c = y.e = null;
                            } else {
                              y.c = [0];
                              y.e = 0;
                            }
                          }
                          return y;
                        }
                        e = bitFloor(x.e / LOG_BASE) + bitFloor(y.e / LOG_BASE);
                        y.s *= x.s;
                        xcL = xc.length;
                        ycL = yc.length;
                        if (xcL < ycL) zc = xc, xc = yc, yc = zc, i = xcL, xcL = ycL, ycL = i;
                        for (i = xcL + ycL, zc = []; i--; zc.push(0)) ;
                        base = BASE;
                        sqrtBase = SQRT_BASE;
                        for (i = ycL; --i >= 0; ) {
                          c = 0;
                          ylo = yc[i] % sqrtBase;
                          yhi = yc[i] / sqrtBase | 0;
                          for (k = xcL, j = i + k; j > i; ) {
                            xlo = xc[--k] % sqrtBase;
                            xhi = xc[k] / sqrtBase | 0;
                            m = yhi * xlo + xhi * ylo;
                            xlo = ylo * xlo + m % sqrtBase * sqrtBase + zc[j] + c;
                            c = (xlo / base | 0) + (m / sqrtBase | 0) + yhi * xhi;
                            zc[j--] = xlo % base;
                          }
                          zc[j] = c;
                        }
                        if (c) {
                          ++e;
                        } else {
                          zc.splice(0, 1);
                        }
                        return normalise(y, zc, e);
                      };
                      P.negated = function() {
                        var x = new BigNumber2(this);
                        x.s = -x.s || null;
                        return x;
                      };
                      P.plus = function(y, b) {
                        var t2, x = this, a = x.s;
                        y = new BigNumber2(y, b);
                        b = y.s;
                        if (!a || !b) return new BigNumber2(NaN);
                        if (a != b) {
                          y.s = -b;
                          return x.minus(y);
                        }
                        var xe = x.e / LOG_BASE, ye = y.e / LOG_BASE, xc = x.c, yc = y.c;
                        if (!xe || !ye) {
                          if (!xc || !yc) return new BigNumber2(a / 0);
                          if (!xc[0] || !yc[0]) return yc[0] ? y : new BigNumber2(xc[0] ? x : a * 0);
                        }
                        xe = bitFloor(xe);
                        ye = bitFloor(ye);
                        xc = xc.slice();
                        if (a = xe - ye) {
                          if (a > 0) {
                            ye = xe;
                            t2 = yc;
                          } else {
                            a = -a;
                            t2 = xc;
                          }
                          t2.reverse();
                          for (; a--; t2.push(0)) ;
                          t2.reverse();
                        }
                        a = xc.length;
                        b = yc.length;
                        if (a - b < 0) t2 = yc, yc = xc, xc = t2, b = a;
                        for (a = 0; b; ) {
                          a = (xc[--b] = xc[b] + yc[b] + a) / BASE | 0;
                          xc[b] = BASE === xc[b] ? 0 : xc[b] % BASE;
                        }
                        if (a) {
                          xc = [a].concat(xc);
                          ++ye;
                        }
                        return normalise(y, xc, ye);
                      };
                      P.precision = P.sd = function(sd, rm) {
                        var c, n, v, x = this;
                        if (sd != null && sd !== !!sd) {
                          intCheck(sd, 1, MAX);
                          if (rm == null) rm = ROUNDING_MODE;
                          else intCheck(rm, 0, 8);
                          return round(new BigNumber2(x), sd, rm);
                        }
                        if (!(c = x.c)) return null;
                        v = c.length - 1;
                        n = v * LOG_BASE + 1;
                        if (v = c[v]) {
                          for (; v % 10 == 0; v /= 10, n--) ;
                          for (v = c[0]; v >= 10; v /= 10, n++) ;
                        }
                        if (sd && x.e + 1 > n) n = x.e + 1;
                        return n;
                      };
                      P.shiftedBy = function(k) {
                        intCheck(k, -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);
                        return this.times("1e" + k);
                      };
                      P.squareRoot = P.sqrt = function() {
                        var m, n, r, rep, t2, x = this, c = x.c, s = x.s, e = x.e, dp = DECIMAL_PLACES + 4, half = new BigNumber2("0.5");
                        if (s !== 1 || !c || !c[0]) {
                          return new BigNumber2(!s || s < 0 && (!c || c[0]) ? NaN : c ? x : 1 / 0);
                        }
                        s = Math.sqrt(+valueOf(x));
                        if (s == 0 || s == 1 / 0) {
                          n = coeffToString(c);
                          if ((n.length + e) % 2 == 0) n += "0";
                          s = Math.sqrt(+n);
                          e = bitFloor((e + 1) / 2) - (e < 0 || e % 2);
                          if (s == 1 / 0) {
                            n = "5e" + e;
                          } else {
                            n = s.toExponential();
                            n = n.slice(0, n.indexOf("e") + 1) + e;
                          }
                          r = new BigNumber2(n);
                        } else {
                          r = new BigNumber2(s + "");
                        }
                        if (r.c[0]) {
                          e = r.e;
                          s = e + dp;
                          if (s < 3) s = 0;
                          for (; ; ) {
                            t2 = r;
                            r = half.times(t2.plus(div(x, t2, dp, 1)));
                            if (coeffToString(t2.c).slice(0, s) === (n = coeffToString(r.c)).slice(0, s)) {
                              if (r.e < e) --s;
                              n = n.slice(s - 3, s + 1);
                              if (n == "9999" || !rep && n == "4999") {
                                if (!rep) {
                                  round(t2, t2.e + DECIMAL_PLACES + 2, 0);
                                  if (t2.times(t2).eq(x)) {
                                    r = t2;
                                    break;
                                  }
                                }
                                dp += 4;
                                s += 4;
                                rep = 1;
                              } else {
                                if (!+n || !+n.slice(1) && n.charAt(0) == "5") {
                                  round(r, r.e + DECIMAL_PLACES + 2, 1);
                                  m = !r.times(r).eq(x);
                                }
                                break;
                              }
                            }
                          }
                        }
                        return round(r, r.e + DECIMAL_PLACES + 1, ROUNDING_MODE, m);
                      };
                      P.toExponential = function(dp, rm) {
                        if (dp != null) {
                          intCheck(dp, 0, MAX);
                          dp++;
                        }
                        return format(this, dp, rm, 1);
                      };
                      P.toFixed = function(dp, rm) {
                        if (dp != null) {
                          intCheck(dp, 0, MAX);
                          dp = dp + this.e + 1;
                        }
                        return format(this, dp, rm);
                      };
                      P.toFormat = function(dp, rm, format2) {
                        var str, x = this;
                        if (format2 == null) {
                          if (dp != null && rm && typeof rm == "object") {
                            format2 = rm;
                            rm = null;
                          } else if (dp && typeof dp == "object") {
                            format2 = dp;
                            dp = rm = null;
                          } else {
                            format2 = FORMAT;
                          }
                        } else if (typeof format2 != "object") {
                          throw Error(bignumberError + "Argument not an object: " + format2);
                        }
                        str = x.toFixed(dp, rm);
                        if (x.c) {
                          var i, arr = str.split("."), g1 = +format2.groupSize, g2 = +format2.secondaryGroupSize, groupSeparator = format2.groupSeparator || "", intPart = arr[0], fractionPart = arr[1], isNeg = x.s < 0, intDigits = isNeg ? intPart.slice(1) : intPart, len = intDigits.length;
                          if (g2) i = g1, g1 = g2, g2 = i, len -= i;
                          if (g1 > 0 && len > 0) {
                            i = len % g1 || g1;
                            intPart = intDigits.substr(0, i);
                            for (; i < len; i += g1) intPart += groupSeparator + intDigits.substr(i, g1);
                            if (g2 > 0) intPart += groupSeparator + intDigits.slice(i);
                            if (isNeg) intPart = "-" + intPart;
                          }
                          str = fractionPart ? intPart + (format2.decimalSeparator || "") + ((g2 = +format2.fractionGroupSize) ? fractionPart.replace(
                            new RegExp("\\d{" + g2 + "}\\B", "g"),
                            "$&" + (format2.fractionGroupSeparator || "")
                          ) : fractionPart) : intPart;
                        }
                        return (format2.prefix || "") + str + (format2.suffix || "");
                      };
                      P.toFraction = function(md) {
                        var d, d0, d1, d2, e, exp, n, n0, n1, q, r, s, x = this, xc = x.c;
                        if (md != null) {
                          n = new BigNumber2(md);
                          if (!n.isInteger() && (n.c || n.s !== 1) || n.lt(ONE)) {
                            throw Error(bignumberError + "Argument " + (n.isInteger() ? "out of range: " : "not an integer: ") + valueOf(n));
                          }
                        }
                        if (!xc) return new BigNumber2(x);
                        d = new BigNumber2(ONE);
                        n1 = d0 = new BigNumber2(ONE);
                        d1 = n0 = new BigNumber2(ONE);
                        s = coeffToString(xc);
                        e = d.e = s.length - x.e - 1;
                        d.c[0] = POWS_TEN[(exp = e % LOG_BASE) < 0 ? LOG_BASE + exp : exp];
                        md = !md || n.comparedTo(d) > 0 ? e > 0 ? d : n1 : n;
                        exp = MAX_EXP;
                        MAX_EXP = 1 / 0;
                        n = new BigNumber2(s);
                        n0.c[0] = 0;
                        for (; ; ) {
                          q = div(n, d, 0, 1);
                          d2 = d0.plus(q.times(d1));
                          if (d2.comparedTo(md) == 1) break;
                          d0 = d1;
                          d1 = d2;
                          n1 = n0.plus(q.times(d2 = n1));
                          n0 = d2;
                          d = n.minus(q.times(d2 = d));
                          n = d2;
                        }
                        d2 = div(md.minus(d0), d1, 0, 1);
                        n0 = n0.plus(d2.times(n1));
                        d0 = d0.plus(d2.times(d1));
                        n0.s = n1.s = x.s;
                        e = e * 2;
                        r = div(n1, d1, e, ROUNDING_MODE).minus(x).abs().comparedTo(
                          div(n0, d0, e, ROUNDING_MODE).minus(x).abs()
                        ) < 1 ? [n1, d1] : [n0, d0];
                        MAX_EXP = exp;
                        return r;
                      };
                      P.toNumber = function() {
                        return +valueOf(this);
                      };
                      P.toPrecision = function(sd, rm) {
                        if (sd != null) intCheck(sd, 1, MAX);
                        return format(this, sd, rm, 2);
                      };
                      P.toString = function(b) {
                        var str, n = this, s = n.s, e = n.e;
                        if (e === null) {
                          if (s) {
                            str = "Infinity";
                            if (s < 0) str = "-" + str;
                          } else {
                            str = "NaN";
                          }
                        } else {
                          if (b == null) {
                            str = e <= TO_EXP_NEG || e >= TO_EXP_POS ? toExponential(coeffToString(n.c), e) : toFixedPoint(coeffToString(n.c), e, "0");
                          } else if (b === 10) {
                            n = round(new BigNumber2(n), DECIMAL_PLACES + e + 1, ROUNDING_MODE);
                            str = toFixedPoint(coeffToString(n.c), n.e, "0");
                          } else {
                            intCheck(b, 2, ALPHABET.length, "Base");
                            str = convertBase(toFixedPoint(coeffToString(n.c), e, "0"), 10, b, s, true);
                          }
                          if (s < 0 && n.c[0]) str = "-" + str;
                        }
                        return str;
                      };
                      P.valueOf = P.toJSON = function() {
                        return valueOf(this);
                      };
                      P._isBigNumber = true;
                      if (configObject != null) BigNumber2.set(configObject);
                      return BigNumber2;
                    }
                    function bitFloor(n) {
                      var i = n | 0;
                      return n > 0 || n === i ? i : i - 1;
                    }
                    function coeffToString(a) {
                      var s, z, i = 1, j = a.length, r = a[0] + "";
                      for (; i < j; ) {
                        s = a[i++] + "";
                        z = LOG_BASE - s.length;
                        for (; z--; s = "0" + s) ;
                        r += s;
                      }
                      for (j = r.length; r.charCodeAt(--j) === 48; ) ;
                      return r.slice(0, j + 1 || 1);
                    }
                    function compare(x, y) {
                      var a, b, xc = x.c, yc = y.c, i = x.s, j = y.s, k = x.e, l = y.e;
                      if (!i || !j) return null;
                      a = xc && !xc[0];
                      b = yc && !yc[0];
                      if (a || b) return a ? b ? 0 : -j : i;
                      if (i != j) return i;
                      a = i < 0;
                      b = k == l;
                      if (!xc || !yc) return b ? 0 : !xc ^ a ? 1 : -1;
                      if (!b) return k > l ^ a ? 1 : -1;
                      j = (k = xc.length) < (l = yc.length) ? k : l;
                      for (i = 0; i < j; i++) if (xc[i] != yc[i]) return xc[i] > yc[i] ^ a ? 1 : -1;
                      return k == l ? 0 : k > l ^ a ? 1 : -1;
                    }
                    function intCheck(n, min, max, name) {
                      if (n < min || n > max || n !== mathfloor(n)) {
                        throw Error(bignumberError + (name || "Argument") + (typeof n == "number" ? n < min || n > max ? " out of range: " : " not an integer: " : " not a primitive number: ") + String(n));
                      }
                    }
                    function isOdd(n) {
                      var k = n.c.length - 1;
                      return bitFloor(n.e / LOG_BASE) == k && n.c[k] % 2 != 0;
                    }
                    function toExponential(str, e) {
                      return (str.length > 1 ? str.charAt(0) + "." + str.slice(1) : str) + (e < 0 ? "e" : "e+") + e;
                    }
                    function toFixedPoint(str, e, z) {
                      var len, zs;
                      if (e < 0) {
                        for (zs = z + "."; ++e; zs += z) ;
                        str = zs + str;
                      } else {
                        len = str.length;
                        if (++e > len) {
                          for (zs = z, e -= len; --e; zs += z) ;
                          str += zs;
                        } else if (e < len) {
                          str = str.slice(0, e) + "." + str.slice(e);
                        }
                      }
                      return str;
                    }
                    BigNumber = clone();
                    BigNumber["default"] = BigNumber.BigNumber = BigNumber;
                    if (true) {
                      !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
                        return BigNumber;
                      }).call(exports2, __webpack_require__2, exports2, module2), __WEBPACK_AMD_DEFINE_RESULT__ !== void 0 && (module2.exports = __WEBPACK_AMD_DEFINE_RESULT__));
                    } else {
                    }
                  })(this);
                })
              ),
              /***/
              9844: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _slicedToArray2 = _interopRequireDefault(__webpack_require__2(6583));
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var _throttle = _interopRequireDefault(__webpack_require__2(1680));
                  var _sortBy = _interopRequireDefault(__webpack_require__2(3281));
                  var BiMapCache = /* @__PURE__ */ (function() {
                    function BiMapCache2(_ref) {
                      var _this = this;
                      var key = _ref.key, getAfromB = _ref.getAfromB, getBfromA = _ref.getBfromA, storage = _ref.storage, saveThrottle = _ref.saveThrottle, maxLimit = _ref.maxLimit, maxAge = _ref.maxAge;
                      (0, _classCallCheck2.default)(this, BiMapCache2);
                      (0, _defineProperty2.default)(this, "_key", void 0);
                      (0, _defineProperty2.default)(this, "_getAfromB", void 0);
                      (0, _defineProperty2.default)(this, "_getBfromA", void 0);
                      (0, _defineProperty2.default)(this, "_storage", void 0);
                      (0, _defineProperty2.default)(this, "_aToTimestamp", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_aToB", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_bToA", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_aToBpromise", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_bToApromise", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_saveCache", void 0);
                      this._key = key;
                      this._getBfromA = getBfromA;
                      this._getAfromB = getAfromB;
                      this._storage = storage || (__webpack_require__2.g.localStorage ? __webpack_require__2.g.localStorage : null);
                      if (saveThrottle == null) {
                        saveThrottle = 3e3;
                      }
                      if (maxLimit == null) {
                        maxLimit = 1e3;
                      }
                      if (maxAge == null) {
                        maxAge = 1e3 * 60 * 60 * 24 * 365;
                      }
                      var maxLimit_ = maxLimit, maxAge_ = maxAge;
                      this._saveCache = (0, _throttle.default)(function() {
                        var storage2 = _this._storage;
                        if (!storage2) return;
                        _this._loadCache();
                        var minTimestamp = Date.now() - maxAge_;
                        var item = {
                          version: 2,
                          ids: []
                        };
                        _this._aToB.forEach(function(b, a) {
                          var timestamp = _this._aToTimestamp.get(a);
                          if (timestamp != null && timestamp > minTimestamp) {
                            item.ids.push([a, b, timestamp]);
                          }
                        });
                        if (item.ids.length > maxLimit_) {
                          item.ids = (0, _sortBy.default)(item.ids, function(_ref2) {
                            var _ref3 = (0, _slicedToArray2.default)(_ref2, 3), timestamp = _ref3[2];
                            return timestamp;
                          }).slice(-maxLimit_);
                        }
                        storage2.setItem(_this._key, JSON.stringify(item));
                      }, saveThrottle, {
                        leading: false
                      });
                      this._loadCache();
                    }
                    (0, _createClass2.default)(BiMapCache2, [{
                      key: "_loadCache",
                      value: function _loadCache() {
                        var storage = this._storage;
                        if (!storage) return;
                        try {
                          var item = JSON.parse(storage.getItem(this._key) || "null");
                          if (!item || item.version !== 2) return;
                          var _iteratorNormalCompletion = true;
                          var _didIteratorError = false;
                          var _iteratorError = void 0;
                          try {
                            for (var _iterator = item.ids[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                              var x = _step.value;
                              var _x = (0, _slicedToArray2.default)(x, 3), _a = _x[0], _b = _x[1], timestamp = _x[2];
                              this._aToTimestamp.set(_a, timestamp);
                              this._aToB.set(_a, _b);
                              this._bToA.set(_b, _a);
                            }
                          } catch (err) {
                            _didIteratorError = true;
                            _iteratorError = err;
                          } finally {
                            try {
                              if (!_iteratorNormalCompletion && _iterator.return != null) {
                                _iterator.return();
                              }
                            } finally {
                              if (_didIteratorError) {
                                throw _iteratorError;
                              }
                            }
                          }
                        } catch (e) {
                          console.error("failed to load BiMapCache from storage", e);
                        }
                      }
                    }, {
                      key: "_rememberPair",
                      value: function _rememberPair(a, b) {
                        this._aToTimestamp.set(a, Date.now());
                        this._aToB.set(a, b);
                        this._bToA.set(b, a);
                        this._saveCache();
                      }
                    }, {
                      key: "_update",
                      value: function _update(a) {
                        this._aToTimestamp.set(a, Date.now());
                        this._saveCache();
                      }
                    }, {
                      key: "getBfromA",
                      value: function getBfromA(a) {
                        var _this2 = this;
                        var b = this._aToB.get(a);
                        if (b) {
                          this._update(a);
                          return Promise.resolve(b);
                        }
                        var existingPromise = this._aToBpromise.get(a);
                        if (existingPromise) {
                          return existingPromise;
                        }
                        var promise = this._getBfromA(a);
                        this._aToBpromise.set(a, promise);
                        promise.then(function(b2) {
                          var promiseWasStillCached = promise === _this2._aToBpromise.get(a);
                          if (promiseWasStillCached) {
                            _this2._aToBpromise.delete(a);
                            _this2._rememberPair(a, b2);
                          }
                        }, function() {
                          var promiseWasStillCached = promise === _this2._aToBpromise.get(a);
                          if (promiseWasStillCached) {
                            _this2._aToBpromise.delete(a);
                          }
                        });
                        return promise;
                      }
                    }, {
                      key: "getAfromB",
                      value: function getAfromB(b) {
                        var _this3 = this;
                        var a = this._bToA.get(b);
                        if (a) {
                          this._update(a);
                          return Promise.resolve(a);
                        }
                        var existingPromise = this._bToApromise.get(b);
                        if (existingPromise) {
                          return existingPromise;
                        }
                        var promise = this._getAfromB(b);
                        this._bToApromise.set(b, promise);
                        promise.then(function(a2) {
                          var promiseWasStillCached = promise === _this3._bToApromise.get(b);
                          if (promiseWasStillCached) {
                            _this3._bToApromise.delete(b);
                            _this3._rememberPair(a2, b);
                          }
                        }, function() {
                          var promiseWasStillCached = promise === _this3._bToApromise.get(b);
                          if (promiseWasStillCached) {
                            _this3._bToApromise.delete(b);
                          }
                        });
                        return promise;
                      }
                    }, {
                      key: "removeAfromCache",
                      value: function removeAfromCache(a) {
                        this._aToBpromise.delete(a);
                        if (this._aToB.has(a)) {
                          var _b2 = this._aToB.get(a);
                          this._aToB.delete(a);
                          this._bToA.delete(_b2);
                          this._saveCache();
                        }
                      }
                    }, {
                      key: "removeBfromCache",
                      value: function removeBfromCache(b) {
                        this._bToApromise.delete(b);
                        if (this._bToA.has(b)) {
                          var _a2 = this._bToA.get(b);
                          this._aToB.delete(_a2);
                          this._bToA.delete(b);
                          this._saveCache();
                        }
                      }
                    }]);
                    return BiMapCache2;
                  })();
                  exports2["default"] = BiMapCache;
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              2313: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  const base64 = __webpack_require__2(2504);
                  const ieee754 = __webpack_require__2(9029);
                  const customInspectSymbol = typeof Symbol === "function" && typeof Symbol["for"] === "function" ? Symbol["for"]("nodejs.util.inspect.custom") : null;
                  exports2.Buffer = Buffer2;
                  exports2.SlowBuffer = SlowBuffer;
                  exports2.INSPECT_MAX_BYTES = 50;
                  const K_MAX_LENGTH = 2147483647;
                  exports2.kMaxLength = K_MAX_LENGTH;
                  Buffer2.TYPED_ARRAY_SUPPORT = typedArraySupport();
                  if (!Buffer2.TYPED_ARRAY_SUPPORT && typeof console !== "undefined" && typeof console.error === "function") {
                    console.error(
                      "This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."
                    );
                  }
                  function typedArraySupport() {
                    try {
                      const arr = new Uint8Array(1);
                      const proto = { foo: function() {
                        return 42;
                      } };
                      Object.setPrototypeOf(proto, Uint8Array.prototype);
                      Object.setPrototypeOf(arr, proto);
                      return arr.foo() === 42;
                    } catch (e) {
                      return false;
                    }
                  }
                  Object.defineProperty(Buffer2.prototype, "parent", {
                    enumerable: true,
                    get: function() {
                      if (!Buffer2.isBuffer(this)) return void 0;
                      return this.buffer;
                    }
                  });
                  Object.defineProperty(Buffer2.prototype, "offset", {
                    enumerable: true,
                    get: function() {
                      if (!Buffer2.isBuffer(this)) return void 0;
                      return this.byteOffset;
                    }
                  });
                  function createBuffer(length) {
                    if (length > K_MAX_LENGTH) {
                      throw new RangeError('The value "' + length + '" is invalid for option "size"');
                    }
                    const buf = new Uint8Array(length);
                    Object.setPrototypeOf(buf, Buffer2.prototype);
                    return buf;
                  }
                  function Buffer2(arg, encodingOrOffset, length) {
                    if (typeof arg === "number") {
                      if (typeof encodingOrOffset === "string") {
                        throw new TypeError(
                          'The "string" argument must be of type string. Received type number'
                        );
                      }
                      return allocUnsafe(arg);
                    }
                    return from(arg, encodingOrOffset, length);
                  }
                  Buffer2.poolSize = 8192;
                  function from(value, encodingOrOffset, length) {
                    if (typeof value === "string") {
                      return fromString(value, encodingOrOffset);
                    }
                    if (ArrayBuffer.isView(value)) {
                      return fromArrayView(value);
                    }
                    if (value == null) {
                      throw new TypeError(
                        "The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof value
                      );
                    }
                    if (isInstance(value, ArrayBuffer) || value && isInstance(value.buffer, ArrayBuffer)) {
                      return fromArrayBuffer(value, encodingOrOffset, length);
                    }
                    if (typeof SharedArrayBuffer !== "undefined" && (isInstance(value, SharedArrayBuffer) || value && isInstance(value.buffer, SharedArrayBuffer))) {
                      return fromArrayBuffer(value, encodingOrOffset, length);
                    }
                    if (typeof value === "number") {
                      throw new TypeError(
                        'The "value" argument must not be of type number. Received type number'
                      );
                    }
                    const valueOf = value.valueOf && value.valueOf();
                    if (valueOf != null && valueOf !== value) {
                      return Buffer2.from(valueOf, encodingOrOffset, length);
                    }
                    const b = fromObject(value);
                    if (b) return b;
                    if (typeof Symbol !== "undefined" && Symbol.toPrimitive != null && typeof value[Symbol.toPrimitive] === "function") {
                      return Buffer2.from(value[Symbol.toPrimitive]("string"), encodingOrOffset, length);
                    }
                    throw new TypeError(
                      "The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type " + typeof value
                    );
                  }
                  Buffer2.from = function(value, encodingOrOffset, length) {
                    return from(value, encodingOrOffset, length);
                  };
                  Object.setPrototypeOf(Buffer2.prototype, Uint8Array.prototype);
                  Object.setPrototypeOf(Buffer2, Uint8Array);
                  function assertSize(size) {
                    if (typeof size !== "number") {
                      throw new TypeError('"size" argument must be of type number');
                    } else if (size < 0) {
                      throw new RangeError('The value "' + size + '" is invalid for option "size"');
                    }
                  }
                  function alloc(size, fill, encoding) {
                    assertSize(size);
                    if (size <= 0) {
                      return createBuffer(size);
                    }
                    if (fill !== void 0) {
                      return typeof encoding === "string" ? createBuffer(size).fill(fill, encoding) : createBuffer(size).fill(fill);
                    }
                    return createBuffer(size);
                  }
                  Buffer2.alloc = function(size, fill, encoding) {
                    return alloc(size, fill, encoding);
                  };
                  function allocUnsafe(size) {
                    assertSize(size);
                    return createBuffer(size < 0 ? 0 : checked(size) | 0);
                  }
                  Buffer2.allocUnsafe = function(size) {
                    return allocUnsafe(size);
                  };
                  Buffer2.allocUnsafeSlow = function(size) {
                    return allocUnsafe(size);
                  };
                  function fromString(string, encoding) {
                    if (typeof encoding !== "string" || encoding === "") {
                      encoding = "utf8";
                    }
                    if (!Buffer2.isEncoding(encoding)) {
                      throw new TypeError("Unknown encoding: " + encoding);
                    }
                    const length = byteLength(string, encoding) | 0;
                    let buf = createBuffer(length);
                    const actual = buf.write(string, encoding);
                    if (actual !== length) {
                      buf = buf.slice(0, actual);
                    }
                    return buf;
                  }
                  function fromArrayLike(array) {
                    const length = array.length < 0 ? 0 : checked(array.length) | 0;
                    const buf = createBuffer(length);
                    for (let i = 0; i < length; i += 1) {
                      buf[i] = array[i] & 255;
                    }
                    return buf;
                  }
                  function fromArrayView(arrayView) {
                    if (isInstance(arrayView, Uint8Array)) {
                      const copy = new Uint8Array(arrayView);
                      return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength);
                    }
                    return fromArrayLike(arrayView);
                  }
                  function fromArrayBuffer(array, byteOffset, length) {
                    if (byteOffset < 0 || array.byteLength < byteOffset) {
                      throw new RangeError('"offset" is outside of buffer bounds');
                    }
                    if (array.byteLength < byteOffset + (length || 0)) {
                      throw new RangeError('"length" is outside of buffer bounds');
                    }
                    let buf;
                    if (byteOffset === void 0 && length === void 0) {
                      buf = new Uint8Array(array);
                    } else if (length === void 0) {
                      buf = new Uint8Array(array, byteOffset);
                    } else {
                      buf = new Uint8Array(array, byteOffset, length);
                    }
                    Object.setPrototypeOf(buf, Buffer2.prototype);
                    return buf;
                  }
                  function fromObject(obj) {
                    if (Buffer2.isBuffer(obj)) {
                      const len = checked(obj.length) | 0;
                      const buf = createBuffer(len);
                      if (buf.length === 0) {
                        return buf;
                      }
                      obj.copy(buf, 0, 0, len);
                      return buf;
                    }
                    if (obj.length !== void 0) {
                      if (typeof obj.length !== "number" || numberIsNaN(obj.length)) {
                        return createBuffer(0);
                      }
                      return fromArrayLike(obj);
                    }
                    if (obj.type === "Buffer" && Array.isArray(obj.data)) {
                      return fromArrayLike(obj.data);
                    }
                  }
                  function checked(length) {
                    if (length >= K_MAX_LENGTH) {
                      throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + K_MAX_LENGTH.toString(16) + " bytes");
                    }
                    return length | 0;
                  }
                  function SlowBuffer(length) {
                    if (+length != length) {
                      length = 0;
                    }
                    return Buffer2.alloc(+length);
                  }
                  Buffer2.isBuffer = function isBuffer(b) {
                    return b != null && b._isBuffer === true && b !== Buffer2.prototype;
                  };
                  Buffer2.compare = function compare(a, b) {
                    if (isInstance(a, Uint8Array)) a = Buffer2.from(a, a.offset, a.byteLength);
                    if (isInstance(b, Uint8Array)) b = Buffer2.from(b, b.offset, b.byteLength);
                    if (!Buffer2.isBuffer(a) || !Buffer2.isBuffer(b)) {
                      throw new TypeError(
                        'The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array'
                      );
                    }
                    if (a === b) return 0;
                    let x = a.length;
                    let y = b.length;
                    for (let i = 0, len = Math.min(x, y); i < len; ++i) {
                      if (a[i] !== b[i]) {
                        x = a[i];
                        y = b[i];
                        break;
                      }
                    }
                    if (x < y) return -1;
                    if (y < x) return 1;
                    return 0;
                  };
                  Buffer2.isEncoding = function isEncoding(encoding) {
                    switch (String(encoding).toLowerCase()) {
                      case "hex":
                      case "utf8":
                      case "utf-8":
                      case "ascii":
                      case "latin1":
                      case "binary":
                      case "base64":
                      case "ucs2":
                      case "ucs-2":
                      case "utf16le":
                      case "utf-16le":
                        return true;
                      default:
                        return false;
                    }
                  };
                  Buffer2.concat = function concat(list, length) {
                    if (!Array.isArray(list)) {
                      throw new TypeError('"list" argument must be an Array of Buffers');
                    }
                    if (list.length === 0) {
                      return Buffer2.alloc(0);
                    }
                    let i;
                    if (length === void 0) {
                      length = 0;
                      for (i = 0; i < list.length; ++i) {
                        length += list[i].length;
                      }
                    }
                    const buffer = Buffer2.allocUnsafe(length);
                    let pos = 0;
                    for (i = 0; i < list.length; ++i) {
                      let buf = list[i];
                      if (isInstance(buf, Uint8Array)) {
                        if (pos + buf.length > buffer.length) {
                          if (!Buffer2.isBuffer(buf)) buf = Buffer2.from(buf);
                          buf.copy(buffer, pos);
                        } else {
                          Uint8Array.prototype.set.call(
                            buffer,
                            buf,
                            pos
                          );
                        }
                      } else if (!Buffer2.isBuffer(buf)) {
                        throw new TypeError('"list" argument must be an Array of Buffers');
                      } else {
                        buf.copy(buffer, pos);
                      }
                      pos += buf.length;
                    }
                    return buffer;
                  };
                  function byteLength(string, encoding) {
                    if (Buffer2.isBuffer(string)) {
                      return string.length;
                    }
                    if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {
                      return string.byteLength;
                    }
                    if (typeof string !== "string") {
                      throw new TypeError(
                        'The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof string
                      );
                    }
                    const len = string.length;
                    const mustMatch = arguments.length > 2 && arguments[2] === true;
                    if (!mustMatch && len === 0) return 0;
                    let loweredCase = false;
                    for (; ; ) {
                      switch (encoding) {
                        case "ascii":
                        case "latin1":
                        case "binary":
                          return len;
                        case "utf8":
                        case "utf-8":
                          return utf8ToBytes(string).length;
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                          return len * 2;
                        case "hex":
                          return len >>> 1;
                        case "base64":
                          return base64ToBytes(string).length;
                        default:
                          if (loweredCase) {
                            return mustMatch ? -1 : utf8ToBytes(string).length;
                          }
                          encoding = ("" + encoding).toLowerCase();
                          loweredCase = true;
                      }
                    }
                  }
                  Buffer2.byteLength = byteLength;
                  function slowToString(encoding, start, end) {
                    let loweredCase = false;
                    if (start === void 0 || start < 0) {
                      start = 0;
                    }
                    if (start > this.length) {
                      return "";
                    }
                    if (end === void 0 || end > this.length) {
                      end = this.length;
                    }
                    if (end <= 0) {
                      return "";
                    }
                    end >>>= 0;
                    start >>>= 0;
                    if (end <= start) {
                      return "";
                    }
                    if (!encoding) encoding = "utf8";
                    while (true) {
                      switch (encoding) {
                        case "hex":
                          return hexSlice(this, start, end);
                        case "utf8":
                        case "utf-8":
                          return utf8Slice(this, start, end);
                        case "ascii":
                          return asciiSlice(this, start, end);
                        case "latin1":
                        case "binary":
                          return latin1Slice(this, start, end);
                        case "base64":
                          return base64Slice(this, start, end);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                          return utf16leSlice(this, start, end);
                        default:
                          if (loweredCase) throw new TypeError("Unknown encoding: " + encoding);
                          encoding = (encoding + "").toLowerCase();
                          loweredCase = true;
                      }
                    }
                  }
                  Buffer2.prototype._isBuffer = true;
                  function swap(b, n, m) {
                    const i = b[n];
                    b[n] = b[m];
                    b[m] = i;
                  }
                  Buffer2.prototype.swap16 = function swap16() {
                    const len = this.length;
                    if (len % 2 !== 0) {
                      throw new RangeError("Buffer size must be a multiple of 16-bits");
                    }
                    for (let i = 0; i < len; i += 2) {
                      swap(this, i, i + 1);
                    }
                    return this;
                  };
                  Buffer2.prototype.swap32 = function swap32() {
                    const len = this.length;
                    if (len % 4 !== 0) {
                      throw new RangeError("Buffer size must be a multiple of 32-bits");
                    }
                    for (let i = 0; i < len; i += 4) {
                      swap(this, i, i + 3);
                      swap(this, i + 1, i + 2);
                    }
                    return this;
                  };
                  Buffer2.prototype.swap64 = function swap64() {
                    const len = this.length;
                    if (len % 8 !== 0) {
                      throw new RangeError("Buffer size must be a multiple of 64-bits");
                    }
                    for (let i = 0; i < len; i += 8) {
                      swap(this, i, i + 7);
                      swap(this, i + 1, i + 6);
                      swap(this, i + 2, i + 5);
                      swap(this, i + 3, i + 4);
                    }
                    return this;
                  };
                  Buffer2.prototype.toString = function toString() {
                    const length = this.length;
                    if (length === 0) return "";
                    if (arguments.length === 0) return utf8Slice(this, 0, length);
                    return slowToString.apply(this, arguments);
                  };
                  Buffer2.prototype.toLocaleString = Buffer2.prototype.toString;
                  Buffer2.prototype.equals = function equals(b) {
                    if (!Buffer2.isBuffer(b)) throw new TypeError("Argument must be a Buffer");
                    if (this === b) return true;
                    return Buffer2.compare(this, b) === 0;
                  };
                  Buffer2.prototype.inspect = function inspect() {
                    let str = "";
                    const max = exports2.INSPECT_MAX_BYTES;
                    str = this.toString("hex", 0, max).replace(/(.{2})/g, "$1 ").trim();
                    if (this.length > max) str += " ... ";
                    return "<Buffer " + str + ">";
                  };
                  if (customInspectSymbol) {
                    Buffer2.prototype[customInspectSymbol] = Buffer2.prototype.inspect;
                  }
                  Buffer2.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {
                    if (isInstance(target, Uint8Array)) {
                      target = Buffer2.from(target, target.offset, target.byteLength);
                    }
                    if (!Buffer2.isBuffer(target)) {
                      throw new TypeError(
                        'The "target" argument must be one of type Buffer or Uint8Array. Received type ' + typeof target
                      );
                    }
                    if (start === void 0) {
                      start = 0;
                    }
                    if (end === void 0) {
                      end = target ? target.length : 0;
                    }
                    if (thisStart === void 0) {
                      thisStart = 0;
                    }
                    if (thisEnd === void 0) {
                      thisEnd = this.length;
                    }
                    if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
                      throw new RangeError("out of range index");
                    }
                    if (thisStart >= thisEnd && start >= end) {
                      return 0;
                    }
                    if (thisStart >= thisEnd) {
                      return -1;
                    }
                    if (start >= end) {
                      return 1;
                    }
                    start >>>= 0;
                    end >>>= 0;
                    thisStart >>>= 0;
                    thisEnd >>>= 0;
                    if (this === target) return 0;
                    let x = thisEnd - thisStart;
                    let y = end - start;
                    const len = Math.min(x, y);
                    const thisCopy = this.slice(thisStart, thisEnd);
                    const targetCopy = target.slice(start, end);
                    for (let i = 0; i < len; ++i) {
                      if (thisCopy[i] !== targetCopy[i]) {
                        x = thisCopy[i];
                        y = targetCopy[i];
                        break;
                      }
                    }
                    if (x < y) return -1;
                    if (y < x) return 1;
                    return 0;
                  };
                  function bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {
                    if (buffer.length === 0) return -1;
                    if (typeof byteOffset === "string") {
                      encoding = byteOffset;
                      byteOffset = 0;
                    } else if (byteOffset > 2147483647) {
                      byteOffset = 2147483647;
                    } else if (byteOffset < -2147483648) {
                      byteOffset = -2147483648;
                    }
                    byteOffset = +byteOffset;
                    if (numberIsNaN(byteOffset)) {
                      byteOffset = dir ? 0 : buffer.length - 1;
                    }
                    if (byteOffset < 0) byteOffset = buffer.length + byteOffset;
                    if (byteOffset >= buffer.length) {
                      if (dir) return -1;
                      else byteOffset = buffer.length - 1;
                    } else if (byteOffset < 0) {
                      if (dir) byteOffset = 0;
                      else return -1;
                    }
                    if (typeof val === "string") {
                      val = Buffer2.from(val, encoding);
                    }
                    if (Buffer2.isBuffer(val)) {
                      if (val.length === 0) {
                        return -1;
                      }
                      return arrayIndexOf(buffer, val, byteOffset, encoding, dir);
                    } else if (typeof val === "number") {
                      val = val & 255;
                      if (typeof Uint8Array.prototype.indexOf === "function") {
                        if (dir) {
                          return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset);
                        } else {
                          return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset);
                        }
                      }
                      return arrayIndexOf(buffer, [val], byteOffset, encoding, dir);
                    }
                    throw new TypeError("val must be string, number or Buffer");
                  }
                  function arrayIndexOf(arr, val, byteOffset, encoding, dir) {
                    let indexSize = 1;
                    let arrLength = arr.length;
                    let valLength = val.length;
                    if (encoding !== void 0) {
                      encoding = String(encoding).toLowerCase();
                      if (encoding === "ucs2" || encoding === "ucs-2" || encoding === "utf16le" || encoding === "utf-16le") {
                        if (arr.length < 2 || val.length < 2) {
                          return -1;
                        }
                        indexSize = 2;
                        arrLength /= 2;
                        valLength /= 2;
                        byteOffset /= 2;
                      }
                    }
                    function read(buf, i2) {
                      if (indexSize === 1) {
                        return buf[i2];
                      } else {
                        return buf.readUInt16BE(i2 * indexSize);
                      }
                    }
                    let i;
                    if (dir) {
                      let foundIndex = -1;
                      for (i = byteOffset; i < arrLength; i++) {
                        if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
                          if (foundIndex === -1) foundIndex = i;
                          if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;
                        } else {
                          if (foundIndex !== -1) i -= i - foundIndex;
                          foundIndex = -1;
                        }
                      }
                    } else {
                      if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;
                      for (i = byteOffset; i >= 0; i--) {
                        let found = true;
                        for (let j = 0; j < valLength; j++) {
                          if (read(arr, i + j) !== read(val, j)) {
                            found = false;
                            break;
                          }
                        }
                        if (found) return i;
                      }
                    }
                    return -1;
                  }
                  Buffer2.prototype.includes = function includes(val, byteOffset, encoding) {
                    return this.indexOf(val, byteOffset, encoding) !== -1;
                  };
                  Buffer2.prototype.indexOf = function indexOf(val, byteOffset, encoding) {
                    return bidirectionalIndexOf(this, val, byteOffset, encoding, true);
                  };
                  Buffer2.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {
                    return bidirectionalIndexOf(this, val, byteOffset, encoding, false);
                  };
                  function hexWrite(buf, string, offset, length) {
                    offset = Number(offset) || 0;
                    const remaining = buf.length - offset;
                    if (!length) {
                      length = remaining;
                    } else {
                      length = Number(length);
                      if (length > remaining) {
                        length = remaining;
                      }
                    }
                    const strLen = string.length;
                    if (length > strLen / 2) {
                      length = strLen / 2;
                    }
                    let i;
                    for (i = 0; i < length; ++i) {
                      const parsed = parseInt(string.substr(i * 2, 2), 16);
                      if (numberIsNaN(parsed)) return i;
                      buf[offset + i] = parsed;
                    }
                    return i;
                  }
                  function utf8Write(buf, string, offset, length) {
                    return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);
                  }
                  function asciiWrite(buf, string, offset, length) {
                    return blitBuffer(asciiToBytes(string), buf, offset, length);
                  }
                  function base64Write(buf, string, offset, length) {
                    return blitBuffer(base64ToBytes(string), buf, offset, length);
                  }
                  function ucs2Write(buf, string, offset, length) {
                    return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);
                  }
                  Buffer2.prototype.write = function write(string, offset, length, encoding) {
                    if (offset === void 0) {
                      encoding = "utf8";
                      length = this.length;
                      offset = 0;
                    } else if (length === void 0 && typeof offset === "string") {
                      encoding = offset;
                      length = this.length;
                      offset = 0;
                    } else if (isFinite(offset)) {
                      offset = offset >>> 0;
                      if (isFinite(length)) {
                        length = length >>> 0;
                        if (encoding === void 0) encoding = "utf8";
                      } else {
                        encoding = length;
                        length = void 0;
                      }
                    } else {
                      throw new Error(
                        "Buffer.write(string, encoding, offset[, length]) is no longer supported"
                      );
                    }
                    const remaining = this.length - offset;
                    if (length === void 0 || length > remaining) length = remaining;
                    if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {
                      throw new RangeError("Attempt to write outside buffer bounds");
                    }
                    if (!encoding) encoding = "utf8";
                    let loweredCase = false;
                    for (; ; ) {
                      switch (encoding) {
                        case "hex":
                          return hexWrite(this, string, offset, length);
                        case "utf8":
                        case "utf-8":
                          return utf8Write(this, string, offset, length);
                        case "ascii":
                        case "latin1":
                        case "binary":
                          return asciiWrite(this, string, offset, length);
                        case "base64":
                          return base64Write(this, string, offset, length);
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                          return ucs2Write(this, string, offset, length);
                        default:
                          if (loweredCase) throw new TypeError("Unknown encoding: " + encoding);
                          encoding = ("" + encoding).toLowerCase();
                          loweredCase = true;
                      }
                    }
                  };
                  Buffer2.prototype.toJSON = function toJSON() {
                    return {
                      type: "Buffer",
                      data: Array.prototype.slice.call(this._arr || this, 0)
                    };
                  };
                  function base64Slice(buf, start, end) {
                    if (start === 0 && end === buf.length) {
                      return base64.fromByteArray(buf);
                    } else {
                      return base64.fromByteArray(buf.slice(start, end));
                    }
                  }
                  function utf8Slice(buf, start, end) {
                    end = Math.min(buf.length, end);
                    const res = [];
                    let i = start;
                    while (i < end) {
                      const firstByte = buf[i];
                      let codePoint = null;
                      let bytesPerSequence = firstByte > 239 ? 4 : firstByte > 223 ? 3 : firstByte > 191 ? 2 : 1;
                      if (i + bytesPerSequence <= end) {
                        let secondByte, thirdByte, fourthByte, tempCodePoint;
                        switch (bytesPerSequence) {
                          case 1:
                            if (firstByte < 128) {
                              codePoint = firstByte;
                            }
                            break;
                          case 2:
                            secondByte = buf[i + 1];
                            if ((secondByte & 192) === 128) {
                              tempCodePoint = (firstByte & 31) << 6 | secondByte & 63;
                              if (tempCodePoint > 127) {
                                codePoint = tempCodePoint;
                              }
                            }
                            break;
                          case 3:
                            secondByte = buf[i + 1];
                            thirdByte = buf[i + 2];
                            if ((secondByte & 192) === 128 && (thirdByte & 192) === 128) {
                              tempCodePoint = (firstByte & 15) << 12 | (secondByte & 63) << 6 | thirdByte & 63;
                              if (tempCodePoint > 2047 && (tempCodePoint < 55296 || tempCodePoint > 57343)) {
                                codePoint = tempCodePoint;
                              }
                            }
                            break;
                          case 4:
                            secondByte = buf[i + 1];
                            thirdByte = buf[i + 2];
                            fourthByte = buf[i + 3];
                            if ((secondByte & 192) === 128 && (thirdByte & 192) === 128 && (fourthByte & 192) === 128) {
                              tempCodePoint = (firstByte & 15) << 18 | (secondByte & 63) << 12 | (thirdByte & 63) << 6 | fourthByte & 63;
                              if (tempCodePoint > 65535 && tempCodePoint < 1114112) {
                                codePoint = tempCodePoint;
                              }
                            }
                        }
                      }
                      if (codePoint === null) {
                        codePoint = 65533;
                        bytesPerSequence = 1;
                      } else if (codePoint > 65535) {
                        codePoint -= 65536;
                        res.push(codePoint >>> 10 & 1023 | 55296);
                        codePoint = 56320 | codePoint & 1023;
                      }
                      res.push(codePoint);
                      i += bytesPerSequence;
                    }
                    return decodeCodePointsArray(res);
                  }
                  const MAX_ARGUMENTS_LENGTH = 4096;
                  function decodeCodePointsArray(codePoints) {
                    const len = codePoints.length;
                    if (len <= MAX_ARGUMENTS_LENGTH) {
                      return String.fromCharCode.apply(String, codePoints);
                    }
                    let res = "";
                    let i = 0;
                    while (i < len) {
                      res += String.fromCharCode.apply(
                        String,
                        codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
                      );
                    }
                    return res;
                  }
                  function asciiSlice(buf, start, end) {
                    let ret = "";
                    end = Math.min(buf.length, end);
                    for (let i = start; i < end; ++i) {
                      ret += String.fromCharCode(buf[i] & 127);
                    }
                    return ret;
                  }
                  function latin1Slice(buf, start, end) {
                    let ret = "";
                    end = Math.min(buf.length, end);
                    for (let i = start; i < end; ++i) {
                      ret += String.fromCharCode(buf[i]);
                    }
                    return ret;
                  }
                  function hexSlice(buf, start, end) {
                    const len = buf.length;
                    if (!start || start < 0) start = 0;
                    if (!end || end < 0 || end > len) end = len;
                    let out = "";
                    for (let i = start; i < end; ++i) {
                      out += hexSliceLookupTable[buf[i]];
                    }
                    return out;
                  }
                  function utf16leSlice(buf, start, end) {
                    const bytes = buf.slice(start, end);
                    let res = "";
                    for (let i = 0; i < bytes.length - 1; i += 2) {
                      res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256);
                    }
                    return res;
                  }
                  Buffer2.prototype.slice = function slice(start, end) {
                    const len = this.length;
                    start = ~~start;
                    end = end === void 0 ? len : ~~end;
                    if (start < 0) {
                      start += len;
                      if (start < 0) start = 0;
                    } else if (start > len) {
                      start = len;
                    }
                    if (end < 0) {
                      end += len;
                      if (end < 0) end = 0;
                    } else if (end > len) {
                      end = len;
                    }
                    if (end < start) end = start;
                    const newBuf = this.subarray(start, end);
                    Object.setPrototypeOf(newBuf, Buffer2.prototype);
                    return newBuf;
                  };
                  function checkOffset(offset, ext, length) {
                    if (offset % 1 !== 0 || offset < 0) throw new RangeError("offset is not uint");
                    if (offset + ext > length) throw new RangeError("Trying to access beyond buffer length");
                  }
                  Buffer2.prototype.readUintLE = Buffer2.prototype.readUIntLE = function readUIntLE(offset, byteLength2, noAssert) {
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) checkOffset(offset, byteLength2, this.length);
                    let val = this[offset];
                    let mul = 1;
                    let i = 0;
                    while (++i < byteLength2 && (mul *= 256)) {
                      val += this[offset + i] * mul;
                    }
                    return val;
                  };
                  Buffer2.prototype.readUintBE = Buffer2.prototype.readUIntBE = function readUIntBE(offset, byteLength2, noAssert) {
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) {
                      checkOffset(offset, byteLength2, this.length);
                    }
                    let val = this[offset + --byteLength2];
                    let mul = 1;
                    while (byteLength2 > 0 && (mul *= 256)) {
                      val += this[offset + --byteLength2] * mul;
                    }
                    return val;
                  };
                  Buffer2.prototype.readUint8 = Buffer2.prototype.readUInt8 = function readUInt8(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 1, this.length);
                    return this[offset];
                  };
                  Buffer2.prototype.readUint16LE = Buffer2.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 2, this.length);
                    return this[offset] | this[offset + 1] << 8;
                  };
                  Buffer2.prototype.readUint16BE = Buffer2.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 2, this.length);
                    return this[offset] << 8 | this[offset + 1];
                  };
                  Buffer2.prototype.readUint32LE = Buffer2.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 16777216;
                  };
                  Buffer2.prototype.readUint32BE = Buffer2.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return this[offset] * 16777216 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);
                  };
                  Buffer2.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE(offset) {
                    offset = offset >>> 0;
                    validateNumber(offset, "offset");
                    const first = this[offset];
                    const last2 = this[offset + 7];
                    if (first === void 0 || last2 === void 0) {
                      boundsError(offset, this.length - 8);
                    }
                    const lo = first + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 24;
                    const hi = this[++offset] + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + last2 * 2 ** 24;
                    return BigInt(lo) + (BigInt(hi) << BigInt(32));
                  });
                  Buffer2.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE(offset) {
                    offset = offset >>> 0;
                    validateNumber(offset, "offset");
                    const first = this[offset];
                    const last2 = this[offset + 7];
                    if (first === void 0 || last2 === void 0) {
                      boundsError(offset, this.length - 8);
                    }
                    const hi = first * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + this[++offset];
                    const lo = this[++offset] * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + last2;
                    return (BigInt(hi) << BigInt(32)) + BigInt(lo);
                  });
                  Buffer2.prototype.readIntLE = function readIntLE(offset, byteLength2, noAssert) {
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) checkOffset(offset, byteLength2, this.length);
                    let val = this[offset];
                    let mul = 1;
                    let i = 0;
                    while (++i < byteLength2 && (mul *= 256)) {
                      val += this[offset + i] * mul;
                    }
                    mul *= 128;
                    if (val >= mul) val -= Math.pow(2, 8 * byteLength2);
                    return val;
                  };
                  Buffer2.prototype.readIntBE = function readIntBE(offset, byteLength2, noAssert) {
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) checkOffset(offset, byteLength2, this.length);
                    let i = byteLength2;
                    let mul = 1;
                    let val = this[offset + --i];
                    while (i > 0 && (mul *= 256)) {
                      val += this[offset + --i] * mul;
                    }
                    mul *= 128;
                    if (val >= mul) val -= Math.pow(2, 8 * byteLength2);
                    return val;
                  };
                  Buffer2.prototype.readInt8 = function readInt8(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 1, this.length);
                    if (!(this[offset] & 128)) return this[offset];
                    return (255 - this[offset] + 1) * -1;
                  };
                  Buffer2.prototype.readInt16LE = function readInt16LE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 2, this.length);
                    const val = this[offset] | this[offset + 1] << 8;
                    return val & 32768 ? val | 4294901760 : val;
                  };
                  Buffer2.prototype.readInt16BE = function readInt16BE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 2, this.length);
                    const val = this[offset + 1] | this[offset] << 8;
                    return val & 32768 ? val | 4294901760 : val;
                  };
                  Buffer2.prototype.readInt32LE = function readInt32LE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;
                  };
                  Buffer2.prototype.readInt32BE = function readInt32BE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];
                  };
                  Buffer2.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE(offset) {
                    offset = offset >>> 0;
                    validateNumber(offset, "offset");
                    const first = this[offset];
                    const last2 = this[offset + 7];
                    if (first === void 0 || last2 === void 0) {
                      boundsError(offset, this.length - 8);
                    }
                    const val = this[offset + 4] + this[offset + 5] * 2 ** 8 + this[offset + 6] * 2 ** 16 + (last2 << 24);
                    return (BigInt(val) << BigInt(32)) + BigInt(first + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 24);
                  });
                  Buffer2.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE(offset) {
                    offset = offset >>> 0;
                    validateNumber(offset, "offset");
                    const first = this[offset];
                    const last2 = this[offset + 7];
                    if (first === void 0 || last2 === void 0) {
                      boundsError(offset, this.length - 8);
                    }
                    const val = (first << 24) + // Overflow
                    this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + this[++offset];
                    return (BigInt(val) << BigInt(32)) + BigInt(this[++offset] * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + last2);
                  });
                  Buffer2.prototype.readFloatLE = function readFloatLE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return ieee754.read(this, offset, true, 23, 4);
                  };
                  Buffer2.prototype.readFloatBE = function readFloatBE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 4, this.length);
                    return ieee754.read(this, offset, false, 23, 4);
                  };
                  Buffer2.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 8, this.length);
                    return ieee754.read(this, offset, true, 52, 8);
                  };
                  Buffer2.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {
                    offset = offset >>> 0;
                    if (!noAssert) checkOffset(offset, 8, this.length);
                    return ieee754.read(this, offset, false, 52, 8);
                  };
                  function checkInt(buf, value, offset, ext, max, min) {
                    if (!Buffer2.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance');
                    if (value > max || value < min) throw new RangeError('"value" argument is out of bounds');
                    if (offset + ext > buf.length) throw new RangeError("Index out of range");
                  }
                  Buffer2.prototype.writeUintLE = Buffer2.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength2, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) {
                      const maxBytes = Math.pow(2, 8 * byteLength2) - 1;
                      checkInt(this, value, offset, byteLength2, maxBytes, 0);
                    }
                    let mul = 1;
                    let i = 0;
                    this[offset] = value & 255;
                    while (++i < byteLength2 && (mul *= 256)) {
                      this[offset + i] = value / mul & 255;
                    }
                    return offset + byteLength2;
                  };
                  Buffer2.prototype.writeUintBE = Buffer2.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength2, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    byteLength2 = byteLength2 >>> 0;
                    if (!noAssert) {
                      const maxBytes = Math.pow(2, 8 * byteLength2) - 1;
                      checkInt(this, value, offset, byteLength2, maxBytes, 0);
                    }
                    let i = byteLength2 - 1;
                    let mul = 1;
                    this[offset + i] = value & 255;
                    while (--i >= 0 && (mul *= 256)) {
                      this[offset + i] = value / mul & 255;
                    }
                    return offset + byteLength2;
                  };
                  Buffer2.prototype.writeUint8 = Buffer2.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 1, 255, 0);
                    this[offset] = value & 255;
                    return offset + 1;
                  };
                  Buffer2.prototype.writeUint16LE = Buffer2.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 2, 65535, 0);
                    this[offset] = value & 255;
                    this[offset + 1] = value >>> 8;
                    return offset + 2;
                  };
                  Buffer2.prototype.writeUint16BE = Buffer2.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 2, 65535, 0);
                    this[offset] = value >>> 8;
                    this[offset + 1] = value & 255;
                    return offset + 2;
                  };
                  Buffer2.prototype.writeUint32LE = Buffer2.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 4, 4294967295, 0);
                    this[offset + 3] = value >>> 24;
                    this[offset + 2] = value >>> 16;
                    this[offset + 1] = value >>> 8;
                    this[offset] = value & 255;
                    return offset + 4;
                  };
                  Buffer2.prototype.writeUint32BE = Buffer2.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 4, 4294967295, 0);
                    this[offset] = value >>> 24;
                    this[offset + 1] = value >>> 16;
                    this[offset + 2] = value >>> 8;
                    this[offset + 3] = value & 255;
                    return offset + 4;
                  };
                  function wrtBigUInt64LE(buf, value, offset, min, max) {
                    checkIntBI(value, min, max, buf, offset, 7);
                    let lo = Number(value & BigInt(4294967295));
                    buf[offset++] = lo;
                    lo = lo >> 8;
                    buf[offset++] = lo;
                    lo = lo >> 8;
                    buf[offset++] = lo;
                    lo = lo >> 8;
                    buf[offset++] = lo;
                    let hi = Number(value >> BigInt(32) & BigInt(4294967295));
                    buf[offset++] = hi;
                    hi = hi >> 8;
                    buf[offset++] = hi;
                    hi = hi >> 8;
                    buf[offset++] = hi;
                    hi = hi >> 8;
                    buf[offset++] = hi;
                    return offset;
                  }
                  function wrtBigUInt64BE(buf, value, offset, min, max) {
                    checkIntBI(value, min, max, buf, offset, 7);
                    let lo = Number(value & BigInt(4294967295));
                    buf[offset + 7] = lo;
                    lo = lo >> 8;
                    buf[offset + 6] = lo;
                    lo = lo >> 8;
                    buf[offset + 5] = lo;
                    lo = lo >> 8;
                    buf[offset + 4] = lo;
                    let hi = Number(value >> BigInt(32) & BigInt(4294967295));
                    buf[offset + 3] = hi;
                    hi = hi >> 8;
                    buf[offset + 2] = hi;
                    hi = hi >> 8;
                    buf[offset + 1] = hi;
                    hi = hi >> 8;
                    buf[offset] = hi;
                    return offset + 8;
                  }
                  Buffer2.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE(value, offset = 0) {
                    return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt("0xffffffffffffffff"));
                  });
                  Buffer2.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE(value, offset = 0) {
                    return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt("0xffffffffffffffff"));
                  });
                  Buffer2.prototype.writeIntLE = function writeIntLE(value, offset, byteLength2, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) {
                      const limit = Math.pow(2, 8 * byteLength2 - 1);
                      checkInt(this, value, offset, byteLength2, limit - 1, -limit);
                    }
                    let i = 0;
                    let mul = 1;
                    let sub = 0;
                    this[offset] = value & 255;
                    while (++i < byteLength2 && (mul *= 256)) {
                      if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
                        sub = 1;
                      }
                      this[offset + i] = (value / mul >> 0) - sub & 255;
                    }
                    return offset + byteLength2;
                  };
                  Buffer2.prototype.writeIntBE = function writeIntBE(value, offset, byteLength2, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) {
                      const limit = Math.pow(2, 8 * byteLength2 - 1);
                      checkInt(this, value, offset, byteLength2, limit - 1, -limit);
                    }
                    let i = byteLength2 - 1;
                    let mul = 1;
                    let sub = 0;
                    this[offset + i] = value & 255;
                    while (--i >= 0 && (mul *= 256)) {
                      if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
                        sub = 1;
                      }
                      this[offset + i] = (value / mul >> 0) - sub & 255;
                    }
                    return offset + byteLength2;
                  };
                  Buffer2.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 1, 127, -128);
                    if (value < 0) value = 255 + value + 1;
                    this[offset] = value & 255;
                    return offset + 1;
                  };
                  Buffer2.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 2, 32767, -32768);
                    this[offset] = value & 255;
                    this[offset + 1] = value >>> 8;
                    return offset + 2;
                  };
                  Buffer2.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 2, 32767, -32768);
                    this[offset] = value >>> 8;
                    this[offset + 1] = value & 255;
                    return offset + 2;
                  };
                  Buffer2.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 4, 2147483647, -2147483648);
                    this[offset] = value & 255;
                    this[offset + 1] = value >>> 8;
                    this[offset + 2] = value >>> 16;
                    this[offset + 3] = value >>> 24;
                    return offset + 4;
                  };
                  Buffer2.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) checkInt(this, value, offset, 4, 2147483647, -2147483648);
                    if (value < 0) value = 4294967295 + value + 1;
                    this[offset] = value >>> 24;
                    this[offset + 1] = value >>> 16;
                    this[offset + 2] = value >>> 8;
                    this[offset + 3] = value & 255;
                    return offset + 4;
                  };
                  Buffer2.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE(value, offset = 0) {
                    return wrtBigUInt64LE(this, value, offset, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
                  });
                  Buffer2.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE(value, offset = 0) {
                    return wrtBigUInt64BE(this, value, offset, -BigInt("0x8000000000000000"), BigInt("0x7fffffffffffffff"));
                  });
                  function checkIEEE754(buf, value, offset, ext, max, min) {
                    if (offset + ext > buf.length) throw new RangeError("Index out of range");
                    if (offset < 0) throw new RangeError("Index out of range");
                  }
                  function writeFloat(buf, value, offset, littleEndian, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) {
                      checkIEEE754(buf, value, offset, 4, 34028234663852886e22, -34028234663852886e22);
                    }
                    ieee754.write(buf, value, offset, littleEndian, 23, 4);
                    return offset + 4;
                  }
                  Buffer2.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {
                    return writeFloat(this, value, offset, true, noAssert);
                  };
                  Buffer2.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {
                    return writeFloat(this, value, offset, false, noAssert);
                  };
                  function writeDouble(buf, value, offset, littleEndian, noAssert) {
                    value = +value;
                    offset = offset >>> 0;
                    if (!noAssert) {
                      checkIEEE754(buf, value, offset, 8, 17976931348623157e292, -17976931348623157e292);
                    }
                    ieee754.write(buf, value, offset, littleEndian, 52, 8);
                    return offset + 8;
                  }
                  Buffer2.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {
                    return writeDouble(this, value, offset, true, noAssert);
                  };
                  Buffer2.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {
                    return writeDouble(this, value, offset, false, noAssert);
                  };
                  Buffer2.prototype.copy = function copy(target, targetStart, start, end) {
                    if (!Buffer2.isBuffer(target)) throw new TypeError("argument should be a Buffer");
                    if (!start) start = 0;
                    if (!end && end !== 0) end = this.length;
                    if (targetStart >= target.length) targetStart = target.length;
                    if (!targetStart) targetStart = 0;
                    if (end > 0 && end < start) end = start;
                    if (end === start) return 0;
                    if (target.length === 0 || this.length === 0) return 0;
                    if (targetStart < 0) {
                      throw new RangeError("targetStart out of bounds");
                    }
                    if (start < 0 || start >= this.length) throw new RangeError("Index out of range");
                    if (end < 0) throw new RangeError("sourceEnd out of bounds");
                    if (end > this.length) end = this.length;
                    if (target.length - targetStart < end - start) {
                      end = target.length - targetStart + start;
                    }
                    const len = end - start;
                    if (this === target && typeof Uint8Array.prototype.copyWithin === "function") {
                      this.copyWithin(targetStart, start, end);
                    } else {
                      Uint8Array.prototype.set.call(
                        target,
                        this.subarray(start, end),
                        targetStart
                      );
                    }
                    return len;
                  };
                  Buffer2.prototype.fill = function fill(val, start, end, encoding) {
                    if (typeof val === "string") {
                      if (typeof start === "string") {
                        encoding = start;
                        start = 0;
                        end = this.length;
                      } else if (typeof end === "string") {
                        encoding = end;
                        end = this.length;
                      }
                      if (encoding !== void 0 && typeof encoding !== "string") {
                        throw new TypeError("encoding must be a string");
                      }
                      if (typeof encoding === "string" && !Buffer2.isEncoding(encoding)) {
                        throw new TypeError("Unknown encoding: " + encoding);
                      }
                      if (val.length === 1) {
                        const code = val.charCodeAt(0);
                        if (encoding === "utf8" && code < 128 || encoding === "latin1") {
                          val = code;
                        }
                      }
                    } else if (typeof val === "number") {
                      val = val & 255;
                    } else if (typeof val === "boolean") {
                      val = Number(val);
                    }
                    if (start < 0 || this.length < start || this.length < end) {
                      throw new RangeError("Out of range index");
                    }
                    if (end <= start) {
                      return this;
                    }
                    start = start >>> 0;
                    end = end === void 0 ? this.length : end >>> 0;
                    if (!val) val = 0;
                    let i;
                    if (typeof val === "number") {
                      for (i = start; i < end; ++i) {
                        this[i] = val;
                      }
                    } else {
                      const bytes = Buffer2.isBuffer(val) ? val : Buffer2.from(val, encoding);
                      const len = bytes.length;
                      if (len === 0) {
                        throw new TypeError('The value "' + val + '" is invalid for argument "value"');
                      }
                      for (i = 0; i < end - start; ++i) {
                        this[i + start] = bytes[i % len];
                      }
                    }
                    return this;
                  };
                  const errors = {};
                  function E(sym, getMessage, Base) {
                    errors[sym] = class NodeError extends Base {
                      constructor() {
                        super();
                        Object.defineProperty(this, "message", {
                          value: getMessage.apply(this, arguments),
                          writable: true,
                          configurable: true
                        });
                        this.name = `${this.name} [${sym}]`;
                        this.stack;
                        delete this.name;
                      }
                      get code() {
                        return sym;
                      }
                      set code(value) {
                        Object.defineProperty(this, "code", {
                          configurable: true,
                          enumerable: true,
                          value,
                          writable: true
                        });
                      }
                      toString() {
                        return `${this.name} [${sym}]: ${this.message}`;
                      }
                    };
                  }
                  E(
                    "ERR_BUFFER_OUT_OF_BOUNDS",
                    function(name) {
                      if (name) {
                        return `${name} is outside of buffer bounds`;
                      }
                      return "Attempt to access memory outside buffer bounds";
                    },
                    RangeError
                  );
                  E(
                    "ERR_INVALID_ARG_TYPE",
                    function(name, actual) {
                      return `The "${name}" argument must be of type number. Received type ${typeof actual}`;
                    },
                    TypeError
                  );
                  E(
                    "ERR_OUT_OF_RANGE",
                    function(str, range, input) {
                      let msg = `The value of "${str}" is out of range.`;
                      let received = input;
                      if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {
                        received = addNumericalSeparator(String(input));
                      } else if (typeof input === "bigint") {
                        received = String(input);
                        if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {
                          received = addNumericalSeparator(received);
                        }
                        received += "n";
                      }
                      msg += ` It must be ${range}. Received ${received}`;
                      return msg;
                    },
                    RangeError
                  );
                  function addNumericalSeparator(val) {
                    let res = "";
                    let i = val.length;
                    const start = val[0] === "-" ? 1 : 0;
                    for (; i >= start + 4; i -= 3) {
                      res = `_${val.slice(i - 3, i)}${res}`;
                    }
                    return `${val.slice(0, i)}${res}`;
                  }
                  function checkBounds(buf, offset, byteLength2) {
                    validateNumber(offset, "offset");
                    if (buf[offset] === void 0 || buf[offset + byteLength2] === void 0) {
                      boundsError(offset, buf.length - (byteLength2 + 1));
                    }
                  }
                  function checkIntBI(value, min, max, buf, offset, byteLength2) {
                    if (value > max || value < min) {
                      const n = typeof min === "bigint" ? "n" : "";
                      let range;
                      if (byteLength2 > 3) {
                        if (min === 0 || min === BigInt(0)) {
                          range = `>= 0${n} and < 2${n} ** ${(byteLength2 + 1) * 8}${n}`;
                        } else {
                          range = `>= -(2${n} ** ${(byteLength2 + 1) * 8 - 1}${n}) and < 2 ** ${(byteLength2 + 1) * 8 - 1}${n}`;
                        }
                      } else {
                        range = `>= ${min}${n} and <= ${max}${n}`;
                      }
                      throw new errors.ERR_OUT_OF_RANGE("value", range, value);
                    }
                    checkBounds(buf, offset, byteLength2);
                  }
                  function validateNumber(value, name) {
                    if (typeof value !== "number") {
                      throw new errors.ERR_INVALID_ARG_TYPE(name, "number", value);
                    }
                  }
                  function boundsError(value, length, type) {
                    if (Math.floor(value) !== value) {
                      validateNumber(value, type);
                      throw new errors.ERR_OUT_OF_RANGE(type || "offset", "an integer", value);
                    }
                    if (length < 0) {
                      throw new errors.ERR_BUFFER_OUT_OF_BOUNDS();
                    }
                    throw new errors.ERR_OUT_OF_RANGE(
                      type || "offset",
                      `>= ${type ? 1 : 0} and <= ${length}`,
                      value
                    );
                  }
                  const INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g;
                  function base64clean(str) {
                    str = str.split("=")[0];
                    str = str.trim().replace(INVALID_BASE64_RE, "");
                    if (str.length < 2) return "";
                    while (str.length % 4 !== 0) {
                      str = str + "=";
                    }
                    return str;
                  }
                  function utf8ToBytes(string, units) {
                    units = units || Infinity;
                    let codePoint;
                    const length = string.length;
                    let leadSurrogate = null;
                    const bytes = [];
                    for (let i = 0; i < length; ++i) {
                      codePoint = string.charCodeAt(i);
                      if (codePoint > 55295 && codePoint < 57344) {
                        if (!leadSurrogate) {
                          if (codePoint > 56319) {
                            if ((units -= 3) > -1) bytes.push(239, 191, 189);
                            continue;
                          } else if (i + 1 === length) {
                            if ((units -= 3) > -1) bytes.push(239, 191, 189);
                            continue;
                          }
                          leadSurrogate = codePoint;
                          continue;
                        }
                        if (codePoint < 56320) {
                          if ((units -= 3) > -1) bytes.push(239, 191, 189);
                          leadSurrogate = codePoint;
                          continue;
                        }
                        codePoint = (leadSurrogate - 55296 << 10 | codePoint - 56320) + 65536;
                      } else if (leadSurrogate) {
                        if ((units -= 3) > -1) bytes.push(239, 191, 189);
                      }
                      leadSurrogate = null;
                      if (codePoint < 128) {
                        if ((units -= 1) < 0) break;
                        bytes.push(codePoint);
                      } else if (codePoint < 2048) {
                        if ((units -= 2) < 0) break;
                        bytes.push(
                          codePoint >> 6 | 192,
                          codePoint & 63 | 128
                        );
                      } else if (codePoint < 65536) {
                        if ((units -= 3) < 0) break;
                        bytes.push(
                          codePoint >> 12 | 224,
                          codePoint >> 6 & 63 | 128,
                          codePoint & 63 | 128
                        );
                      } else if (codePoint < 1114112) {
                        if ((units -= 4) < 0) break;
                        bytes.push(
                          codePoint >> 18 | 240,
                          codePoint >> 12 & 63 | 128,
                          codePoint >> 6 & 63 | 128,
                          codePoint & 63 | 128
                        );
                      } else {
                        throw new Error("Invalid code point");
                      }
                    }
                    return bytes;
                  }
                  function asciiToBytes(str) {
                    const byteArray = [];
                    for (let i = 0; i < str.length; ++i) {
                      byteArray.push(str.charCodeAt(i) & 255);
                    }
                    return byteArray;
                  }
                  function utf16leToBytes(str, units) {
                    let c, hi, lo;
                    const byteArray = [];
                    for (let i = 0; i < str.length; ++i) {
                      if ((units -= 2) < 0) break;
                      c = str.charCodeAt(i);
                      hi = c >> 8;
                      lo = c % 256;
                      byteArray.push(lo);
                      byteArray.push(hi);
                    }
                    return byteArray;
                  }
                  function base64ToBytes(str) {
                    return base64.toByteArray(base64clean(str));
                  }
                  function blitBuffer(src, dst, offset, length) {
                    let i;
                    for (i = 0; i < length; ++i) {
                      if (i + offset >= dst.length || i >= src.length) break;
                      dst[i + offset] = src[i];
                    }
                    return i;
                  }
                  function isInstance(obj, type) {
                    return obj instanceof type || obj != null && obj.constructor != null && obj.constructor.name != null && obj.constructor.name === type.name;
                  }
                  function numberIsNaN(obj) {
                    return obj !== obj;
                  }
                  const hexSliceLookupTable = (function() {
                    const alphabet = "0123456789abcdef";
                    const table = new Array(256);
                    for (let i = 0; i < 16; ++i) {
                      const i16 = i * 16;
                      for (let j = 0; j < 16; ++j) {
                        table[i16 + j] = alphabet[i] + alphabet[j];
                      }
                    }
                    return table;
                  })();
                  function defineBigIntMethod(fn) {
                    return typeof BigInt === "undefined" ? BufferBigIntNotDefined : fn;
                  }
                  function BufferBigIntNotDefined() {
                    throw new Error("BigInt not supported");
                  }
                })
              ),
              /***/
              5755: (
                /***/
                ((module2, exports2) => {
                  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
                  (function() {
                    "use strict";
                    var hasOwn = {}.hasOwnProperty;
                    function classNames() {
                      var classes = [];
                      for (var i = 0; i < arguments.length; i++) {
                        var arg = arguments[i];
                        if (!arg) continue;
                        var argType = typeof arg;
                        if (argType === "string" || argType === "number") {
                          classes.push(arg);
                        } else if (Array.isArray(arg)) {
                          if (arg.length) {
                            var inner = classNames.apply(null, arg);
                            if (inner) {
                              classes.push(inner);
                            }
                          }
                        } else if (argType === "object") {
                          if (arg.toString === Object.prototype.toString) {
                            for (var key in arg) {
                              if (hasOwn.call(arg, key) && arg[key]) {
                                classes.push(key);
                              }
                            }
                          } else {
                            classes.push(arg.toString());
                          }
                        }
                      }
                      return classes.join(" ");
                    }
                    if (module2.exports) {
                      classNames.default = classNames;
                      module2.exports = classNames;
                    } else if (true) {
                      !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {
                        return classNames;
                      }).apply(exports2, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== void 0 && (module2.exports = __WEBPACK_AMD_DEFINE_RESULT__));
                    } else {
                    }
                  })();
                })
              ),
              /***/
              6401: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = function(element, useCapture) {
                    var self2 = this, Combokeys = self2.constructor;
                    self2.callbacks = {};
                    self2.activeSequences = [];
                    self2.resetTimer;
                    self2.ignoreNextKeyup = false;
                    self2.ignoreNextKeypress = false;
                    self2.nextExpectedAction = false;
                    self2.element = element;
                    self2.addEvents(useCapture);
                    Combokeys.instances.push(self2);
                    return self2;
                  };
                  module2.exports.prototype.bind = __webpack_require__2(4830);
                  module2.exports.prototype.bindMultiple = __webpack_require__2(9829);
                  module2.exports.prototype.trigger = __webpack_require__2(9240);
                  module2.exports.prototype.reset = __webpack_require__2(8967);
                  module2.exports.prototype.stopCallback = __webpack_require__2(8873);
                  module2.exports.prototype.handleKey = __webpack_require__2(1605);
                  module2.exports.prototype.addEvents = __webpack_require__2(486);
                  module2.exports.prototype.bindSingle = __webpack_require__2(4041);
                  module2.exports.prototype.getKeyInfo = __webpack_require__2(553);
                  module2.exports.prototype.pickBestAction = __webpack_require__2(2867);
                  module2.exports.prototype.getReverseMap = __webpack_require__2(7752);
                  module2.exports.prototype.getMatches = __webpack_require__2(3763);
                  module2.exports.prototype.resetSequences = __webpack_require__2(4101);
                  module2.exports.prototype.fireCallback = __webpack_require__2(8805);
                  module2.exports.prototype.bindSequence = __webpack_require__2(8844);
                  module2.exports.prototype.resetSequenceTimer = __webpack_require__2(4173);
                  module2.exports.instances = [];
                  module2.exports.reset = __webpack_require__2(870);
                  module2.exports.REVERSE_MAP = null;
                })
              ),
              /***/
              486: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = function(useCapture) {
                    var self2 = this, addEvent, element = self2.element, handleKeyEvent, boundHandler;
                    handleKeyEvent = __webpack_require__2(1254);
                    addEvent = __webpack_require__2(7193);
                    boundHandler = handleKeyEvent.bind(self2);
                    addEvent(element, "keypress", boundHandler, useCapture);
                    addEvent(element, "keydown", boundHandler, useCapture);
                    addEvent(element, "keyup", boundHandler, useCapture);
                  };
                })
              ),
              /***/
              4830: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(keys, callback, action) {
                    var self2 = this;
                    keys = keys instanceof Array ? keys : [keys];
                    return self2.bindMultiple(keys, callback, action);
                  };
                })
              ),
              /***/
              9829: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(combinations, callback, action) {
                    var self2 = this;
                    var unbinders = [];
                    for (var j = 0; j < combinations.length; ++j) {
                      unbinders.push(self2.bindSingle(combinations[j], callback, action));
                    }
                    return function() {
                      for (var ii = 0; ii < unbinders.length; ii++) {
                        unbinders[ii]();
                      }
                    };
                  };
                })
              ),
              /***/
              8844: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = function(combo, keys, callback, action) {
                    var self2 = this;
                    callback.currentLevel = 0;
                    function increaseSequence(nextAction) {
                      return function() {
                        self2.nextExpectedAction = nextAction;
                        ++callback.currentLevel;
                        self2.resetSequenceTimer();
                        return true;
                      };
                    }
                    function callbackAndReset(e) {
                      var characterFromEvent;
                      self2.fireCallback(callback, e, combo);
                      if (action !== "keyup") {
                        characterFromEvent = __webpack_require__2(7625);
                        self2.ignoreNextKeyup = characterFromEvent(e);
                      }
                      setTimeout(
                        function() {
                          self2.resetSequences();
                        },
                        10
                      );
                    }
                    var unbinders = [];
                    for (var j = 0; j < keys.length; ++j) {
                      var isFinal = j + 1 === keys.length;
                      var wrappedCallback = isFinal ? callbackAndReset : increaseSequence(action || self2.getKeyInfo(keys[j + 1]).action);
                      unbinders.push(self2.bindSingle(keys[j], wrappedCallback, action, combo, j, callback));
                    }
                    return function() {
                      for (var ii = 0; ii < unbinders.length; ii++) {
                        unbinders[ii]();
                      }
                    };
                  };
                })
              ),
              /***/
              4041: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(combination, callback, action, sequenceName, level, originalCallback) {
                    var self2 = this;
                    combination = combination.replace(/\s+/g, " ");
                    var sequence = combination.split(" "), info;
                    if (sequence.length > 1) {
                      return self2.bindSequence(combination, sequence, callback, action);
                    }
                    info = self2.getKeyInfo(combination, action);
                    self2.callbacks[info.key] = self2.callbacks[info.key] || { sequences: [], singles: [] };
                    var callbacksArray = self2.callbacks[info.key][sequenceName ? "sequences" : "singles"];
                    var callbackDefinition = {
                      callback,
                      originalCallback: originalCallback || callback,
                      modifiers: info.modifiers,
                      action: info.action,
                      seq: sequenceName,
                      level,
                      combo: combination
                    };
                    callbacksArray.push(callbackDefinition);
                    return function() {
                      var index = callbacksArray.indexOf(callbackDefinition);
                      callbacksArray.splice(index, 1);
                    };
                  };
                })
              ),
              /***/
              8805: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = function(callback, e, combo, sequence) {
                    var self2 = this, preventDefault, stopPropagation;
                    if (self2.stopCallback(e, e.target || e.srcElement, combo, sequence)) {
                      return true;
                    }
                    var callbackReturnValue = callback(e, combo);
                    if (callbackReturnValue === false) {
                      preventDefault = __webpack_require__2(7623);
                      preventDefault(e);
                      stopPropagation = __webpack_require__2(696);
                      stopPropagation(e);
                    }
                    return callbackReturnValue;
                  };
                })
              ),
              /***/
              553: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = function(combination, action) {
                    var self2 = this, keysFromString, keys, key, j, modifiers = [], SPECIAL_ALIASES, SHIFT_MAP, isModifier;
                    keysFromString = __webpack_require__2(7417);
                    keys = keysFromString(combination);
                    SPECIAL_ALIASES = __webpack_require__2(3232);
                    SHIFT_MAP = __webpack_require__2(8385);
                    isModifier = __webpack_require__2(973);
                    for (j = 0; j < keys.length; ++j) {
                      key = keys[j];
                      if (SPECIAL_ALIASES[key]) {
                        key = SPECIAL_ALIASES[key];
                      }
                      if (action && action !== "keypress" && SHIFT_MAP[key]) {
                        key = SHIFT_MAP[key];
                        modifiers.push("shift");
                      }
                      if (isModifier(key)) {
                        modifiers.push(key);
                      }
                    }
                    action = self2.pickBestAction(key, modifiers, action);
                    return {
                      key,
                      modifiers,
                      action
                    };
                  };
                })
              ),
              /***/
              3763: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = function(character, modifiers, e, sequenceName, combination, level) {
                    var self2 = this, j, callback, matches = [], action = e.type, isModifier, modifiersMatch;
                    if (!self2.callbacks[character]) {
                      return [];
                    }
                    isModifier = __webpack_require__2(973);
                    if (action === "keyup" && isModifier(character)) {
                      modifiers = [character];
                    }
                    var callbackDefinitions = self2.callbacks[character].sequences.reverse().concat(self2.callbacks[character].singles.reverse());
                    self2.callbacks[character].sequences.reverse();
                    self2.callbacks[character].singles.reverse();
                    for (j = 0; j < callbackDefinitions.length; ++j) {
                      var callbackDefinition = callbackDefinitions[j];
                      if (!sequenceName && callbackDefinition.seq && callbackDefinition.originalCallback.currentLevel !== callbackDefinition.level) {
                        continue;
                      }
                      if (action !== callbackDefinition.action) {
                        continue;
                      }
                      modifiersMatch = __webpack_require__2(4069);
                      if (action === "keypress" && !e.metaKey && !e.ctrlKey || modifiersMatch(modifiers, callbackDefinition.modifiers)) {
                        matches.push(callbackDefinition);
                      }
                    }
                    return matches;
                  };
                })
              ),
              /***/
              7752: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = function() {
                    var self2 = this, constructor = self2.constructor, SPECIAL_KEYS_MAP;
                    if (!constructor.REVERSE_MAP) {
                      constructor.REVERSE_MAP = {};
                      SPECIAL_KEYS_MAP = __webpack_require__2(6037);
                      for (var key in SPECIAL_KEYS_MAP) {
                        if (key > 95 && key < 112) {
                          continue;
                        }
                        if (SPECIAL_KEYS_MAP.hasOwnProperty(key)) {
                          constructor.REVERSE_MAP[SPECIAL_KEYS_MAP[key]] = key;
                        }
                      }
                    }
                    return constructor.REVERSE_MAP;
                  };
                })
              ),
              /***/
              1605: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = function(character, modifiers, e) {
                    var self2 = this, callbacks, j, activeSequences = [], maxLevel = 0, processedSequenceCallback = false, isModifier, ignoreThisKeypress;
                    callbacks = self2.getMatches(character, modifiers, e);
                    for (j = 0; j < callbacks.length; ++j) {
                      if (callbacks[j].seq) {
                        maxLevel = Math.max(maxLevel, callbacks[j].level);
                      }
                    }
                    for (j = 0; j < callbacks.length; ++j) {
                      if (callbacks[j].seq) {
                        if (callbacks[j].level !== maxLevel) {
                          continue;
                        }
                        processedSequenceCallback = true;
                        activeSequences.push(callbacks[j].originalCallback);
                        if (!self2.fireCallback(callbacks[j].callback, e, callbacks[j].combo, callbacks[j].seq)) {
                          activeSequences = [];
                          break;
                        }
                        continue;
                      }
                      if (!processedSequenceCallback) {
                        self2.fireCallback(callbacks[j].callback, e, callbacks[j].combo);
                      }
                    }
                    ignoreThisKeypress = e.type === "keypress" && self2.ignoreNextKeypress;
                    isModifier = __webpack_require__2(973);
                    if (e.type === self2.nextExpectedAction && !isModifier(character) && !ignoreThisKeypress) {
                      self2.resetSequences(activeSequences);
                    }
                    self2.ignoreNextKeypress = processedSequenceCallback && e.type === "keydown";
                  };
                })
              ),
              /***/
              1254: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = function(e) {
                    var self2 = this, characterFromEvent, eventModifiers;
                    if (typeof e.which !== "number") {
                      e.which = e.keyCode;
                    }
                    characterFromEvent = __webpack_require__2(7625);
                    var character = characterFromEvent(e);
                    if (!character) {
                      return;
                    }
                    if (e.type === "keyup" && self2.ignoreNextKeyup === character) {
                      self2.ignoreNextKeyup = false;
                      return;
                    }
                    eventModifiers = __webpack_require__2(2490);
                    self2.handleKey(character, eventModifiers(e), e);
                  };
                })
              ),
              /***/
              4069: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(modifiers1, modifiers2) {
                    return modifiers1.sort().join(",") === modifiers2.sort().join(",");
                  };
                })
              ),
              /***/
              2867: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(key, modifiers, action) {
                    var self2 = this;
                    if (!action) {
                      action = self2.getReverseMap()[key] ? "keydown" : "keypress";
                    }
                    if (action === "keypress" && modifiers.length) {
                      action = "keydown";
                    }
                    return action;
                  };
                })
              ),
              /***/
              8967: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function() {
                    var self2 = this;
                    self2.callbacks = {};
                    self2.directMap = {};
                    return this;
                  };
                })
              ),
              /***/
              4173: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function() {
                    var self2 = this;
                    clearTimeout(self2.resetTimer);
                    self2.resetTimer = setTimeout(
                      function() {
                        self2.resetSequences();
                      },
                      1e3
                    );
                  };
                })
              ),
              /***/
              4101: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(activeSequences) {
                    activeSequences = activeSequences || [];
                    for (var key in this.callbacks) {
                      var callbackDefinitions = this.callbacks[key].sequences;
                      for (var ii = 0; ii < callbackDefinitions.length; ii++) {
                        if (activeSequences.indexOf(callbackDefinitions[ii].originalCallback) === -1) {
                          callbackDefinitions[ii].originalCallback.currentLevel = 0;
                        }
                      }
                    }
                    this.nextExpectedAction = activeSequences.length > 0;
                  };
                })
              ),
              /***/
              8873: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(e, element) {
                    if ((" " + element.className + " ").indexOf(" combokeys ") > -1) {
                      return false;
                    }
                    return element.tagName === "INPUT" || element.tagName === "SELECT" || element.tagName === "TEXTAREA" || element.isContentEditable;
                  };
                })
              ),
              /***/
              9240: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(keys, action) {
                  };
                })
              ),
              /***/
              870: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function() {
                    var self2 = this;
                    self2.instances.forEach(function(combokeys) {
                      combokeys.reset();
                    });
                  };
                })
              ),
              /***/
              7193: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(object, type, callback, useCapture) {
                    if (object.addEventListener) {
                      object.addEventListener(type, callback, useCapture);
                      return;
                    }
                    object.attachEvent("on" + type, callback);
                  };
                })
              ),
              /***/
              7625: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = function(e) {
                    var SPECIAL_KEYS_MAP, SPECIAL_CHARACTERS_MAP;
                    SPECIAL_KEYS_MAP = __webpack_require__2(6037);
                    SPECIAL_CHARACTERS_MAP = __webpack_require__2(5129);
                    if (e.type === "keypress") {
                      var character = String.fromCharCode(e.which);
                      if (!e.shiftKey) {
                        character = character.toLowerCase();
                      }
                      return character;
                    }
                    if (SPECIAL_KEYS_MAP[e.which]) {
                      return SPECIAL_KEYS_MAP[e.which];
                    }
                    if (SPECIAL_CHARACTERS_MAP[e.which]) {
                      return SPECIAL_CHARACTERS_MAP[e.which];
                    }
                    return String.fromCharCode(e.which).toLowerCase();
                  };
                })
              ),
              /***/
              2490: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(e) {
                    var modifiers = [];
                    if (e.shiftKey) {
                      modifiers.push("shift");
                    }
                    if (e.altKey) {
                      modifiers.push("alt");
                    }
                    if (e.ctrlKey) {
                      modifiers.push("ctrl");
                    }
                    if (e.metaKey) {
                      modifiers.push("meta");
                    }
                    return modifiers;
                  };
                })
              ),
              /***/
              973: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(key) {
                    return key === "shift" || key === "ctrl" || key === "alt" || key === "meta";
                  };
                })
              ),
              /***/
              7417: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(combination) {
                    if (combination === "+") {
                      return ["+"];
                    }
                    return combination.split("+");
                  };
                })
              ),
              /***/
              7623: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(e) {
                    if (e.preventDefault) {
                      e.preventDefault();
                      return;
                    }
                    e.returnValue = false;
                  };
                })
              ),
              /***/
              8385: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = {
                    "~": "`",
                    "!": "1",
                    "@": "2",
                    "#": "3",
                    "$": "4",
                    "%": "5",
                    "^": "6",
                    "&": "7",
                    "*": "8",
                    "(": "9",
                    ")": "0",
                    "_": "-",
                    "+": "=",
                    ":": ";",
                    '"': "'",
                    "<": ",",
                    ">": ".",
                    "?": "/",
                    "|": "\\"
                  };
                })
              ),
              /***/
              3232: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = {
                    "option": "alt",
                    "command": "meta",
                    "return": "enter",
                    "escape": "esc",
                    "mod": /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? "meta" : "ctrl"
                  };
                })
              ),
              /***/
              5129: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = {
                    106: "*",
                    107: "+",
                    109: "-",
                    110: ".",
                    111: "/",
                    186: ";",
                    187: "=",
                    188: ",",
                    189: "-",
                    190: ".",
                    191: "/",
                    192: "`",
                    219: "[",
                    220: "\\",
                    221: "]",
                    222: "'"
                  };
                })
              ),
              /***/
              6037: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = {
                    8: "backspace",
                    9: "tab",
                    13: "enter",
                    16: "shift",
                    17: "ctrl",
                    18: "alt",
                    20: "capslock",
                    27: "esc",
                    32: "space",
                    33: "pageup",
                    34: "pagedown",
                    35: "end",
                    36: "home",
                    37: "left",
                    38: "up",
                    39: "right",
                    40: "down",
                    45: "ins",
                    46: "del",
                    91: "meta",
                    93: "meta",
                    187: "plus",
                    189: "minus",
                    224: "meta"
                  };
                  for (var i = 1; i < 20; ++i) {
                    module2.exports[111 + i] = "f" + i;
                  }
                  for (i = 0; i <= 9; ++i) {
                    module2.exports[i + 96] = i;
                  }
                })
              ),
              /***/
              696: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(e) {
                    if (e.stopPropagation) {
                      e.stopPropagation();
                      return;
                    }
                    e.cancelBubble = true;
                  };
                })
              ),
              /***/
              4400: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  module2.exports = __webpack_require__2(6401);
                })
              ),
              /***/
              5714: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = containByScreen;
                  var _flatten = _interopRequireDefault(__webpack_require__2(4176));
                  var _uniq = _interopRequireDefault(__webpack_require__2(1285));
                  function containByScreen(element, anchorPoint, options) {
                    if (false) {
                      var style;
                    }
                    var elRect = getBoundingClientRect(element);
                    var anchorRect = getBoundingClientRect(anchorPoint);
                    var buffers = {
                      all: options.buffer || 0,
                      top: options.topBuffer || 0,
                      bottom: options.bottomBuffer || 0,
                      left: options.leftBuffer || 0,
                      right: options.rightBuffer || 0
                    };
                    var optionPositions = Array.isArray(options.position) ? options.position : [options.position].filter(Boolean);
                    var optionHAligns = Array.isArray(options.hAlign) ? options.hAlign : [options.hAlign].filter(Boolean);
                    var optionVAligns = Array.isArray(options.vAlign) ? options.vAlign : [options.vAlign].filter(Boolean);
                    var positions = optionPositions.length > 0 && options.forcePosition ? optionPositions : (0, _uniq.default)(optionPositions.concat(["top", "bottom", "left", "right"]));
                    var hAligns = optionHAligns.length > 0 && options.forceHAlign ? optionHAligns : (0, _uniq.default)(optionHAligns.concat(["center", "left", "right"]));
                    var vAligns = optionVAligns.length > 0 && options.forceVAlign ? optionVAligns : (0, _uniq.default)(optionVAligns.concat(["center", "top", "bottom"]));
                    var allPossibleChoices = (0, _flatten.default)(positions.map(function(position) {
                      return position === "cover" ? (0, _flatten.default)(hAligns.map(function(hAlign) {
                        return vAligns.map(function(vAlign) {
                          return {
                            position,
                            hAlign,
                            vAlign
                          };
                        });
                      })) : position === "top" || position === "bottom" ? hAligns.map(function(hAlign) {
                        return {
                          position,
                          hAlign,
                          vAlign: "center"
                        };
                      }) : vAligns.map(function(vAlign) {
                        return {
                          position,
                          hAlign: "center",
                          vAlign
                        };
                      });
                    }));
                    var choiceAndCoord = null;
                    for (var i = 0; i < allPossibleChoices.length; i++) {
                      var choice = allPossibleChoices[i];
                      var coord = positionAndAlign(elRect, anchorRect, choice, buffers);
                      var top = coord.top, left = coord.left;
                      if (top - buffers.all - buffers.top >= 0 && left - buffers.all - buffers.left >= 0 && top + elRect.height + buffers.all + buffers.bottom <= window.innerHeight && left + elRect.width + buffers.all + buffers.right <= window.innerWidth) {
                        choiceAndCoord = {
                          choice,
                          coord
                        };
                        break;
                      }
                    }
                    if (!choiceAndCoord) {
                      var _choice = {
                        position: optionPositions[0] || "top",
                        hAlign: optionHAligns[0] || "center",
                        vAlign: optionVAligns[0] || "center"
                      };
                      choiceAndCoord = {
                        choice: _choice,
                        coord: positionAndAlign(elRect, anchorRect, _choice, buffers)
                      };
                    }
                    element.style.top = "".concat(choiceAndCoord.coord.top, "px");
                    element.style.left = "".concat(choiceAndCoord.coord.left, "px");
                    return choiceAndCoord.choice;
                  }
                  function getBoundingClientRect(el) {
                    var rect = el.getBoundingClientRect();
                    if (!("width" in rect)) {
                      rect = Object.assign({
                        width: rect.right - rect.left,
                        height: rect.bottom - rect.top
                      }, rect);
                    }
                    return rect;
                  }
                  function positionAndAlign(elRect, anchorRect, _ref, buffers) {
                    var position = _ref.position, hAlign = _ref.hAlign, vAlign = _ref.vAlign;
                    var top = 0, left = 0;
                    if (position === "cover") {
                      switch (hAlign) {
                        case "center":
                          left = Math.round((anchorRect.left + anchorRect.right - elRect.width) / 2);
                          break;
                        case "left":
                          left = Math.floor(anchorRect.left);
                          break;
                        case "right":
                          left = Math.ceil(anchorRect.right - elRect.width);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                      switch (vAlign) {
                        case "center":
                          top = Math.round((anchorRect.top + anchorRect.bottom - elRect.height) / 2);
                          break;
                        case "top":
                          top = Math.floor(anchorRect.top);
                          break;
                        case "bottom":
                          top = Math.ceil(anchorRect.bottom - elRect.height);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                    } else if (position === "top" || position === "bottom") {
                      switch (position) {
                        case "top":
                          top = Math.floor(anchorRect.top - elRect.height - buffers.all - buffers.bottom);
                          break;
                        case "bottom":
                          top = Math.ceil(anchorRect.bottom + buffers.all + buffers.top);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                      switch (hAlign) {
                        case "center":
                          left = Math.round((anchorRect.left + anchorRect.right - elRect.width) / 2);
                          break;
                        case "left":
                          left = Math.round(anchorRect.left);
                          break;
                        case "right":
                          left = Math.round(anchorRect.right - elRect.width);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                    } else {
                      switch (position) {
                        case "left":
                          left = Math.floor(anchorRect.left - elRect.width - buffers.all - buffers.right);
                          break;
                        case "right":
                          left = Math.ceil(anchorRect.right + buffers.all + buffers.left);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                      switch (vAlign) {
                        case "center":
                          top = Math.round((anchorRect.top + anchorRect.bottom - elRect.height) / 2);
                          break;
                        case "top":
                          top = Math.round(anchorRect.top);
                          break;
                        case "bottom":
                          top = Math.round(anchorRect.bottom - elRect.height);
                          break;
                        default:
                          throw new Error("Should not happen");
                      }
                    }
                    return {
                      top,
                      left
                    };
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              1364: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(cssWithMappingToString) {
                    var list = [];
                    list.toString = function toString() {
                      return this.map(function(item) {
                        var content = "";
                        var needLayer = typeof item[5] !== "undefined";
                        if (item[4]) {
                          content += "@supports (".concat(item[4], ") {");
                        }
                        if (item[2]) {
                          content += "@media ".concat(item[2], " {");
                        }
                        if (needLayer) {
                          content += "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {");
                        }
                        content += cssWithMappingToString(item);
                        if (needLayer) {
                          content += "}";
                        }
                        if (item[2]) {
                          content += "}";
                        }
                        if (item[4]) {
                          content += "}";
                        }
                        return content;
                      }).join("");
                    };
                    list.i = function i(modules, media, dedupe, supports, layer) {
                      if (typeof modules === "string") {
                        modules = [[null, modules, void 0]];
                      }
                      var alreadyImportedModules = {};
                      if (dedupe) {
                        for (var k = 0; k < this.length; k++) {
                          var id = this[k][0];
                          if (id != null) {
                            alreadyImportedModules[id] = true;
                          }
                        }
                      }
                      for (var _k = 0; _k < modules.length; _k++) {
                        var item = [].concat(modules[_k]);
                        if (dedupe && alreadyImportedModules[item[0]]) {
                          continue;
                        }
                        if (typeof layer !== "undefined") {
                          if (typeof item[5] === "undefined") {
                            item[5] = layer;
                          } else {
                            item[1] = "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {").concat(item[1], "}");
                            item[5] = layer;
                          }
                        }
                        if (media) {
                          if (!item[2]) {
                            item[2] = media;
                          } else {
                            item[1] = "@media ".concat(item[2], " {").concat(item[1], "}");
                            item[2] = media;
                          }
                        }
                        if (supports) {
                          if (!item[4]) {
                            item[4] = "".concat(supports);
                          } else {
                            item[1] = "@supports (".concat(item[4], ") {").concat(item[1], "}");
                            item[4] = supports;
                          }
                        }
                        list.push(item);
                      }
                    };
                    return list;
                  };
                })
              ),
              /***/
              3615: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(url, options) {
                    if (!options) {
                      options = {};
                    }
                    if (!url) {
                      return url;
                    }
                    url = String(url.__esModule ? url.default : url);
                    if (/^['"].*['"]$/.test(url)) {
                      url = url.slice(1, -1);
                    }
                    if (options.hash) {
                      url += options.hash;
                    }
                    if (/["'() \t\n]|(%20)/.test(url) || options.needQuotes) {
                      return '"'.concat(url.replace(/"/g, '\\"').replace(/\n/g, "\\n"), '"');
                    }
                    return url;
                  };
                })
              ),
              /***/
              5516: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function(item) {
                    var content = item[1];
                    var cssMapping = item[3];
                    if (!cssMapping) {
                      return content;
                    }
                    if (typeof btoa === "function") {
                      var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));
                      var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);
                      var sourceMapping = "/*# ".concat(data, " */");
                      return [content].concat([sourceMapping]).join("\n");
                    }
                    return [content].join("\n");
                  };
                })
              ),
              /***/
              2400: (
                /***/
                (function(module2, exports2, __webpack_require__2) {
                  var __WEBPACK_AMD_DEFINE_RESULT__;
                  ;
                  (function(globalScope) {
                    "use strict";
                    var EXP_LIMIT = 9e15, MAX_DIGITS = 1e9, NUMERALS = "0123456789abcdef", LN10 = "2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058", PI = "3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789", DEFAULTS = {
                      // These values must be integers within the stated ranges (inclusive).
                      // Most of these values can be changed at run-time using the `Decimal.config` method.
                      // The maximum number of significant digits of the result of a calculation or base conversion.
                      // E.g. `Decimal.config({ precision: 20 });`
                      precision: 20,
                      // 1 to MAX_DIGITS
                      // The rounding mode used when rounding to `precision`.
                      //
                      // ROUND_UP         0 Away from zero.
                      // ROUND_DOWN       1 Towards zero.
                      // ROUND_CEIL       2 Towards +Infinity.
                      // ROUND_FLOOR      3 Towards -Infinity.
                      // ROUND_HALF_UP    4 Towards nearest neighbour. If equidistant, up.
                      // ROUND_HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.
                      // ROUND_HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.
                      // ROUND_HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.
                      // ROUND_HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.
                      //
                      // E.g.
                      // `Decimal.rounding = 4;`
                      // `Decimal.rounding = Decimal.ROUND_HALF_UP;`
                      rounding: 4,
                      // 0 to 8
                      // The modulo mode used when calculating the modulus: a mod n.
                      // The quotient (q = a / n) is calculated according to the corresponding rounding mode.
                      // The remainder (r) is calculated as: r = a - n * q.
                      //
                      // UP         0 The remainder is positive if the dividend is negative, else is negative.
                      // DOWN       1 The remainder has the same sign as the dividend (JavaScript %).
                      // FLOOR      3 The remainder has the same sign as the divisor (Python %).
                      // HALF_EVEN  6 The IEEE 754 remainder function.
                      // EUCLID     9 Euclidian division. q = sign(n) * floor(a / abs(n)). Always positive.
                      //
                      // Truncated division (1), floored division (3), the IEEE 754 remainder (6), and Euclidian
                      // division (9) are commonly used for the modulus operation. The other rounding modes can also
                      // be used, but they may not give useful results.
                      modulo: 1,
                      // 0 to 9
                      // The exponent value at and beneath which `toString` returns exponential notation.
                      // JavaScript numbers: -7
                      toExpNeg: -7,
                      // 0 to -EXP_LIMIT
                      // The exponent value at and above which `toString` returns exponential notation.
                      // JavaScript numbers: 21
                      toExpPos: 21,
                      // 0 to EXP_LIMIT
                      // The minimum exponent value, beneath which underflow to zero occurs.
                      // JavaScript numbers: -324  (5e-324)
                      minE: -EXP_LIMIT,
                      // -1 to -EXP_LIMIT
                      // The maximum exponent value, above which overflow to Infinity occurs.
                      // JavaScript numbers: 308  (1.7976931348623157e+308)
                      maxE: EXP_LIMIT,
                      // 1 to EXP_LIMIT
                      // Whether to use cryptographically-secure random number generation, if available.
                      crypto: false
                      // true/false
                    }, Decimal, inexact, noConflict, quadrant, external = true, decimalError = "[DecimalError] ", invalidArgument = decimalError + "Invalid argument: ", precisionLimitExceeded = decimalError + "Precision limit exceeded", cryptoUnavailable = decimalError + "crypto unavailable", mathfloor = Math.floor, mathpow = Math.pow, isBinary = /^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i, isHex = /^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i, isOctal = /^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i, isDecimal = /^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i, BASE = 1e7, LOG_BASE = 7, MAX_SAFE_INTEGER = 9007199254740991, LN10_PRECISION = LN10.length - 1, PI_PRECISION = PI.length - 1, P = { name: "[object Decimal]" };
                    P.absoluteValue = P.abs = function() {
                      var x = new this.constructor(this);
                      if (x.s < 0) x.s = 1;
                      return finalise(x);
                    };
                    P.ceil = function() {
                      return finalise(new this.constructor(this), this.e + 1, 2);
                    };
                    P.comparedTo = P.cmp = function(y) {
                      var i, j, xdL, ydL, x = this, xd = x.d, yd = (y = new x.constructor(y)).d, xs = x.s, ys = y.s;
                      if (!xd || !yd) {
                        return !xs || !ys ? NaN : xs !== ys ? xs : xd === yd ? 0 : !xd ^ xs < 0 ? 1 : -1;
                      }
                      if (!xd[0] || !yd[0]) return xd[0] ? xs : yd[0] ? -ys : 0;
                      if (xs !== ys) return xs;
                      if (x.e !== y.e) return x.e > y.e ^ xs < 0 ? 1 : -1;
                      xdL = xd.length;
                      ydL = yd.length;
                      for (i = 0, j = xdL < ydL ? xdL : ydL; i < j; ++i) {
                        if (xd[i] !== yd[i]) return xd[i] > yd[i] ^ xs < 0 ? 1 : -1;
                      }
                      return xdL === ydL ? 0 : xdL > ydL ^ xs < 0 ? 1 : -1;
                    };
                    P.cosine = P.cos = function() {
                      var pr, rm, x = this, Ctor = x.constructor;
                      if (!x.d) return new Ctor(NaN);
                      if (!x.d[0]) return new Ctor(1);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + Math.max(x.e, x.sd()) + LOG_BASE;
                      Ctor.rounding = 1;
                      x = cosine(Ctor, toLessThanHalfPi(Ctor, x));
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return finalise(quadrant == 2 || quadrant == 3 ? x.neg() : x, pr, rm, true);
                    };
                    P.cubeRoot = P.cbrt = function() {
                      var e, m, n, r, rep, s, sd, t2, t3, t3plusx, x = this, Ctor = x.constructor;
                      if (!x.isFinite() || x.isZero()) return new Ctor(x);
                      external = false;
                      s = x.s * mathpow(x.s * x, 1 / 3);
                      if (!s || Math.abs(s) == 1 / 0) {
                        n = digitsToString(x.d);
                        e = x.e;
                        if (s = (e - n.length + 1) % 3) n += s == 1 || s == -2 ? "0" : "00";
                        s = mathpow(n, 1 / 3);
                        e = mathfloor((e + 1) / 3) - (e % 3 == (e < 0 ? -1 : 2));
                        if (s == 1 / 0) {
                          n = "5e" + e;
                        } else {
                          n = s.toExponential();
                          n = n.slice(0, n.indexOf("e") + 1) + e;
                        }
                        r = new Ctor(n);
                        r.s = x.s;
                      } else {
                        r = new Ctor(s.toString());
                      }
                      sd = (e = Ctor.precision) + 3;
                      for (; ; ) {
                        t2 = r;
                        t3 = t2.times(t2).times(t2);
                        t3plusx = t3.plus(x);
                        r = divide(t3plusx.plus(x).times(t2), t3plusx.plus(t3), sd + 2, 1);
                        if (digitsToString(t2.d).slice(0, sd) === (n = digitsToString(r.d)).slice(0, sd)) {
                          n = n.slice(sd - 3, sd + 1);
                          if (n == "9999" || !rep && n == "4999") {
                            if (!rep) {
                              finalise(t2, e + 1, 0);
                              if (t2.times(t2).times(t2).eq(x)) {
                                r = t2;
                                break;
                              }
                            }
                            sd += 4;
                            rep = 1;
                          } else {
                            if (!+n || !+n.slice(1) && n.charAt(0) == "5") {
                              finalise(r, e + 1, 1);
                              m = !r.times(r).times(r).eq(x);
                            }
                            break;
                          }
                        }
                      }
                      external = true;
                      return finalise(r, e, Ctor.rounding, m);
                    };
                    P.decimalPlaces = P.dp = function() {
                      var w, d = this.d, n = NaN;
                      if (d) {
                        w = d.length - 1;
                        n = (w - mathfloor(this.e / LOG_BASE)) * LOG_BASE;
                        w = d[w];
                        if (w) for (; w % 10 == 0; w /= 10) n--;
                        if (n < 0) n = 0;
                      }
                      return n;
                    };
                    P.dividedBy = P.div = function(y) {
                      return divide(this, new this.constructor(y));
                    };
                    P.dividedToIntegerBy = P.divToInt = function(y) {
                      var x = this, Ctor = x.constructor;
                      return finalise(divide(x, new Ctor(y), 0, 1, 1), Ctor.precision, Ctor.rounding);
                    };
                    P.equals = P.eq = function(y) {
                      return this.cmp(y) === 0;
                    };
                    P.floor = function() {
                      return finalise(new this.constructor(this), this.e + 1, 3);
                    };
                    P.greaterThan = P.gt = function(y) {
                      return this.cmp(y) > 0;
                    };
                    P.greaterThanOrEqualTo = P.gte = function(y) {
                      var k = this.cmp(y);
                      return k == 1 || k === 0;
                    };
                    P.hyperbolicCosine = P.cosh = function() {
                      var k, n, pr, rm, len, x = this, Ctor = x.constructor, one = new Ctor(1);
                      if (!x.isFinite()) return new Ctor(x.s ? 1 / 0 : NaN);
                      if (x.isZero()) return one;
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + Math.max(x.e, x.sd()) + 4;
                      Ctor.rounding = 1;
                      len = x.d.length;
                      if (len < 32) {
                        k = Math.ceil(len / 3);
                        n = (1 / tinyPow(4, k)).toString();
                      } else {
                        k = 16;
                        n = "2.3283064365386962890625e-10";
                      }
                      x = taylorSeries(Ctor, 1, x.times(n), new Ctor(1), true);
                      var cosh2_x, i = k, d8 = new Ctor(8);
                      for (; i--; ) {
                        cosh2_x = x.times(x);
                        x = one.minus(cosh2_x.times(d8.minus(cosh2_x.times(d8))));
                      }
                      return finalise(x, Ctor.precision = pr, Ctor.rounding = rm, true);
                    };
                    P.hyperbolicSine = P.sinh = function() {
                      var k, pr, rm, len, x = this, Ctor = x.constructor;
                      if (!x.isFinite() || x.isZero()) return new Ctor(x);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + Math.max(x.e, x.sd()) + 4;
                      Ctor.rounding = 1;
                      len = x.d.length;
                      if (len < 3) {
                        x = taylorSeries(Ctor, 2, x, x, true);
                      } else {
                        k = 1.4 * Math.sqrt(len);
                        k = k > 16 ? 16 : k | 0;
                        x = x.times(1 / tinyPow(5, k));
                        x = taylorSeries(Ctor, 2, x, x, true);
                        var sinh2_x, d5 = new Ctor(5), d16 = new Ctor(16), d20 = new Ctor(20);
                        for (; k--; ) {
                          sinh2_x = x.times(x);
                          x = x.times(d5.plus(sinh2_x.times(d16.times(sinh2_x).plus(d20))));
                        }
                      }
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return finalise(x, pr, rm, true);
                    };
                    P.hyperbolicTangent = P.tanh = function() {
                      var pr, rm, x = this, Ctor = x.constructor;
                      if (!x.isFinite()) return new Ctor(x.s);
                      if (x.isZero()) return new Ctor(x);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + 7;
                      Ctor.rounding = 1;
                      return divide(x.sinh(), x.cosh(), Ctor.precision = pr, Ctor.rounding = rm);
                    };
                    P.inverseCosine = P.acos = function() {
                      var halfPi, x = this, Ctor = x.constructor, k = x.abs().cmp(1), pr = Ctor.precision, rm = Ctor.rounding;
                      if (k !== -1) {
                        return k === 0 ? x.isNeg() ? getPi(Ctor, pr, rm) : new Ctor(0) : new Ctor(NaN);
                      }
                      if (x.isZero()) return getPi(Ctor, pr + 4, rm).times(0.5);
                      Ctor.precision = pr + 6;
                      Ctor.rounding = 1;
                      x = x.asin();
                      halfPi = getPi(Ctor, pr + 4, rm).times(0.5);
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return halfPi.minus(x);
                    };
                    P.inverseHyperbolicCosine = P.acosh = function() {
                      var pr, rm, x = this, Ctor = x.constructor;
                      if (x.lte(1)) return new Ctor(x.eq(1) ? 0 : NaN);
                      if (!x.isFinite()) return new Ctor(x);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + Math.max(Math.abs(x.e), x.sd()) + 4;
                      Ctor.rounding = 1;
                      external = false;
                      x = x.times(x).minus(1).sqrt().plus(x);
                      external = true;
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return x.ln();
                    };
                    P.inverseHyperbolicSine = P.asinh = function() {
                      var pr, rm, x = this, Ctor = x.constructor;
                      if (!x.isFinite() || x.isZero()) return new Ctor(x);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + 2 * Math.max(Math.abs(x.e), x.sd()) + 6;
                      Ctor.rounding = 1;
                      external = false;
                      x = x.times(x).plus(1).sqrt().plus(x);
                      external = true;
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return x.ln();
                    };
                    P.inverseHyperbolicTangent = P.atanh = function() {
                      var pr, rm, wpr, xsd, x = this, Ctor = x.constructor;
                      if (!x.isFinite()) return new Ctor(NaN);
                      if (x.e >= 0) return new Ctor(x.abs().eq(1) ? x.s / 0 : x.isZero() ? x : NaN);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      xsd = x.sd();
                      if (Math.max(xsd, pr) < 2 * -x.e - 1) return finalise(new Ctor(x), pr, rm, true);
                      Ctor.precision = wpr = xsd - x.e;
                      x = divide(x.plus(1), new Ctor(1).minus(x), wpr + pr, 1);
                      Ctor.precision = pr + 4;
                      Ctor.rounding = 1;
                      x = x.ln();
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return x.times(0.5);
                    };
                    P.inverseSine = P.asin = function() {
                      var halfPi, k, pr, rm, x = this, Ctor = x.constructor;
                      if (x.isZero()) return new Ctor(x);
                      k = x.abs().cmp(1);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      if (k !== -1) {
                        if (k === 0) {
                          halfPi = getPi(Ctor, pr + 4, rm).times(0.5);
                          halfPi.s = x.s;
                          return halfPi;
                        }
                        return new Ctor(NaN);
                      }
                      Ctor.precision = pr + 6;
                      Ctor.rounding = 1;
                      x = x.div(new Ctor(1).minus(x.times(x)).sqrt().plus(1)).atan();
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return x.times(2);
                    };
                    P.inverseTangent = P.atan = function() {
                      var i, j, k, n, px, t2, r, wpr, x2, x = this, Ctor = x.constructor, pr = Ctor.precision, rm = Ctor.rounding;
                      if (!x.isFinite()) {
                        if (!x.s) return new Ctor(NaN);
                        if (pr + 4 <= PI_PRECISION) {
                          r = getPi(Ctor, pr + 4, rm).times(0.5);
                          r.s = x.s;
                          return r;
                        }
                      } else if (x.isZero()) {
                        return new Ctor(x);
                      } else if (x.abs().eq(1) && pr + 4 <= PI_PRECISION) {
                        r = getPi(Ctor, pr + 4, rm).times(0.25);
                        r.s = x.s;
                        return r;
                      }
                      Ctor.precision = wpr = pr + 10;
                      Ctor.rounding = 1;
                      k = Math.min(28, wpr / LOG_BASE + 2 | 0);
                      for (i = k; i; --i) x = x.div(x.times(x).plus(1).sqrt().plus(1));
                      external = false;
                      j = Math.ceil(wpr / LOG_BASE);
                      n = 1;
                      x2 = x.times(x);
                      r = new Ctor(x);
                      px = x;
                      for (; i !== -1; ) {
                        px = px.times(x2);
                        t2 = r.minus(px.div(n += 2));
                        px = px.times(x2);
                        r = t2.plus(px.div(n += 2));
                        if (r.d[j] !== void 0) for (i = j; r.d[i] === t2.d[i] && i--; ) ;
                      }
                      if (k) r = r.times(2 << k - 1);
                      external = true;
                      return finalise(r, Ctor.precision = pr, Ctor.rounding = rm, true);
                    };
                    P.isFinite = function() {
                      return !!this.d;
                    };
                    P.isInteger = P.isInt = function() {
                      return !!this.d && mathfloor(this.e / LOG_BASE) > this.d.length - 2;
                    };
                    P.isNaN = function() {
                      return !this.s;
                    };
                    P.isNegative = P.isNeg = function() {
                      return this.s < 0;
                    };
                    P.isPositive = P.isPos = function() {
                      return this.s > 0;
                    };
                    P.isZero = function() {
                      return !!this.d && this.d[0] === 0;
                    };
                    P.lessThan = P.lt = function(y) {
                      return this.cmp(y) < 0;
                    };
                    P.lessThanOrEqualTo = P.lte = function(y) {
                      return this.cmp(y) < 1;
                    };
                    P.logarithm = P.log = function(base) {
                      var isBase10, d, denominator, k, inf, num, sd, r, arg = this, Ctor = arg.constructor, pr = Ctor.precision, rm = Ctor.rounding, guard = 5;
                      if (base == null) {
                        base = new Ctor(10);
                        isBase10 = true;
                      } else {
                        base = new Ctor(base);
                        d = base.d;
                        if (base.s < 0 || !d || !d[0] || base.eq(1)) return new Ctor(NaN);
                        isBase10 = base.eq(10);
                      }
                      d = arg.d;
                      if (arg.s < 0 || !d || !d[0] || arg.eq(1)) {
                        return new Ctor(d && !d[0] ? -1 / 0 : arg.s != 1 ? NaN : d ? 0 : 1 / 0);
                      }
                      if (isBase10) {
                        if (d.length > 1) {
                          inf = true;
                        } else {
                          for (k = d[0]; k % 10 === 0; ) k /= 10;
                          inf = k !== 1;
                        }
                      }
                      external = false;
                      sd = pr + guard;
                      num = naturalLogarithm(arg, sd);
                      denominator = isBase10 ? getLn10(Ctor, sd + 10) : naturalLogarithm(base, sd);
                      r = divide(num, denominator, sd, 1);
                      if (checkRoundingDigits(r.d, k = pr, rm)) {
                        do {
                          sd += 10;
                          num = naturalLogarithm(arg, sd);
                          denominator = isBase10 ? getLn10(Ctor, sd + 10) : naturalLogarithm(base, sd);
                          r = divide(num, denominator, sd, 1);
                          if (!inf) {
                            if (+digitsToString(r.d).slice(k + 1, k + 15) + 1 == 1e14) {
                              r = finalise(r, pr + 1, 0);
                            }
                            break;
                          }
                        } while (checkRoundingDigits(r.d, k += 10, rm));
                      }
                      external = true;
                      return finalise(r, pr, rm);
                    };
                    P.minus = P.sub = function(y) {
                      var d, e, i, j, k, len, pr, rm, xd, xe, xLTy, yd, x = this, Ctor = x.constructor;
                      y = new Ctor(y);
                      if (!x.d || !y.d) {
                        if (!x.s || !y.s) y = new Ctor(NaN);
                        else if (x.d) y.s = -y.s;
                        else y = new Ctor(y.d || x.s !== y.s ? x : NaN);
                        return y;
                      }
                      if (x.s != y.s) {
                        y.s = -y.s;
                        return x.plus(y);
                      }
                      xd = x.d;
                      yd = y.d;
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      if (!xd[0] || !yd[0]) {
                        if (yd[0]) y.s = -y.s;
                        else if (xd[0]) y = new Ctor(x);
                        else return new Ctor(rm === 3 ? -0 : 0);
                        return external ? finalise(y, pr, rm) : y;
                      }
                      e = mathfloor(y.e / LOG_BASE);
                      xe = mathfloor(x.e / LOG_BASE);
                      xd = xd.slice();
                      k = xe - e;
                      if (k) {
                        xLTy = k < 0;
                        if (xLTy) {
                          d = xd;
                          k = -k;
                          len = yd.length;
                        } else {
                          d = yd;
                          e = xe;
                          len = xd.length;
                        }
                        i = Math.max(Math.ceil(pr / LOG_BASE), len) + 2;
                        if (k > i) {
                          k = i;
                          d.length = 1;
                        }
                        d.reverse();
                        for (i = k; i--; ) d.push(0);
                        d.reverse();
                      } else {
                        i = xd.length;
                        len = yd.length;
                        xLTy = i < len;
                        if (xLTy) len = i;
                        for (i = 0; i < len; i++) {
                          if (xd[i] != yd[i]) {
                            xLTy = xd[i] < yd[i];
                            break;
                          }
                        }
                        k = 0;
                      }
                      if (xLTy) {
                        d = xd;
                        xd = yd;
                        yd = d;
                        y.s = -y.s;
                      }
                      len = xd.length;
                      for (i = yd.length - len; i > 0; --i) xd[len++] = 0;
                      for (i = yd.length; i > k; ) {
                        if (xd[--i] < yd[i]) {
                          for (j = i; j && xd[--j] === 0; ) xd[j] = BASE - 1;
                          --xd[j];
                          xd[i] += BASE;
                        }
                        xd[i] -= yd[i];
                      }
                      for (; xd[--len] === 0; ) xd.pop();
                      for (; xd[0] === 0; xd.shift()) --e;
                      if (!xd[0]) return new Ctor(rm === 3 ? -0 : 0);
                      y.d = xd;
                      y.e = getBase10Exponent(xd, e);
                      return external ? finalise(y, pr, rm) : y;
                    };
                    P.modulo = P.mod = function(y) {
                      var q, x = this, Ctor = x.constructor;
                      y = new Ctor(y);
                      if (!x.d || !y.s || y.d && !y.d[0]) return new Ctor(NaN);
                      if (!y.d || x.d && !x.d[0]) {
                        return finalise(new Ctor(x), Ctor.precision, Ctor.rounding);
                      }
                      external = false;
                      if (Ctor.modulo == 9) {
                        q = divide(x, y.abs(), 0, 3, 1);
                        q.s *= y.s;
                      } else {
                        q = divide(x, y, 0, Ctor.modulo, 1);
                      }
                      q = q.times(y);
                      external = true;
                      return x.minus(q);
                    };
                    P.naturalExponential = P.exp = function() {
                      return naturalExponential(this);
                    };
                    P.naturalLogarithm = P.ln = function() {
                      return naturalLogarithm(this);
                    };
                    P.negated = P.neg = function() {
                      var x = new this.constructor(this);
                      x.s = -x.s;
                      return finalise(x);
                    };
                    P.plus = P.add = function(y) {
                      var carry, d, e, i, k, len, pr, rm, xd, yd, x = this, Ctor = x.constructor;
                      y = new Ctor(y);
                      if (!x.d || !y.d) {
                        if (!x.s || !y.s) y = new Ctor(NaN);
                        else if (!x.d) y = new Ctor(y.d || x.s === y.s ? x : NaN);
                        return y;
                      }
                      if (x.s != y.s) {
                        y.s = -y.s;
                        return x.minus(y);
                      }
                      xd = x.d;
                      yd = y.d;
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      if (!xd[0] || !yd[0]) {
                        if (!yd[0]) y = new Ctor(x);
                        return external ? finalise(y, pr, rm) : y;
                      }
                      k = mathfloor(x.e / LOG_BASE);
                      e = mathfloor(y.e / LOG_BASE);
                      xd = xd.slice();
                      i = k - e;
                      if (i) {
                        if (i < 0) {
                          d = xd;
                          i = -i;
                          len = yd.length;
                        } else {
                          d = yd;
                          e = k;
                          len = xd.length;
                        }
                        k = Math.ceil(pr / LOG_BASE);
                        len = k > len ? k + 1 : len + 1;
                        if (i > len) {
                          i = len;
                          d.length = 1;
                        }
                        d.reverse();
                        for (; i--; ) d.push(0);
                        d.reverse();
                      }
                      len = xd.length;
                      i = yd.length;
                      if (len - i < 0) {
                        i = len;
                        d = yd;
                        yd = xd;
                        xd = d;
                      }
                      for (carry = 0; i; ) {
                        carry = (xd[--i] = xd[i] + yd[i] + carry) / BASE | 0;
                        xd[i] %= BASE;
                      }
                      if (carry) {
                        xd.unshift(carry);
                        ++e;
                      }
                      for (len = xd.length; xd[--len] == 0; ) xd.pop();
                      y.d = xd;
                      y.e = getBase10Exponent(xd, e);
                      return external ? finalise(y, pr, rm) : y;
                    };
                    P.precision = P.sd = function(z) {
                      var k, x = this;
                      if (z !== void 0 && z !== !!z && z !== 1 && z !== 0) throw Error(invalidArgument + z);
                      if (x.d) {
                        k = getPrecision(x.d);
                        if (z && x.e + 1 > k) k = x.e + 1;
                      } else {
                        k = NaN;
                      }
                      return k;
                    };
                    P.round = function() {
                      var x = this, Ctor = x.constructor;
                      return finalise(new Ctor(x), x.e + 1, Ctor.rounding);
                    };
                    P.sine = P.sin = function() {
                      var pr, rm, x = this, Ctor = x.constructor;
                      if (!x.isFinite()) return new Ctor(NaN);
                      if (x.isZero()) return new Ctor(x);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + Math.max(x.e, x.sd()) + LOG_BASE;
                      Ctor.rounding = 1;
                      x = sine(Ctor, toLessThanHalfPi(Ctor, x));
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return finalise(quadrant > 2 ? x.neg() : x, pr, rm, true);
                    };
                    P.squareRoot = P.sqrt = function() {
                      var m, n, sd, r, rep, t2, x = this, d = x.d, e = x.e, s = x.s, Ctor = x.constructor;
                      if (s !== 1 || !d || !d[0]) {
                        return new Ctor(!s || s < 0 && (!d || d[0]) ? NaN : d ? x : 1 / 0);
                      }
                      external = false;
                      s = Math.sqrt(+x);
                      if (s == 0 || s == 1 / 0) {
                        n = digitsToString(d);
                        if ((n.length + e) % 2 == 0) n += "0";
                        s = Math.sqrt(n);
                        e = mathfloor((e + 1) / 2) - (e < 0 || e % 2);
                        if (s == 1 / 0) {
                          n = "5e" + e;
                        } else {
                          n = s.toExponential();
                          n = n.slice(0, n.indexOf("e") + 1) + e;
                        }
                        r = new Ctor(n);
                      } else {
                        r = new Ctor(s.toString());
                      }
                      sd = (e = Ctor.precision) + 3;
                      for (; ; ) {
                        t2 = r;
                        r = t2.plus(divide(x, t2, sd + 2, 1)).times(0.5);
                        if (digitsToString(t2.d).slice(0, sd) === (n = digitsToString(r.d)).slice(0, sd)) {
                          n = n.slice(sd - 3, sd + 1);
                          if (n == "9999" || !rep && n == "4999") {
                            if (!rep) {
                              finalise(t2, e + 1, 0);
                              if (t2.times(t2).eq(x)) {
                                r = t2;
                                break;
                              }
                            }
                            sd += 4;
                            rep = 1;
                          } else {
                            if (!+n || !+n.slice(1) && n.charAt(0) == "5") {
                              finalise(r, e + 1, 1);
                              m = !r.times(r).eq(x);
                            }
                            break;
                          }
                        }
                      }
                      external = true;
                      return finalise(r, e, Ctor.rounding, m);
                    };
                    P.tangent = P.tan = function() {
                      var pr, rm, x = this, Ctor = x.constructor;
                      if (!x.isFinite()) return new Ctor(NaN);
                      if (x.isZero()) return new Ctor(x);
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      Ctor.precision = pr + 10;
                      Ctor.rounding = 1;
                      x = x.sin();
                      x.s = 1;
                      x = divide(x, new Ctor(1).minus(x.times(x)).sqrt(), pr + 10, 0);
                      Ctor.precision = pr;
                      Ctor.rounding = rm;
                      return finalise(quadrant == 2 || quadrant == 4 ? x.neg() : x, pr, rm, true);
                    };
                    P.times = P.mul = function(y) {
                      var carry, e, i, k, r, rL, t2, xdL, ydL, x = this, Ctor = x.constructor, xd = x.d, yd = (y = new Ctor(y)).d;
                      y.s *= x.s;
                      if (!xd || !xd[0] || !yd || !yd[0]) {
                        return new Ctor(!y.s || xd && !xd[0] && !yd || yd && !yd[0] && !xd ? NaN : !xd || !yd ? y.s / 0 : y.s * 0);
                      }
                      e = mathfloor(x.e / LOG_BASE) + mathfloor(y.e / LOG_BASE);
                      xdL = xd.length;
                      ydL = yd.length;
                      if (xdL < ydL) {
                        r = xd;
                        xd = yd;
                        yd = r;
                        rL = xdL;
                        xdL = ydL;
                        ydL = rL;
                      }
                      r = [];
                      rL = xdL + ydL;
                      for (i = rL; i--; ) r.push(0);
                      for (i = ydL; --i >= 0; ) {
                        carry = 0;
                        for (k = xdL + i; k > i; ) {
                          t2 = r[k] + yd[i] * xd[k - i - 1] + carry;
                          r[k--] = t2 % BASE | 0;
                          carry = t2 / BASE | 0;
                        }
                        r[k] = (r[k] + carry) % BASE | 0;
                      }
                      for (; !r[--rL]; ) r.pop();
                      if (carry) ++e;
                      else r.shift();
                      y.d = r;
                      y.e = getBase10Exponent(r, e);
                      return external ? finalise(y, Ctor.precision, Ctor.rounding) : y;
                    };
                    P.toBinary = function(sd, rm) {
                      return toStringBinary(this, 2, sd, rm);
                    };
                    P.toDecimalPlaces = P.toDP = function(dp, rm) {
                      var x = this, Ctor = x.constructor;
                      x = new Ctor(x);
                      if (dp === void 0) return x;
                      checkInt32(dp, 0, MAX_DIGITS);
                      if (rm === void 0) rm = Ctor.rounding;
                      else checkInt32(rm, 0, 8);
                      return finalise(x, dp + x.e + 1, rm);
                    };
                    P.toExponential = function(dp, rm) {
                      var str, x = this, Ctor = x.constructor;
                      if (dp === void 0) {
                        str = finiteToString(x, true);
                      } else {
                        checkInt32(dp, 0, MAX_DIGITS);
                        if (rm === void 0) rm = Ctor.rounding;
                        else checkInt32(rm, 0, 8);
                        x = finalise(new Ctor(x), dp + 1, rm);
                        str = finiteToString(x, true, dp + 1);
                      }
                      return x.isNeg() && !x.isZero() ? "-" + str : str;
                    };
                    P.toFixed = function(dp, rm) {
                      var str, y, x = this, Ctor = x.constructor;
                      if (dp === void 0) {
                        str = finiteToString(x);
                      } else {
                        checkInt32(dp, 0, MAX_DIGITS);
                        if (rm === void 0) rm = Ctor.rounding;
                        else checkInt32(rm, 0, 8);
                        y = finalise(new Ctor(x), dp + x.e + 1, rm);
                        str = finiteToString(y, false, dp + y.e + 1);
                      }
                      return x.isNeg() && !x.isZero() ? "-" + str : str;
                    };
                    P.toFraction = function(maxD) {
                      var d, d0, d1, d2, e, k, n, n0, n1, pr, q, r, x = this, xd = x.d, Ctor = x.constructor;
                      if (!xd) return new Ctor(x);
                      n1 = d0 = new Ctor(1);
                      d1 = n0 = new Ctor(0);
                      d = new Ctor(d1);
                      e = d.e = getPrecision(xd) - x.e - 1;
                      k = e % LOG_BASE;
                      d.d[0] = mathpow(10, k < 0 ? LOG_BASE + k : k);
                      if (maxD == null) {
                        maxD = e > 0 ? d : n1;
                      } else {
                        n = new Ctor(maxD);
                        if (!n.isInt() || n.lt(n1)) throw Error(invalidArgument + n);
                        maxD = n.gt(d) ? e > 0 ? d : n1 : n;
                      }
                      external = false;
                      n = new Ctor(digitsToString(xd));
                      pr = Ctor.precision;
                      Ctor.precision = e = xd.length * LOG_BASE * 2;
                      for (; ; ) {
                        q = divide(n, d, 0, 1, 1);
                        d2 = d0.plus(q.times(d1));
                        if (d2.cmp(maxD) == 1) break;
                        d0 = d1;
                        d1 = d2;
                        d2 = n1;
                        n1 = n0.plus(q.times(d2));
                        n0 = d2;
                        d2 = d;
                        d = n.minus(q.times(d2));
                        n = d2;
                      }
                      d2 = divide(maxD.minus(d0), d1, 0, 1, 1);
                      n0 = n0.plus(d2.times(n1));
                      d0 = d0.plus(d2.times(d1));
                      n0.s = n1.s = x.s;
                      r = divide(n1, d1, e, 1).minus(x).abs().cmp(divide(n0, d0, e, 1).minus(x).abs()) < 1 ? [n1, d1] : [n0, d0];
                      Ctor.precision = pr;
                      external = true;
                      return r;
                    };
                    P.toHexadecimal = P.toHex = function(sd, rm) {
                      return toStringBinary(this, 16, sd, rm);
                    };
                    P.toNearest = function(y, rm) {
                      var x = this, Ctor = x.constructor;
                      x = new Ctor(x);
                      if (y == null) {
                        if (!x.d) return x;
                        y = new Ctor(1);
                        rm = Ctor.rounding;
                      } else {
                        y = new Ctor(y);
                        if (rm === void 0) {
                          rm = Ctor.rounding;
                        } else {
                          checkInt32(rm, 0, 8);
                        }
                        if (!x.d) return y.s ? x : y;
                        if (!y.d) {
                          if (y.s) y.s = x.s;
                          return y;
                        }
                      }
                      if (y.d[0]) {
                        external = false;
                        x = divide(x, y, 0, rm, 1).times(y);
                        external = true;
                        finalise(x);
                      } else {
                        y.s = x.s;
                        x = y;
                      }
                      return x;
                    };
                    P.toNumber = function() {
                      return +this;
                    };
                    P.toOctal = function(sd, rm) {
                      return toStringBinary(this, 8, sd, rm);
                    };
                    P.toPower = P.pow = function(y) {
                      var e, k, pr, r, rm, s, x = this, Ctor = x.constructor, yn = +(y = new Ctor(y));
                      if (!x.d || !y.d || !x.d[0] || !y.d[0]) return new Ctor(mathpow(+x, yn));
                      x = new Ctor(x);
                      if (x.eq(1)) return x;
                      pr = Ctor.precision;
                      rm = Ctor.rounding;
                      if (y.eq(1)) return finalise(x, pr, rm);
                      e = mathfloor(y.e / LOG_BASE);
                      if (e >= y.d.length - 1 && (k = yn < 0 ? -yn : yn) <= MAX_SAFE_INTEGER) {
                        r = intPow(Ctor, x, k, pr);
                        return y.s < 0 ? new Ctor(1).div(r) : finalise(r, pr, rm);
                      }
                      s = x.s;
                      if (s < 0) {
                        if (e < y.d.length - 1) return new Ctor(NaN);
                        if ((y.d[e] & 1) == 0) s = 1;
                        if (x.e == 0 && x.d[0] == 1 && x.d.length == 1) {
                          x.s = s;
                          return x;
                        }
                      }
                      k = mathpow(+x, yn);
                      e = k == 0 || !isFinite(k) ? mathfloor(yn * (Math.log("0." + digitsToString(x.d)) / Math.LN10 + x.e + 1)) : new Ctor(k + "").e;
                      if (e > Ctor.maxE + 1 || e < Ctor.minE - 1) return new Ctor(e > 0 ? s / 0 : 0);
                      external = false;
                      Ctor.rounding = x.s = 1;
                      k = Math.min(12, (e + "").length);
                      r = naturalExponential(y.times(naturalLogarithm(x, pr + k)), pr);
                      if (r.d) {
                        r = finalise(r, pr + 5, 1);
                        if (checkRoundingDigits(r.d, pr, rm)) {
                          e = pr + 10;
                          r = finalise(naturalExponential(y.times(naturalLogarithm(x, e + k)), e), e + 5, 1);
                          if (+digitsToString(r.d).slice(pr + 1, pr + 15) + 1 == 1e14) {
                            r = finalise(r, pr + 1, 0);
                          }
                        }
                      }
                      r.s = s;
                      external = true;
                      Ctor.rounding = rm;
                      return finalise(r, pr, rm);
                    };
                    P.toPrecision = function(sd, rm) {
                      var str, x = this, Ctor = x.constructor;
                      if (sd === void 0) {
                        str = finiteToString(x, x.e <= Ctor.toExpNeg || x.e >= Ctor.toExpPos);
                      } else {
                        checkInt32(sd, 1, MAX_DIGITS);
                        if (rm === void 0) rm = Ctor.rounding;
                        else checkInt32(rm, 0, 8);
                        x = finalise(new Ctor(x), sd, rm);
                        str = finiteToString(x, sd <= x.e || x.e <= Ctor.toExpNeg, sd);
                      }
                      return x.isNeg() && !x.isZero() ? "-" + str : str;
                    };
                    P.toSignificantDigits = P.toSD = function(sd, rm) {
                      var x = this, Ctor = x.constructor;
                      if (sd === void 0) {
                        sd = Ctor.precision;
                        rm = Ctor.rounding;
                      } else {
                        checkInt32(sd, 1, MAX_DIGITS);
                        if (rm === void 0) rm = Ctor.rounding;
                        else checkInt32(rm, 0, 8);
                      }
                      return finalise(new Ctor(x), sd, rm);
                    };
                    P.toString = function() {
                      var x = this, Ctor = x.constructor, str = finiteToString(x, x.e <= Ctor.toExpNeg || x.e >= Ctor.toExpPos);
                      return x.isNeg() && !x.isZero() ? "-" + str : str;
                    };
                    P.truncated = P.trunc = function() {
                      return finalise(new this.constructor(this), this.e + 1, 1);
                    };
                    P.valueOf = P.toJSON = function() {
                      var x = this, Ctor = x.constructor, str = finiteToString(x, x.e <= Ctor.toExpNeg || x.e >= Ctor.toExpPos);
                      return x.isNeg() ? "-" + str : str;
                    };
                    function digitsToString(d) {
                      var i, k, ws, indexOfLastWord = d.length - 1, str = "", w = d[0];
                      if (indexOfLastWord > 0) {
                        str += w;
                        for (i = 1; i < indexOfLastWord; i++) {
                          ws = d[i] + "";
                          k = LOG_BASE - ws.length;
                          if (k) str += getZeroString(k);
                          str += ws;
                        }
                        w = d[i];
                        ws = w + "";
                        k = LOG_BASE - ws.length;
                        if (k) str += getZeroString(k);
                      } else if (w === 0) {
                        return "0";
                      }
                      for (; w % 10 === 0; ) w /= 10;
                      return str + w;
                    }
                    function checkInt32(i, min2, max2) {
                      if (i !== ~~i || i < min2 || i > max2) {
                        throw Error(invalidArgument + i);
                      }
                    }
                    function checkRoundingDigits(d, i, rm, repeating) {
                      var di, k, r, rd;
                      for (k = d[0]; k >= 10; k /= 10) --i;
                      if (--i < 0) {
                        i += LOG_BASE;
                        di = 0;
                      } else {
                        di = Math.ceil((i + 1) / LOG_BASE);
                        i %= LOG_BASE;
                      }
                      k = mathpow(10, LOG_BASE - i);
                      rd = d[di] % k | 0;
                      if (repeating == null) {
                        if (i < 3) {
                          if (i == 0) rd = rd / 100 | 0;
                          else if (i == 1) rd = rd / 10 | 0;
                          r = rm < 4 && rd == 99999 || rm > 3 && rd == 49999 || rd == 5e4 || rd == 0;
                        } else {
                          r = (rm < 4 && rd + 1 == k || rm > 3 && rd + 1 == k / 2) && (d[di + 1] / k / 100 | 0) == mathpow(10, i - 2) - 1 || (rd == k / 2 || rd == 0) && (d[di + 1] / k / 100 | 0) == 0;
                        }
                      } else {
                        if (i < 4) {
                          if (i == 0) rd = rd / 1e3 | 0;
                          else if (i == 1) rd = rd / 100 | 0;
                          else if (i == 2) rd = rd / 10 | 0;
                          r = (repeating || rm < 4) && rd == 9999 || !repeating && rm > 3 && rd == 4999;
                        } else {
                          r = ((repeating || rm < 4) && rd + 1 == k || !repeating && rm > 3 && rd + 1 == k / 2) && (d[di + 1] / k / 1e3 | 0) == mathpow(10, i - 3) - 1;
                        }
                      }
                      return r;
                    }
                    function convertBase(str, baseIn, baseOut) {
                      var j, arr = [0], arrL, i = 0, strL = str.length;
                      for (; i < strL; ) {
                        for (arrL = arr.length; arrL--; ) arr[arrL] *= baseIn;
                        arr[0] += NUMERALS.indexOf(str.charAt(i++));
                        for (j = 0; j < arr.length; j++) {
                          if (arr[j] > baseOut - 1) {
                            if (arr[j + 1] === void 0) arr[j + 1] = 0;
                            arr[j + 1] += arr[j] / baseOut | 0;
                            arr[j] %= baseOut;
                          }
                        }
                      }
                      return arr.reverse();
                    }
                    function cosine(Ctor, x) {
                      var k, y, len = x.d.length;
                      if (len < 32) {
                        k = Math.ceil(len / 3);
                        y = (1 / tinyPow(4, k)).toString();
                      } else {
                        k = 16;
                        y = "2.3283064365386962890625e-10";
                      }
                      Ctor.precision += k;
                      x = taylorSeries(Ctor, 1, x.times(y), new Ctor(1));
                      for (var i = k; i--; ) {
                        var cos2x = x.times(x);
                        x = cos2x.times(cos2x).minus(cos2x).times(8).plus(1);
                      }
                      Ctor.precision -= k;
                      return x;
                    }
                    var divide = /* @__PURE__ */ (function() {
                      function multiplyInteger(x, k, base) {
                        var temp, carry = 0, i = x.length;
                        for (x = x.slice(); i--; ) {
                          temp = x[i] * k + carry;
                          x[i] = temp % base | 0;
                          carry = temp / base | 0;
                        }
                        if (carry) x.unshift(carry);
                        return x;
                      }
                      function compare(a, b, aL, bL) {
                        var i, r;
                        if (aL != bL) {
                          r = aL > bL ? 1 : -1;
                        } else {
                          for (i = r = 0; i < aL; i++) {
                            if (a[i] != b[i]) {
                              r = a[i] > b[i] ? 1 : -1;
                              break;
                            }
                          }
                        }
                        return r;
                      }
                      function subtract(a, b, aL, base) {
                        var i = 0;
                        for (; aL--; ) {
                          a[aL] -= i;
                          i = a[aL] < b[aL] ? 1 : 0;
                          a[aL] = i * base + a[aL] - b[aL];
                        }
                        for (; !a[0] && a.length > 1; ) a.shift();
                      }
                      return function(x, y, pr, rm, dp, base) {
                        var cmp, e, i, k, logBase, more, prod, prodL, q, qd, rem, remL, rem0, sd, t2, xi, xL, yd0, yL, yz, Ctor = x.constructor, sign2 = x.s == y.s ? 1 : -1, xd = x.d, yd = y.d;
                        if (!xd || !xd[0] || !yd || !yd[0]) {
                          return new Ctor(
                            // Return NaN if either NaN, or both Infinity or 0.
                            !x.s || !y.s || (xd ? yd && xd[0] == yd[0] : !yd) ? NaN : (
                              // Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.
                              xd && xd[0] == 0 || !yd ? sign2 * 0 : sign2 / 0
                            )
                          );
                        }
                        if (base) {
                          logBase = 1;
                          e = x.e - y.e;
                        } else {
                          base = BASE;
                          logBase = LOG_BASE;
                          e = mathfloor(x.e / logBase) - mathfloor(y.e / logBase);
                        }
                        yL = yd.length;
                        xL = xd.length;
                        q = new Ctor(sign2);
                        qd = q.d = [];
                        for (i = 0; yd[i] == (xd[i] || 0); i++) ;
                        if (yd[i] > (xd[i] || 0)) e--;
                        if (pr == null) {
                          sd = pr = Ctor.precision;
                          rm = Ctor.rounding;
                        } else if (dp) {
                          sd = pr + (x.e - y.e) + 1;
                        } else {
                          sd = pr;
                        }
                        if (sd < 0) {
                          qd.push(1);
                          more = true;
                        } else {
                          sd = sd / logBase + 2 | 0;
                          i = 0;
                          if (yL == 1) {
                            k = 0;
                            yd = yd[0];
                            sd++;
                            for (; (i < xL || k) && sd--; i++) {
                              t2 = k * base + (xd[i] || 0);
                              qd[i] = t2 / yd | 0;
                              k = t2 % yd | 0;
                            }
                            more = k || i < xL;
                          } else {
                            k = base / (yd[0] + 1) | 0;
                            if (k > 1) {
                              yd = multiplyInteger(yd, k, base);
                              xd = multiplyInteger(xd, k, base);
                              yL = yd.length;
                              xL = xd.length;
                            }
                            xi = yL;
                            rem = xd.slice(0, yL);
                            remL = rem.length;
                            for (; remL < yL; ) rem[remL++] = 0;
                            yz = yd.slice();
                            yz.unshift(0);
                            yd0 = yd[0];
                            if (yd[1] >= base / 2) ++yd0;
                            do {
                              k = 0;
                              cmp = compare(yd, rem, yL, remL);
                              if (cmp < 0) {
                                rem0 = rem[0];
                                if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);
                                k = rem0 / yd0 | 0;
                                if (k > 1) {
                                  if (k >= base) k = base - 1;
                                  prod = multiplyInteger(yd, k, base);
                                  prodL = prod.length;
                                  remL = rem.length;
                                  cmp = compare(prod, rem, prodL, remL);
                                  if (cmp == 1) {
                                    k--;
                                    subtract(prod, yL < prodL ? yz : yd, prodL, base);
                                  }
                                } else {
                                  if (k == 0) cmp = k = 1;
                                  prod = yd.slice();
                                }
                                prodL = prod.length;
                                if (prodL < remL) prod.unshift(0);
                                subtract(rem, prod, remL, base);
                                if (cmp == -1) {
                                  remL = rem.length;
                                  cmp = compare(yd, rem, yL, remL);
                                  if (cmp < 1) {
                                    k++;
                                    subtract(rem, yL < remL ? yz : yd, remL, base);
                                  }
                                }
                                remL = rem.length;
                              } else if (cmp === 0) {
                                k++;
                                rem = [0];
                              }
                              qd[i++] = k;
                              if (cmp && rem[0]) {
                                rem[remL++] = xd[xi] || 0;
                              } else {
                                rem = [xd[xi]];
                                remL = 1;
                              }
                            } while ((xi++ < xL || rem[0] !== void 0) && sd--);
                            more = rem[0] !== void 0;
                          }
                          if (!qd[0]) qd.shift();
                        }
                        if (logBase == 1) {
                          q.e = e;
                          inexact = more;
                        } else {
                          for (i = 1, k = qd[0]; k >= 10; k /= 10) i++;
                          q.e = i + e * logBase - 1;
                          finalise(q, dp ? pr + q.e + 1 : pr, rm, more);
                        }
                        return q;
                      };
                    })();
                    function finalise(x, sd, rm, isTruncated) {
                      var digits, i, j, k, rd, roundUp, w, xd, xdi, Ctor = x.constructor;
                      out: if (sd != null) {
                        xd = x.d;
                        if (!xd) return x;
                        for (digits = 1, k = xd[0]; k >= 10; k /= 10) digits++;
                        i = sd - digits;
                        if (i < 0) {
                          i += LOG_BASE;
                          j = sd;
                          w = xd[xdi = 0];
                          rd = w / mathpow(10, digits - j - 1) % 10 | 0;
                        } else {
                          xdi = Math.ceil((i + 1) / LOG_BASE);
                          k = xd.length;
                          if (xdi >= k) {
                            if (isTruncated) {
                              for (; k++ <= xdi; ) xd.push(0);
                              w = rd = 0;
                              digits = 1;
                              i %= LOG_BASE;
                              j = i - LOG_BASE + 1;
                            } else {
                              break out;
                            }
                          } else {
                            w = k = xd[xdi];
                            for (digits = 1; k >= 10; k /= 10) digits++;
                            i %= LOG_BASE;
                            j = i - LOG_BASE + digits;
                            rd = j < 0 ? 0 : w / mathpow(10, digits - j - 1) % 10 | 0;
                          }
                        }
                        isTruncated = isTruncated || sd < 0 || xd[xdi + 1] !== void 0 || (j < 0 ? w : w % mathpow(10, digits - j - 1));
                        roundUp = rm < 4 ? (rd || isTruncated) && (rm == 0 || rm == (x.s < 0 ? 3 : 2)) : rd > 5 || rd == 5 && (rm == 4 || isTruncated || rm == 6 && // Check whether the digit to the left of the rounding digit is odd.
                        (i > 0 ? j > 0 ? w / mathpow(10, digits - j) : 0 : xd[xdi - 1]) % 10 & 1 || rm == (x.s < 0 ? 8 : 7));
                        if (sd < 1 || !xd[0]) {
                          xd.length = 0;
                          if (roundUp) {
                            sd -= x.e + 1;
                            xd[0] = mathpow(10, (LOG_BASE - sd % LOG_BASE) % LOG_BASE);
                            x.e = -sd || 0;
                          } else {
                            xd[0] = x.e = 0;
                          }
                          return x;
                        }
                        if (i == 0) {
                          xd.length = xdi;
                          k = 1;
                          xdi--;
                        } else {
                          xd.length = xdi + 1;
                          k = mathpow(10, LOG_BASE - i);
                          xd[xdi] = j > 0 ? (w / mathpow(10, digits - j) % mathpow(10, j) | 0) * k : 0;
                        }
                        if (roundUp) {
                          for (; ; ) {
                            if (xdi == 0) {
                              for (i = 1, j = xd[0]; j >= 10; j /= 10) i++;
                              j = xd[0] += k;
                              for (k = 1; j >= 10; j /= 10) k++;
                              if (i != k) {
                                x.e++;
                                if (xd[0] == BASE) xd[0] = 1;
                              }
                              break;
                            } else {
                              xd[xdi] += k;
                              if (xd[xdi] != BASE) break;
                              xd[xdi--] = 0;
                              k = 1;
                            }
                          }
                        }
                        for (i = xd.length; xd[--i] === 0; ) xd.pop();
                      }
                      if (external) {
                        if (x.e > Ctor.maxE) {
                          x.d = null;
                          x.e = NaN;
                        } else if (x.e < Ctor.minE) {
                          x.e = 0;
                          x.d = [0];
                        }
                      }
                      return x;
                    }
                    function finiteToString(x, isExp, sd) {
                      if (!x.isFinite()) return nonFiniteToString(x);
                      var k, e = x.e, str = digitsToString(x.d), len = str.length;
                      if (isExp) {
                        if (sd && (k = sd - len) > 0) {
                          str = str.charAt(0) + "." + str.slice(1) + getZeroString(k);
                        } else if (len > 1) {
                          str = str.charAt(0) + "." + str.slice(1);
                        }
                        str = str + (x.e < 0 ? "e" : "e+") + x.e;
                      } else if (e < 0) {
                        str = "0." + getZeroString(-e - 1) + str;
                        if (sd && (k = sd - len) > 0) str += getZeroString(k);
                      } else if (e >= len) {
                        str += getZeroString(e + 1 - len);
                        if (sd && (k = sd - e - 1) > 0) str = str + "." + getZeroString(k);
                      } else {
                        if ((k = e + 1) < len) str = str.slice(0, k) + "." + str.slice(k);
                        if (sd && (k = sd - len) > 0) {
                          if (e + 1 === len) str += ".";
                          str += getZeroString(k);
                        }
                      }
                      return str;
                    }
                    function getBase10Exponent(digits, e) {
                      var w = digits[0];
                      for (e *= LOG_BASE; w >= 10; w /= 10) e++;
                      return e;
                    }
                    function getLn10(Ctor, sd, pr) {
                      if (sd > LN10_PRECISION) {
                        external = true;
                        if (pr) Ctor.precision = pr;
                        throw Error(precisionLimitExceeded);
                      }
                      return finalise(new Ctor(LN10), sd, 1, true);
                    }
                    function getPi(Ctor, sd, rm) {
                      if (sd > PI_PRECISION) throw Error(precisionLimitExceeded);
                      return finalise(new Ctor(PI), sd, rm, true);
                    }
                    function getPrecision(digits) {
                      var w = digits.length - 1, len = w * LOG_BASE + 1;
                      w = digits[w];
                      if (w) {
                        for (; w % 10 == 0; w /= 10) len--;
                        for (w = digits[0]; w >= 10; w /= 10) len++;
                      }
                      return len;
                    }
                    function getZeroString(k) {
                      var zs = "";
                      for (; k--; ) zs += "0";
                      return zs;
                    }
                    function intPow(Ctor, x, n, pr) {
                      var isTruncated, r = new Ctor(1), k = Math.ceil(pr / LOG_BASE + 4);
                      external = false;
                      for (; ; ) {
                        if (n % 2) {
                          r = r.times(x);
                          if (truncate(r.d, k)) isTruncated = true;
                        }
                        n = mathfloor(n / 2);
                        if (n === 0) {
                          n = r.d.length - 1;
                          if (isTruncated && r.d[n] === 0) ++r.d[n];
                          break;
                        }
                        x = x.times(x);
                        truncate(x.d, k);
                      }
                      external = true;
                      return r;
                    }
                    function isOdd(n) {
                      return n.d[n.d.length - 1] & 1;
                    }
                    function maxOrMin(Ctor, args, ltgt) {
                      var y, x = new Ctor(args[0]), i = 0;
                      for (; ++i < args.length; ) {
                        y = new Ctor(args[i]);
                        if (!y.s) {
                          x = y;
                          break;
                        } else if (x[ltgt](y)) {
                          x = y;
                        }
                      }
                      return x;
                    }
                    function naturalExponential(x, sd) {
                      var denominator, guard, j, pow2, sum, t2, wpr, rep = 0, i = 0, k = 0, Ctor = x.constructor, rm = Ctor.rounding, pr = Ctor.precision;
                      if (!x.d || !x.d[0] || x.e > 17) {
                        return new Ctor(x.d ? !x.d[0] ? 1 : x.s < 0 ? 0 : 1 / 0 : x.s ? x.s < 0 ? 0 : x : 0 / 0);
                      }
                      if (sd == null) {
                        external = false;
                        wpr = pr;
                      } else {
                        wpr = sd;
                      }
                      t2 = new Ctor(0.03125);
                      while (x.e > -2) {
                        x = x.times(t2);
                        k += 5;
                      }
                      guard = Math.log(mathpow(2, k)) / Math.LN10 * 2 + 5 | 0;
                      wpr += guard;
                      denominator = pow2 = sum = new Ctor(1);
                      Ctor.precision = wpr;
                      for (; ; ) {
                        pow2 = finalise(pow2.times(x), wpr, 1);
                        denominator = denominator.times(++i);
                        t2 = sum.plus(divide(pow2, denominator, wpr, 1));
                        if (digitsToString(t2.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {
                          j = k;
                          while (j--) sum = finalise(sum.times(sum), wpr, 1);
                          if (sd == null) {
                            if (rep < 3 && checkRoundingDigits(sum.d, wpr - guard, rm, rep)) {
                              Ctor.precision = wpr += 10;
                              denominator = pow2 = t2 = new Ctor(1);
                              i = 0;
                              rep++;
                            } else {
                              return finalise(sum, Ctor.precision = pr, rm, external = true);
                            }
                          } else {
                            Ctor.precision = pr;
                            return sum;
                          }
                        }
                        sum = t2;
                      }
                    }
                    function naturalLogarithm(y, sd) {
                      var c, c0, denominator, e, numerator, rep, sum, t2, wpr, x1, x2, n = 1, guard = 10, x = y, xd = x.d, Ctor = x.constructor, rm = Ctor.rounding, pr = Ctor.precision;
                      if (x.s < 0 || !xd || !xd[0] || !x.e && xd[0] == 1 && xd.length == 1) {
                        return new Ctor(xd && !xd[0] ? -1 / 0 : x.s != 1 ? NaN : xd ? 0 : x);
                      }
                      if (sd == null) {
                        external = false;
                        wpr = pr;
                      } else {
                        wpr = sd;
                      }
                      Ctor.precision = wpr += guard;
                      c = digitsToString(xd);
                      c0 = c.charAt(0);
                      if (Math.abs(e = x.e) < 15e14) {
                        while (c0 < 7 && c0 != 1 || c0 == 1 && c.charAt(1) > 3) {
                          x = x.times(y);
                          c = digitsToString(x.d);
                          c0 = c.charAt(0);
                          n++;
                        }
                        e = x.e;
                        if (c0 > 1) {
                          x = new Ctor("0." + c);
                          e++;
                        } else {
                          x = new Ctor(c0 + "." + c.slice(1));
                        }
                      } else {
                        t2 = getLn10(Ctor, wpr + 2, pr).times(e + "");
                        x = naturalLogarithm(new Ctor(c0 + "." + c.slice(1)), wpr - guard).plus(t2);
                        Ctor.precision = pr;
                        return sd == null ? finalise(x, pr, rm, external = true) : x;
                      }
                      x1 = x;
                      sum = numerator = x = divide(x.minus(1), x.plus(1), wpr, 1);
                      x2 = finalise(x.times(x), wpr, 1);
                      denominator = 3;
                      for (; ; ) {
                        numerator = finalise(numerator.times(x2), wpr, 1);
                        t2 = sum.plus(divide(numerator, new Ctor(denominator), wpr, 1));
                        if (digitsToString(t2.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {
                          sum = sum.times(2);
                          if (e !== 0) sum = sum.plus(getLn10(Ctor, wpr + 2, pr).times(e + ""));
                          sum = divide(sum, new Ctor(n), wpr, 1);
                          if (sd == null) {
                            if (checkRoundingDigits(sum.d, wpr - guard, rm, rep)) {
                              Ctor.precision = wpr += guard;
                              t2 = numerator = x = divide(x1.minus(1), x1.plus(1), wpr, 1);
                              x2 = finalise(x.times(x), wpr, 1);
                              denominator = rep = 1;
                            } else {
                              return finalise(sum, Ctor.precision = pr, rm, external = true);
                            }
                          } else {
                            Ctor.precision = pr;
                            return sum;
                          }
                        }
                        sum = t2;
                        denominator += 2;
                      }
                    }
                    function nonFiniteToString(x) {
                      return String(x.s * x.s / 0);
                    }
                    function parseDecimal(x, str) {
                      var e, i, len;
                      if ((e = str.indexOf(".")) > -1) str = str.replace(".", "");
                      if ((i = str.search(/e/i)) > 0) {
                        if (e < 0) e = i;
                        e += +str.slice(i + 1);
                        str = str.substring(0, i);
                      } else if (e < 0) {
                        e = str.length;
                      }
                      for (i = 0; str.charCodeAt(i) === 48; i++) ;
                      for (len = str.length; str.charCodeAt(len - 1) === 48; --len) ;
                      str = str.slice(i, len);
                      if (str) {
                        len -= i;
                        x.e = e = e - i - 1;
                        x.d = [];
                        i = (e + 1) % LOG_BASE;
                        if (e < 0) i += LOG_BASE;
                        if (i < len) {
                          if (i) x.d.push(+str.slice(0, i));
                          for (len -= LOG_BASE; i < len; ) x.d.push(+str.slice(i, i += LOG_BASE));
                          str = str.slice(i);
                          i = LOG_BASE - str.length;
                        } else {
                          i -= len;
                        }
                        for (; i--; ) str += "0";
                        x.d.push(+str);
                        if (external) {
                          if (x.e > x.constructor.maxE) {
                            x.d = null;
                            x.e = NaN;
                          } else if (x.e < x.constructor.minE) {
                            x.e = 0;
                            x.d = [0];
                          }
                        }
                      } else {
                        x.e = 0;
                        x.d = [0];
                      }
                      return x;
                    }
                    function parseOther(x, str) {
                      var base, Ctor, divisor, i, isFloat, len, p, xd, xe;
                      if (str === "Infinity" || str === "NaN") {
                        if (!+str) x.s = NaN;
                        x.e = NaN;
                        x.d = null;
                        return x;
                      }
                      if (isHex.test(str)) {
                        base = 16;
                        str = str.toLowerCase();
                      } else if (isBinary.test(str)) {
                        base = 2;
                      } else if (isOctal.test(str)) {
                        base = 8;
                      } else {
                        throw Error(invalidArgument + str);
                      }
                      i = str.search(/p/i);
                      if (i > 0) {
                        p = +str.slice(i + 1);
                        str = str.substring(2, i);
                      } else {
                        str = str.slice(2);
                      }
                      i = str.indexOf(".");
                      isFloat = i >= 0;
                      Ctor = x.constructor;
                      if (isFloat) {
                        str = str.replace(".", "");
                        len = str.length;
                        i = len - i;
                        divisor = intPow(Ctor, new Ctor(base), i, i * 2);
                      }
                      xd = convertBase(str, base, BASE);
                      xe = xd.length - 1;
                      for (i = xe; xd[i] === 0; --i) xd.pop();
                      if (i < 0) return new Ctor(x.s * 0);
                      x.e = getBase10Exponent(xd, xe);
                      x.d = xd;
                      external = false;
                      if (isFloat) x = divide(x, divisor, len * 4);
                      if (p) x = x.times(Math.abs(p) < 54 ? mathpow(2, p) : Decimal.pow(2, p));
                      external = true;
                      return x;
                    }
                    function sine(Ctor, x) {
                      var k, len = x.d.length;
                      if (len < 3) return taylorSeries(Ctor, 2, x, x);
                      k = 1.4 * Math.sqrt(len);
                      k = k > 16 ? 16 : k | 0;
                      x = x.times(1 / tinyPow(5, k));
                      x = taylorSeries(Ctor, 2, x, x);
                      var sin2_x, d5 = new Ctor(5), d16 = new Ctor(16), d20 = new Ctor(20);
                      for (; k--; ) {
                        sin2_x = x.times(x);
                        x = x.times(d5.plus(sin2_x.times(d16.times(sin2_x).minus(d20))));
                      }
                      return x;
                    }
                    function taylorSeries(Ctor, n, x, y, isHyperbolic) {
                      var j, t2, u, x2, i = 1, pr = Ctor.precision, k = Math.ceil(pr / LOG_BASE);
                      external = false;
                      x2 = x.times(x);
                      u = new Ctor(y);
                      for (; ; ) {
                        t2 = divide(u.times(x2), new Ctor(n++ * n++), pr, 1);
                        u = isHyperbolic ? y.plus(t2) : y.minus(t2);
                        y = divide(t2.times(x2), new Ctor(n++ * n++), pr, 1);
                        t2 = u.plus(y);
                        if (t2.d[k] !== void 0) {
                          for (j = k; t2.d[j] === u.d[j] && j--; ) ;
                          if (j == -1) break;
                        }
                        j = u;
                        u = y;
                        y = t2;
                        t2 = j;
                        i++;
                      }
                      external = true;
                      t2.d.length = k + 1;
                      return t2;
                    }
                    function tinyPow(b, e) {
                      var n = b;
                      while (--e) n *= b;
                      return n;
                    }
                    function toLessThanHalfPi(Ctor, x) {
                      var t2, isNeg = x.s < 0, pi = getPi(Ctor, Ctor.precision, 1), halfPi = pi.times(0.5);
                      x = x.abs();
                      if (x.lte(halfPi)) {
                        quadrant = isNeg ? 4 : 1;
                        return x;
                      }
                      t2 = x.divToInt(pi);
                      if (t2.isZero()) {
                        quadrant = isNeg ? 3 : 2;
                      } else {
                        x = x.minus(t2.times(pi));
                        if (x.lte(halfPi)) {
                          quadrant = isOdd(t2) ? isNeg ? 2 : 3 : isNeg ? 4 : 1;
                          return x;
                        }
                        quadrant = isOdd(t2) ? isNeg ? 1 : 4 : isNeg ? 3 : 2;
                      }
                      return x.minus(pi).abs();
                    }
                    function toStringBinary(x, baseOut, sd, rm) {
                      var base, e, i, k, len, roundUp, str, xd, y, Ctor = x.constructor, isExp = sd !== void 0;
                      if (isExp) {
                        checkInt32(sd, 1, MAX_DIGITS);
                        if (rm === void 0) rm = Ctor.rounding;
                        else checkInt32(rm, 0, 8);
                      } else {
                        sd = Ctor.precision;
                        rm = Ctor.rounding;
                      }
                      if (!x.isFinite()) {
                        str = nonFiniteToString(x);
                      } else {
                        str = finiteToString(x);
                        i = str.indexOf(".");
                        if (isExp) {
                          base = 2;
                          if (baseOut == 16) {
                            sd = sd * 4 - 3;
                          } else if (baseOut == 8) {
                            sd = sd * 3 - 2;
                          }
                        } else {
                          base = baseOut;
                        }
                        if (i >= 0) {
                          str = str.replace(".", "");
                          y = new Ctor(1);
                          y.e = str.length - i;
                          y.d = convertBase(finiteToString(y), 10, base);
                          y.e = y.d.length;
                        }
                        xd = convertBase(str, 10, base);
                        e = len = xd.length;
                        for (; xd[--len] == 0; ) xd.pop();
                        if (!xd[0]) {
                          str = isExp ? "0p+0" : "0";
                        } else {
                          if (i < 0) {
                            e--;
                          } else {
                            x = new Ctor(x);
                            x.d = xd;
                            x.e = e;
                            x = divide(x, y, sd, rm, 0, base);
                            xd = x.d;
                            e = x.e;
                            roundUp = inexact;
                          }
                          i = xd[sd];
                          k = base / 2;
                          roundUp = roundUp || xd[sd + 1] !== void 0;
                          roundUp = rm < 4 ? (i !== void 0 || roundUp) && (rm === 0 || rm === (x.s < 0 ? 3 : 2)) : i > k || i === k && (rm === 4 || roundUp || rm === 6 && xd[sd - 1] & 1 || rm === (x.s < 0 ? 8 : 7));
                          xd.length = sd;
                          if (roundUp) {
                            for (; ++xd[--sd] > base - 1; ) {
                              xd[sd] = 0;
                              if (!sd) {
                                ++e;
                                xd.unshift(1);
                              }
                            }
                          }
                          for (len = xd.length; !xd[len - 1]; --len) ;
                          for (i = 0, str = ""; i < len; i++) str += NUMERALS.charAt(xd[i]);
                          if (isExp) {
                            if (len > 1) {
                              if (baseOut == 16 || baseOut == 8) {
                                i = baseOut == 16 ? 4 : 3;
                                for (--len; len % i; len++) str += "0";
                                xd = convertBase(str, base, baseOut);
                                for (len = xd.length; !xd[len - 1]; --len) ;
                                for (i = 1, str = "1."; i < len; i++) str += NUMERALS.charAt(xd[i]);
                              } else {
                                str = str.charAt(0) + "." + str.slice(1);
                              }
                            }
                            str = str + (e < 0 ? "p" : "p+") + e;
                          } else if (e < 0) {
                            for (; ++e; ) str = "0" + str;
                            str = "0." + str;
                          } else {
                            if (++e > len) for (e -= len; e--; ) str += "0";
                            else if (e < len) str = str.slice(0, e) + "." + str.slice(e);
                          }
                        }
                        str = (baseOut == 16 ? "0x" : baseOut == 2 ? "0b" : baseOut == 8 ? "0o" : "") + str;
                      }
                      return x.s < 0 ? "-" + str : str;
                    }
                    function truncate(arr, len) {
                      if (arr.length > len) {
                        arr.length = len;
                        return true;
                      }
                    }
                    function abs(x) {
                      return new this(x).abs();
                    }
                    function acos(x) {
                      return new this(x).acos();
                    }
                    function acosh(x) {
                      return new this(x).acosh();
                    }
                    function add(x, y) {
                      return new this(x).plus(y);
                    }
                    function asin(x) {
                      return new this(x).asin();
                    }
                    function asinh(x) {
                      return new this(x).asinh();
                    }
                    function atan(x) {
                      return new this(x).atan();
                    }
                    function atanh(x) {
                      return new this(x).atanh();
                    }
                    function atan2(y, x) {
                      y = new this(y);
                      x = new this(x);
                      var r, pr = this.precision, rm = this.rounding, wpr = pr + 4;
                      if (!y.s || !x.s) {
                        r = new this(NaN);
                      } else if (!y.d && !x.d) {
                        r = getPi(this, wpr, 1).times(x.s > 0 ? 0.25 : 0.75);
                        r.s = y.s;
                      } else if (!x.d || y.isZero()) {
                        r = x.s < 0 ? getPi(this, pr, rm) : new this(0);
                        r.s = y.s;
                      } else if (!y.d || x.isZero()) {
                        r = getPi(this, wpr, 1).times(0.5);
                        r.s = y.s;
                      } else if (x.s < 0) {
                        this.precision = wpr;
                        this.rounding = 1;
                        r = this.atan(divide(y, x, wpr, 1));
                        x = getPi(this, wpr, 1);
                        this.precision = pr;
                        this.rounding = rm;
                        r = y.s < 0 ? r.minus(x) : r.plus(x);
                      } else {
                        r = this.atan(divide(y, x, wpr, 1));
                      }
                      return r;
                    }
                    function cbrt(x) {
                      return new this(x).cbrt();
                    }
                    function ceil(x) {
                      return finalise(x = new this(x), x.e + 1, 2);
                    }
                    function config(obj) {
                      if (!obj || typeof obj !== "object") throw Error(decimalError + "Object expected");
                      var i, p, v, useDefaults = obj.defaults === true, ps = [
                        "precision",
                        1,
                        MAX_DIGITS,
                        "rounding",
                        0,
                        8,
                        "toExpNeg",
                        -EXP_LIMIT,
                        0,
                        "toExpPos",
                        0,
                        EXP_LIMIT,
                        "maxE",
                        0,
                        EXP_LIMIT,
                        "minE",
                        -EXP_LIMIT,
                        0,
                        "modulo",
                        0,
                        9
                      ];
                      for (i = 0; i < ps.length; i += 3) {
                        if (p = ps[i], useDefaults) this[p] = DEFAULTS[p];
                        if ((v = obj[p]) !== void 0) {
                          if (mathfloor(v) === v && v >= ps[i + 1] && v <= ps[i + 2]) this[p] = v;
                          else throw Error(invalidArgument + p + ": " + v);
                        }
                      }
                      if (p = "crypto", useDefaults) this[p] = DEFAULTS[p];
                      if ((v = obj[p]) !== void 0) {
                        if (v === true || v === false || v === 0 || v === 1) {
                          if (v) {
                            if (typeof crypto != "undefined" && crypto && (crypto.getRandomValues || crypto.randomBytes)) {
                              this[p] = true;
                            } else {
                              throw Error(cryptoUnavailable);
                            }
                          } else {
                            this[p] = false;
                          }
                        } else {
                          throw Error(invalidArgument + p + ": " + v);
                        }
                      }
                      return this;
                    }
                    function cos(x) {
                      return new this(x).cos();
                    }
                    function cosh(x) {
                      return new this(x).cosh();
                    }
                    function clone(obj) {
                      var i, p, ps;
                      function Decimal2(v) {
                        var e, i2, t2, x = this;
                        if (!(x instanceof Decimal2)) return new Decimal2(v);
                        x.constructor = Decimal2;
                        if (v instanceof Decimal2) {
                          x.s = v.s;
                          if (external) {
                            if (!v.d || v.e > Decimal2.maxE) {
                              x.e = NaN;
                              x.d = null;
                            } else if (v.e < Decimal2.minE) {
                              x.e = 0;
                              x.d = [0];
                            } else {
                              x.e = v.e;
                              x.d = v.d.slice();
                            }
                          } else {
                            x.e = v.e;
                            x.d = v.d ? v.d.slice() : v.d;
                          }
                          return;
                        }
                        t2 = typeof v;
                        if (t2 === "number") {
                          if (v === 0) {
                            x.s = 1 / v < 0 ? -1 : 1;
                            x.e = 0;
                            x.d = [0];
                            return;
                          }
                          if (v < 0) {
                            v = -v;
                            x.s = -1;
                          } else {
                            x.s = 1;
                          }
                          if (v === ~~v && v < 1e7) {
                            for (e = 0, i2 = v; i2 >= 10; i2 /= 10) e++;
                            if (external) {
                              if (e > Decimal2.maxE) {
                                x.e = NaN;
                                x.d = null;
                              } else if (e < Decimal2.minE) {
                                x.e = 0;
                                x.d = [0];
                              } else {
                                x.e = e;
                                x.d = [v];
                              }
                            } else {
                              x.e = e;
                              x.d = [v];
                            }
                            return;
                          } else if (v * 0 !== 0) {
                            if (!v) x.s = NaN;
                            x.e = NaN;
                            x.d = null;
                            return;
                          }
                          return parseDecimal(x, v.toString());
                        } else if (t2 !== "string") {
                          throw Error(invalidArgument + v);
                        }
                        if ((i2 = v.charCodeAt(0)) === 45) {
                          v = v.slice(1);
                          x.s = -1;
                        } else {
                          if (i2 === 43) v = v.slice(1);
                          x.s = 1;
                        }
                        return isDecimal.test(v) ? parseDecimal(x, v) : parseOther(x, v);
                      }
                      Decimal2.prototype = P;
                      Decimal2.ROUND_UP = 0;
                      Decimal2.ROUND_DOWN = 1;
                      Decimal2.ROUND_CEIL = 2;
                      Decimal2.ROUND_FLOOR = 3;
                      Decimal2.ROUND_HALF_UP = 4;
                      Decimal2.ROUND_HALF_DOWN = 5;
                      Decimal2.ROUND_HALF_EVEN = 6;
                      Decimal2.ROUND_HALF_CEIL = 7;
                      Decimal2.ROUND_HALF_FLOOR = 8;
                      Decimal2.EUCLID = 9;
                      Decimal2.config = Decimal2.set = config;
                      Decimal2.clone = clone;
                      Decimal2.isDecimal = isDecimalInstance;
                      Decimal2.abs = abs;
                      Decimal2.acos = acos;
                      Decimal2.acosh = acosh;
                      Decimal2.add = add;
                      Decimal2.asin = asin;
                      Decimal2.asinh = asinh;
                      Decimal2.atan = atan;
                      Decimal2.atanh = atanh;
                      Decimal2.atan2 = atan2;
                      Decimal2.cbrt = cbrt;
                      Decimal2.ceil = ceil;
                      Decimal2.cos = cos;
                      Decimal2.cosh = cosh;
                      Decimal2.div = div;
                      Decimal2.exp = exp;
                      Decimal2.floor = floor;
                      Decimal2.hypot = hypot;
                      Decimal2.ln = ln;
                      Decimal2.log = log;
                      Decimal2.log10 = log10;
                      Decimal2.log2 = log2;
                      Decimal2.max = max;
                      Decimal2.min = min;
                      Decimal2.mod = mod;
                      Decimal2.mul = mul;
                      Decimal2.pow = pow;
                      Decimal2.random = random;
                      Decimal2.round = round;
                      Decimal2.sign = sign;
                      Decimal2.sin = sin;
                      Decimal2.sinh = sinh;
                      Decimal2.sqrt = sqrt;
                      Decimal2.sub = sub;
                      Decimal2.tan = tan;
                      Decimal2.tanh = tanh;
                      Decimal2.trunc = trunc;
                      if (obj === void 0) obj = {};
                      if (obj) {
                        if (obj.defaults !== true) {
                          ps = ["precision", "rounding", "toExpNeg", "toExpPos", "maxE", "minE", "modulo", "crypto"];
                          for (i = 0; i < ps.length; ) if (!obj.hasOwnProperty(p = ps[i++])) obj[p] = this[p];
                        }
                      }
                      Decimal2.config(obj);
                      return Decimal2;
                    }
                    function div(x, y) {
                      return new this(x).div(y);
                    }
                    function exp(x) {
                      return new this(x).exp();
                    }
                    function floor(x) {
                      return finalise(x = new this(x), x.e + 1, 3);
                    }
                    function hypot() {
                      var i, n, t2 = new this(0);
                      external = false;
                      for (i = 0; i < arguments.length; ) {
                        n = new this(arguments[i++]);
                        if (!n.d) {
                          if (n.s) {
                            external = true;
                            return new this(1 / 0);
                          }
                          t2 = n;
                        } else if (t2.d) {
                          t2 = t2.plus(n.times(n));
                        }
                      }
                      external = true;
                      return t2.sqrt();
                    }
                    function isDecimalInstance(obj) {
                      return obj instanceof Decimal || obj && obj.name === "[object Decimal]" || false;
                    }
                    function ln(x) {
                      return new this(x).ln();
                    }
                    function log(x, y) {
                      return new this(x).log(y);
                    }
                    function log2(x) {
                      return new this(x).log(2);
                    }
                    function log10(x) {
                      return new this(x).log(10);
                    }
                    function max() {
                      return maxOrMin(this, arguments, "lt");
                    }
                    function min() {
                      return maxOrMin(this, arguments, "gt");
                    }
                    function mod(x, y) {
                      return new this(x).mod(y);
                    }
                    function mul(x, y) {
                      return new this(x).mul(y);
                    }
                    function pow(x, y) {
                      return new this(x).pow(y);
                    }
                    function random(sd) {
                      var d, e, k, n, i = 0, r = new this(1), rd = [];
                      if (sd === void 0) sd = this.precision;
                      else checkInt32(sd, 1, MAX_DIGITS);
                      k = Math.ceil(sd / LOG_BASE);
                      if (!this.crypto) {
                        for (; i < k; ) rd[i++] = Math.random() * 1e7 | 0;
                      } else if (crypto.getRandomValues) {
                        d = crypto.getRandomValues(new Uint32Array(k));
                        for (; i < k; ) {
                          n = d[i];
                          if (n >= 429e7) {
                            d[i] = crypto.getRandomValues(new Uint32Array(1))[0];
                          } else {
                            rd[i++] = n % 1e7;
                          }
                        }
                      } else if (crypto.randomBytes) {
                        d = crypto.randomBytes(k *= 4);
                        for (; i < k; ) {
                          n = d[i] + (d[i + 1] << 8) + (d[i + 2] << 16) + ((d[i + 3] & 127) << 24);
                          if (n >= 214e7) {
                            crypto.randomBytes(4).copy(d, i);
                          } else {
                            rd.push(n % 1e7);
                            i += 4;
                          }
                        }
                        i = k / 4;
                      } else {
                        throw Error(cryptoUnavailable);
                      }
                      k = rd[--i];
                      sd %= LOG_BASE;
                      if (k && sd) {
                        n = mathpow(10, LOG_BASE - sd);
                        rd[i] = (k / n | 0) * n;
                      }
                      for (; rd[i] === 0; i--) rd.pop();
                      if (i < 0) {
                        e = 0;
                        rd = [0];
                      } else {
                        e = -1;
                        for (; rd[0] === 0; e -= LOG_BASE) rd.shift();
                        for (k = 1, n = rd[0]; n >= 10; n /= 10) k++;
                        if (k < LOG_BASE) e -= LOG_BASE - k;
                      }
                      r.e = e;
                      r.d = rd;
                      return r;
                    }
                    function round(x) {
                      return finalise(x = new this(x), x.e + 1, this.rounding);
                    }
                    function sign(x) {
                      x = new this(x);
                      return x.d ? x.d[0] ? x.s : 0 * x.s : x.s || NaN;
                    }
                    function sin(x) {
                      return new this(x).sin();
                    }
                    function sinh(x) {
                      return new this(x).sinh();
                    }
                    function sqrt(x) {
                      return new this(x).sqrt();
                    }
                    function sub(x, y) {
                      return new this(x).sub(y);
                    }
                    function tan(x) {
                      return new this(x).tan();
                    }
                    function tanh(x) {
                      return new this(x).tanh();
                    }
                    function trunc(x) {
                      return finalise(x = new this(x), x.e + 1, 1);
                    }
                    Decimal = clone(DEFAULTS);
                    Decimal["default"] = Decimal.Decimal = Decimal;
                    LN10 = new Decimal(LN10);
                    PI = new Decimal(PI);
                    if (true) {
                      !(__WEBPACK_AMD_DEFINE_RESULT__ = (function() {
                        return Decimal;
                      }).call(exports2, __webpack_require__2, exports2, module2), __WEBPACK_AMD_DEFINE_RESULT__ !== void 0 && (module2.exports = __WEBPACK_AMD_DEFINE_RESULT__));
                    } else {
                    }
                  })(this);
                })
              ),
              /***/
              4785: (
                /***/
                ((module2) => {
                  "use strict";
                  var R = typeof Reflect === "object" ? Reflect : null;
                  var ReflectApply = R && typeof R.apply === "function" ? R.apply : function ReflectApply2(target, receiver, args) {
                    return Function.prototype.apply.call(target, receiver, args);
                  };
                  var ReflectOwnKeys;
                  if (R && typeof R.ownKeys === "function") {
                    ReflectOwnKeys = R.ownKeys;
                  } else if (Object.getOwnPropertySymbols) {
                    ReflectOwnKeys = function ReflectOwnKeys2(target) {
                      return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));
                    };
                  } else {
                    ReflectOwnKeys = function ReflectOwnKeys2(target) {
                      return Object.getOwnPropertyNames(target);
                    };
                  }
                  function ProcessEmitWarning(warning) {
                    if (console && console.warn) console.warn(warning);
                  }
                  var NumberIsNaN = Number.isNaN || function NumberIsNaN2(value) {
                    return value !== value;
                  };
                  function EventEmitter() {
                    EventEmitter.init.call(this);
                  }
                  module2.exports = EventEmitter;
                  module2.exports.once = once;
                  EventEmitter.EventEmitter = EventEmitter;
                  EventEmitter.prototype._events = void 0;
                  EventEmitter.prototype._eventsCount = 0;
                  EventEmitter.prototype._maxListeners = void 0;
                  var defaultMaxListeners = 10;
                  function checkListener(listener) {
                    if (typeof listener !== "function") {
                      throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
                    }
                  }
                  Object.defineProperty(EventEmitter, "defaultMaxListeners", {
                    enumerable: true,
                    get: function() {
                      return defaultMaxListeners;
                    },
                    set: function(arg) {
                      if (typeof arg !== "number" || arg < 0 || NumberIsNaN(arg)) {
                        throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + ".");
                      }
                      defaultMaxListeners = arg;
                    }
                  });
                  EventEmitter.init = function() {
                    if (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) {
                      this._events = /* @__PURE__ */ Object.create(null);
                      this._eventsCount = 0;
                    }
                    this._maxListeners = this._maxListeners || void 0;
                  };
                  EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
                    if (typeof n !== "number" || n < 0 || NumberIsNaN(n)) {
                      throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + ".");
                    }
                    this._maxListeners = n;
                    return this;
                  };
                  function _getMaxListeners(that) {
                    if (that._maxListeners === void 0)
                      return EventEmitter.defaultMaxListeners;
                    return that._maxListeners;
                  }
                  EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
                    return _getMaxListeners(this);
                  };
                  EventEmitter.prototype.emit = function emit(type) {
                    var args = [];
                    for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);
                    var doError = type === "error";
                    var events = this._events;
                    if (events !== void 0)
                      doError = doError && events.error === void 0;
                    else if (!doError)
                      return false;
                    if (doError) {
                      var er;
                      if (args.length > 0)
                        er = args[0];
                      if (er instanceof Error) {
                        throw er;
                      }
                      var err = new Error("Unhandled error." + (er ? " (" + er.message + ")" : ""));
                      err.context = er;
                      throw err;
                    }
                    var handler = events[type];
                    if (handler === void 0)
                      return false;
                    if (typeof handler === "function") {
                      ReflectApply(handler, this, args);
                    } else {
                      var len = handler.length;
                      var listeners = arrayClone(handler, len);
                      for (var i = 0; i < len; ++i)
                        ReflectApply(listeners[i], this, args);
                    }
                    return true;
                  };
                  function _addListener(target, type, listener, prepend) {
                    var m;
                    var events;
                    var existing;
                    checkListener(listener);
                    events = target._events;
                    if (events === void 0) {
                      events = target._events = /* @__PURE__ */ Object.create(null);
                      target._eventsCount = 0;
                    } else {
                      if (events.newListener !== void 0) {
                        target.emit(
                          "newListener",
                          type,
                          listener.listener ? listener.listener : listener
                        );
                        events = target._events;
                      }
                      existing = events[type];
                    }
                    if (existing === void 0) {
                      existing = events[type] = listener;
                      ++target._eventsCount;
                    } else {
                      if (typeof existing === "function") {
                        existing = events[type] = prepend ? [listener, existing] : [existing, listener];
                      } else if (prepend) {
                        existing.unshift(listener);
                      } else {
                        existing.push(listener);
                      }
                      m = _getMaxListeners(target);
                      if (m > 0 && existing.length > m && !existing.warned) {
                        existing.warned = true;
                        var w = new Error("Possible EventEmitter memory leak detected. " + existing.length + " " + String(type) + " listeners added. Use emitter.setMaxListeners() to increase limit");
                        w.name = "MaxListenersExceededWarning";
                        w.emitter = target;
                        w.type = type;
                        w.count = existing.length;
                        ProcessEmitWarning(w);
                      }
                    }
                    return target;
                  }
                  EventEmitter.prototype.addListener = function addListener(type, listener) {
                    return _addListener(this, type, listener, false);
                  };
                  EventEmitter.prototype.on = EventEmitter.prototype.addListener;
                  EventEmitter.prototype.prependListener = function prependListener(type, listener) {
                    return _addListener(this, type, listener, true);
                  };
                  function onceWrapper() {
                    if (!this.fired) {
                      this.target.removeListener(this.type, this.wrapFn);
                      this.fired = true;
                      if (arguments.length === 0)
                        return this.listener.call(this.target);
                      return this.listener.apply(this.target, arguments);
                    }
                  }
                  function _onceWrap(target, type, listener) {
                    var state = { fired: false, wrapFn: void 0, target, type, listener };
                    var wrapped = onceWrapper.bind(state);
                    wrapped.listener = listener;
                    state.wrapFn = wrapped;
                    return wrapped;
                  }
                  EventEmitter.prototype.once = function once2(type, listener) {
                    checkListener(listener);
                    this.on(type, _onceWrap(this, type, listener));
                    return this;
                  };
                  EventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {
                    checkListener(listener);
                    this.prependListener(type, _onceWrap(this, type, listener));
                    return this;
                  };
                  EventEmitter.prototype.removeListener = function removeListener(type, listener) {
                    var list, events, position, i, originalListener;
                    checkListener(listener);
                    events = this._events;
                    if (events === void 0)
                      return this;
                    list = events[type];
                    if (list === void 0)
                      return this;
                    if (list === listener || list.listener === listener) {
                      if (--this._eventsCount === 0)
                        this._events = /* @__PURE__ */ Object.create(null);
                      else {
                        delete events[type];
                        if (events.removeListener)
                          this.emit("removeListener", type, list.listener || listener);
                      }
                    } else if (typeof list !== "function") {
                      position = -1;
                      for (i = list.length - 1; i >= 0; i--) {
                        if (list[i] === listener || list[i].listener === listener) {
                          originalListener = list[i].listener;
                          position = i;
                          break;
                        }
                      }
                      if (position < 0)
                        return this;
                      if (position === 0)
                        list.shift();
                      else {
                        spliceOne(list, position);
                      }
                      if (list.length === 1)
                        events[type] = list[0];
                      if (events.removeListener !== void 0)
                        this.emit("removeListener", type, originalListener || listener);
                    }
                    return this;
                  };
                  EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
                  EventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {
                    var listeners, events, i;
                    events = this._events;
                    if (events === void 0)
                      return this;
                    if (events.removeListener === void 0) {
                      if (arguments.length === 0) {
                        this._events = /* @__PURE__ */ Object.create(null);
                        this._eventsCount = 0;
                      } else if (events[type] !== void 0) {
                        if (--this._eventsCount === 0)
                          this._events = /* @__PURE__ */ Object.create(null);
                        else
                          delete events[type];
                      }
                      return this;
                    }
                    if (arguments.length === 0) {
                      var keys = Object.keys(events);
                      var key;
                      for (i = 0; i < keys.length; ++i) {
                        key = keys[i];
                        if (key === "removeListener") continue;
                        this.removeAllListeners(key);
                      }
                      this.removeAllListeners("removeListener");
                      this._events = /* @__PURE__ */ Object.create(null);
                      this._eventsCount = 0;
                      return this;
                    }
                    listeners = events[type];
                    if (typeof listeners === "function") {
                      this.removeListener(type, listeners);
                    } else if (listeners !== void 0) {
                      for (i = listeners.length - 1; i >= 0; i--) {
                        this.removeListener(type, listeners[i]);
                      }
                    }
                    return this;
                  };
                  function _listeners(target, type, unwrap) {
                    var events = target._events;
                    if (events === void 0)
                      return [];
                    var evlistener = events[type];
                    if (evlistener === void 0)
                      return [];
                    if (typeof evlistener === "function")
                      return unwrap ? [evlistener.listener || evlistener] : [evlistener];
                    return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
                  }
                  EventEmitter.prototype.listeners = function listeners(type) {
                    return _listeners(this, type, true);
                  };
                  EventEmitter.prototype.rawListeners = function rawListeners(type) {
                    return _listeners(this, type, false);
                  };
                  EventEmitter.listenerCount = function(emitter, type) {
                    if (typeof emitter.listenerCount === "function") {
                      return emitter.listenerCount(type);
                    } else {
                      return listenerCount.call(emitter, type);
                    }
                  };
                  EventEmitter.prototype.listenerCount = listenerCount;
                  function listenerCount(type) {
                    var events = this._events;
                    if (events !== void 0) {
                      var evlistener = events[type];
                      if (typeof evlistener === "function") {
                        return 1;
                      } else if (evlistener !== void 0) {
                        return evlistener.length;
                      }
                    }
                    return 0;
                  }
                  EventEmitter.prototype.eventNames = function eventNames() {
                    return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
                  };
                  function arrayClone(arr, n) {
                    var copy = new Array(n);
                    for (var i = 0; i < n; ++i)
                      copy[i] = arr[i];
                    return copy;
                  }
                  function spliceOne(list, index) {
                    for (; index + 1 < list.length; index++)
                      list[index] = list[index + 1];
                    list.pop();
                  }
                  function unwrapListeners(arr) {
                    var ret = new Array(arr.length);
                    for (var i = 0; i < ret.length; ++i) {
                      ret[i] = arr[i].listener || arr[i];
                    }
                    return ret;
                  }
                  function once(emitter, name) {
                    return new Promise(function(resolve, reject) {
                      function errorListener(err) {
                        emitter.removeListener(name, resolver);
                        reject(err);
                      }
                      function resolver() {
                        if (typeof emitter.removeListener === "function") {
                          emitter.removeListener("error", errorListener);
                        }
                        resolve([].slice.call(arguments));
                      }
                      ;
                      eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });
                      if (name !== "error") {
                        addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });
                      }
                    });
                  }
                  function addErrorHandlerIfEventEmitter(emitter, handler, flags) {
                    if (typeof emitter.on === "function") {
                      eventTargetAgnosticAddListener(emitter, "error", handler, flags);
                    }
                  }
                  function eventTargetAgnosticAddListener(emitter, name, listener, flags) {
                    if (typeof emitter.on === "function") {
                      if (flags.once) {
                        emitter.once(name, listener);
                      } else {
                        emitter.on(name, listener);
                      }
                    } else if (typeof emitter.addEventListener === "function") {
                      emitter.addEventListener(name, function wrapListener(arg) {
                        if (flags.once) {
                          emitter.removeEventListener(name, wrapListener);
                        }
                        listener(arg);
                      });
                    } else {
                      throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof emitter);
                    }
                  }
                })
              ),
              /***/
              9482: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  var __webpack_unused_export__;
                  var _interopRequireDefault = __webpack_require__2(1654);
                  __webpack_unused_export__ = {
                    value: true
                  };
                  __webpack_unused_export__ = exports2.np = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var _slicedToArray2 = _interopRequireDefault(__webpack_require__2(6583));
                  var _once = _interopRequireDefault(__webpack_require__2(8921));
                  var _moduleId = __webpack_require__2(917);
                  var _transferrables = _interopRequireDefault(__webpack_require__2(5440));
                  function _createForOfIteratorHelper(o, allowArrayLike) {
                    var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"];
                    if (!it) {
                      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") {
                        if (it) o = it;
                        var i = 0;
                        var F = function F2() {
                        };
                        return { s: F, n: function n() {
                          if (i >= o.length) return { done: true };
                          return { done: false, value: o[i++] };
                        }, e: function e(_e) {
                          throw _e;
                        }, f: F };
                      }
                      throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                    }
                    var normalCompletion = true, didErr = false, err;
                    return { s: function s() {
                      it = it.call(o);
                    }, n: function n() {
                      var step = it.next();
                      normalCompletion = step.done;
                      return step;
                    }, e: function e(_e2) {
                      didErr = true;
                      err = _e2;
                    }, f: function f() {
                      try {
                        if (!normalCompletion && it["return"] != null) it["return"]();
                      } finally {
                        if (didErr) throw err;
                      }
                    } };
                  }
                  function _unsupportedIterableToArray(o, minLen) {
                    if (!o) return;
                    if (typeof o === "string") return _arrayLikeToArray(o, minLen);
                    var n = Object.prototype.toString.call(o).slice(8, -1);
                    if (n === "Object" && o.constructor) n = o.constructor.name;
                    if (n === "Map" || n === "Set") return Array.from(o);
                    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
                  }
                  function _arrayLikeToArray(arr, len) {
                    if (len == null || len > arr.length) len = arr.length;
                    for (var i = 0, arr2 = new Array(len); i < len; i++) {
                      arr2[i] = arr[i];
                    }
                    return arr2;
                  }
                  var getXMLHttpRequest = (0, _once["default"])(function() {
                    var instancesById = {};
                    var channel = new MessageChannel();
                    var port = channel.port1;
                    port.addEventListener("message", function(event) {
                      var _event$data = event.data, id = _event$data.id, type = _event$data.type;
                      var xhr = instancesById[id];
                      switch (type) {
                        case "COMPLETE": {
                          var _event$data2 = event.data, headers = _event$data2.headers, readyState = _event$data2.readyState, status = _event$data2.status, statusText = _event$data2.statusText, response = _event$data2.response, responseText = _event$data2.responseText, responseURL = _event$data2.responseURL;
                          var headersObj = {};
                          headers.split("\r\n").forEach(function(line) {
                            var _line$split = line.split(":"), _line$split2 = (0, _slicedToArray2["default"])(_line$split, 2), name = _line$split2[0], value = _line$split2[1];
                            if (name && value) {
                              headersObj[name.toLowerCase().trim()] = value.trim();
                            }
                          });
                          xhr._headers = headers;
                          xhr._headersObj = headersObj;
                          xhr.status = status;
                          xhr.statusText = statusText;
                          xhr.readyState = readyState;
                          xhr.response = response;
                          xhr.responseText = responseText;
                          xhr.responseURL = responseURL;
                          delete instancesById[id];
                          var _loop = function _loop2() {
                            var event2 = _arr[_i];
                            var eventObj = {
                              name: event2,
                              target: xhr
                            };
                            var handlers = Object.prototype.hasOwnProperty.call(xhr._eventListeners, event2) ? xhr._eventListeners[event2] : [];
                            handlers.forEach(function(handler) {
                              return handler(eventObj);
                            });
                            if (xhr["on" + event2]) {
                              xhr["on" + event2](eventObj);
                            }
                          };
                          for (var _i = 0, _arr = ["load", "loadend", "readystatechange"]; _i < _arr.length; _i++) {
                            _loop();
                          }
                          break;
                        }
                        default: {
                          console.error("ext-corb-workaround: Unknown event in content script:", event);
                        }
                      }
                    });
                    port.addEventListener("messageerror", function(event) {
                      console.error("ext-corb-workaround: Unknown error in content script:", event);
                    });
                    port.start();
                    window.postMessage({
                      type: "ext-corb-workaround_port",
                      moduleId: _moduleId.moduleId,
                      port: channel.port2
                    }, document.location.origin, [channel.port2]);
                    var nextFreeId = 0;
                    var CORBWorkaroundXMLHttpRequest = /* @__PURE__ */ (function() {
                      function CORBWorkaroundXMLHttpRequest2() {
                        var _this = this;
                        (0, _classCallCheck2["default"])(this, CORBWorkaroundXMLHttpRequest2);
                        (0, _defineProperty2["default"])(this, "UNSENT", 0);
                        (0, _defineProperty2["default"])(this, "OPENED", 1);
                        (0, _defineProperty2["default"])(this, "HEADERS_RECEIVED", 2);
                        (0, _defineProperty2["default"])(this, "LOADING", 3);
                        (0, _defineProperty2["default"])(this, "DONE", 4);
                        (0, _defineProperty2["default"])(this, "_id", nextFreeId++);
                        (0, _defineProperty2["default"])(this, "_eventListeners", {});
                        (0, _defineProperty2["default"])(this, "_headersObj", {});
                        (0, _defineProperty2["default"])(this, "status", 0);
                        (0, _defineProperty2["default"])(this, "statusText", "");
                        (0, _defineProperty2["default"])(this, "readyState", 0);
                        (0, _defineProperty2["default"])(this, "response", "");
                        (0, _defineProperty2["default"])(this, "responseText", "");
                        (0, _defineProperty2["default"])(this, "responseURL", "");
                        (0, _defineProperty2["default"])(this, "_headers", "");
                        (0, _defineProperty2["default"])(this, "responseType", void 0);
                        (0, _defineProperty2["default"])(this, "withCredentials", void 0);
                        (0, _defineProperty2["default"])(this, "setRequestHeader", void 0);
                        (0, _defineProperty2["default"])(this, "open", void 0);
                        (0, _defineProperty2["default"])(this, "send", void 0);
                        (0, _defineProperty2["default"])(this, "abort", void 0);
                        var id = this._id;
                        instancesById[id] = this;
                        port.postMessage({
                          type: "NEW_XHR",
                          id
                        });
                        var _iterator = _createForOfIteratorHelper(["responseType", "withCredentials"]), _step;
                        try {
                          var _loop2 = function _loop22() {
                            var prop = _step.value;
                            var value = void 0;
                            Object.defineProperty(_this, prop, {
                              get: function get() {
                                return value;
                              },
                              set: function set(newValue) {
                                value = newValue;
                                port.postMessage({
                                  type: "SET",
                                  id,
                                  prop,
                                  value: newValue
                                });
                              }
                            });
                          };
                          for (_iterator.s(); !(_step = _iterator.n()).done; ) {
                            _loop2();
                          }
                        } catch (err) {
                          _iterator.e(err);
                        } finally {
                          _iterator.f();
                        }
                        var _iterator2 = _createForOfIteratorHelper(["setRequestHeader", "open", "send", "abort"]), _step2;
                        try {
                          var _loop3 = function _loop32() {
                            var method = _step2.value;
                            _this[method] = function() {
                              for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                                args[_key] = arguments[_key];
                              }
                              port.postMessage({
                                type: "CALL",
                                id,
                                method,
                                args
                              }, (0, _transferrables["default"])(args));
                            };
                          };
                          for (_iterator2.s(); !(_step2 = _iterator2.n()).done; ) {
                            _loop3();
                          }
                        } catch (err) {
                          _iterator2.e(err);
                        } finally {
                          _iterator2.f();
                        }
                      }
                      (0, _createClass2["default"])(CORBWorkaroundXMLHttpRequest2, [{
                        key: "getAllResponseHeaders",
                        value: function getAllResponseHeaders() {
                          return this._headers;
                        }
                      }, {
                        key: "getResponseHeader",
                        value: function getResponseHeader(header) {
                          header = header.toLowerCase();
                          if (Object.prototype.hasOwnProperty.call(this._headersObj, header)) {
                            return this._headersObj[header];
                          }
                        }
                      }, {
                        key: "addEventListener",
                        value: function addEventListener(event, handler) {
                          if (!Object.prototype.hasOwnProperty.call(this._eventListeners, event)) {
                            this._eventListeners[event] = [];
                          }
                          this._eventListeners[event].push(handler);
                        }
                      }, {
                        key: "removeEventListener",
                        value: function removeEventListener(event, handler) {
                          if (Object.prototype.hasOwnProperty.call(this._eventListeners, event)) {
                            this._eventListeners[event] = this._eventListeners[event].filter(function(_handler) {
                              return handler !== _handler;
                            });
                          }
                        }
                      }]);
                      return CORBWorkaroundXMLHttpRequest2;
                    })();
                    (0, _defineProperty2["default"])(CORBWorkaroundXMLHttpRequest, "UNSENT", 0);
                    (0, _defineProperty2["default"])(CORBWorkaroundXMLHttpRequest, "OPENED", 1);
                    (0, _defineProperty2["default"])(CORBWorkaroundXMLHttpRequest, "HEADERS_RECEIVED", 2);
                    (0, _defineProperty2["default"])(CORBWorkaroundXMLHttpRequest, "LOADING", 3);
                    (0, _defineProperty2["default"])(CORBWorkaroundXMLHttpRequest, "DONE", 4);
                    return CORBWorkaroundXMLHttpRequest;
                  });
                  exports2.np = getXMLHttpRequest;
                  var installGlobally = (0, _once["default"])(function() {
                    window.XMLHttpRequest = getXMLHttpRequest();
                  });
                  __webpack_unused_export__ = installGlobally;
                })
              ),
              /***/
              917: (
                /***/
                ((__unused_webpack_module, exports2) => {
                  "use strict";
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2.moduleId = void 0;
                  var moduleId = "1f24 e53a";
                  exports2.moduleId = moduleId;
                })
              ),
              /***/
              5440: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = transferrables;
                  var _typeof2 = _interopRequireDefault(__webpack_require__2(2990));
                  function transferrables(list) {
                    return list.map(function(value) {
                      if (value && (0, _typeof2["default"])(value) === "object" && value.__proto__) {
                        if (value.__proto__.constructor.name === "ArrayBuffer") {
                          return value;
                        }
                        if (value.__proto__.__proto__ && value.__proto__.__proto__.constructor.name === "TypedArray") {
                          return value.buffer;
                        }
                      }
                    }).filter(Boolean);
                  }
                })
              ),
              /***/
              5215: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = function equal(a, b) {
                    if (a === b) return true;
                    if (a && b && typeof a == "object" && typeof b == "object") {
                      if (a.constructor !== b.constructor) return false;
                      var length, i, keys;
                      if (Array.isArray(a)) {
                        length = a.length;
                        if (length != b.length) return false;
                        for (i = length; i-- !== 0; )
                          if (!equal(a[i], b[i])) return false;
                        return true;
                      }
                      if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;
                      if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();
                      if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();
                      keys = Object.keys(a);
                      length = keys.length;
                      if (length !== Object.keys(b).length) return false;
                      for (i = length; i-- !== 0; )
                        if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;
                      for (i = length; i-- !== 0; ) {
                        var key = keys[i];
                        if (!equal(a[key], b[key])) return false;
                      }
                      return true;
                    }
                    return a !== a && b !== b;
                  };
                })
              ),
              /***/
              9029: (
                /***/
                ((__unused_webpack_module, exports2) => {
                  exports2.read = function(buffer, offset, isLE, mLen, nBytes) {
                    var e, m;
                    var eLen = nBytes * 8 - mLen - 1;
                    var eMax = (1 << eLen) - 1;
                    var eBias = eMax >> 1;
                    var nBits = -7;
                    var i = isLE ? nBytes - 1 : 0;
                    var d = isLE ? -1 : 1;
                    var s = buffer[offset + i];
                    i += d;
                    e = s & (1 << -nBits) - 1;
                    s >>= -nBits;
                    nBits += eLen;
                    for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {
                    }
                    m = e & (1 << -nBits) - 1;
                    e >>= -nBits;
                    nBits += mLen;
                    for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {
                    }
                    if (e === 0) {
                      e = 1 - eBias;
                    } else if (e === eMax) {
                      return m ? NaN : (s ? -1 : 1) * Infinity;
                    } else {
                      m = m + Math.pow(2, mLen);
                      e = e - eBias;
                    }
                    return (s ? -1 : 1) * m * Math.pow(2, e - mLen);
                  };
                  exports2.write = function(buffer, value, offset, isLE, mLen, nBytes) {
                    var e, m, c;
                    var eLen = nBytes * 8 - mLen - 1;
                    var eMax = (1 << eLen) - 1;
                    var eBias = eMax >> 1;
                    var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;
                    var i = isLE ? 0 : nBytes - 1;
                    var d = isLE ? 1 : -1;
                    var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;
                    value = Math.abs(value);
                    if (isNaN(value) || value === Infinity) {
                      m = isNaN(value) ? 1 : 0;
                      e = eMax;
                    } else {
                      e = Math.floor(Math.log(value) / Math.LN2);
                      if (value * (c = Math.pow(2, -e)) < 1) {
                        e--;
                        c *= 2;
                      }
                      if (e + eBias >= 1) {
                        value += rt / c;
                      } else {
                        value += rt * Math.pow(2, 1 - eBias);
                      }
                      if (value * c >= 2) {
                        e++;
                        c /= 2;
                      }
                      if (e + eBias >= eMax) {
                        m = 0;
                        e = eMax;
                      } else if (e + eBias >= 1) {
                        m = (value * c - 1) * Math.pow(2, mLen);
                        e = e + eBias;
                      } else {
                        m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);
                        e = 0;
                      }
                    }
                    for (; mLen >= 8; buffer[offset + i] = m & 255, i += d, m /= 256, mLen -= 8) {
                    }
                    e = e << mLen | m;
                    eLen += mLen;
                    for (; eLen > 0; buffer[offset + i] = e & 255, i += d, e /= 256, eLen -= 8) {
                    }
                    buffer[offset + i - d] |= s * 128;
                  };
                })
              ),
              /***/
              2996: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var process = __webpack_require__2(9964);
                  Object.defineProperty(exports2, "__esModule", { value: true });
                  function stringifiable(obj) {
                    return typeof obj === "object" && !("toString" in obj) ? Object.prototype.toString.call(obj).slice(8, -1) : obj;
                  }
                  var isProduction = typeof process === "object" && true;
                  function invariant(condition, message) {
                    if (!condition) {
                      if (isProduction) {
                        throw new Error("Invariant failed");
                      }
                      throw new Error(message());
                    }
                  }
                  exports2.invariant = invariant;
                  var hasOwnProperty = Object.prototype.hasOwnProperty;
                  var splice = Array.prototype.splice;
                  var toString = Object.prototype.toString;
                  function type(obj) {
                    return toString.call(obj).slice(8, -1);
                  }
                  var assign = Object.assign || /* istanbul ignore next */
                  (function(target, source) {
                    getAllKeys(source).forEach(function(key) {
                      if (hasOwnProperty.call(source, key)) {
                        target[key] = source[key];
                      }
                    });
                    return target;
                  });
                  var getAllKeys = typeof Object.getOwnPropertySymbols === "function" ? function(obj) {
                    return Object.keys(obj).concat(Object.getOwnPropertySymbols(obj));
                  } : function(obj) {
                    return Object.keys(obj);
                  };
                  function copy(object) {
                    return Array.isArray(object) ? assign(object.constructor(object.length), object) : type(object) === "Map" ? new Map(object) : type(object) === "Set" ? new Set(object) : object && typeof object === "object" ? assign(Object.create(Object.getPrototypeOf(object)), object) : object;
                  }
                  var Context = (
                    /** @class */
                    (function() {
                      function Context2() {
                        this.commands = assign({}, defaultCommands);
                        this.update = this.update.bind(this);
                        this.update.extend = this.extend = this.extend.bind(this);
                        this.update.isEquals = function(x, y) {
                          return x === y;
                        };
                        this.update.newContext = function() {
                          return new Context2().update;
                        };
                      }
                      Object.defineProperty(Context2.prototype, "isEquals", {
                        get: function() {
                          return this.update.isEquals;
                        },
                        set: function(value) {
                          this.update.isEquals = value;
                        },
                        enumerable: true,
                        configurable: true
                      });
                      Context2.prototype.extend = function(directive, fn) {
                        this.commands[directive] = fn;
                      };
                      Context2.prototype.update = function(object, $spec) {
                        var _this = this;
                        var spec = typeof $spec === "function" ? { $apply: $spec } : $spec;
                        if (!(Array.isArray(object) && Array.isArray(spec))) {
                          invariant(!Array.isArray(spec), function() {
                            return "update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value.";
                          });
                        }
                        invariant(typeof spec === "object" && spec !== null, function() {
                          return "update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the " + ("following commands: " + Object.keys(_this.commands).join(", ") + ".");
                        });
                        var nextObject = object;
                        getAllKeys(spec).forEach(function(key) {
                          if (hasOwnProperty.call(_this.commands, key)) {
                            var objectWasNextObject = object === nextObject;
                            nextObject = _this.commands[key](spec[key], nextObject, spec, object);
                            if (objectWasNextObject && _this.isEquals(nextObject, object)) {
                              nextObject = object;
                            }
                          } else {
                            var nextValueForKey = type(object) === "Map" ? _this.update(object.get(key), spec[key]) : _this.update(object[key], spec[key]);
                            var nextObjectValue = type(nextObject) === "Map" ? nextObject.get(key) : nextObject[key];
                            if (!_this.isEquals(nextValueForKey, nextObjectValue) || typeof nextValueForKey === "undefined" && !hasOwnProperty.call(object, key)) {
                              if (nextObject === object) {
                                nextObject = copy(object);
                              }
                              if (type(nextObject) === "Map") {
                                nextObject.set(key, nextValueForKey);
                              } else {
                                nextObject[key] = nextValueForKey;
                              }
                            }
                          }
                        });
                        return nextObject;
                      };
                      return Context2;
                    })()
                  );
                  exports2.Context = Context;
                  var defaultCommands = {
                    $push: function(value, nextObject, spec) {
                      invariantPushAndUnshift(nextObject, spec, "$push");
                      return value.length ? nextObject.concat(value) : nextObject;
                    },
                    $unshift: function(value, nextObject, spec) {
                      invariantPushAndUnshift(nextObject, spec, "$unshift");
                      return value.length ? value.concat(nextObject) : nextObject;
                    },
                    $splice: function(value, nextObject, spec, originalObject) {
                      invariantSplices(nextObject, spec);
                      value.forEach(function(args) {
                        invariantSplice(args);
                        if (nextObject === originalObject && args.length) {
                          nextObject = copy(originalObject);
                        }
                        splice.apply(nextObject, args);
                      });
                      return nextObject;
                    },
                    $set: function(value, _nextObject, spec) {
                      invariantSet(spec);
                      return value;
                    },
                    $toggle: function(targets, nextObject) {
                      invariantSpecArray(targets, "$toggle");
                      var nextObjectCopy = targets.length ? copy(nextObject) : nextObject;
                      targets.forEach(function(target) {
                        nextObjectCopy[target] = !nextObject[target];
                      });
                      return nextObjectCopy;
                    },
                    $unset: function(value, nextObject, _spec, originalObject) {
                      invariantSpecArray(value, "$unset");
                      value.forEach(function(key) {
                        if (Object.hasOwnProperty.call(nextObject, key)) {
                          if (nextObject === originalObject) {
                            nextObject = copy(originalObject);
                          }
                          delete nextObject[key];
                        }
                      });
                      return nextObject;
                    },
                    $add: function(values, nextObject, _spec, originalObject) {
                      invariantMapOrSet(nextObject, "$add");
                      invariantSpecArray(values, "$add");
                      if (type(nextObject) === "Map") {
                        values.forEach(function(_a) {
                          var key = _a[0], value = _a[1];
                          if (nextObject === originalObject && nextObject.get(key) !== value) {
                            nextObject = copy(originalObject);
                          }
                          nextObject.set(key, value);
                        });
                      } else {
                        values.forEach(function(value) {
                          if (nextObject === originalObject && !nextObject.has(value)) {
                            nextObject = copy(originalObject);
                          }
                          nextObject.add(value);
                        });
                      }
                      return nextObject;
                    },
                    $remove: function(value, nextObject, _spec, originalObject) {
                      invariantMapOrSet(nextObject, "$remove");
                      invariantSpecArray(value, "$remove");
                      value.forEach(function(key) {
                        if (nextObject === originalObject && nextObject.has(key)) {
                          nextObject = copy(originalObject);
                        }
                        nextObject.delete(key);
                      });
                      return nextObject;
                    },
                    $merge: function(value, nextObject, _spec, originalObject) {
                      invariantMerge(nextObject, value);
                      getAllKeys(value).forEach(function(key) {
                        if (value[key] !== nextObject[key]) {
                          if (nextObject === originalObject) {
                            nextObject = copy(originalObject);
                          }
                          nextObject[key] = value[key];
                        }
                      });
                      return nextObject;
                    },
                    $apply: function(value, original) {
                      invariantApply(value);
                      return value(original);
                    }
                  };
                  var defaultContext = new Context();
                  exports2.isEquals = defaultContext.update.isEquals;
                  exports2.extend = defaultContext.extend;
                  exports2["default"] = defaultContext.update;
                  exports2["default"]["default"] = module2.exports = assign(exports2.default, exports2);
                  function invariantPushAndUnshift(value, spec, command) {
                    invariant(Array.isArray(value), function() {
                      return "update(): expected target of " + stringifiable(command) + " to be an array; got " + stringifiable(value) + ".";
                    });
                    invariantSpecArray(spec[command], command);
                  }
                  function invariantSpecArray(spec, command) {
                    invariant(Array.isArray(spec), function() {
                      return "update(): expected spec of " + stringifiable(command) + " to be an array; got " + stringifiable(spec) + ". Did you forget to wrap your parameter in an array?";
                    });
                  }
                  function invariantSplices(value, spec) {
                    invariant(Array.isArray(value), function() {
                      return "Expected $splice target to be an array; got " + stringifiable(value);
                    });
                    invariantSplice(spec.$splice);
                  }
                  function invariantSplice(value) {
                    invariant(Array.isArray(value), function() {
                      return "update(): expected spec of $splice to be an array of arrays; got " + stringifiable(value) + ". Did you forget to wrap your parameters in an array?";
                    });
                  }
                  function invariantApply(fn) {
                    invariant(typeof fn === "function", function() {
                      return "update(): expected spec of $apply to be a function; got " + stringifiable(fn) + ".";
                    });
                  }
                  function invariantSet(spec) {
                    invariant(Object.keys(spec).length === 1, function() {
                      return "Cannot have more than one key in an object with $set";
                    });
                  }
                  function invariantMerge(target, specValue) {
                    invariant(specValue && typeof specValue === "object", function() {
                      return "update(): $merge expects a spec of type 'object'; got " + stringifiable(specValue);
                    });
                    invariant(target && typeof target === "object", function() {
                      return "update(): $merge expects a target of type 'object'; got " + stringifiable(target);
                    });
                  }
                  function invariantMapOrSet(target, command) {
                    var typeOfTarget = type(target);
                    invariant(typeOfTarget === "Map" || typeOfTarget === "Set", function() {
                      return "update(): " + stringifiable(command) + " expects a target of type Set or Map; got " + stringifiable(typeOfTarget);
                    });
                  }
                })
              ),
              /***/
              9784: (
                /***/
                ((module2) => {
                  if (typeof Object.create === "function") {
                    module2.exports = function inherits(ctor, superCtor) {
                      if (superCtor) {
                        ctor.super_ = superCtor;
                        ctor.prototype = Object.create(superCtor.prototype, {
                          constructor: {
                            value: ctor,
                            enumerable: false,
                            writable: true,
                            configurable: true
                          }
                        });
                      }
                    };
                  } else {
                    module2.exports = function inherits(ctor, superCtor) {
                      if (superCtor) {
                        ctor.super_ = superCtor;
                        var TempCtor = function() {
                        };
                        TempCtor.prototype = superCtor.prototype;
                        ctor.prototype = new TempCtor();
                        ctor.prototype.constructor = ctor;
                      }
                    };
                  }
                })
              ),
              /***/
              8631: (
                /***/
                (function(module2, exports2, __webpack_require__2) {
                  var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;
                  (function(root, factory) {
                    if (true) {
                      !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__2(7249)], __WEBPACK_AMD_DEFINE_FACTORY__ = factory, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === "function" ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports2, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== void 0 && (module2.exports = __WEBPACK_AMD_DEFINE_RESULT__));
                    } else {
                    }
                  })(this, function(Kefir) {
                    var dummyPool = { plug: function() {
                    }, unplug: function() {
                    } };
                    function kefirBus() {
                      var ended = false;
                      var pool = Kefir.pool();
                      var emitter = null;
                      var stream = Kefir.stream(function(_emitter) {
                        function sub(event) {
                          _emitter.emitEvent(event);
                        }
                        emitter = _emitter;
                        if (ended) {
                          _emitter.end();
                        } else {
                          pool.onAny(sub);
                          return function() {
                            emitter = null;
                            pool.offAny(sub);
                          };
                        }
                      });
                      stream.value = stream.emit = function(x) {
                        if (emitter) emitter.emit(x);
                        return stream;
                      };
                      stream.error = function(err) {
                        if (emitter) emitter.error(err);
                        return stream;
                      };
                      stream.event = stream.emitEvent = function(event) {
                        if (event.type === "end") {
                          stream.end();
                        } else {
                          if (emitter) emitter.emitEvent(event);
                        }
                        return stream;
                      };
                      stream.plug = function(s) {
                        pool.plug(s);
                        return stream;
                      };
                      stream.unplug = function(s) {
                        pool.unplug(s);
                        return stream;
                      };
                      stream.end = function() {
                        if (!ended) {
                          ended = true;
                          if (emitter) emitter.end();
                          pool = dummyPool;
                        }
                        return stream;
                      };
                      return stream.setName("bus");
                    }
                    kefirBus.default = kefirBus;
                    return kefirBus;
                  });
                })
              ),
              /***/
              5164: (
                /***/
                ((module2) => {
                  "use strict";
                  function kefirCast(Kefir, input) {
                    if (input && input.subscribe && input.subscribeOnNext) {
                      return Kefir.stream(function(emitter) {
                        var subscription = input.subscribe(
                          function onNext(value) {
                            emitter.emit(value);
                          },
                          function onError(err) {
                            emitter.error(err);
                            emitter.end();
                          },
                          function onCompleted() {
                            emitter.end();
                          }
                        );
                        return function() {
                          subscription.dispose();
                        };
                      });
                    } else if (input && input.onAny && input.offAny) {
                      return Kefir.stream(function(emitter) {
                        var emitEvent = emitter.emitEvent;
                        input.onAny(emitEvent);
                        return function() {
                          input.offAny(emitEvent);
                        };
                      });
                    } else if (input && input.subscribe && input.onValue) {
                      return Kefir.stream(function(emitter) {
                        return input.subscribe(function(event) {
                          if (typeof event.hasValue === "function") {
                            if (event.hasValue()) {
                              emitter.emit(event.value());
                            } else if (event.isEnd()) {
                              emitter.end();
                            } else if (event.isError()) {
                              emitter.error(event.error);
                            } else {
                              console.error("Unknown type of Bacon event", event);
                            }
                          } else {
                            if (event.hasValue) {
                              emitter.emit(event.value);
                            } else if (event.isEnd) {
                              emitter.end();
                            } else if (event.isError) {
                              emitter.error(event.error);
                            } else {
                              console.error("Unknown type of Bacon event", event);
                            }
                          }
                        });
                      });
                    } else if (input && input.subscribe && input.lift) {
                      return Kefir.stream(function(emitter) {
                        var subscription = input.subscribe(
                          function onNext(value) {
                            emitter.emit(value);
                          },
                          function onError(err) {
                            emitter.error(err);
                            emitter.end();
                          },
                          function onCompleted() {
                            emitter.end();
                          }
                        );
                        return function() {
                          subscription.unsubscribe();
                        };
                      });
                    } else {
                      return Kefir.constant(input);
                    }
                  }
                  module2.exports = kefirCast;
                })
              ),
              /***/
              4924: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = kefirStopper;
                  var Kefir = __webpack_require__2(7249);
                  function kefirStopper() {
                    var emitter = null;
                    function end() {
                      stopper.stopped = true;
                      if (emitter) {
                        emitter.emit(null);
                        emitter.end();
                      }
                    }
                    var stream = Kefir.stream(function(_emitter) {
                      emitter = _emitter;
                      if (stopper.stopped) {
                        end();
                      }
                    });
                    var stopper = stream.toProperty();
                    stopper.stopped = false;
                    stopper.destroy = end;
                    return stopper;
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              7249: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.r(__webpack_exports__2);
                  __webpack_require__2.d(__webpack_exports__2, {
                    /* harmony export */
                    Kefir: () => (
                      /* binding */
                      Kefir
                    ),
                    /* harmony export */
                    Observable: () => (
                      /* binding */
                      Observable
                    ),
                    /* harmony export */
                    Pool: () => (
                      /* binding */
                      Pool
                    ),
                    /* harmony export */
                    Property: () => (
                      /* binding */
                      Property
                    ),
                    /* harmony export */
                    Stream: () => (
                      /* binding */
                      Stream
                    ),
                    /* harmony export */
                    combine: () => (
                      /* binding */
                      combine
                    ),
                    /* harmony export */
                    concat: () => (
                      /* binding */
                      concat$1
                    ),
                    /* harmony export */
                    constant: () => (
                      /* binding */
                      constant
                    ),
                    /* harmony export */
                    constantError: () => (
                      /* binding */
                      constantError
                    ),
                    /* harmony export */
                    "default": () => __WEBPACK_DEFAULT_EXPORT__,
                    /* harmony export */
                    dissableDeprecationWarnings: () => (
                      /* binding */
                      dissableDeprecationWarnings
                    ),
                    /* harmony export */
                    fromCallback: () => (
                      /* binding */
                      fromCallback
                    ),
                    /* harmony export */
                    fromESObservable: () => (
                      /* binding */
                      fromESObservable
                    ),
                    /* harmony export */
                    fromEvents: () => (
                      /* binding */
                      fromEvents
                    ),
                    /* harmony export */
                    fromNodeCallback: () => (
                      /* binding */
                      fromNodeCallback
                    ),
                    /* harmony export */
                    fromPoll: () => (
                      /* binding */
                      fromPoll
                    ),
                    /* harmony export */
                    fromPromise: () => (
                      /* binding */
                      fromPromise
                    ),
                    /* harmony export */
                    interval: () => (
                      /* binding */
                      interval
                    ),
                    /* harmony export */
                    later: () => (
                      /* binding */
                      later
                    ),
                    /* harmony export */
                    merge: () => (
                      /* binding */
                      merge
                    ),
                    /* harmony export */
                    never: () => (
                      /* binding */
                      never
                    ),
                    /* harmony export */
                    pool: () => (
                      /* binding */
                      pool
                    ),
                    /* harmony export */
                    repeat: () => (
                      /* binding */
                      repeat
                    ),
                    /* harmony export */
                    sequentially: () => (
                      /* binding */
                      sequentially
                    ),
                    /* harmony export */
                    staticLand: () => (
                      /* binding */
                      staticLand
                    ),
                    /* harmony export */
                    stream: () => (
                      /* binding */
                      stream
                    ),
                    /* harmony export */
                    withInterval: () => (
                      /* binding */
                      withInterval
                    ),
                    /* harmony export */
                    zip: () => (
                      /* binding */
                      zip
                    )
                    /* harmony export */
                  });
                  module2 = __webpack_require__2.hmd(module2);
                  function createObj(proto) {
                    var F = function() {
                    };
                    F.prototype = proto;
                    return new F();
                  }
                  function extend(target) {
                    var length = arguments.length, i = void 0, prop = void 0;
                    for (i = 1; i < length; i++) {
                      for (prop in arguments[i]) {
                        target[prop] = arguments[i][prop];
                      }
                    }
                    return target;
                  }
                  function inherit(Child, Parent) {
                    var length = arguments.length, i = void 0;
                    Child.prototype = createObj(Parent.prototype);
                    Child.prototype.constructor = Child;
                    for (i = 2; i < length; i++) {
                      extend(Child.prototype, arguments[i]);
                    }
                    return Child;
                  }
                  var NOTHING = ["<nothing>"];
                  var END = "end";
                  var VALUE = "value";
                  var ERROR = "error";
                  var ANY = "any";
                  function concat(a, b) {
                    var result2 = void 0, length = void 0, i = void 0, j = void 0;
                    if (a.length === 0) {
                      return b;
                    }
                    if (b.length === 0) {
                      return a;
                    }
                    j = 0;
                    result2 = new Array(a.length + b.length);
                    length = a.length;
                    for (i = 0; i < length; i++, j++) {
                      result2[j] = a[i];
                    }
                    length = b.length;
                    for (i = 0; i < length; i++, j++) {
                      result2[j] = b[i];
                    }
                    return result2;
                  }
                  function find(arr, value) {
                    var length = arr.length, i = void 0;
                    for (i = 0; i < length; i++) {
                      if (arr[i] === value) {
                        return i;
                      }
                    }
                    return -1;
                  }
                  function findByPred(arr, pred) {
                    var length = arr.length, i = void 0;
                    for (i = 0; i < length; i++) {
                      if (pred(arr[i])) {
                        return i;
                      }
                    }
                    return -1;
                  }
                  function cloneArray(input) {
                    var length = input.length, result2 = new Array(length), i = void 0;
                    for (i = 0; i < length; i++) {
                      result2[i] = input[i];
                    }
                    return result2;
                  }
                  function remove(input, index) {
                    var length = input.length, result2 = void 0, i = void 0, j = void 0;
                    if (index >= 0 && index < length) {
                      if (length === 1) {
                        return [];
                      } else {
                        result2 = new Array(length - 1);
                        for (i = 0, j = 0; i < length; i++) {
                          if (i !== index) {
                            result2[j] = input[i];
                            j++;
                          }
                        }
                        return result2;
                      }
                    } else {
                      return input;
                    }
                  }
                  function map(input, fn) {
                    var length = input.length, result2 = new Array(length), i = void 0;
                    for (i = 0; i < length; i++) {
                      result2[i] = fn(input[i]);
                    }
                    return result2;
                  }
                  function forEach(arr, fn) {
                    var length = arr.length, i = void 0;
                    for (i = 0; i < length; i++) {
                      fn(arr[i]);
                    }
                  }
                  function fillArray(arr, value) {
                    var length = arr.length, i = void 0;
                    for (i = 0; i < length; i++) {
                      arr[i] = value;
                    }
                  }
                  function contains(arr, value) {
                    return find(arr, value) !== -1;
                  }
                  function slide(cur, next, max) {
                    var length = Math.min(max, cur.length + 1), offset = cur.length - length + 1, result2 = new Array(length), i = void 0;
                    for (i = offset; i < length; i++) {
                      result2[i - offset] = cur[i];
                    }
                    result2[length - 1] = next;
                    return result2;
                  }
                  function callSubscriber(type, fn, event) {
                    if (type === ANY) {
                      fn(event);
                    } else if (type === event.type) {
                      if (type === VALUE || type === ERROR) {
                        fn(event.value);
                      } else {
                        fn();
                      }
                    }
                  }
                  function Dispatcher() {
                    this._items = [];
                    this._spies = [];
                    this._inLoop = 0;
                    this._removedItems = null;
                  }
                  extend(Dispatcher.prototype, {
                    add: function(type, fn) {
                      this._items = concat(this._items, [{ type, fn }]);
                      return this._items.length;
                    },
                    remove: function(type, fn) {
                      var index = findByPred(this._items, function(x) {
                        return x.type === type && x.fn === fn;
                      });
                      if (this._inLoop !== 0 && index !== -1) {
                        if (this._removedItems === null) {
                          this._removedItems = [];
                        }
                        this._removedItems.push(this._items[index]);
                      }
                      this._items = remove(this._items, index);
                      return this._items.length;
                    },
                    addSpy: function(fn) {
                      this._spies = concat(this._spies, [fn]);
                      return this._spies.length;
                    },
                    // Because spies are only ever a function that perform logging as
                    // their only side effect, we don't need the same complicated
                    // removal logic like in remove()
                    removeSpy: function(fn) {
                      this._spies = remove(this._spies, this._spies.indexOf(fn));
                      return this._spies.length;
                    },
                    dispatch: function(event) {
                      this._inLoop++;
                      for (var i = 0, spies = this._spies; this._spies !== null && i < spies.length; i++) {
                        spies[i](event);
                      }
                      for (var _i = 0, items = this._items; _i < items.length; _i++) {
                        if (this._items === null) {
                          break;
                        }
                        if (this._removedItems !== null && contains(this._removedItems, items[_i])) {
                          continue;
                        }
                        callSubscriber(items[_i].type, items[_i].fn, event);
                      }
                      this._inLoop--;
                      if (this._inLoop === 0) {
                        this._removedItems = null;
                      }
                    },
                    cleanup: function() {
                      this._items = null;
                      this._spies = null;
                    }
                  });
                  function Observable() {
                    this._dispatcher = new Dispatcher();
                    this._active = false;
                    this._alive = true;
                    this._activating = false;
                    this._logHandlers = null;
                    this._spyHandlers = null;
                  }
                  extend(Observable.prototype, {
                    _name: "observable",
                    _onActivation: function() {
                    },
                    _onDeactivation: function() {
                    },
                    _setActive: function(active) {
                      if (this._active !== active) {
                        this._active = active;
                        if (active) {
                          this._activating = true;
                          this._onActivation();
                          this._activating = false;
                        } else {
                          this._onDeactivation();
                        }
                      }
                    },
                    _clear: function() {
                      this._setActive(false);
                      this._dispatcher.cleanup();
                      this._dispatcher = null;
                      this._logHandlers = null;
                    },
                    _emit: function(type, x) {
                      switch (type) {
                        case VALUE:
                          return this._emitValue(x);
                        case ERROR:
                          return this._emitError(x);
                        case END:
                          return this._emitEnd();
                      }
                    },
                    _emitValue: function(value) {
                      if (this._alive) {
                        this._dispatcher.dispatch({ type: VALUE, value });
                      }
                    },
                    _emitError: function(value) {
                      if (this._alive) {
                        this._dispatcher.dispatch({ type: ERROR, value });
                      }
                    },
                    _emitEnd: function() {
                      if (this._alive) {
                        this._alive = false;
                        this._dispatcher.dispatch({ type: END });
                        this._clear();
                      }
                    },
                    _on: function(type, fn) {
                      if (this._alive) {
                        this._dispatcher.add(type, fn);
                        this._setActive(true);
                      } else {
                        callSubscriber(type, fn, { type: END });
                      }
                      return this;
                    },
                    _off: function(type, fn) {
                      if (this._alive) {
                        var count = this._dispatcher.remove(type, fn);
                        if (count === 0) {
                          this._setActive(false);
                        }
                      }
                      return this;
                    },
                    onValue: function(fn) {
                      return this._on(VALUE, fn);
                    },
                    onError: function(fn) {
                      return this._on(ERROR, fn);
                    },
                    onEnd: function(fn) {
                      return this._on(END, fn);
                    },
                    onAny: function(fn) {
                      return this._on(ANY, fn);
                    },
                    offValue: function(fn) {
                      return this._off(VALUE, fn);
                    },
                    offError: function(fn) {
                      return this._off(ERROR, fn);
                    },
                    offEnd: function(fn) {
                      return this._off(END, fn);
                    },
                    offAny: function(fn) {
                      return this._off(ANY, fn);
                    },
                    observe: function(observerOrOnValue, onError, onEnd) {
                      var _this = this;
                      var closed = false;
                      var observer2 = !observerOrOnValue || typeof observerOrOnValue === "function" ? { value: observerOrOnValue, error: onError, end: onEnd } : observerOrOnValue;
                      var handler = function(event) {
                        if (event.type === END) {
                          closed = true;
                        }
                        if (event.type === VALUE && observer2.value) {
                          observer2.value(event.value);
                        } else if (event.type === ERROR && observer2.error) {
                          observer2.error(event.value);
                        } else if (event.type === END && observer2.end) {
                          observer2.end(event.value);
                        }
                      };
                      this.onAny(handler);
                      return {
                        unsubscribe: function() {
                          if (!closed) {
                            _this.offAny(handler);
                            closed = true;
                          }
                        },
                        get closed() {
                          return closed;
                        }
                      };
                    },
                    // A and B must be subclasses of Stream and Property (order doesn't matter)
                    _ofSameType: function(A, B) {
                      return A.prototype.getType() === this.getType() ? A : B;
                    },
                    setName: function(sourceObs, selfName) {
                      this._name = selfName ? sourceObs._name + "." + selfName : sourceObs;
                      return this;
                    },
                    log: function() {
                      var name = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.toString();
                      var isCurrent = void 0;
                      var handler = function(event) {
                        var type = "<" + event.type + (isCurrent ? ":current" : "") + ">";
                        if (event.type === END) {
                          console.log(name, type);
                        } else {
                          console.log(name, type, event.value);
                        }
                      };
                      if (this._alive) {
                        if (!this._logHandlers) {
                          this._logHandlers = [];
                        }
                        this._logHandlers.push({ name, handler });
                      }
                      isCurrent = true;
                      this.onAny(handler);
                      isCurrent = false;
                      return this;
                    },
                    offLog: function() {
                      var name = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.toString();
                      if (this._logHandlers) {
                        var handlerIndex = findByPred(this._logHandlers, function(obj) {
                          return obj.name === name;
                        });
                        if (handlerIndex !== -1) {
                          this.offAny(this._logHandlers[handlerIndex].handler);
                          this._logHandlers.splice(handlerIndex, 1);
                        }
                      }
                      return this;
                    },
                    spy: function() {
                      var name = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.toString();
                      var handler = function(event) {
                        var type = "<" + event.type + ">";
                        if (event.type === END) {
                          console.log(name, type);
                        } else {
                          console.log(name, type, event.value);
                        }
                      };
                      if (this._alive) {
                        if (!this._spyHandlers) {
                          this._spyHandlers = [];
                        }
                        this._spyHandlers.push({ name, handler });
                        this._dispatcher.addSpy(handler);
                      }
                      return this;
                    },
                    offSpy: function() {
                      var name = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.toString();
                      if (this._spyHandlers) {
                        var handlerIndex = findByPred(this._spyHandlers, function(obj) {
                          return obj.name === name;
                        });
                        if (handlerIndex !== -1) {
                          this._dispatcher.removeSpy(this._spyHandlers[handlerIndex].handler);
                          this._spyHandlers.splice(handlerIndex, 1);
                        }
                      }
                      return this;
                    }
                  });
                  Observable.prototype.toString = function() {
                    return "[" + this._name + "]";
                  };
                  function Stream() {
                    Observable.call(this);
                  }
                  inherit(Stream, Observable, {
                    _name: "stream",
                    getType: function() {
                      return "stream";
                    }
                  });
                  function Property() {
                    Observable.call(this);
                    this._currentEvent = null;
                  }
                  inherit(Property, Observable, {
                    _name: "property",
                    _emitValue: function(value) {
                      if (this._alive) {
                        this._currentEvent = { type: VALUE, value };
                        if (!this._activating) {
                          this._dispatcher.dispatch({ type: VALUE, value });
                        }
                      }
                    },
                    _emitError: function(value) {
                      if (this._alive) {
                        this._currentEvent = { type: ERROR, value };
                        if (!this._activating) {
                          this._dispatcher.dispatch({ type: ERROR, value });
                        }
                      }
                    },
                    _emitEnd: function() {
                      if (this._alive) {
                        this._alive = false;
                        if (!this._activating) {
                          this._dispatcher.dispatch({ type: END });
                        }
                        this._clear();
                      }
                    },
                    _on: function(type, fn) {
                      if (this._alive) {
                        this._dispatcher.add(type, fn);
                        this._setActive(true);
                      }
                      if (this._currentEvent !== null) {
                        callSubscriber(type, fn, this._currentEvent);
                      }
                      if (!this._alive) {
                        callSubscriber(type, fn, { type: END });
                      }
                      return this;
                    },
                    getType: function() {
                      return "property";
                    }
                  });
                  var neverS = new Stream();
                  neverS._emitEnd();
                  neverS._name = "never";
                  function never() {
                    return neverS;
                  }
                  function timeBased(mixin2) {
                    function AnonymousStream(wait, options) {
                      var _this = this;
                      Stream.call(this);
                      this._wait = wait;
                      this._intervalId = null;
                      this._$onTick = function() {
                        return _this._onTick();
                      };
                      this._init(options);
                    }
                    inherit(AnonymousStream, Stream, {
                      _init: function() {
                      },
                      _free: function() {
                      },
                      _onTick: function() {
                      },
                      _onActivation: function() {
                        this._intervalId = setInterval(this._$onTick, this._wait);
                      },
                      _onDeactivation: function() {
                        if (this._intervalId !== null) {
                          clearInterval(this._intervalId);
                          this._intervalId = null;
                        }
                      },
                      _clear: function() {
                        Stream.prototype._clear.call(this);
                        this._$onTick = null;
                        this._free();
                      }
                    }, mixin2);
                    return AnonymousStream;
                  }
                  var S = timeBased({
                    _name: "later",
                    _init: function(_ref) {
                      var x = _ref.x;
                      this._x = x;
                    },
                    _free: function() {
                      this._x = null;
                    },
                    _onTick: function() {
                      this._emitValue(this._x);
                      this._emitEnd();
                    }
                  });
                  function later(wait, x) {
                    return new S(wait, { x });
                  }
                  var S$1 = timeBased({
                    _name: "interval",
                    _init: function(_ref) {
                      var x = _ref.x;
                      this._x = x;
                    },
                    _free: function() {
                      this._x = null;
                    },
                    _onTick: function() {
                      this._emitValue(this._x);
                    }
                  });
                  function interval(wait, x) {
                    return new S$1(wait, { x });
                  }
                  var S$2 = timeBased({
                    _name: "sequentially",
                    _init: function(_ref) {
                      var xs = _ref.xs;
                      this._xs = cloneArray(xs);
                    },
                    _free: function() {
                      this._xs = null;
                    },
                    _onTick: function() {
                      if (this._xs.length === 1) {
                        this._emitValue(this._xs[0]);
                        this._emitEnd();
                      } else {
                        this._emitValue(this._xs.shift());
                      }
                    }
                  });
                  function sequentially(wait, xs) {
                    return xs.length === 0 ? never() : new S$2(wait, { xs });
                  }
                  var S$3 = timeBased({
                    _name: "fromPoll",
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _onTick: function() {
                      var fn = this._fn;
                      this._emitValue(fn());
                    }
                  });
                  function fromPoll(wait, fn) {
                    return new S$3(wait, { fn });
                  }
                  function emitter(obs) {
                    function value(x) {
                      obs._emitValue(x);
                      return obs._active;
                    }
                    function error(x) {
                      obs._emitError(x);
                      return obs._active;
                    }
                    function end() {
                      obs._emitEnd();
                      return obs._active;
                    }
                    function event(e) {
                      obs._emit(e.type, e.value);
                      return obs._active;
                    }
                    return {
                      value,
                      error,
                      end,
                      event,
                      // legacy
                      emit: value,
                      emitEvent: event
                    };
                  }
                  var S$4 = timeBased({
                    _name: "withInterval",
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                      this._emitter = emitter(this);
                    },
                    _free: function() {
                      this._fn = null;
                      this._emitter = null;
                    },
                    _onTick: function() {
                      var fn = this._fn;
                      fn(this._emitter);
                    }
                  });
                  function withInterval(wait, fn) {
                    return new S$4(wait, { fn });
                  }
                  function S$5(fn) {
                    Stream.call(this);
                    this._fn = fn;
                    this._unsubscribe = null;
                  }
                  inherit(S$5, Stream, {
                    _name: "stream",
                    _onActivation: function() {
                      var fn = this._fn;
                      var unsubscribe = fn(emitter(this));
                      this._unsubscribe = typeof unsubscribe === "function" ? unsubscribe : null;
                      if (!this._active) {
                        this._callUnsubscribe();
                      }
                    },
                    _callUnsubscribe: function() {
                      if (this._unsubscribe !== null) {
                        this._unsubscribe();
                        this._unsubscribe = null;
                      }
                    },
                    _onDeactivation: function() {
                      this._callUnsubscribe();
                    },
                    _clear: function() {
                      Stream.prototype._clear.call(this);
                      this._fn = null;
                    }
                  });
                  function stream(fn) {
                    return new S$5(fn);
                  }
                  function fromCallback(callbackConsumer) {
                    var called = false;
                    return stream(function(emitter2) {
                      if (!called) {
                        callbackConsumer(function(x) {
                          emitter2.emit(x);
                          emitter2.end();
                        });
                        called = true;
                      }
                    }).setName("fromCallback");
                  }
                  function fromNodeCallback(callbackConsumer) {
                    var called = false;
                    return stream(function(emitter2) {
                      if (!called) {
                        callbackConsumer(function(error, x) {
                          if (error) {
                            emitter2.error(error);
                          } else {
                            emitter2.emit(x);
                          }
                          emitter2.end();
                        });
                        called = true;
                      }
                    }).setName("fromNodeCallback");
                  }
                  function spread(fn, length) {
                    switch (length) {
                      case 0:
                        return function() {
                          return fn();
                        };
                      case 1:
                        return function(a) {
                          return fn(a[0]);
                        };
                      case 2:
                        return function(a) {
                          return fn(a[0], a[1]);
                        };
                      case 3:
                        return function(a) {
                          return fn(a[0], a[1], a[2]);
                        };
                      case 4:
                        return function(a) {
                          return fn(a[0], a[1], a[2], a[3]);
                        };
                      default:
                        return function(a) {
                          return fn.apply(null, a);
                        };
                    }
                  }
                  function apply(fn, c, a) {
                    var aLength = a ? a.length : 0;
                    if (c == null) {
                      switch (aLength) {
                        case 0:
                          return fn();
                        case 1:
                          return fn(a[0]);
                        case 2:
                          return fn(a[0], a[1]);
                        case 3:
                          return fn(a[0], a[1], a[2]);
                        case 4:
                          return fn(a[0], a[1], a[2], a[3]);
                        default:
                          return fn.apply(null, a);
                      }
                    } else {
                      switch (aLength) {
                        case 0:
                          return fn.call(c);
                        default:
                          return fn.apply(c, a);
                      }
                    }
                  }
                  function fromSubUnsub(sub, unsub, transformer) {
                    return stream(function(emitter2) {
                      var handler = transformer ? function() {
                        emitter2.emit(apply(transformer, this, arguments));
                      } : function(x) {
                        emitter2.emit(x);
                      };
                      sub(handler);
                      return function() {
                        return unsub(handler);
                      };
                    }).setName("fromSubUnsub");
                  }
                  var pairs = [["addEventListener", "removeEventListener"], ["addListener", "removeListener"], ["on", "off"]];
                  function fromEvents(target, eventName, transformer) {
                    var sub = void 0, unsub = void 0;
                    for (var i = 0; i < pairs.length; i++) {
                      if (typeof target[pairs[i][0]] === "function" && typeof target[pairs[i][1]] === "function") {
                        sub = pairs[i][0];
                        unsub = pairs[i][1];
                        break;
                      }
                    }
                    if (sub === void 0) {
                      throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");
                    }
                    return fromSubUnsub(function(handler) {
                      return target[sub](eventName, handler);
                    }, function(handler) {
                      return target[unsub](eventName, handler);
                    }, transformer).setName("fromEvents");
                  }
                  function P(value) {
                    this._currentEvent = { type: "value", value, current: true };
                  }
                  inherit(P, Property, {
                    _name: "constant",
                    _active: false,
                    _activating: false,
                    _alive: false,
                    _dispatcher: null,
                    _logHandlers: null
                  });
                  function constant(x) {
                    return new P(x);
                  }
                  function P$1(value) {
                    this._currentEvent = { type: "error", value, current: true };
                  }
                  inherit(P$1, Property, {
                    _name: "constantError",
                    _active: false,
                    _activating: false,
                    _alive: false,
                    _dispatcher: null,
                    _logHandlers: null
                  });
                  function constantError(x) {
                    return new P$1(x);
                  }
                  function createConstructor(BaseClass, name) {
                    return function AnonymousObservable(source, options) {
                      var _this = this;
                      BaseClass.call(this);
                      this._source = source;
                      this._name = source._name + "." + name;
                      this._init(options);
                      this._$handleAny = function(event) {
                        return _this._handleAny(event);
                      };
                    };
                  }
                  function createClassMethods(BaseClass) {
                    return {
                      _init: function() {
                      },
                      _free: function() {
                      },
                      _handleValue: function(x) {
                        this._emitValue(x);
                      },
                      _handleError: function(x) {
                        this._emitError(x);
                      },
                      _handleEnd: function() {
                        this._emitEnd();
                      },
                      _handleAny: function(event) {
                        switch (event.type) {
                          case VALUE:
                            return this._handleValue(event.value);
                          case ERROR:
                            return this._handleError(event.value);
                          case END:
                            return this._handleEnd();
                        }
                      },
                      _onActivation: function() {
                        this._source.onAny(this._$handleAny);
                      },
                      _onDeactivation: function() {
                        this._source.offAny(this._$handleAny);
                      },
                      _clear: function() {
                        BaseClass.prototype._clear.call(this);
                        this._source = null;
                        this._$handleAny = null;
                        this._free();
                      }
                    };
                  }
                  function createStream(name, mixin2) {
                    var S2 = createConstructor(Stream, name);
                    inherit(S2, Stream, createClassMethods(Stream), mixin2);
                    return S2;
                  }
                  function createProperty(name, mixin2) {
                    var P2 = createConstructor(Property, name);
                    inherit(P2, Property, createClassMethods(Property), mixin2);
                    return P2;
                  }
                  var P$2 = createProperty("toProperty", {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._getInitialCurrent = fn;
                    },
                    _onActivation: function() {
                      if (this._getInitialCurrent !== null) {
                        var getInitial = this._getInitialCurrent;
                        this._emitValue(getInitial());
                      }
                      this._source.onAny(this._$handleAny);
                    }
                  });
                  function toProperty(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null;
                    if (fn !== null && typeof fn !== "function") {
                      throw new Error("You should call toProperty() with a function or no arguments.");
                    }
                    return new P$2(obs, { fn });
                  }
                  var S$6 = createStream("changes", {
                    _handleValue: function(x) {
                      if (!this._activating) {
                        this._emitValue(x);
                      }
                    },
                    _handleError: function(x) {
                      if (!this._activating) {
                        this._emitError(x);
                      }
                    }
                  });
                  function changes(obs) {
                    return new S$6(obs);
                  }
                  function fromPromise(promise) {
                    var called = false;
                    var result2 = stream(function(emitter2) {
                      if (!called) {
                        var onValue = function(x) {
                          emitter2.emit(x);
                          emitter2.end();
                        };
                        var onError = function(x) {
                          emitter2.error(x);
                          emitter2.end();
                        };
                        var _promise = promise.then(onValue, onError);
                        if (_promise && typeof _promise.done === "function") {
                          _promise.done();
                        }
                        called = true;
                      }
                    });
                    return toProperty(result2, null).setName("fromPromise");
                  }
                  function getGlodalPromise() {
                    if (typeof Promise === "function") {
                      return Promise;
                    } else {
                      throw new Error("There isn't default Promise, use shim or parameter");
                    }
                  }
                  var toPromise = function(obs) {
                    var Promise2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : getGlodalPromise();
                    var last3 = null;
                    return new Promise2(function(resolve, reject) {
                      obs.onAny(function(event) {
                        if (event.type === END && last3 !== null) {
                          (last3.type === VALUE ? resolve : reject)(last3.value);
                          last3 = null;
                        } else {
                          last3 = event;
                        }
                      });
                    });
                  };
                  function symbolObservablePonyfill(root2) {
                    var result2;
                    var Symbol2 = root2.Symbol;
                    if (typeof Symbol2 === "function") {
                      if (Symbol2.observable) {
                        result2 = Symbol2.observable;
                      } else {
                        result2 = Symbol2("observable");
                        Symbol2.observable = result2;
                      }
                    } else {
                      result2 = "@@observable";
                    }
                    return result2;
                  }
                  var root;
                  if (typeof self !== "undefined") {
                    root = self;
                  } else if (typeof window !== "undefined") {
                    root = window;
                  } else if (typeof __webpack_require__2.g !== "undefined") {
                    root = __webpack_require__2.g;
                  } else if (true) {
                    root = module2;
                  } else {
                  }
                  var result = symbolObservablePonyfill(root);
                  var $$observable = result.default ? result.default : result;
                  function fromESObservable(_observable) {
                    var observable = _observable[$$observable] ? _observable[$$observable]() : _observable;
                    return stream(function(emitter2) {
                      var unsub = observable.subscribe({
                        error: function(error) {
                          emitter2.error(error);
                          emitter2.end();
                        },
                        next: function(value) {
                          emitter2.emit(value);
                        },
                        complete: function() {
                          emitter2.end();
                        }
                      });
                      if (unsub.unsubscribe) {
                        return function() {
                          unsub.unsubscribe();
                        };
                      } else {
                        return unsub;
                      }
                    }).setName("fromESObservable");
                  }
                  function ESObservable(observable) {
                    this._observable = observable.takeErrors(1);
                  }
                  extend(ESObservable.prototype, {
                    subscribe: function(observerOrOnNext, onError, onComplete) {
                      var _this = this;
                      var observer2 = typeof observerOrOnNext === "function" ? { next: observerOrOnNext, error: onError, complete: onComplete } : observerOrOnNext;
                      var fn = function(event) {
                        if (event.type === END) {
                          closed = true;
                        }
                        if (event.type === VALUE && observer2.next) {
                          observer2.next(event.value);
                        } else if (event.type === ERROR && observer2.error) {
                          observer2.error(event.value);
                        } else if (event.type === END && observer2.complete) {
                          observer2.complete(event.value);
                        }
                      };
                      this._observable.onAny(fn);
                      var closed = false;
                      var subscription = {
                        unsubscribe: function() {
                          closed = true;
                          _this._observable.offAny(fn);
                        },
                        get closed() {
                          return closed;
                        }
                      };
                      return subscription;
                    }
                  });
                  ESObservable.prototype[$$observable] = function() {
                    return this;
                  };
                  function toESObservable() {
                    return new ESObservable(this);
                  }
                  function collect(source, keys, values) {
                    for (var prop in source) {
                      if (source.hasOwnProperty(prop)) {
                        keys.push(prop);
                        values.push(source[prop]);
                      }
                    }
                  }
                  function defaultErrorsCombinator(errors) {
                    var latestError = void 0;
                    for (var i = 0; i < errors.length; i++) {
                      if (errors[i] !== void 0) {
                        if (latestError === void 0 || latestError.index < errors[i].index) {
                          latestError = errors[i];
                        }
                      }
                    }
                    return latestError.error;
                  }
                  function Combine(active, passive, combinator) {
                    var _this = this;
                    Stream.call(this);
                    this._activeCount = active.length;
                    this._sources = concat(active, passive);
                    this._combinator = combinator;
                    this._aliveCount = 0;
                    this._latestValues = new Array(this._sources.length);
                    this._latestErrors = new Array(this._sources.length);
                    fillArray(this._latestValues, NOTHING);
                    this._emitAfterActivation = false;
                    this._endAfterActivation = false;
                    this._latestErrorIndex = 0;
                    this._$handlers = [];
                    var _loop = function(i2) {
                      _this._$handlers.push(function(event) {
                        return _this._handleAny(i2, event);
                      });
                    };
                    for (var i = 0; i < this._sources.length; i++) {
                      _loop(i);
                    }
                  }
                  inherit(Combine, Stream, {
                    _name: "combine",
                    _onActivation: function() {
                      this._aliveCount = this._activeCount;
                      for (var i = this._activeCount; i < this._sources.length; i++) {
                        this._sources[i].onAny(this._$handlers[i]);
                      }
                      for (var _i = 0; _i < this._activeCount; _i++) {
                        this._sources[_i].onAny(this._$handlers[_i]);
                      }
                      if (this._emitAfterActivation) {
                        this._emitAfterActivation = false;
                        this._emitIfFull();
                      }
                      if (this._endAfterActivation) {
                        this._emitEnd();
                      }
                    },
                    _onDeactivation: function() {
                      var length = this._sources.length, i = void 0;
                      for (i = 0; i < length; i++) {
                        this._sources[i].offAny(this._$handlers[i]);
                      }
                    },
                    _emitIfFull: function() {
                      var hasAllValues = true;
                      var hasErrors = false;
                      var length = this._latestValues.length;
                      var valuesCopy = new Array(length);
                      var errorsCopy = new Array(length);
                      for (var i = 0; i < length; i++) {
                        valuesCopy[i] = this._latestValues[i];
                        errorsCopy[i] = this._latestErrors[i];
                        if (valuesCopy[i] === NOTHING) {
                          hasAllValues = false;
                        }
                        if (errorsCopy[i] !== void 0) {
                          hasErrors = true;
                        }
                      }
                      if (hasAllValues) {
                        var combinator = this._combinator;
                        this._emitValue(combinator(valuesCopy));
                      }
                      if (hasErrors) {
                        this._emitError(defaultErrorsCombinator(errorsCopy));
                      }
                    },
                    _handleAny: function(i, event) {
                      if (event.type === VALUE || event.type === ERROR) {
                        if (event.type === VALUE) {
                          this._latestValues[i] = event.value;
                          this._latestErrors[i] = void 0;
                        }
                        if (event.type === ERROR) {
                          this._latestValues[i] = NOTHING;
                          this._latestErrors[i] = {
                            index: this._latestErrorIndex++,
                            error: event.value
                          };
                        }
                        if (i < this._activeCount) {
                          if (this._activating) {
                            this._emitAfterActivation = true;
                          } else {
                            this._emitIfFull();
                          }
                        }
                      } else {
                        if (i < this._activeCount) {
                          this._aliveCount--;
                          if (this._aliveCount === 0) {
                            if (this._activating) {
                              this._endAfterActivation = true;
                            } else {
                              this._emitEnd();
                            }
                          }
                        }
                      }
                    },
                    _clear: function() {
                      Stream.prototype._clear.call(this);
                      this._sources = null;
                      this._latestValues = null;
                      this._latestErrors = null;
                      this._combinator = null;
                      this._$handlers = null;
                    }
                  });
                  function combineAsArray(active) {
                    var passive = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [];
                    var combinator = arguments[2];
                    if (!Array.isArray(passive)) {
                      throw new Error("Combine can only combine active and passive collections of the same type.");
                    }
                    combinator = combinator ? spread(combinator, active.length + passive.length) : function(x) {
                      return x;
                    };
                    return active.length === 0 ? never() : new Combine(active, passive, combinator);
                  }
                  function combineAsObject(active) {
                    var passive = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
                    var combinator = arguments[2];
                    if (typeof passive !== "object" || Array.isArray(passive)) {
                      throw new Error("Combine can only combine active and passive collections of the same type.");
                    }
                    var keys = [], activeObservables = [], passiveObservables = [];
                    collect(active, keys, activeObservables);
                    collect(passive, keys, passiveObservables);
                    var objectify = function(values) {
                      var event = {};
                      for (var i = values.length - 1; 0 <= i; i--) {
                        event[keys[i]] = values[i];
                      }
                      return combinator ? combinator(event) : event;
                    };
                    return activeObservables.length === 0 ? never() : new Combine(activeObservables, passiveObservables, objectify);
                  }
                  function combine(active, passive, combinator) {
                    if (typeof passive === "function") {
                      combinator = passive;
                      passive = void 0;
                    }
                    return Array.isArray(active) ? combineAsArray(active, passive, combinator) : combineAsObject(active, passive, combinator);
                  }
                  var Observable$2 = {
                    empty: function() {
                      return never();
                    },
                    // Monoid based on merge() seems more useful than one based on concat().
                    concat: function(a, b) {
                      return a.merge(b);
                    },
                    of: function(x) {
                      return constant(x);
                    },
                    map: function(fn, obs) {
                      return obs.map(fn);
                    },
                    bimap: function(fnErr, fnVal, obs) {
                      return obs.mapErrors(fnErr).map(fnVal);
                    },
                    // This ap strictly speaking incompatible with chain. If we derive ap from chain we get
                    // different (not very useful) behavior. But spec requires that if method can be derived
                    // it must have the same behavior as hand-written method. We intentionally violate the spec
                    // in hope that it won't cause many troubles in practice. And in return we have more useful type.
                    ap: function(obsFn, obsVal) {
                      return combine([obsFn, obsVal], function(fn, val) {
                        return fn(val);
                      });
                    },
                    chain: function(fn, obs) {
                      return obs.flatMap(fn);
                    }
                  };
                  var staticLand = Object.freeze({
                    Observable: Observable$2
                  });
                  var mixin = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x) {
                      var fn = this._fn;
                      this._emitValue(fn(x));
                    }
                  };
                  var S$7 = createStream("map", mixin);
                  var P$3 = createProperty("map", mixin);
                  var id = function(x) {
                    return x;
                  };
                  function map$1(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id;
                    return new (obs._ofSameType(S$7, P$3))(obs, { fn });
                  }
                  var mixin$1 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x) {
                      var fn = this._fn;
                      if (fn(x)) {
                        this._emitValue(x);
                      }
                    }
                  };
                  var S$8 = createStream("filter", mixin$1);
                  var P$4 = createProperty("filter", mixin$1);
                  var id$1 = function(x) {
                    return x;
                  };
                  function filter(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$1;
                    return new (obs._ofSameType(S$8, P$4))(obs, { fn });
                  }
                  var mixin$2 = {
                    _init: function(_ref) {
                      var n = _ref.n;
                      this._n = n;
                      if (n <= 0) {
                        this._emitEnd();
                      }
                    },
                    _handleValue: function(x) {
                      if (this._n === 0) {
                        return;
                      }
                      this._n--;
                      this._emitValue(x);
                      if (this._n === 0) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$9 = createStream("take", mixin$2);
                  var P$5 = createProperty("take", mixin$2);
                  function take(obs, n) {
                    return new (obs._ofSameType(S$9, P$5))(obs, { n });
                  }
                  var mixin$3 = {
                    _init: function(_ref) {
                      var n = _ref.n;
                      this._n = n;
                      if (n <= 0) {
                        this._emitEnd();
                      }
                    },
                    _handleError: function(x) {
                      if (this._n === 0) {
                        return;
                      }
                      this._n--;
                      this._emitError(x);
                      if (this._n === 0) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$10 = createStream("takeErrors", mixin$3);
                  var P$6 = createProperty("takeErrors", mixin$3);
                  function takeErrors(obs, n) {
                    return new (obs._ofSameType(S$10, P$6))(obs, { n });
                  }
                  var mixin$4 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x) {
                      var fn = this._fn;
                      if (fn(x)) {
                        this._emitValue(x);
                      } else {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$11 = createStream("takeWhile", mixin$4);
                  var P$7 = createProperty("takeWhile", mixin$4);
                  var id$2 = function(x) {
                    return x;
                  };
                  function takeWhile(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$2;
                    return new (obs._ofSameType(S$11, P$7))(obs, { fn });
                  }
                  var mixin$5 = {
                    _init: function() {
                      this._lastValue = NOTHING;
                    },
                    _free: function() {
                      this._lastValue = null;
                    },
                    _handleValue: function(x) {
                      this._lastValue = x;
                    },
                    _handleEnd: function() {
                      if (this._lastValue !== NOTHING) {
                        this._emitValue(this._lastValue);
                      }
                      this._emitEnd();
                    }
                  };
                  var S$12 = createStream("last", mixin$5);
                  var P$8 = createProperty("last", mixin$5);
                  function last2(obs) {
                    return new (obs._ofSameType(S$12, P$8))(obs);
                  }
                  var mixin$6 = {
                    _init: function(_ref) {
                      var n = _ref.n;
                      this._n = Math.max(0, n);
                    },
                    _handleValue: function(x) {
                      if (this._n === 0) {
                        this._emitValue(x);
                      } else {
                        this._n--;
                      }
                    }
                  };
                  var S$13 = createStream("skip", mixin$6);
                  var P$9 = createProperty("skip", mixin$6);
                  function skip(obs, n) {
                    return new (obs._ofSameType(S$13, P$9))(obs, { n });
                  }
                  var mixin$7 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x) {
                      var fn = this._fn;
                      if (this._fn !== null && !fn(x)) {
                        this._fn = null;
                      }
                      if (this._fn === null) {
                        this._emitValue(x);
                      }
                    }
                  };
                  var S$14 = createStream("skipWhile", mixin$7);
                  var P$10 = createProperty("skipWhile", mixin$7);
                  var id$3 = function(x) {
                    return x;
                  };
                  function skipWhile(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$3;
                    return new (obs._ofSameType(S$14, P$10))(obs, { fn });
                  }
                  var mixin$8 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                      this._prev = NOTHING;
                    },
                    _free: function() {
                      this._fn = null;
                      this._prev = null;
                    },
                    _handleValue: function(x) {
                      var fn = this._fn;
                      if (this._prev === NOTHING || !fn(this._prev, x)) {
                        this._prev = x;
                        this._emitValue(x);
                      }
                    }
                  };
                  var S$15 = createStream("skipDuplicates", mixin$8);
                  var P$11 = createProperty("skipDuplicates", mixin$8);
                  var eq = function(a, b) {
                    return a === b;
                  };
                  function skipDuplicates(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : eq;
                    return new (obs._ofSameType(S$15, P$11))(obs, { fn });
                  }
                  var mixin$9 = {
                    _init: function(_ref) {
                      var fn = _ref.fn, seed = _ref.seed;
                      this._fn = fn;
                      this._prev = seed;
                    },
                    _free: function() {
                      this._prev = null;
                      this._fn = null;
                    },
                    _handleValue: function(x) {
                      if (this._prev !== NOTHING) {
                        var fn = this._fn;
                        this._emitValue(fn(this._prev, x));
                      }
                      this._prev = x;
                    }
                  };
                  var S$16 = createStream("diff", mixin$9);
                  var P$12 = createProperty("diff", mixin$9);
                  function defaultFn(a, b) {
                    return [a, b];
                  }
                  function diff(obs, fn) {
                    var seed = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : NOTHING;
                    return new (obs._ofSameType(S$16, P$12))(obs, { fn: fn || defaultFn, seed });
                  }
                  var P$13 = createProperty("scan", {
                    _init: function(_ref) {
                      var fn = _ref.fn, seed = _ref.seed;
                      this._fn = fn;
                      this._seed = seed;
                      if (seed !== NOTHING) {
                        this._emitValue(seed);
                      }
                    },
                    _free: function() {
                      this._fn = null;
                      this._seed = null;
                    },
                    _handleValue: function(x) {
                      var fn = this._fn;
                      if (this._currentEvent === null || this._currentEvent.type === ERROR) {
                        this._emitValue(this._seed === NOTHING ? x : fn(this._seed, x));
                      } else {
                        this._emitValue(fn(this._currentEvent.value, x));
                      }
                    }
                  });
                  function scan(obs, fn) {
                    var seed = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : NOTHING;
                    return new P$13(obs, { fn, seed });
                  }
                  var mixin$10 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x) {
                      var fn = this._fn;
                      var xs = fn(x);
                      for (var i = 0; i < xs.length; i++) {
                        this._emitValue(xs[i]);
                      }
                    }
                  };
                  var S$17 = createStream("flatten", mixin$10);
                  var id$4 = function(x) {
                    return x;
                  };
                  function flatten2(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$4;
                    return new S$17(obs, { fn });
                  }
                  var END_MARKER = {};
                  var mixin$11 = {
                    _init: function(_ref) {
                      var _this = this;
                      var wait = _ref.wait;
                      this._wait = Math.max(0, wait);
                      this._buff = [];
                      this._$shiftBuff = function() {
                        var value = _this._buff.shift();
                        if (value === END_MARKER) {
                          _this._emitEnd();
                        } else {
                          _this._emitValue(value);
                        }
                      };
                    },
                    _free: function() {
                      this._buff = null;
                      this._$shiftBuff = null;
                    },
                    _handleValue: function(x) {
                      if (this._activating) {
                        this._emitValue(x);
                      } else {
                        this._buff.push(x);
                        setTimeout(this._$shiftBuff, this._wait);
                      }
                    },
                    _handleEnd: function() {
                      if (this._activating) {
                        this._emitEnd();
                      } else {
                        this._buff.push(END_MARKER);
                        setTimeout(this._$shiftBuff, this._wait);
                      }
                    }
                  };
                  var S$18 = createStream("delay", mixin$11);
                  var P$14 = createProperty("delay", mixin$11);
                  function delay(obs, wait) {
                    return new (obs._ofSameType(S$18, P$14))(obs, { wait });
                  }
                  var now = Date.now ? function() {
                    return Date.now();
                  } : function() {
                    return (/* @__PURE__ */ new Date()).getTime();
                  };
                  var mixin$12 = {
                    _init: function(_ref) {
                      var _this = this;
                      var wait = _ref.wait, leading = _ref.leading, trailing = _ref.trailing;
                      this._wait = Math.max(0, wait);
                      this._leading = leading;
                      this._trailing = trailing;
                      this._trailingValue = null;
                      this._timeoutId = null;
                      this._endLater = false;
                      this._lastCallTime = 0;
                      this._$trailingCall = function() {
                        return _this._trailingCall();
                      };
                    },
                    _free: function() {
                      this._trailingValue = null;
                      this._$trailingCall = null;
                    },
                    _handleValue: function(x) {
                      if (this._activating) {
                        this._emitValue(x);
                      } else {
                        var curTime = now();
                        if (this._lastCallTime === 0 && !this._leading) {
                          this._lastCallTime = curTime;
                        }
                        var remaining = this._wait - (curTime - this._lastCallTime);
                        if (remaining <= 0) {
                          this._cancelTrailing();
                          this._lastCallTime = curTime;
                          this._emitValue(x);
                        } else if (this._trailing) {
                          this._cancelTrailing();
                          this._trailingValue = x;
                          this._timeoutId = setTimeout(this._$trailingCall, remaining);
                        }
                      }
                    },
                    _handleEnd: function() {
                      if (this._activating) {
                        this._emitEnd();
                      } else {
                        if (this._timeoutId) {
                          this._endLater = true;
                        } else {
                          this._emitEnd();
                        }
                      }
                    },
                    _cancelTrailing: function() {
                      if (this._timeoutId !== null) {
                        clearTimeout(this._timeoutId);
                        this._timeoutId = null;
                      }
                    },
                    _trailingCall: function() {
                      this._emitValue(this._trailingValue);
                      this._timeoutId = null;
                      this._trailingValue = null;
                      this._lastCallTime = !this._leading ? 0 : now();
                      if (this._endLater) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$19 = createStream("throttle", mixin$12);
                  var P$15 = createProperty("throttle", mixin$12);
                  function throttle(obs, wait) {
                    var _ref2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, _ref2$leading = _ref2.leading, leading = _ref2$leading === void 0 ? true : _ref2$leading, _ref2$trailing = _ref2.trailing, trailing = _ref2$trailing === void 0 ? true : _ref2$trailing;
                    return new (obs._ofSameType(S$19, P$15))(obs, { wait, leading, trailing });
                  }
                  var mixin$13 = {
                    _init: function(_ref) {
                      var _this = this;
                      var wait = _ref.wait, immediate = _ref.immediate;
                      this._wait = Math.max(0, wait);
                      this._immediate = immediate;
                      this._lastAttempt = 0;
                      this._timeoutId = null;
                      this._laterValue = null;
                      this._endLater = false;
                      this._$later = function() {
                        return _this._later();
                      };
                    },
                    _free: function() {
                      this._laterValue = null;
                      this._$later = null;
                    },
                    _handleValue: function(x) {
                      if (this._activating) {
                        this._emitValue(x);
                      } else {
                        this._lastAttempt = now();
                        if (this._immediate && !this._timeoutId) {
                          this._emitValue(x);
                        }
                        if (!this._timeoutId) {
                          this._timeoutId = setTimeout(this._$later, this._wait);
                        }
                        if (!this._immediate) {
                          this._laterValue = x;
                        }
                      }
                    },
                    _handleEnd: function() {
                      if (this._activating) {
                        this._emitEnd();
                      } else {
                        if (this._timeoutId && !this._immediate) {
                          this._endLater = true;
                        } else {
                          this._emitEnd();
                        }
                      }
                    },
                    _later: function() {
                      var last3 = now() - this._lastAttempt;
                      if (last3 < this._wait && last3 >= 0) {
                        this._timeoutId = setTimeout(this._$later, this._wait - last3);
                      } else {
                        this._timeoutId = null;
                        if (!this._immediate) {
                          var _laterValue = this._laterValue;
                          this._laterValue = null;
                          this._emitValue(_laterValue);
                        }
                        if (this._endLater) {
                          this._emitEnd();
                        }
                      }
                    }
                  };
                  var S$20 = createStream("debounce", mixin$13);
                  var P$16 = createProperty("debounce", mixin$13);
                  function debounce(obs, wait) {
                    var _ref2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, _ref2$immediate = _ref2.immediate, immediate = _ref2$immediate === void 0 ? false : _ref2$immediate;
                    return new (obs._ofSameType(S$20, P$16))(obs, { wait, immediate });
                  }
                  var mixin$14 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleError: function(x) {
                      var fn = this._fn;
                      this._emitError(fn(x));
                    }
                  };
                  var S$21 = createStream("mapErrors", mixin$14);
                  var P$17 = createProperty("mapErrors", mixin$14);
                  var id$5 = function(x) {
                    return x;
                  };
                  function mapErrors(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$5;
                    return new (obs._ofSameType(S$21, P$17))(obs, { fn });
                  }
                  var mixin$15 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleError: function(x) {
                      var fn = this._fn;
                      if (fn(x)) {
                        this._emitError(x);
                      }
                    }
                  };
                  var S$22 = createStream("filterErrors", mixin$15);
                  var P$18 = createProperty("filterErrors", mixin$15);
                  var id$6 = function(x) {
                    return x;
                  };
                  function filterErrors(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : id$6;
                    return new (obs._ofSameType(S$22, P$18))(obs, { fn });
                  }
                  var mixin$16 = {
                    _handleValue: function() {
                    }
                  };
                  var S$23 = createStream("ignoreValues", mixin$16);
                  var P$19 = createProperty("ignoreValues", mixin$16);
                  function ignoreValues(obs) {
                    return new (obs._ofSameType(S$23, P$19))(obs);
                  }
                  var mixin$17 = {
                    _handleError: function() {
                    }
                  };
                  var S$24 = createStream("ignoreErrors", mixin$17);
                  var P$20 = createProperty("ignoreErrors", mixin$17);
                  function ignoreErrors(obs) {
                    return new (obs._ofSameType(S$24, P$20))(obs);
                  }
                  var mixin$18 = {
                    _handleEnd: function() {
                    }
                  };
                  var S$25 = createStream("ignoreEnd", mixin$18);
                  var P$21 = createProperty("ignoreEnd", mixin$18);
                  function ignoreEnd(obs) {
                    return new (obs._ofSameType(S$25, P$21))(obs);
                  }
                  var mixin$19 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleEnd: function() {
                      var fn = this._fn;
                      this._emitValue(fn());
                      this._emitEnd();
                    }
                  };
                  var S$26 = createStream("beforeEnd", mixin$19);
                  var P$22 = createProperty("beforeEnd", mixin$19);
                  function beforeEnd(obs, fn) {
                    return new (obs._ofSameType(S$26, P$22))(obs, { fn });
                  }
                  var mixin$20 = {
                    _init: function(_ref) {
                      var min = _ref.min, max = _ref.max;
                      this._max = max;
                      this._min = min;
                      this._buff = [];
                    },
                    _free: function() {
                      this._buff = null;
                    },
                    _handleValue: function(x) {
                      this._buff = slide(this._buff, x, this._max);
                      if (this._buff.length >= this._min) {
                        this._emitValue(this._buff);
                      }
                    }
                  };
                  var S$27 = createStream("slidingWindow", mixin$20);
                  var P$23 = createProperty("slidingWindow", mixin$20);
                  function slidingWindow(obs, max) {
                    var min = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
                    return new (obs._ofSameType(S$27, P$23))(obs, { min, max });
                  }
                  var mixin$21 = {
                    _init: function(_ref) {
                      var fn = _ref.fn, flushOnEnd = _ref.flushOnEnd;
                      this._fn = fn;
                      this._flushOnEnd = flushOnEnd;
                      this._buff = [];
                    },
                    _free: function() {
                      this._buff = null;
                    },
                    _flush: function() {
                      if (this._buff !== null && this._buff.length !== 0) {
                        this._emitValue(this._buff);
                        this._buff = [];
                      }
                    },
                    _handleValue: function(x) {
                      this._buff.push(x);
                      var fn = this._fn;
                      if (!fn(x)) {
                        this._flush();
                      }
                    },
                    _handleEnd: function() {
                      if (this._flushOnEnd) {
                        this._flush();
                      }
                      this._emitEnd();
                    }
                  };
                  var S$28 = createStream("bufferWhile", mixin$21);
                  var P$24 = createProperty("bufferWhile", mixin$21);
                  var id$7 = function(x) {
                    return x;
                  };
                  function bufferWhile(obs, fn) {
                    var _ref2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, _ref2$flushOnEnd = _ref2.flushOnEnd, flushOnEnd = _ref2$flushOnEnd === void 0 ? true : _ref2$flushOnEnd;
                    return new (obs._ofSameType(S$28, P$24))(obs, { fn: fn || id$7, flushOnEnd });
                  }
                  var mixin$22 = {
                    _init: function(_ref) {
                      var count = _ref.count, flushOnEnd = _ref.flushOnEnd;
                      this._count = count;
                      this._flushOnEnd = flushOnEnd;
                      this._buff = [];
                    },
                    _free: function() {
                      this._buff = null;
                    },
                    _flush: function() {
                      if (this._buff !== null && this._buff.length !== 0) {
                        this._emitValue(this._buff);
                        this._buff = [];
                      }
                    },
                    _handleValue: function(x) {
                      this._buff.push(x);
                      if (this._buff.length >= this._count) {
                        this._flush();
                      }
                    },
                    _handleEnd: function() {
                      if (this._flushOnEnd) {
                        this._flush();
                      }
                      this._emitEnd();
                    }
                  };
                  var S$29 = createStream("bufferWithCount", mixin$22);
                  var P$25 = createProperty("bufferWithCount", mixin$22);
                  function bufferWhile$1(obs, count) {
                    var _ref2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, _ref2$flushOnEnd = _ref2.flushOnEnd, flushOnEnd = _ref2$flushOnEnd === void 0 ? true : _ref2$flushOnEnd;
                    return new (obs._ofSameType(S$29, P$25))(obs, { count, flushOnEnd });
                  }
                  var mixin$23 = {
                    _init: function(_ref) {
                      var _this = this;
                      var wait = _ref.wait, count = _ref.count, flushOnEnd = _ref.flushOnEnd;
                      this._wait = wait;
                      this._count = count;
                      this._flushOnEnd = flushOnEnd;
                      this._intervalId = null;
                      this._$onTick = function() {
                        return _this._flush();
                      };
                      this._buff = [];
                    },
                    _free: function() {
                      this._$onTick = null;
                      this._buff = null;
                    },
                    _flush: function() {
                      if (this._buff !== null) {
                        this._emitValue(this._buff);
                        this._buff = [];
                      }
                    },
                    _handleValue: function(x) {
                      this._buff.push(x);
                      if (this._buff.length >= this._count) {
                        clearInterval(this._intervalId);
                        this._flush();
                        this._intervalId = setInterval(this._$onTick, this._wait);
                      }
                    },
                    _handleEnd: function() {
                      if (this._flushOnEnd && this._buff.length !== 0) {
                        this._flush();
                      }
                      this._emitEnd();
                    },
                    _onActivation: function() {
                      this._intervalId = setInterval(this._$onTick, this._wait);
                      this._source.onAny(this._$handleAny);
                    },
                    _onDeactivation: function() {
                      if (this._intervalId !== null) {
                        clearInterval(this._intervalId);
                        this._intervalId = null;
                      }
                      this._source.offAny(this._$handleAny);
                    }
                  };
                  var S$30 = createStream("bufferWithTimeOrCount", mixin$23);
                  var P$26 = createProperty("bufferWithTimeOrCount", mixin$23);
                  function bufferWithTimeOrCount(obs, wait, count) {
                    var _ref2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {}, _ref2$flushOnEnd = _ref2.flushOnEnd, flushOnEnd = _ref2$flushOnEnd === void 0 ? true : _ref2$flushOnEnd;
                    return new (obs._ofSameType(S$30, P$26))(obs, { wait, count, flushOnEnd });
                  }
                  function xformForObs(obs) {
                    return {
                      "@@transducer/step": function(res, input) {
                        obs._emitValue(input);
                        return null;
                      },
                      "@@transducer/result": function() {
                        obs._emitEnd();
                        return null;
                      }
                    };
                  }
                  var mixin$24 = {
                    _init: function(_ref) {
                      var transducer = _ref.transducer;
                      this._xform = transducer(xformForObs(this));
                    },
                    _free: function() {
                      this._xform = null;
                    },
                    _handleValue: function(x) {
                      if (this._xform["@@transducer/step"](null, x) !== null) {
                        this._xform["@@transducer/result"](null);
                      }
                    },
                    _handleEnd: function() {
                      this._xform["@@transducer/result"](null);
                    }
                  };
                  var S$31 = createStream("transduce", mixin$24);
                  var P$27 = createProperty("transduce", mixin$24);
                  function transduce(obs, transducer) {
                    return new (obs._ofSameType(S$31, P$27))(obs, { transducer });
                  }
                  var mixin$25 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._handler = fn;
                      this._emitter = emitter(this);
                    },
                    _free: function() {
                      this._handler = null;
                      this._emitter = null;
                    },
                    _handleAny: function(event) {
                      this._handler(this._emitter, event);
                    }
                  };
                  var S$32 = createStream("withHandler", mixin$25);
                  var P$28 = createProperty("withHandler", mixin$25);
                  function withHandler(obs, fn) {
                    return new (obs._ofSameType(S$32, P$28))(obs, { fn });
                  }
                  var isArray = Array.isArray || function(xs) {
                    return Object.prototype.toString.call(xs) === "[object Array]";
                  };
                  function Zip(sources, combinator) {
                    var _this = this;
                    Stream.call(this);
                    this._buffers = map(sources, function(source) {
                      return isArray(source) ? cloneArray(source) : [];
                    });
                    this._sources = map(sources, function(source) {
                      return isArray(source) ? never() : source;
                    });
                    this._combinator = combinator ? spread(combinator, this._sources.length) : function(x) {
                      return x;
                    };
                    this._aliveCount = 0;
                    this._$handlers = [];
                    var _loop = function(i2) {
                      _this._$handlers.push(function(event) {
                        return _this._handleAny(i2, event);
                      });
                    };
                    for (var i = 0; i < this._sources.length; i++) {
                      _loop(i);
                    }
                  }
                  inherit(Zip, Stream, {
                    _name: "zip",
                    _onActivation: function() {
                      while (this._isFull()) {
                        this._emit();
                      }
                      var length = this._sources.length;
                      this._aliveCount = length;
                      for (var i = 0; i < length && this._active; i++) {
                        this._sources[i].onAny(this._$handlers[i]);
                      }
                    },
                    _onDeactivation: function() {
                      for (var i = 0; i < this._sources.length; i++) {
                        this._sources[i].offAny(this._$handlers[i]);
                      }
                    },
                    _emit: function() {
                      var values = new Array(this._buffers.length);
                      for (var i = 0; i < this._buffers.length; i++) {
                        values[i] = this._buffers[i].shift();
                      }
                      var combinator = this._combinator;
                      this._emitValue(combinator(values));
                    },
                    _isFull: function() {
                      for (var i = 0; i < this._buffers.length; i++) {
                        if (this._buffers[i].length === 0) {
                          return false;
                        }
                      }
                      return true;
                    },
                    _handleAny: function(i, event) {
                      if (event.type === VALUE) {
                        this._buffers[i].push(event.value);
                        if (this._isFull()) {
                          this._emit();
                        }
                      }
                      if (event.type === ERROR) {
                        this._emitError(event.value);
                      }
                      if (event.type === END) {
                        this._aliveCount--;
                        if (this._aliveCount === 0) {
                          this._emitEnd();
                        }
                      }
                    },
                    _clear: function() {
                      Stream.prototype._clear.call(this);
                      this._sources = null;
                      this._buffers = null;
                      this._combinator = null;
                      this._$handlers = null;
                    }
                  });
                  function zip(observables, combinator) {
                    return observables.length === 0 ? never() : new Zip(observables, combinator);
                  }
                  var id$8 = function(x) {
                    return x;
                  };
                  function AbstractPool() {
                    var _this = this;
                    var _ref = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, _ref$queueLim = _ref.queueLim, queueLim = _ref$queueLim === void 0 ? 0 : _ref$queueLim, _ref$concurLim = _ref.concurLim, concurLim = _ref$concurLim === void 0 ? -1 : _ref$concurLim, _ref$drop = _ref.drop, drop = _ref$drop === void 0 ? "new" : _ref$drop;
                    Stream.call(this);
                    this._queueLim = queueLim < 0 ? -1 : queueLim;
                    this._concurLim = concurLim < 0 ? -1 : concurLim;
                    this._drop = drop;
                    this._queue = [];
                    this._curSources = [];
                    this._$handleSubAny = function(event) {
                      return _this._handleSubAny(event);
                    };
                    this._$endHandlers = [];
                    this._currentlyAdding = null;
                    if (this._concurLim === 0) {
                      this._emitEnd();
                    }
                  }
                  inherit(AbstractPool, Stream, {
                    _name: "abstractPool",
                    _add: function(obj, toObs) {
                      toObs = toObs || id$8;
                      if (this._concurLim === -1 || this._curSources.length < this._concurLim) {
                        this._addToCur(toObs(obj));
                      } else {
                        if (this._queueLim === -1 || this._queue.length < this._queueLim) {
                          this._addToQueue(toObs(obj));
                        } else if (this._drop === "old") {
                          this._removeOldest();
                          this._add(obj, toObs);
                        }
                      }
                    },
                    _addAll: function(obss) {
                      var _this2 = this;
                      forEach(obss, function(obs) {
                        return _this2._add(obs);
                      });
                    },
                    _remove: function(obs) {
                      if (this._removeCur(obs) === -1) {
                        this._removeQueue(obs);
                      }
                    },
                    _addToQueue: function(obs) {
                      this._queue = concat(this._queue, [obs]);
                    },
                    _addToCur: function(obs) {
                      if (this._active) {
                        if (!obs._alive) {
                          if (obs._currentEvent) {
                            this._emit(obs._currentEvent.type, obs._currentEvent.value);
                          }
                          if (this._active) {
                            if (this._queue.length !== 0) {
                              this._pullQueue();
                            } else if (this._curSources.length === 0) {
                              this._onEmpty();
                            }
                          }
                          return;
                        }
                        this._currentlyAdding = obs;
                        obs.onAny(this._$handleSubAny);
                        this._currentlyAdding = null;
                        if (obs._alive) {
                          this._curSources = concat(this._curSources, [obs]);
                          if (this._active) {
                            this._subToEnd(obs);
                          }
                        } else {
                          if (this._queue.length !== 0) {
                            this._pullQueue();
                          } else if (this._curSources.length === 0) {
                            this._onEmpty();
                          }
                        }
                      } else {
                        this._curSources = concat(this._curSources, [obs]);
                      }
                    },
                    _subToEnd: function(obs) {
                      var _this3 = this;
                      var onEnd = function() {
                        return _this3._removeCur(obs);
                      };
                      this._$endHandlers.push({ obs, handler: onEnd });
                      obs.onEnd(onEnd);
                    },
                    _subscribe: function(obs) {
                      obs.onAny(this._$handleSubAny);
                      if (this._active) {
                        this._subToEnd(obs);
                      }
                    },
                    _unsubscribe: function(obs) {
                      obs.offAny(this._$handleSubAny);
                      var onEndI = findByPred(this._$endHandlers, function(obj) {
                        return obj.obs === obs;
                      });
                      if (onEndI !== -1) {
                        obs.offEnd(this._$endHandlers[onEndI].handler);
                        this._$endHandlers.splice(onEndI, 1);
                      }
                    },
                    _handleSubAny: function(event) {
                      if (event.type === VALUE) {
                        this._emitValue(event.value);
                      } else if (event.type === ERROR) {
                        this._emitError(event.value);
                      }
                    },
                    _removeQueue: function(obs) {
                      var index = find(this._queue, obs);
                      this._queue = remove(this._queue, index);
                      return index;
                    },
                    _removeCur: function(obs) {
                      if (this._active) {
                        this._unsubscribe(obs);
                      }
                      var index = find(this._curSources, obs);
                      this._curSources = remove(this._curSources, index);
                      if (index !== -1) {
                        if (this._queue.length !== 0) {
                          this._pullQueue();
                        } else if (this._curSources.length === 0) {
                          this._onEmpty();
                        }
                      }
                      return index;
                    },
                    _removeOldest: function() {
                      this._removeCur(this._curSources[0]);
                    },
                    _pullQueue: function() {
                      if (this._queue.length !== 0) {
                        this._queue = cloneArray(this._queue);
                        this._addToCur(this._queue.shift());
                      }
                    },
                    _onActivation: function() {
                      for (var i = 0, sources = this._curSources; i < sources.length && this._active; i++) {
                        this._subscribe(sources[i]);
                      }
                    },
                    _onDeactivation: function() {
                      for (var i = 0, sources = this._curSources; i < sources.length; i++) {
                        this._unsubscribe(sources[i]);
                      }
                      if (this._currentlyAdding !== null) {
                        this._unsubscribe(this._currentlyAdding);
                      }
                    },
                    _isEmpty: function() {
                      return this._curSources.length === 0;
                    },
                    _onEmpty: function() {
                    },
                    _clear: function() {
                      Stream.prototype._clear.call(this);
                      this._queue = null;
                      this._curSources = null;
                      this._$handleSubAny = null;
                      this._$endHandlers = null;
                    }
                  });
                  function Merge(sources) {
                    AbstractPool.call(this);
                    this._addAll(sources);
                    this._initialised = true;
                  }
                  inherit(Merge, AbstractPool, {
                    _name: "merge",
                    _onEmpty: function() {
                      if (this._initialised) {
                        this._emitEnd();
                      }
                    }
                  });
                  function merge(observables) {
                    return observables.length === 0 ? never() : new Merge(observables);
                  }
                  function S$33(generator) {
                    var _this = this;
                    Stream.call(this);
                    this._generator = generator;
                    this._source = null;
                    this._inLoop = false;
                    this._iteration = 0;
                    this._$handleAny = function(event) {
                      return _this._handleAny(event);
                    };
                  }
                  inherit(S$33, Stream, {
                    _name: "repeat",
                    _handleAny: function(event) {
                      if (event.type === END) {
                        this._source = null;
                        this._getSource();
                      } else {
                        this._emit(event.type, event.value);
                      }
                    },
                    _getSource: function() {
                      if (!this._inLoop) {
                        this._inLoop = true;
                        var generator = this._generator;
                        while (this._source === null && this._alive && this._active) {
                          this._source = generator(this._iteration++);
                          if (this._source) {
                            this._source.onAny(this._$handleAny);
                          } else {
                            this._emitEnd();
                          }
                        }
                        this._inLoop = false;
                      }
                    },
                    _onActivation: function() {
                      if (this._source) {
                        this._source.onAny(this._$handleAny);
                      } else {
                        this._getSource();
                      }
                    },
                    _onDeactivation: function() {
                      if (this._source) {
                        this._source.offAny(this._$handleAny);
                      }
                    },
                    _clear: function() {
                      Stream.prototype._clear.call(this);
                      this._generator = null;
                      this._source = null;
                      this._$handleAny = null;
                    }
                  });
                  var repeat = function(generator) {
                    return new S$33(generator);
                  };
                  function concat$1(observables) {
                    return repeat(function(index) {
                      return observables.length > index ? observables[index] : false;
                    }).setName("concat");
                  }
                  function Pool() {
                    AbstractPool.call(this);
                  }
                  inherit(Pool, AbstractPool, {
                    _name: "pool",
                    plug: function(obs) {
                      this._add(obs);
                      return this;
                    },
                    unplug: function(obs) {
                      this._remove(obs);
                      return this;
                    }
                  });
                  function FlatMap(source, fn, options) {
                    var _this = this;
                    AbstractPool.call(this, options);
                    this._source = source;
                    this._fn = fn;
                    this._mainEnded = false;
                    this._lastCurrent = null;
                    this._$handleMain = function(event) {
                      return _this._handleMain(event);
                    };
                  }
                  inherit(FlatMap, AbstractPool, {
                    _onActivation: function() {
                      AbstractPool.prototype._onActivation.call(this);
                      if (this._active) {
                        this._source.onAny(this._$handleMain);
                      }
                    },
                    _onDeactivation: function() {
                      AbstractPool.prototype._onDeactivation.call(this);
                      this._source.offAny(this._$handleMain);
                      this._hadNoEvSinceDeact = true;
                    },
                    _handleMain: function(event) {
                      if (event.type === VALUE) {
                        var sameCurr = this._activating && this._hadNoEvSinceDeact && this._lastCurrent === event.value;
                        if (!sameCurr) {
                          this._add(event.value, this._fn);
                        }
                        this._lastCurrent = event.value;
                        this._hadNoEvSinceDeact = false;
                      }
                      if (event.type === ERROR) {
                        this._emitError(event.value);
                      }
                      if (event.type === END) {
                        if (this._isEmpty()) {
                          this._emitEnd();
                        } else {
                          this._mainEnded = true;
                        }
                      }
                    },
                    _onEmpty: function() {
                      if (this._mainEnded) {
                        this._emitEnd();
                      }
                    },
                    _clear: function() {
                      AbstractPool.prototype._clear.call(this);
                      this._source = null;
                      this._lastCurrent = null;
                      this._$handleMain = null;
                    }
                  });
                  function FlatMapErrors(source, fn) {
                    FlatMap.call(this, source, fn);
                  }
                  inherit(FlatMapErrors, FlatMap, {
                    // Same as in FlatMap, only VALUE/ERROR flipped
                    _handleMain: function(event) {
                      if (event.type === ERROR) {
                        var sameCurr = this._activating && this._hadNoEvSinceDeact && this._lastCurrent === event.value;
                        if (!sameCurr) {
                          this._add(event.value, this._fn);
                        }
                        this._lastCurrent = event.value;
                        this._hadNoEvSinceDeact = false;
                      }
                      if (event.type === VALUE) {
                        this._emitValue(event.value);
                      }
                      if (event.type === END) {
                        if (this._isEmpty()) {
                          this._emitEnd();
                        } else {
                          this._mainEnded = true;
                        }
                      }
                    }
                  });
                  function createConstructor$1(BaseClass, name) {
                    return function AnonymousObservable(primary, secondary, options) {
                      var _this = this;
                      BaseClass.call(this);
                      this._primary = primary;
                      this._secondary = secondary;
                      this._name = primary._name + "." + name;
                      this._lastSecondary = NOTHING;
                      this._$handleSecondaryAny = function(event) {
                        return _this._handleSecondaryAny(event);
                      };
                      this._$handlePrimaryAny = function(event) {
                        return _this._handlePrimaryAny(event);
                      };
                      this._init(options);
                    };
                  }
                  function createClassMethods$1(BaseClass) {
                    return {
                      _init: function() {
                      },
                      _free: function() {
                      },
                      _handlePrimaryValue: function(x) {
                        this._emitValue(x);
                      },
                      _handlePrimaryError: function(x) {
                        this._emitError(x);
                      },
                      _handlePrimaryEnd: function() {
                        this._emitEnd();
                      },
                      _handleSecondaryValue: function(x) {
                        this._lastSecondary = x;
                      },
                      _handleSecondaryError: function(x) {
                        this._emitError(x);
                      },
                      _handleSecondaryEnd: function() {
                      },
                      _handlePrimaryAny: function(event) {
                        switch (event.type) {
                          case VALUE:
                            return this._handlePrimaryValue(event.value);
                          case ERROR:
                            return this._handlePrimaryError(event.value);
                          case END:
                            return this._handlePrimaryEnd(event.value);
                        }
                      },
                      _handleSecondaryAny: function(event) {
                        switch (event.type) {
                          case VALUE:
                            return this._handleSecondaryValue(event.value);
                          case ERROR:
                            return this._handleSecondaryError(event.value);
                          case END:
                            this._handleSecondaryEnd(event.value);
                            this._removeSecondary();
                        }
                      },
                      _removeSecondary: function() {
                        if (this._secondary !== null) {
                          this._secondary.offAny(this._$handleSecondaryAny);
                          this._$handleSecondaryAny = null;
                          this._secondary = null;
                        }
                      },
                      _onActivation: function() {
                        if (this._secondary !== null) {
                          this._secondary.onAny(this._$handleSecondaryAny);
                        }
                        if (this._active) {
                          this._primary.onAny(this._$handlePrimaryAny);
                        }
                      },
                      _onDeactivation: function() {
                        if (this._secondary !== null) {
                          this._secondary.offAny(this._$handleSecondaryAny);
                        }
                        this._primary.offAny(this._$handlePrimaryAny);
                      },
                      _clear: function() {
                        BaseClass.prototype._clear.call(this);
                        this._primary = null;
                        this._secondary = null;
                        this._lastSecondary = null;
                        this._$handleSecondaryAny = null;
                        this._$handlePrimaryAny = null;
                        this._free();
                      }
                    };
                  }
                  function createStream$1(name, mixin2) {
                    var S2 = createConstructor$1(Stream, name);
                    inherit(S2, Stream, createClassMethods$1(Stream), mixin2);
                    return S2;
                  }
                  function createProperty$1(name, mixin2) {
                    var P2 = createConstructor$1(Property, name);
                    inherit(P2, Property, createClassMethods$1(Property), mixin2);
                    return P2;
                  }
                  var mixin$26 = {
                    _handlePrimaryValue: function(x) {
                      if (this._lastSecondary !== NOTHING && this._lastSecondary) {
                        this._emitValue(x);
                      }
                    },
                    _handleSecondaryEnd: function() {
                      if (this._lastSecondary === NOTHING || !this._lastSecondary) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$34 = createStream$1("filterBy", mixin$26);
                  var P$29 = createProperty$1("filterBy", mixin$26);
                  function filterBy(primary, secondary) {
                    return new (primary._ofSameType(S$34, P$29))(primary, secondary);
                  }
                  var id2 = function(_, x) {
                    return x;
                  };
                  function sampledBy(passive, active, combinator) {
                    var _combinator = combinator ? function(a, b) {
                      return combinator(b, a);
                    } : id2;
                    return combine([active], [passive], _combinator).setName(passive, "sampledBy");
                  }
                  var mixin$27 = {
                    _handlePrimaryValue: function(x) {
                      if (this._lastSecondary !== NOTHING) {
                        this._emitValue(x);
                      }
                    },
                    _handleSecondaryEnd: function() {
                      if (this._lastSecondary === NOTHING) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$35 = createStream$1("skipUntilBy", mixin$27);
                  var P$30 = createProperty$1("skipUntilBy", mixin$27);
                  function skipUntilBy(primary, secondary) {
                    return new (primary._ofSameType(S$35, P$30))(primary, secondary);
                  }
                  var mixin$28 = {
                    _handleSecondaryValue: function() {
                      this._emitEnd();
                    }
                  };
                  var S$36 = createStream$1("takeUntilBy", mixin$28);
                  var P$31 = createProperty$1("takeUntilBy", mixin$28);
                  function takeUntilBy(primary, secondary) {
                    return new (primary._ofSameType(S$36, P$31))(primary, secondary);
                  }
                  var mixin$29 = {
                    _init: function() {
                      var _ref = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, _ref$flushOnEnd = _ref.flushOnEnd, flushOnEnd = _ref$flushOnEnd === void 0 ? true : _ref$flushOnEnd;
                      this._buff = [];
                      this._flushOnEnd = flushOnEnd;
                    },
                    _free: function() {
                      this._buff = null;
                    },
                    _flush: function() {
                      if (this._buff !== null) {
                        this._emitValue(this._buff);
                        this._buff = [];
                      }
                    },
                    _handlePrimaryEnd: function() {
                      if (this._flushOnEnd) {
                        this._flush();
                      }
                      this._emitEnd();
                    },
                    _onActivation: function() {
                      this._primary.onAny(this._$handlePrimaryAny);
                      if (this._alive && this._secondary !== null) {
                        this._secondary.onAny(this._$handleSecondaryAny);
                      }
                    },
                    _handlePrimaryValue: function(x) {
                      this._buff.push(x);
                    },
                    _handleSecondaryValue: function() {
                      this._flush();
                    },
                    _handleSecondaryEnd: function() {
                      if (!this._flushOnEnd) {
                        this._emitEnd();
                      }
                    }
                  };
                  var S$37 = createStream$1("bufferBy", mixin$29);
                  var P$32 = createProperty$1("bufferBy", mixin$29);
                  function bufferBy(primary, secondary, options) {
                    return new (primary._ofSameType(S$37, P$32))(primary, secondary, options);
                  }
                  var mixin$30 = {
                    _init: function() {
                      var _ref = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, _ref$flushOnEnd = _ref.flushOnEnd, flushOnEnd = _ref$flushOnEnd === void 0 ? true : _ref$flushOnEnd, _ref$flushOnChange = _ref.flushOnChange, flushOnChange = _ref$flushOnChange === void 0 ? false : _ref$flushOnChange;
                      this._buff = [];
                      this._flushOnEnd = flushOnEnd;
                      this._flushOnChange = flushOnChange;
                    },
                    _free: function() {
                      this._buff = null;
                    },
                    _flush: function() {
                      if (this._buff !== null) {
                        this._emitValue(this._buff);
                        this._buff = [];
                      }
                    },
                    _handlePrimaryEnd: function() {
                      if (this._flushOnEnd) {
                        this._flush();
                      }
                      this._emitEnd();
                    },
                    _handlePrimaryValue: function(x) {
                      this._buff.push(x);
                      if (this._lastSecondary !== NOTHING && !this._lastSecondary) {
                        this._flush();
                      }
                    },
                    _handleSecondaryEnd: function() {
                      if (!this._flushOnEnd && (this._lastSecondary === NOTHING || this._lastSecondary)) {
                        this._emitEnd();
                      }
                    },
                    _handleSecondaryValue: function(x) {
                      if (this._flushOnChange && !x) {
                        this._flush();
                      }
                      this._lastSecondary = x;
                    }
                  };
                  var S$38 = createStream$1("bufferWhileBy", mixin$30);
                  var P$33 = createProperty$1("bufferWhileBy", mixin$30);
                  function bufferWhileBy(primary, secondary, options) {
                    return new (primary._ofSameType(S$38, P$33))(primary, secondary, options);
                  }
                  var f = function() {
                    return false;
                  };
                  var t2 = function() {
                    return true;
                  };
                  function awaiting(a, b) {
                    var result2 = merge([map$1(a, t2), map$1(b, f)]);
                    result2 = skipDuplicates(result2);
                    result2 = toProperty(result2, f);
                    return result2.setName(a, "awaiting");
                  }
                  var mixin$31 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleValue: function(x) {
                      var fn = this._fn;
                      var result2 = fn(x);
                      if (result2.convert) {
                        this._emitError(result2.error);
                      } else {
                        this._emitValue(x);
                      }
                    }
                  };
                  var S$39 = createStream("valuesToErrors", mixin$31);
                  var P$34 = createProperty("valuesToErrors", mixin$31);
                  var defFn = function(x) {
                    return { convert: true, error: x };
                  };
                  function valuesToErrors(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : defFn;
                    return new (obs._ofSameType(S$39, P$34))(obs, { fn });
                  }
                  var mixin$32 = {
                    _init: function(_ref) {
                      var fn = _ref.fn;
                      this._fn = fn;
                    },
                    _free: function() {
                      this._fn = null;
                    },
                    _handleError: function(x) {
                      var fn = this._fn;
                      var result2 = fn(x);
                      if (result2.convert) {
                        this._emitValue(result2.value);
                      } else {
                        this._emitError(x);
                      }
                    }
                  };
                  var S$40 = createStream("errorsToValues", mixin$32);
                  var P$35 = createProperty("errorsToValues", mixin$32);
                  var defFn$1 = function(x) {
                    return { convert: true, value: x };
                  };
                  function errorsToValues(obs) {
                    var fn = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : defFn$1;
                    return new (obs._ofSameType(S$40, P$35))(obs, { fn });
                  }
                  var mixin$33 = {
                    _handleError: function(x) {
                      this._emitError(x);
                      this._emitEnd();
                    }
                  };
                  var S$41 = createStream("endOnError", mixin$33);
                  var P$36 = createProperty("endOnError", mixin$33);
                  function endOnError(obs) {
                    return new (obs._ofSameType(S$41, P$36))(obs);
                  }
                  Observable.prototype.toProperty = function(fn) {
                    return toProperty(this, fn);
                  };
                  Observable.prototype.changes = function() {
                    return changes(this);
                  };
                  Observable.prototype.toPromise = function(Promise2) {
                    return toPromise(this, Promise2);
                  };
                  Observable.prototype.toESObservable = toESObservable;
                  Observable.prototype[$$observable] = toESObservable;
                  Observable.prototype.map = function(fn) {
                    return map$1(this, fn);
                  };
                  Observable.prototype.filter = function(fn) {
                    return filter(this, fn);
                  };
                  Observable.prototype.take = function(n) {
                    return take(this, n);
                  };
                  Observable.prototype.takeErrors = function(n) {
                    return takeErrors(this, n);
                  };
                  Observable.prototype.takeWhile = function(fn) {
                    return takeWhile(this, fn);
                  };
                  Observable.prototype.last = function() {
                    return last2(this);
                  };
                  Observable.prototype.skip = function(n) {
                    return skip(this, n);
                  };
                  Observable.prototype.skipWhile = function(fn) {
                    return skipWhile(this, fn);
                  };
                  Observable.prototype.skipDuplicates = function(fn) {
                    return skipDuplicates(this, fn);
                  };
                  Observable.prototype.diff = function(fn, seed) {
                    return diff(this, fn, seed);
                  };
                  Observable.prototype.scan = function(fn, seed) {
                    return scan(this, fn, seed);
                  };
                  Observable.prototype.flatten = function(fn) {
                    return flatten2(this, fn);
                  };
                  Observable.prototype.delay = function(wait) {
                    return delay(this, wait);
                  };
                  Observable.prototype.throttle = function(wait, options) {
                    return throttle(this, wait, options);
                  };
                  Observable.prototype.debounce = function(wait, options) {
                    return debounce(this, wait, options);
                  };
                  Observable.prototype.mapErrors = function(fn) {
                    return mapErrors(this, fn);
                  };
                  Observable.prototype.filterErrors = function(fn) {
                    return filterErrors(this, fn);
                  };
                  Observable.prototype.ignoreValues = function() {
                    return ignoreValues(this);
                  };
                  Observable.prototype.ignoreErrors = function() {
                    return ignoreErrors(this);
                  };
                  Observable.prototype.ignoreEnd = function() {
                    return ignoreEnd(this);
                  };
                  Observable.prototype.beforeEnd = function(fn) {
                    return beforeEnd(this, fn);
                  };
                  Observable.prototype.slidingWindow = function(max, min) {
                    return slidingWindow(this, max, min);
                  };
                  Observable.prototype.bufferWhile = function(fn, options) {
                    return bufferWhile(this, fn, options);
                  };
                  Observable.prototype.bufferWithCount = function(count, options) {
                    return bufferWhile$1(this, count, options);
                  };
                  Observable.prototype.bufferWithTimeOrCount = function(wait, count, options) {
                    return bufferWithTimeOrCount(this, wait, count, options);
                  };
                  Observable.prototype.transduce = function(transducer) {
                    return transduce(this, transducer);
                  };
                  Observable.prototype.withHandler = function(fn) {
                    return withHandler(this, fn);
                  };
                  Observable.prototype.thru = function(fn) {
                    return fn(this);
                  };
                  Observable.prototype.combine = function(other, combinator) {
                    return combine([this, other], combinator);
                  };
                  Observable.prototype.zip = function(other, combinator) {
                    return zip([this, other], combinator);
                  };
                  Observable.prototype.merge = function(other) {
                    return merge([this, other]);
                  };
                  Observable.prototype.concat = function(other) {
                    return concat$1([this, other]);
                  };
                  var pool = function() {
                    return new Pool();
                  };
                  Observable.prototype.flatMap = function(fn) {
                    return new FlatMap(this, fn).setName(this, "flatMap");
                  };
                  Observable.prototype.flatMapLatest = function(fn) {
                    return new FlatMap(this, fn, { concurLim: 1, drop: "old" }).setName(this, "flatMapLatest");
                  };
                  Observable.prototype.flatMapFirst = function(fn) {
                    return new FlatMap(this, fn, { concurLim: 1 }).setName(this, "flatMapFirst");
                  };
                  Observable.prototype.flatMapConcat = function(fn) {
                    return new FlatMap(this, fn, { queueLim: -1, concurLim: 1 }).setName(this, "flatMapConcat");
                  };
                  Observable.prototype.flatMapConcurLimit = function(fn, limit) {
                    return new FlatMap(this, fn, { queueLim: -1, concurLim: limit }).setName(this, "flatMapConcurLimit");
                  };
                  Observable.prototype.flatMapErrors = function(fn) {
                    return new FlatMapErrors(this, fn).setName(this, "flatMapErrors");
                  };
                  Observable.prototype.filterBy = function(other) {
                    return filterBy(this, other);
                  };
                  Observable.prototype.sampledBy = function(other, combinator) {
                    return sampledBy(this, other, combinator);
                  };
                  Observable.prototype.skipUntilBy = function(other) {
                    return skipUntilBy(this, other);
                  };
                  Observable.prototype.takeUntilBy = function(other) {
                    return takeUntilBy(this, other);
                  };
                  Observable.prototype.bufferBy = function(other, options) {
                    return bufferBy(this, other, options);
                  };
                  Observable.prototype.bufferWhileBy = function(other, options) {
                    return bufferWhileBy(this, other, options);
                  };
                  var DEPRECATION_WARNINGS = true;
                  function dissableDeprecationWarnings() {
                    DEPRECATION_WARNINGS = false;
                  }
                  function warn(msg) {
                    if (DEPRECATION_WARNINGS && console && typeof console.warn === "function") {
                      var msg2 = "\nHere is an Error object for you containing the call stack:";
                      console.warn(msg, msg2, new Error());
                    }
                  }
                  Observable.prototype.awaiting = function(other) {
                    warn("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145");
                    return awaiting(this, other);
                  };
                  Observable.prototype.valuesToErrors = function(fn) {
                    warn("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149");
                    return valuesToErrors(this, fn);
                  };
                  Observable.prototype.errorsToValues = function(fn) {
                    warn("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149");
                    return errorsToValues(this, fn);
                  };
                  Observable.prototype.endOnError = function() {
                    warn("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150");
                    return endOnError(this);
                  };
                  var Kefir = {
                    Observable,
                    Stream,
                    Property,
                    never,
                    later,
                    interval,
                    sequentially,
                    fromPoll,
                    withInterval,
                    fromCallback,
                    fromNodeCallback,
                    fromEvents,
                    stream,
                    constant,
                    constantError,
                    fromPromise,
                    fromESObservable,
                    combine,
                    zip,
                    merge,
                    concat: concat$1,
                    Pool,
                    pool,
                    repeat,
                    staticLand
                  };
                  Kefir.Kefir = Kefir;
                  const __WEBPACK_DEFAULT_EXPORT__ = Kefir;
                })
              ),
              /***/
              4401: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var _asap = _interopRequireDefault(__webpack_require__2(4622));
                  var CAPACITY = 1024;
                  var Scheduler = /* @__PURE__ */ (function() {
                    function Scheduler2() {
                      (0, _classCallCheck2.default)(this, Scheduler2);
                      (0, _defineProperty2.default)(this, "_queue", []);
                      (0, _defineProperty2.default)(this, "_isFlushing", false);
                      (0, _defineProperty2.default)(this, "_index", 0);
                    }
                    (0, _createClass2.default)(Scheduler2, [{
                      key: "schedule",
                      value: function schedule(cb) {
                        var _this = this;
                        this._queue.push(function() {
                          try {
                            cb();
                          } catch (e) {
                            setTimeout(function() {
                              throw e;
                            }, 0);
                          }
                        });
                        if (this._queue.length === 1) {
                          (0, _asap.default)(function() {
                            _this.flush();
                          });
                        }
                      }
                    }, {
                      key: "flush",
                      value: function flush() {
                        if (this._isFlushing) return;
                        this._isFlushing = true;
                        var queue = this._queue;
                        while (this._index < queue.length) {
                          var currentIndex = this._index;
                          this._index += 1;
                          queue[currentIndex].call();
                          if (this._index > CAPACITY) {
                            for (var scan = 0, newLength = queue.length - this._index; scan < newLength; scan++) {
                              queue[scan] = queue[scan + this._index];
                            }
                            queue.length -= this._index;
                            this._index = 0;
                          }
                        }
                        queue.length = 0;
                        this._index = 0;
                        this._isFlushing = false;
                      }
                    }]);
                    return Scheduler2;
                  })();
                  exports2["default"] = Scheduler;
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              3800: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = filter;
                  var _ = _interopRequireDefault(__webpack_require__2(2436));
                  function filter(liveSet, cb) {
                    return new _.default({
                      scheduler: liveSet.getScheduler(),
                      read: function read() {
                        var ret = /* @__PURE__ */ new Set();
                        liveSet.values().forEach(function(value) {
                          if (cb(value)) {
                            ret.add(value);
                          }
                        });
                        return ret;
                      },
                      listen: function listen(setValues, controller) {
                        var passedFilter = /* @__PURE__ */ new Set();
                        var sub = liveSet.subscribe({
                          start: function start() {
                            var initialValues = /* @__PURE__ */ new Set();
                            liveSet.values().forEach(function(value) {
                              if (cb(value)) {
                                passedFilter.add(value);
                                initialValues.add(value);
                              }
                            });
                            setValues(initialValues);
                          },
                          next: function next(changes) {
                            changes.forEach(function(change) {
                              if (change.type === "add") {
                                if (cb(change.value)) {
                                  passedFilter.add(change.value);
                                  controller.add(change.value);
                                }
                              } else if (change.type === "remove") {
                                if (passedFilter.has(change.value)) {
                                  passedFilter.delete(change.value);
                                  controller.remove(change.value);
                                }
                              }
                            });
                          },
                          error: function error(err) {
                            controller.error(err);
                          },
                          complete: function complete() {
                            controller.end();
                          }
                        });
                        return sub;
                      }
                    });
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              5145: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = flatMapR;
                  var _ = _interopRequireDefault(__webpack_require__2(2436));
                  function flatMapR(liveSet, cb) {
                    var isReading = false;
                    return new _.default({
                      scheduler: liveSet.getScheduler(),
                      read: function read() {
                        if (isReading) {
                          throw new Error("reading inactive recursively-flatMapped stream is not supported");
                        }
                        isReading = true;
                        var s = /* @__PURE__ */ new Set();
                        liveSet.values().forEach(function(value) {
                          var childSet = cb(value);
                          childSet.values().forEach(function(value2) {
                            s.add(value2);
                          });
                        });
                        isReading = false;
                        return s;
                      },
                      listen: function listen(setValues, controller) {
                        var mainSubCompleted = false;
                        var hasSubscribedToChildren = false;
                        var nextHasFired = false;
                        var childSetSubs = /* @__PURE__ */ new Map();
                        function childSetSubscribe(childSet) {
                          if (childSet.isEnded()) {
                            childSet.values().forEach(function(value) {
                              controller.add(value);
                            });
                          } else {
                            childSet.subscribe({
                              start: function start(sub) {
                                childSetSubs.set(childSet, sub);
                                childSet.values().forEach(function(value) {
                                  controller.add(value);
                                });
                              },
                              next: function next(changes) {
                                nextHasFired = true;
                                changes.forEach(function(change) {
                                  if (change.type === "add") {
                                    controller.add(change.value);
                                  } else if (change.type === "remove") {
                                    controller.remove(change.value);
                                  }
                                });
                              },
                              error: function error(err) {
                                controller.error(err);
                              },
                              complete: function complete() {
                                childSetSubs.delete(childSet);
                                if (mainSubCompleted && childSetSubs.size === 0) {
                                  controller.end();
                                }
                              }
                            });
                          }
                        }
                        setValues(/* @__PURE__ */ new Set());
                        var childSets = /* @__PURE__ */ new Map();
                        var mainSub = liveSet.subscribe({
                          start: function start() {
                            liveSet.values().forEach(function(value) {
                              var childSet = cb(value);
                              childSets.set(value, childSet);
                              childSetSubscribe(childSet);
                            });
                            hasSubscribedToChildren = true;
                          },
                          next: function next(changes) {
                            nextHasFired = true;
                            changes.forEach(function(change) {
                              if (change.type === "add") {
                                var childSet = cb(change.value);
                                childSets.set(change.value, childSet);
                                childSetSubscribe(childSet);
                              } else if (change.type === "remove") {
                                var _childSet = childSets.get(change.value);
                                if (!_childSet) throw new Error("removed value not in liveset");
                                _childSet.values().forEach(function(value) {
                                  controller.remove(value);
                                });
                                childSets.delete(change.value);
                                var childSetSub = childSetSubs.get(_childSet);
                                if (childSetSub) {
                                  childSetSub.unsubscribe();
                                  childSetSubs.delete(_childSet);
                                }
                              }
                            });
                          },
                          error: function error(err) {
                            controller.error(err);
                          },
                          complete: function complete() {
                            mainSubCompleted = true;
                            if (hasSubscribedToChildren && childSetSubs.size === 0) {
                              controller.end();
                            }
                          }
                        });
                        var isPullingChanges = false;
                        return {
                          unsubscribe: function unsubscribe() {
                            mainSub.unsubscribe();
                            childSetSubs.forEach(function(sub) {
                              sub.unsubscribe();
                            });
                            childSets.clear();
                            childSetSubs.clear();
                          },
                          pullChanges: function pullChanges() {
                            if (isPullingChanges) return;
                            isPullingChanges = true;
                            do {
                              nextHasFired = false;
                              mainSub.pullChanges();
                              childSetSubs.forEach(function(sub) {
                                sub.pullChanges();
                              });
                            } while (nextHasFired);
                            isPullingChanges = false;
                          }
                        };
                      }
                    });
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              2436: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var _Scheduler = _interopRequireDefault(__webpack_require__2(4401));
                  var _symbolObservable = _interopRequireDefault(__webpack_require__2(8899));
                  var LiveSet = /* @__PURE__ */ (function() {
                    function LiveSet2(init2) {
                      (0, _classCallCheck2.default)(this, LiveSet2);
                      (0, _defineProperty2.default)(this, "_init", void 0);
                      (0, _defineProperty2.default)(this, "_scheduler", void 0);
                      (0, _defineProperty2.default)(this, "_values", null);
                      (0, _defineProperty2.default)(this, "_mutableValues", false);
                      (0, _defineProperty2.default)(this, "_active", null);
                      (0, _defineProperty2.default)(this, "_inSubscriptionStart", false);
                      (0, _defineProperty2.default)(this, "_ended", false);
                      (0, _defineProperty2.default)(this, "_endedWithError", false);
                      (0, _defineProperty2.default)(this, "_error", null);
                      (0, _defineProperty2.default)(this, "_queuedCall", false);
                      (0, _defineProperty2.default)(this, "_changeQueue", []);
                      (0, _defineProperty2.default)(this, "_observers", []);
                      this._init = init2;
                      this._scheduler = init2.scheduler || LiveSet2.defaultScheduler;
                    }
                    (0, _createClass2.default)(LiveSet2, [{
                      key: "_queueChange",
                      value: function _queueChange(record) {
                        var _this = this;
                        if (record) {
                          this._changeQueue.push(record);
                        }
                        if (!this._queuedCall) {
                          this._queuedCall = true;
                          this._scheduler.schedule(function() {
                            _this._queuedCall = false;
                            var changes = _this._changeQueue;
                            _this._changeQueue = [];
                            var observersToCall;
                            var ended = _this._ended;
                            if (ended) {
                              observersToCall = _this._observers;
                              _this._observers = [];
                            } else {
                              observersToCall = _this._observers.slice();
                            }
                            observersToCall.forEach(function(record2) {
                              var observer2 = record2.observer, ignore = record2.ignore;
                              var observerNext = observer2.next;
                              if (observerNext) {
                                if (ignore === 0) {
                                  observerNext.call(observer2, changes);
                                } else {
                                  record2.ignore = 0;
                                  var changesToDeliver = changes.slice(ignore);
                                  if (changesToDeliver.length) {
                                    observerNext.call(observer2, changesToDeliver);
                                  }
                                }
                              }
                              if (ended) {
                                if (_this._endedWithError) {
                                  if (observer2.error) observer2.error(_this._error);
                                } else {
                                  if (observer2.complete) observer2.complete();
                                }
                              }
                            });
                          });
                        }
                      }
                    }, {
                      key: "_deactivate",
                      value: function _deactivate() {
                        if (!this._active) throw new Error("already inactive");
                        var listenHandler = this._active.listenHandler;
                        this._active = null;
                        if (listenHandler) {
                          listenHandler.unsubscribe();
                        }
                      }
                    }, {
                      key: "values",
                      value: function values() {
                        if (this._values) {
                          if (this._active && !this._inSubscriptionStart) {
                            var listenHandler = this._active.listenHandler;
                            if (listenHandler.pullChanges) {
                              listenHandler.pullChanges();
                            }
                          }
                          if (this._mutableValues) {
                            this._mutableValues = false;
                            makeSetImmutable(this._values);
                          }
                          return this._values;
                        } else {
                          if (this._active) {
                            throw new Error("tried to call values() on liveset during subscription before setValues was called");
                          }
                          var s = this._init.read();
                          makeSetImmutable(s);
                          return s;
                        }
                      }
                    }, {
                      key: "isEnded",
                      value: function isEnded() {
                        return this._ended;
                      }
                    }, {
                      key: "getScheduler",
                      value: function getScheduler() {
                        return this._scheduler;
                      }
                    }, {
                      key: "subscribe",
                      value: function subscribe(observerOrOnNext, onError, onComplete) {
                        var _this2 = this;
                        var liveSet = this;
                        var observer2;
                        if (typeof observerOrOnNext === "function") {
                          observer2 = {
                            next: observerOrOnNext,
                            error: onError,
                            complete: onComplete
                          };
                        } else {
                          observer2 = observerOrOnNext;
                        }
                        observer2;
                        if (this._ended) {
                          var _subscription = {
                            closed: false,
                            unsubscribe: function unsubscribe() {
                              _subscription.closed = true;
                            },
                            pullChanges: function pullChanges() {
                            }
                          };
                          if (observer2.start) {
                            observer2.start(_subscription);
                          }
                          if (!_subscription.closed) {
                            if (this._endedWithError) {
                              if (observer2.error) {
                                observer2.error(this._error);
                              }
                            } else {
                              if (observer2.complete) {
                                observer2.complete();
                              }
                            }
                          }
                          _subscription.closed = true;
                          return _subscription;
                        }
                        var observerRecord = {
                          observer: observer2,
                          ignore: this._changeQueue.length
                        };
                        var isStarting = true;
                        var unsubscribedInStart = false;
                        var subscription = {
                          /*:: closed: false&&` */
                          get closed() {
                            return !isStarting && liveSet._observers.indexOf(observerRecord) < 0;
                          },
                          unsubscribe: function unsubscribe() {
                            if (isStarting) {
                              unsubscribedInStart = true;
                              return;
                            }
                            var ix = _this2._observers.indexOf(observerRecord);
                            if (ix >= 0) {
                              _this2._observers.splice(ix, 1);
                              if (!_this2._ended && _this2._observers.length === 0) {
                                _this2._values = null;
                                _this2._deactivate();
                              }
                            }
                          },
                          pullChanges: function pullChanges() {
                            if (_this2._active && _this2._active.listenHandler && _this2._active.listenHandler.pullChanges) {
                              _this2._active.listenHandler.pullChanges();
                            }
                            var changeQueueLength = _this2._changeQueue.length;
                            var originalNext = observer2.next;
                            if (changeQueueLength !== 0 && originalNext) {
                              var changesToDeliver = _this2._changeQueue.slice(observerRecord.ignore);
                              if (changesToDeliver.length !== 0) {
                                observerRecord.ignore = changeQueueLength;
                                originalNext.call(observer2, changesToDeliver);
                              }
                            }
                          }
                        };
                        if (!this._active) {
                          var _controller2 = {
                            // Flow doesn't support getters and setters yet
                            /*:: closed: false&&` */
                            get closed() {
                              return !liveSet._active || liveSet._active.controller !== this;
                            },
                            add: function add(value) {
                              var values = _this2._values;
                              if (!values) throw new Error("setValue must be called before controller is used");
                              if (!_this2._ended && !values.has(value)) {
                                if (!_this2._mutableValues) {
                                  _this2._values = values = new Set(values);
                                  _this2._mutableValues = true;
                                }
                                values.add(value);
                                _this2._queueChange({
                                  type: "add",
                                  value
                                });
                              }
                            },
                            remove: function remove(value) {
                              var values = _this2._values;
                              if (!values) throw new Error("setValue must be called before controller is used");
                              if (!_this2._ended && values.has(value)) {
                                if (!_this2._mutableValues) {
                                  _this2._values = values = new Set(values);
                                  _this2._mutableValues = true;
                                }
                                values.delete(value);
                                _this2._queueChange({
                                  type: "remove",
                                  value
                                });
                              }
                            },
                            error: function error(err) {
                              if (_this2._ended) return;
                              _this2._ended = true;
                              _this2._endedWithError = true;
                              _this2._error = err;
                              _this2._queueChange();
                              _this2._deactivate();
                            },
                            end: function end() {
                              if (_this2._ended) return;
                              _this2._ended = true;
                              _this2._queueChange();
                              _this2._deactivate();
                            }
                          };
                          var active = this._active = {
                            controller: _controller2,
                            listenHandler: {
                              unsubscribe: function unsubscribe() {
                              }
                            }
                          };
                          var setValuesError = function setValuesError2() {
                            throw new Error("setValues must be called once during listen");
                          };
                          var _setValues2 = function _setValues(values) {
                            _setValues2 = setValuesError;
                            makeSetImmutable(values);
                            _this2._values = values;
                            _this2._mutableValues = false;
                          };
                          var listenHandlerOrFunction = this._init.listen(function(values) {
                            return _setValues2(values);
                          }, _controller2);
                          if (!this._values) {
                            setValuesError();
                          }
                          if (typeof listenHandlerOrFunction === "function") {
                            active.listenHandler = {
                              unsubscribe: listenHandlerOrFunction
                            };
                          } else if (listenHandlerOrFunction != null && typeof listenHandlerOrFunction.unsubscribe === "function") {
                            active.listenHandler = listenHandlerOrFunction;
                          } else if (listenHandlerOrFunction != null) {
                            throw new TypeError("listen must return object with unsubscribe method, a function, or null");
                          }
                          if (_controller2.closed) {
                            this._active = active;
                            this._deactivate();
                          }
                        }
                        if (observer2.start) {
                          this._inSubscriptionStart = true;
                          observer2.start(subscription);
                          this._inSubscriptionStart = false;
                        }
                        isStarting = false;
                        observerRecord.ignore = this._changeQueue.length;
                        if (!unsubscribedInStart) {
                          this._observers.push(observerRecord);
                        }
                        return subscription;
                      }
                    }], [{
                      key: "active",
                      value: function active(initialValues, options) {
                        var set = initialValues || /* @__PURE__ */ new Set();
                        var controller;
                        var liveSet = new LiveSet2({
                          scheduler: options ? options.scheduler : void 0,
                          read: function read() {
                            return set;
                          },
                          listen: function listen(setValues, _controller) {
                            setValues(set);
                            controller = _controller;
                          }
                        });
                        liveSet.subscribe({});
                        return {
                          liveSet,
                          controller
                        };
                      }
                    }, {
                      key: "constant",
                      value: function constant(values, options) {
                        makeSetImmutable(values);
                        var shouldNotHappen = function shouldNotHappen2() {
                          throw new Error("Should not happen");
                        };
                        var ls = new LiveSet2({
                          scheduler: options ? options.scheduler : void 0,
                          read: shouldNotHappen,
                          listen: shouldNotHappen
                        });
                        ls._ended = true;
                        ls._values = values;
                        ls._mutableValues = false;
                        return ls;
                      }
                    }]);
                    return LiveSet2;
                  })();
                  exports2["default"] = LiveSet;
                  (0, _defineProperty2.default)(LiveSet, "defaultScheduler", new _Scheduler.default());
                  LiveSet.prototype[_symbolObservable.default] = function() {
                    return this;
                  };
                  function makeSetImmutable(set) {
                    if (false) {
                    }
                  }
                  function readOnly() {
                    throw new Error("Do not modify Set passed to or from LiveSet: Set is read-only in development");
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              9976: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = merge;
                  var _ = _interopRequireDefault(__webpack_require__2(2436));
                  function merge(liveSets) {
                    return new _.default({
                      scheduler: liveSets[0] ? liveSets[0].getScheduler() : void 0,
                      read: function read() {
                        var s = /* @__PURE__ */ new Set();
                        liveSets.forEach(function(liveSet) {
                          liveSet.values().forEach(function(value) {
                            s.add(value);
                          });
                        });
                        return s;
                      },
                      listen: function listen(setValues, controller) {
                        var initialValues = /* @__PURE__ */ new Set();
                        var subs = /* @__PURE__ */ new Set();
                        var doneSubscribing = false;
                        liveSets.forEach(function(liveSet) {
                          var sub;
                          liveSet.subscribe({
                            start: function start(_sub) {
                              sub = _sub;
                              subs.add(sub);
                              liveSet.values().forEach(function(value) {
                                initialValues.add(value);
                              });
                            },
                            next: function next(changes) {
                              changes.forEach(function(change) {
                                if (change.type === "add") {
                                  controller.add(change.value);
                                } else if (change.type === "remove") {
                                  controller.remove(change.value);
                                }
                              });
                            },
                            error: function error(err) {
                              controller.error(err);
                            },
                            complete: function complete() {
                              subs.delete(sub);
                              if (doneSubscribing && subs.size === 0) {
                                controller.end();
                              }
                            }
                          });
                        });
                        setValues(initialValues);
                        doneSubscribing = true;
                        if (subs.size === 0) {
                          controller.end();
                        }
                        return {
                          unsubscribe: function unsubscribe() {
                            subs.forEach(function(sub) {
                              sub.unsubscribe();
                            });
                          },
                          pullChanges: function pullChanges() {
                            subs.forEach(function(sub) {
                              sub.pullChanges();
                            });
                          }
                        };
                      }
                    });
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              3507: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = toValueObservable;
                  var _ = _interopRequireDefault(__webpack_require__2(2436));
                  var _zenObservable = _interopRequireDefault(__webpack_require__2(1442));
                  function toValueObservable(liveSet) {
                    return new _zenObservable.default(function(observer2) {
                      var resolvers = /* @__PURE__ */ new Map();
                      function addedItem(value) {
                        var resolve;
                        var removal = new Promise(function(_resolve) {
                          resolve = _resolve;
                        });
                        resolvers.set(value, resolve);
                        var valueWithRemoval = {
                          value,
                          removal
                        };
                        observer2.next(valueWithRemoval);
                      }
                      function removedItem(value) {
                        var resolver = resolvers.get(value);
                        if (!resolver) throw new Error("Resolver not found in map for value");
                        resolvers.delete(value);
                        resolver();
                      }
                      var sub = liveSet.subscribe({
                        start: function start(sub2) {
                          var _iteratorNormalCompletion = true;
                          var _didIteratorError = false;
                          var _iteratorError = void 0;
                          try {
                            for (var _iterator = liveSet.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                              var value = _step.value;
                              if (sub2.closed) break;
                              addedItem(value);
                            }
                          } catch (err) {
                            _didIteratorError = true;
                            _iteratorError = err;
                          } finally {
                            try {
                              if (!_iteratorNormalCompletion && _iterator.return != null) {
                                _iterator.return();
                              }
                            } finally {
                              if (_didIteratorError) {
                                throw _iteratorError;
                              }
                            }
                          }
                        },
                        next: function next(changes) {
                          changes.forEach(function(change) {
                            if (change.type === "add") {
                              addedItem(change.value);
                            } else if (change.type === "remove") {
                              removedItem(change.value);
                            }
                          });
                        },
                        error: function error(err) {
                          observer2.error(err);
                        },
                        complete: function complete() {
                          observer2.complete();
                        }
                      });
                      return function() {
                        sub.unsubscribe();
                        resolvers.forEach(function(resolver) {
                          resolver();
                        });
                      };
                    });
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              1365: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = transduce;
                  var _ = _interopRequireDefault(__webpack_require__2(2436));
                  var arrayXf = {
                    "@@transducer/init": function transducerInit() {
                      return [];
                    },
                    "@@transducer/step": function transducerStep(res, input) {
                      res.push(input);
                      return res;
                    },
                    "@@transducer/result": function transducerResult(input) {
                      return input;
                    }
                  };
                  function transduce(liveSet, transducer) {
                    function step(xform, inputValue) {
                      var addsComplete = false;
                      var outputValues;
                      var ret = xform["@@transducer/step"]([], inputValue);
                      if (ret && ret["@@transducer/reduced"]) {
                        outputValues = ret["@@transducer/value"];
                        addsComplete = true;
                      } else {
                        outputValues = ret;
                      }
                      return {
                        outputValues,
                        addsComplete
                      };
                    }
                    function valuesAndContext() {
                      var inputToOutputValues = /* @__PURE__ */ new Map();
                      var xform = transducer(arrayXf);
                      var addsComplete = false;
                      var values = new Set(xform["@@transducer/init"]());
                      var _iteratorNormalCompletion = true;
                      var _didIteratorError = false;
                      var _iteratorError = void 0;
                      try {
                        for (var _iterator = liveSet.values()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                          var value = _step.value;
                          var _step2 = step(xform, value), outputValues = _step2.outputValues, _addsComplete = _step2.addsComplete;
                          inputToOutputValues.set(value, outputValues);
                          for (var i = 0, len = outputValues.length; i < len; i++) {
                            values.add(outputValues[i]);
                          }
                          if (_addsComplete) {
                            addsComplete = true;
                            xform["@@transducer/result"]([]).forEach(function(value2) {
                              values.add(value2);
                            });
                            break;
                          }
                        }
                      } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                      } finally {
                        try {
                          if (!_iteratorNormalCompletion && _iterator.return != null) {
                            _iterator.return();
                          }
                        } finally {
                          if (_didIteratorError) {
                            throw _iteratorError;
                          }
                        }
                      }
                      return {
                        values,
                        inputToOutputValues,
                        xform,
                        addsComplete
                      };
                    }
                    return new _.default({
                      scheduler: liveSet.getScheduler(),
                      read: function read() {
                        return valuesAndContext().values;
                      },
                      listen: function listen(setValues, controller) {
                        var inputToOutputValues, xform, addsComplete;
                        var sub = liveSet.subscribe({
                          start: function start() {
                            var ret = valuesAndContext();
                            setValues(ret.values);
                            inputToOutputValues = ret.inputToOutputValues;
                            xform = ret.xform;
                            addsComplete = ret.addsComplete;
                          },
                          next: function next(changes) {
                            for (var i = 0, len = changes.length; i < len; i++) {
                              var change = changes[i];
                              if (change.type === "add") {
                                if (!addsComplete) {
                                  var value = change.value;
                                  var _step3 = step(xform, value), outputValues = _step3.outputValues, _addsComplete = _step3.addsComplete;
                                  inputToOutputValues.set(value, outputValues);
                                  for (var _i = 0, _len = outputValues.length; _i < _len; _i++) {
                                    controller.add(outputValues[_i]);
                                  }
                                  if (_addsComplete) {
                                    addsComplete = true;
                                    xform["@@transducer/result"]([]).forEach(function(endValue) {
                                      controller.add(endValue);
                                    });
                                  }
                                }
                              } else if (change.type === "remove") {
                                var _value = change.value;
                                var list = inputToOutputValues.get(_value);
                                if (!list) throw new Error("value had not been added");
                                list.forEach(function(transformedValue) {
                                  controller.remove(transformedValue);
                                });
                                inputToOutputValues.delete(_value);
                              }
                            }
                          },
                          error: function error(err) {
                            controller.error(err);
                          },
                          complete: function complete() {
                            controller.end();
                          }
                        });
                        return sub;
                      }
                    });
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              7230: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getNative = __webpack_require__2(3984), root = __webpack_require__2(9107);
                  var DataView = getNative(root, "DataView");
                  module2.exports = DataView;
                })
              ),
              /***/
              3435: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var hashClear = __webpack_require__2(6890), hashDelete = __webpack_require__2(9484), hashGet = __webpack_require__2(7215), hashHas = __webpack_require__2(7811), hashSet = __webpack_require__2(747);
                  function Hash(entries) {
                    var index = -1, length = entries == null ? 0 : entries.length;
                    this.clear();
                    while (++index < length) {
                      var entry = entries[index];
                      this.set(entry[0], entry[1]);
                    }
                  }
                  Hash.prototype.clear = hashClear;
                  Hash.prototype["delete"] = hashDelete;
                  Hash.prototype.get = hashGet;
                  Hash.prototype.has = hashHas;
                  Hash.prototype.set = hashSet;
                  module2.exports = Hash;
                })
              ),
              /***/
              5217: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var listCacheClear = __webpack_require__2(4412), listCacheDelete = __webpack_require__2(8522), listCacheGet = __webpack_require__2(469), listCacheHas = __webpack_require__2(1161), listCacheSet = __webpack_require__2(1441);
                  function ListCache(entries) {
                    var index = -1, length = entries == null ? 0 : entries.length;
                    this.clear();
                    while (++index < length) {
                      var entry = entries[index];
                      this.set(entry[0], entry[1]);
                    }
                  }
                  ListCache.prototype.clear = listCacheClear;
                  ListCache.prototype["delete"] = listCacheDelete;
                  ListCache.prototype.get = listCacheGet;
                  ListCache.prototype.has = listCacheHas;
                  ListCache.prototype.set = listCacheSet;
                  module2.exports = ListCache;
                })
              ),
              /***/
              5661: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getNative = __webpack_require__2(3984), root = __webpack_require__2(9107);
                  var Map2 = getNative(root, "Map");
                  module2.exports = Map2;
                })
              ),
              /***/
              3287: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var mapCacheClear = __webpack_require__2(8206), mapCacheDelete = __webpack_require__2(9768), mapCacheGet = __webpack_require__2(6827), mapCacheHas = __webpack_require__2(663), mapCacheSet = __webpack_require__2(5135);
                  function MapCache(entries) {
                    var index = -1, length = entries == null ? 0 : entries.length;
                    this.clear();
                    while (++index < length) {
                      var entry = entries[index];
                      this.set(entry[0], entry[1]);
                    }
                  }
                  MapCache.prototype.clear = mapCacheClear;
                  MapCache.prototype["delete"] = mapCacheDelete;
                  MapCache.prototype.get = mapCacheGet;
                  MapCache.prototype.has = mapCacheHas;
                  MapCache.prototype.set = mapCacheSet;
                  module2.exports = MapCache;
                })
              ),
              /***/
              9102: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getNative = __webpack_require__2(3984), root = __webpack_require__2(9107);
                  var Promise2 = getNative(root, "Promise");
                  module2.exports = Promise2;
                })
              ),
              /***/
              5963: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getNative = __webpack_require__2(3984), root = __webpack_require__2(9107);
                  var Set2 = getNative(root, "Set");
                  module2.exports = Set2;
                })
              ),
              /***/
              1641: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var MapCache = __webpack_require__2(3287), setCacheAdd = __webpack_require__2(2486), setCacheHas = __webpack_require__2(9361);
                  function SetCache(values) {
                    var index = -1, length = values == null ? 0 : values.length;
                    this.__data__ = new MapCache();
                    while (++index < length) {
                      this.add(values[index]);
                    }
                  }
                  SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
                  SetCache.prototype.has = setCacheHas;
                  module2.exports = SetCache;
                })
              ),
              /***/
              6435: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var ListCache = __webpack_require__2(5217), stackClear = __webpack_require__2(8658), stackDelete = __webpack_require__2(3844), stackGet = __webpack_require__2(6503), stackHas = __webpack_require__2(1563), stackSet = __webpack_require__2(259);
                  function Stack(entries) {
                    var data = this.__data__ = new ListCache(entries);
                    this.size = data.size;
                  }
                  Stack.prototype.clear = stackClear;
                  Stack.prototype["delete"] = stackDelete;
                  Stack.prototype.get = stackGet;
                  Stack.prototype.has = stackHas;
                  Stack.prototype.set = stackSet;
                  module2.exports = Stack;
                })
              ),
              /***/
              6711: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var root = __webpack_require__2(9107);
                  var Symbol2 = root.Symbol;
                  module2.exports = Symbol2;
                })
              ),
              /***/
              9282: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var root = __webpack_require__2(9107);
                  var Uint8Array2 = root.Uint8Array;
                  module2.exports = Uint8Array2;
                })
              ),
              /***/
              2850: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getNative = __webpack_require__2(3984), root = __webpack_require__2(9107);
                  var WeakMap2 = getNative(root, "WeakMap");
                  module2.exports = WeakMap2;
                })
              ),
              /***/
              807: (
                /***/
                ((module2) => {
                  function apply(func, thisArg, args) {
                    switch (args.length) {
                      case 0:
                        return func.call(thisArg);
                      case 1:
                        return func.call(thisArg, args[0]);
                      case 2:
                        return func.call(thisArg, args[0], args[1]);
                      case 3:
                        return func.call(thisArg, args[0], args[1], args[2]);
                    }
                    return func.apply(thisArg, args);
                  }
                  module2.exports = apply;
                })
              ),
              /***/
              3928: (
                /***/
                ((module2) => {
                  function arrayFilter(array, predicate) {
                    var index = -1, length = array == null ? 0 : array.length, resIndex = 0, result = [];
                    while (++index < length) {
                      var value = array[index];
                      if (predicate(value, index, array)) {
                        result[resIndex++] = value;
                      }
                    }
                    return result;
                  }
                  module2.exports = arrayFilter;
                })
              ),
              /***/
              3271: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIndexOf = __webpack_require__2(8357);
                  function arrayIncludes(array, value) {
                    var length = array == null ? 0 : array.length;
                    return !!length && baseIndexOf(array, value, 0) > -1;
                  }
                  module2.exports = arrayIncludes;
                })
              ),
              /***/
              7599: (
                /***/
                ((module2) => {
                  function arrayIncludesWith(array, value, comparator) {
                    var index = -1, length = array == null ? 0 : array.length;
                    while (++index < length) {
                      if (comparator(value, array[index])) {
                        return true;
                      }
                    }
                    return false;
                  }
                  module2.exports = arrayIncludesWith;
                })
              ),
              /***/
              7137: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseTimes = __webpack_require__2(5410), isArguments = __webpack_require__2(2382), isArray = __webpack_require__2(2003), isBuffer = __webpack_require__2(1262), isIndex = __webpack_require__2(2615), isTypedArray = __webpack_require__2(9221);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function arrayLikeKeys(value, inherited) {
                    var isArr = isArray(value), isArg = !isArr && isArguments(value), isBuff = !isArr && !isArg && isBuffer(value), isType = !isArr && !isArg && !isBuff && isTypedArray(value), skipIndexes = isArr || isArg || isBuff || isType, result = skipIndexes ? baseTimes(value.length, String) : [], length = result.length;
                    for (var key in value) {
                      if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && // Safari 9 has enumerable `arguments.length` in strict mode.
                      (key == "length" || // Node.js 0.10 has enumerable non-index properties on buffers.
                      isBuff && (key == "offset" || key == "parent") || // PhantomJS 2 has enumerable non-index properties on typed arrays.
                      isType && (key == "buffer" || key == "byteLength" || key == "byteOffset") || // Skip index properties.
                      isIndex(key, length)))) {
                        result.push(key);
                      }
                    }
                    return result;
                  }
                  module2.exports = arrayLikeKeys;
                })
              ),
              /***/
              14: (
                /***/
                ((module2) => {
                  function arrayMap(array, iteratee) {
                    var index = -1, length = array == null ? 0 : array.length, result = Array(length);
                    while (++index < length) {
                      result[index] = iteratee(array[index], index, array);
                    }
                    return result;
                  }
                  module2.exports = arrayMap;
                })
              ),
              /***/
              562: (
                /***/
                ((module2) => {
                  function arrayPush(array, values) {
                    var index = -1, length = values.length, offset = array.length;
                    while (++index < length) {
                      array[offset + index] = values[index];
                    }
                    return array;
                  }
                  module2.exports = arrayPush;
                })
              ),
              /***/
              9854: (
                /***/
                ((module2) => {
                  function arraySome(array, predicate) {
                    var index = -1, length = array == null ? 0 : array.length;
                    while (++index < length) {
                      if (predicate(array[index], index, array)) {
                        return true;
                      }
                    }
                    return false;
                  }
                  module2.exports = arraySome;
                })
              ),
              /***/
              4767: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var eq = __webpack_require__2(8330);
                  function assocIndexOf(array, key) {
                    var length = array.length;
                    while (length--) {
                      if (eq(array[length][0], key)) {
                        return length;
                      }
                    }
                    return -1;
                  }
                  module2.exports = assocIndexOf;
                })
              ),
              /***/
              9631: (
                /***/
                ((module2) => {
                  function baseClamp(number, lower, upper) {
                    if (number === number) {
                      if (upper !== void 0) {
                        number = number <= upper ? number : upper;
                      }
                      if (lower !== void 0) {
                        number = number >= lower ? number : lower;
                      }
                    }
                    return number;
                  }
                  module2.exports = baseClamp;
                })
              ),
              /***/
              7587: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseForOwn = __webpack_require__2(427), createBaseEach = __webpack_require__2(3679);
                  var baseEach = createBaseEach(baseForOwn);
                  module2.exports = baseEach;
                })
              ),
              /***/
              6917: (
                /***/
                ((module2) => {
                  function baseFindIndex(array, predicate, fromIndex, fromRight) {
                    var length = array.length, index = fromIndex + (fromRight ? 1 : -1);
                    while (fromRight ? index-- : ++index < length) {
                      if (predicate(array[index], index, array)) {
                        return index;
                      }
                    }
                    return -1;
                  }
                  module2.exports = baseFindIndex;
                })
              ),
              /***/
              4958: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayPush = __webpack_require__2(562), isFlattenable = __webpack_require__2(4385);
                  function baseFlatten(array, depth, predicate, isStrict, result) {
                    var index = -1, length = array.length;
                    predicate || (predicate = isFlattenable);
                    result || (result = []);
                    while (++index < length) {
                      var value = array[index];
                      if (depth > 0 && predicate(value)) {
                        if (depth > 1) {
                          baseFlatten(value, depth - 1, predicate, isStrict, result);
                        } else {
                          arrayPush(result, value);
                        }
                      } else if (!isStrict) {
                        result[result.length] = value;
                      }
                    }
                    return result;
                  }
                  module2.exports = baseFlatten;
                })
              ),
              /***/
              1595: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var createBaseFor = __webpack_require__2(951);
                  var baseFor = createBaseFor();
                  module2.exports = baseFor;
                })
              ),
              /***/
              427: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseFor = __webpack_require__2(1595), keys = __webpack_require__2(5304);
                  function baseForOwn(object, iteratee) {
                    return object && baseFor(object, iteratee, keys);
                  }
                  module2.exports = baseForOwn;
                })
              ),
              /***/
              384: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var castPath = __webpack_require__2(4275), toKey = __webpack_require__2(8059);
                  function baseGet(object, path) {
                    path = castPath(path, object);
                    var index = 0, length = path.length;
                    while (object != null && index < length) {
                      object = object[toKey(path[index++])];
                    }
                    return index && index == length ? object : void 0;
                  }
                  module2.exports = baseGet;
                })
              ),
              /***/
              8821: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayPush = __webpack_require__2(562), isArray = __webpack_require__2(2003);
                  function baseGetAllKeys(object, keysFunc, symbolsFunc) {
                    var result = keysFunc(object);
                    return isArray(object) ? result : arrayPush(result, symbolsFunc(object));
                  }
                  module2.exports = baseGetAllKeys;
                })
              ),
              /***/
              6522: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var Symbol2 = __webpack_require__2(6711), getRawTag = __webpack_require__2(905), objectToString = __webpack_require__2(2588);
                  var nullTag = "[object Null]", undefinedTag = "[object Undefined]";
                  var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
                  function baseGetTag(value) {
                    if (value == null) {
                      return value === void 0 ? undefinedTag : nullTag;
                    }
                    return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);
                  }
                  module2.exports = baseGetTag;
                })
              ),
              /***/
              6571: (
                /***/
                ((module2) => {
                  function baseHasIn(object, key) {
                    return object != null && key in Object(object);
                  }
                  module2.exports = baseHasIn;
                })
              ),
              /***/
              8357: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseFindIndex = __webpack_require__2(6917), baseIsNaN = __webpack_require__2(3001), strictIndexOf = __webpack_require__2(5957);
                  function baseIndexOf(array, value, fromIndex) {
                    return value === value ? strictIndexOf(array, value, fromIndex) : baseFindIndex(array, baseIsNaN, fromIndex);
                  }
                  module2.exports = baseIndexOf;
                })
              ),
              /***/
              739: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var SetCache = __webpack_require__2(1641), arrayIncludes = __webpack_require__2(3271), arrayIncludesWith = __webpack_require__2(7599), arrayMap = __webpack_require__2(14), baseUnary = __webpack_require__2(2347), cacheHas = __webpack_require__2(7585);
                  var nativeMin = Math.min;
                  function baseIntersection(arrays, iteratee, comparator) {
                    var includes = comparator ? arrayIncludesWith : arrayIncludes, length = arrays[0].length, othLength = arrays.length, othIndex = othLength, caches = Array(othLength), maxLength = Infinity, result = [];
                    while (othIndex--) {
                      var array = arrays[othIndex];
                      if (othIndex && iteratee) {
                        array = arrayMap(array, baseUnary(iteratee));
                      }
                      maxLength = nativeMin(array.length, maxLength);
                      caches[othIndex] = !comparator && (iteratee || length >= 120 && array.length >= 120) ? new SetCache(othIndex && array) : void 0;
                    }
                    array = arrays[0];
                    var index = -1, seen = caches[0];
                    outer:
                      while (++index < length && result.length < maxLength) {
                        var value = array[index], computed = iteratee ? iteratee(value) : value;
                        value = comparator || value !== 0 ? value : 0;
                        if (!(seen ? cacheHas(seen, computed) : includes(result, computed, comparator))) {
                          othIndex = othLength;
                          while (--othIndex) {
                            var cache = caches[othIndex];
                            if (!(cache ? cacheHas(cache, computed) : includes(arrays[othIndex], computed, comparator))) {
                              continue outer;
                            }
                          }
                          if (seen) {
                            seen.push(computed);
                          }
                          result.push(value);
                        }
                      }
                    return result;
                  }
                  module2.exports = baseIntersection;
                })
              ),
              /***/
              9593: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseForOwn = __webpack_require__2(427);
                  function baseInverter(object, setter, iteratee, accumulator) {
                    baseForOwn(object, function(value, key, object2) {
                      setter(accumulator, iteratee(value), key, object2);
                    });
                    return accumulator;
                  }
                  module2.exports = baseInverter;
                })
              ),
              /***/
              2744: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseGetTag = __webpack_require__2(6522), isObjectLike = __webpack_require__2(2620);
                  var argsTag = "[object Arguments]";
                  function baseIsArguments(value) {
                    return isObjectLike(value) && baseGetTag(value) == argsTag;
                  }
                  module2.exports = baseIsArguments;
                })
              ),
              /***/
              9336: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIsEqualDeep = __webpack_require__2(1894), isObjectLike = __webpack_require__2(2620);
                  function baseIsEqual(value, other, bitmask, customizer, stack) {
                    if (value === other) {
                      return true;
                    }
                    if (value == null || other == null || !isObjectLike(value) && !isObjectLike(other)) {
                      return value !== value && other !== other;
                    }
                    return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);
                  }
                  module2.exports = baseIsEqual;
                })
              ),
              /***/
              1894: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var Stack = __webpack_require__2(6435), equalArrays = __webpack_require__2(1505), equalByTag = __webpack_require__2(9620), equalObjects = __webpack_require__2(439), getTag = __webpack_require__2(695), isArray = __webpack_require__2(2003), isBuffer = __webpack_require__2(1262), isTypedArray = __webpack_require__2(9221);
                  var COMPARE_PARTIAL_FLAG = 1;
                  var argsTag = "[object Arguments]", arrayTag = "[object Array]", objectTag = "[object Object]";
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {
                    var objIsArr = isArray(object), othIsArr = isArray(other), objTag = objIsArr ? arrayTag : getTag(object), othTag = othIsArr ? arrayTag : getTag(other);
                    objTag = objTag == argsTag ? objectTag : objTag;
                    othTag = othTag == argsTag ? objectTag : othTag;
                    var objIsObj = objTag == objectTag, othIsObj = othTag == objectTag, isSameTag = objTag == othTag;
                    if (isSameTag && isBuffer(object)) {
                      if (!isBuffer(other)) {
                        return false;
                      }
                      objIsArr = true;
                      objIsObj = false;
                    }
                    if (isSameTag && !objIsObj) {
                      stack || (stack = new Stack());
                      return objIsArr || isTypedArray(object) ? equalArrays(object, other, bitmask, customizer, equalFunc, stack) : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);
                    }
                    if (!(bitmask & COMPARE_PARTIAL_FLAG)) {
                      var objIsWrapped = objIsObj && hasOwnProperty.call(object, "__wrapped__"), othIsWrapped = othIsObj && hasOwnProperty.call(other, "__wrapped__");
                      if (objIsWrapped || othIsWrapped) {
                        var objUnwrapped = objIsWrapped ? object.value() : object, othUnwrapped = othIsWrapped ? other.value() : other;
                        stack || (stack = new Stack());
                        return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);
                      }
                    }
                    if (!isSameTag) {
                      return false;
                    }
                    stack || (stack = new Stack());
                    return equalObjects(object, other, bitmask, customizer, equalFunc, stack);
                  }
                  module2.exports = baseIsEqualDeep;
                })
              ),
              /***/
              4253: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var Stack = __webpack_require__2(6435), baseIsEqual = __webpack_require__2(9336);
                  var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
                  function baseIsMatch(object, source, matchData, customizer) {
                    var index = matchData.length, length = index, noCustomizer = !customizer;
                    if (object == null) {
                      return !length;
                    }
                    object = Object(object);
                    while (index--) {
                      var data = matchData[index];
                      if (noCustomizer && data[2] ? data[1] !== object[data[0]] : !(data[0] in object)) {
                        return false;
                      }
                    }
                    while (++index < length) {
                      data = matchData[index];
                      var key = data[0], objValue = object[key], srcValue = data[1];
                      if (noCustomizer && data[2]) {
                        if (objValue === void 0 && !(key in object)) {
                          return false;
                        }
                      } else {
                        var stack = new Stack();
                        if (customizer) {
                          var result = customizer(objValue, srcValue, key, object, source, stack);
                        }
                        if (!(result === void 0 ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack) : result)) {
                          return false;
                        }
                      }
                    }
                    return true;
                  }
                  module2.exports = baseIsMatch;
                })
              ),
              /***/
              3001: (
                /***/
                ((module2) => {
                  function baseIsNaN(value) {
                    return value !== value;
                  }
                  module2.exports = baseIsNaN;
                })
              ),
              /***/
              2249: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isFunction = __webpack_require__2(8148), isMasked = __webpack_require__2(1398), isObject = __webpack_require__2(5603), toSource = __webpack_require__2(1543);
                  var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
                  var reIsHostCtor = /^\[object .+?Constructor\]$/;
                  var funcProto = Function.prototype, objectProto = Object.prototype;
                  var funcToString = funcProto.toString;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  var reIsNative = RegExp(
                    "^" + funcToString.call(hasOwnProperty).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"
                  );
                  function baseIsNative(value) {
                    if (!isObject(value) || isMasked(value)) {
                      return false;
                    }
                    var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
                    return pattern.test(toSource(value));
                  }
                  module2.exports = baseIsNative;
                })
              ),
              /***/
              5387: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseGetTag = __webpack_require__2(6522), isLength = __webpack_require__2(7164), isObjectLike = __webpack_require__2(2620);
                  var argsTag = "[object Arguments]", arrayTag = "[object Array]", boolTag = "[object Boolean]", dateTag = "[object Date]", errorTag = "[object Error]", funcTag = "[object Function]", mapTag = "[object Map]", numberTag = "[object Number]", objectTag = "[object Object]", regexpTag = "[object RegExp]", setTag = "[object Set]", stringTag = "[object String]", weakMapTag = "[object WeakMap]";
                  var arrayBufferTag = "[object ArrayBuffer]", dataViewTag = "[object DataView]", float32Tag = "[object Float32Array]", float64Tag = "[object Float64Array]", int8Tag = "[object Int8Array]", int16Tag = "[object Int16Array]", int32Tag = "[object Int32Array]", uint8Tag = "[object Uint8Array]", uint8ClampedTag = "[object Uint8ClampedArray]", uint16Tag = "[object Uint16Array]", uint32Tag = "[object Uint32Array]";
                  var typedArrayTags = {};
                  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] = typedArrayTags[int8Tag] = typedArrayTags[int16Tag] = typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] = typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] = typedArrayTags[uint32Tag] = true;
                  typedArrayTags[argsTag] = typedArrayTags[arrayTag] = typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] = typedArrayTags[dataViewTag] = typedArrayTags[dateTag] = typedArrayTags[errorTag] = typedArrayTags[funcTag] = typedArrayTags[mapTag] = typedArrayTags[numberTag] = typedArrayTags[objectTag] = typedArrayTags[regexpTag] = typedArrayTags[setTag] = typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;
                  function baseIsTypedArray(value) {
                    return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
                  }
                  module2.exports = baseIsTypedArray;
                })
              ),
              /***/
              7675: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseMatches = __webpack_require__2(5141), baseMatchesProperty = __webpack_require__2(8476), identity = __webpack_require__2(1686), isArray = __webpack_require__2(2003), property = __webpack_require__2(7093);
                  function baseIteratee(value) {
                    if (typeof value == "function") {
                      return value;
                    }
                    if (value == null) {
                      return identity;
                    }
                    if (typeof value == "object") {
                      return isArray(value) ? baseMatchesProperty(value[0], value[1]) : baseMatches(value);
                    }
                    return property(value);
                  }
                  module2.exports = baseIteratee;
                })
              ),
              /***/
              6794: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isPrototype = __webpack_require__2(6165), nativeKeys = __webpack_require__2(6132);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function baseKeys(object) {
                    if (!isPrototype(object)) {
                      return nativeKeys(object);
                    }
                    var result = [];
                    for (var key in Object(object)) {
                      if (hasOwnProperty.call(object, key) && key != "constructor") {
                        result.push(key);
                      }
                    }
                    return result;
                  }
                  module2.exports = baseKeys;
                })
              ),
              /***/
              8157: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isObject = __webpack_require__2(5603), isPrototype = __webpack_require__2(6165), nativeKeysIn = __webpack_require__2(4555);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function baseKeysIn(object) {
                    if (!isObject(object)) {
                      return nativeKeysIn(object);
                    }
                    var isProto = isPrototype(object), result = [];
                    for (var key in object) {
                      if (!(key == "constructor" && (isProto || !hasOwnProperty.call(object, key)))) {
                        result.push(key);
                      }
                    }
                    return result;
                  }
                  module2.exports = baseKeysIn;
                })
              ),
              /***/
              5718: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseEach = __webpack_require__2(7587), isArrayLike = __webpack_require__2(6316);
                  function baseMap(collection, iteratee) {
                    var index = -1, result = isArrayLike(collection) ? Array(collection.length) : [];
                    baseEach(collection, function(value, key, collection2) {
                      result[++index] = iteratee(value, key, collection2);
                    });
                    return result;
                  }
                  module2.exports = baseMap;
                })
              ),
              /***/
              5141: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIsMatch = __webpack_require__2(4253), getMatchData = __webpack_require__2(8418), matchesStrictComparable = __webpack_require__2(3591);
                  function baseMatches(source) {
                    var matchData = getMatchData(source);
                    if (matchData.length == 1 && matchData[0][2]) {
                      return matchesStrictComparable(matchData[0][0], matchData[0][1]);
                    }
                    return function(object) {
                      return object === source || baseIsMatch(object, source, matchData);
                    };
                  }
                  module2.exports = baseMatches;
                })
              ),
              /***/
              8476: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIsEqual = __webpack_require__2(9336), get = __webpack_require__2(1214), hasIn = __webpack_require__2(8765), isKey = __webpack_require__2(5456), isStrictComparable = __webpack_require__2(7030), matchesStrictComparable = __webpack_require__2(3591), toKey = __webpack_require__2(8059);
                  var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
                  function baseMatchesProperty(path, srcValue) {
                    if (isKey(path) && isStrictComparable(srcValue)) {
                      return matchesStrictComparable(toKey(path), srcValue);
                    }
                    return function(object) {
                      var objValue = get(object, path);
                      return objValue === void 0 && objValue === srcValue ? hasIn(object, path) : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);
                    };
                  }
                  module2.exports = baseMatchesProperty;
                })
              ),
              /***/
              3729: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayMap = __webpack_require__2(14), baseGet = __webpack_require__2(384), baseIteratee = __webpack_require__2(7675), baseMap = __webpack_require__2(5718), baseSortBy = __webpack_require__2(1163), baseUnary = __webpack_require__2(2347), compareMultiple = __webpack_require__2(7644), identity = __webpack_require__2(1686), isArray = __webpack_require__2(2003);
                  function baseOrderBy(collection, iteratees, orders) {
                    if (iteratees.length) {
                      iteratees = arrayMap(iteratees, function(iteratee) {
                        if (isArray(iteratee)) {
                          return function(value) {
                            return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);
                          };
                        }
                        return iteratee;
                      });
                    } else {
                      iteratees = [identity];
                    }
                    var index = -1;
                    iteratees = arrayMap(iteratees, baseUnary(baseIteratee));
                    var result = baseMap(collection, function(value, key, collection2) {
                      var criteria = arrayMap(iteratees, function(iteratee) {
                        return iteratee(value);
                      });
                      return { "criteria": criteria, "index": ++index, "value": value };
                    });
                    return baseSortBy(result, function(object, other) {
                      return compareMultiple(object, other, orders);
                    });
                  }
                  module2.exports = baseOrderBy;
                })
              ),
              /***/
              1171: (
                /***/
                ((module2) => {
                  function baseProperty(key) {
                    return function(object) {
                      return object == null ? void 0 : object[key];
                    };
                  }
                  module2.exports = baseProperty;
                })
              ),
              /***/
              4589: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseGet = __webpack_require__2(384);
                  function basePropertyDeep(path) {
                    return function(object) {
                      return baseGet(object, path);
                    };
                  }
                  module2.exports = basePropertyDeep;
                })
              ),
              /***/
              9390: (
                /***/
                ((module2) => {
                  function basePropertyOf(object) {
                    return function(key) {
                      return object == null ? void 0 : object[key];
                    };
                  }
                  module2.exports = basePropertyOf;
                })
              ),
              /***/
              7916: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseUnset = __webpack_require__2(1289), isIndex = __webpack_require__2(2615);
                  var arrayProto = Array.prototype;
                  var splice = arrayProto.splice;
                  function basePullAt(array, indexes) {
                    var length = array ? indexes.length : 0, lastIndex = length - 1;
                    while (length--) {
                      var index = indexes[length];
                      if (length == lastIndex || index !== previous) {
                        var previous = index;
                        if (isIndex(index)) {
                          splice.call(array, index, 1);
                        } else {
                          baseUnset(array, index);
                        }
                      }
                    }
                    return array;
                  }
                  module2.exports = basePullAt;
                })
              ),
              /***/
              3408: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var identity = __webpack_require__2(1686), overRest = __webpack_require__2(5683), setToString = __webpack_require__2(6391);
                  function baseRest(func, start) {
                    return setToString(overRest(func, start, identity), func + "");
                  }
                  module2.exports = baseRest;
                })
              ),
              /***/
              7880: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var constant = __webpack_require__2(7660), defineProperty = __webpack_require__2(3009), identity = __webpack_require__2(1686);
                  var baseSetToString = !defineProperty ? identity : function(func, string) {
                    return defineProperty(func, "toString", {
                      "configurable": true,
                      "enumerable": false,
                      "value": constant(string),
                      "writable": true
                    });
                  };
                  module2.exports = baseSetToString;
                })
              ),
              /***/
              4198: (
                /***/
                ((module2) => {
                  function baseSlice(array, start, end) {
                    var index = -1, length = array.length;
                    if (start < 0) {
                      start = -start > length ? 0 : length + start;
                    }
                    end = end > length ? length : end;
                    if (end < 0) {
                      end += length;
                    }
                    length = start > end ? 0 : end - start >>> 0;
                    start >>>= 0;
                    var result = Array(length);
                    while (++index < length) {
                      result[index] = array[index + start];
                    }
                    return result;
                  }
                  module2.exports = baseSlice;
                })
              ),
              /***/
              1163: (
                /***/
                ((module2) => {
                  function baseSortBy(array, comparer) {
                    var length = array.length;
                    array.sort(comparer);
                    while (length--) {
                      array[length] = array[length].value;
                    }
                    return array;
                  }
                  module2.exports = baseSortBy;
                })
              ),
              /***/
              5410: (
                /***/
                ((module2) => {
                  function baseTimes(n, iteratee) {
                    var index = -1, result = Array(n);
                    while (++index < n) {
                      result[index] = iteratee(index);
                    }
                    return result;
                  }
                  module2.exports = baseTimes;
                })
              ),
              /***/
              8354: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var Symbol2 = __webpack_require__2(6711), arrayMap = __webpack_require__2(14), isArray = __webpack_require__2(2003), isSymbol = __webpack_require__2(6596);
                  var INFINITY = 1 / 0;
                  var symbolProto = Symbol2 ? Symbol2.prototype : void 0, symbolToString = symbolProto ? symbolProto.toString : void 0;
                  function baseToString(value) {
                    if (typeof value == "string") {
                      return value;
                    }
                    if (isArray(value)) {
                      return arrayMap(value, baseToString) + "";
                    }
                    if (isSymbol(value)) {
                      return symbolToString ? symbolToString.call(value) : "";
                    }
                    var result = value + "";
                    return result == "0" && 1 / value == -INFINITY ? "-0" : result;
                  }
                  module2.exports = baseToString;
                })
              ),
              /***/
              9070: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var trimmedEndIndex = __webpack_require__2(8882);
                  var reTrimStart = /^\s+/;
                  function baseTrim(string) {
                    return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, "") : string;
                  }
                  module2.exports = baseTrim;
                })
              ),
              /***/
              2347: (
                /***/
                ((module2) => {
                  function baseUnary(func) {
                    return function(value) {
                      return func(value);
                    };
                  }
                  module2.exports = baseUnary;
                })
              ),
              /***/
              7971: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var SetCache = __webpack_require__2(1641), arrayIncludes = __webpack_require__2(3271), arrayIncludesWith = __webpack_require__2(7599), cacheHas = __webpack_require__2(7585), createSet = __webpack_require__2(7455), setToArray = __webpack_require__2(5841);
                  var LARGE_ARRAY_SIZE = 200;
                  function baseUniq(array, iteratee, comparator) {
                    var index = -1, includes = arrayIncludes, length = array.length, isCommon = true, result = [], seen = result;
                    if (comparator) {
                      isCommon = false;
                      includes = arrayIncludesWith;
                    } else if (length >= LARGE_ARRAY_SIZE) {
                      var set = iteratee ? null : createSet(array);
                      if (set) {
                        return setToArray(set);
                      }
                      isCommon = false;
                      includes = cacheHas;
                      seen = new SetCache();
                    } else {
                      seen = iteratee ? [] : result;
                    }
                    outer:
                      while (++index < length) {
                        var value = array[index], computed = iteratee ? iteratee(value) : value;
                        value = comparator || value !== 0 ? value : 0;
                        if (isCommon && computed === computed) {
                          var seenIndex = seen.length;
                          while (seenIndex--) {
                            if (seen[seenIndex] === computed) {
                              continue outer;
                            }
                          }
                          if (iteratee) {
                            seen.push(computed);
                          }
                          result.push(value);
                        } else if (!includes(seen, computed, comparator)) {
                          if (seen !== result) {
                            seen.push(computed);
                          }
                          result.push(value);
                        }
                      }
                    return result;
                  }
                  module2.exports = baseUniq;
                })
              ),
              /***/
              1289: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var castPath = __webpack_require__2(4275), last2 = __webpack_require__2(6456), parent = __webpack_require__2(1339), toKey = __webpack_require__2(8059);
                  function baseUnset(object, path) {
                    path = castPath(path, object);
                    object = parent(object, path);
                    return object == null || delete object[toKey(last2(path))];
                  }
                  module2.exports = baseUnset;
                })
              ),
              /***/
              4956: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayMap = __webpack_require__2(14);
                  function baseValues(object, props) {
                    return arrayMap(props, function(key) {
                      return object[key];
                    });
                  }
                  module2.exports = baseValues;
                })
              ),
              /***/
              7585: (
                /***/
                ((module2) => {
                  function cacheHas(cache, key) {
                    return cache.has(key);
                  }
                  module2.exports = cacheHas;
                })
              ),
              /***/
              9471: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isArrayLikeObject = __webpack_require__2(1899);
                  function castArrayLikeObject(value) {
                    return isArrayLikeObject(value) ? value : [];
                  }
                  module2.exports = castArrayLikeObject;
                })
              ),
              /***/
              4275: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isArray = __webpack_require__2(2003), isKey = __webpack_require__2(5456), stringToPath = __webpack_require__2(5240), toString = __webpack_require__2(7060);
                  function castPath(value, object) {
                    if (isArray(value)) {
                      return value;
                    }
                    return isKey(value, object) ? [value] : stringToPath(toString(value));
                  }
                  module2.exports = castPath;
                })
              ),
              /***/
              8452: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isSymbol = __webpack_require__2(6596);
                  function compareAscending(value, other) {
                    if (value !== other) {
                      var valIsDefined = value !== void 0, valIsNull = value === null, valIsReflexive = value === value, valIsSymbol = isSymbol(value);
                      var othIsDefined = other !== void 0, othIsNull = other === null, othIsReflexive = other === other, othIsSymbol = isSymbol(other);
                      if (!othIsNull && !othIsSymbol && !valIsSymbol && value > other || valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol || valIsNull && othIsDefined && othIsReflexive || !valIsDefined && othIsReflexive || !valIsReflexive) {
                        return 1;
                      }
                      if (!valIsNull && !valIsSymbol && !othIsSymbol && value < other || othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol || othIsNull && valIsDefined && valIsReflexive || !othIsDefined && valIsReflexive || !othIsReflexive) {
                        return -1;
                      }
                    }
                    return 0;
                  }
                  module2.exports = compareAscending;
                })
              ),
              /***/
              7644: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var compareAscending = __webpack_require__2(8452);
                  function compareMultiple(object, other, orders) {
                    var index = -1, objCriteria = object.criteria, othCriteria = other.criteria, length = objCriteria.length, ordersLength = orders.length;
                    while (++index < length) {
                      var result = compareAscending(objCriteria[index], othCriteria[index]);
                      if (result) {
                        if (index >= ordersLength) {
                          return result;
                        }
                        var order = orders[index];
                        return result * (order == "desc" ? -1 : 1);
                      }
                    }
                    return object.index - other.index;
                  }
                  module2.exports = compareMultiple;
                })
              ),
              /***/
              3887: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var root = __webpack_require__2(9107);
                  var coreJsData = root["__core-js_shared__"];
                  module2.exports = coreJsData;
                })
              ),
              /***/
              3679: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isArrayLike = __webpack_require__2(6316);
                  function createBaseEach(eachFunc, fromRight) {
                    return function(collection, iteratee) {
                      if (collection == null) {
                        return collection;
                      }
                      if (!isArrayLike(collection)) {
                        return eachFunc(collection, iteratee);
                      }
                      var length = collection.length, index = fromRight ? length : -1, iterable = Object(collection);
                      while (fromRight ? index-- : ++index < length) {
                        if (iteratee(iterable[index], index, iterable) === false) {
                          break;
                        }
                      }
                      return collection;
                    };
                  }
                  module2.exports = createBaseEach;
                })
              ),
              /***/
              951: (
                /***/
                ((module2) => {
                  function createBaseFor(fromRight) {
                    return function(object, iteratee, keysFunc) {
                      var index = -1, iterable = Object(object), props = keysFunc(object), length = props.length;
                      while (length--) {
                        var key = props[fromRight ? length : ++index];
                        if (iteratee(iterable[key], key, iterable) === false) {
                          break;
                        }
                      }
                      return object;
                    };
                  }
                  module2.exports = createBaseFor;
                })
              ),
              /***/
              7216: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIteratee = __webpack_require__2(7675), isArrayLike = __webpack_require__2(6316), keys = __webpack_require__2(5304);
                  function createFind(findIndexFunc) {
                    return function(collection, predicate, fromIndex) {
                      var iterable = Object(collection);
                      if (!isArrayLike(collection)) {
                        var iteratee = baseIteratee(predicate, 3);
                        collection = keys(collection);
                        predicate = function(key) {
                          return iteratee(iterable[key], key, iterable);
                        };
                      }
                      var index = findIndexFunc(collection, predicate, fromIndex);
                      return index > -1 ? iterable[iteratee ? collection[index] : index] : void 0;
                    };
                  }
                  module2.exports = createFind;
                })
              ),
              /***/
              1624: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseInverter = __webpack_require__2(9593);
                  function createInverter(setter, toIteratee) {
                    return function(object, iteratee) {
                      return baseInverter(object, setter, toIteratee(iteratee), {});
                    };
                  }
                  module2.exports = createInverter;
                })
              ),
              /***/
              7455: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var Set2 = __webpack_require__2(5963), noop = __webpack_require__2(1700), setToArray = __webpack_require__2(5841);
                  var INFINITY = 1 / 0;
                  var createSet = !(Set2 && 1 / setToArray(new Set2([, -0]))[1] == INFINITY) ? noop : function(values) {
                    return new Set2(values);
                  };
                  module2.exports = createSet;
                })
              ),
              /***/
              3009: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getNative = __webpack_require__2(3984);
                  var defineProperty = (function() {
                    try {
                      var func = getNative(Object, "defineProperty");
                      func({}, "", {});
                      return func;
                    } catch (e) {
                    }
                  })();
                  module2.exports = defineProperty;
                })
              ),
              /***/
              1505: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var SetCache = __webpack_require__2(1641), arraySome = __webpack_require__2(9854), cacheHas = __webpack_require__2(7585);
                  var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
                  function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {
                    var isPartial = bitmask & COMPARE_PARTIAL_FLAG, arrLength = array.length, othLength = other.length;
                    if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
                      return false;
                    }
                    var arrStacked = stack.get(array);
                    var othStacked = stack.get(other);
                    if (arrStacked && othStacked) {
                      return arrStacked == other && othStacked == array;
                    }
                    var index = -1, result = true, seen = bitmask & COMPARE_UNORDERED_FLAG ? new SetCache() : void 0;
                    stack.set(array, other);
                    stack.set(other, array);
                    while (++index < arrLength) {
                      var arrValue = array[index], othValue = other[index];
                      if (customizer) {
                        var compared = isPartial ? customizer(othValue, arrValue, index, other, array, stack) : customizer(arrValue, othValue, index, array, other, stack);
                      }
                      if (compared !== void 0) {
                        if (compared) {
                          continue;
                        }
                        result = false;
                        break;
                      }
                      if (seen) {
                        if (!arraySome(other, function(othValue2, othIndex) {
                          if (!cacheHas(seen, othIndex) && (arrValue === othValue2 || equalFunc(arrValue, othValue2, bitmask, customizer, stack))) {
                            return seen.push(othIndex);
                          }
                        })) {
                          result = false;
                          break;
                        }
                      } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {
                        result = false;
                        break;
                      }
                    }
                    stack["delete"](array);
                    stack["delete"](other);
                    return result;
                  }
                  module2.exports = equalArrays;
                })
              ),
              /***/
              9620: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var Symbol2 = __webpack_require__2(6711), Uint8Array2 = __webpack_require__2(9282), eq = __webpack_require__2(8330), equalArrays = __webpack_require__2(1505), mapToArray = __webpack_require__2(5483), setToArray = __webpack_require__2(5841);
                  var COMPARE_PARTIAL_FLAG = 1, COMPARE_UNORDERED_FLAG = 2;
                  var boolTag = "[object Boolean]", dateTag = "[object Date]", errorTag = "[object Error]", mapTag = "[object Map]", numberTag = "[object Number]", regexpTag = "[object RegExp]", setTag = "[object Set]", stringTag = "[object String]", symbolTag = "[object Symbol]";
                  var arrayBufferTag = "[object ArrayBuffer]", dataViewTag = "[object DataView]";
                  var symbolProto = Symbol2 ? Symbol2.prototype : void 0, symbolValueOf = symbolProto ? symbolProto.valueOf : void 0;
                  function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {
                    switch (tag) {
                      case dataViewTag:
                        if (object.byteLength != other.byteLength || object.byteOffset != other.byteOffset) {
                          return false;
                        }
                        object = object.buffer;
                        other = other.buffer;
                      case arrayBufferTag:
                        if (object.byteLength != other.byteLength || !equalFunc(new Uint8Array2(object), new Uint8Array2(other))) {
                          return false;
                        }
                        return true;
                      case boolTag:
                      case dateTag:
                      case numberTag:
                        return eq(+object, +other);
                      case errorTag:
                        return object.name == other.name && object.message == other.message;
                      case regexpTag:
                      case stringTag:
                        return object == other + "";
                      case mapTag:
                        var convert = mapToArray;
                      case setTag:
                        var isPartial = bitmask & COMPARE_PARTIAL_FLAG;
                        convert || (convert = setToArray);
                        if (object.size != other.size && !isPartial) {
                          return false;
                        }
                        var stacked = stack.get(object);
                        if (stacked) {
                          return stacked == other;
                        }
                        bitmask |= COMPARE_UNORDERED_FLAG;
                        stack.set(object, other);
                        var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);
                        stack["delete"](object);
                        return result;
                      case symbolTag:
                        if (symbolValueOf) {
                          return symbolValueOf.call(object) == symbolValueOf.call(other);
                        }
                    }
                    return false;
                  }
                  module2.exports = equalByTag;
                })
              ),
              /***/
              439: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getAllKeys = __webpack_require__2(5760);
                  var COMPARE_PARTIAL_FLAG = 1;
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {
                    var isPartial = bitmask & COMPARE_PARTIAL_FLAG, objProps = getAllKeys(object), objLength = objProps.length, othProps = getAllKeys(other), othLength = othProps.length;
                    if (objLength != othLength && !isPartial) {
                      return false;
                    }
                    var index = objLength;
                    while (index--) {
                      var key = objProps[index];
                      if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {
                        return false;
                      }
                    }
                    var objStacked = stack.get(object);
                    var othStacked = stack.get(other);
                    if (objStacked && othStacked) {
                      return objStacked == other && othStacked == object;
                    }
                    var result = true;
                    stack.set(object, other);
                    stack.set(other, object);
                    var skipCtor = isPartial;
                    while (++index < objLength) {
                      key = objProps[index];
                      var objValue = object[key], othValue = other[key];
                      if (customizer) {
                        var compared = isPartial ? customizer(othValue, objValue, key, other, object, stack) : customizer(objValue, othValue, key, object, other, stack);
                      }
                      if (!(compared === void 0 ? objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack) : compared)) {
                        result = false;
                        break;
                      }
                      skipCtor || (skipCtor = key == "constructor");
                    }
                    if (result && !skipCtor) {
                      var objCtor = object.constructor, othCtor = other.constructor;
                      if (objCtor != othCtor && ("constructor" in object && "constructor" in other) && !(typeof objCtor == "function" && objCtor instanceof objCtor && typeof othCtor == "function" && othCtor instanceof othCtor)) {
                        result = false;
                      }
                    }
                    stack["delete"](object);
                    stack["delete"](other);
                    return result;
                  }
                  module2.exports = equalObjects;
                })
              ),
              /***/
              9025: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var basePropertyOf = __webpack_require__2(9390);
                  var htmlEscapes = {
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#39;"
                  };
                  var escapeHtmlChar = basePropertyOf(htmlEscapes);
                  module2.exports = escapeHtmlChar;
                })
              ),
              /***/
              2718: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var freeGlobal = typeof __webpack_require__2.g == "object" && __webpack_require__2.g && __webpack_require__2.g.Object === Object && __webpack_require__2.g;
                  module2.exports = freeGlobal;
                })
              ),
              /***/
              5760: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseGetAllKeys = __webpack_require__2(8821), getSymbols = __webpack_require__2(6806), keys = __webpack_require__2(5304);
                  function getAllKeys(object) {
                    return baseGetAllKeys(object, keys, getSymbols);
                  }
                  module2.exports = getAllKeys;
                })
              ),
              /***/
              6929: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isKeyable = __webpack_require__2(9732);
                  function getMapData(map, key) {
                    var data = map.__data__;
                    return isKeyable(key) ? data[typeof key == "string" ? "string" : "hash"] : data.map;
                  }
                  module2.exports = getMapData;
                })
              ),
              /***/
              8418: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isStrictComparable = __webpack_require__2(7030), keys = __webpack_require__2(5304);
                  function getMatchData(object) {
                    var result = keys(object), length = result.length;
                    while (length--) {
                      var key = result[length], value = object[key];
                      result[length] = [key, value, isStrictComparable(value)];
                    }
                    return result;
                  }
                  module2.exports = getMatchData;
                })
              ),
              /***/
              3984: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIsNative = __webpack_require__2(2249), getValue = __webpack_require__2(1074);
                  function getNative(object, key) {
                    var value = getValue(object, key);
                    return baseIsNative(value) ? value : void 0;
                  }
                  module2.exports = getNative;
                })
              ),
              /***/
              905: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var Symbol2 = __webpack_require__2(6711);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  var nativeObjectToString = objectProto.toString;
                  var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;
                  function getRawTag(value) {
                    var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];
                    try {
                      value[symToStringTag] = void 0;
                      var unmasked = true;
                    } catch (e) {
                    }
                    var result = nativeObjectToString.call(value);
                    if (unmasked) {
                      if (isOwn) {
                        value[symToStringTag] = tag;
                      } else {
                        delete value[symToStringTag];
                      }
                    }
                    return result;
                  }
                  module2.exports = getRawTag;
                })
              ),
              /***/
              6806: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayFilter = __webpack_require__2(3928), stubArray = __webpack_require__2(119);
                  var objectProto = Object.prototype;
                  var propertyIsEnumerable = objectProto.propertyIsEnumerable;
                  var nativeGetSymbols = Object.getOwnPropertySymbols;
                  var getSymbols = !nativeGetSymbols ? stubArray : function(object) {
                    if (object == null) {
                      return [];
                    }
                    object = Object(object);
                    return arrayFilter(nativeGetSymbols(object), function(symbol) {
                      return propertyIsEnumerable.call(object, symbol);
                    });
                  };
                  module2.exports = getSymbols;
                })
              ),
              /***/
              695: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var DataView = __webpack_require__2(7230), Map2 = __webpack_require__2(5661), Promise2 = __webpack_require__2(9102), Set2 = __webpack_require__2(5963), WeakMap2 = __webpack_require__2(2850), baseGetTag = __webpack_require__2(6522), toSource = __webpack_require__2(1543);
                  var mapTag = "[object Map]", objectTag = "[object Object]", promiseTag = "[object Promise]", setTag = "[object Set]", weakMapTag = "[object WeakMap]";
                  var dataViewTag = "[object DataView]";
                  var dataViewCtorString = toSource(DataView), mapCtorString = toSource(Map2), promiseCtorString = toSource(Promise2), setCtorString = toSource(Set2), weakMapCtorString = toSource(WeakMap2);
                  var getTag = baseGetTag;
                  if (DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag || Map2 && getTag(new Map2()) != mapTag || Promise2 && getTag(Promise2.resolve()) != promiseTag || Set2 && getTag(new Set2()) != setTag || WeakMap2 && getTag(new WeakMap2()) != weakMapTag) {
                    getTag = function(value) {
                      var result = baseGetTag(value), Ctor = result == objectTag ? value.constructor : void 0, ctorString = Ctor ? toSource(Ctor) : "";
                      if (ctorString) {
                        switch (ctorString) {
                          case dataViewCtorString:
                            return dataViewTag;
                          case mapCtorString:
                            return mapTag;
                          case promiseCtorString:
                            return promiseTag;
                          case setCtorString:
                            return setTag;
                          case weakMapCtorString:
                            return weakMapTag;
                        }
                      }
                      return result;
                    };
                  }
                  module2.exports = getTag;
                })
              ),
              /***/
              1074: (
                /***/
                ((module2) => {
                  function getValue(object, key) {
                    return object == null ? void 0 : object[key];
                  }
                  module2.exports = getValue;
                })
              ),
              /***/
              2248: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var castPath = __webpack_require__2(4275), isArguments = __webpack_require__2(2382), isArray = __webpack_require__2(2003), isIndex = __webpack_require__2(2615), isLength = __webpack_require__2(7164), toKey = __webpack_require__2(8059);
                  function hasPath(object, path, hasFunc) {
                    path = castPath(path, object);
                    var index = -1, length = path.length, result = false;
                    while (++index < length) {
                      var key = toKey(path[index]);
                      if (!(result = object != null && hasFunc(object, key))) {
                        break;
                      }
                      object = object[key];
                    }
                    if (result || ++index != length) {
                      return result;
                    }
                    length = object == null ? 0 : object.length;
                    return !!length && isLength(length) && isIndex(key, length) && (isArray(object) || isArguments(object));
                  }
                  module2.exports = hasPath;
                })
              ),
              /***/
              6890: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var nativeCreate = __webpack_require__2(6060);
                  function hashClear() {
                    this.__data__ = nativeCreate ? nativeCreate(null) : {};
                    this.size = 0;
                  }
                  module2.exports = hashClear;
                })
              ),
              /***/
              9484: (
                /***/
                ((module2) => {
                  function hashDelete(key) {
                    var result = this.has(key) && delete this.__data__[key];
                    this.size -= result ? 1 : 0;
                    return result;
                  }
                  module2.exports = hashDelete;
                })
              ),
              /***/
              7215: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var nativeCreate = __webpack_require__2(6060);
                  var HASH_UNDEFINED = "__lodash_hash_undefined__";
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function hashGet(key) {
                    var data = this.__data__;
                    if (nativeCreate) {
                      var result = data[key];
                      return result === HASH_UNDEFINED ? void 0 : result;
                    }
                    return hasOwnProperty.call(data, key) ? data[key] : void 0;
                  }
                  module2.exports = hashGet;
                })
              ),
              /***/
              7811: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var nativeCreate = __webpack_require__2(6060);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  function hashHas(key) {
                    var data = this.__data__;
                    return nativeCreate ? data[key] !== void 0 : hasOwnProperty.call(data, key);
                  }
                  module2.exports = hashHas;
                })
              ),
              /***/
              747: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var nativeCreate = __webpack_require__2(6060);
                  var HASH_UNDEFINED = "__lodash_hash_undefined__";
                  function hashSet(key, value) {
                    var data = this.__data__;
                    this.size += this.has(key) ? 0 : 1;
                    data[key] = nativeCreate && value === void 0 ? HASH_UNDEFINED : value;
                    return this;
                  }
                  module2.exports = hashSet;
                })
              ),
              /***/
              4385: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var Symbol2 = __webpack_require__2(6711), isArguments = __webpack_require__2(2382), isArray = __webpack_require__2(2003);
                  var spreadableSymbol = Symbol2 ? Symbol2.isConcatSpreadable : void 0;
                  function isFlattenable(value) {
                    return isArray(value) || isArguments(value) || !!(spreadableSymbol && value && value[spreadableSymbol]);
                  }
                  module2.exports = isFlattenable;
                })
              ),
              /***/
              2615: (
                /***/
                ((module2) => {
                  var MAX_SAFE_INTEGER = 9007199254740991;
                  var reIsUint = /^(?:0|[1-9]\d*)$/;
                  function isIndex(value, length) {
                    var type = typeof value;
                    length = length == null ? MAX_SAFE_INTEGER : length;
                    return !!length && (type == "number" || type != "symbol" && reIsUint.test(value)) && (value > -1 && value % 1 == 0 && value < length);
                  }
                  module2.exports = isIndex;
                })
              ),
              /***/
              5934: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var eq = __webpack_require__2(8330), isArrayLike = __webpack_require__2(6316), isIndex = __webpack_require__2(2615), isObject = __webpack_require__2(5603);
                  function isIterateeCall(value, index, object) {
                    if (!isObject(object)) {
                      return false;
                    }
                    var type = typeof index;
                    if (type == "number" ? isArrayLike(object) && isIndex(index, object.length) : type == "string" && index in object) {
                      return eq(object[index], value);
                    }
                    return false;
                  }
                  module2.exports = isIterateeCall;
                })
              ),
              /***/
              5456: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isArray = __webpack_require__2(2003), isSymbol = __webpack_require__2(6596);
                  var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/, reIsPlainProp = /^\w*$/;
                  function isKey(value, object) {
                    if (isArray(value)) {
                      return false;
                    }
                    var type = typeof value;
                    if (type == "number" || type == "symbol" || type == "boolean" || value == null || isSymbol(value)) {
                      return true;
                    }
                    return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);
                  }
                  module2.exports = isKey;
                })
              ),
              /***/
              9732: (
                /***/
                ((module2) => {
                  function isKeyable(value) {
                    var type = typeof value;
                    return type == "string" || type == "number" || type == "symbol" || type == "boolean" ? value !== "__proto__" : value === null;
                  }
                  module2.exports = isKeyable;
                })
              ),
              /***/
              1398: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var coreJsData = __webpack_require__2(3887);
                  var maskSrcKey = (function() {
                    var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || "");
                    return uid ? "Symbol(src)_1." + uid : "";
                  })();
                  function isMasked(func) {
                    return !!maskSrcKey && maskSrcKey in func;
                  }
                  module2.exports = isMasked;
                })
              ),
              /***/
              6165: (
                /***/
                ((module2) => {
                  var objectProto = Object.prototype;
                  function isPrototype(value) {
                    var Ctor = value && value.constructor, proto = typeof Ctor == "function" && Ctor.prototype || objectProto;
                    return value === proto;
                  }
                  module2.exports = isPrototype;
                })
              ),
              /***/
              7030: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isObject = __webpack_require__2(5603);
                  function isStrictComparable(value) {
                    return value === value && !isObject(value);
                  }
                  module2.exports = isStrictComparable;
                })
              ),
              /***/
              4412: (
                /***/
                ((module2) => {
                  function listCacheClear() {
                    this.__data__ = [];
                    this.size = 0;
                  }
                  module2.exports = listCacheClear;
                })
              ),
              /***/
              8522: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var assocIndexOf = __webpack_require__2(4767);
                  var arrayProto = Array.prototype;
                  var splice = arrayProto.splice;
                  function listCacheDelete(key) {
                    var data = this.__data__, index = assocIndexOf(data, key);
                    if (index < 0) {
                      return false;
                    }
                    var lastIndex = data.length - 1;
                    if (index == lastIndex) {
                      data.pop();
                    } else {
                      splice.call(data, index, 1);
                    }
                    --this.size;
                    return true;
                  }
                  module2.exports = listCacheDelete;
                })
              ),
              /***/
              469: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var assocIndexOf = __webpack_require__2(4767);
                  function listCacheGet(key) {
                    var data = this.__data__, index = assocIndexOf(data, key);
                    return index < 0 ? void 0 : data[index][1];
                  }
                  module2.exports = listCacheGet;
                })
              ),
              /***/
              1161: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var assocIndexOf = __webpack_require__2(4767);
                  function listCacheHas(key) {
                    return assocIndexOf(this.__data__, key) > -1;
                  }
                  module2.exports = listCacheHas;
                })
              ),
              /***/
              1441: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var assocIndexOf = __webpack_require__2(4767);
                  function listCacheSet(key, value) {
                    var data = this.__data__, index = assocIndexOf(data, key);
                    if (index < 0) {
                      ++this.size;
                      data.push([key, value]);
                    } else {
                      data[index][1] = value;
                    }
                    return this;
                  }
                  module2.exports = listCacheSet;
                })
              ),
              /***/
              8206: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var Hash = __webpack_require__2(3435), ListCache = __webpack_require__2(5217), Map2 = __webpack_require__2(5661);
                  function mapCacheClear() {
                    this.size = 0;
                    this.__data__ = {
                      "hash": new Hash(),
                      "map": new (Map2 || ListCache)(),
                      "string": new Hash()
                    };
                  }
                  module2.exports = mapCacheClear;
                })
              ),
              /***/
              9768: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getMapData = __webpack_require__2(6929);
                  function mapCacheDelete(key) {
                    var result = getMapData(this, key)["delete"](key);
                    this.size -= result ? 1 : 0;
                    return result;
                  }
                  module2.exports = mapCacheDelete;
                })
              ),
              /***/
              6827: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getMapData = __webpack_require__2(6929);
                  function mapCacheGet(key) {
                    return getMapData(this, key).get(key);
                  }
                  module2.exports = mapCacheGet;
                })
              ),
              /***/
              663: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getMapData = __webpack_require__2(6929);
                  function mapCacheHas(key) {
                    return getMapData(this, key).has(key);
                  }
                  module2.exports = mapCacheHas;
                })
              ),
              /***/
              5135: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getMapData = __webpack_require__2(6929);
                  function mapCacheSet(key, value) {
                    var data = getMapData(this, key), size = data.size;
                    data.set(key, value);
                    this.size += data.size == size ? 0 : 1;
                    return this;
                  }
                  module2.exports = mapCacheSet;
                })
              ),
              /***/
              5483: (
                /***/
                ((module2) => {
                  function mapToArray(map) {
                    var index = -1, result = Array(map.size);
                    map.forEach(function(value, key) {
                      result[++index] = [key, value];
                    });
                    return result;
                  }
                  module2.exports = mapToArray;
                })
              ),
              /***/
              3591: (
                /***/
                ((module2) => {
                  function matchesStrictComparable(key, srcValue) {
                    return function(object) {
                      if (object == null) {
                        return false;
                      }
                      return object[key] === srcValue && (srcValue !== void 0 || key in Object(object));
                    };
                  }
                  module2.exports = matchesStrictComparable;
                })
              ),
              /***/
              874: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var memoize = __webpack_require__2(9513);
                  var MAX_MEMOIZE_SIZE = 500;
                  function memoizeCapped(func) {
                    var result = memoize(func, function(key) {
                      if (cache.size === MAX_MEMOIZE_SIZE) {
                        cache.clear();
                      }
                      return key;
                    });
                    var cache = result.cache;
                    return result;
                  }
                  module2.exports = memoizeCapped;
                })
              ),
              /***/
              6060: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var getNative = __webpack_require__2(3984);
                  var nativeCreate = getNative(Object, "create");
                  module2.exports = nativeCreate;
                })
              ),
              /***/
              6132: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var overArg = __webpack_require__2(889);
                  var nativeKeys = overArg(Object.keys, Object);
                  module2.exports = nativeKeys;
                })
              ),
              /***/
              4555: (
                /***/
                ((module2) => {
                  function nativeKeysIn(object) {
                    var result = [];
                    if (object != null) {
                      for (var key in Object(object)) {
                        result.push(key);
                      }
                    }
                    return result;
                  }
                  module2.exports = nativeKeysIn;
                })
              ),
              /***/
              8315: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  module2 = __webpack_require__2.nmd(module2);
                  var freeGlobal = __webpack_require__2(2718);
                  var freeExports = exports2 && !exports2.nodeType && exports2;
                  var freeModule = freeExports && true && module2 && !module2.nodeType && module2;
                  var moduleExports = freeModule && freeModule.exports === freeExports;
                  var freeProcess = moduleExports && freeGlobal.process;
                  var nodeUtil = (function() {
                    try {
                      var types = freeModule && freeModule.require && freeModule.require("util").types;
                      if (types) {
                        return types;
                      }
                      return freeProcess && freeProcess.binding && freeProcess.binding("util");
                    } catch (e) {
                    }
                  })();
                  module2.exports = nodeUtil;
                })
              ),
              /***/
              2588: (
                /***/
                ((module2) => {
                  var objectProto = Object.prototype;
                  var nativeObjectToString = objectProto.toString;
                  function objectToString(value) {
                    return nativeObjectToString.call(value);
                  }
                  module2.exports = objectToString;
                })
              ),
              /***/
              889: (
                /***/
                ((module2) => {
                  function overArg(func, transform) {
                    return function(arg) {
                      return func(transform(arg));
                    };
                  }
                  module2.exports = overArg;
                })
              ),
              /***/
              5683: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var apply = __webpack_require__2(807);
                  var nativeMax = Math.max;
                  function overRest(func, start, transform) {
                    start = nativeMax(start === void 0 ? func.length - 1 : start, 0);
                    return function() {
                      var args = arguments, index = -1, length = nativeMax(args.length - start, 0), array = Array(length);
                      while (++index < length) {
                        array[index] = args[start + index];
                      }
                      index = -1;
                      var otherArgs = Array(start + 1);
                      while (++index < start) {
                        otherArgs[index] = args[index];
                      }
                      otherArgs[start] = transform(array);
                      return apply(func, this, otherArgs);
                    };
                  }
                  module2.exports = overRest;
                })
              ),
              /***/
              1339: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseGet = __webpack_require__2(384), baseSlice = __webpack_require__2(4198);
                  function parent(object, path) {
                    return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));
                  }
                  module2.exports = parent;
                })
              ),
              /***/
              9107: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var freeGlobal = __webpack_require__2(2718);
                  var freeSelf = typeof self == "object" && self && self.Object === Object && self;
                  var root = freeGlobal || freeSelf || Function("return this")();
                  module2.exports = root;
                })
              ),
              /***/
              2486: (
                /***/
                ((module2) => {
                  var HASH_UNDEFINED = "__lodash_hash_undefined__";
                  function setCacheAdd(value) {
                    this.__data__.set(value, HASH_UNDEFINED);
                    return this;
                  }
                  module2.exports = setCacheAdd;
                })
              ),
              /***/
              9361: (
                /***/
                ((module2) => {
                  function setCacheHas(value) {
                    return this.__data__.has(value);
                  }
                  module2.exports = setCacheHas;
                })
              ),
              /***/
              5841: (
                /***/
                ((module2) => {
                  function setToArray(set) {
                    var index = -1, result = Array(set.size);
                    set.forEach(function(value) {
                      result[++index] = value;
                    });
                    return result;
                  }
                  module2.exports = setToArray;
                })
              ),
              /***/
              6391: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseSetToString = __webpack_require__2(7880), shortOut = __webpack_require__2(9437);
                  var setToString = shortOut(baseSetToString);
                  module2.exports = setToString;
                })
              ),
              /***/
              9437: (
                /***/
                ((module2) => {
                  var HOT_COUNT = 800, HOT_SPAN = 16;
                  var nativeNow = Date.now;
                  function shortOut(func) {
                    var count = 0, lastCalled = 0;
                    return function() {
                      var stamp = nativeNow(), remaining = HOT_SPAN - (stamp - lastCalled);
                      lastCalled = stamp;
                      if (remaining > 0) {
                        if (++count >= HOT_COUNT) {
                          return arguments[0];
                        }
                      } else {
                        count = 0;
                      }
                      return func.apply(void 0, arguments);
                    };
                  }
                  module2.exports = shortOut;
                })
              ),
              /***/
              8658: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var ListCache = __webpack_require__2(5217);
                  function stackClear() {
                    this.__data__ = new ListCache();
                    this.size = 0;
                  }
                  module2.exports = stackClear;
                })
              ),
              /***/
              3844: (
                /***/
                ((module2) => {
                  function stackDelete(key) {
                    var data = this.__data__, result = data["delete"](key);
                    this.size = data.size;
                    return result;
                  }
                  module2.exports = stackDelete;
                })
              ),
              /***/
              6503: (
                /***/
                ((module2) => {
                  function stackGet(key) {
                    return this.__data__.get(key);
                  }
                  module2.exports = stackGet;
                })
              ),
              /***/
              1563: (
                /***/
                ((module2) => {
                  function stackHas(key) {
                    return this.__data__.has(key);
                  }
                  module2.exports = stackHas;
                })
              ),
              /***/
              259: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var ListCache = __webpack_require__2(5217), Map2 = __webpack_require__2(5661), MapCache = __webpack_require__2(3287);
                  var LARGE_ARRAY_SIZE = 200;
                  function stackSet(key, value) {
                    var data = this.__data__;
                    if (data instanceof ListCache) {
                      var pairs = data.__data__;
                      if (!Map2 || pairs.length < LARGE_ARRAY_SIZE - 1) {
                        pairs.push([key, value]);
                        this.size = ++data.size;
                        return this;
                      }
                      data = this.__data__ = new MapCache(pairs);
                    }
                    data.set(key, value);
                    this.size = data.size;
                    return this;
                  }
                  module2.exports = stackSet;
                })
              ),
              /***/
              5957: (
                /***/
                ((module2) => {
                  function strictIndexOf(array, value, fromIndex) {
                    var index = fromIndex - 1, length = array.length;
                    while (++index < length) {
                      if (array[index] === value) {
                        return index;
                      }
                    }
                    return -1;
                  }
                  module2.exports = strictIndexOf;
                })
              ),
              /***/
              5240: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var memoizeCapped = __webpack_require__2(874);
                  var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;
                  var reEscapeChar = /\\(\\)?/g;
                  var stringToPath = memoizeCapped(function(string) {
                    var result = [];
                    if (string.charCodeAt(0) === 46) {
                      result.push("");
                    }
                    string.replace(rePropName, function(match, number, quote, subString) {
                      result.push(quote ? subString.replace(reEscapeChar, "$1") : number || match);
                    });
                    return result;
                  });
                  module2.exports = stringToPath;
                })
              ),
              /***/
              8059: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isSymbol = __webpack_require__2(6596);
                  var INFINITY = 1 / 0;
                  function toKey(value) {
                    if (typeof value == "string" || isSymbol(value)) {
                      return value;
                    }
                    var result = value + "";
                    return result == "0" && 1 / value == -INFINITY ? "-0" : result;
                  }
                  module2.exports = toKey;
                })
              ),
              /***/
              1543: (
                /***/
                ((module2) => {
                  var funcProto = Function.prototype;
                  var funcToString = funcProto.toString;
                  function toSource(func) {
                    if (func != null) {
                      try {
                        return funcToString.call(func);
                      } catch (e) {
                      }
                      try {
                        return func + "";
                      } catch (e) {
                      }
                    }
                    return "";
                  }
                  module2.exports = toSource;
                })
              ),
              /***/
              8882: (
                /***/
                ((module2) => {
                  var reWhitespace = /\s/;
                  function trimmedEndIndex(string) {
                    var index = string.length;
                    while (index-- && reWhitespace.test(string.charAt(index))) {
                    }
                    return index;
                  }
                  module2.exports = trimmedEndIndex;
                })
              ),
              /***/
              163: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var toInteger = __webpack_require__2(8007);
                  var FUNC_ERROR_TEXT = "Expected a function";
                  function before(n, func) {
                    var result;
                    if (typeof func != "function") {
                      throw new TypeError(FUNC_ERROR_TEXT);
                    }
                    n = toInteger(n);
                    return function() {
                      if (--n > 0) {
                        result = func.apply(this, arguments);
                      }
                      if (n <= 1) {
                        func = void 0;
                      }
                      return result;
                    };
                  }
                  module2.exports = before;
                })
              ),
              /***/
              7660: (
                /***/
                ((module2) => {
                  function constant(value) {
                    return function() {
                      return value;
                    };
                  }
                  module2.exports = constant;
                })
              ),
              /***/
              4503: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isObject = __webpack_require__2(5603), now = __webpack_require__2(1406), toNumber = __webpack_require__2(3920);
                  var FUNC_ERROR_TEXT = "Expected a function";
                  var nativeMax = Math.max, nativeMin = Math.min;
                  function debounce(func, wait, options) {
                    var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;
                    if (typeof func != "function") {
                      throw new TypeError(FUNC_ERROR_TEXT);
                    }
                    wait = toNumber(wait) || 0;
                    if (isObject(options)) {
                      leading = !!options.leading;
                      maxing = "maxWait" in options;
                      maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
                      trailing = "trailing" in options ? !!options.trailing : trailing;
                    }
                    function invokeFunc(time) {
                      var args = lastArgs, thisArg = lastThis;
                      lastArgs = lastThis = void 0;
                      lastInvokeTime = time;
                      result = func.apply(thisArg, args);
                      return result;
                    }
                    function leadingEdge(time) {
                      lastInvokeTime = time;
                      timerId = setTimeout(timerExpired, wait);
                      return leading ? invokeFunc(time) : result;
                    }
                    function remainingWait(time) {
                      var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;
                      return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
                    }
                    function shouldInvoke(time) {
                      var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;
                      return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
                    }
                    function timerExpired() {
                      var time = now();
                      if (shouldInvoke(time)) {
                        return trailingEdge(time);
                      }
                      timerId = setTimeout(timerExpired, remainingWait(time));
                    }
                    function trailingEdge(time) {
                      timerId = void 0;
                      if (trailing && lastArgs) {
                        return invokeFunc(time);
                      }
                      lastArgs = lastThis = void 0;
                      return result;
                    }
                    function cancel() {
                      if (timerId !== void 0) {
                        clearTimeout(timerId);
                      }
                      lastInvokeTime = 0;
                      lastArgs = lastCallTime = lastThis = timerId = void 0;
                    }
                    function flush() {
                      return timerId === void 0 ? result : trailingEdge(now());
                    }
                    function debounced() {
                      var time = now(), isInvoking = shouldInvoke(time);
                      lastArgs = arguments;
                      lastThis = this;
                      lastCallTime = time;
                      if (isInvoking) {
                        if (timerId === void 0) {
                          return leadingEdge(lastCallTime);
                        }
                        if (maxing) {
                          clearTimeout(timerId);
                          timerId = setTimeout(timerExpired, wait);
                          return invokeFunc(lastCallTime);
                        }
                      }
                      if (timerId === void 0) {
                        timerId = setTimeout(timerExpired, wait);
                      }
                      return result;
                    }
                    debounced.cancel = cancel;
                    debounced.flush = flush;
                    return debounced;
                  }
                  module2.exports = debounce;
                })
              ),
              /***/
              8278: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseRest = __webpack_require__2(3408), eq = __webpack_require__2(8330), isIterateeCall = __webpack_require__2(5934), keysIn = __webpack_require__2(7495);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  var defaults = baseRest(function(object, sources) {
                    object = Object(object);
                    var index = -1;
                    var length = sources.length;
                    var guard = length > 2 ? sources[2] : void 0;
                    if (guard && isIterateeCall(sources[0], sources[1], guard)) {
                      length = 1;
                    }
                    while (++index < length) {
                      var source = sources[index];
                      var props = keysIn(source);
                      var propsIndex = -1;
                      var propsLength = props.length;
                      while (++propsIndex < propsLength) {
                        var key = props[propsIndex];
                        var value = object[key];
                        if (value === void 0 || eq(value, objectProto[key]) && !hasOwnProperty.call(object, key)) {
                          object[key] = source[key];
                        }
                      }
                    }
                    return object;
                  });
                  module2.exports = defaults;
                })
              ),
              /***/
              8330: (
                /***/
                ((module2) => {
                  function eq(value, other) {
                    return value === other || value !== value && other !== other;
                  }
                  module2.exports = eq;
                })
              ),
              /***/
              3131: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var escapeHtmlChar = __webpack_require__2(9025), toString = __webpack_require__2(7060);
                  var reUnescapedHtml = /[&<>"']/g, reHasUnescapedHtml = RegExp(reUnescapedHtml.source);
                  function escape(string) {
                    string = toString(string);
                    return string && reHasUnescapedHtml.test(string) ? string.replace(reUnescapedHtml, escapeHtmlChar) : string;
                  }
                  module2.exports = escape;
                })
              ),
              /***/
              5098: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var toString = __webpack_require__2(7060);
                  var reRegExpChar = /[\\^$.*+?()[\]{}|]/g, reHasRegExpChar = RegExp(reRegExpChar.source);
                  function escapeRegExp(string) {
                    string = toString(string);
                    return string && reHasRegExpChar.test(string) ? string.replace(reRegExpChar, "\\$&") : string;
                  }
                  module2.exports = escapeRegExp;
                })
              ),
              /***/
              4455: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var createFind = __webpack_require__2(7216), findIndex = __webpack_require__2(9339);
                  var find = createFind(findIndex);
                  module2.exports = find;
                })
              ),
              /***/
              9339: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseFindIndex = __webpack_require__2(6917), baseIteratee = __webpack_require__2(7675), toInteger = __webpack_require__2(8007);
                  var nativeMax = Math.max;
                  function findIndex(array, predicate, fromIndex) {
                    var length = array == null ? 0 : array.length;
                    if (!length) {
                      return -1;
                    }
                    var index = fromIndex == null ? 0 : toInteger(fromIndex);
                    if (index < 0) {
                      index = nativeMax(length + index, 0);
                    }
                    return baseFindIndex(array, baseIteratee(predicate, 3), index);
                  }
                  module2.exports = findIndex;
                })
              ),
              /***/
              2427: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseFindIndex = __webpack_require__2(6917), baseIteratee = __webpack_require__2(7675), toInteger = __webpack_require__2(8007);
                  var nativeMax = Math.max, nativeMin = Math.min;
                  function findLastIndex(array, predicate, fromIndex) {
                    var length = array == null ? 0 : array.length;
                    if (!length) {
                      return -1;
                    }
                    var index = length - 1;
                    if (fromIndex !== void 0) {
                      index = toInteger(fromIndex);
                      index = fromIndex < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);
                    }
                    return baseFindIndex(array, baseIteratee(predicate, 3), index, true);
                  }
                  module2.exports = findLastIndex;
                })
              ),
              /***/
              6501: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseFlatten = __webpack_require__2(4958), map = __webpack_require__2(7528);
                  function flatMap(collection, iteratee) {
                    return baseFlatten(map(collection, iteratee), 1);
                  }
                  module2.exports = flatMap;
                })
              ),
              /***/
              4176: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseFlatten = __webpack_require__2(4958);
                  function flatten2(array) {
                    var length = array == null ? 0 : array.length;
                    return length ? baseFlatten(array, 1) : [];
                  }
                  module2.exports = flatten2;
                })
              ),
              /***/
              1214: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseGet = __webpack_require__2(384);
                  function get(object, path, defaultValue) {
                    var result = object == null ? void 0 : baseGet(object, path);
                    return result === void 0 ? defaultValue : result;
                  }
                  module2.exports = get;
                })
              ),
              /***/
              8765: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseHasIn = __webpack_require__2(6571), hasPath = __webpack_require__2(2248);
                  function hasIn(object, path) {
                    return object != null && hasPath(object, path, baseHasIn);
                  }
                  module2.exports = hasIn;
                })
              ),
              /***/
              1686: (
                /***/
                ((module2) => {
                  function identity(value) {
                    return value;
                  }
                  module2.exports = identity;
                })
              ),
              /***/
              5193: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIndexOf = __webpack_require__2(8357), isArrayLike = __webpack_require__2(6316), isString = __webpack_require__2(3085), toInteger = __webpack_require__2(8007), values = __webpack_require__2(2);
                  var nativeMax = Math.max;
                  function includes(collection, value, fromIndex, guard) {
                    collection = isArrayLike(collection) ? collection : values(collection);
                    fromIndex = fromIndex && !guard ? toInteger(fromIndex) : 0;
                    var length = collection.length;
                    if (fromIndex < 0) {
                      fromIndex = nativeMax(length + fromIndex, 0);
                    }
                    return isString(collection) ? fromIndex <= length && collection.indexOf(value, fromIndex) > -1 : !!length && baseIndexOf(collection, value, fromIndex) > -1;
                  }
                  module2.exports = includes;
                })
              ),
              /***/
              4225: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayMap = __webpack_require__2(14), baseIntersection = __webpack_require__2(739), baseRest = __webpack_require__2(3408), castArrayLikeObject = __webpack_require__2(9471);
                  var intersection = baseRest(function(arrays) {
                    var mapped = arrayMap(arrays, castArrayLikeObject);
                    return mapped.length && mapped[0] === arrays[0] ? baseIntersection(mapped) : [];
                  });
                  module2.exports = intersection;
                })
              ),
              /***/
              3929: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIteratee = __webpack_require__2(7675), createInverter = __webpack_require__2(1624);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  var nativeObjectToString = objectProto.toString;
                  var invertBy = createInverter(function(result, value, key) {
                    if (value != null && typeof value.toString != "function") {
                      value = nativeObjectToString.call(value);
                    }
                    if (hasOwnProperty.call(result, value)) {
                      result[value].push(key);
                    } else {
                      result[value] = [key];
                    }
                  }, baseIteratee);
                  module2.exports = invertBy;
                })
              ),
              /***/
              2382: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIsArguments = __webpack_require__2(2744), isObjectLike = __webpack_require__2(2620);
                  var objectProto = Object.prototype;
                  var hasOwnProperty = objectProto.hasOwnProperty;
                  var propertyIsEnumerable = objectProto.propertyIsEnumerable;
                  var isArguments = baseIsArguments(/* @__PURE__ */ (function() {
                    return arguments;
                  })()) ? baseIsArguments : function(value) {
                    return isObjectLike(value) && hasOwnProperty.call(value, "callee") && !propertyIsEnumerable.call(value, "callee");
                  };
                  module2.exports = isArguments;
                })
              ),
              /***/
              2003: (
                /***/
                ((module2) => {
                  var isArray = Array.isArray;
                  module2.exports = isArray;
                })
              ),
              /***/
              6316: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isFunction = __webpack_require__2(8148), isLength = __webpack_require__2(7164);
                  function isArrayLike(value) {
                    return value != null && isLength(value.length) && !isFunction(value);
                  }
                  module2.exports = isArrayLike;
                })
              ),
              /***/
              1899: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var isArrayLike = __webpack_require__2(6316), isObjectLike = __webpack_require__2(2620);
                  function isArrayLikeObject(value) {
                    return isObjectLike(value) && isArrayLike(value);
                  }
                  module2.exports = isArrayLikeObject;
                })
              ),
              /***/
              1262: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  module2 = __webpack_require__2.nmd(module2);
                  var root = __webpack_require__2(9107), stubFalse = __webpack_require__2(2125);
                  var freeExports = exports2 && !exports2.nodeType && exports2;
                  var freeModule = freeExports && true && module2 && !module2.nodeType && module2;
                  var moduleExports = freeModule && freeModule.exports === freeExports;
                  var Buffer2 = moduleExports ? root.Buffer : void 0;
                  var nativeIsBuffer = Buffer2 ? Buffer2.isBuffer : void 0;
                  var isBuffer = nativeIsBuffer || stubFalse;
                  module2.exports = isBuffer;
                })
              ),
              /***/
              1470: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIsEqual = __webpack_require__2(9336);
                  function isEqual(value, other) {
                    return baseIsEqual(value, other);
                  }
                  module2.exports = isEqual;
                })
              ),
              /***/
              8148: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseGetTag = __webpack_require__2(6522), isObject = __webpack_require__2(5603);
                  var asyncTag = "[object AsyncFunction]", funcTag = "[object Function]", genTag = "[object GeneratorFunction]", proxyTag = "[object Proxy]";
                  function isFunction(value) {
                    if (!isObject(value)) {
                      return false;
                    }
                    var tag = baseGetTag(value);
                    return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
                  }
                  module2.exports = isFunction;
                })
              ),
              /***/
              7164: (
                /***/
                ((module2) => {
                  var MAX_SAFE_INTEGER = 9007199254740991;
                  function isLength(value) {
                    return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
                  }
                  module2.exports = isLength;
                })
              ),
              /***/
              5603: (
                /***/
                ((module2) => {
                  function isObject(value) {
                    var type = typeof value;
                    return value != null && (type == "object" || type == "function");
                  }
                  module2.exports = isObject;
                })
              ),
              /***/
              2620: (
                /***/
                ((module2) => {
                  function isObjectLike(value) {
                    return value != null && typeof value == "object";
                  }
                  module2.exports = isObjectLike;
                })
              ),
              /***/
              3085: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseGetTag = __webpack_require__2(6522), isArray = __webpack_require__2(2003), isObjectLike = __webpack_require__2(2620);
                  var stringTag = "[object String]";
                  function isString(value) {
                    return typeof value == "string" || !isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag;
                  }
                  module2.exports = isString;
                })
              ),
              /***/
              6596: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseGetTag = __webpack_require__2(6522), isObjectLike = __webpack_require__2(2620);
                  var symbolTag = "[object Symbol]";
                  function isSymbol(value) {
                    return typeof value == "symbol" || isObjectLike(value) && baseGetTag(value) == symbolTag;
                  }
                  module2.exports = isSymbol;
                })
              ),
              /***/
              9221: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIsTypedArray = __webpack_require__2(5387), baseUnary = __webpack_require__2(2347), nodeUtil = __webpack_require__2(8315);
                  var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;
                  var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;
                  module2.exports = isTypedArray;
                })
              ),
              /***/
              5304: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayLikeKeys = __webpack_require__2(7137), baseKeys = __webpack_require__2(6794), isArrayLike = __webpack_require__2(6316);
                  function keys(object) {
                    return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
                  }
                  module2.exports = keys;
                })
              ),
              /***/
              7495: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayLikeKeys = __webpack_require__2(7137), baseKeysIn = __webpack_require__2(8157), isArrayLike = __webpack_require__2(6316);
                  function keysIn(object) {
                    return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
                  }
                  module2.exports = keysIn;
                })
              ),
              /***/
              6456: (
                /***/
                ((module2) => {
                  function last2(array) {
                    var length = array == null ? 0 : array.length;
                    return length ? array[length - 1] : void 0;
                  }
                  module2.exports = last2;
                })
              ),
              /***/
              7528: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayMap = __webpack_require__2(14), baseIteratee = __webpack_require__2(7675), baseMap = __webpack_require__2(5718), isArray = __webpack_require__2(2003);
                  function map(collection, iteratee) {
                    var func = isArray(collection) ? arrayMap : baseMap;
                    return func(collection, baseIteratee(iteratee, 3));
                  }
                  module2.exports = map;
                })
              ),
              /***/
              9513: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var MapCache = __webpack_require__2(3287);
                  var FUNC_ERROR_TEXT = "Expected a function";
                  function memoize(func, resolver) {
                    if (typeof func != "function" || resolver != null && typeof resolver != "function") {
                      throw new TypeError(FUNC_ERROR_TEXT);
                    }
                    var memoized = function() {
                      var args = arguments, key = resolver ? resolver.apply(this, args) : args[0], cache = memoized.cache;
                      if (cache.has(key)) {
                        return cache.get(key);
                      }
                      var result = func.apply(this, args);
                      memoized.cache = cache.set(key, result) || cache;
                      return result;
                    };
                    memoized.cache = new (memoize.Cache || MapCache)();
                    return memoized;
                  }
                  memoize.Cache = MapCache;
                  module2.exports = memoize;
                })
              ),
              /***/
              1700: (
                /***/
                ((module2) => {
                  function noop() {
                  }
                  module2.exports = noop;
                })
              ),
              /***/
              1406: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var root = __webpack_require__2(9107);
                  var now = function() {
                    return root.Date.now();
                  };
                  module2.exports = now;
                })
              ),
              /***/
              8921: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var before = __webpack_require__2(163);
                  function once(func) {
                    return before(2, func);
                  }
                  module2.exports = once;
                })
              ),
              /***/
              7093: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseProperty = __webpack_require__2(1171), basePropertyDeep = __webpack_require__2(4589), isKey = __webpack_require__2(5456), toKey = __webpack_require__2(8059);
                  function property(path) {
                    return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);
                  }
                  module2.exports = property;
                })
              ),
              /***/
              2036: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIteratee = __webpack_require__2(7675), basePullAt = __webpack_require__2(7916);
                  function remove(array, predicate) {
                    var result = [];
                    if (!(array && array.length)) {
                      return result;
                    }
                    var index = -1, indexes = [], length = array.length;
                    predicate = baseIteratee(predicate, 3);
                    while (++index < length) {
                      var value = array[index];
                      if (predicate(value, index, array)) {
                        result.push(value);
                        indexes.push(index);
                      }
                    }
                    basePullAt(array, indexes);
                    return result;
                  }
                  module2.exports = remove;
                })
              ),
              /***/
              3281: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseFlatten = __webpack_require__2(4958), baseOrderBy = __webpack_require__2(3729), baseRest = __webpack_require__2(3408), isIterateeCall = __webpack_require__2(5934);
                  var sortBy = baseRest(function(collection, iteratees) {
                    if (collection == null) {
                      return [];
                    }
                    var length = iteratees.length;
                    if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {
                      iteratees = [];
                    } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {
                      iteratees = [iteratees[0]];
                    }
                    return baseOrderBy(collection, baseFlatten(iteratees, 1), []);
                  });
                  module2.exports = sortBy;
                })
              ),
              /***/
              7013: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseClamp = __webpack_require__2(9631), baseToString = __webpack_require__2(8354), toInteger = __webpack_require__2(8007), toString = __webpack_require__2(7060);
                  function startsWith(string, target, position) {
                    string = toString(string);
                    position = position == null ? 0 : baseClamp(toInteger(position), 0, string.length);
                    target = baseToString(target);
                    return string.slice(position, position + target.length) == target;
                  }
                  module2.exports = startsWith;
                })
              ),
              /***/
              119: (
                /***/
                ((module2) => {
                  function stubArray() {
                    return [];
                  }
                  module2.exports = stubArray;
                })
              ),
              /***/
              2125: (
                /***/
                ((module2) => {
                  function stubFalse() {
                    return false;
                  }
                  module2.exports = stubFalse;
                })
              ),
              /***/
              1680: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var debounce = __webpack_require__2(4503), isObject = __webpack_require__2(5603);
                  var FUNC_ERROR_TEXT = "Expected a function";
                  function throttle(func, wait, options) {
                    var leading = true, trailing = true;
                    if (typeof func != "function") {
                      throw new TypeError(FUNC_ERROR_TEXT);
                    }
                    if (isObject(options)) {
                      leading = "leading" in options ? !!options.leading : leading;
                      trailing = "trailing" in options ? !!options.trailing : trailing;
                    }
                    return debounce(func, wait, {
                      "leading": leading,
                      "maxWait": wait,
                      "trailing": trailing
                    });
                  }
                  module2.exports = throttle;
                })
              ),
              /***/
              3950: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var toNumber = __webpack_require__2(3920);
                  var INFINITY = 1 / 0, MAX_INTEGER = 17976931348623157e292;
                  function toFinite(value) {
                    if (!value) {
                      return value === 0 ? value : 0;
                    }
                    value = toNumber(value);
                    if (value === INFINITY || value === -INFINITY) {
                      var sign = value < 0 ? -1 : 1;
                      return sign * MAX_INTEGER;
                    }
                    return value === value ? value : 0;
                  }
                  module2.exports = toFinite;
                })
              ),
              /***/
              8007: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var toFinite = __webpack_require__2(3950);
                  function toInteger(value) {
                    var result = toFinite(value), remainder = result % 1;
                    return result === result ? remainder ? result - remainder : result : 0;
                  }
                  module2.exports = toInteger;
                })
              ),
              /***/
              3920: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseTrim = __webpack_require__2(9070), isObject = __webpack_require__2(5603), isSymbol = __webpack_require__2(6596);
                  var NAN = 0 / 0;
                  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
                  var reIsBinary = /^0b[01]+$/i;
                  var reIsOctal = /^0o[0-7]+$/i;
                  var freeParseInt = parseInt;
                  function toNumber(value) {
                    if (typeof value == "number") {
                      return value;
                    }
                    if (isSymbol(value)) {
                      return NAN;
                    }
                    if (isObject(value)) {
                      var other = typeof value.valueOf == "function" ? value.valueOf() : value;
                      value = isObject(other) ? other + "" : other;
                    }
                    if (typeof value != "string") {
                      return value === 0 ? value : +value;
                    }
                    value = baseTrim(value);
                    var isBinary = reIsBinary.test(value);
                    return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
                  }
                  module2.exports = toNumber;
                })
              ),
              /***/
              7060: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseToString = __webpack_require__2(8354);
                  function toString(value) {
                    return value == null ? "" : baseToString(value);
                  }
                  module2.exports = toString;
                })
              ),
              /***/
              1285: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseUniq = __webpack_require__2(7971);
                  function uniq(array) {
                    return array && array.length ? baseUniq(array) : [];
                  }
                  module2.exports = uniq;
                })
              ),
              /***/
              8496: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseIteratee = __webpack_require__2(7675), baseUniq = __webpack_require__2(7971);
                  function uniqBy(array, iteratee) {
                    return array && array.length ? baseUniq(array, baseIteratee(iteratee, 2)) : [];
                  }
                  module2.exports = uniqBy;
                })
              ),
              /***/
              2344: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayFilter = __webpack_require__2(3928), arrayMap = __webpack_require__2(14), baseProperty = __webpack_require__2(1171), baseTimes = __webpack_require__2(5410), isArrayLikeObject = __webpack_require__2(1899);
                  var nativeMax = Math.max;
                  function unzip(array) {
                    if (!(array && array.length)) {
                      return [];
                    }
                    var length = 0;
                    array = arrayFilter(array, function(group) {
                      if (isArrayLikeObject(group)) {
                        length = nativeMax(group.length, length);
                        return true;
                      }
                    });
                    return baseTimes(length, function(index) {
                      return arrayMap(array, baseProperty(index));
                    });
                  }
                  module2.exports = unzip;
                })
              ),
              /***/
              2: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseValues = __webpack_require__2(4956), keys = __webpack_require__2(5304);
                  function values(object) {
                    return object == null ? [] : baseValues(object, keys(object));
                  }
                  module2.exports = values;
                })
              ),
              /***/
              7981: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var baseRest = __webpack_require__2(3408), unzip = __webpack_require__2(2344);
                  var zip = baseRest(unzip);
                  module2.exports = zip;
                })
              ),
              /***/
              9864: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  exports2.__esModule = true;
                  exports2["default"] = match;
                  var proto = __webpack_require__2.g.Element && __webpack_require__2.g.Element.prototype;
                  var vendor = proto && (proto.matches || proto.matchesSelector || proto.webkitMatchesSelector || proto.mozMatchesSelector || proto.msMatchesSelector || proto.oMatchesSelector);
                  function match(el, selector) {
                    if (vendor) return vendor.call(el, selector);
                    var parentNode = el.parentNode;
                    if (parentNode && typeof parentNode.querySelectorAll === "function") {
                      var nodes = parentNode.querySelectorAll(selector);
                      for (var i = 0; i < nodes.length; i++) {
                        if (nodes[i] === el) return true;
                      }
                    }
                    return false;
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              5946: (
                /***/
                ((module2) => {
                  "use strict";
                  var getOwnPropertySymbols = Object.getOwnPropertySymbols;
                  var hasOwnProperty = Object.prototype.hasOwnProperty;
                  var propIsEnumerable = Object.prototype.propertyIsEnumerable;
                  function toObject(val) {
                    if (val === null || val === void 0) {
                      throw new TypeError("Object.assign cannot be called with null or undefined");
                    }
                    return Object(val);
                  }
                  function shouldUseNative() {
                    try {
                      if (!Object.assign) {
                        return false;
                      }
                      var test1 = new String("abc");
                      test1[5] = "de";
                      if (Object.getOwnPropertyNames(test1)[0] === "5") {
                        return false;
                      }
                      var test2 = {};
                      for (var i = 0; i < 10; i++) {
                        test2["_" + String.fromCharCode(i)] = i;
                      }
                      var order2 = Object.getOwnPropertyNames(test2).map(function(n) {
                        return test2[n];
                      });
                      if (order2.join("") !== "0123456789") {
                        return false;
                      }
                      var test3 = {};
                      "abcdefghijklmnopqrst".split("").forEach(function(letter) {
                        test3[letter] = letter;
                      });
                      if (Object.keys(Object.assign({}, test3)).join("") !== "abcdefghijklmnopqrst") {
                        return false;
                      }
                      return true;
                    } catch (err) {
                      return false;
                    }
                  }
                  module2.exports = shouldUseNative() ? Object.assign : function(target, source) {
                    var from;
                    var to = toObject(target);
                    var symbols;
                    for (var s = 1; s < arguments.length; s++) {
                      from = Object(arguments[s]);
                      for (var key in from) {
                        if (hasOwnProperty.call(from, key)) {
                          to[key] = from[key];
                        }
                      }
                      if (getOwnPropertySymbols) {
                        symbols = getOwnPropertySymbols(from);
                        for (var i = 0; i < symbols.length; i++) {
                          if (propIsEnumerable.call(from, symbols[i])) {
                            to[symbols[i]] = from[symbols[i]];
                          }
                        }
                      }
                    }
                    return to;
                  };
                })
              ),
              /***/
              3520: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var freeze = __webpack_require__2.g.Object.freeze || function(x) {
                    return x;
                  };
                  var _default = freeze;
                  exports2["default"] = _default;
                  module2.exports = exports2.default;
                })
              ),
              /***/
              451: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var _immutabilityHelper = _interopRequireDefault(__webpack_require__2(2996));
                  var _findIndex = _interopRequireDefault(__webpack_require__2(9339));
                  var _findLastIndex = _interopRequireDefault(__webpack_require__2(2427));
                  var _invertBy = _interopRequireDefault(__webpack_require__2(3929));
                  var _sortBy = _interopRequireDefault(__webpack_require__2(3281));
                  var _freeze = _interopRequireDefault(__webpack_require__2(3520));
                  function ownKeys(object, enumerableOnly) {
                    var keys = Object.keys(object);
                    if (Object.getOwnPropertySymbols) {
                      var symbols = Object.getOwnPropertySymbols(object);
                      enumerableOnly && (symbols = symbols.filter(function(sym) {
                        return Object.getOwnPropertyDescriptor(object, sym).enumerable;
                      })), keys.push.apply(keys, symbols);
                    }
                    return keys;
                  }
                  function _objectSpread(target) {
                    for (var i = 1; i < arguments.length; i++) {
                      var source = null != arguments[i] ? arguments[i] : {};
                      i % 2 ? ownKeys(Object(source), true).forEach(function(key) {
                        (0, _defineProperty2["default"])(target, key, source[key]);
                      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function(key) {
                        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
                      });
                    }
                    return target;
                  }
                  function itemToCombinedId(x) {
                    return "".concat(JSON.stringify(x.groupId), ":").concat(JSON.stringify(x.id));
                  }
                  var OrderManager = /* @__PURE__ */ (function() {
                    function OrderManager2(options) {
                      (0, _classCallCheck2["default"])(this, OrderManager2);
                      (0, _defineProperty2["default"])(this, "_items", (0, _freeze["default"])([]));
                      (0, _defineProperty2["default"])(this, "_needsSort", false);
                      this._get = options.get;
                      this._set = options.set;
                      this._maxLimit = options.maxLimit || 200;
                    }
                    (0, _createClass2["default"])(OrderManager2, [{
                      key: "_read",
                      value: function _read() {
                        var pdata = this._get();
                        return pdata == null ? {
                          order: []
                        } : pdata;
                      }
                    }, {
                      key: "_save",
                      value: function _save(pdata) {
                        if (pdata.order.length > this._maxLimit) {
                          var itemsAndIndexes = pdata.order.map(function(item, index) {
                            return {
                              item,
                              index
                            };
                          });
                          var indexesToRemove = (0, _sortBy["default"])(itemsAndIndexes, function(x) {
                            return x.item.lastUse;
                          }).slice(0, pdata.order.length - this._maxLimit).map(function(x) {
                            return x.index;
                          });
                          var sortedIndexesToRemove = (0, _sortBy["default"])(indexesToRemove, function(x) {
                            return -x;
                          });
                          pdata = (0, _immutabilityHelper["default"])(pdata, {
                            order: {
                              $splice: sortedIndexesToRemove.map(function(i) {
                                return [i, 1];
                              })
                            }
                          });
                        }
                        this._set(pdata);
                      }
                    }, {
                      key: "_updatePersistedDataWithItem",
                      value: function _updatePersistedDataWithItem(item) {
                        var pdata = this._read();
                        var ixOfId = (0, _findIndex["default"])(pdata.order, function(x) {
                          return x.groupId === item.groupId && x.id === item.id;
                        });
                        if (ixOfId !== -1 && pdata.order[ixOfId].orderHint !== item.orderHint) {
                          pdata = (0, _immutabilityHelper["default"])(pdata, {
                            order: {
                              $splice: [[ixOfId, 1]]
                            }
                          });
                          ixOfId = -1;
                        }
                        if (ixOfId !== -1) {
                          pdata = (0, _immutabilityHelper["default"])(pdata, {
                            order: {
                              $splice: [[ixOfId, 1, {
                                groupId: item.groupId,
                                id: item.id,
                                orderHint: item.orderHint,
                                lastUse: Date.now()
                              }]]
                            }
                          });
                        } else {
                          var ixToInsertAt;
                          var ixOfLesserOrEqualGroupItem = (0, _findLastIndex["default"])(pdata.order, function(x) {
                            return x.groupId === item.groupId && x.orderHint <= item.orderHint;
                          });
                          if (ixOfLesserOrEqualGroupItem !== -1) {
                            ixToInsertAt = ixOfLesserOrEqualGroupItem + 1;
                          } else {
                            var ixOfGreaterGroupItem = (0, _findIndex["default"])(pdata.order, function(x) {
                              return x.groupId === item.groupId;
                            });
                            if (ixOfGreaterGroupItem !== -1) {
                              ixToInsertAt = ixOfGreaterGroupItem;
                            } else {
                              var groupIdsToIndexes = (0, _invertBy["default"])(pdata.order, function(x) {
                                return x.groupId;
                              });
                              var groupIds = Object.keys(groupIdsToIndexes);
                              var roll = Math.floor(Math.random() * (groupIds.length + 1));
                              if (roll === groupIds.length) {
                                ixToInsertAt = pdata.order.length;
                              } else {
                                ixToInsertAt = groupIdsToIndexes[groupIds[roll]][0];
                              }
                            }
                          }
                          ixToInsertAt;
                          pdata = (0, _immutabilityHelper["default"])(pdata, {
                            order: {
                              $splice: [[ixToInsertAt, 0, {
                                groupId: item.groupId,
                                id: item.id,
                                orderHint: item.orderHint,
                                lastUse: Date.now()
                              }]]
                            }
                          });
                        }
                        this._save(pdata);
                        return pdata;
                      }
                    }, {
                      key: "_sortItemsIfNecessary",
                      value: function _sortItemsIfNecessary(pdata) {
                        if (this._needsSort) {
                          if (!pdata) pdata = this._read();
                          var idsToIndexes = (0, _invertBy["default"])(pdata.order, itemToCombinedId);
                          this._items = (0, _freeze["default"])((0, _sortBy["default"])(this._items, function(item) {
                            var id = itemToCombinedId(item);
                            return Object.prototype.hasOwnProperty.call(idsToIndexes, id) ? Number(idsToIndexes[id][0]) : 0;
                          }));
                          this._needsSort = false;
                        }
                      }
                    }, {
                      key: "addItem",
                      value: function addItem(item) {
                        this._updatePersistedDataWithItem(item);
                        this._needsSort = true;
                        this._items = this._items.concat([(0, _freeze["default"])({
                          groupId: item.groupId,
                          id: item.id,
                          orderHint: item.orderHint,
                          value: item.value
                        })]);
                      }
                    }, {
                      key: "updateItemValue",
                      value: function updateItemValue(groupId, id, value) {
                        this._items = (0, _freeze["default"])(this._items.map(function(item) {
                          if (item.groupId === groupId && item.id === id) {
                            return (0, _freeze["default"])(_objectSpread(_objectSpread({}, item), {}, {
                              value
                            }));
                          } else {
                            return item;
                          }
                        }));
                      }
                    }, {
                      key: "updateItemValueByIndex",
                      value: function updateItemValueByIndex(index, value) {
                        this._sortItemsIfNecessary();
                        this._items = (0, _freeze["default"])((0, _immutabilityHelper["default"])(this._items, {
                          $splice: [[index, 1, (0, _freeze["default"])(_objectSpread(_objectSpread({}, this._items[index]), {}, {
                            value
                          }))]]
                        }));
                      }
                    }, {
                      key: "removeItem",
                      value: function removeItem(groupId, id) {
                        this._items = (0, _freeze["default"])(this._items.filter(function(item) {
                          return item.groupId !== groupId || item.id !== id;
                        }));
                      }
                    }, {
                      key: "removeItemByIndex",
                      value: function removeItemByIndex(index) {
                        this._sortItemsIfNecessary();
                        this._items = (0, _freeze["default"])((0, _immutabilityHelper["default"])(this._items, {
                          $splice: [[index, 1]]
                        }));
                      }
                    }, {
                      key: "moveItem",
                      value: function moveItem(sourceIndex, destinationIndex) {
                        var pdata = this._read();
                        this._sortItemsIfNecessary(pdata);
                        var source = this._items[sourceIndex];
                        var destination = this._items[destinationIndex];
                        var sourcePIx = (0, _findIndex["default"])(pdata.order, function(item) {
                          return item.groupId === source.groupId && item.id === source.id;
                        });
                        var destinationPIx = (0, _findIndex["default"])(pdata.order, function(item) {
                          return item.groupId === destination.groupId && item.id === destination.id;
                        });
                        pdata = (0, _immutabilityHelper["default"])(pdata, {
                          order: {
                            $splice: [[sourcePIx, 1], [destinationPIx, 0, pdata.order[sourcePIx]]]
                          }
                        });
                        this._save(pdata);
                        this._needsSort = true;
                      }
                    }, {
                      key: "getOrderedItems",
                      value: function getOrderedItems() {
                        this._sortItemsIfNecessary();
                        return this._items;
                      }
                    }, {
                      key: "reload",
                      value: function reload() {
                        this._needsSort = true;
                      }
                    }]);
                    return OrderManager2;
                  })();
                  exports2["default"] = OrderManager;
                  module2.exports = exports2.default;
                })
              ),
              /***/
              3972: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = createCssFn;
                  var _matchesSelectorNg = _interopRequireDefault(__webpack_require__2(9864));
                  function createCssFn(selector) {
                    return function(el) {
                      return (0, _matchesSelectorNg["default"])(el, selector);
                    };
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              1855: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = createTransformer;
                  var _transducers = _interopRequireDefault(__webpack_require__2(6046));
                  var _transduce = _interopRequireDefault(__webpack_require__2(1365));
                  var _filter = _interopRequireDefault(__webpack_require__2(3800));
                  var _merge = _interopRequireDefault(__webpack_require__2(9976));
                  var _createCssFn = _interopRequireDefault(__webpack_require__2(3972));
                  var _watchMutations = _interopRequireDefault(__webpack_require__2(5174));
                  var _watchFilteredChildren = _interopRequireDefault(__webpack_require__2(8572));
                  function createTransformer(scheduler, selectors) {
                    var transformers = selectors.map(function(item) {
                      if (typeof item === "string") {
                        var condFn = (0, _createCssFn["default"])(item);
                        return function(liveSet) {
                          return (0, _watchFilteredChildren["default"])(liveSet, condFn);
                        };
                      } else if (item.$or) {
                        var _transformers = item.$or.map(function(s) {
                          return createTransformer(scheduler, s);
                        });
                        return function(liveSet) {
                          return (0, _merge["default"])(_transformers.map(function(transformer) {
                            return transformer(liveSet);
                          }));
                        };
                      } else if (item.$watch) {
                        var _item$$watch = item.$watch, attributeFilter = _item$$watch.attributeFilter, cond = _item$$watch.cond;
                        var _condFn = typeof cond === "function" ? cond : (0, _createCssFn["default"])(cond);
                        return function(liveSet) {
                          return (0, _watchMutations["default"])(liveSet, attributeFilter, _condFn);
                        };
                      } else if (item.$log) {
                        var $log = item.$log;
                        var filterFn = function filterFn2(value) {
                          console.log($log, value.el);
                          return true;
                        };
                        return function(liveSet) {
                          return (0, _filter["default"])(liveSet, filterFn);
                        };
                      } else if (item.$filter) {
                        var $filter = item.$filter;
                        var _filterFn = function _filterFn2(_ref) {
                          var el = _ref.el;
                          return $filter(el);
                        };
                        return function(liveSet) {
                          return (0, _filter["default"])(liveSet, _filterFn);
                        };
                      } else if (item.$map) {
                        var $map = item.$map;
                        var transducer = _transducers["default"].compose(_transducers["default"].map(function(ec) {
                          return {
                            el: $map(ec.el),
                            parents: ec.parents
                          };
                        }), _transducers["default"].filter(function(ec) {
                          return ec.el != null;
                        }));
                        return function(liveSet) {
                          return (0, _transduce["default"])(liveSet, transducer);
                        };
                      }
                      throw new Error("Invalid selector item: ".concat(JSON.stringify(item)));
                    });
                    return transformers.reduce(function(combined, transformer) {
                      return function(liveSet) {
                        return transformer(combined(liveSet));
                      };
                    }, function(x) {
                      return x;
                    });
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              8572: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = watchFilteredChildren;
                  var _liveSet = _interopRequireDefault(__webpack_require__2(2436));
                  function watchFilteredChildren(input, condFn) {
                    return new _liveSet["default"]({
                      scheduler: input.getScheduler(),
                      read: function read() {
                        throw new Error();
                      },
                      listen: function listen(setValues, controller) {
                        setValues(/* @__PURE__ */ new Set());
                        var inputEntries = /* @__PURE__ */ new Map();
                        var outputEcs = /* @__PURE__ */ new Map();
                        function newEc(ec) {
                          function addedNode(child) {
                            if (child.nodeType !== 1) return;
                            if (condFn(child)) {
                              var childEc = {
                                el: child,
                                parents: ec.parents
                              };
                              outputEcs.set(child, childEc);
                              controller.add(childEc);
                            }
                          }
                          function removedNode(child) {
                            if (child.nodeType !== 1) return;
                            var childEc = outputEcs.get(child);
                            if (!childEc) return;
                            outputEcs["delete"](child);
                            controller.remove(childEc);
                          }
                          function changesHandler(mutations) {
                            if (mutations.length > 1) {
                              var removedEls = /* @__PURE__ */ new Set();
                              var addedEls = [];
                              mutations.forEach(function(_ref) {
                                var addedNodes = _ref.addedNodes, removedNodes = _ref.removedNodes;
                                for (var i = 0, len = removedNodes.length; i < len; i++) {
                                  var _el = removedNodes[i];
                                  if (_el.nodeType !== 1) continue;
                                  removedEls.add(removedNodes[i]);
                                }
                                for (var _i = 0, _len = addedNodes.length; _i < _len; _i++) {
                                  var _el2 = addedNodes[_i];
                                  if (_el2.nodeType !== 1) continue;
                                  if (removedEls.has(_el2)) {
                                    removedEls["delete"](_el2);
                                  } else {
                                    addedEls.push(_el2);
                                  }
                                }
                              });
                              addedEls.forEach(addedNode);
                              removedEls.forEach(removedNode);
                            } else {
                              mutations.forEach(function(mutation) {
                                Array.prototype.forEach.call(mutation.addedNodes, addedNode);
                                Array.prototype.forEach.call(mutation.removedNodes, removedNode);
                              });
                            }
                          }
                          Array.prototype.forEach.call(ec.el.children, addedNode);
                          var observer2 = new MutationObserver(changesHandler);
                          observer2.observe(ec.el, {
                            childList: true
                          });
                          inputEntries.set(ec, {
                            observer: observer2,
                            removedNode
                          });
                        }
                        function removedEc(ec) {
                          var entry = inputEntries.get(ec);
                          if (!entry) throw new Error("Should not happen: Unseen ElementContext removed");
                          entry.observer.takeRecords().forEach(function(mutation) {
                            Array.prototype.forEach.call(mutation.removedNodes, entry.removedNode);
                          });
                          entry.observer.disconnect();
                          Array.prototype.forEach.call(ec.el.children, entry.removedNode);
                          inputEntries["delete"](ec);
                        }
                        var sub = input.subscribe({
                          start: function start() {
                            input.values().forEach(newEc);
                          },
                          next: function next(changes) {
                            changes.forEach(function(change) {
                              if (change.type === "add") {
                                newEc(change.value);
                              } else if (change.type === "remove") {
                                removedEc(change.value);
                              }
                            });
                          }
                        });
                        return {
                          unsubscribe: function unsubscribe() {
                            sub.unsubscribe();
                            inputEntries.forEach(function(_ref2) {
                              var observer2 = _ref2.observer;
                              observer2.disconnect();
                            });
                          },
                          pullChanges: function pullChanges() {
                            sub.pullChanges();
                          }
                        };
                      }
                    });
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              5174: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = watchMutations;
                  var _liveSet = _interopRequireDefault(__webpack_require__2(2436));
                  function watchMutations(input, attributeFilter, condFn) {
                    return new _liveSet["default"]({
                      scheduler: input.getScheduler(),
                      read: function read() {
                        throw new Error();
                      },
                      listen: function listen(setValues, controller) {
                        setValues(/* @__PURE__ */ new Set());
                        var entries = /* @__PURE__ */ new Map();
                        function newEc(ec) {
                          var mo = new MutationObserver(function(changes) {
                            if (changes.length === 0) return;
                            if (condFn(ec.el)) {
                              if (!entry.passed) {
                                entry.passed = true;
                                controller.add(ec);
                              }
                            } else {
                              if (entry.passed) {
                                entry.passed = false;
                                controller.remove(ec);
                              }
                            }
                          });
                          var entry = {
                            mo,
                            passed: false
                          };
                          if (condFn(ec.el)) {
                            entry.passed = true;
                            controller.add(ec);
                          }
                          mo.observe(ec.el, {
                            attributes: true,
                            attributeFilter
                          });
                          entries.set(ec, entry);
                        }
                        function removedEc(ec) {
                          var entry = entries.get(ec);
                          if (!entry) throw new Error("Should not happen: Unseen ElementContext removed");
                          entry.mo.disconnect();
                          if (entry.passed) {
                            controller.remove(ec);
                          }
                          entries["delete"](ec);
                        }
                        var sub = input.subscribe({
                          start: function start() {
                            input.values().forEach(newEc);
                          },
                          next: function next(changes) {
                            changes.forEach(function(change) {
                              if (change.type === "add") {
                                newEc(change.value);
                              } else if (change.type === "remove") {
                                removedEc(change.value);
                              }
                            });
                          }
                        });
                        return {
                          unsubscribe: function unsubscribe() {
                            sub.unsubscribe();
                            entries.forEach(function(_ref) {
                              var mo = _ref.mo;
                              mo.disconnect();
                            });
                          },
                          pullChanges: function pullChanges() {
                            sub.pullChanges();
                          }
                        };
                      }
                    });
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              855: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var _liveSet = _interopRequireDefault(__webpack_require__2(2436));
                  var _merge = _interopRequireDefault(__webpack_require__2(9976));
                  var _flatMapR = _interopRequireDefault(__webpack_require__2(5145));
                  var _Scheduler = _interopRequireDefault(__webpack_require__2(4401));
                  var _tagTree = __webpack_require__2(7138);
                  var _watcherFinderMerger = _interopRequireDefault(__webpack_require__2(8897));
                  var _createTransformer = _interopRequireDefault(__webpack_require__2(1855));
                  function makeTagOptions(options) {
                    var map = /* @__PURE__ */ new Map();
                    var list = [];
                    Object.keys(options.tags).forEach(function(tag) {
                      var tagOptions = options.tags[tag];
                      var ownedBy = tagOptions.ownedBy;
                      list.push({
                        tag,
                        ownedBy
                      });
                      map.set(tag, tagOptions);
                    });
                    Object.keys(options.finders).concat(options.watchers.map(function(w) {
                      return w.tag;
                    })).forEach(function(tag) {
                      if (!map.has(tag)) {
                        map.set(tag, {
                          ownedBy: []
                        });
                        list.push({
                          tag
                        });
                      }
                    });
                    return {
                      map,
                      list
                    };
                  }
                  var PageParserTree = /* @__PURE__ */ (function() {
                    function PageParserTree2(root, options) {
                      var _this = this;
                      (0, _classCallCheck2["default"])(this, PageParserTree2);
                      (0, _defineProperty2["default"])(this, "tree", void 0);
                      (0, _defineProperty2["default"])(this, "_scheduler", new _Scheduler["default"]());
                      (0, _defineProperty2["default"])(this, "_treeController", void 0);
                      (0, _defineProperty2["default"])(this, "_rootMatchedSet", void 0);
                      (0, _defineProperty2["default"])(this, "_ecSources", void 0);
                      (0, _defineProperty2["default"])(this, "_logError", void 0);
                      (0, _defineProperty2["default"])(this, "_options", void 0);
                      (0, _defineProperty2["default"])(this, "_tagOptions", void 0);
                      (0, _defineProperty2["default"])(this, "_tagsList", void 0);
                      (0, _defineProperty2["default"])(this, "_subscriptions", []);
                      var rootEl;
                      if (root.nodeType === Node.DOCUMENT_NODE) {
                        rootEl = root.documentElement;
                        if (!rootEl) throw new Error("missing documentElement");
                      } else {
                        rootEl = root;
                      }
                      this._options = options;
                      this._logError = options.logError || function(err) {
                        setTimeout(function() {
                          throw err;
                        }, 0);
                      };
                      var _makeTagOptions = makeTagOptions(this._options), tagOptionsMap = _makeTagOptions.map, tags = _makeTagOptions.list;
                      this._tagOptions = tagOptionsMap;
                      this._tagsList = tags;
                      this.tree = new _tagTree.TagTree({
                        root: rootEl,
                        tags,
                        executor: function executor(controller) {
                          _this._treeController = controller;
                        }
                      });
                      this._rootMatchedSet = _liveSet["default"].constant(/* @__PURE__ */ new Set([{
                        el: this.tree.getValue(),
                        parents: [{
                          tag: null,
                          node: this.tree
                        }]
                      }]), {
                        scheduler: this._scheduler
                      });
                      this._setupWatchersAndFinders();
                    }
                    (0, _createClass2["default"])(PageParserTree2, [{
                      key: "_setupWatchersAndFinders",
                      value: function _setupWatchersAndFinders() {
                        var _this2 = this;
                        var tagsWithWatchers = /* @__PURE__ */ new Set();
                        this._options.watchers.forEach(function(watcher) {
                          tagsWithWatchers.add(watcher.tag);
                        });
                        this._ecSources = new Map(this._tagsList.map(function(_ref) {
                          var tag = _ref.tag;
                          var tagOptions = _this2._tagOptions.get(tag);
                          if (!tagOptions) throw new Error();
                          var ownedBy = new Set(tagOptions.ownedBy || []);
                          var _LiveSet$active = _liveSet["default"].active(null, {
                            scheduler: _this2._scheduler
                          }), liveSet = _LiveSet$active.liveSet, controller = _LiveSet$active.controller;
                          var combinedWatcherSet = tagsWithWatchers.has(tag) ? (0, _flatMapR["default"])(liveSet, function(s) {
                            return s;
                          }) : null;
                          var finder = _this2._options.finders[tag];
                          var ecsToTag = finder ? (0, _watcherFinderMerger["default"])(_this2._scheduler, _this2.tree, tag, tagOptions, combinedWatcherSet, finder, _this2._logError) : combinedWatcherSet || _liveSet["default"].constant(/* @__PURE__ */ new Set(), {
                            scheduler: _this2._scheduler
                          });
                          var elementsToNodes = /* @__PURE__ */ new Map();
                          function findParentNode(taggedParents) {
                            var parentNode;
                            for (var i = taggedParents.length - 1; i >= 0; i--) {
                              if (taggedParents[i].tag == null || ownedBy.has(taggedParents[i].tag)) {
                                parentNode = taggedParents[i].node;
                                break;
                              }
                            }
                            if (!parentNode) throw new Error();
                            return parentNode;
                          }
                          var ecSet = new _liveSet["default"]({
                            scheduler: _this2._scheduler,
                            read: function read() {
                              throw new Error();
                            },
                            listen: function listen(setValues, controller2) {
                              var m = /* @__PURE__ */ new Map();
                              var cb = function cb2(ec) {
                                var el = ec.el, parents = ec.parents;
                                var parentNode = findParentNode(parents);
                                var node = _this2._treeController.addTaggedValue(parentNode, tag, el);
                                if (elementsToNodes.has(el)) {
                                  _this2._logError(new Error("PageParserTree(".concat(tag, ") watcher received element twice")), el);
                                }
                                elementsToNodes.set(el, node);
                                var newParents = ec.parents.concat([{
                                  tag,
                                  node
                                }]);
                                return {
                                  el,
                                  parents: newParents
                                };
                              };
                              return ecsToTag.subscribe({
                                start: function start() {
                                  var s = /* @__PURE__ */ new Set();
                                  ecsToTag.values().forEach(function(value) {
                                    var newValue = cb(value);
                                    m.set(value, newValue);
                                    s.add(newValue);
                                  });
                                  setValues(s);
                                },
                                next: function next(changes) {
                                  var ecsRemovedInNotification = /* @__PURE__ */ new Set();
                                  if (changes.length > 1) {
                                    changes.forEach(function(change) {
                                      if (change.type === "remove") {
                                        ecsRemovedInNotification.add(change.value);
                                      }
                                    });
                                  }
                                  changes.forEach(function(change) {
                                    if (change.type === "add") {
                                      if (ecsRemovedInNotification.has(change.value)) return;
                                      var newValue = cb(change.value);
                                      m.set(change.value, newValue);
                                      controller2.add(newValue);
                                    } else if (change.type === "remove") {
                                      var _newValue = m.get(change.value);
                                      if (!_newValue) return;
                                      m["delete"](change.value);
                                      controller2.remove(_newValue);
                                      var node = elementsToNodes.get(_newValue.el);
                                      if (!node) throw new Error("Should not happen: received removal of unseen element");
                                      elementsToNodes["delete"](_newValue.el);
                                      var nodeParent = node.getParent();
                                      if (nodeParent && nodeParent.ownsNode(node)) {
                                        _this2._treeController.removeTaggedNode(nodeParent, tag, node);
                                      }
                                    }
                                  });
                                },
                                error: function error(err) {
                                  controller2.error(err);
                                },
                                complete: function complete() {
                                  controller2.end();
                                }
                              });
                            }
                          });
                          _this2._subscriptions.push(ecSet.subscribe({}));
                          return [tag, {
                            liveSet,
                            controller,
                            ecSet
                          }];
                        }));
                        this._options.watchers.forEach(function(_ref2) {
                          var sources = _ref2.sources, selectors = _ref2.selectors, tag = _ref2.tag;
                          var sourceSets = sources.map(function(tag2) {
                            if (!tag2) return _this2._rootMatchedSet;
                            var entry = _this2._ecSources.get(tag2);
                            if (!entry) throw new Error("Unknown source: " + tag2);
                            return entry.ecSet;
                          });
                          var sourceSet = sourceSets.length === 1 ? sourceSets[0] : (0, _merge["default"])(sourceSets);
                          var transformer = (0, _createTransformer["default"])(_this2._scheduler, selectors);
                          var ecEntry = _this2._ecSources.get(tag);
                          if (!ecEntry) throw new Error();
                          ecEntry.controller.add(transformer(sourceSet));
                        });
                        this._scheduler.flush();
                      }
                    }, {
                      key: "_dumpWithoutEnd",
                      value: function _dumpWithoutEnd() {
                        var _this3 = this;
                        this._subscriptions.forEach(function(sub) {
                          sub.unsubscribe();
                        });
                        this._subscriptions.length = 0;
                        this.tree.getOwned().forEach(function(liveSet, tag) {
                          liveSet.values().forEach(function(node) {
                            _this3._treeController.removeTaggedNode(_this3.tree, tag, node);
                          });
                        });
                      }
                    }, {
                      key: "dump",
                      value: function dump() {
                        this._dumpWithoutEnd();
                        this._treeController.end();
                      }
                      // Intended for use with hot module replacement.
                    }, {
                      key: "replaceOptions",
                      value: function replaceOptions(options) {
                        var tagErrStr = "replaceOptions does not support tag changes";
                        var _makeTagOptions2 = makeTagOptions(options), tagOptionsMap = _makeTagOptions2.map;
                        if (this._tagOptions.size !== tagOptionsMap.size) {
                          throw new Error(tagErrStr);
                        }
                        this._tagOptions.forEach(function(oldOptions, tag) {
                          var newOptions = tagOptionsMap.get(tag);
                          if (!newOptions) throw new Error(tagErrStr);
                          var oldOwnedBy = oldOptions.ownedBy || [];
                          var newOwnedBy = new Set(newOptions.ownedBy || []);
                          if (oldOwnedBy.length !== newOwnedBy.size) throw new Error(tagErrStr);
                          oldOwnedBy.forEach(function(tag2) {
                            if (!newOwnedBy.has(tag2)) throw new Error(tagErrStr);
                          });
                        });
                        this._dumpWithoutEnd();
                        this._options = options;
                        this._setupWatchersAndFinders();
                      }
                    }]);
                    return PageParserTree2;
                  })();
                  exports2["default"] = PageParserTree;
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              8897: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = watcherFinderMerger;
                  var _typeof2 = _interopRequireDefault(__webpack_require__2(2990));
                  var _liveSet = _interopRequireDefault(__webpack_require__2(2436));
                  function watcherFinderMerger(scheduler, tagTree, tag, tagOptions, watcherSet, finder, logError) {
                    return new _liveSet["default"]({
                      scheduler,
                      read: function read() {
                        throw new Error("Should not happen");
                      },
                      listen: function listen(setValues, controller) {
                        var currentElements = /* @__PURE__ */ new Set();
                        var currentElementContexts = /* @__PURE__ */ new Set();
                        var watcherFoundElements = /* @__PURE__ */ new Set();
                        var watcherFoundElementsMissedByFinder = /* @__PURE__ */ new Set();
                        var sub = null;
                        if (watcherSet) {
                          sub = watcherSet.subscribe({
                            start: function start() {
                              if (!watcherSet) throw new Error();
                              var currentValues = watcherSet.values();
                              setValues(currentValues);
                              currentValues.forEach(function(ec) {
                                watcherFoundElements.add(ec.el);
                                currentElements.add(ec.el);
                                currentElementContexts.add(ec);
                              });
                            },
                            next: function next(changes) {
                              changes.forEach(function(change) {
                                if (change.type === "add") {
                                  var _el = change.value.el;
                                  watcherFoundElements.add(_el);
                                  if (currentElements.has(_el)) {
                                    logError(new Error("PageParserTree(".concat(tag, ") watcher found element already found by finder")), _el);
                                  } else {
                                    currentElements.add(_el);
                                    currentElementContexts.add(change.value);
                                    controller.add(change.value);
                                  }
                                } else if (change.type === "remove") {
                                  var _el2 = change.value.el;
                                  watcherFoundElements["delete"](_el2);
                                  watcherFoundElementsMissedByFinder["delete"](_el2);
                                  if (currentElementContexts.has(change.value)) {
                                    currentElements["delete"](_el2);
                                    currentElementContexts["delete"](change.value);
                                    controller.remove(change.value);
                                  }
                                }
                              });
                            },
                            error: function error(err) {
                              controller.error(err);
                            },
                            complete: function complete() {
                              controller.end();
                            }
                          });
                        } else {
                          setValues(/* @__PURE__ */ new Set());
                        }
                        var finderSchedule = null;
                        if (finder) {
                          var fn = finder.fn, interval = finder.interval;
                          var ownedBy = tagOptions.ownedBy || [];
                          var runFinder = function runFinder2() {
                            var finderRunFoundElements = /* @__PURE__ */ new Set();
                            var found = fn(tagTree.getValue());
                            for (var i = 0, len = found.length; i < len; i++) {
                              var _el3 = found[i];
                              finderRunFoundElements.add(_el3);
                              if (!currentElements.has(_el3)) {
                                currentElements.add(_el3);
                                var ec = makeElementContext(_el3, tagTree, ownedBy);
                                currentElementContexts.add(ec);
                                controller.add(ec);
                                if (watcherSet) {
                                  logError(new Error("PageParserTree(".concat(tag, ") finder found element missed by watcher")), _el3);
                                  if (sub) sub.pullChanges();
                                }
                              }
                            }
                            currentElementContexts.forEach(function(ec2) {
                              var el = ec2.el;
                              if (!finderRunFoundElements.has(el)) {
                                if (watcherFoundElements.has(el)) {
                                  if (!watcherFoundElementsMissedByFinder.has(el)) {
                                    watcherFoundElementsMissedByFinder.add(el);
                                    logError(new Error("PageParserTree(".concat(tag, ") watcher found element missed by finder")), el);
                                  }
                                } else {
                                  currentElementContexts["delete"](ec2);
                                  currentElements["delete"](el);
                                  controller.remove(ec2);
                                  if (sub) sub.pullChanges();
                                }
                              }
                            });
                            scheduler.flush();
                          };
                          finderSchedule = scheduleRepeatingFinder(interval, currentElements, runFinder);
                        }
                        return {
                          unsubscribe: function unsubscribe() {
                            if (finderSchedule != null) finderSchedule.dispose();
                            if (sub) sub.unsubscribe();
                          },
                          pullChanges: function pullChanges() {
                            if (sub) sub.pullChanges();
                          }
                        };
                      }
                    });
                  }
                  function scheduleRepeatingFinder(interval, currentElements, runFinder) {
                    var finderStartedTimestamp = Date.now();
                    var timeoutHandle = null;
                    var idleHandle = null;
                    var step = function step2() {
                      idleHandle = null;
                      runFinder();
                      scheduleNextStep();
                    };
                    var scheduleNextStep = function scheduleNextStep2() {
                      var time;
                      if (interval == null) {
                        time = 5e3 + Math.random() * 1e3;
                      } else if (typeof interval === "number") {
                        time = interval;
                      } else if (typeof interval === "function") {
                        time = interval(currentElements.size, Date.now() - finderStartedTimestamp);
                      } else {
                        throw new Error("interval has wrong type: ".concat((0, _typeof2["default"])(interval)));
                      }
                      time;
                      if (time === Infinity) {
                        return;
                      }
                      timeoutHandle = setTimeout(function() {
                        timeoutHandle = null;
                        if (__webpack_require__2.g.requestIdleCallback && __webpack_require__2.g.cancelIdleCallback) {
                          idleHandle = __webpack_require__2.g.requestIdleCallback(step, {
                            timeout: time
                          });
                        } else {
                          step();
                        }
                      }, time);
                    };
                    scheduleNextStep();
                    return {
                      dispose: function dispose() {
                        if (timeoutHandle != null) clearTimeout(timeoutHandle);
                        if (idleHandle != null) __webpack_require__2.g.cancelIdleCallback(idleHandle);
                      }
                    };
                  }
                  function makeElementContext(el, tagTree, ownedBy) {
                    var _cachedParents = null;
                    return {
                      el,
                      get parents() {
                        if (!_cachedParents) {
                          var root = tagTree.getValue();
                          var parents = [];
                          var current = el.parentElement;
                          while (current) {
                            var tagTreeNodes = tagTree.getNodesForValue(current);
                            for (var i = 0, len = tagTreeNodes.length; i < len; i++) {
                              var node = tagTreeNodes[i];
                              var tag = node.getTag();
                              if (tag == null || ownedBy.indexOf(tag) >= 0) {
                                parents.push({
                                  tag,
                                  node
                                });
                                break;
                              }
                            }
                            if (current === root) break;
                            current = current.parentElement;
                          }
                          parents.reverse();
                          _cachedParents = parents;
                        }
                        return _cachedParents;
                      }
                    };
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              8498: (
                /***/
                ((__unused_webpack_module, exports2) => {
                  "use strict";
                  var __webpack_unused_export__;
                  __webpack_unused_export__ = {
                    value: true
                  };
                  exports2.A = delay;
                  function delay(time, value) {
                    return new Promise(function(resolve) {
                      setTimeout(function() {
                        resolve(value);
                      }, time);
                    });
                  }
                })
              ),
              /***/
              1453: (
                /***/
                (function(module2, __unused_webpack_exports, __webpack_require__2) {
                  var process = __webpack_require__2(9964);
                  (function() {
                    var getNanoSeconds, hrtime, loadTime;
                    if (typeof performance !== "undefined" && performance !== null && performance.now) {
                      module2.exports = function() {
                        return performance.now();
                      };
                    } else if (typeof process !== "undefined" && process !== null && process.hrtime) {
                      module2.exports = function() {
                        return (getNanoSeconds() - loadTime) / 1e6;
                      };
                      hrtime = process.hrtime;
                      getNanoSeconds = function() {
                        var hr;
                        hr = hrtime();
                        return hr[0] * 1e9 + hr[1];
                      };
                      loadTime = getNanoSeconds();
                    } else if (Date.now) {
                      module2.exports = function() {
                        return Date.now() - loadTime;
                      };
                      loadTime = Date.now();
                    } else {
                      module2.exports = function() {
                        return (/* @__PURE__ */ new Date()).getTime() - loadTime;
                      };
                      loadTime = (/* @__PURE__ */ new Date()).getTime();
                    }
                  }).call(this);
                })
              ),
              /***/
              9964: (
                /***/
                ((module2) => {
                  var process = module2.exports = {};
                  var cachedSetTimeout;
                  var cachedClearTimeout;
                  function defaultSetTimout() {
                    throw new Error("setTimeout has not been defined");
                  }
                  function defaultClearTimeout() {
                    throw new Error("clearTimeout has not been defined");
                  }
                  (function() {
                    try {
                      if (typeof setTimeout === "function") {
                        cachedSetTimeout = setTimeout;
                      } else {
                        cachedSetTimeout = defaultSetTimout;
                      }
                    } catch (e) {
                      cachedSetTimeout = defaultSetTimout;
                    }
                    try {
                      if (typeof clearTimeout === "function") {
                        cachedClearTimeout = clearTimeout;
                      } else {
                        cachedClearTimeout = defaultClearTimeout;
                      }
                    } catch (e) {
                      cachedClearTimeout = defaultClearTimeout;
                    }
                  })();
                  function runTimeout(fun) {
                    if (cachedSetTimeout === setTimeout) {
                      return setTimeout(fun, 0);
                    }
                    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
                      cachedSetTimeout = setTimeout;
                      return setTimeout(fun, 0);
                    }
                    try {
                      return cachedSetTimeout(fun, 0);
                    } catch (e) {
                      try {
                        return cachedSetTimeout.call(null, fun, 0);
                      } catch (e2) {
                        return cachedSetTimeout.call(this, fun, 0);
                      }
                    }
                  }
                  function runClearTimeout(marker) {
                    if (cachedClearTimeout === clearTimeout) {
                      return clearTimeout(marker);
                    }
                    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
                      cachedClearTimeout = clearTimeout;
                      return clearTimeout(marker);
                    }
                    try {
                      return cachedClearTimeout(marker);
                    } catch (e) {
                      try {
                        return cachedClearTimeout.call(null, marker);
                      } catch (e2) {
                        return cachedClearTimeout.call(this, marker);
                      }
                    }
                  }
                  var queue = [];
                  var draining = false;
                  var currentQueue;
                  var queueIndex = -1;
                  function cleanUpNextTick() {
                    if (!draining || !currentQueue) {
                      return;
                    }
                    draining = false;
                    if (currentQueue.length) {
                      queue = currentQueue.concat(queue);
                    } else {
                      queueIndex = -1;
                    }
                    if (queue.length) {
                      drainQueue();
                    }
                  }
                  function drainQueue() {
                    if (draining) {
                      return;
                    }
                    var timeout = runTimeout(cleanUpNextTick);
                    draining = true;
                    var len = queue.length;
                    while (len) {
                      currentQueue = queue;
                      queue = [];
                      while (++queueIndex < len) {
                        if (currentQueue) {
                          currentQueue[queueIndex].run();
                        }
                      }
                      queueIndex = -1;
                      len = queue.length;
                    }
                    currentQueue = null;
                    draining = false;
                    runClearTimeout(timeout);
                  }
                  process.nextTick = function(fun) {
                    var args = new Array(arguments.length - 1);
                    if (arguments.length > 1) {
                      for (var i = 1; i < arguments.length; i++) {
                        args[i - 1] = arguments[i];
                      }
                    }
                    queue.push(new Item(fun, args));
                    if (queue.length === 1 && !draining) {
                      runTimeout(drainQueue);
                    }
                  };
                  function Item(fun, array) {
                    this.fun = fun;
                    this.array = array;
                  }
                  Item.prototype.run = function() {
                    this.fun.apply(null, this.array);
                  };
                  process.title = "browser";
                  process.browser = true;
                  process.env = {};
                  process.argv = [];
                  process.version = "";
                  process.versions = {};
                  function noop() {
                  }
                  process.on = noop;
                  process.addListener = noop;
                  process.once = noop;
                  process.off = noop;
                  process.removeListener = noop;
                  process.removeAllListeners = noop;
                  process.emit = noop;
                  process.prependListener = noop;
                  process.prependOnceListener = noop;
                  process.listeners = function(name) {
                    return [];
                  };
                  process.binding = function(name) {
                    throw new Error("process.binding is not supported");
                  };
                  process.cwd = function() {
                    return "/";
                  };
                  process.chdir = function(dir) {
                    throw new Error("process.chdir is not supported");
                  };
                  process.umask = function() {
                    return 0;
                  };
                })
              ),
              /***/
              628: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  var ReactPropTypesSecret = __webpack_require__2(9305);
                  function emptyFunction() {
                  }
                  function emptyFunctionWithReset() {
                  }
                  emptyFunctionWithReset.resetWarningCache = emptyFunction;
                  module2.exports = function() {
                    function shim(props, propName, componentName, location2, propFullName, secret) {
                      if (secret === ReactPropTypesSecret) {
                        return;
                      }
                      var err = new Error(
                        "Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types"
                      );
                      err.name = "Invariant Violation";
                      throw err;
                    }
                    ;
                    shim.isRequired = shim;
                    function getShim() {
                      return shim;
                    }
                    ;
                    var ReactPropTypes = {
                      array: shim,
                      bool: shim,
                      func: shim,
                      number: shim,
                      object: shim,
                      string: shim,
                      symbol: shim,
                      any: shim,
                      arrayOf: getShim,
                      element: shim,
                      elementType: shim,
                      instanceOf: getShim,
                      node: shim,
                      objectOf: getShim,
                      oneOf: getShim,
                      oneOfType: getShim,
                      shape: getShim,
                      exact: getShim,
                      checkPropTypes: emptyFunctionWithReset,
                      resetWarningCache: emptyFunction
                    };
                    ReactPropTypes.PropTypes = ReactPropTypes;
                    return ReactPropTypes;
                  };
                })
              ),
              /***/
              5826: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  if (false) {
                    var throwOnDirectAccess, ReactIs;
                  } else {
                    module2.exports = __webpack_require__2(628)();
                  }
                })
              ),
              /***/
              9305: (
                /***/
                ((module2) => {
                  "use strict";
                  var ReactPropTypesSecret = "SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";
                  module2.exports = ReactPropTypesSecret;
                })
              ),
              /***/
              1892: (
                /***/
                ((module2) => {
                  "use strict";
                  function hasOwnProperty(obj, prop) {
                    return Object.prototype.hasOwnProperty.call(obj, prop);
                  }
                  module2.exports = function(qs2, sep, eq, options) {
                    sep = sep || "&";
                    eq = eq || "=";
                    var obj = {};
                    if (typeof qs2 !== "string" || qs2.length === 0) {
                      return obj;
                    }
                    var regexp = /\+/g;
                    qs2 = qs2.split(sep);
                    var maxKeys = 1e3;
                    if (options && typeof options.maxKeys === "number") {
                      maxKeys = options.maxKeys;
                    }
                    var len = qs2.length;
                    if (maxKeys > 0 && len > maxKeys) {
                      len = maxKeys;
                    }
                    for (var i = 0; i < len; ++i) {
                      var x = qs2[i].replace(regexp, "%20"), idx = x.indexOf(eq), kstr, vstr, k, v;
                      if (idx >= 0) {
                        kstr = x.substr(0, idx);
                        vstr = x.substr(idx + 1);
                      } else {
                        kstr = x;
                        vstr = "";
                      }
                      k = decodeURIComponent(kstr);
                      v = decodeURIComponent(vstr);
                      if (!hasOwnProperty(obj, k)) {
                        obj[k] = v;
                      } else if (isArray(obj[k])) {
                        obj[k].push(v);
                      } else {
                        obj[k] = [obj[k], v];
                      }
                    }
                    return obj;
                  };
                  var isArray = Array.isArray || function(xs) {
                    return Object.prototype.toString.call(xs) === "[object Array]";
                  };
                })
              ),
              /***/
              5052: (
                /***/
                ((module2) => {
                  "use strict";
                  var stringifyPrimitive = function(v) {
                    switch (typeof v) {
                      case "string":
                        return v;
                      case "boolean":
                        return v ? "true" : "false";
                      case "number":
                        return isFinite(v) ? v : "";
                      default:
                        return "";
                    }
                  };
                  module2.exports = function(obj, sep, eq, name) {
                    sep = sep || "&";
                    eq = eq || "=";
                    if (obj === null) {
                      obj = void 0;
                    }
                    if (typeof obj === "object") {
                      return map(objectKeys(obj), function(k) {
                        var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
                        if (isArray(obj[k])) {
                          return map(obj[k], function(v) {
                            return ks + encodeURIComponent(stringifyPrimitive(v));
                          }).join(sep);
                        } else {
                          return ks + encodeURIComponent(stringifyPrimitive(obj[k]));
                        }
                      }).join(sep);
                    }
                    if (!name) return "";
                    return encodeURIComponent(stringifyPrimitive(name)) + eq + encodeURIComponent(stringifyPrimitive(obj));
                  };
                  var isArray = Array.isArray || function(xs) {
                    return Object.prototype.toString.call(xs) === "[object Array]";
                  };
                  function map(xs, f) {
                    if (xs.map) return xs.map(f);
                    var res = [];
                    for (var i = 0; i < xs.length; i++) {
                      res.push(f(xs[i], i));
                    }
                    return res;
                  }
                  var objectKeys = Object.keys || function(obj) {
                    var res = [];
                    for (var key in obj) {
                      if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);
                    }
                    return res;
                  };
                })
              ),
              /***/
              6448: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  exports2.decode = exports2.parse = __webpack_require__2(1892);
                  exports2.encode = exports2.stringify = __webpack_require__2(5052);
                })
              ),
              /***/
              1968: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var now = __webpack_require__2(3440), root = typeof window === "undefined" ? __webpack_require__2.g : window, vendors = ["moz", "webkit"], suffix = "AnimationFrame", raf = root["request" + suffix], caf = root["cancel" + suffix] || root["cancelRequest" + suffix];
                  for (var i = 0; !raf && i < vendors.length; i++) {
                    raf = root[vendors[i] + "Request" + suffix];
                    caf = root[vendors[i] + "Cancel" + suffix] || root[vendors[i] + "CancelRequest" + suffix];
                  }
                  if (!raf || !caf) {
                    var last2 = 0, id = 0, queue = [], frameDuration = 1e3 / 60;
                    raf = function(callback) {
                      if (queue.length === 0) {
                        var _now = now(), next = Math.max(0, frameDuration - (_now - last2));
                        last2 = next + _now;
                        setTimeout(function() {
                          var cp = queue.slice(0);
                          queue.length = 0;
                          for (var i2 = 0; i2 < cp.length; i2++) {
                            if (!cp[i2].cancelled) {
                              try {
                                cp[i2].callback(last2);
                              } catch (e) {
                                setTimeout(function() {
                                  throw e;
                                }, 0);
                              }
                            }
                          }
                        }, Math.round(next));
                      }
                      queue.push({
                        handle: ++id,
                        callback,
                        cancelled: false
                      });
                      return id;
                    };
                    caf = function(handle) {
                      for (var i2 = 0; i2 < queue.length; i2++) {
                        if (queue[i2].handle === handle) {
                          queue[i2].cancelled = true;
                        }
                      }
                    };
                  }
                  module2.exports = function(fn) {
                    return raf.call(root, fn);
                  };
                  module2.exports.cancel = function() {
                    caf.apply(root, arguments);
                  };
                  module2.exports.polyfill = function(object) {
                    if (!object) {
                      object = root;
                    }
                    object.requestAnimationFrame = raf;
                    object.cancelAnimationFrame = caf;
                  };
                })
              ),
              /***/
              3440: (
                /***/
                (function(module2, __unused_webpack_exports, __webpack_require__2) {
                  var process = __webpack_require__2(9964);
                  (function() {
                    var getNanoSeconds, hrtime, loadTime, moduleLoadTime, nodeLoadTime, upTime;
                    if (typeof performance !== "undefined" && performance !== null && performance.now) {
                      module2.exports = function() {
                        return performance.now();
                      };
                    } else if (typeof process !== "undefined" && process !== null && process.hrtime) {
                      module2.exports = function() {
                        return (getNanoSeconds() - nodeLoadTime) / 1e6;
                      };
                      hrtime = process.hrtime;
                      getNanoSeconds = function() {
                        var hr;
                        hr = hrtime();
                        return hr[0] * 1e9 + hr[1];
                      };
                      moduleLoadTime = getNanoSeconds();
                      upTime = process.uptime() * 1e9;
                      nodeLoadTime = moduleLoadTime - upTime;
                    } else if (Date.now) {
                      module2.exports = function() {
                        return Date.now() - loadTime;
                      };
                      loadTime = Date.now();
                    } else {
                      module2.exports = function() {
                        return (/* @__PURE__ */ new Date()).getTime() - loadTime;
                      };
                      loadTime = (/* @__PURE__ */ new Date()).getTime();
                    }
                  }).call(this);
                })
              ),
              /***/
              7045: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  var aa = __webpack_require__2(7810), m = __webpack_require__2(5946), r = __webpack_require__2(2328);
                  function y(a) {
                    for (var b = "https://reactjs.org/docs/error-decoder.html?invariant=" + a, c = 1; c < arguments.length; c++) b += "&args[]=" + encodeURIComponent(arguments[c]);
                    return "Minified React error #" + a + "; visit " + b + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
                  }
                  if (!aa) throw Error(y(227));
                  var ba = /* @__PURE__ */ new Set(), ca = {};
                  function da(a, b) {
                    ea(a, b);
                    ea(a + "Capture", b);
                  }
                  function ea(a, b) {
                    ca[a] = b;
                    for (a = 0; a < b.length; a++) ba.add(b[a]);
                  }
                  var fa = !("undefined" === typeof window || "undefined" === typeof window.document || "undefined" === typeof window.document.createElement), ha = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/, ia = Object.prototype.hasOwnProperty, ja = {}, ka = {};
                  function la(a) {
                    if (ia.call(ka, a)) return true;
                    if (ia.call(ja, a)) return false;
                    if (ha.test(a)) return ka[a] = true;
                    ja[a] = true;
                    return false;
                  }
                  function ma(a, b, c, d) {
                    if (null !== c && 0 === c.type) return false;
                    switch (typeof b) {
                      case "function":
                      case "symbol":
                        return true;
                      case "boolean":
                        if (d) return false;
                        if (null !== c) return !c.acceptsBooleans;
                        a = a.toLowerCase().slice(0, 5);
                        return "data-" !== a && "aria-" !== a;
                      default:
                        return false;
                    }
                  }
                  function na(a, b, c, d) {
                    if (null === b || "undefined" === typeof b || ma(a, b, c, d)) return true;
                    if (d) return false;
                    if (null !== c) switch (c.type) {
                      case 3:
                        return !b;
                      case 4:
                        return false === b;
                      case 5:
                        return isNaN(b);
                      case 6:
                        return isNaN(b) || 1 > b;
                    }
                    return false;
                  }
                  function B(a, b, c, d, e, f, g) {
                    this.acceptsBooleans = 2 === b || 3 === b || 4 === b;
                    this.attributeName = d;
                    this.attributeNamespace = e;
                    this.mustUseProperty = c;
                    this.propertyName = a;
                    this.type = b;
                    this.sanitizeURL = f;
                    this.removeEmptyString = g;
                  }
                  var D = {};
                  "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a) {
                    D[a] = new B(a, 0, false, a, null, false, false);
                  });
                  [["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach(function(a) {
                    var b = a[0];
                    D[b] = new B(b, 1, false, a[1], null, false, false);
                  });
                  ["contentEditable", "draggable", "spellCheck", "value"].forEach(function(a) {
                    D[a] = new B(a, 2, false, a.toLowerCase(), null, false, false);
                  });
                  ["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach(function(a) {
                    D[a] = new B(a, 2, false, a, null, false, false);
                  });
                  "allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a) {
                    D[a] = new B(a, 3, false, a.toLowerCase(), null, false, false);
                  });
                  ["checked", "multiple", "muted", "selected"].forEach(function(a) {
                    D[a] = new B(a, 3, true, a, null, false, false);
                  });
                  ["capture", "download"].forEach(function(a) {
                    D[a] = new B(a, 4, false, a, null, false, false);
                  });
                  ["cols", "rows", "size", "span"].forEach(function(a) {
                    D[a] = new B(a, 6, false, a, null, false, false);
                  });
                  ["rowSpan", "start"].forEach(function(a) {
                    D[a] = new B(a, 5, false, a.toLowerCase(), null, false, false);
                  });
                  var oa = /[\-:]([a-z])/g;
                  function pa(a) {
                    return a[1].toUpperCase();
                  }
                  "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a) {
                    var b = a.replace(
                      oa,
                      pa
                    );
                    D[b] = new B(b, 1, false, a, null, false, false);
                  });
                  "xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a) {
                    var b = a.replace(oa, pa);
                    D[b] = new B(b, 1, false, a, "http://www.w3.org/1999/xlink", false, false);
                  });
                  ["xml:base", "xml:lang", "xml:space"].forEach(function(a) {
                    var b = a.replace(oa, pa);
                    D[b] = new B(b, 1, false, a, "http://www.w3.org/XML/1998/namespace", false, false);
                  });
                  ["tabIndex", "crossOrigin"].forEach(function(a) {
                    D[a] = new B(a, 1, false, a.toLowerCase(), null, false, false);
                  });
                  D.xlinkHref = new B("xlinkHref", 1, false, "xlink:href", "http://www.w3.org/1999/xlink", true, false);
                  ["src", "href", "action", "formAction"].forEach(function(a) {
                    D[a] = new B(a, 1, false, a.toLowerCase(), null, true, true);
                  });
                  function qa(a, b, c, d) {
                    var e = D.hasOwnProperty(b) ? D[b] : null;
                    var f = null !== e ? 0 === e.type : d ? false : !(2 < b.length) || "o" !== b[0] && "O" !== b[0] || "n" !== b[1] && "N" !== b[1] ? false : true;
                    f || (na(b, c, e, d) && (c = null), d || null === e ? la(b) && (null === c ? a.removeAttribute(b) : a.setAttribute(b, "" + c)) : e.mustUseProperty ? a[e.propertyName] = null === c ? 3 === e.type ? false : "" : c : (b = e.attributeName, d = e.attributeNamespace, null === c ? a.removeAttribute(b) : (e = e.type, c = 3 === e || 4 === e && true === c ? "" : "" + c, d ? a.setAttributeNS(d, b, c) : a.setAttribute(b, c))));
                  }
                  var ra = aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, sa = 60103, ta = 60106, ua = 60107, wa = 60108, xa = 60114, ya = 60109, za = 60110, Aa = 60112, Ba = 60113, Ca = 60120, Da = 60115, Ea = 60116, Fa = 60121, Ga = 60128, Ha = 60129, Ia = 60130, Ja = 60131;
                  if ("function" === typeof Symbol && Symbol.for) {
                    var E = Symbol.for;
                    sa = E("react.element");
                    ta = E("react.portal");
                    ua = E("react.fragment");
                    wa = E("react.strict_mode");
                    xa = E("react.profiler");
                    ya = E("react.provider");
                    za = E("react.context");
                    Aa = E("react.forward_ref");
                    Ba = E("react.suspense");
                    Ca = E("react.suspense_list");
                    Da = E("react.memo");
                    Ea = E("react.lazy");
                    Fa = E("react.block");
                    E("react.scope");
                    Ga = E("react.opaque.id");
                    Ha = E("react.debug_trace_mode");
                    Ia = E("react.offscreen");
                    Ja = E("react.legacy_hidden");
                  }
                  var Ka = "function" === typeof Symbol && Symbol.iterator;
                  function La(a) {
                    if (null === a || "object" !== typeof a) return null;
                    a = Ka && a[Ka] || a["@@iterator"];
                    return "function" === typeof a ? a : null;
                  }
                  var Ma;
                  function Na(a) {
                    if (void 0 === Ma) try {
                      throw Error();
                    } catch (c) {
                      var b = c.stack.trim().match(/\n( *(at )?)/);
                      Ma = b && b[1] || "";
                    }
                    return "\n" + Ma + a;
                  }
                  var Oa = false;
                  function Pa(a, b) {
                    if (!a || Oa) return "";
                    Oa = true;
                    var c = Error.prepareStackTrace;
                    Error.prepareStackTrace = void 0;
                    try {
                      if (b) if (b = function() {
                        throw Error();
                      }, Object.defineProperty(b.prototype, "props", { set: function() {
                        throw Error();
                      } }), "object" === typeof Reflect && Reflect.construct) {
                        try {
                          Reflect.construct(b, []);
                        } catch (k) {
                          var d = k;
                        }
                        Reflect.construct(a, [], b);
                      } else {
                        try {
                          b.call();
                        } catch (k) {
                          d = k;
                        }
                        a.call(b.prototype);
                      }
                      else {
                        try {
                          throw Error();
                        } catch (k) {
                          d = k;
                        }
                        a();
                      }
                    } catch (k) {
                      if (k && d && "string" === typeof k.stack) {
                        for (var e = k.stack.split("\n"), f = d.stack.split("\n"), g = e.length - 1, h = f.length - 1; 1 <= g && 0 <= h && e[g] !== f[h]; ) h--;
                        for (; 1 <= g && 0 <= h; g--, h--) if (e[g] !== f[h]) {
                          if (1 !== g || 1 !== h) {
                            do
                              if (g--, h--, 0 > h || e[g] !== f[h]) return "\n" + e[g].replace(" at new ", " at ");
                            while (1 <= g && 0 <= h);
                          }
                          break;
                        }
                      }
                    } finally {
                      Oa = false, Error.prepareStackTrace = c;
                    }
                    return (a = a ? a.displayName || a.name : "") ? Na(a) : "";
                  }
                  function Qa(a) {
                    switch (a.tag) {
                      case 5:
                        return Na(a.type);
                      case 16:
                        return Na("Lazy");
                      case 13:
                        return Na("Suspense");
                      case 19:
                        return Na("SuspenseList");
                      case 0:
                      case 2:
                      case 15:
                        return a = Pa(a.type, false), a;
                      case 11:
                        return a = Pa(a.type.render, false), a;
                      case 22:
                        return a = Pa(a.type._render, false), a;
                      case 1:
                        return a = Pa(a.type, true), a;
                      default:
                        return "";
                    }
                  }
                  function Ra(a) {
                    if (null == a) return null;
                    if ("function" === typeof a) return a.displayName || a.name || null;
                    if ("string" === typeof a) return a;
                    switch (a) {
                      case ua:
                        return "Fragment";
                      case ta:
                        return "Portal";
                      case xa:
                        return "Profiler";
                      case wa:
                        return "StrictMode";
                      case Ba:
                        return "Suspense";
                      case Ca:
                        return "SuspenseList";
                    }
                    if ("object" === typeof a) switch (a.$$typeof) {
                      case za:
                        return (a.displayName || "Context") + ".Consumer";
                      case ya:
                        return (a._context.displayName || "Context") + ".Provider";
                      case Aa:
                        var b = a.render;
                        b = b.displayName || b.name || "";
                        return a.displayName || ("" !== b ? "ForwardRef(" + b + ")" : "ForwardRef");
                      case Da:
                        return Ra(a.type);
                      case Fa:
                        return Ra(a._render);
                      case Ea:
                        b = a._payload;
                        a = a._init;
                        try {
                          return Ra(a(b));
                        } catch (c) {
                        }
                    }
                    return null;
                  }
                  function Sa(a) {
                    switch (typeof a) {
                      case "boolean":
                      case "number":
                      case "object":
                      case "string":
                      case "undefined":
                        return a;
                      default:
                        return "";
                    }
                  }
                  function Ta(a) {
                    var b = a.type;
                    return (a = a.nodeName) && "input" === a.toLowerCase() && ("checkbox" === b || "radio" === b);
                  }
                  function Ua(a) {
                    var b = Ta(a) ? "checked" : "value", c = Object.getOwnPropertyDescriptor(a.constructor.prototype, b), d = "" + a[b];
                    if (!a.hasOwnProperty(b) && "undefined" !== typeof c && "function" === typeof c.get && "function" === typeof c.set) {
                      var e = c.get, f = c.set;
                      Object.defineProperty(a, b, { configurable: true, get: function() {
                        return e.call(this);
                      }, set: function(a2) {
                        d = "" + a2;
                        f.call(this, a2);
                      } });
                      Object.defineProperty(a, b, { enumerable: c.enumerable });
                      return { getValue: function() {
                        return d;
                      }, setValue: function(a2) {
                        d = "" + a2;
                      }, stopTracking: function() {
                        a._valueTracker = null;
                        delete a[b];
                      } };
                    }
                  }
                  function Va(a) {
                    a._valueTracker || (a._valueTracker = Ua(a));
                  }
                  function Wa(a) {
                    if (!a) return false;
                    var b = a._valueTracker;
                    if (!b) return true;
                    var c = b.getValue();
                    var d = "";
                    a && (d = Ta(a) ? a.checked ? "true" : "false" : a.value);
                    a = d;
                    return a !== c ? (b.setValue(a), true) : false;
                  }
                  function Xa(a) {
                    a = a || ("undefined" !== typeof document ? document : void 0);
                    if ("undefined" === typeof a) return null;
                    try {
                      return a.activeElement || a.body;
                    } catch (b) {
                      return a.body;
                    }
                  }
                  function Ya(a, b) {
                    var c = b.checked;
                    return m({}, b, { defaultChecked: void 0, defaultValue: void 0, value: void 0, checked: null != c ? c : a._wrapperState.initialChecked });
                  }
                  function Za(a, b) {
                    var c = null == b.defaultValue ? "" : b.defaultValue, d = null != b.checked ? b.checked : b.defaultChecked;
                    c = Sa(null != b.value ? b.value : c);
                    a._wrapperState = { initialChecked: d, initialValue: c, controlled: "checkbox" === b.type || "radio" === b.type ? null != b.checked : null != b.value };
                  }
                  function $a(a, b) {
                    b = b.checked;
                    null != b && qa(a, "checked", b, false);
                  }
                  function ab(a, b) {
                    $a(a, b);
                    var c = Sa(b.value), d = b.type;
                    if (null != c) if ("number" === d) {
                      if (0 === c && "" === a.value || a.value != c) a.value = "" + c;
                    } else a.value !== "" + c && (a.value = "" + c);
                    else if ("submit" === d || "reset" === d) {
                      a.removeAttribute("value");
                      return;
                    }
                    b.hasOwnProperty("value") ? bb(a, b.type, c) : b.hasOwnProperty("defaultValue") && bb(a, b.type, Sa(b.defaultValue));
                    null == b.checked && null != b.defaultChecked && (a.defaultChecked = !!b.defaultChecked);
                  }
                  function cb(a, b, c) {
                    if (b.hasOwnProperty("value") || b.hasOwnProperty("defaultValue")) {
                      var d = b.type;
                      if (!("submit" !== d && "reset" !== d || void 0 !== b.value && null !== b.value)) return;
                      b = "" + a._wrapperState.initialValue;
                      c || b === a.value || (a.value = b);
                      a.defaultValue = b;
                    }
                    c = a.name;
                    "" !== c && (a.name = "");
                    a.defaultChecked = !!a._wrapperState.initialChecked;
                    "" !== c && (a.name = c);
                  }
                  function bb(a, b, c) {
                    if ("number" !== b || Xa(a.ownerDocument) !== a) null == c ? a.defaultValue = "" + a._wrapperState.initialValue : a.defaultValue !== "" + c && (a.defaultValue = "" + c);
                  }
                  function db(a) {
                    var b = "";
                    aa.Children.forEach(a, function(a2) {
                      null != a2 && (b += a2);
                    });
                    return b;
                  }
                  function eb(a, b) {
                    a = m({ children: void 0 }, b);
                    if (b = db(b.children)) a.children = b;
                    return a;
                  }
                  function fb(a, b, c, d) {
                    a = a.options;
                    if (b) {
                      b = {};
                      for (var e = 0; e < c.length; e++) b["$" + c[e]] = true;
                      for (c = 0; c < a.length; c++) e = b.hasOwnProperty("$" + a[c].value), a[c].selected !== e && (a[c].selected = e), e && d && (a[c].defaultSelected = true);
                    } else {
                      c = "" + Sa(c);
                      b = null;
                      for (e = 0; e < a.length; e++) {
                        if (a[e].value === c) {
                          a[e].selected = true;
                          d && (a[e].defaultSelected = true);
                          return;
                        }
                        null !== b || a[e].disabled || (b = a[e]);
                      }
                      null !== b && (b.selected = true);
                    }
                  }
                  function gb(a, b) {
                    if (null != b.dangerouslySetInnerHTML) throw Error(y(91));
                    return m({}, b, { value: void 0, defaultValue: void 0, children: "" + a._wrapperState.initialValue });
                  }
                  function hb(a, b) {
                    var c = b.value;
                    if (null == c) {
                      c = b.children;
                      b = b.defaultValue;
                      if (null != c) {
                        if (null != b) throw Error(y(92));
                        if (Array.isArray(c)) {
                          if (!(1 >= c.length)) throw Error(y(93));
                          c = c[0];
                        }
                        b = c;
                      }
                      null == b && (b = "");
                      c = b;
                    }
                    a._wrapperState = { initialValue: Sa(c) };
                  }
                  function ib(a, b) {
                    var c = Sa(b.value), d = Sa(b.defaultValue);
                    null != c && (c = "" + c, c !== a.value && (a.value = c), null == b.defaultValue && a.defaultValue !== c && (a.defaultValue = c));
                    null != d && (a.defaultValue = "" + d);
                  }
                  function jb(a) {
                    var b = a.textContent;
                    b === a._wrapperState.initialValue && "" !== b && null !== b && (a.value = b);
                  }
                  var kb = { html: "http://www.w3.org/1999/xhtml", mathml: "http://www.w3.org/1998/Math/MathML", svg: "http://www.w3.org/2000/svg" };
                  function lb(a) {
                    switch (a) {
                      case "svg":
                        return "http://www.w3.org/2000/svg";
                      case "math":
                        return "http://www.w3.org/1998/Math/MathML";
                      default:
                        return "http://www.w3.org/1999/xhtml";
                    }
                  }
                  function mb(a, b) {
                    return null == a || "http://www.w3.org/1999/xhtml" === a ? lb(b) : "http://www.w3.org/2000/svg" === a && "foreignObject" === b ? "http://www.w3.org/1999/xhtml" : a;
                  }
                  var nb, ob = (function(a) {
                    return "undefined" !== typeof MSApp && MSApp.execUnsafeLocalFunction ? function(b, c, d, e) {
                      MSApp.execUnsafeLocalFunction(function() {
                        return a(b, c, d, e);
                      });
                    } : a;
                  })(function(a, b) {
                    if (a.namespaceURI !== kb.svg || "innerHTML" in a) a.innerHTML = b;
                    else {
                      nb = nb || document.createElement("div");
                      nb.innerHTML = "<svg>" + b.valueOf().toString() + "</svg>";
                      for (b = nb.firstChild; a.firstChild; ) a.removeChild(a.firstChild);
                      for (; b.firstChild; ) a.appendChild(b.firstChild);
                    }
                  });
                  function pb(a, b) {
                    if (b) {
                      var c = a.firstChild;
                      if (c && c === a.lastChild && 3 === c.nodeType) {
                        c.nodeValue = b;
                        return;
                      }
                    }
                    a.textContent = b;
                  }
                  var qb = {
                    animationIterationCount: true,
                    borderImageOutset: true,
                    borderImageSlice: true,
                    borderImageWidth: true,
                    boxFlex: true,
                    boxFlexGroup: true,
                    boxOrdinalGroup: true,
                    columnCount: true,
                    columns: true,
                    flex: true,
                    flexGrow: true,
                    flexPositive: true,
                    flexShrink: true,
                    flexNegative: true,
                    flexOrder: true,
                    gridArea: true,
                    gridRow: true,
                    gridRowEnd: true,
                    gridRowSpan: true,
                    gridRowStart: true,
                    gridColumn: true,
                    gridColumnEnd: true,
                    gridColumnSpan: true,
                    gridColumnStart: true,
                    fontWeight: true,
                    lineClamp: true,
                    lineHeight: true,
                    opacity: true,
                    order: true,
                    orphans: true,
                    tabSize: true,
                    widows: true,
                    zIndex: true,
                    zoom: true,
                    fillOpacity: true,
                    floodOpacity: true,
                    stopOpacity: true,
                    strokeDasharray: true,
                    strokeDashoffset: true,
                    strokeMiterlimit: true,
                    strokeOpacity: true,
                    strokeWidth: true
                  }, rb = ["Webkit", "ms", "Moz", "O"];
                  Object.keys(qb).forEach(function(a) {
                    rb.forEach(function(b) {
                      b = b + a.charAt(0).toUpperCase() + a.substring(1);
                      qb[b] = qb[a];
                    });
                  });
                  function sb(a, b, c) {
                    return null == b || "boolean" === typeof b || "" === b ? "" : c || "number" !== typeof b || 0 === b || qb.hasOwnProperty(a) && qb[a] ? ("" + b).trim() : b + "px";
                  }
                  function tb(a, b) {
                    a = a.style;
                    for (var c in b) if (b.hasOwnProperty(c)) {
                      var d = 0 === c.indexOf("--"), e = sb(c, b[c], d);
                      "float" === c && (c = "cssFloat");
                      d ? a.setProperty(c, e) : a[c] = e;
                    }
                  }
                  var ub = m({ menuitem: true }, { area: true, base: true, br: true, col: true, embed: true, hr: true, img: true, input: true, keygen: true, link: true, meta: true, param: true, source: true, track: true, wbr: true });
                  function vb(a, b) {
                    if (b) {
                      if (ub[a] && (null != b.children || null != b.dangerouslySetInnerHTML)) throw Error(y(137, a));
                      if (null != b.dangerouslySetInnerHTML) {
                        if (null != b.children) throw Error(y(60));
                        if (!("object" === typeof b.dangerouslySetInnerHTML && "__html" in b.dangerouslySetInnerHTML)) throw Error(y(61));
                      }
                      if (null != b.style && "object" !== typeof b.style) throw Error(y(62));
                    }
                  }
                  function wb(a, b) {
                    if (-1 === a.indexOf("-")) return "string" === typeof b.is;
                    switch (a) {
                      case "annotation-xml":
                      case "color-profile":
                      case "font-face":
                      case "font-face-src":
                      case "font-face-uri":
                      case "font-face-format":
                      case "font-face-name":
                      case "missing-glyph":
                        return false;
                      default:
                        return true;
                    }
                  }
                  function xb(a) {
                    a = a.target || a.srcElement || window;
                    a.correspondingUseElement && (a = a.correspondingUseElement);
                    return 3 === a.nodeType ? a.parentNode : a;
                  }
                  var yb = null, zb = null, Ab = null;
                  function Bb(a) {
                    if (a = Cb(a)) {
                      if ("function" !== typeof yb) throw Error(y(280));
                      var b = a.stateNode;
                      b && (b = Db(b), yb(a.stateNode, a.type, b));
                    }
                  }
                  function Eb(a) {
                    zb ? Ab ? Ab.push(a) : Ab = [a] : zb = a;
                  }
                  function Fb() {
                    if (zb) {
                      var a = zb, b = Ab;
                      Ab = zb = null;
                      Bb(a);
                      if (b) for (a = 0; a < b.length; a++) Bb(b[a]);
                    }
                  }
                  function Gb(a, b) {
                    return a(b);
                  }
                  function Hb(a, b, c, d, e) {
                    return a(b, c, d, e);
                  }
                  function Ib() {
                  }
                  var Jb = Gb, Kb = false, Lb = false;
                  function Mb() {
                    if (null !== zb || null !== Ab) Ib(), Fb();
                  }
                  function Nb(a, b, c) {
                    if (Lb) return a(b, c);
                    Lb = true;
                    try {
                      return Jb(a, b, c);
                    } finally {
                      Lb = false, Mb();
                    }
                  }
                  function Ob(a, b) {
                    var c = a.stateNode;
                    if (null === c) return null;
                    var d = Db(c);
                    if (null === d) return null;
                    c = d[b];
                    a: switch (b) {
                      case "onClick":
                      case "onClickCapture":
                      case "onDoubleClick":
                      case "onDoubleClickCapture":
                      case "onMouseDown":
                      case "onMouseDownCapture":
                      case "onMouseMove":
                      case "onMouseMoveCapture":
                      case "onMouseUp":
                      case "onMouseUpCapture":
                      case "onMouseEnter":
                        (d = !d.disabled) || (a = a.type, d = !("button" === a || "input" === a || "select" === a || "textarea" === a));
                        a = !d;
                        break a;
                      default:
                        a = false;
                    }
                    if (a) return null;
                    if (c && "function" !== typeof c) throw Error(y(231, b, typeof c));
                    return c;
                  }
                  var Pb = false;
                  if (fa) try {
                    var Qb = {};
                    Object.defineProperty(Qb, "passive", { get: function() {
                      Pb = true;
                    } });
                    window.addEventListener("test", Qb, Qb);
                    window.removeEventListener("test", Qb, Qb);
                  } catch (a) {
                    Pb = false;
                  }
                  function Rb(a, b, c, d, e, f, g, h, k) {
                    var l = Array.prototype.slice.call(arguments, 3);
                    try {
                      b.apply(c, l);
                    } catch (n) {
                      this.onError(n);
                    }
                  }
                  var Sb = false, Tb = null, Ub = false, Vb = null, Wb = { onError: function(a) {
                    Sb = true;
                    Tb = a;
                  } };
                  function Xb(a, b, c, d, e, f, g, h, k) {
                    Sb = false;
                    Tb = null;
                    Rb.apply(Wb, arguments);
                  }
                  function Yb(a, b, c, d, e, f, g, h, k) {
                    Xb.apply(this, arguments);
                    if (Sb) {
                      if (Sb) {
                        var l = Tb;
                        Sb = false;
                        Tb = null;
                      } else throw Error(y(198));
                      Ub || (Ub = true, Vb = l);
                    }
                  }
                  function Zb(a) {
                    var b = a, c = a;
                    if (a.alternate) for (; b.return; ) b = b.return;
                    else {
                      a = b;
                      do
                        b = a, 0 !== (b.flags & 1026) && (c = b.return), a = b.return;
                      while (a);
                    }
                    return 3 === b.tag ? c : null;
                  }
                  function $b(a) {
                    if (13 === a.tag) {
                      var b = a.memoizedState;
                      null === b && (a = a.alternate, null !== a && (b = a.memoizedState));
                      if (null !== b) return b.dehydrated;
                    }
                    return null;
                  }
                  function ac(a) {
                    if (Zb(a) !== a) throw Error(y(188));
                  }
                  function bc(a) {
                    var b = a.alternate;
                    if (!b) {
                      b = Zb(a);
                      if (null === b) throw Error(y(188));
                      return b !== a ? null : a;
                    }
                    for (var c = a, d = b; ; ) {
                      var e = c.return;
                      if (null === e) break;
                      var f = e.alternate;
                      if (null === f) {
                        d = e.return;
                        if (null !== d) {
                          c = d;
                          continue;
                        }
                        break;
                      }
                      if (e.child === f.child) {
                        for (f = e.child; f; ) {
                          if (f === c) return ac(e), a;
                          if (f === d) return ac(e), b;
                          f = f.sibling;
                        }
                        throw Error(y(188));
                      }
                      if (c.return !== d.return) c = e, d = f;
                      else {
                        for (var g = false, h = e.child; h; ) {
                          if (h === c) {
                            g = true;
                            c = e;
                            d = f;
                            break;
                          }
                          if (h === d) {
                            g = true;
                            d = e;
                            c = f;
                            break;
                          }
                          h = h.sibling;
                        }
                        if (!g) {
                          for (h = f.child; h; ) {
                            if (h === c) {
                              g = true;
                              c = f;
                              d = e;
                              break;
                            }
                            if (h === d) {
                              g = true;
                              d = f;
                              c = e;
                              break;
                            }
                            h = h.sibling;
                          }
                          if (!g) throw Error(y(189));
                        }
                      }
                      if (c.alternate !== d) throw Error(y(190));
                    }
                    if (3 !== c.tag) throw Error(y(188));
                    return c.stateNode.current === c ? a : b;
                  }
                  function cc(a) {
                    a = bc(a);
                    if (!a) return null;
                    for (var b = a; ; ) {
                      if (5 === b.tag || 6 === b.tag) return b;
                      if (b.child) b.child.return = b, b = b.child;
                      else {
                        if (b === a) break;
                        for (; !b.sibling; ) {
                          if (!b.return || b.return === a) return null;
                          b = b.return;
                        }
                        b.sibling.return = b.return;
                        b = b.sibling;
                      }
                    }
                    return null;
                  }
                  function dc(a, b) {
                    for (var c = a.alternate; null !== b; ) {
                      if (b === a || b === c) return true;
                      b = b.return;
                    }
                    return false;
                  }
                  var ec, fc, gc, hc, ic = false, jc = [], kc = null, lc = null, mc = null, nc = /* @__PURE__ */ new Map(), oc = /* @__PURE__ */ new Map(), pc = [], qc = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");
                  function rc(a, b, c, d, e) {
                    return { blockedOn: a, domEventName: b, eventSystemFlags: c | 16, nativeEvent: e, targetContainers: [d] };
                  }
                  function sc(a, b) {
                    switch (a) {
                      case "focusin":
                      case "focusout":
                        kc = null;
                        break;
                      case "dragenter":
                      case "dragleave":
                        lc = null;
                        break;
                      case "mouseover":
                      case "mouseout":
                        mc = null;
                        break;
                      case "pointerover":
                      case "pointerout":
                        nc.delete(b.pointerId);
                        break;
                      case "gotpointercapture":
                      case "lostpointercapture":
                        oc.delete(b.pointerId);
                    }
                  }
                  function tc(a, b, c, d, e, f) {
                    if (null === a || a.nativeEvent !== f) return a = rc(b, c, d, e, f), null !== b && (b = Cb(b), null !== b && fc(b)), a;
                    a.eventSystemFlags |= d;
                    b = a.targetContainers;
                    null !== e && -1 === b.indexOf(e) && b.push(e);
                    return a;
                  }
                  function uc(a, b, c, d, e) {
                    switch (b) {
                      case "focusin":
                        return kc = tc(kc, a, b, c, d, e), true;
                      case "dragenter":
                        return lc = tc(lc, a, b, c, d, e), true;
                      case "mouseover":
                        return mc = tc(mc, a, b, c, d, e), true;
                      case "pointerover":
                        var f = e.pointerId;
                        nc.set(f, tc(nc.get(f) || null, a, b, c, d, e));
                        return true;
                      case "gotpointercapture":
                        return f = e.pointerId, oc.set(f, tc(oc.get(f) || null, a, b, c, d, e)), true;
                    }
                    return false;
                  }
                  function vc(a) {
                    var b = wc(a.target);
                    if (null !== b) {
                      var c = Zb(b);
                      if (null !== c) {
                        if (b = c.tag, 13 === b) {
                          if (b = $b(c), null !== b) {
                            a.blockedOn = b;
                            hc(a.lanePriority, function() {
                              r.unstable_runWithPriority(a.priority, function() {
                                gc(c);
                              });
                            });
                            return;
                          }
                        } else if (3 === b && c.stateNode.hydrate) {
                          a.blockedOn = 3 === c.tag ? c.stateNode.containerInfo : null;
                          return;
                        }
                      }
                    }
                    a.blockedOn = null;
                  }
                  function xc(a) {
                    if (null !== a.blockedOn) return false;
                    for (var b = a.targetContainers; 0 < b.length; ) {
                      var c = yc(a.domEventName, a.eventSystemFlags, b[0], a.nativeEvent);
                      if (null !== c) return b = Cb(c), null !== b && fc(b), a.blockedOn = c, false;
                      b.shift();
                    }
                    return true;
                  }
                  function zc(a, b, c) {
                    xc(a) && c.delete(b);
                  }
                  function Ac() {
                    for (ic = false; 0 < jc.length; ) {
                      var a = jc[0];
                      if (null !== a.blockedOn) {
                        a = Cb(a.blockedOn);
                        null !== a && ec(a);
                        break;
                      }
                      for (var b = a.targetContainers; 0 < b.length; ) {
                        var c = yc(a.domEventName, a.eventSystemFlags, b[0], a.nativeEvent);
                        if (null !== c) {
                          a.blockedOn = c;
                          break;
                        }
                        b.shift();
                      }
                      null === a.blockedOn && jc.shift();
                    }
                    null !== kc && xc(kc) && (kc = null);
                    null !== lc && xc(lc) && (lc = null);
                    null !== mc && xc(mc) && (mc = null);
                    nc.forEach(zc);
                    oc.forEach(zc);
                  }
                  function Bc(a, b) {
                    a.blockedOn === b && (a.blockedOn = null, ic || (ic = true, r.unstable_scheduleCallback(r.unstable_NormalPriority, Ac)));
                  }
                  function Cc(a) {
                    function b(b2) {
                      return Bc(b2, a);
                    }
                    if (0 < jc.length) {
                      Bc(jc[0], a);
                      for (var c = 1; c < jc.length; c++) {
                        var d = jc[c];
                        d.blockedOn === a && (d.blockedOn = null);
                      }
                    }
                    null !== kc && Bc(kc, a);
                    null !== lc && Bc(lc, a);
                    null !== mc && Bc(mc, a);
                    nc.forEach(b);
                    oc.forEach(b);
                    for (c = 0; c < pc.length; c++) d = pc[c], d.blockedOn === a && (d.blockedOn = null);
                    for (; 0 < pc.length && (c = pc[0], null === c.blockedOn); ) vc(c), null === c.blockedOn && pc.shift();
                  }
                  function Dc(a, b) {
                    var c = {};
                    c[a.toLowerCase()] = b.toLowerCase();
                    c["Webkit" + a] = "webkit" + b;
                    c["Moz" + a] = "moz" + b;
                    return c;
                  }
                  var Ec = { animationend: Dc("Animation", "AnimationEnd"), animationiteration: Dc("Animation", "AnimationIteration"), animationstart: Dc("Animation", "AnimationStart"), transitionend: Dc("Transition", "TransitionEnd") }, Fc = {}, Gc = {};
                  fa && (Gc = document.createElement("div").style, "AnimationEvent" in window || (delete Ec.animationend.animation, delete Ec.animationiteration.animation, delete Ec.animationstart.animation), "TransitionEvent" in window || delete Ec.transitionend.transition);
                  function Hc(a) {
                    if (Fc[a]) return Fc[a];
                    if (!Ec[a]) return a;
                    var b = Ec[a], c;
                    for (c in b) if (b.hasOwnProperty(c) && c in Gc) return Fc[a] = b[c];
                    return a;
                  }
                  var Ic = Hc("animationend"), Jc = Hc("animationiteration"), Kc = Hc("animationstart"), Lc = Hc("transitionend"), Mc = /* @__PURE__ */ new Map(), Nc = /* @__PURE__ */ new Map(), Oc = [
                    "abort",
                    "abort",
                    Ic,
                    "animationEnd",
                    Jc,
                    "animationIteration",
                    Kc,
                    "animationStart",
                    "canplay",
                    "canPlay",
                    "canplaythrough",
                    "canPlayThrough",
                    "durationchange",
                    "durationChange",
                    "emptied",
                    "emptied",
                    "encrypted",
                    "encrypted",
                    "ended",
                    "ended",
                    "error",
                    "error",
                    "gotpointercapture",
                    "gotPointerCapture",
                    "load",
                    "load",
                    "loadeddata",
                    "loadedData",
                    "loadedmetadata",
                    "loadedMetadata",
                    "loadstart",
                    "loadStart",
                    "lostpointercapture",
                    "lostPointerCapture",
                    "playing",
                    "playing",
                    "progress",
                    "progress",
                    "seeking",
                    "seeking",
                    "stalled",
                    "stalled",
                    "suspend",
                    "suspend",
                    "timeupdate",
                    "timeUpdate",
                    Lc,
                    "transitionEnd",
                    "waiting",
                    "waiting"
                  ];
                  function Pc(a, b) {
                    for (var c = 0; c < a.length; c += 2) {
                      var d = a[c], e = a[c + 1];
                      e = "on" + (e[0].toUpperCase() + e.slice(1));
                      Nc.set(d, b);
                      Mc.set(d, e);
                      da(e, [d]);
                    }
                  }
                  var Qc = r.unstable_now;
                  Qc();
                  var F = 8;
                  function Rc(a) {
                    if (0 !== (1 & a)) return F = 15, 1;
                    if (0 !== (2 & a)) return F = 14, 2;
                    if (0 !== (4 & a)) return F = 13, 4;
                    var b = 24 & a;
                    if (0 !== b) return F = 12, b;
                    if (0 !== (a & 32)) return F = 11, 32;
                    b = 192 & a;
                    if (0 !== b) return F = 10, b;
                    if (0 !== (a & 256)) return F = 9, 256;
                    b = 3584 & a;
                    if (0 !== b) return F = 8, b;
                    if (0 !== (a & 4096)) return F = 7, 4096;
                    b = 4186112 & a;
                    if (0 !== b) return F = 6, b;
                    b = 62914560 & a;
                    if (0 !== b) return F = 5, b;
                    if (a & 67108864) return F = 4, 67108864;
                    if (0 !== (a & 134217728)) return F = 3, 134217728;
                    b = 805306368 & a;
                    if (0 !== b) return F = 2, b;
                    if (0 !== (1073741824 & a)) return F = 1, 1073741824;
                    F = 8;
                    return a;
                  }
                  function Sc(a) {
                    switch (a) {
                      case 99:
                        return 15;
                      case 98:
                        return 10;
                      case 97:
                      case 96:
                        return 8;
                      case 95:
                        return 2;
                      default:
                        return 0;
                    }
                  }
                  function Tc(a) {
                    switch (a) {
                      case 15:
                      case 14:
                        return 99;
                      case 13:
                      case 12:
                      case 11:
                      case 10:
                        return 98;
                      case 9:
                      case 8:
                      case 7:
                      case 6:
                      case 4:
                      case 5:
                        return 97;
                      case 3:
                      case 2:
                      case 1:
                        return 95;
                      case 0:
                        return 90;
                      default:
                        throw Error(y(358, a));
                    }
                  }
                  function Uc(a, b) {
                    var c = a.pendingLanes;
                    if (0 === c) return F = 0;
                    var d = 0, e = 0, f = a.expiredLanes, g = a.suspendedLanes, h = a.pingedLanes;
                    if (0 !== f) d = f, e = F = 15;
                    else if (f = c & 134217727, 0 !== f) {
                      var k = f & ~g;
                      0 !== k ? (d = Rc(k), e = F) : (h &= f, 0 !== h && (d = Rc(h), e = F));
                    } else f = c & ~g, 0 !== f ? (d = Rc(f), e = F) : 0 !== h && (d = Rc(h), e = F);
                    if (0 === d) return 0;
                    d = 31 - Vc(d);
                    d = c & ((0 > d ? 0 : 1 << d) << 1) - 1;
                    if (0 !== b && b !== d && 0 === (b & g)) {
                      Rc(b);
                      if (e <= F) return b;
                      F = e;
                    }
                    b = a.entangledLanes;
                    if (0 !== b) for (a = a.entanglements, b &= d; 0 < b; ) c = 31 - Vc(b), e = 1 << c, d |= a[c], b &= ~e;
                    return d;
                  }
                  function Wc(a) {
                    a = a.pendingLanes & -1073741825;
                    return 0 !== a ? a : a & 1073741824 ? 1073741824 : 0;
                  }
                  function Xc(a, b) {
                    switch (a) {
                      case 15:
                        return 1;
                      case 14:
                        return 2;
                      case 12:
                        return a = Yc(24 & ~b), 0 === a ? Xc(10, b) : a;
                      case 10:
                        return a = Yc(192 & ~b), 0 === a ? Xc(8, b) : a;
                      case 8:
                        return a = Yc(3584 & ~b), 0 === a && (a = Yc(4186112 & ~b), 0 === a && (a = 512)), a;
                      case 2:
                        return b = Yc(805306368 & ~b), 0 === b && (b = 268435456), b;
                    }
                    throw Error(y(358, a));
                  }
                  function Yc(a) {
                    return a & -a;
                  }
                  function Zc(a) {
                    for (var b = [], c = 0; 31 > c; c++) b.push(a);
                    return b;
                  }
                  function $c(a, b, c) {
                    a.pendingLanes |= b;
                    var d = b - 1;
                    a.suspendedLanes &= d;
                    a.pingedLanes &= d;
                    a = a.eventTimes;
                    b = 31 - Vc(b);
                    a[b] = c;
                  }
                  var Vc = Math.clz32 ? Math.clz32 : ad, bd = Math.log, cd = Math.LN2;
                  function ad(a) {
                    return 0 === a ? 32 : 31 - (bd(a) / cd | 0) | 0;
                  }
                  var dd = r.unstable_UserBlockingPriority, ed = r.unstable_runWithPriority, fd = true;
                  function gd(a, b, c, d) {
                    Kb || Ib();
                    var e = hd, f = Kb;
                    Kb = true;
                    try {
                      Hb(e, a, b, c, d);
                    } finally {
                      (Kb = f) || Mb();
                    }
                  }
                  function id(a, b, c, d) {
                    ed(dd, hd.bind(null, a, b, c, d));
                  }
                  function hd(a, b, c, d) {
                    if (fd) {
                      var e;
                      if ((e = 0 === (b & 4)) && 0 < jc.length && -1 < qc.indexOf(a)) a = rc(null, a, b, c, d), jc.push(a);
                      else {
                        var f = yc(a, b, c, d);
                        if (null === f) e && sc(a, d);
                        else {
                          if (e) {
                            if (-1 < qc.indexOf(a)) {
                              a = rc(f, a, b, c, d);
                              jc.push(a);
                              return;
                            }
                            if (uc(f, a, b, c, d)) return;
                            sc(a, d);
                          }
                          jd(a, b, d, null, c);
                        }
                      }
                    }
                  }
                  function yc(a, b, c, d) {
                    var e = xb(d);
                    e = wc(e);
                    if (null !== e) {
                      var f = Zb(e);
                      if (null === f) e = null;
                      else {
                        var g = f.tag;
                        if (13 === g) {
                          e = $b(f);
                          if (null !== e) return e;
                          e = null;
                        } else if (3 === g) {
                          if (f.stateNode.hydrate) return 3 === f.tag ? f.stateNode.containerInfo : null;
                          e = null;
                        } else f !== e && (e = null);
                      }
                    }
                    jd(a, b, d, e, c);
                    return null;
                  }
                  var kd = null, ld = null, md = null;
                  function nd() {
                    if (md) return md;
                    var a, b = ld, c = b.length, d, e = "value" in kd ? kd.value : kd.textContent, f = e.length;
                    for (a = 0; a < c && b[a] === e[a]; a++) ;
                    var g = c - a;
                    for (d = 1; d <= g && b[c - d] === e[f - d]; d++) ;
                    return md = e.slice(a, 1 < d ? 1 - d : void 0);
                  }
                  function od(a) {
                    var b = a.keyCode;
                    "charCode" in a ? (a = a.charCode, 0 === a && 13 === b && (a = 13)) : a = b;
                    10 === a && (a = 13);
                    return 32 <= a || 13 === a ? a : 0;
                  }
                  function pd() {
                    return true;
                  }
                  function qd() {
                    return false;
                  }
                  function rd(a) {
                    function b(b2, d, e, f, g) {
                      this._reactName = b2;
                      this._targetInst = e;
                      this.type = d;
                      this.nativeEvent = f;
                      this.target = g;
                      this.currentTarget = null;
                      for (var c in a) a.hasOwnProperty(c) && (b2 = a[c], this[c] = b2 ? b2(f) : f[c]);
                      this.isDefaultPrevented = (null != f.defaultPrevented ? f.defaultPrevented : false === f.returnValue) ? pd : qd;
                      this.isPropagationStopped = qd;
                      return this;
                    }
                    m(b.prototype, { preventDefault: function() {
                      this.defaultPrevented = true;
                      var a2 = this.nativeEvent;
                      a2 && (a2.preventDefault ? a2.preventDefault() : "unknown" !== typeof a2.returnValue && (a2.returnValue = false), this.isDefaultPrevented = pd);
                    }, stopPropagation: function() {
                      var a2 = this.nativeEvent;
                      a2 && (a2.stopPropagation ? a2.stopPropagation() : "unknown" !== typeof a2.cancelBubble && (a2.cancelBubble = true), this.isPropagationStopped = pd);
                    }, persist: function() {
                    }, isPersistent: pd });
                    return b;
                  }
                  var sd = { eventPhase: 0, bubbles: 0, cancelable: 0, timeStamp: function(a) {
                    return a.timeStamp || Date.now();
                  }, defaultPrevented: 0, isTrusted: 0 }, td = rd(sd), ud = m({}, sd, { view: 0, detail: 0 }), vd = rd(ud), wd, xd, yd, Ad = m({}, ud, { screenX: 0, screenY: 0, clientX: 0, clientY: 0, pageX: 0, pageY: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, getModifierState: zd, button: 0, buttons: 0, relatedTarget: function(a) {
                    return void 0 === a.relatedTarget ? a.fromElement === a.srcElement ? a.toElement : a.fromElement : a.relatedTarget;
                  }, movementX: function(a) {
                    if ("movementX" in a) return a.movementX;
                    a !== yd && (yd && "mousemove" === a.type ? (wd = a.screenX - yd.screenX, xd = a.screenY - yd.screenY) : xd = wd = 0, yd = a);
                    return wd;
                  }, movementY: function(a) {
                    return "movementY" in a ? a.movementY : xd;
                  } }), Bd = rd(Ad), Cd = m({}, Ad, { dataTransfer: 0 }), Dd = rd(Cd), Ed = m({}, ud, { relatedTarget: 0 }), Fd = rd(Ed), Gd = m({}, sd, { animationName: 0, elapsedTime: 0, pseudoElement: 0 }), Hd = rd(Gd), Id = m({}, sd, { clipboardData: function(a) {
                    return "clipboardData" in a ? a.clipboardData : window.clipboardData;
                  } }), Jd = rd(Id), Kd = m({}, sd, { data: 0 }), Ld = rd(Kd), Md = {
                    Esc: "Escape",
                    Spacebar: " ",
                    Left: "ArrowLeft",
                    Up: "ArrowUp",
                    Right: "ArrowRight",
                    Down: "ArrowDown",
                    Del: "Delete",
                    Win: "OS",
                    Menu: "ContextMenu",
                    Apps: "ContextMenu",
                    Scroll: "ScrollLock",
                    MozPrintableKey: "Unidentified"
                  }, Nd = {
                    8: "Backspace",
                    9: "Tab",
                    12: "Clear",
                    13: "Enter",
                    16: "Shift",
                    17: "Control",
                    18: "Alt",
                    19: "Pause",
                    20: "CapsLock",
                    27: "Escape",
                    32: " ",
                    33: "PageUp",
                    34: "PageDown",
                    35: "End",
                    36: "Home",
                    37: "ArrowLeft",
                    38: "ArrowUp",
                    39: "ArrowRight",
                    40: "ArrowDown",
                    45: "Insert",
                    46: "Delete",
                    112: "F1",
                    113: "F2",
                    114: "F3",
                    115: "F4",
                    116: "F5",
                    117: "F6",
                    118: "F7",
                    119: "F8",
                    120: "F9",
                    121: "F10",
                    122: "F11",
                    123: "F12",
                    144: "NumLock",
                    145: "ScrollLock",
                    224: "Meta"
                  }, Od = { Alt: "altKey", Control: "ctrlKey", Meta: "metaKey", Shift: "shiftKey" };
                  function Pd(a) {
                    var b = this.nativeEvent;
                    return b.getModifierState ? b.getModifierState(a) : (a = Od[a]) ? !!b[a] : false;
                  }
                  function zd() {
                    return Pd;
                  }
                  var Qd = m({}, ud, { key: function(a) {
                    if (a.key) {
                      var b = Md[a.key] || a.key;
                      if ("Unidentified" !== b) return b;
                    }
                    return "keypress" === a.type ? (a = od(a), 13 === a ? "Enter" : String.fromCharCode(a)) : "keydown" === a.type || "keyup" === a.type ? Nd[a.keyCode] || "Unidentified" : "";
                  }, code: 0, location: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, repeat: 0, locale: 0, getModifierState: zd, charCode: function(a) {
                    return "keypress" === a.type ? od(a) : 0;
                  }, keyCode: function(a) {
                    return "keydown" === a.type || "keyup" === a.type ? a.keyCode : 0;
                  }, which: function(a) {
                    return "keypress" === a.type ? od(a) : "keydown" === a.type || "keyup" === a.type ? a.keyCode : 0;
                  } }), Rd = rd(Qd), Sd = m({}, Ad, { pointerId: 0, width: 0, height: 0, pressure: 0, tangentialPressure: 0, tiltX: 0, tiltY: 0, twist: 0, pointerType: 0, isPrimary: 0 }), Td = rd(Sd), Ud = m({}, ud, { touches: 0, targetTouches: 0, changedTouches: 0, altKey: 0, metaKey: 0, ctrlKey: 0, shiftKey: 0, getModifierState: zd }), Vd = rd(Ud), Wd = m({}, sd, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 }), Xd = rd(Wd), Yd = m({}, Ad, {
                    deltaX: function(a) {
                      return "deltaX" in a ? a.deltaX : "wheelDeltaX" in a ? -a.wheelDeltaX : 0;
                    },
                    deltaY: function(a) {
                      return "deltaY" in a ? a.deltaY : "wheelDeltaY" in a ? -a.wheelDeltaY : "wheelDelta" in a ? -a.wheelDelta : 0;
                    },
                    deltaZ: 0,
                    deltaMode: 0
                  }), Zd = rd(Yd), $d = [9, 13, 27, 32], ae = fa && "CompositionEvent" in window, be = null;
                  fa && "documentMode" in document && (be = document.documentMode);
                  var ce = fa && "TextEvent" in window && !be, de = fa && (!ae || be && 8 < be && 11 >= be), ee = String.fromCharCode(32), fe = false;
                  function ge(a, b) {
                    switch (a) {
                      case "keyup":
                        return -1 !== $d.indexOf(b.keyCode);
                      case "keydown":
                        return 229 !== b.keyCode;
                      case "keypress":
                      case "mousedown":
                      case "focusout":
                        return true;
                      default:
                        return false;
                    }
                  }
                  function he(a) {
                    a = a.detail;
                    return "object" === typeof a && "data" in a ? a.data : null;
                  }
                  var ie = false;
                  function je(a, b) {
                    switch (a) {
                      case "compositionend":
                        return he(b);
                      case "keypress":
                        if (32 !== b.which) return null;
                        fe = true;
                        return ee;
                      case "textInput":
                        return a = b.data, a === ee && fe ? null : a;
                      default:
                        return null;
                    }
                  }
                  function ke(a, b) {
                    if (ie) return "compositionend" === a || !ae && ge(a, b) ? (a = nd(), md = ld = kd = null, ie = false, a) : null;
                    switch (a) {
                      case "paste":
                        return null;
                      case "keypress":
                        if (!(b.ctrlKey || b.altKey || b.metaKey) || b.ctrlKey && b.altKey) {
                          if (b.char && 1 < b.char.length) return b.char;
                          if (b.which) return String.fromCharCode(b.which);
                        }
                        return null;
                      case "compositionend":
                        return de && "ko" !== b.locale ? null : b.data;
                      default:
                        return null;
                    }
                  }
                  var le = { color: true, date: true, datetime: true, "datetime-local": true, email: true, month: true, number: true, password: true, range: true, search: true, tel: true, text: true, time: true, url: true, week: true };
                  function me(a) {
                    var b = a && a.nodeName && a.nodeName.toLowerCase();
                    return "input" === b ? !!le[a.type] : "textarea" === b ? true : false;
                  }
                  function ne(a, b, c, d) {
                    Eb(d);
                    b = oe(b, "onChange");
                    0 < b.length && (c = new td("onChange", "change", null, c, d), a.push({ event: c, listeners: b }));
                  }
                  var pe = null, qe = null;
                  function re(a) {
                    se(a, 0);
                  }
                  function te(a) {
                    var b = ue(a);
                    if (Wa(b)) return a;
                  }
                  function ve(a, b) {
                    if ("change" === a) return b;
                  }
                  var we = false;
                  if (fa) {
                    var xe;
                    if (fa) {
                      var ye = "oninput" in document;
                      if (!ye) {
                        var ze = document.createElement("div");
                        ze.setAttribute("oninput", "return;");
                        ye = "function" === typeof ze.oninput;
                      }
                      xe = ye;
                    } else xe = false;
                    we = xe && (!document.documentMode || 9 < document.documentMode);
                  }
                  function Ae() {
                    pe && (pe.detachEvent("onpropertychange", Be), qe = pe = null);
                  }
                  function Be(a) {
                    if ("value" === a.propertyName && te(qe)) {
                      var b = [];
                      ne(b, qe, a, xb(a));
                      a = re;
                      if (Kb) a(b);
                      else {
                        Kb = true;
                        try {
                          Gb(a, b);
                        } finally {
                          Kb = false, Mb();
                        }
                      }
                    }
                  }
                  function Ce(a, b, c) {
                    "focusin" === a ? (Ae(), pe = b, qe = c, pe.attachEvent("onpropertychange", Be)) : "focusout" === a && Ae();
                  }
                  function De(a) {
                    if ("selectionchange" === a || "keyup" === a || "keydown" === a) return te(qe);
                  }
                  function Ee(a, b) {
                    if ("click" === a) return te(b);
                  }
                  function Fe(a, b) {
                    if ("input" === a || "change" === a) return te(b);
                  }
                  function Ge(a, b) {
                    return a === b && (0 !== a || 1 / a === 1 / b) || a !== a && b !== b;
                  }
                  var He = "function" === typeof Object.is ? Object.is : Ge, Ie = Object.prototype.hasOwnProperty;
                  function Je(a, b) {
                    if (He(a, b)) return true;
                    if ("object" !== typeof a || null === a || "object" !== typeof b || null === b) return false;
                    var c = Object.keys(a), d = Object.keys(b);
                    if (c.length !== d.length) return false;
                    for (d = 0; d < c.length; d++) if (!Ie.call(b, c[d]) || !He(a[c[d]], b[c[d]])) return false;
                    return true;
                  }
                  function Ke(a) {
                    for (; a && a.firstChild; ) a = a.firstChild;
                    return a;
                  }
                  function Le(a, b) {
                    var c = Ke(a);
                    a = 0;
                    for (var d; c; ) {
                      if (3 === c.nodeType) {
                        d = a + c.textContent.length;
                        if (a <= b && d >= b) return { node: c, offset: b - a };
                        a = d;
                      }
                      a: {
                        for (; c; ) {
                          if (c.nextSibling) {
                            c = c.nextSibling;
                            break a;
                          }
                          c = c.parentNode;
                        }
                        c = void 0;
                      }
                      c = Ke(c);
                    }
                  }
                  function Me(a, b) {
                    return a && b ? a === b ? true : a && 3 === a.nodeType ? false : b && 3 === b.nodeType ? Me(a, b.parentNode) : "contains" in a ? a.contains(b) : a.compareDocumentPosition ? !!(a.compareDocumentPosition(b) & 16) : false : false;
                  }
                  function Ne() {
                    for (var a = window, b = Xa(); b instanceof a.HTMLIFrameElement; ) {
                      try {
                        var c = "string" === typeof b.contentWindow.location.href;
                      } catch (d) {
                        c = false;
                      }
                      if (c) a = b.contentWindow;
                      else break;
                      b = Xa(a.document);
                    }
                    return b;
                  }
                  function Oe(a) {
                    var b = a && a.nodeName && a.nodeName.toLowerCase();
                    return b && ("input" === b && ("text" === a.type || "search" === a.type || "tel" === a.type || "url" === a.type || "password" === a.type) || "textarea" === b || "true" === a.contentEditable);
                  }
                  var Pe = fa && "documentMode" in document && 11 >= document.documentMode, Qe = null, Re = null, Se = null, Te = false;
                  function Ue(a, b, c) {
                    var d = c.window === c ? c.document : 9 === c.nodeType ? c : c.ownerDocument;
                    Te || null == Qe || Qe !== Xa(d) || (d = Qe, "selectionStart" in d && Oe(d) ? d = { start: d.selectionStart, end: d.selectionEnd } : (d = (d.ownerDocument && d.ownerDocument.defaultView || window).getSelection(), d = { anchorNode: d.anchorNode, anchorOffset: d.anchorOffset, focusNode: d.focusNode, focusOffset: d.focusOffset }), Se && Je(Se, d) || (Se = d, d = oe(Re, "onSelect"), 0 < d.length && (b = new td("onSelect", "select", null, b, c), a.push({ event: b, listeners: d }), b.target = Qe)));
                  }
                  Pc(
                    "cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
                    0
                  );
                  Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "), 1);
                  Pc(Oc, 2);
                  for (var Ve = "change selectionchange textInput compositionstart compositionend compositionupdate".split(" "), We = 0; We < Ve.length; We++) Nc.set(Ve[We], 0);
                  ea("onMouseEnter", ["mouseout", "mouseover"]);
                  ea("onMouseLeave", ["mouseout", "mouseover"]);
                  ea("onPointerEnter", ["pointerout", "pointerover"]);
                  ea("onPointerLeave", ["pointerout", "pointerover"]);
                  da("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" "));
                  da("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));
                  da("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]);
                  da("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" "));
                  da("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" "));
                  da("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" "));
                  var Xe = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "), Ye = new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));
                  function Ze(a, b, c) {
                    var d = a.type || "unknown-event";
                    a.currentTarget = c;
                    Yb(d, b, void 0, a);
                    a.currentTarget = null;
                  }
                  function se(a, b) {
                    b = 0 !== (b & 4);
                    for (var c = 0; c < a.length; c++) {
                      var d = a[c], e = d.event;
                      d = d.listeners;
                      a: {
                        var f = void 0;
                        if (b) for (var g = d.length - 1; 0 <= g; g--) {
                          var h = d[g], k = h.instance, l = h.currentTarget;
                          h = h.listener;
                          if (k !== f && e.isPropagationStopped()) break a;
                          Ze(e, h, l);
                          f = k;
                        }
                        else for (g = 0; g < d.length; g++) {
                          h = d[g];
                          k = h.instance;
                          l = h.currentTarget;
                          h = h.listener;
                          if (k !== f && e.isPropagationStopped()) break a;
                          Ze(e, h, l);
                          f = k;
                        }
                      }
                    }
                    if (Ub) throw a = Vb, Ub = false, Vb = null, a;
                  }
                  function G(a, b) {
                    var c = $e(b), d = a + "__bubble";
                    c.has(d) || (af(b, a, 2, false), c.add(d));
                  }
                  var bf = "_reactListening" + Math.random().toString(36).slice(2);
                  function cf(a) {
                    a[bf] || (a[bf] = true, ba.forEach(function(b) {
                      Ye.has(b) || df(b, false, a, null);
                      df(b, true, a, null);
                    }));
                  }
                  function df(a, b, c, d) {
                    var e = 4 < arguments.length && void 0 !== arguments[4] ? arguments[4] : 0, f = c;
                    "selectionchange" === a && 9 !== c.nodeType && (f = c.ownerDocument);
                    if (null !== d && !b && Ye.has(a)) {
                      if ("scroll" !== a) return;
                      e |= 2;
                      f = d;
                    }
                    var g = $e(f), h = a + "__" + (b ? "capture" : "bubble");
                    g.has(h) || (b && (e |= 4), af(f, a, e, b), g.add(h));
                  }
                  function af(a, b, c, d) {
                    var e = Nc.get(b);
                    switch (void 0 === e ? 2 : e) {
                      case 0:
                        e = gd;
                        break;
                      case 1:
                        e = id;
                        break;
                      default:
                        e = hd;
                    }
                    c = e.bind(null, b, c, a);
                    e = void 0;
                    !Pb || "touchstart" !== b && "touchmove" !== b && "wheel" !== b || (e = true);
                    d ? void 0 !== e ? a.addEventListener(b, c, { capture: true, passive: e }) : a.addEventListener(b, c, true) : void 0 !== e ? a.addEventListener(b, c, { passive: e }) : a.addEventListener(b, c, false);
                  }
                  function jd(a, b, c, d, e) {
                    var f = d;
                    if (0 === (b & 1) && 0 === (b & 2) && null !== d) a: for (; ; ) {
                      if (null === d) return;
                      var g = d.tag;
                      if (3 === g || 4 === g) {
                        var h = d.stateNode.containerInfo;
                        if (h === e || 8 === h.nodeType && h.parentNode === e) break;
                        if (4 === g) for (g = d.return; null !== g; ) {
                          var k = g.tag;
                          if (3 === k || 4 === k) {
                            if (k = g.stateNode.containerInfo, k === e || 8 === k.nodeType && k.parentNode === e) return;
                          }
                          g = g.return;
                        }
                        for (; null !== h; ) {
                          g = wc(h);
                          if (null === g) return;
                          k = g.tag;
                          if (5 === k || 6 === k) {
                            d = f = g;
                            continue a;
                          }
                          h = h.parentNode;
                        }
                      }
                      d = d.return;
                    }
                    Nb(function() {
                      var d2 = f, e2 = xb(c), g2 = [];
                      a: {
                        var h2 = Mc.get(a);
                        if (void 0 !== h2) {
                          var k2 = td, x = a;
                          switch (a) {
                            case "keypress":
                              if (0 === od(c)) break a;
                            case "keydown":
                            case "keyup":
                              k2 = Rd;
                              break;
                            case "focusin":
                              x = "focus";
                              k2 = Fd;
                              break;
                            case "focusout":
                              x = "blur";
                              k2 = Fd;
                              break;
                            case "beforeblur":
                            case "afterblur":
                              k2 = Fd;
                              break;
                            case "click":
                              if (2 === c.button) break a;
                            case "auxclick":
                            case "dblclick":
                            case "mousedown":
                            case "mousemove":
                            case "mouseup":
                            case "mouseout":
                            case "mouseover":
                            case "contextmenu":
                              k2 = Bd;
                              break;
                            case "drag":
                            case "dragend":
                            case "dragenter":
                            case "dragexit":
                            case "dragleave":
                            case "dragover":
                            case "dragstart":
                            case "drop":
                              k2 = Dd;
                              break;
                            case "touchcancel":
                            case "touchend":
                            case "touchmove":
                            case "touchstart":
                              k2 = Vd;
                              break;
                            case Ic:
                            case Jc:
                            case Kc:
                              k2 = Hd;
                              break;
                            case Lc:
                              k2 = Xd;
                              break;
                            case "scroll":
                              k2 = vd;
                              break;
                            case "wheel":
                              k2 = Zd;
                              break;
                            case "copy":
                            case "cut":
                            case "paste":
                              k2 = Jd;
                              break;
                            case "gotpointercapture":
                            case "lostpointercapture":
                            case "pointercancel":
                            case "pointerdown":
                            case "pointermove":
                            case "pointerout":
                            case "pointerover":
                            case "pointerup":
                              k2 = Td;
                          }
                          var w = 0 !== (b & 4), z = !w && "scroll" === a, u = w ? null !== h2 ? h2 + "Capture" : null : h2;
                          w = [];
                          for (var t2 = d2, q; null !== t2; ) {
                            q = t2;
                            var v = q.stateNode;
                            5 === q.tag && null !== v && (q = v, null !== u && (v = Ob(t2, u), null != v && w.push(ef(t2, v, q))));
                            if (z) break;
                            t2 = t2.return;
                          }
                          0 < w.length && (h2 = new k2(h2, x, null, c, e2), g2.push({ event: h2, listeners: w }));
                        }
                      }
                      if (0 === (b & 7)) {
                        a: {
                          h2 = "mouseover" === a || "pointerover" === a;
                          k2 = "mouseout" === a || "pointerout" === a;
                          if (h2 && 0 === (b & 16) && (x = c.relatedTarget || c.fromElement) && (wc(x) || x[ff])) break a;
                          if (k2 || h2) {
                            h2 = e2.window === e2 ? e2 : (h2 = e2.ownerDocument) ? h2.defaultView || h2.parentWindow : window;
                            if (k2) {
                              if (x = c.relatedTarget || c.toElement, k2 = d2, x = x ? wc(x) : null, null !== x && (z = Zb(x), x !== z || 5 !== x.tag && 6 !== x.tag)) x = null;
                            } else k2 = null, x = d2;
                            if (k2 !== x) {
                              w = Bd;
                              v = "onMouseLeave";
                              u = "onMouseEnter";
                              t2 = "mouse";
                              if ("pointerout" === a || "pointerover" === a) w = Td, v = "onPointerLeave", u = "onPointerEnter", t2 = "pointer";
                              z = null == k2 ? h2 : ue(k2);
                              q = null == x ? h2 : ue(x);
                              h2 = new w(v, t2 + "leave", k2, c, e2);
                              h2.target = z;
                              h2.relatedTarget = q;
                              v = null;
                              wc(e2) === d2 && (w = new w(u, t2 + "enter", x, c, e2), w.target = q, w.relatedTarget = z, v = w);
                              z = v;
                              if (k2 && x) b: {
                                w = k2;
                                u = x;
                                t2 = 0;
                                for (q = w; q; q = gf(q)) t2++;
                                q = 0;
                                for (v = u; v; v = gf(v)) q++;
                                for (; 0 < t2 - q; ) w = gf(w), t2--;
                                for (; 0 < q - t2; ) u = gf(u), q--;
                                for (; t2--; ) {
                                  if (w === u || null !== u && w === u.alternate) break b;
                                  w = gf(w);
                                  u = gf(u);
                                }
                                w = null;
                              }
                              else w = null;
                              null !== k2 && hf(g2, h2, k2, w, false);
                              null !== x && null !== z && hf(g2, z, x, w, true);
                            }
                          }
                        }
                        a: {
                          h2 = d2 ? ue(d2) : window;
                          k2 = h2.nodeName && h2.nodeName.toLowerCase();
                          if ("select" === k2 || "input" === k2 && "file" === h2.type) var J = ve;
                          else if (me(h2)) if (we) J = Fe;
                          else {
                            J = De;
                            var K = Ce;
                          }
                          else (k2 = h2.nodeName) && "input" === k2.toLowerCase() && ("checkbox" === h2.type || "radio" === h2.type) && (J = Ee);
                          if (J && (J = J(a, d2))) {
                            ne(g2, J, c, e2);
                            break a;
                          }
                          K && K(a, h2, d2);
                          "focusout" === a && (K = h2._wrapperState) && K.controlled && "number" === h2.type && bb(h2, "number", h2.value);
                        }
                        K = d2 ? ue(d2) : window;
                        switch (a) {
                          case "focusin":
                            if (me(K) || "true" === K.contentEditable) Qe = K, Re = d2, Se = null;
                            break;
                          case "focusout":
                            Se = Re = Qe = null;
                            break;
                          case "mousedown":
                            Te = true;
                            break;
                          case "contextmenu":
                          case "mouseup":
                          case "dragend":
                            Te = false;
                            Ue(g2, c, e2);
                            break;
                          case "selectionchange":
                            if (Pe) break;
                          case "keydown":
                          case "keyup":
                            Ue(g2, c, e2);
                        }
                        var Q;
                        if (ae) b: {
                          switch (a) {
                            case "compositionstart":
                              var L = "onCompositionStart";
                              break b;
                            case "compositionend":
                              L = "onCompositionEnd";
                              break b;
                            case "compositionupdate":
                              L = "onCompositionUpdate";
                              break b;
                          }
                          L = void 0;
                        }
                        else ie ? ge(a, c) && (L = "onCompositionEnd") : "keydown" === a && 229 === c.keyCode && (L = "onCompositionStart");
                        L && (de && "ko" !== c.locale && (ie || "onCompositionStart" !== L ? "onCompositionEnd" === L && ie && (Q = nd()) : (kd = e2, ld = "value" in kd ? kd.value : kd.textContent, ie = true)), K = oe(d2, L), 0 < K.length && (L = new Ld(L, a, null, c, e2), g2.push({ event: L, listeners: K }), Q ? L.data = Q : (Q = he(c), null !== Q && (L.data = Q))));
                        if (Q = ce ? je(a, c) : ke(a, c)) d2 = oe(d2, "onBeforeInput"), 0 < d2.length && (e2 = new Ld(
                          "onBeforeInput",
                          "beforeinput",
                          null,
                          c,
                          e2
                        ), g2.push({ event: e2, listeners: d2 }), e2.data = Q);
                      }
                      se(g2, b);
                    });
                  }
                  function ef(a, b, c) {
                    return { instance: a, listener: b, currentTarget: c };
                  }
                  function oe(a, b) {
                    for (var c = b + "Capture", d = []; null !== a; ) {
                      var e = a, f = e.stateNode;
                      5 === e.tag && null !== f && (e = f, f = Ob(a, c), null != f && d.unshift(ef(a, f, e)), f = Ob(a, b), null != f && d.push(ef(a, f, e)));
                      a = a.return;
                    }
                    return d;
                  }
                  function gf(a) {
                    if (null === a) return null;
                    do
                      a = a.return;
                    while (a && 5 !== a.tag);
                    return a ? a : null;
                  }
                  function hf(a, b, c, d, e) {
                    for (var f = b._reactName, g = []; null !== c && c !== d; ) {
                      var h = c, k = h.alternate, l = h.stateNode;
                      if (null !== k && k === d) break;
                      5 === h.tag && null !== l && (h = l, e ? (k = Ob(c, f), null != k && g.unshift(ef(c, k, h))) : e || (k = Ob(c, f), null != k && g.push(ef(c, k, h))));
                      c = c.return;
                    }
                    0 !== g.length && a.push({ event: b, listeners: g });
                  }
                  function jf() {
                  }
                  var kf = null, lf = null;
                  function mf(a, b) {
                    switch (a) {
                      case "button":
                      case "input":
                      case "select":
                      case "textarea":
                        return !!b.autoFocus;
                    }
                    return false;
                  }
                  function nf(a, b) {
                    return "textarea" === a || "option" === a || "noscript" === a || "string" === typeof b.children || "number" === typeof b.children || "object" === typeof b.dangerouslySetInnerHTML && null !== b.dangerouslySetInnerHTML && null != b.dangerouslySetInnerHTML.__html;
                  }
                  var of = "function" === typeof setTimeout ? setTimeout : void 0, pf = "function" === typeof clearTimeout ? clearTimeout : void 0;
                  function qf(a) {
                    1 === a.nodeType ? a.textContent = "" : 9 === a.nodeType && (a = a.body, null != a && (a.textContent = ""));
                  }
                  function rf(a) {
                    for (; null != a; a = a.nextSibling) {
                      var b = a.nodeType;
                      if (1 === b || 3 === b) break;
                    }
                    return a;
                  }
                  function sf(a) {
                    a = a.previousSibling;
                    for (var b = 0; a; ) {
                      if (8 === a.nodeType) {
                        var c = a.data;
                        if ("$" === c || "$!" === c || "$?" === c) {
                          if (0 === b) return a;
                          b--;
                        } else "/$" === c && b++;
                      }
                      a = a.previousSibling;
                    }
                    return null;
                  }
                  var tf = 0;
                  function uf(a) {
                    return { $$typeof: Ga, toString: a, valueOf: a };
                  }
                  var vf = Math.random().toString(36).slice(2), wf = "__reactFiber$" + vf, xf = "__reactProps$" + vf, ff = "__reactContainer$" + vf, yf = "__reactEvents$" + vf;
                  function wc(a) {
                    var b = a[wf];
                    if (b) return b;
                    for (var c = a.parentNode; c; ) {
                      if (b = c[ff] || c[wf]) {
                        c = b.alternate;
                        if (null !== b.child || null !== c && null !== c.child) for (a = sf(a); null !== a; ) {
                          if (c = a[wf]) return c;
                          a = sf(a);
                        }
                        return b;
                      }
                      a = c;
                      c = a.parentNode;
                    }
                    return null;
                  }
                  function Cb(a) {
                    a = a[wf] || a[ff];
                    return !a || 5 !== a.tag && 6 !== a.tag && 13 !== a.tag && 3 !== a.tag ? null : a;
                  }
                  function ue(a) {
                    if (5 === a.tag || 6 === a.tag) return a.stateNode;
                    throw Error(y(33));
                  }
                  function Db(a) {
                    return a[xf] || null;
                  }
                  function $e(a) {
                    var b = a[yf];
                    void 0 === b && (b = a[yf] = /* @__PURE__ */ new Set());
                    return b;
                  }
                  var zf = [], Af = -1;
                  function Bf(a) {
                    return { current: a };
                  }
                  function H(a) {
                    0 > Af || (a.current = zf[Af], zf[Af] = null, Af--);
                  }
                  function I(a, b) {
                    Af++;
                    zf[Af] = a.current;
                    a.current = b;
                  }
                  var Cf = {}, M = Bf(Cf), N = Bf(false), Df = Cf;
                  function Ef(a, b) {
                    var c = a.type.contextTypes;
                    if (!c) return Cf;
                    var d = a.stateNode;
                    if (d && d.__reactInternalMemoizedUnmaskedChildContext === b) return d.__reactInternalMemoizedMaskedChildContext;
                    var e = {}, f;
                    for (f in c) e[f] = b[f];
                    d && (a = a.stateNode, a.__reactInternalMemoizedUnmaskedChildContext = b, a.__reactInternalMemoizedMaskedChildContext = e);
                    return e;
                  }
                  function Ff(a) {
                    a = a.childContextTypes;
                    return null !== a && void 0 !== a;
                  }
                  function Gf() {
                    H(N);
                    H(M);
                  }
                  function Hf(a, b, c) {
                    if (M.current !== Cf) throw Error(y(168));
                    I(M, b);
                    I(N, c);
                  }
                  function If(a, b, c) {
                    var d = a.stateNode;
                    a = b.childContextTypes;
                    if ("function" !== typeof d.getChildContext) return c;
                    d = d.getChildContext();
                    for (var e in d) if (!(e in a)) throw Error(y(108, Ra(b) || "Unknown", e));
                    return m({}, c, d);
                  }
                  function Jf(a) {
                    a = (a = a.stateNode) && a.__reactInternalMemoizedMergedChildContext || Cf;
                    Df = M.current;
                    I(M, a);
                    I(N, N.current);
                    return true;
                  }
                  function Kf(a, b, c) {
                    var d = a.stateNode;
                    if (!d) throw Error(y(169));
                    c ? (a = If(a, b, Df), d.__reactInternalMemoizedMergedChildContext = a, H(N), H(M), I(M, a)) : H(N);
                    I(N, c);
                  }
                  var Lf = null, Mf = null, Nf = r.unstable_runWithPriority, Of = r.unstable_scheduleCallback, Pf = r.unstable_cancelCallback, Qf = r.unstable_shouldYield, Rf = r.unstable_requestPaint, Sf = r.unstable_now, Tf = r.unstable_getCurrentPriorityLevel, Uf = r.unstable_ImmediatePriority, Vf = r.unstable_UserBlockingPriority, Wf = r.unstable_NormalPriority, Xf = r.unstable_LowPriority, Yf = r.unstable_IdlePriority, Zf = {}, $f = void 0 !== Rf ? Rf : function() {
                  }, ag = null, bg = null, cg = false, dg = Sf(), O = 1e4 > dg ? Sf : function() {
                    return Sf() - dg;
                  };
                  function eg() {
                    switch (Tf()) {
                      case Uf:
                        return 99;
                      case Vf:
                        return 98;
                      case Wf:
                        return 97;
                      case Xf:
                        return 96;
                      case Yf:
                        return 95;
                      default:
                        throw Error(y(332));
                    }
                  }
                  function fg(a) {
                    switch (a) {
                      case 99:
                        return Uf;
                      case 98:
                        return Vf;
                      case 97:
                        return Wf;
                      case 96:
                        return Xf;
                      case 95:
                        return Yf;
                      default:
                        throw Error(y(332));
                    }
                  }
                  function gg(a, b) {
                    a = fg(a);
                    return Nf(a, b);
                  }
                  function hg(a, b, c) {
                    a = fg(a);
                    return Of(a, b, c);
                  }
                  function ig() {
                    if (null !== bg) {
                      var a = bg;
                      bg = null;
                      Pf(a);
                    }
                    jg();
                  }
                  function jg() {
                    if (!cg && null !== ag) {
                      cg = true;
                      var a = 0;
                      try {
                        var b = ag;
                        gg(99, function() {
                          for (; a < b.length; a++) {
                            var c = b[a];
                            do
                              c = c(true);
                            while (null !== c);
                          }
                        });
                        ag = null;
                      } catch (c) {
                        throw null !== ag && (ag = ag.slice(a + 1)), Of(Uf, ig), c;
                      } finally {
                        cg = false;
                      }
                    }
                  }
                  var kg = ra.ReactCurrentBatchConfig;
                  function lg(a, b) {
                    if (a && a.defaultProps) {
                      b = m({}, b);
                      a = a.defaultProps;
                      for (var c in a) void 0 === b[c] && (b[c] = a[c]);
                      return b;
                    }
                    return b;
                  }
                  var mg = Bf(null), ng = null, og = null, pg = null;
                  function qg() {
                    pg = og = ng = null;
                  }
                  function rg(a) {
                    var b = mg.current;
                    H(mg);
                    a.type._context._currentValue = b;
                  }
                  function sg(a, b) {
                    for (; null !== a; ) {
                      var c = a.alternate;
                      if ((a.childLanes & b) === b) if (null === c || (c.childLanes & b) === b) break;
                      else c.childLanes |= b;
                      else a.childLanes |= b, null !== c && (c.childLanes |= b);
                      a = a.return;
                    }
                  }
                  function tg(a, b) {
                    ng = a;
                    pg = og = null;
                    a = a.dependencies;
                    null !== a && null !== a.firstContext && (0 !== (a.lanes & b) && (ug = true), a.firstContext = null);
                  }
                  function vg(a, b) {
                    if (pg !== a && false !== b && 0 !== b) {
                      if ("number" !== typeof b || 1073741823 === b) pg = a, b = 1073741823;
                      b = { context: a, observedBits: b, next: null };
                      if (null === og) {
                        if (null === ng) throw Error(y(308));
                        og = b;
                        ng.dependencies = { lanes: 0, firstContext: b, responders: null };
                      } else og = og.next = b;
                    }
                    return a._currentValue;
                  }
                  var wg = false;
                  function xg(a) {
                    a.updateQueue = { baseState: a.memoizedState, firstBaseUpdate: null, lastBaseUpdate: null, shared: { pending: null }, effects: null };
                  }
                  function yg(a, b) {
                    a = a.updateQueue;
                    b.updateQueue === a && (b.updateQueue = { baseState: a.baseState, firstBaseUpdate: a.firstBaseUpdate, lastBaseUpdate: a.lastBaseUpdate, shared: a.shared, effects: a.effects });
                  }
                  function zg(a, b) {
                    return { eventTime: a, lane: b, tag: 0, payload: null, callback: null, next: null };
                  }
                  function Ag(a, b) {
                    a = a.updateQueue;
                    if (null !== a) {
                      a = a.shared;
                      var c = a.pending;
                      null === c ? b.next = b : (b.next = c.next, c.next = b);
                      a.pending = b;
                    }
                  }
                  function Bg(a, b) {
                    var c = a.updateQueue, d = a.alternate;
                    if (null !== d && (d = d.updateQueue, c === d)) {
                      var e = null, f = null;
                      c = c.firstBaseUpdate;
                      if (null !== c) {
                        do {
                          var g = { eventTime: c.eventTime, lane: c.lane, tag: c.tag, payload: c.payload, callback: c.callback, next: null };
                          null === f ? e = f = g : f = f.next = g;
                          c = c.next;
                        } while (null !== c);
                        null === f ? e = f = b : f = f.next = b;
                      } else e = f = b;
                      c = { baseState: d.baseState, firstBaseUpdate: e, lastBaseUpdate: f, shared: d.shared, effects: d.effects };
                      a.updateQueue = c;
                      return;
                    }
                    a = c.lastBaseUpdate;
                    null === a ? c.firstBaseUpdate = b : a.next = b;
                    c.lastBaseUpdate = b;
                  }
                  function Cg(a, b, c, d) {
                    var e = a.updateQueue;
                    wg = false;
                    var f = e.firstBaseUpdate, g = e.lastBaseUpdate, h = e.shared.pending;
                    if (null !== h) {
                      e.shared.pending = null;
                      var k = h, l = k.next;
                      k.next = null;
                      null === g ? f = l : g.next = l;
                      g = k;
                      var n = a.alternate;
                      if (null !== n) {
                        n = n.updateQueue;
                        var A = n.lastBaseUpdate;
                        A !== g && (null === A ? n.firstBaseUpdate = l : A.next = l, n.lastBaseUpdate = k);
                      }
                    }
                    if (null !== f) {
                      A = e.baseState;
                      g = 0;
                      n = l = k = null;
                      do {
                        h = f.lane;
                        var p = f.eventTime;
                        if ((d & h) === h) {
                          null !== n && (n = n.next = {
                            eventTime: p,
                            lane: 0,
                            tag: f.tag,
                            payload: f.payload,
                            callback: f.callback,
                            next: null
                          });
                          a: {
                            var C = a, x = f;
                            h = b;
                            p = c;
                            switch (x.tag) {
                              case 1:
                                C = x.payload;
                                if ("function" === typeof C) {
                                  A = C.call(p, A, h);
                                  break a;
                                }
                                A = C;
                                break a;
                              case 3:
                                C.flags = C.flags & -4097 | 64;
                              case 0:
                                C = x.payload;
                                h = "function" === typeof C ? C.call(p, A, h) : C;
                                if (null === h || void 0 === h) break a;
                                A = m({}, A, h);
                                break a;
                              case 2:
                                wg = true;
                            }
                          }
                          null !== f.callback && (a.flags |= 32, h = e.effects, null === h ? e.effects = [f] : h.push(f));
                        } else p = { eventTime: p, lane: h, tag: f.tag, payload: f.payload, callback: f.callback, next: null }, null === n ? (l = n = p, k = A) : n = n.next = p, g |= h;
                        f = f.next;
                        if (null === f) if (h = e.shared.pending, null === h) break;
                        else f = h.next, h.next = null, e.lastBaseUpdate = h, e.shared.pending = null;
                      } while (1);
                      null === n && (k = A);
                      e.baseState = k;
                      e.firstBaseUpdate = l;
                      e.lastBaseUpdate = n;
                      Dg |= g;
                      a.lanes = g;
                      a.memoizedState = A;
                    }
                  }
                  function Eg(a, b, c) {
                    a = b.effects;
                    b.effects = null;
                    if (null !== a) for (b = 0; b < a.length; b++) {
                      var d = a[b], e = d.callback;
                      if (null !== e) {
                        d.callback = null;
                        d = c;
                        if ("function" !== typeof e) throw Error(y(191, e));
                        e.call(d);
                      }
                    }
                  }
                  var Fg = new aa.Component().refs;
                  function Gg(a, b, c, d) {
                    b = a.memoizedState;
                    c = c(d, b);
                    c = null === c || void 0 === c ? b : m({}, b, c);
                    a.memoizedState = c;
                    0 === a.lanes && (a.updateQueue.baseState = c);
                  }
                  var Kg = { isMounted: function(a) {
                    return (a = a._reactInternals) ? Zb(a) === a : false;
                  }, enqueueSetState: function(a, b, c) {
                    a = a._reactInternals;
                    var d = Hg(), e = Ig(a), f = zg(d, e);
                    f.payload = b;
                    void 0 !== c && null !== c && (f.callback = c);
                    Ag(a, f);
                    Jg(a, e, d);
                  }, enqueueReplaceState: function(a, b, c) {
                    a = a._reactInternals;
                    var d = Hg(), e = Ig(a), f = zg(d, e);
                    f.tag = 1;
                    f.payload = b;
                    void 0 !== c && null !== c && (f.callback = c);
                    Ag(a, f);
                    Jg(a, e, d);
                  }, enqueueForceUpdate: function(a, b) {
                    a = a._reactInternals;
                    var c = Hg(), d = Ig(a), e = zg(c, d);
                    e.tag = 2;
                    void 0 !== b && null !== b && (e.callback = b);
                    Ag(a, e);
                    Jg(a, d, c);
                  } };
                  function Lg(a, b, c, d, e, f, g) {
                    a = a.stateNode;
                    return "function" === typeof a.shouldComponentUpdate ? a.shouldComponentUpdate(d, f, g) : b.prototype && b.prototype.isPureReactComponent ? !Je(c, d) || !Je(e, f) : true;
                  }
                  function Mg(a, b, c) {
                    var d = false, e = Cf;
                    var f = b.contextType;
                    "object" === typeof f && null !== f ? f = vg(f) : (e = Ff(b) ? Df : M.current, d = b.contextTypes, f = (d = null !== d && void 0 !== d) ? Ef(a, e) : Cf);
                    b = new b(c, f);
                    a.memoizedState = null !== b.state && void 0 !== b.state ? b.state : null;
                    b.updater = Kg;
                    a.stateNode = b;
                    b._reactInternals = a;
                    d && (a = a.stateNode, a.__reactInternalMemoizedUnmaskedChildContext = e, a.__reactInternalMemoizedMaskedChildContext = f);
                    return b;
                  }
                  function Ng(a, b, c, d) {
                    a = b.state;
                    "function" === typeof b.componentWillReceiveProps && b.componentWillReceiveProps(c, d);
                    "function" === typeof b.UNSAFE_componentWillReceiveProps && b.UNSAFE_componentWillReceiveProps(c, d);
                    b.state !== a && Kg.enqueueReplaceState(b, b.state, null);
                  }
                  function Og(a, b, c, d) {
                    var e = a.stateNode;
                    e.props = c;
                    e.state = a.memoizedState;
                    e.refs = Fg;
                    xg(a);
                    var f = b.contextType;
                    "object" === typeof f && null !== f ? e.context = vg(f) : (f = Ff(b) ? Df : M.current, e.context = Ef(a, f));
                    Cg(a, c, e, d);
                    e.state = a.memoizedState;
                    f = b.getDerivedStateFromProps;
                    "function" === typeof f && (Gg(a, b, f, c), e.state = a.memoizedState);
                    "function" === typeof b.getDerivedStateFromProps || "function" === typeof e.getSnapshotBeforeUpdate || "function" !== typeof e.UNSAFE_componentWillMount && "function" !== typeof e.componentWillMount || (b = e.state, "function" === typeof e.componentWillMount && e.componentWillMount(), "function" === typeof e.UNSAFE_componentWillMount && e.UNSAFE_componentWillMount(), b !== e.state && Kg.enqueueReplaceState(e, e.state, null), Cg(a, c, e, d), e.state = a.memoizedState);
                    "function" === typeof e.componentDidMount && (a.flags |= 4);
                  }
                  var Pg = Array.isArray;
                  function Qg(a, b, c) {
                    a = c.ref;
                    if (null !== a && "function" !== typeof a && "object" !== typeof a) {
                      if (c._owner) {
                        c = c._owner;
                        if (c) {
                          if (1 !== c.tag) throw Error(y(309));
                          var d = c.stateNode;
                        }
                        if (!d) throw Error(y(147, a));
                        var e = "" + a;
                        if (null !== b && null !== b.ref && "function" === typeof b.ref && b.ref._stringRef === e) return b.ref;
                        b = function(a2) {
                          var b2 = d.refs;
                          b2 === Fg && (b2 = d.refs = {});
                          null === a2 ? delete b2[e] : b2[e] = a2;
                        };
                        b._stringRef = e;
                        return b;
                      }
                      if ("string" !== typeof a) throw Error(y(284));
                      if (!c._owner) throw Error(y(290, a));
                    }
                    return a;
                  }
                  function Rg(a, b) {
                    if ("textarea" !== a.type) throw Error(y(31, "[object Object]" === Object.prototype.toString.call(b) ? "object with keys {" + Object.keys(b).join(", ") + "}" : b));
                  }
                  function Sg(a) {
                    function b(b2, c2) {
                      if (a) {
                        var d2 = b2.lastEffect;
                        null !== d2 ? (d2.nextEffect = c2, b2.lastEffect = c2) : b2.firstEffect = b2.lastEffect = c2;
                        c2.nextEffect = null;
                        c2.flags = 8;
                      }
                    }
                    function c(c2, d2) {
                      if (!a) return null;
                      for (; null !== d2; ) b(c2, d2), d2 = d2.sibling;
                      return null;
                    }
                    function d(a2, b2) {
                      for (a2 = /* @__PURE__ */ new Map(); null !== b2; ) null !== b2.key ? a2.set(b2.key, b2) : a2.set(b2.index, b2), b2 = b2.sibling;
                      return a2;
                    }
                    function e(a2, b2) {
                      a2 = Tg(a2, b2);
                      a2.index = 0;
                      a2.sibling = null;
                      return a2;
                    }
                    function f(b2, c2, d2) {
                      b2.index = d2;
                      if (!a) return c2;
                      d2 = b2.alternate;
                      if (null !== d2) return d2 = d2.index, d2 < c2 ? (b2.flags = 2, c2) : d2;
                      b2.flags = 2;
                      return c2;
                    }
                    function g(b2) {
                      a && null === b2.alternate && (b2.flags = 2);
                      return b2;
                    }
                    function h(a2, b2, c2, d2) {
                      if (null === b2 || 6 !== b2.tag) return b2 = Ug(c2, a2.mode, d2), b2.return = a2, b2;
                      b2 = e(b2, c2);
                      b2.return = a2;
                      return b2;
                    }
                    function k(a2, b2, c2, d2) {
                      if (null !== b2 && b2.elementType === c2.type) return d2 = e(b2, c2.props), d2.ref = Qg(a2, b2, c2), d2.return = a2, d2;
                      d2 = Vg(c2.type, c2.key, c2.props, null, a2.mode, d2);
                      d2.ref = Qg(a2, b2, c2);
                      d2.return = a2;
                      return d2;
                    }
                    function l(a2, b2, c2, d2) {
                      if (null === b2 || 4 !== b2.tag || b2.stateNode.containerInfo !== c2.containerInfo || b2.stateNode.implementation !== c2.implementation) return b2 = Wg(c2, a2.mode, d2), b2.return = a2, b2;
                      b2 = e(b2, c2.children || []);
                      b2.return = a2;
                      return b2;
                    }
                    function n(a2, b2, c2, d2, f2) {
                      if (null === b2 || 7 !== b2.tag) return b2 = Xg(c2, a2.mode, d2, f2), b2.return = a2, b2;
                      b2 = e(b2, c2);
                      b2.return = a2;
                      return b2;
                    }
                    function A(a2, b2, c2) {
                      if ("string" === typeof b2 || "number" === typeof b2) return b2 = Ug("" + b2, a2.mode, c2), b2.return = a2, b2;
                      if ("object" === typeof b2 && null !== b2) {
                        switch (b2.$$typeof) {
                          case sa:
                            return c2 = Vg(b2.type, b2.key, b2.props, null, a2.mode, c2), c2.ref = Qg(a2, null, b2), c2.return = a2, c2;
                          case ta:
                            return b2 = Wg(b2, a2.mode, c2), b2.return = a2, b2;
                        }
                        if (Pg(b2) || La(b2)) return b2 = Xg(
                          b2,
                          a2.mode,
                          c2,
                          null
                        ), b2.return = a2, b2;
                        Rg(a2, b2);
                      }
                      return null;
                    }
                    function p(a2, b2, c2, d2) {
                      var e2 = null !== b2 ? b2.key : null;
                      if ("string" === typeof c2 || "number" === typeof c2) return null !== e2 ? null : h(a2, b2, "" + c2, d2);
                      if ("object" === typeof c2 && null !== c2) {
                        switch (c2.$$typeof) {
                          case sa:
                            return c2.key === e2 ? c2.type === ua ? n(a2, b2, c2.props.children, d2, e2) : k(a2, b2, c2, d2) : null;
                          case ta:
                            return c2.key === e2 ? l(a2, b2, c2, d2) : null;
                        }
                        if (Pg(c2) || La(c2)) return null !== e2 ? null : n(a2, b2, c2, d2, null);
                        Rg(a2, c2);
                      }
                      return null;
                    }
                    function C(a2, b2, c2, d2, e2) {
                      if ("string" === typeof d2 || "number" === typeof d2) return a2 = a2.get(c2) || null, h(b2, a2, "" + d2, e2);
                      if ("object" === typeof d2 && null !== d2) {
                        switch (d2.$$typeof) {
                          case sa:
                            return a2 = a2.get(null === d2.key ? c2 : d2.key) || null, d2.type === ua ? n(b2, a2, d2.props.children, e2, d2.key) : k(b2, a2, d2, e2);
                          case ta:
                            return a2 = a2.get(null === d2.key ? c2 : d2.key) || null, l(b2, a2, d2, e2);
                        }
                        if (Pg(d2) || La(d2)) return a2 = a2.get(c2) || null, n(b2, a2, d2, e2, null);
                        Rg(b2, d2);
                      }
                      return null;
                    }
                    function x(e2, g2, h2, k2) {
                      for (var l2 = null, t2 = null, u = g2, z = g2 = 0, q = null; null !== u && z < h2.length; z++) {
                        u.index > z ? (q = u, u = null) : q = u.sibling;
                        var n2 = p(e2, u, h2[z], k2);
                        if (null === n2) {
                          null === u && (u = q);
                          break;
                        }
                        a && u && null === n2.alternate && b(e2, u);
                        g2 = f(n2, g2, z);
                        null === t2 ? l2 = n2 : t2.sibling = n2;
                        t2 = n2;
                        u = q;
                      }
                      if (z === h2.length) return c(e2, u), l2;
                      if (null === u) {
                        for (; z < h2.length; z++) u = A(e2, h2[z], k2), null !== u && (g2 = f(u, g2, z), null === t2 ? l2 = u : t2.sibling = u, t2 = u);
                        return l2;
                      }
                      for (u = d(e2, u); z < h2.length; z++) q = C(u, e2, z, h2[z], k2), null !== q && (a && null !== q.alternate && u.delete(null === q.key ? z : q.key), g2 = f(q, g2, z), null === t2 ? l2 = q : t2.sibling = q, t2 = q);
                      a && u.forEach(function(a2) {
                        return b(e2, a2);
                      });
                      return l2;
                    }
                    function w(e2, g2, h2, k2) {
                      var l2 = La(h2);
                      if ("function" !== typeof l2) throw Error(y(150));
                      h2 = l2.call(h2);
                      if (null == h2) throw Error(y(151));
                      for (var t2 = l2 = null, u = g2, z = g2 = 0, q = null, n2 = h2.next(); null !== u && !n2.done; z++, n2 = h2.next()) {
                        u.index > z ? (q = u, u = null) : q = u.sibling;
                        var w2 = p(e2, u, n2.value, k2);
                        if (null === w2) {
                          null === u && (u = q);
                          break;
                        }
                        a && u && null === w2.alternate && b(e2, u);
                        g2 = f(w2, g2, z);
                        null === t2 ? l2 = w2 : t2.sibling = w2;
                        t2 = w2;
                        u = q;
                      }
                      if (n2.done) return c(e2, u), l2;
                      if (null === u) {
                        for (; !n2.done; z++, n2 = h2.next()) n2 = A(e2, n2.value, k2), null !== n2 && (g2 = f(n2, g2, z), null === t2 ? l2 = n2 : t2.sibling = n2, t2 = n2);
                        return l2;
                      }
                      for (u = d(e2, u); !n2.done; z++, n2 = h2.next()) n2 = C(u, e2, z, n2.value, k2), null !== n2 && (a && null !== n2.alternate && u.delete(null === n2.key ? z : n2.key), g2 = f(n2, g2, z), null === t2 ? l2 = n2 : t2.sibling = n2, t2 = n2);
                      a && u.forEach(function(a2) {
                        return b(e2, a2);
                      });
                      return l2;
                    }
                    return function(a2, d2, f2, h2) {
                      var k2 = "object" === typeof f2 && null !== f2 && f2.type === ua && null === f2.key;
                      k2 && (f2 = f2.props.children);
                      var l2 = "object" === typeof f2 && null !== f2;
                      if (l2) switch (f2.$$typeof) {
                        case sa:
                          a: {
                            l2 = f2.key;
                            for (k2 = d2; null !== k2; ) {
                              if (k2.key === l2) {
                                switch (k2.tag) {
                                  case 7:
                                    if (f2.type === ua) {
                                      c(a2, k2.sibling);
                                      d2 = e(k2, f2.props.children);
                                      d2.return = a2;
                                      a2 = d2;
                                      break a;
                                    }
                                    break;
                                  default:
                                    if (k2.elementType === f2.type) {
                                      c(a2, k2.sibling);
                                      d2 = e(k2, f2.props);
                                      d2.ref = Qg(a2, k2, f2);
                                      d2.return = a2;
                                      a2 = d2;
                                      break a;
                                    }
                                }
                                c(a2, k2);
                                break;
                              } else b(a2, k2);
                              k2 = k2.sibling;
                            }
                            f2.type === ua ? (d2 = Xg(f2.props.children, a2.mode, h2, f2.key), d2.return = a2, a2 = d2) : (h2 = Vg(f2.type, f2.key, f2.props, null, a2.mode, h2), h2.ref = Qg(a2, d2, f2), h2.return = a2, a2 = h2);
                          }
                          return g(a2);
                        case ta:
                          a: {
                            for (k2 = f2.key; null !== d2; ) {
                              if (d2.key === k2) if (4 === d2.tag && d2.stateNode.containerInfo === f2.containerInfo && d2.stateNode.implementation === f2.implementation) {
                                c(a2, d2.sibling);
                                d2 = e(d2, f2.children || []);
                                d2.return = a2;
                                a2 = d2;
                                break a;
                              } else {
                                c(a2, d2);
                                break;
                              }
                              else b(a2, d2);
                              d2 = d2.sibling;
                            }
                            d2 = Wg(f2, a2.mode, h2);
                            d2.return = a2;
                            a2 = d2;
                          }
                          return g(a2);
                      }
                      if ("string" === typeof f2 || "number" === typeof f2) return f2 = "" + f2, null !== d2 && 6 === d2.tag ? (c(a2, d2.sibling), d2 = e(d2, f2), d2.return = a2, a2 = d2) : (c(a2, d2), d2 = Ug(f2, a2.mode, h2), d2.return = a2, a2 = d2), g(a2);
                      if (Pg(f2)) return x(a2, d2, f2, h2);
                      if (La(f2)) return w(a2, d2, f2, h2);
                      l2 && Rg(a2, f2);
                      if ("undefined" === typeof f2 && !k2) switch (a2.tag) {
                        case 1:
                        case 22:
                        case 0:
                        case 11:
                        case 15:
                          throw Error(y(152, Ra(a2.type) || "Component"));
                      }
                      return c(a2, d2);
                    };
                  }
                  var Yg = Sg(true), Zg = Sg(false), $g = {}, ah = Bf($g), bh = Bf($g), ch = Bf($g);
                  function dh(a) {
                    if (a === $g) throw Error(y(174));
                    return a;
                  }
                  function eh(a, b) {
                    I(ch, b);
                    I(bh, a);
                    I(ah, $g);
                    a = b.nodeType;
                    switch (a) {
                      case 9:
                      case 11:
                        b = (b = b.documentElement) ? b.namespaceURI : mb(null, "");
                        break;
                      default:
                        a = 8 === a ? b.parentNode : b, b = a.namespaceURI || null, a = a.tagName, b = mb(b, a);
                    }
                    H(ah);
                    I(ah, b);
                  }
                  function fh() {
                    H(ah);
                    H(bh);
                    H(ch);
                  }
                  function gh(a) {
                    dh(ch.current);
                    var b = dh(ah.current);
                    var c = mb(b, a.type);
                    b !== c && (I(bh, a), I(ah, c));
                  }
                  function hh(a) {
                    bh.current === a && (H(ah), H(bh));
                  }
                  var P = Bf(0);
                  function ih(a) {
                    for (var b = a; null !== b; ) {
                      if (13 === b.tag) {
                        var c = b.memoizedState;
                        if (null !== c && (c = c.dehydrated, null === c || "$?" === c.data || "$!" === c.data)) return b;
                      } else if (19 === b.tag && void 0 !== b.memoizedProps.revealOrder) {
                        if (0 !== (b.flags & 64)) return b;
                      } else if (null !== b.child) {
                        b.child.return = b;
                        b = b.child;
                        continue;
                      }
                      if (b === a) break;
                      for (; null === b.sibling; ) {
                        if (null === b.return || b.return === a) return null;
                        b = b.return;
                      }
                      b.sibling.return = b.return;
                      b = b.sibling;
                    }
                    return null;
                  }
                  var jh = null, kh = null, lh = false;
                  function mh(a, b) {
                    var c = nh(5, null, null, 0);
                    c.elementType = "DELETED";
                    c.type = "DELETED";
                    c.stateNode = b;
                    c.return = a;
                    c.flags = 8;
                    null !== a.lastEffect ? (a.lastEffect.nextEffect = c, a.lastEffect = c) : a.firstEffect = a.lastEffect = c;
                  }
                  function oh(a, b) {
                    switch (a.tag) {
                      case 5:
                        var c = a.type;
                        b = 1 !== b.nodeType || c.toLowerCase() !== b.nodeName.toLowerCase() ? null : b;
                        return null !== b ? (a.stateNode = b, true) : false;
                      case 6:
                        return b = "" === a.pendingProps || 3 !== b.nodeType ? null : b, null !== b ? (a.stateNode = b, true) : false;
                      case 13:
                        return false;
                      default:
                        return false;
                    }
                  }
                  function ph(a) {
                    if (lh) {
                      var b = kh;
                      if (b) {
                        var c = b;
                        if (!oh(a, b)) {
                          b = rf(c.nextSibling);
                          if (!b || !oh(a, b)) {
                            a.flags = a.flags & -1025 | 2;
                            lh = false;
                            jh = a;
                            return;
                          }
                          mh(jh, c);
                        }
                        jh = a;
                        kh = rf(b.firstChild);
                      } else a.flags = a.flags & -1025 | 2, lh = false, jh = a;
                    }
                  }
                  function qh(a) {
                    for (a = a.return; null !== a && 5 !== a.tag && 3 !== a.tag && 13 !== a.tag; ) a = a.return;
                    jh = a;
                  }
                  function rh(a) {
                    if (a !== jh) return false;
                    if (!lh) return qh(a), lh = true, false;
                    var b = a.type;
                    if (5 !== a.tag || "head" !== b && "body" !== b && !nf(b, a.memoizedProps)) for (b = kh; b; ) mh(a, b), b = rf(b.nextSibling);
                    qh(a);
                    if (13 === a.tag) {
                      a = a.memoizedState;
                      a = null !== a ? a.dehydrated : null;
                      if (!a) throw Error(y(317));
                      a: {
                        a = a.nextSibling;
                        for (b = 0; a; ) {
                          if (8 === a.nodeType) {
                            var c = a.data;
                            if ("/$" === c) {
                              if (0 === b) {
                                kh = rf(a.nextSibling);
                                break a;
                              }
                              b--;
                            } else "$" !== c && "$!" !== c && "$?" !== c || b++;
                          }
                          a = a.nextSibling;
                        }
                        kh = null;
                      }
                    } else kh = jh ? rf(a.stateNode.nextSibling) : null;
                    return true;
                  }
                  function sh() {
                    kh = jh = null;
                    lh = false;
                  }
                  var th = [];
                  function uh() {
                    for (var a = 0; a < th.length; a++) th[a]._workInProgressVersionPrimary = null;
                    th.length = 0;
                  }
                  var vh = ra.ReactCurrentDispatcher, wh = ra.ReactCurrentBatchConfig, xh = 0, R = null, S = null, T = null, yh = false, zh = false;
                  function Ah() {
                    throw Error(y(321));
                  }
                  function Bh(a, b) {
                    if (null === b) return false;
                    for (var c = 0; c < b.length && c < a.length; c++) if (!He(a[c], b[c])) return false;
                    return true;
                  }
                  function Ch(a, b, c, d, e, f) {
                    xh = f;
                    R = b;
                    b.memoizedState = null;
                    b.updateQueue = null;
                    b.lanes = 0;
                    vh.current = null === a || null === a.memoizedState ? Dh : Eh;
                    a = c(d, e);
                    if (zh) {
                      f = 0;
                      do {
                        zh = false;
                        if (!(25 > f)) throw Error(y(301));
                        f += 1;
                        T = S = null;
                        b.updateQueue = null;
                        vh.current = Fh;
                        a = c(d, e);
                      } while (zh);
                    }
                    vh.current = Gh;
                    b = null !== S && null !== S.next;
                    xh = 0;
                    T = S = R = null;
                    yh = false;
                    if (b) throw Error(y(300));
                    return a;
                  }
                  function Hh() {
                    var a = { memoizedState: null, baseState: null, baseQueue: null, queue: null, next: null };
                    null === T ? R.memoizedState = T = a : T = T.next = a;
                    return T;
                  }
                  function Ih() {
                    if (null === S) {
                      var a = R.alternate;
                      a = null !== a ? a.memoizedState : null;
                    } else a = S.next;
                    var b = null === T ? R.memoizedState : T.next;
                    if (null !== b) T = b, S = a;
                    else {
                      if (null === a) throw Error(y(310));
                      S = a;
                      a = { memoizedState: S.memoizedState, baseState: S.baseState, baseQueue: S.baseQueue, queue: S.queue, next: null };
                      null === T ? R.memoizedState = T = a : T = T.next = a;
                    }
                    return T;
                  }
                  function Jh(a, b) {
                    return "function" === typeof b ? b(a) : b;
                  }
                  function Kh(a) {
                    var b = Ih(), c = b.queue;
                    if (null === c) throw Error(y(311));
                    c.lastRenderedReducer = a;
                    var d = S, e = d.baseQueue, f = c.pending;
                    if (null !== f) {
                      if (null !== e) {
                        var g = e.next;
                        e.next = f.next;
                        f.next = g;
                      }
                      d.baseQueue = e = f;
                      c.pending = null;
                    }
                    if (null !== e) {
                      e = e.next;
                      d = d.baseState;
                      var h = g = f = null, k = e;
                      do {
                        var l = k.lane;
                        if ((xh & l) === l) null !== h && (h = h.next = { lane: 0, action: k.action, eagerReducer: k.eagerReducer, eagerState: k.eagerState, next: null }), d = k.eagerReducer === a ? k.eagerState : a(d, k.action);
                        else {
                          var n = {
                            lane: l,
                            action: k.action,
                            eagerReducer: k.eagerReducer,
                            eagerState: k.eagerState,
                            next: null
                          };
                          null === h ? (g = h = n, f = d) : h = h.next = n;
                          R.lanes |= l;
                          Dg |= l;
                        }
                        k = k.next;
                      } while (null !== k && k !== e);
                      null === h ? f = d : h.next = g;
                      He(d, b.memoizedState) || (ug = true);
                      b.memoizedState = d;
                      b.baseState = f;
                      b.baseQueue = h;
                      c.lastRenderedState = d;
                    }
                    return [b.memoizedState, c.dispatch];
                  }
                  function Lh(a) {
                    var b = Ih(), c = b.queue;
                    if (null === c) throw Error(y(311));
                    c.lastRenderedReducer = a;
                    var d = c.dispatch, e = c.pending, f = b.memoizedState;
                    if (null !== e) {
                      c.pending = null;
                      var g = e = e.next;
                      do
                        f = a(f, g.action), g = g.next;
                      while (g !== e);
                      He(f, b.memoizedState) || (ug = true);
                      b.memoizedState = f;
                      null === b.baseQueue && (b.baseState = f);
                      c.lastRenderedState = f;
                    }
                    return [f, d];
                  }
                  function Mh(a, b, c) {
                    var d = b._getVersion;
                    d = d(b._source);
                    var e = b._workInProgressVersionPrimary;
                    if (null !== e) a = e === d;
                    else if (a = a.mutableReadLanes, a = (xh & a) === a) b._workInProgressVersionPrimary = d, th.push(b);
                    if (a) return c(b._source);
                    th.push(b);
                    throw Error(y(350));
                  }
                  function Nh(a, b, c, d) {
                    var e = U;
                    if (null === e) throw Error(y(349));
                    var f = b._getVersion, g = f(b._source), h = vh.current, k = h.useState(function() {
                      return Mh(e, b, c);
                    }), l = k[1], n = k[0];
                    k = T;
                    var A = a.memoizedState, p = A.refs, C = p.getSnapshot, x = A.source;
                    A = A.subscribe;
                    var w = R;
                    a.memoizedState = { refs: p, source: b, subscribe: d };
                    h.useEffect(function() {
                      p.getSnapshot = c;
                      p.setSnapshot = l;
                      var a2 = f(b._source);
                      if (!He(g, a2)) {
                        a2 = c(b._source);
                        He(n, a2) || (l(a2), a2 = Ig(w), e.mutableReadLanes |= a2 & e.pendingLanes);
                        a2 = e.mutableReadLanes;
                        e.entangledLanes |= a2;
                        for (var d2 = e.entanglements, h2 = a2; 0 < h2; ) {
                          var k2 = 31 - Vc(h2), v = 1 << k2;
                          d2[k2] |= a2;
                          h2 &= ~v;
                        }
                      }
                    }, [c, b, d]);
                    h.useEffect(function() {
                      return d(b._source, function() {
                        var a2 = p.getSnapshot, c2 = p.setSnapshot;
                        try {
                          c2(a2(b._source));
                          var d2 = Ig(w);
                          e.mutableReadLanes |= d2 & e.pendingLanes;
                        } catch (q) {
                          c2(function() {
                            throw q;
                          });
                        }
                      });
                    }, [b, d]);
                    He(C, c) && He(x, b) && He(A, d) || (a = { pending: null, dispatch: null, lastRenderedReducer: Jh, lastRenderedState: n }, a.dispatch = l = Oh.bind(null, R, a), k.queue = a, k.baseQueue = null, n = Mh(e, b, c), k.memoizedState = k.baseState = n);
                    return n;
                  }
                  function Ph(a, b, c) {
                    var d = Ih();
                    return Nh(d, a, b, c);
                  }
                  function Qh(a) {
                    var b = Hh();
                    "function" === typeof a && (a = a());
                    b.memoizedState = b.baseState = a;
                    a = b.queue = { pending: null, dispatch: null, lastRenderedReducer: Jh, lastRenderedState: a };
                    a = a.dispatch = Oh.bind(null, R, a);
                    return [b.memoizedState, a];
                  }
                  function Rh(a, b, c, d) {
                    a = { tag: a, create: b, destroy: c, deps: d, next: null };
                    b = R.updateQueue;
                    null === b ? (b = { lastEffect: null }, R.updateQueue = b, b.lastEffect = a.next = a) : (c = b.lastEffect, null === c ? b.lastEffect = a.next = a : (d = c.next, c.next = a, a.next = d, b.lastEffect = a));
                    return a;
                  }
                  function Sh(a) {
                    var b = Hh();
                    a = { current: a };
                    return b.memoizedState = a;
                  }
                  function Th() {
                    return Ih().memoizedState;
                  }
                  function Uh(a, b, c, d) {
                    var e = Hh();
                    R.flags |= a;
                    e.memoizedState = Rh(1 | b, c, void 0, void 0 === d ? null : d);
                  }
                  function Vh(a, b, c, d) {
                    var e = Ih();
                    d = void 0 === d ? null : d;
                    var f = void 0;
                    if (null !== S) {
                      var g = S.memoizedState;
                      f = g.destroy;
                      if (null !== d && Bh(d, g.deps)) {
                        Rh(b, c, f, d);
                        return;
                      }
                    }
                    R.flags |= a;
                    e.memoizedState = Rh(1 | b, c, f, d);
                  }
                  function Wh(a, b) {
                    return Uh(516, 4, a, b);
                  }
                  function Xh(a, b) {
                    return Vh(516, 4, a, b);
                  }
                  function Yh(a, b) {
                    return Vh(4, 2, a, b);
                  }
                  function Zh(a, b) {
                    if ("function" === typeof b) return a = a(), b(a), function() {
                      b(null);
                    };
                    if (null !== b && void 0 !== b) return a = a(), b.current = a, function() {
                      b.current = null;
                    };
                  }
                  function $h(a, b, c) {
                    c = null !== c && void 0 !== c ? c.concat([a]) : null;
                    return Vh(4, 2, Zh.bind(null, b, a), c);
                  }
                  function ai() {
                  }
                  function bi(a, b) {
                    var c = Ih();
                    b = void 0 === b ? null : b;
                    var d = c.memoizedState;
                    if (null !== d && null !== b && Bh(b, d[1])) return d[0];
                    c.memoizedState = [a, b];
                    return a;
                  }
                  function ci(a, b) {
                    var c = Ih();
                    b = void 0 === b ? null : b;
                    var d = c.memoizedState;
                    if (null !== d && null !== b && Bh(b, d[1])) return d[0];
                    a = a();
                    c.memoizedState = [a, b];
                    return a;
                  }
                  function di(a, b) {
                    var c = eg();
                    gg(98 > c ? 98 : c, function() {
                      a(true);
                    });
                    gg(97 < c ? 97 : c, function() {
                      var c2 = wh.transition;
                      wh.transition = 1;
                      try {
                        a(false), b();
                      } finally {
                        wh.transition = c2;
                      }
                    });
                  }
                  function Oh(a, b, c) {
                    var d = Hg(), e = Ig(a), f = { lane: e, action: c, eagerReducer: null, eagerState: null, next: null }, g = b.pending;
                    null === g ? f.next = f : (f.next = g.next, g.next = f);
                    b.pending = f;
                    g = a.alternate;
                    if (a === R || null !== g && g === R) zh = yh = true;
                    else {
                      if (0 === a.lanes && (null === g || 0 === g.lanes) && (g = b.lastRenderedReducer, null !== g)) try {
                        var h = b.lastRenderedState, k = g(h, c);
                        f.eagerReducer = g;
                        f.eagerState = k;
                        if (He(k, h)) return;
                      } catch (l) {
                      } finally {
                      }
                      Jg(a, e, d);
                    }
                  }
                  var Gh = { readContext: vg, useCallback: Ah, useContext: Ah, useEffect: Ah, useImperativeHandle: Ah, useLayoutEffect: Ah, useMemo: Ah, useReducer: Ah, useRef: Ah, useState: Ah, useDebugValue: Ah, useDeferredValue: Ah, useTransition: Ah, useMutableSource: Ah, useOpaqueIdentifier: Ah, unstable_isNewReconciler: false }, Dh = { readContext: vg, useCallback: function(a, b) {
                    Hh().memoizedState = [a, void 0 === b ? null : b];
                    return a;
                  }, useContext: vg, useEffect: Wh, useImperativeHandle: function(a, b, c) {
                    c = null !== c && void 0 !== c ? c.concat([a]) : null;
                    return Uh(4, 2, Zh.bind(
                      null,
                      b,
                      a
                    ), c);
                  }, useLayoutEffect: function(a, b) {
                    return Uh(4, 2, a, b);
                  }, useMemo: function(a, b) {
                    var c = Hh();
                    b = void 0 === b ? null : b;
                    a = a();
                    c.memoizedState = [a, b];
                    return a;
                  }, useReducer: function(a, b, c) {
                    var d = Hh();
                    b = void 0 !== c ? c(b) : b;
                    d.memoizedState = d.baseState = b;
                    a = d.queue = { pending: null, dispatch: null, lastRenderedReducer: a, lastRenderedState: b };
                    a = a.dispatch = Oh.bind(null, R, a);
                    return [d.memoizedState, a];
                  }, useRef: Sh, useState: Qh, useDebugValue: ai, useDeferredValue: function(a) {
                    var b = Qh(a), c = b[0], d = b[1];
                    Wh(function() {
                      var b2 = wh.transition;
                      wh.transition = 1;
                      try {
                        d(a);
                      } finally {
                        wh.transition = b2;
                      }
                    }, [a]);
                    return c;
                  }, useTransition: function() {
                    var a = Qh(false), b = a[0];
                    a = di.bind(null, a[1]);
                    Sh(a);
                    return [a, b];
                  }, useMutableSource: function(a, b, c) {
                    var d = Hh();
                    d.memoizedState = { refs: { getSnapshot: b, setSnapshot: null }, source: a, subscribe: c };
                    return Nh(d, a, b, c);
                  }, useOpaqueIdentifier: function() {
                    if (lh) {
                      var a = false, b = uf(function() {
                        a || (a = true, c("r:" + (tf++).toString(36)));
                        throw Error(y(355));
                      }), c = Qh(b)[1];
                      0 === (R.mode & 2) && (R.flags |= 516, Rh(
                        5,
                        function() {
                          c("r:" + (tf++).toString(36));
                        },
                        void 0,
                        null
                      ));
                      return b;
                    }
                    b = "r:" + (tf++).toString(36);
                    Qh(b);
                    return b;
                  }, unstable_isNewReconciler: false }, Eh = { readContext: vg, useCallback: bi, useContext: vg, useEffect: Xh, useImperativeHandle: $h, useLayoutEffect: Yh, useMemo: ci, useReducer: Kh, useRef: Th, useState: function() {
                    return Kh(Jh);
                  }, useDebugValue: ai, useDeferredValue: function(a) {
                    var b = Kh(Jh), c = b[0], d = b[1];
                    Xh(function() {
                      var b2 = wh.transition;
                      wh.transition = 1;
                      try {
                        d(a);
                      } finally {
                        wh.transition = b2;
                      }
                    }, [a]);
                    return c;
                  }, useTransition: function() {
                    var a = Kh(Jh)[0];
                    return [
                      Th().current,
                      a
                    ];
                  }, useMutableSource: Ph, useOpaqueIdentifier: function() {
                    return Kh(Jh)[0];
                  }, unstable_isNewReconciler: false }, Fh = { readContext: vg, useCallback: bi, useContext: vg, useEffect: Xh, useImperativeHandle: $h, useLayoutEffect: Yh, useMemo: ci, useReducer: Lh, useRef: Th, useState: function() {
                    return Lh(Jh);
                  }, useDebugValue: ai, useDeferredValue: function(a) {
                    var b = Lh(Jh), c = b[0], d = b[1];
                    Xh(function() {
                      var b2 = wh.transition;
                      wh.transition = 1;
                      try {
                        d(a);
                      } finally {
                        wh.transition = b2;
                      }
                    }, [a]);
                    return c;
                  }, useTransition: function() {
                    var a = Lh(Jh)[0];
                    return [
                      Th().current,
                      a
                    ];
                  }, useMutableSource: Ph, useOpaqueIdentifier: function() {
                    return Lh(Jh)[0];
                  }, unstable_isNewReconciler: false }, ei = ra.ReactCurrentOwner, ug = false;
                  function fi(a, b, c, d) {
                    b.child = null === a ? Zg(b, null, c, d) : Yg(b, a.child, c, d);
                  }
                  function gi(a, b, c, d, e) {
                    c = c.render;
                    var f = b.ref;
                    tg(b, e);
                    d = Ch(a, b, c, d, f, e);
                    if (null !== a && !ug) return b.updateQueue = a.updateQueue, b.flags &= -517, a.lanes &= ~e, hi(a, b, e);
                    b.flags |= 1;
                    fi(a, b, d, e);
                    return b.child;
                  }
                  function ii(a, b, c, d, e, f) {
                    if (null === a) {
                      var g = c.type;
                      if ("function" === typeof g && !ji(g) && void 0 === g.defaultProps && null === c.compare && void 0 === c.defaultProps) return b.tag = 15, b.type = g, ki(a, b, g, d, e, f);
                      a = Vg(c.type, null, d, b, b.mode, f);
                      a.ref = b.ref;
                      a.return = b;
                      return b.child = a;
                    }
                    g = a.child;
                    if (0 === (e & f) && (e = g.memoizedProps, c = c.compare, c = null !== c ? c : Je, c(e, d) && a.ref === b.ref)) return hi(a, b, f);
                    b.flags |= 1;
                    a = Tg(g, d);
                    a.ref = b.ref;
                    a.return = b;
                    return b.child = a;
                  }
                  function ki(a, b, c, d, e, f) {
                    if (null !== a && Je(a.memoizedProps, d) && a.ref === b.ref) if (ug = false, 0 !== (f & e)) 0 !== (a.flags & 16384) && (ug = true);
                    else return b.lanes = a.lanes, hi(a, b, f);
                    return li(a, b, c, d, f);
                  }
                  function mi(a, b, c) {
                    var d = b.pendingProps, e = d.children, f = null !== a ? a.memoizedState : null;
                    if ("hidden" === d.mode || "unstable-defer-without-hiding" === d.mode) if (0 === (b.mode & 4)) b.memoizedState = { baseLanes: 0 }, ni(b, c);
                    else if (0 !== (c & 1073741824)) b.memoizedState = { baseLanes: 0 }, ni(b, null !== f ? f.baseLanes : c);
                    else return a = null !== f ? f.baseLanes | c : c, b.lanes = b.childLanes = 1073741824, b.memoizedState = { baseLanes: a }, ni(b, a), null;
                    else null !== f ? (d = f.baseLanes | c, b.memoizedState = null) : d = c, ni(b, d);
                    fi(a, b, e, c);
                    return b.child;
                  }
                  function oi(a, b) {
                    var c = b.ref;
                    if (null === a && null !== c || null !== a && a.ref !== c) b.flags |= 128;
                  }
                  function li(a, b, c, d, e) {
                    var f = Ff(c) ? Df : M.current;
                    f = Ef(b, f);
                    tg(b, e);
                    c = Ch(a, b, c, d, f, e);
                    if (null !== a && !ug) return b.updateQueue = a.updateQueue, b.flags &= -517, a.lanes &= ~e, hi(a, b, e);
                    b.flags |= 1;
                    fi(a, b, c, e);
                    return b.child;
                  }
                  function pi(a, b, c, d, e) {
                    if (Ff(c)) {
                      var f = true;
                      Jf(b);
                    } else f = false;
                    tg(b, e);
                    if (null === b.stateNode) null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2), Mg(b, c, d), Og(b, c, d, e), d = true;
                    else if (null === a) {
                      var g = b.stateNode, h = b.memoizedProps;
                      g.props = h;
                      var k = g.context, l = c.contextType;
                      "object" === typeof l && null !== l ? l = vg(l) : (l = Ff(c) ? Df : M.current, l = Ef(b, l));
                      var n = c.getDerivedStateFromProps, A = "function" === typeof n || "function" === typeof g.getSnapshotBeforeUpdate;
                      A || "function" !== typeof g.UNSAFE_componentWillReceiveProps && "function" !== typeof g.componentWillReceiveProps || (h !== d || k !== l) && Ng(b, g, d, l);
                      wg = false;
                      var p = b.memoizedState;
                      g.state = p;
                      Cg(b, d, g, e);
                      k = b.memoizedState;
                      h !== d || p !== k || N.current || wg ? ("function" === typeof n && (Gg(b, c, n, d), k = b.memoizedState), (h = wg || Lg(b, c, h, d, p, k, l)) ? (A || "function" !== typeof g.UNSAFE_componentWillMount && "function" !== typeof g.componentWillMount || ("function" === typeof g.componentWillMount && g.componentWillMount(), "function" === typeof g.UNSAFE_componentWillMount && g.UNSAFE_componentWillMount()), "function" === typeof g.componentDidMount && (b.flags |= 4)) : ("function" === typeof g.componentDidMount && (b.flags |= 4), b.memoizedProps = d, b.memoizedState = k), g.props = d, g.state = k, g.context = l, d = h) : ("function" === typeof g.componentDidMount && (b.flags |= 4), d = false);
                    } else {
                      g = b.stateNode;
                      yg(a, b);
                      h = b.memoizedProps;
                      l = b.type === b.elementType ? h : lg(b.type, h);
                      g.props = l;
                      A = b.pendingProps;
                      p = g.context;
                      k = c.contextType;
                      "object" === typeof k && null !== k ? k = vg(k) : (k = Ff(c) ? Df : M.current, k = Ef(b, k));
                      var C = c.getDerivedStateFromProps;
                      (n = "function" === typeof C || "function" === typeof g.getSnapshotBeforeUpdate) || "function" !== typeof g.UNSAFE_componentWillReceiveProps && "function" !== typeof g.componentWillReceiveProps || (h !== A || p !== k) && Ng(b, g, d, k);
                      wg = false;
                      p = b.memoizedState;
                      g.state = p;
                      Cg(b, d, g, e);
                      var x = b.memoizedState;
                      h !== A || p !== x || N.current || wg ? ("function" === typeof C && (Gg(b, c, C, d), x = b.memoizedState), (l = wg || Lg(b, c, l, d, p, x, k)) ? (n || "function" !== typeof g.UNSAFE_componentWillUpdate && "function" !== typeof g.componentWillUpdate || ("function" === typeof g.componentWillUpdate && g.componentWillUpdate(
                        d,
                        x,
                        k
                      ), "function" === typeof g.UNSAFE_componentWillUpdate && g.UNSAFE_componentWillUpdate(d, x, k)), "function" === typeof g.componentDidUpdate && (b.flags |= 4), "function" === typeof g.getSnapshotBeforeUpdate && (b.flags |= 256)) : ("function" !== typeof g.componentDidUpdate || h === a.memoizedProps && p === a.memoizedState || (b.flags |= 4), "function" !== typeof g.getSnapshotBeforeUpdate || h === a.memoizedProps && p === a.memoizedState || (b.flags |= 256), b.memoizedProps = d, b.memoizedState = x), g.props = d, g.state = x, g.context = k, d = l) : ("function" !== typeof g.componentDidUpdate || h === a.memoizedProps && p === a.memoizedState || (b.flags |= 4), "function" !== typeof g.getSnapshotBeforeUpdate || h === a.memoizedProps && p === a.memoizedState || (b.flags |= 256), d = false);
                    }
                    return qi(a, b, c, d, f, e);
                  }
                  function qi(a, b, c, d, e, f) {
                    oi(a, b);
                    var g = 0 !== (b.flags & 64);
                    if (!d && !g) return e && Kf(b, c, false), hi(a, b, f);
                    d = b.stateNode;
                    ei.current = b;
                    var h = g && "function" !== typeof c.getDerivedStateFromError ? null : d.render();
                    b.flags |= 1;
                    null !== a && g ? (b.child = Yg(b, a.child, null, f), b.child = Yg(b, null, h, f)) : fi(a, b, h, f);
                    b.memoizedState = d.state;
                    e && Kf(b, c, true);
                    return b.child;
                  }
                  function ri(a) {
                    var b = a.stateNode;
                    b.pendingContext ? Hf(a, b.pendingContext, b.pendingContext !== b.context) : b.context && Hf(a, b.context, false);
                    eh(a, b.containerInfo);
                  }
                  var si = { dehydrated: null, retryLane: 0 };
                  function ti(a, b, c) {
                    var d = b.pendingProps, e = P.current, f = false, g;
                    (g = 0 !== (b.flags & 64)) || (g = null !== a && null === a.memoizedState ? false : 0 !== (e & 2));
                    g ? (f = true, b.flags &= -65) : null !== a && null === a.memoizedState || void 0 === d.fallback || true === d.unstable_avoidThisFallback || (e |= 1);
                    I(P, e & 1);
                    if (null === a) {
                      void 0 !== d.fallback && ph(b);
                      a = d.children;
                      e = d.fallback;
                      if (f) return a = ui(b, a, e, c), b.child.memoizedState = { baseLanes: c }, b.memoizedState = si, a;
                      if ("number" === typeof d.unstable_expectedLoadTime) return a = ui(b, a, e, c), b.child.memoizedState = { baseLanes: c }, b.memoizedState = si, b.lanes = 33554432, a;
                      c = vi({ mode: "visible", children: a }, b.mode, c, null);
                      c.return = b;
                      return b.child = c;
                    }
                    if (null !== a.memoizedState) {
                      if (f) return d = wi(a, b, d.children, d.fallback, c), f = b.child, e = a.child.memoizedState, f.memoizedState = null === e ? { baseLanes: c } : { baseLanes: e.baseLanes | c }, f.childLanes = a.childLanes & ~c, b.memoizedState = si, d;
                      c = xi(a, b, d.children, c);
                      b.memoizedState = null;
                      return c;
                    }
                    if (f) return d = wi(a, b, d.children, d.fallback, c), f = b.child, e = a.child.memoizedState, f.memoizedState = null === e ? { baseLanes: c } : { baseLanes: e.baseLanes | c }, f.childLanes = a.childLanes & ~c, b.memoizedState = si, d;
                    c = xi(a, b, d.children, c);
                    b.memoizedState = null;
                    return c;
                  }
                  function ui(a, b, c, d) {
                    var e = a.mode, f = a.child;
                    b = { mode: "hidden", children: b };
                    0 === (e & 2) && null !== f ? (f.childLanes = 0, f.pendingProps = b) : f = vi(b, e, 0, null);
                    c = Xg(c, e, d, null);
                    f.return = a;
                    c.return = a;
                    f.sibling = c;
                    a.child = f;
                    return c;
                  }
                  function xi(a, b, c, d) {
                    var e = a.child;
                    a = e.sibling;
                    c = Tg(e, { mode: "visible", children: c });
                    0 === (b.mode & 2) && (c.lanes = d);
                    c.return = b;
                    c.sibling = null;
                    null !== a && (a.nextEffect = null, a.flags = 8, b.firstEffect = b.lastEffect = a);
                    return b.child = c;
                  }
                  function wi(a, b, c, d, e) {
                    var f = b.mode, g = a.child;
                    a = g.sibling;
                    var h = { mode: "hidden", children: c };
                    0 === (f & 2) && b.child !== g ? (c = b.child, c.childLanes = 0, c.pendingProps = h, g = c.lastEffect, null !== g ? (b.firstEffect = c.firstEffect, b.lastEffect = g, g.nextEffect = null) : b.firstEffect = b.lastEffect = null) : c = Tg(g, h);
                    null !== a ? d = Tg(a, d) : (d = Xg(d, f, e, null), d.flags |= 2);
                    d.return = b;
                    c.return = b;
                    c.sibling = d;
                    b.child = c;
                    return d;
                  }
                  function yi(a, b) {
                    a.lanes |= b;
                    var c = a.alternate;
                    null !== c && (c.lanes |= b);
                    sg(a.return, b);
                  }
                  function zi(a, b, c, d, e, f) {
                    var g = a.memoizedState;
                    null === g ? a.memoizedState = { isBackwards: b, rendering: null, renderingStartTime: 0, last: d, tail: c, tailMode: e, lastEffect: f } : (g.isBackwards = b, g.rendering = null, g.renderingStartTime = 0, g.last = d, g.tail = c, g.tailMode = e, g.lastEffect = f);
                  }
                  function Ai(a, b, c) {
                    var d = b.pendingProps, e = d.revealOrder, f = d.tail;
                    fi(a, b, d.children, c);
                    d = P.current;
                    if (0 !== (d & 2)) d = d & 1 | 2, b.flags |= 64;
                    else {
                      if (null !== a && 0 !== (a.flags & 64)) a: for (a = b.child; null !== a; ) {
                        if (13 === a.tag) null !== a.memoizedState && yi(a, c);
                        else if (19 === a.tag) yi(a, c);
                        else if (null !== a.child) {
                          a.child.return = a;
                          a = a.child;
                          continue;
                        }
                        if (a === b) break a;
                        for (; null === a.sibling; ) {
                          if (null === a.return || a.return === b) break a;
                          a = a.return;
                        }
                        a.sibling.return = a.return;
                        a = a.sibling;
                      }
                      d &= 1;
                    }
                    I(P, d);
                    if (0 === (b.mode & 2)) b.memoizedState = null;
                    else switch (e) {
                      case "forwards":
                        c = b.child;
                        for (e = null; null !== c; ) a = c.alternate, null !== a && null === ih(a) && (e = c), c = c.sibling;
                        c = e;
                        null === c ? (e = b.child, b.child = null) : (e = c.sibling, c.sibling = null);
                        zi(b, false, e, c, f, b.lastEffect);
                        break;
                      case "backwards":
                        c = null;
                        e = b.child;
                        for (b.child = null; null !== e; ) {
                          a = e.alternate;
                          if (null !== a && null === ih(a)) {
                            b.child = e;
                            break;
                          }
                          a = e.sibling;
                          e.sibling = c;
                          c = e;
                          e = a;
                        }
                        zi(b, true, c, null, f, b.lastEffect);
                        break;
                      case "together":
                        zi(b, false, null, null, void 0, b.lastEffect);
                        break;
                      default:
                        b.memoizedState = null;
                    }
                    return b.child;
                  }
                  function hi(a, b, c) {
                    null !== a && (b.dependencies = a.dependencies);
                    Dg |= b.lanes;
                    if (0 !== (c & b.childLanes)) {
                      if (null !== a && b.child !== a.child) throw Error(y(153));
                      if (null !== b.child) {
                        a = b.child;
                        c = Tg(a, a.pendingProps);
                        b.child = c;
                        for (c.return = b; null !== a.sibling; ) a = a.sibling, c = c.sibling = Tg(a, a.pendingProps), c.return = b;
                        c.sibling = null;
                      }
                      return b.child;
                    }
                    return null;
                  }
                  var Bi, Ci, Di, Ei;
                  Bi = function(a, b) {
                    for (var c = b.child; null !== c; ) {
                      if (5 === c.tag || 6 === c.tag) a.appendChild(c.stateNode);
                      else if (4 !== c.tag && null !== c.child) {
                        c.child.return = c;
                        c = c.child;
                        continue;
                      }
                      if (c === b) break;
                      for (; null === c.sibling; ) {
                        if (null === c.return || c.return === b) return;
                        c = c.return;
                      }
                      c.sibling.return = c.return;
                      c = c.sibling;
                    }
                  };
                  Ci = function() {
                  };
                  Di = function(a, b, c, d) {
                    var e = a.memoizedProps;
                    if (e !== d) {
                      a = b.stateNode;
                      dh(ah.current);
                      var f = null;
                      switch (c) {
                        case "input":
                          e = Ya(a, e);
                          d = Ya(a, d);
                          f = [];
                          break;
                        case "option":
                          e = eb(a, e);
                          d = eb(a, d);
                          f = [];
                          break;
                        case "select":
                          e = m({}, e, { value: void 0 });
                          d = m({}, d, { value: void 0 });
                          f = [];
                          break;
                        case "textarea":
                          e = gb(a, e);
                          d = gb(a, d);
                          f = [];
                          break;
                        default:
                          "function" !== typeof e.onClick && "function" === typeof d.onClick && (a.onclick = jf);
                      }
                      vb(c, d);
                      var g;
                      c = null;
                      for (l in e) if (!d.hasOwnProperty(l) && e.hasOwnProperty(l) && null != e[l]) if ("style" === l) {
                        var h = e[l];
                        for (g in h) h.hasOwnProperty(g) && (c || (c = {}), c[g] = "");
                      } else "dangerouslySetInnerHTML" !== l && "children" !== l && "suppressContentEditableWarning" !== l && "suppressHydrationWarning" !== l && "autoFocus" !== l && (ca.hasOwnProperty(l) ? f || (f = []) : (f = f || []).push(l, null));
                      for (l in d) {
                        var k = d[l];
                        h = null != e ? e[l] : void 0;
                        if (d.hasOwnProperty(l) && k !== h && (null != k || null != h)) if ("style" === l) if (h) {
                          for (g in h) !h.hasOwnProperty(g) || k && k.hasOwnProperty(g) || (c || (c = {}), c[g] = "");
                          for (g in k) k.hasOwnProperty(g) && h[g] !== k[g] && (c || (c = {}), c[g] = k[g]);
                        } else c || (f || (f = []), f.push(l, c)), c = k;
                        else "dangerouslySetInnerHTML" === l ? (k = k ? k.__html : void 0, h = h ? h.__html : void 0, null != k && h !== k && (f = f || []).push(l, k)) : "children" === l ? "string" !== typeof k && "number" !== typeof k || (f = f || []).push(l, "" + k) : "suppressContentEditableWarning" !== l && "suppressHydrationWarning" !== l && (ca.hasOwnProperty(l) ? (null != k && "onScroll" === l && G("scroll", a), f || h === k || (f = [])) : "object" === typeof k && null !== k && k.$$typeof === Ga ? k.toString() : (f = f || []).push(l, k));
                      }
                      c && (f = f || []).push(
                        "style",
                        c
                      );
                      var l = f;
                      if (b.updateQueue = l) b.flags |= 4;
                    }
                  };
                  Ei = function(a, b, c, d) {
                    c !== d && (b.flags |= 4);
                  };
                  function Fi(a, b) {
                    if (!lh) switch (a.tailMode) {
                      case "hidden":
                        b = a.tail;
                        for (var c = null; null !== b; ) null !== b.alternate && (c = b), b = b.sibling;
                        null === c ? a.tail = null : c.sibling = null;
                        break;
                      case "collapsed":
                        c = a.tail;
                        for (var d = null; null !== c; ) null !== c.alternate && (d = c), c = c.sibling;
                        null === d ? b || null === a.tail ? a.tail = null : a.tail.sibling = null : d.sibling = null;
                    }
                  }
                  function Gi(a, b, c) {
                    var d = b.pendingProps;
                    switch (b.tag) {
                      case 2:
                      case 16:
                      case 15:
                      case 0:
                      case 11:
                      case 7:
                      case 8:
                      case 12:
                      case 9:
                      case 14:
                        return null;
                      case 1:
                        return Ff(b.type) && Gf(), null;
                      case 3:
                        fh();
                        H(N);
                        H(M);
                        uh();
                        d = b.stateNode;
                        d.pendingContext && (d.context = d.pendingContext, d.pendingContext = null);
                        if (null === a || null === a.child) rh(b) ? b.flags |= 4 : d.hydrate || (b.flags |= 256);
                        Ci(b);
                        return null;
                      case 5:
                        hh(b);
                        var e = dh(ch.current);
                        c = b.type;
                        if (null !== a && null != b.stateNode) Di(a, b, c, d, e), a.ref !== b.ref && (b.flags |= 128);
                        else {
                          if (!d) {
                            if (null === b.stateNode) throw Error(y(166));
                            return null;
                          }
                          a = dh(ah.current);
                          if (rh(b)) {
                            d = b.stateNode;
                            c = b.type;
                            var f = b.memoizedProps;
                            d[wf] = b;
                            d[xf] = f;
                            switch (c) {
                              case "dialog":
                                G("cancel", d);
                                G("close", d);
                                break;
                              case "iframe":
                              case "object":
                              case "embed":
                                G("load", d);
                                break;
                              case "video":
                              case "audio":
                                for (a = 0; a < Xe.length; a++) G(Xe[a], d);
                                break;
                              case "source":
                                G("error", d);
                                break;
                              case "img":
                              case "image":
                              case "link":
                                G("error", d);
                                G("load", d);
                                break;
                              case "details":
                                G("toggle", d);
                                break;
                              case "input":
                                Za(d, f);
                                G("invalid", d);
                                break;
                              case "select":
                                d._wrapperState = { wasMultiple: !!f.multiple };
                                G("invalid", d);
                                break;
                              case "textarea":
                                hb(d, f), G("invalid", d);
                            }
                            vb(c, f);
                            a = null;
                            for (var g in f) f.hasOwnProperty(g) && (e = f[g], "children" === g ? "string" === typeof e ? d.textContent !== e && (a = ["children", e]) : "number" === typeof e && d.textContent !== "" + e && (a = ["children", "" + e]) : ca.hasOwnProperty(g) && null != e && "onScroll" === g && G("scroll", d));
                            switch (c) {
                              case "input":
                                Va(d);
                                cb(d, f, true);
                                break;
                              case "textarea":
                                Va(d);
                                jb(d);
                                break;
                              case "select":
                              case "option":
                                break;
                              default:
                                "function" === typeof f.onClick && (d.onclick = jf);
                            }
                            d = a;
                            b.updateQueue = d;
                            null !== d && (b.flags |= 4);
                          } else {
                            g = 9 === e.nodeType ? e : e.ownerDocument;
                            a === kb.html && (a = lb(c));
                            a === kb.html ? "script" === c ? (a = g.createElement("div"), a.innerHTML = "<script><\/script>", a = a.removeChild(a.firstChild)) : "string" === typeof d.is ? a = g.createElement(c, { is: d.is }) : (a = g.createElement(c), "select" === c && (g = a, d.multiple ? g.multiple = true : d.size && (g.size = d.size))) : a = g.createElementNS(a, c);
                            a[wf] = b;
                            a[xf] = d;
                            Bi(a, b, false, false);
                            b.stateNode = a;
                            g = wb(c, d);
                            switch (c) {
                              case "dialog":
                                G("cancel", a);
                                G("close", a);
                                e = d;
                                break;
                              case "iframe":
                              case "object":
                              case "embed":
                                G("load", a);
                                e = d;
                                break;
                              case "video":
                              case "audio":
                                for (e = 0; e < Xe.length; e++) G(Xe[e], a);
                                e = d;
                                break;
                              case "source":
                                G("error", a);
                                e = d;
                                break;
                              case "img":
                              case "image":
                              case "link":
                                G("error", a);
                                G("load", a);
                                e = d;
                                break;
                              case "details":
                                G("toggle", a);
                                e = d;
                                break;
                              case "input":
                                Za(a, d);
                                e = Ya(a, d);
                                G("invalid", a);
                                break;
                              case "option":
                                e = eb(a, d);
                                break;
                              case "select":
                                a._wrapperState = { wasMultiple: !!d.multiple };
                                e = m({}, d, { value: void 0 });
                                G("invalid", a);
                                break;
                              case "textarea":
                                hb(a, d);
                                e = gb(a, d);
                                G("invalid", a);
                                break;
                              default:
                                e = d;
                            }
                            vb(c, e);
                            var h = e;
                            for (f in h) if (h.hasOwnProperty(f)) {
                              var k = h[f];
                              "style" === f ? tb(a, k) : "dangerouslySetInnerHTML" === f ? (k = k ? k.__html : void 0, null != k && ob(a, k)) : "children" === f ? "string" === typeof k ? ("textarea" !== c || "" !== k) && pb(a, k) : "number" === typeof k && pb(a, "" + k) : "suppressContentEditableWarning" !== f && "suppressHydrationWarning" !== f && "autoFocus" !== f && (ca.hasOwnProperty(f) ? null != k && "onScroll" === f && G("scroll", a) : null != k && qa(a, f, k, g));
                            }
                            switch (c) {
                              case "input":
                                Va(a);
                                cb(a, d, false);
                                break;
                              case "textarea":
                                Va(a);
                                jb(a);
                                break;
                              case "option":
                                null != d.value && a.setAttribute("value", "" + Sa(d.value));
                                break;
                              case "select":
                                a.multiple = !!d.multiple;
                                f = d.value;
                                null != f ? fb(a, !!d.multiple, f, false) : null != d.defaultValue && fb(a, !!d.multiple, d.defaultValue, true);
                                break;
                              default:
                                "function" === typeof e.onClick && (a.onclick = jf);
                            }
                            mf(c, d) && (b.flags |= 4);
                          }
                          null !== b.ref && (b.flags |= 128);
                        }
                        return null;
                      case 6:
                        if (a && null != b.stateNode) Ei(a, b, a.memoizedProps, d);
                        else {
                          if ("string" !== typeof d && null === b.stateNode) throw Error(y(166));
                          c = dh(ch.current);
                          dh(ah.current);
                          rh(b) ? (d = b.stateNode, c = b.memoizedProps, d[wf] = b, d.nodeValue !== c && (b.flags |= 4)) : (d = (9 === c.nodeType ? c : c.ownerDocument).createTextNode(d), d[wf] = b, b.stateNode = d);
                        }
                        return null;
                      case 13:
                        H(P);
                        d = b.memoizedState;
                        if (0 !== (b.flags & 64)) return b.lanes = c, b;
                        d = null !== d;
                        c = false;
                        null === a ? void 0 !== b.memoizedProps.fallback && rh(b) : c = null !== a.memoizedState;
                        if (d && !c && 0 !== (b.mode & 2)) if (null === a && true !== b.memoizedProps.unstable_avoidThisFallback || 0 !== (P.current & 1)) 0 === V && (V = 3);
                        else {
                          if (0 === V || 3 === V) V = 4;
                          null === U || 0 === (Dg & 134217727) && 0 === (Hi & 134217727) || Ii(U, W);
                        }
                        if (d || c) b.flags |= 4;
                        return null;
                      case 4:
                        return fh(), Ci(b), null === a && cf(b.stateNode.containerInfo), null;
                      case 10:
                        return rg(b), null;
                      case 17:
                        return Ff(b.type) && Gf(), null;
                      case 19:
                        H(P);
                        d = b.memoizedState;
                        if (null === d) return null;
                        f = 0 !== (b.flags & 64);
                        g = d.rendering;
                        if (null === g) if (f) Fi(d, false);
                        else {
                          if (0 !== V || null !== a && 0 !== (a.flags & 64)) for (a = b.child; null !== a; ) {
                            g = ih(a);
                            if (null !== g) {
                              b.flags |= 64;
                              Fi(d, false);
                              f = g.updateQueue;
                              null !== f && (b.updateQueue = f, b.flags |= 4);
                              null === d.lastEffect && (b.firstEffect = null);
                              b.lastEffect = d.lastEffect;
                              d = c;
                              for (c = b.child; null !== c; ) f = c, a = d, f.flags &= 2, f.nextEffect = null, f.firstEffect = null, f.lastEffect = null, g = f.alternate, null === g ? (f.childLanes = 0, f.lanes = a, f.child = null, f.memoizedProps = null, f.memoizedState = null, f.updateQueue = null, f.dependencies = null, f.stateNode = null) : (f.childLanes = g.childLanes, f.lanes = g.lanes, f.child = g.child, f.memoizedProps = g.memoizedProps, f.memoizedState = g.memoizedState, f.updateQueue = g.updateQueue, f.type = g.type, a = g.dependencies, f.dependencies = null === a ? null : { lanes: a.lanes, firstContext: a.firstContext }), c = c.sibling;
                              I(P, P.current & 1 | 2);
                              return b.child;
                            }
                            a = a.sibling;
                          }
                          null !== d.tail && O() > Ji && (b.flags |= 64, f = true, Fi(d, false), b.lanes = 33554432);
                        }
                        else {
                          if (!f) if (a = ih(g), null !== a) {
                            if (b.flags |= 64, f = true, c = a.updateQueue, null !== c && (b.updateQueue = c, b.flags |= 4), Fi(d, true), null === d.tail && "hidden" === d.tailMode && !g.alternate && !lh) return b = b.lastEffect = d.lastEffect, null !== b && (b.nextEffect = null), null;
                          } else 2 * O() - d.renderingStartTime > Ji && 1073741824 !== c && (b.flags |= 64, f = true, Fi(d, false), b.lanes = 33554432);
                          d.isBackwards ? (g.sibling = b.child, b.child = g) : (c = d.last, null !== c ? c.sibling = g : b.child = g, d.last = g);
                        }
                        return null !== d.tail ? (c = d.tail, d.rendering = c, d.tail = c.sibling, d.lastEffect = b.lastEffect, d.renderingStartTime = O(), c.sibling = null, b = P.current, I(P, f ? b & 1 | 2 : b & 1), c) : null;
                      case 23:
                      case 24:
                        return Ki(), null !== a && null !== a.memoizedState !== (null !== b.memoizedState) && "unstable-defer-without-hiding" !== d.mode && (b.flags |= 4), null;
                    }
                    throw Error(y(156, b.tag));
                  }
                  function Li(a) {
                    switch (a.tag) {
                      case 1:
                        Ff(a.type) && Gf();
                        var b = a.flags;
                        return b & 4096 ? (a.flags = b & -4097 | 64, a) : null;
                      case 3:
                        fh();
                        H(N);
                        H(M);
                        uh();
                        b = a.flags;
                        if (0 !== (b & 64)) throw Error(y(285));
                        a.flags = b & -4097 | 64;
                        return a;
                      case 5:
                        return hh(a), null;
                      case 13:
                        return H(P), b = a.flags, b & 4096 ? (a.flags = b & -4097 | 64, a) : null;
                      case 19:
                        return H(P), null;
                      case 4:
                        return fh(), null;
                      case 10:
                        return rg(a), null;
                      case 23:
                      case 24:
                        return Ki(), null;
                      default:
                        return null;
                    }
                  }
                  function Mi(a, b) {
                    try {
                      var c = "", d = b;
                      do
                        c += Qa(d), d = d.return;
                      while (d);
                      var e = c;
                    } catch (f) {
                      e = "\nError generating stack: " + f.message + "\n" + f.stack;
                    }
                    return { value: a, source: b, stack: e };
                  }
                  function Ni(a, b) {
                    try {
                      console.error(b.value);
                    } catch (c) {
                      setTimeout(function() {
                        throw c;
                      });
                    }
                  }
                  var Oi = "function" === typeof WeakMap ? WeakMap : Map;
                  function Pi(a, b, c) {
                    c = zg(-1, c);
                    c.tag = 3;
                    c.payload = { element: null };
                    var d = b.value;
                    c.callback = function() {
                      Qi || (Qi = true, Ri = d);
                      Ni(a, b);
                    };
                    return c;
                  }
                  function Si(a, b, c) {
                    c = zg(-1, c);
                    c.tag = 3;
                    var d = a.type.getDerivedStateFromError;
                    if ("function" === typeof d) {
                      var e = b.value;
                      c.payload = function() {
                        Ni(a, b);
                        return d(e);
                      };
                    }
                    var f = a.stateNode;
                    null !== f && "function" === typeof f.componentDidCatch && (c.callback = function() {
                      "function" !== typeof d && (null === Ti ? Ti = /* @__PURE__ */ new Set([this]) : Ti.add(this), Ni(a, b));
                      var c2 = b.stack;
                      this.componentDidCatch(b.value, { componentStack: null !== c2 ? c2 : "" });
                    });
                    return c;
                  }
                  var Ui = "function" === typeof WeakSet ? WeakSet : Set;
                  function Vi(a) {
                    var b = a.ref;
                    if (null !== b) if ("function" === typeof b) try {
                      b(null);
                    } catch (c) {
                      Wi(a, c);
                    }
                    else b.current = null;
                  }
                  function Xi(a, b) {
                    switch (b.tag) {
                      case 0:
                      case 11:
                      case 15:
                      case 22:
                        return;
                      case 1:
                        if (b.flags & 256 && null !== a) {
                          var c = a.memoizedProps, d = a.memoizedState;
                          a = b.stateNode;
                          b = a.getSnapshotBeforeUpdate(b.elementType === b.type ? c : lg(b.type, c), d);
                          a.__reactInternalSnapshotBeforeUpdate = b;
                        }
                        return;
                      case 3:
                        b.flags & 256 && qf(b.stateNode.containerInfo);
                        return;
                      case 5:
                      case 6:
                      case 4:
                      case 17:
                        return;
                    }
                    throw Error(y(163));
                  }
                  function Yi(a, b, c) {
                    switch (c.tag) {
                      case 0:
                      case 11:
                      case 15:
                      case 22:
                        b = c.updateQueue;
                        b = null !== b ? b.lastEffect : null;
                        if (null !== b) {
                          a = b = b.next;
                          do {
                            if (3 === (a.tag & 3)) {
                              var d = a.create;
                              a.destroy = d();
                            }
                            a = a.next;
                          } while (a !== b);
                        }
                        b = c.updateQueue;
                        b = null !== b ? b.lastEffect : null;
                        if (null !== b) {
                          a = b = b.next;
                          do {
                            var e = a;
                            d = e.next;
                            e = e.tag;
                            0 !== (e & 4) && 0 !== (e & 1) && (Zi(c, a), $i(c, a));
                            a = d;
                          } while (a !== b);
                        }
                        return;
                      case 1:
                        a = c.stateNode;
                        c.flags & 4 && (null === b ? a.componentDidMount() : (d = c.elementType === c.type ? b.memoizedProps : lg(c.type, b.memoizedProps), a.componentDidUpdate(
                          d,
                          b.memoizedState,
                          a.__reactInternalSnapshotBeforeUpdate
                        )));
                        b = c.updateQueue;
                        null !== b && Eg(c, b, a);
                        return;
                      case 3:
                        b = c.updateQueue;
                        if (null !== b) {
                          a = null;
                          if (null !== c.child) switch (c.child.tag) {
                            case 5:
                              a = c.child.stateNode;
                              break;
                            case 1:
                              a = c.child.stateNode;
                          }
                          Eg(c, b, a);
                        }
                        return;
                      case 5:
                        a = c.stateNode;
                        null === b && c.flags & 4 && mf(c.type, c.memoizedProps) && a.focus();
                        return;
                      case 6:
                        return;
                      case 4:
                        return;
                      case 12:
                        return;
                      case 13:
                        null === c.memoizedState && (c = c.alternate, null !== c && (c = c.memoizedState, null !== c && (c = c.dehydrated, null !== c && Cc(c))));
                        return;
                      case 19:
                      case 17:
                      case 20:
                      case 21:
                      case 23:
                      case 24:
                        return;
                    }
                    throw Error(y(163));
                  }
                  function aj(a, b) {
                    for (var c = a; ; ) {
                      if (5 === c.tag) {
                        var d = c.stateNode;
                        if (b) d = d.style, "function" === typeof d.setProperty ? d.setProperty("display", "none", "important") : d.display = "none";
                        else {
                          d = c.stateNode;
                          var e = c.memoizedProps.style;
                          e = void 0 !== e && null !== e && e.hasOwnProperty("display") ? e.display : null;
                          d.style.display = sb("display", e);
                        }
                      } else if (6 === c.tag) c.stateNode.nodeValue = b ? "" : c.memoizedProps;
                      else if ((23 !== c.tag && 24 !== c.tag || null === c.memoizedState || c === a) && null !== c.child) {
                        c.child.return = c;
                        c = c.child;
                        continue;
                      }
                      if (c === a) break;
                      for (; null === c.sibling; ) {
                        if (null === c.return || c.return === a) return;
                        c = c.return;
                      }
                      c.sibling.return = c.return;
                      c = c.sibling;
                    }
                  }
                  function bj(a, b) {
                    if (Mf && "function" === typeof Mf.onCommitFiberUnmount) try {
                      Mf.onCommitFiberUnmount(Lf, b);
                    } catch (f) {
                    }
                    switch (b.tag) {
                      case 0:
                      case 11:
                      case 14:
                      case 15:
                      case 22:
                        a = b.updateQueue;
                        if (null !== a && (a = a.lastEffect, null !== a)) {
                          var c = a = a.next;
                          do {
                            var d = c, e = d.destroy;
                            d = d.tag;
                            if (void 0 !== e) if (0 !== (d & 4)) Zi(b, c);
                            else {
                              d = b;
                              try {
                                e();
                              } catch (f) {
                                Wi(d, f);
                              }
                            }
                            c = c.next;
                          } while (c !== a);
                        }
                        break;
                      case 1:
                        Vi(b);
                        a = b.stateNode;
                        if ("function" === typeof a.componentWillUnmount) try {
                          a.props = b.memoizedProps, a.state = b.memoizedState, a.componentWillUnmount();
                        } catch (f) {
                          Wi(
                            b,
                            f
                          );
                        }
                        break;
                      case 5:
                        Vi(b);
                        break;
                      case 4:
                        cj(a, b);
                    }
                  }
                  function dj(a) {
                    a.alternate = null;
                    a.child = null;
                    a.dependencies = null;
                    a.firstEffect = null;
                    a.lastEffect = null;
                    a.memoizedProps = null;
                    a.memoizedState = null;
                    a.pendingProps = null;
                    a.return = null;
                    a.updateQueue = null;
                  }
                  function ej(a) {
                    return 5 === a.tag || 3 === a.tag || 4 === a.tag;
                  }
                  function fj(a) {
                    a: {
                      for (var b = a.return; null !== b; ) {
                        if (ej(b)) break a;
                        b = b.return;
                      }
                      throw Error(y(160));
                    }
                    var c = b;
                    b = c.stateNode;
                    switch (c.tag) {
                      case 5:
                        var d = false;
                        break;
                      case 3:
                        b = b.containerInfo;
                        d = true;
                        break;
                      case 4:
                        b = b.containerInfo;
                        d = true;
                        break;
                      default:
                        throw Error(y(161));
                    }
                    c.flags & 16 && (pb(b, ""), c.flags &= -17);
                    a: b: for (c = a; ; ) {
                      for (; null === c.sibling; ) {
                        if (null === c.return || ej(c.return)) {
                          c = null;
                          break a;
                        }
                        c = c.return;
                      }
                      c.sibling.return = c.return;
                      for (c = c.sibling; 5 !== c.tag && 6 !== c.tag && 18 !== c.tag; ) {
                        if (c.flags & 2) continue b;
                        if (null === c.child || 4 === c.tag) continue b;
                        else c.child.return = c, c = c.child;
                      }
                      if (!(c.flags & 2)) {
                        c = c.stateNode;
                        break a;
                      }
                    }
                    d ? gj(a, c, b) : hj(a, c, b);
                  }
                  function gj(a, b, c) {
                    var d = a.tag, e = 5 === d || 6 === d;
                    if (e) a = e ? a.stateNode : a.stateNode.instance, b ? 8 === c.nodeType ? c.parentNode.insertBefore(a, b) : c.insertBefore(a, b) : (8 === c.nodeType ? (b = c.parentNode, b.insertBefore(a, c)) : (b = c, b.appendChild(a)), c = c._reactRootContainer, null !== c && void 0 !== c || null !== b.onclick || (b.onclick = jf));
                    else if (4 !== d && (a = a.child, null !== a)) for (gj(a, b, c), a = a.sibling; null !== a; ) gj(a, b, c), a = a.sibling;
                  }
                  function hj(a, b, c) {
                    var d = a.tag, e = 5 === d || 6 === d;
                    if (e) a = e ? a.stateNode : a.stateNode.instance, b ? c.insertBefore(a, b) : c.appendChild(a);
                    else if (4 !== d && (a = a.child, null !== a)) for (hj(a, b, c), a = a.sibling; null !== a; ) hj(a, b, c), a = a.sibling;
                  }
                  function cj(a, b) {
                    for (var c = b, d = false, e, f; ; ) {
                      if (!d) {
                        d = c.return;
                        a: for (; ; ) {
                          if (null === d) throw Error(y(160));
                          e = d.stateNode;
                          switch (d.tag) {
                            case 5:
                              f = false;
                              break a;
                            case 3:
                              e = e.containerInfo;
                              f = true;
                              break a;
                            case 4:
                              e = e.containerInfo;
                              f = true;
                              break a;
                          }
                          d = d.return;
                        }
                        d = true;
                      }
                      if (5 === c.tag || 6 === c.tag) {
                        a: for (var g = a, h = c, k = h; ; ) if (bj(g, k), null !== k.child && 4 !== k.tag) k.child.return = k, k = k.child;
                        else {
                          if (k === h) break a;
                          for (; null === k.sibling; ) {
                            if (null === k.return || k.return === h) break a;
                            k = k.return;
                          }
                          k.sibling.return = k.return;
                          k = k.sibling;
                        }
                        f ? (g = e, h = c.stateNode, 8 === g.nodeType ? g.parentNode.removeChild(h) : g.removeChild(h)) : e.removeChild(c.stateNode);
                      } else if (4 === c.tag) {
                        if (null !== c.child) {
                          e = c.stateNode.containerInfo;
                          f = true;
                          c.child.return = c;
                          c = c.child;
                          continue;
                        }
                      } else if (bj(a, c), null !== c.child) {
                        c.child.return = c;
                        c = c.child;
                        continue;
                      }
                      if (c === b) break;
                      for (; null === c.sibling; ) {
                        if (null === c.return || c.return === b) return;
                        c = c.return;
                        4 === c.tag && (d = false);
                      }
                      c.sibling.return = c.return;
                      c = c.sibling;
                    }
                  }
                  function ij(a, b) {
                    switch (b.tag) {
                      case 0:
                      case 11:
                      case 14:
                      case 15:
                      case 22:
                        var c = b.updateQueue;
                        c = null !== c ? c.lastEffect : null;
                        if (null !== c) {
                          var d = c = c.next;
                          do
                            3 === (d.tag & 3) && (a = d.destroy, d.destroy = void 0, void 0 !== a && a()), d = d.next;
                          while (d !== c);
                        }
                        return;
                      case 1:
                        return;
                      case 5:
                        c = b.stateNode;
                        if (null != c) {
                          d = b.memoizedProps;
                          var e = null !== a ? a.memoizedProps : d;
                          a = b.type;
                          var f = b.updateQueue;
                          b.updateQueue = null;
                          if (null !== f) {
                            c[xf] = d;
                            "input" === a && "radio" === d.type && null != d.name && $a(c, d);
                            wb(a, e);
                            b = wb(a, d);
                            for (e = 0; e < f.length; e += 2) {
                              var g = f[e], h = f[e + 1];
                              "style" === g ? tb(c, h) : "dangerouslySetInnerHTML" === g ? ob(c, h) : "children" === g ? pb(c, h) : qa(c, g, h, b);
                            }
                            switch (a) {
                              case "input":
                                ab(c, d);
                                break;
                              case "textarea":
                                ib(c, d);
                                break;
                              case "select":
                                a = c._wrapperState.wasMultiple, c._wrapperState.wasMultiple = !!d.multiple, f = d.value, null != f ? fb(c, !!d.multiple, f, false) : a !== !!d.multiple && (null != d.defaultValue ? fb(c, !!d.multiple, d.defaultValue, true) : fb(c, !!d.multiple, d.multiple ? [] : "", false));
                            }
                          }
                        }
                        return;
                      case 6:
                        if (null === b.stateNode) throw Error(y(162));
                        b.stateNode.nodeValue = b.memoizedProps;
                        return;
                      case 3:
                        c = b.stateNode;
                        c.hydrate && (c.hydrate = false, Cc(c.containerInfo));
                        return;
                      case 12:
                        return;
                      case 13:
                        null !== b.memoizedState && (jj = O(), aj(b.child, true));
                        kj(b);
                        return;
                      case 19:
                        kj(b);
                        return;
                      case 17:
                        return;
                      case 23:
                      case 24:
                        aj(b, null !== b.memoizedState);
                        return;
                    }
                    throw Error(y(163));
                  }
                  function kj(a) {
                    var b = a.updateQueue;
                    if (null !== b) {
                      a.updateQueue = null;
                      var c = a.stateNode;
                      null === c && (c = a.stateNode = new Ui());
                      b.forEach(function(b2) {
                        var d = lj.bind(null, a, b2);
                        c.has(b2) || (c.add(b2), b2.then(d, d));
                      });
                    }
                  }
                  function mj(a, b) {
                    return null !== a && (a = a.memoizedState, null === a || null !== a.dehydrated) ? (b = b.memoizedState, null !== b && null === b.dehydrated) : false;
                  }
                  var nj = Math.ceil, oj = ra.ReactCurrentDispatcher, pj = ra.ReactCurrentOwner, X = 0, U = null, Y = null, W = 0, qj = 0, rj = Bf(0), V = 0, sj = null, tj = 0, Dg = 0, Hi = 0, uj = 0, vj = null, jj = 0, Ji = Infinity;
                  function wj() {
                    Ji = O() + 500;
                  }
                  var Z = null, Qi = false, Ri = null, Ti = null, xj = false, yj = null, zj = 90, Aj = [], Bj = [], Cj = null, Dj = 0, Ej = null, Fj = -1, Gj = 0, Hj = 0, Ij = null, Jj = false;
                  function Hg() {
                    return 0 !== (X & 48) ? O() : -1 !== Fj ? Fj : Fj = O();
                  }
                  function Ig(a) {
                    a = a.mode;
                    if (0 === (a & 2)) return 1;
                    if (0 === (a & 4)) return 99 === eg() ? 1 : 2;
                    0 === Gj && (Gj = tj);
                    if (0 !== kg.transition) {
                      0 !== Hj && (Hj = null !== vj ? vj.pendingLanes : 0);
                      a = Gj;
                      var b = 4186112 & ~Hj;
                      b &= -b;
                      0 === b && (a = 4186112 & ~a, b = a & -a, 0 === b && (b = 8192));
                      return b;
                    }
                    a = eg();
                    0 !== (X & 4) && 98 === a ? a = Xc(12, Gj) : (a = Sc(a), a = Xc(a, Gj));
                    return a;
                  }
                  function Jg(a, b, c) {
                    if (50 < Dj) throw Dj = 0, Ej = null, Error(y(185));
                    a = Kj(a, b);
                    if (null === a) return null;
                    $c(a, b, c);
                    a === U && (Hi |= b, 4 === V && Ii(a, W));
                    var d = eg();
                    1 === b ? 0 !== (X & 8) && 0 === (X & 48) ? Lj(a) : (Mj(a, c), 0 === X && (wj(), ig())) : (0 === (X & 4) || 98 !== d && 99 !== d || (null === Cj ? Cj = /* @__PURE__ */ new Set([a]) : Cj.add(a)), Mj(a, c));
                    vj = a;
                  }
                  function Kj(a, b) {
                    a.lanes |= b;
                    var c = a.alternate;
                    null !== c && (c.lanes |= b);
                    c = a;
                    for (a = a.return; null !== a; ) a.childLanes |= b, c = a.alternate, null !== c && (c.childLanes |= b), c = a, a = a.return;
                    return 3 === c.tag ? c.stateNode : null;
                  }
                  function Mj(a, b) {
                    for (var c = a.callbackNode, d = a.suspendedLanes, e = a.pingedLanes, f = a.expirationTimes, g = a.pendingLanes; 0 < g; ) {
                      var h = 31 - Vc(g), k = 1 << h, l = f[h];
                      if (-1 === l) {
                        if (0 === (k & d) || 0 !== (k & e)) {
                          l = b;
                          Rc(k);
                          var n = F;
                          f[h] = 10 <= n ? l + 250 : 6 <= n ? l + 5e3 : -1;
                        }
                      } else l <= b && (a.expiredLanes |= k);
                      g &= ~k;
                    }
                    d = Uc(a, a === U ? W : 0);
                    b = F;
                    if (0 === d) null !== c && (c !== Zf && Pf(c), a.callbackNode = null, a.callbackPriority = 0);
                    else {
                      if (null !== c) {
                        if (a.callbackPriority === b) return;
                        c !== Zf && Pf(c);
                      }
                      15 === b ? (c = Lj.bind(null, a), null === ag ? (ag = [c], bg = Of(Uf, jg)) : ag.push(c), c = Zf) : 14 === b ? c = hg(99, Lj.bind(null, a)) : (c = Tc(b), c = hg(c, Nj.bind(null, a)));
                      a.callbackPriority = b;
                      a.callbackNode = c;
                    }
                  }
                  function Nj(a) {
                    Fj = -1;
                    Hj = Gj = 0;
                    if (0 !== (X & 48)) throw Error(y(327));
                    var b = a.callbackNode;
                    if (Oj() && a.callbackNode !== b) return null;
                    var c = Uc(a, a === U ? W : 0);
                    if (0 === c) return null;
                    var d = c;
                    var e = X;
                    X |= 16;
                    var f = Pj();
                    if (U !== a || W !== d) wj(), Qj(a, d);
                    do
                      try {
                        Rj();
                        break;
                      } catch (h) {
                        Sj(a, h);
                      }
                    while (1);
                    qg();
                    oj.current = f;
                    X = e;
                    null !== Y ? d = 0 : (U = null, W = 0, d = V);
                    if (0 !== (tj & Hi)) Qj(a, 0);
                    else if (0 !== d) {
                      2 === d && (X |= 64, a.hydrate && (a.hydrate = false, qf(a.containerInfo)), c = Wc(a), 0 !== c && (d = Tj(a, c)));
                      if (1 === d) throw b = sj, Qj(a, 0), Ii(a, c), Mj(a, O()), b;
                      a.finishedWork = a.current.alternate;
                      a.finishedLanes = c;
                      switch (d) {
                        case 0:
                        case 1:
                          throw Error(y(345));
                        case 2:
                          Uj(a);
                          break;
                        case 3:
                          Ii(a, c);
                          if ((c & 62914560) === c && (d = jj + 500 - O(), 10 < d)) {
                            if (0 !== Uc(a, 0)) break;
                            e = a.suspendedLanes;
                            if ((e & c) !== c) {
                              Hg();
                              a.pingedLanes |= a.suspendedLanes & e;
                              break;
                            }
                            a.timeoutHandle = of(Uj.bind(null, a), d);
                            break;
                          }
                          Uj(a);
                          break;
                        case 4:
                          Ii(a, c);
                          if ((c & 4186112) === c) break;
                          d = a.eventTimes;
                          for (e = -1; 0 < c; ) {
                            var g = 31 - Vc(c);
                            f = 1 << g;
                            g = d[g];
                            g > e && (e = g);
                            c &= ~f;
                          }
                          c = e;
                          c = O() - c;
                          c = (120 > c ? 120 : 480 > c ? 480 : 1080 > c ? 1080 : 1920 > c ? 1920 : 3e3 > c ? 3e3 : 4320 > c ? 4320 : 1960 * nj(c / 1960)) - c;
                          if (10 < c) {
                            a.timeoutHandle = of(Uj.bind(null, a), c);
                            break;
                          }
                          Uj(a);
                          break;
                        case 5:
                          Uj(a);
                          break;
                        default:
                          throw Error(y(329));
                      }
                    }
                    Mj(a, O());
                    return a.callbackNode === b ? Nj.bind(null, a) : null;
                  }
                  function Ii(a, b) {
                    b &= ~uj;
                    b &= ~Hi;
                    a.suspendedLanes |= b;
                    a.pingedLanes &= ~b;
                    for (a = a.expirationTimes; 0 < b; ) {
                      var c = 31 - Vc(b), d = 1 << c;
                      a[c] = -1;
                      b &= ~d;
                    }
                  }
                  function Lj(a) {
                    if (0 !== (X & 48)) throw Error(y(327));
                    Oj();
                    if (a === U && 0 !== (a.expiredLanes & W)) {
                      var b = W;
                      var c = Tj(a, b);
                      0 !== (tj & Hi) && (b = Uc(a, b), c = Tj(a, b));
                    } else b = Uc(a, 0), c = Tj(a, b);
                    0 !== a.tag && 2 === c && (X |= 64, a.hydrate && (a.hydrate = false, qf(a.containerInfo)), b = Wc(a), 0 !== b && (c = Tj(a, b)));
                    if (1 === c) throw c = sj, Qj(a, 0), Ii(a, b), Mj(a, O()), c;
                    a.finishedWork = a.current.alternate;
                    a.finishedLanes = b;
                    Uj(a);
                    Mj(a, O());
                    return null;
                  }
                  function Vj() {
                    if (null !== Cj) {
                      var a = Cj;
                      Cj = null;
                      a.forEach(function(a2) {
                        a2.expiredLanes |= 24 & a2.pendingLanes;
                        Mj(a2, O());
                      });
                    }
                    ig();
                  }
                  function Wj(a, b) {
                    var c = X;
                    X |= 1;
                    try {
                      return a(b);
                    } finally {
                      X = c, 0 === X && (wj(), ig());
                    }
                  }
                  function Xj(a, b) {
                    var c = X;
                    X &= -2;
                    X |= 8;
                    try {
                      return a(b);
                    } finally {
                      X = c, 0 === X && (wj(), ig());
                    }
                  }
                  function ni(a, b) {
                    I(rj, qj);
                    qj |= b;
                    tj |= b;
                  }
                  function Ki() {
                    qj = rj.current;
                    H(rj);
                  }
                  function Qj(a, b) {
                    a.finishedWork = null;
                    a.finishedLanes = 0;
                    var c = a.timeoutHandle;
                    -1 !== c && (a.timeoutHandle = -1, pf(c));
                    if (null !== Y) for (c = Y.return; null !== c; ) {
                      var d = c;
                      switch (d.tag) {
                        case 1:
                          d = d.type.childContextTypes;
                          null !== d && void 0 !== d && Gf();
                          break;
                        case 3:
                          fh();
                          H(N);
                          H(M);
                          uh();
                          break;
                        case 5:
                          hh(d);
                          break;
                        case 4:
                          fh();
                          break;
                        case 13:
                          H(P);
                          break;
                        case 19:
                          H(P);
                          break;
                        case 10:
                          rg(d);
                          break;
                        case 23:
                        case 24:
                          Ki();
                      }
                      c = c.return;
                    }
                    U = a;
                    Y = Tg(a.current, null);
                    W = qj = tj = b;
                    V = 0;
                    sj = null;
                    uj = Hi = Dg = 0;
                  }
                  function Sj(a, b) {
                    do {
                      var c = Y;
                      try {
                        qg();
                        vh.current = Gh;
                        if (yh) {
                          for (var d = R.memoizedState; null !== d; ) {
                            var e = d.queue;
                            null !== e && (e.pending = null);
                            d = d.next;
                          }
                          yh = false;
                        }
                        xh = 0;
                        T = S = R = null;
                        zh = false;
                        pj.current = null;
                        if (null === c || null === c.return) {
                          V = 1;
                          sj = b;
                          Y = null;
                          break;
                        }
                        a: {
                          var f = a, g = c.return, h = c, k = b;
                          b = W;
                          h.flags |= 2048;
                          h.firstEffect = h.lastEffect = null;
                          if (null !== k && "object" === typeof k && "function" === typeof k.then) {
                            var l = k;
                            if (0 === (h.mode & 2)) {
                              var n = h.alternate;
                              n ? (h.updateQueue = n.updateQueue, h.memoizedState = n.memoizedState, h.lanes = n.lanes) : (h.updateQueue = null, h.memoizedState = null);
                            }
                            var A = 0 !== (P.current & 1), p = g;
                            do {
                              var C;
                              if (C = 13 === p.tag) {
                                var x = p.memoizedState;
                                if (null !== x) C = null !== x.dehydrated ? true : false;
                                else {
                                  var w = p.memoizedProps;
                                  C = void 0 === w.fallback ? false : true !== w.unstable_avoidThisFallback ? true : A ? false : true;
                                }
                              }
                              if (C) {
                                var z = p.updateQueue;
                                if (null === z) {
                                  var u = /* @__PURE__ */ new Set();
                                  u.add(l);
                                  p.updateQueue = u;
                                } else z.add(l);
                                if (0 === (p.mode & 2)) {
                                  p.flags |= 64;
                                  h.flags |= 16384;
                                  h.flags &= -2981;
                                  if (1 === h.tag) if (null === h.alternate) h.tag = 17;
                                  else {
                                    var t2 = zg(-1, 1);
                                    t2.tag = 2;
                                    Ag(h, t2);
                                  }
                                  h.lanes |= 1;
                                  break a;
                                }
                                k = void 0;
                                h = b;
                                var q = f.pingCache;
                                null === q ? (q = f.pingCache = new Oi(), k = /* @__PURE__ */ new Set(), q.set(l, k)) : (k = q.get(l), void 0 === k && (k = /* @__PURE__ */ new Set(), q.set(l, k)));
                                if (!k.has(h)) {
                                  k.add(h);
                                  var v = Yj.bind(null, f, l, h);
                                  l.then(v, v);
                                }
                                p.flags |= 4096;
                                p.lanes = b;
                                break a;
                              }
                              p = p.return;
                            } while (null !== p);
                            k = Error((Ra(h.type) || "A React component") + " suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.");
                          }
                          5 !== V && (V = 2);
                          k = Mi(k, h);
                          p = g;
                          do {
                            switch (p.tag) {
                              case 3:
                                f = k;
                                p.flags |= 4096;
                                b &= -b;
                                p.lanes |= b;
                                var J = Pi(p, f, b);
                                Bg(p, J);
                                break a;
                              case 1:
                                f = k;
                                var K = p.type, Q = p.stateNode;
                                if (0 === (p.flags & 64) && ("function" === typeof K.getDerivedStateFromError || null !== Q && "function" === typeof Q.componentDidCatch && (null === Ti || !Ti.has(Q)))) {
                                  p.flags |= 4096;
                                  b &= -b;
                                  p.lanes |= b;
                                  var L = Si(p, f, b);
                                  Bg(p, L);
                                  break a;
                                }
                            }
                            p = p.return;
                          } while (null !== p);
                        }
                        Zj(c);
                      } catch (va) {
                        b = va;
                        Y === c && null !== c && (Y = c = c.return);
                        continue;
                      }
                      break;
                    } while (1);
                  }
                  function Pj() {
                    var a = oj.current;
                    oj.current = Gh;
                    return null === a ? Gh : a;
                  }
                  function Tj(a, b) {
                    var c = X;
                    X |= 16;
                    var d = Pj();
                    U === a && W === b || Qj(a, b);
                    do
                      try {
                        ak();
                        break;
                      } catch (e) {
                        Sj(a, e);
                      }
                    while (1);
                    qg();
                    X = c;
                    oj.current = d;
                    if (null !== Y) throw Error(y(261));
                    U = null;
                    W = 0;
                    return V;
                  }
                  function ak() {
                    for (; null !== Y; ) bk(Y);
                  }
                  function Rj() {
                    for (; null !== Y && !Qf(); ) bk(Y);
                  }
                  function bk(a) {
                    var b = ck(a.alternate, a, qj);
                    a.memoizedProps = a.pendingProps;
                    null === b ? Zj(a) : Y = b;
                    pj.current = null;
                  }
                  function Zj(a) {
                    var b = a;
                    do {
                      var c = b.alternate;
                      a = b.return;
                      if (0 === (b.flags & 2048)) {
                        c = Gi(c, b, qj);
                        if (null !== c) {
                          Y = c;
                          return;
                        }
                        c = b;
                        if (24 !== c.tag && 23 !== c.tag || null === c.memoizedState || 0 !== (qj & 1073741824) || 0 === (c.mode & 4)) {
                          for (var d = 0, e = c.child; null !== e; ) d |= e.lanes | e.childLanes, e = e.sibling;
                          c.childLanes = d;
                        }
                        null !== a && 0 === (a.flags & 2048) && (null === a.firstEffect && (a.firstEffect = b.firstEffect), null !== b.lastEffect && (null !== a.lastEffect && (a.lastEffect.nextEffect = b.firstEffect), a.lastEffect = b.lastEffect), 1 < b.flags && (null !== a.lastEffect ? a.lastEffect.nextEffect = b : a.firstEffect = b, a.lastEffect = b));
                      } else {
                        c = Li(b);
                        if (null !== c) {
                          c.flags &= 2047;
                          Y = c;
                          return;
                        }
                        null !== a && (a.firstEffect = a.lastEffect = null, a.flags |= 2048);
                      }
                      b = b.sibling;
                      if (null !== b) {
                        Y = b;
                        return;
                      }
                      Y = b = a;
                    } while (null !== b);
                    0 === V && (V = 5);
                  }
                  function Uj(a) {
                    var b = eg();
                    gg(99, dk.bind(null, a, b));
                    return null;
                  }
                  function dk(a, b) {
                    do
                      Oj();
                    while (null !== yj);
                    if (0 !== (X & 48)) throw Error(y(327));
                    var c = a.finishedWork;
                    if (null === c) return null;
                    a.finishedWork = null;
                    a.finishedLanes = 0;
                    if (c === a.current) throw Error(y(177));
                    a.callbackNode = null;
                    var d = c.lanes | c.childLanes, e = d, f = a.pendingLanes & ~e;
                    a.pendingLanes = e;
                    a.suspendedLanes = 0;
                    a.pingedLanes = 0;
                    a.expiredLanes &= e;
                    a.mutableReadLanes &= e;
                    a.entangledLanes &= e;
                    e = a.entanglements;
                    for (var g = a.eventTimes, h = a.expirationTimes; 0 < f; ) {
                      var k = 31 - Vc(f), l = 1 << k;
                      e[k] = 0;
                      g[k] = -1;
                      h[k] = -1;
                      f &= ~l;
                    }
                    null !== Cj && 0 === (d & 24) && Cj.has(a) && Cj.delete(a);
                    a === U && (Y = U = null, W = 0);
                    1 < c.flags ? null !== c.lastEffect ? (c.lastEffect.nextEffect = c, d = c.firstEffect) : d = c : d = c.firstEffect;
                    if (null !== d) {
                      e = X;
                      X |= 32;
                      pj.current = null;
                      kf = fd;
                      g = Ne();
                      if (Oe(g)) {
                        if ("selectionStart" in g) h = { start: g.selectionStart, end: g.selectionEnd };
                        else a: if (h = (h = g.ownerDocument) && h.defaultView || window, (l = h.getSelection && h.getSelection()) && 0 !== l.rangeCount) {
                          h = l.anchorNode;
                          f = l.anchorOffset;
                          k = l.focusNode;
                          l = l.focusOffset;
                          try {
                            h.nodeType, k.nodeType;
                          } catch (va) {
                            h = null;
                            break a;
                          }
                          var n = 0, A = -1, p = -1, C = 0, x = 0, w = g, z = null;
                          b: for (; ; ) {
                            for (var u; ; ) {
                              w !== h || 0 !== f && 3 !== w.nodeType || (A = n + f);
                              w !== k || 0 !== l && 3 !== w.nodeType || (p = n + l);
                              3 === w.nodeType && (n += w.nodeValue.length);
                              if (null === (u = w.firstChild)) break;
                              z = w;
                              w = u;
                            }
                            for (; ; ) {
                              if (w === g) break b;
                              z === h && ++C === f && (A = n);
                              z === k && ++x === l && (p = n);
                              if (null !== (u = w.nextSibling)) break;
                              w = z;
                              z = w.parentNode;
                            }
                            w = u;
                          }
                          h = -1 === A || -1 === p ? null : { start: A, end: p };
                        } else h = null;
                        h = h || { start: 0, end: 0 };
                      } else h = null;
                      lf = { focusedElem: g, selectionRange: h };
                      fd = false;
                      Ij = null;
                      Jj = false;
                      Z = d;
                      do
                        try {
                          ek();
                        } catch (va) {
                          if (null === Z) throw Error(y(330));
                          Wi(Z, va);
                          Z = Z.nextEffect;
                        }
                      while (null !== Z);
                      Ij = null;
                      Z = d;
                      do
                        try {
                          for (g = a; null !== Z; ) {
                            var t2 = Z.flags;
                            t2 & 16 && pb(Z.stateNode, "");
                            if (t2 & 128) {
                              var q = Z.alternate;
                              if (null !== q) {
                                var v = q.ref;
                                null !== v && ("function" === typeof v ? v(null) : v.current = null);
                              }
                            }
                            switch (t2 & 1038) {
                              case 2:
                                fj(Z);
                                Z.flags &= -3;
                                break;
                              case 6:
                                fj(Z);
                                Z.flags &= -3;
                                ij(Z.alternate, Z);
                                break;
                              case 1024:
                                Z.flags &= -1025;
                                break;
                              case 1028:
                                Z.flags &= -1025;
                                ij(Z.alternate, Z);
                                break;
                              case 4:
                                ij(Z.alternate, Z);
                                break;
                              case 8:
                                h = Z;
                                cj(g, h);
                                var J = h.alternate;
                                dj(h);
                                null !== J && dj(J);
                            }
                            Z = Z.nextEffect;
                          }
                        } catch (va) {
                          if (null === Z) throw Error(y(330));
                          Wi(Z, va);
                          Z = Z.nextEffect;
                        }
                      while (null !== Z);
                      v = lf;
                      q = Ne();
                      t2 = v.focusedElem;
                      g = v.selectionRange;
                      if (q !== t2 && t2 && t2.ownerDocument && Me(t2.ownerDocument.documentElement, t2)) {
                        null !== g && Oe(t2) && (q = g.start, v = g.end, void 0 === v && (v = q), "selectionStart" in t2 ? (t2.selectionStart = q, t2.selectionEnd = Math.min(v, t2.value.length)) : (v = (q = t2.ownerDocument || document) && q.defaultView || window, v.getSelection && (v = v.getSelection(), h = t2.textContent.length, J = Math.min(g.start, h), g = void 0 === g.end ? J : Math.min(g.end, h), !v.extend && J > g && (h = g, g = J, J = h), h = Le(t2, J), f = Le(t2, g), h && f && (1 !== v.rangeCount || v.anchorNode !== h.node || v.anchorOffset !== h.offset || v.focusNode !== f.node || v.focusOffset !== f.offset) && (q = q.createRange(), q.setStart(h.node, h.offset), v.removeAllRanges(), J > g ? (v.addRange(q), v.extend(f.node, f.offset)) : (q.setEnd(f.node, f.offset), v.addRange(q))))));
                        q = [];
                        for (v = t2; v = v.parentNode; ) 1 === v.nodeType && q.push({ element: v, left: v.scrollLeft, top: v.scrollTop });
                        "function" === typeof t2.focus && t2.focus();
                        for (t2 = 0; t2 < q.length; t2++) v = q[t2], v.element.scrollLeft = v.left, v.element.scrollTop = v.top;
                      }
                      fd = !!kf;
                      lf = kf = null;
                      a.current = c;
                      Z = d;
                      do
                        try {
                          for (t2 = a; null !== Z; ) {
                            var K = Z.flags;
                            K & 36 && Yi(t2, Z.alternate, Z);
                            if (K & 128) {
                              q = void 0;
                              var Q = Z.ref;
                              if (null !== Q) {
                                var L = Z.stateNode;
                                switch (Z.tag) {
                                  case 5:
                                    q = L;
                                    break;
                                  default:
                                    q = L;
                                }
                                "function" === typeof Q ? Q(q) : Q.current = q;
                              }
                            }
                            Z = Z.nextEffect;
                          }
                        } catch (va) {
                          if (null === Z) throw Error(y(330));
                          Wi(Z, va);
                          Z = Z.nextEffect;
                        }
                      while (null !== Z);
                      Z = null;
                      $f();
                      X = e;
                    } else a.current = c;
                    if (xj) xj = false, yj = a, zj = b;
                    else for (Z = d; null !== Z; ) b = Z.nextEffect, Z.nextEffect = null, Z.flags & 8 && (K = Z, K.sibling = null, K.stateNode = null), Z = b;
                    d = a.pendingLanes;
                    0 === d && (Ti = null);
                    1 === d ? a === Ej ? Dj++ : (Dj = 0, Ej = a) : Dj = 0;
                    c = c.stateNode;
                    if (Mf && "function" === typeof Mf.onCommitFiberRoot) try {
                      Mf.onCommitFiberRoot(Lf, c, void 0, 64 === (c.current.flags & 64));
                    } catch (va) {
                    }
                    Mj(a, O());
                    if (Qi) throw Qi = false, a = Ri, Ri = null, a;
                    if (0 !== (X & 8)) return null;
                    ig();
                    return null;
                  }
                  function ek() {
                    for (; null !== Z; ) {
                      var a = Z.alternate;
                      Jj || null === Ij || (0 !== (Z.flags & 8) ? dc(Z, Ij) && (Jj = true) : 13 === Z.tag && mj(a, Z) && dc(Z, Ij) && (Jj = true));
                      var b = Z.flags;
                      0 !== (b & 256) && Xi(a, Z);
                      0 === (b & 512) || xj || (xj = true, hg(97, function() {
                        Oj();
                        return null;
                      }));
                      Z = Z.nextEffect;
                    }
                  }
                  function Oj() {
                    if (90 !== zj) {
                      var a = 97 < zj ? 97 : zj;
                      zj = 90;
                      return gg(a, fk);
                    }
                    return false;
                  }
                  function $i(a, b) {
                    Aj.push(b, a);
                    xj || (xj = true, hg(97, function() {
                      Oj();
                      return null;
                    }));
                  }
                  function Zi(a, b) {
                    Bj.push(b, a);
                    xj || (xj = true, hg(97, function() {
                      Oj();
                      return null;
                    }));
                  }
                  function fk() {
                    if (null === yj) return false;
                    var a = yj;
                    yj = null;
                    if (0 !== (X & 48)) throw Error(y(331));
                    var b = X;
                    X |= 32;
                    var c = Bj;
                    Bj = [];
                    for (var d = 0; d < c.length; d += 2) {
                      var e = c[d], f = c[d + 1], g = e.destroy;
                      e.destroy = void 0;
                      if ("function" === typeof g) try {
                        g();
                      } catch (k) {
                        if (null === f) throw Error(y(330));
                        Wi(f, k);
                      }
                    }
                    c = Aj;
                    Aj = [];
                    for (d = 0; d < c.length; d += 2) {
                      e = c[d];
                      f = c[d + 1];
                      try {
                        var h = e.create;
                        e.destroy = h();
                      } catch (k) {
                        if (null === f) throw Error(y(330));
                        Wi(f, k);
                      }
                    }
                    for (h = a.current.firstEffect; null !== h; ) a = h.nextEffect, h.nextEffect = null, h.flags & 8 && (h.sibling = null, h.stateNode = null), h = a;
                    X = b;
                    ig();
                    return true;
                  }
                  function gk(a, b, c) {
                    b = Mi(c, b);
                    b = Pi(a, b, 1);
                    Ag(a, b);
                    b = Hg();
                    a = Kj(a, 1);
                    null !== a && ($c(a, 1, b), Mj(a, b));
                  }
                  function Wi(a, b) {
                    if (3 === a.tag) gk(a, a, b);
                    else for (var c = a.return; null !== c; ) {
                      if (3 === c.tag) {
                        gk(c, a, b);
                        break;
                      } else if (1 === c.tag) {
                        var d = c.stateNode;
                        if ("function" === typeof c.type.getDerivedStateFromError || "function" === typeof d.componentDidCatch && (null === Ti || !Ti.has(d))) {
                          a = Mi(b, a);
                          var e = Si(c, a, 1);
                          Ag(c, e);
                          e = Hg();
                          c = Kj(c, 1);
                          if (null !== c) $c(c, 1, e), Mj(c, e);
                          else if ("function" === typeof d.componentDidCatch && (null === Ti || !Ti.has(d))) try {
                            d.componentDidCatch(b, a);
                          } catch (f) {
                          }
                          break;
                        }
                      }
                      c = c.return;
                    }
                  }
                  function Yj(a, b, c) {
                    var d = a.pingCache;
                    null !== d && d.delete(b);
                    b = Hg();
                    a.pingedLanes |= a.suspendedLanes & c;
                    U === a && (W & c) === c && (4 === V || 3 === V && (W & 62914560) === W && 500 > O() - jj ? Qj(a, 0) : uj |= c);
                    Mj(a, b);
                  }
                  function lj(a, b) {
                    var c = a.stateNode;
                    null !== c && c.delete(b);
                    b = 0;
                    0 === b && (b = a.mode, 0 === (b & 2) ? b = 1 : 0 === (b & 4) ? b = 99 === eg() ? 1 : 2 : (0 === Gj && (Gj = tj), b = Yc(62914560 & ~Gj), 0 === b && (b = 4194304)));
                    c = Hg();
                    a = Kj(a, b);
                    null !== a && ($c(a, b, c), Mj(a, c));
                  }
                  var ck;
                  ck = function(a, b, c) {
                    var d = b.lanes;
                    if (null !== a) if (a.memoizedProps !== b.pendingProps || N.current) ug = true;
                    else if (0 !== (c & d)) ug = 0 !== (a.flags & 16384) ? true : false;
                    else {
                      ug = false;
                      switch (b.tag) {
                        case 3:
                          ri(b);
                          sh();
                          break;
                        case 5:
                          gh(b);
                          break;
                        case 1:
                          Ff(b.type) && Jf(b);
                          break;
                        case 4:
                          eh(b, b.stateNode.containerInfo);
                          break;
                        case 10:
                          d = b.memoizedProps.value;
                          var e = b.type._context;
                          I(mg, e._currentValue);
                          e._currentValue = d;
                          break;
                        case 13:
                          if (null !== b.memoizedState) {
                            if (0 !== (c & b.child.childLanes)) return ti(a, b, c);
                            I(P, P.current & 1);
                            b = hi(a, b, c);
                            return null !== b ? b.sibling : null;
                          }
                          I(P, P.current & 1);
                          break;
                        case 19:
                          d = 0 !== (c & b.childLanes);
                          if (0 !== (a.flags & 64)) {
                            if (d) return Ai(a, b, c);
                            b.flags |= 64;
                          }
                          e = b.memoizedState;
                          null !== e && (e.rendering = null, e.tail = null, e.lastEffect = null);
                          I(P, P.current);
                          if (d) break;
                          else return null;
                        case 23:
                        case 24:
                          return b.lanes = 0, mi(a, b, c);
                      }
                      return hi(a, b, c);
                    }
                    else ug = false;
                    b.lanes = 0;
                    switch (b.tag) {
                      case 2:
                        d = b.type;
                        null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2);
                        a = b.pendingProps;
                        e = Ef(b, M.current);
                        tg(b, c);
                        e = Ch(null, b, d, a, e, c);
                        b.flags |= 1;
                        if ("object" === typeof e && null !== e && "function" === typeof e.render && void 0 === e.$$typeof) {
                          b.tag = 1;
                          b.memoizedState = null;
                          b.updateQueue = null;
                          if (Ff(d)) {
                            var f = true;
                            Jf(b);
                          } else f = false;
                          b.memoizedState = null !== e.state && void 0 !== e.state ? e.state : null;
                          xg(b);
                          var g = d.getDerivedStateFromProps;
                          "function" === typeof g && Gg(b, d, g, a);
                          e.updater = Kg;
                          b.stateNode = e;
                          e._reactInternals = b;
                          Og(b, d, a, c);
                          b = qi(null, b, d, true, f, c);
                        } else b.tag = 0, fi(null, b, e, c), b = b.child;
                        return b;
                      case 16:
                        e = b.elementType;
                        a: {
                          null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2);
                          a = b.pendingProps;
                          f = e._init;
                          e = f(e._payload);
                          b.type = e;
                          f = b.tag = hk(e);
                          a = lg(e, a);
                          switch (f) {
                            case 0:
                              b = li(null, b, e, a, c);
                              break a;
                            case 1:
                              b = pi(null, b, e, a, c);
                              break a;
                            case 11:
                              b = gi(null, b, e, a, c);
                              break a;
                            case 14:
                              b = ii(null, b, e, lg(e.type, a), d, c);
                              break a;
                          }
                          throw Error(y(306, e, ""));
                        }
                        return b;
                      case 0:
                        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), li(a, b, d, e, c);
                      case 1:
                        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), pi(a, b, d, e, c);
                      case 3:
                        ri(b);
                        d = b.updateQueue;
                        if (null === a || null === d) throw Error(y(282));
                        d = b.pendingProps;
                        e = b.memoizedState;
                        e = null !== e ? e.element : null;
                        yg(a, b);
                        Cg(b, d, null, c);
                        d = b.memoizedState.element;
                        if (d === e) sh(), b = hi(a, b, c);
                        else {
                          e = b.stateNode;
                          if (f = e.hydrate) kh = rf(b.stateNode.containerInfo.firstChild), jh = b, f = lh = true;
                          if (f) {
                            a = e.mutableSourceEagerHydrationData;
                            if (null != a) for (e = 0; e < a.length; e += 2) f = a[e], f._workInProgressVersionPrimary = a[e + 1], th.push(f);
                            c = Zg(b, null, d, c);
                            for (b.child = c; c; ) c.flags = c.flags & -3 | 1024, c = c.sibling;
                          } else fi(a, b, d, c), sh();
                          b = b.child;
                        }
                        return b;
                      case 5:
                        return gh(b), null === a && ph(b), d = b.type, e = b.pendingProps, f = null !== a ? a.memoizedProps : null, g = e.children, nf(d, e) ? g = null : null !== f && nf(d, f) && (b.flags |= 16), oi(a, b), fi(a, b, g, c), b.child;
                      case 6:
                        return null === a && ph(b), null;
                      case 13:
                        return ti(a, b, c);
                      case 4:
                        return eh(b, b.stateNode.containerInfo), d = b.pendingProps, null === a ? b.child = Yg(b, null, d, c) : fi(a, b, d, c), b.child;
                      case 11:
                        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), gi(a, b, d, e, c);
                      case 7:
                        return fi(a, b, b.pendingProps, c), b.child;
                      case 8:
                        return fi(
                          a,
                          b,
                          b.pendingProps.children,
                          c
                        ), b.child;
                      case 12:
                        return fi(a, b, b.pendingProps.children, c), b.child;
                      case 10:
                        a: {
                          d = b.type._context;
                          e = b.pendingProps;
                          g = b.memoizedProps;
                          f = e.value;
                          var h = b.type._context;
                          I(mg, h._currentValue);
                          h._currentValue = f;
                          if (null !== g) if (h = g.value, f = He(h, f) ? 0 : ("function" === typeof d._calculateChangedBits ? d._calculateChangedBits(h, f) : 1073741823) | 0, 0 === f) {
                            if (g.children === e.children && !N.current) {
                              b = hi(a, b, c);
                              break a;
                            }
                          } else for (h = b.child, null !== h && (h.return = b); null !== h; ) {
                            var k = h.dependencies;
                            if (null !== k) {
                              g = h.child;
                              for (var l = k.firstContext; null !== l; ) {
                                if (l.context === d && 0 !== (l.observedBits & f)) {
                                  1 === h.tag && (l = zg(-1, c & -c), l.tag = 2, Ag(h, l));
                                  h.lanes |= c;
                                  l = h.alternate;
                                  null !== l && (l.lanes |= c);
                                  sg(h.return, c);
                                  k.lanes |= c;
                                  break;
                                }
                                l = l.next;
                              }
                            } else g = 10 === h.tag ? h.type === b.type ? null : h.child : h.child;
                            if (null !== g) g.return = h;
                            else for (g = h; null !== g; ) {
                              if (g === b) {
                                g = null;
                                break;
                              }
                              h = g.sibling;
                              if (null !== h) {
                                h.return = g.return;
                                g = h;
                                break;
                              }
                              g = g.return;
                            }
                            h = g;
                          }
                          fi(a, b, e.children, c);
                          b = b.child;
                        }
                        return b;
                      case 9:
                        return e = b.type, f = b.pendingProps, d = f.children, tg(b, c), e = vg(
                          e,
                          f.unstable_observedBits
                        ), d = d(e), b.flags |= 1, fi(a, b, d, c), b.child;
                      case 14:
                        return e = b.type, f = lg(e, b.pendingProps), f = lg(e.type, f), ii(a, b, e, f, d, c);
                      case 15:
                        return ki(a, b, b.type, b.pendingProps, d, c);
                      case 17:
                        return d = b.type, e = b.pendingProps, e = b.elementType === d ? e : lg(d, e), null !== a && (a.alternate = null, b.alternate = null, b.flags |= 2), b.tag = 1, Ff(d) ? (a = true, Jf(b)) : a = false, tg(b, c), Mg(b, d, e), Og(b, d, e, c), qi(null, b, d, true, a, c);
                      case 19:
                        return Ai(a, b, c);
                      case 23:
                        return mi(a, b, c);
                      case 24:
                        return mi(a, b, c);
                    }
                    throw Error(y(156, b.tag));
                  };
                  function ik(a, b, c, d) {
                    this.tag = a;
                    this.key = c;
                    this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null;
                    this.index = 0;
                    this.ref = null;
                    this.pendingProps = b;
                    this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null;
                    this.mode = d;
                    this.flags = 0;
                    this.lastEffect = this.firstEffect = this.nextEffect = null;
                    this.childLanes = this.lanes = 0;
                    this.alternate = null;
                  }
                  function nh(a, b, c, d) {
                    return new ik(a, b, c, d);
                  }
                  function ji(a) {
                    a = a.prototype;
                    return !(!a || !a.isReactComponent);
                  }
                  function hk(a) {
                    if ("function" === typeof a) return ji(a) ? 1 : 0;
                    if (void 0 !== a && null !== a) {
                      a = a.$$typeof;
                      if (a === Aa) return 11;
                      if (a === Da) return 14;
                    }
                    return 2;
                  }
                  function Tg(a, b) {
                    var c = a.alternate;
                    null === c ? (c = nh(a.tag, b, a.key, a.mode), c.elementType = a.elementType, c.type = a.type, c.stateNode = a.stateNode, c.alternate = a, a.alternate = c) : (c.pendingProps = b, c.type = a.type, c.flags = 0, c.nextEffect = null, c.firstEffect = null, c.lastEffect = null);
                    c.childLanes = a.childLanes;
                    c.lanes = a.lanes;
                    c.child = a.child;
                    c.memoizedProps = a.memoizedProps;
                    c.memoizedState = a.memoizedState;
                    c.updateQueue = a.updateQueue;
                    b = a.dependencies;
                    c.dependencies = null === b ? null : { lanes: b.lanes, firstContext: b.firstContext };
                    c.sibling = a.sibling;
                    c.index = a.index;
                    c.ref = a.ref;
                    return c;
                  }
                  function Vg(a, b, c, d, e, f) {
                    var g = 2;
                    d = a;
                    if ("function" === typeof a) ji(a) && (g = 1);
                    else if ("string" === typeof a) g = 5;
                    else a: switch (a) {
                      case ua:
                        return Xg(c.children, e, f, b);
                      case Ha:
                        g = 8;
                        e |= 16;
                        break;
                      case wa:
                        g = 8;
                        e |= 1;
                        break;
                      case xa:
                        return a = nh(12, c, b, e | 8), a.elementType = xa, a.type = xa, a.lanes = f, a;
                      case Ba:
                        return a = nh(13, c, b, e), a.type = Ba, a.elementType = Ba, a.lanes = f, a;
                      case Ca:
                        return a = nh(19, c, b, e), a.elementType = Ca, a.lanes = f, a;
                      case Ia:
                        return vi(c, e, f, b);
                      case Ja:
                        return a = nh(24, c, b, e), a.elementType = Ja, a.lanes = f, a;
                      default:
                        if ("object" === typeof a && null !== a) switch (a.$$typeof) {
                          case ya:
                            g = 10;
                            break a;
                          case za:
                            g = 9;
                            break a;
                          case Aa:
                            g = 11;
                            break a;
                          case Da:
                            g = 14;
                            break a;
                          case Ea:
                            g = 16;
                            d = null;
                            break a;
                          case Fa:
                            g = 22;
                            break a;
                        }
                        throw Error(y(130, null == a ? a : typeof a, ""));
                    }
                    b = nh(g, c, b, e);
                    b.elementType = a;
                    b.type = d;
                    b.lanes = f;
                    return b;
                  }
                  function Xg(a, b, c, d) {
                    a = nh(7, a, d, b);
                    a.lanes = c;
                    return a;
                  }
                  function vi(a, b, c, d) {
                    a = nh(23, a, d, b);
                    a.elementType = Ia;
                    a.lanes = c;
                    return a;
                  }
                  function Ug(a, b, c) {
                    a = nh(6, a, null, b);
                    a.lanes = c;
                    return a;
                  }
                  function Wg(a, b, c) {
                    b = nh(4, null !== a.children ? a.children : [], a.key, b);
                    b.lanes = c;
                    b.stateNode = { containerInfo: a.containerInfo, pendingChildren: null, implementation: a.implementation };
                    return b;
                  }
                  function jk(a, b, c) {
                    this.tag = b;
                    this.containerInfo = a;
                    this.finishedWork = this.pingCache = this.current = this.pendingChildren = null;
                    this.timeoutHandle = -1;
                    this.pendingContext = this.context = null;
                    this.hydrate = c;
                    this.callbackNode = null;
                    this.callbackPriority = 0;
                    this.eventTimes = Zc(0);
                    this.expirationTimes = Zc(-1);
                    this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0;
                    this.entanglements = Zc(0);
                    this.mutableSourceEagerHydrationData = null;
                  }
                  function kk(a, b, c) {
                    var d = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null;
                    return { $$typeof: ta, key: null == d ? null : "" + d, children: a, containerInfo: b, implementation: c };
                  }
                  function lk(a, b, c, d) {
                    var e = b.current, f = Hg(), g = Ig(e);
                    a: if (c) {
                      c = c._reactInternals;
                      b: {
                        if (Zb(c) !== c || 1 !== c.tag) throw Error(y(170));
                        var h = c;
                        do {
                          switch (h.tag) {
                            case 3:
                              h = h.stateNode.context;
                              break b;
                            case 1:
                              if (Ff(h.type)) {
                                h = h.stateNode.__reactInternalMemoizedMergedChildContext;
                                break b;
                              }
                          }
                          h = h.return;
                        } while (null !== h);
                        throw Error(y(171));
                      }
                      if (1 === c.tag) {
                        var k = c.type;
                        if (Ff(k)) {
                          c = If(c, k, h);
                          break a;
                        }
                      }
                      c = h;
                    } else c = Cf;
                    null === b.context ? b.context = c : b.pendingContext = c;
                    b = zg(f, g);
                    b.payload = { element: a };
                    d = void 0 === d ? null : d;
                    null !== d && (b.callback = d);
                    Ag(e, b);
                    Jg(e, g, f);
                    return g;
                  }
                  function mk(a) {
                    a = a.current;
                    if (!a.child) return null;
                    switch (a.child.tag) {
                      case 5:
                        return a.child.stateNode;
                      default:
                        return a.child.stateNode;
                    }
                  }
                  function nk(a, b) {
                    a = a.memoizedState;
                    if (null !== a && null !== a.dehydrated) {
                      var c = a.retryLane;
                      a.retryLane = 0 !== c && c < b ? c : b;
                    }
                  }
                  function ok(a, b) {
                    nk(a, b);
                    (a = a.alternate) && nk(a, b);
                  }
                  function pk() {
                    return null;
                  }
                  function qk(a, b, c) {
                    var d = null != c && null != c.hydrationOptions && c.hydrationOptions.mutableSources || null;
                    c = new jk(a, b, null != c && true === c.hydrate);
                    b = nh(3, null, null, 2 === b ? 7 : 1 === b ? 3 : 0);
                    c.current = b;
                    b.stateNode = c;
                    xg(b);
                    a[ff] = c.current;
                    cf(8 === a.nodeType ? a.parentNode : a);
                    if (d) for (a = 0; a < d.length; a++) {
                      b = d[a];
                      var e = b._getVersion;
                      e = e(b._source);
                      null == c.mutableSourceEagerHydrationData ? c.mutableSourceEagerHydrationData = [b, e] : c.mutableSourceEagerHydrationData.push(b, e);
                    }
                    this._internalRoot = c;
                  }
                  qk.prototype.render = function(a) {
                    lk(a, this._internalRoot, null, null);
                  };
                  qk.prototype.unmount = function() {
                    var a = this._internalRoot, b = a.containerInfo;
                    lk(null, a, null, function() {
                      b[ff] = null;
                    });
                  };
                  function rk(a) {
                    return !(!a || 1 !== a.nodeType && 9 !== a.nodeType && 11 !== a.nodeType && (8 !== a.nodeType || " react-mount-point-unstable " !== a.nodeValue));
                  }
                  function sk(a, b) {
                    b || (b = a ? 9 === a.nodeType ? a.documentElement : a.firstChild : null, b = !(!b || 1 !== b.nodeType || !b.hasAttribute("data-reactroot")));
                    if (!b) for (var c; c = a.lastChild; ) a.removeChild(c);
                    return new qk(a, 0, b ? { hydrate: true } : void 0);
                  }
                  function tk(a, b, c, d, e) {
                    var f = c._reactRootContainer;
                    if (f) {
                      var g = f._internalRoot;
                      if ("function" === typeof e) {
                        var h = e;
                        e = function() {
                          var a2 = mk(g);
                          h.call(a2);
                        };
                      }
                      lk(b, g, a, e);
                    } else {
                      f = c._reactRootContainer = sk(c, d);
                      g = f._internalRoot;
                      if ("function" === typeof e) {
                        var k = e;
                        e = function() {
                          var a2 = mk(g);
                          k.call(a2);
                        };
                      }
                      Xj(function() {
                        lk(b, g, a, e);
                      });
                    }
                    return mk(g);
                  }
                  ec = function(a) {
                    if (13 === a.tag) {
                      var b = Hg();
                      Jg(a, 4, b);
                      ok(a, 4);
                    }
                  };
                  fc = function(a) {
                    if (13 === a.tag) {
                      var b = Hg();
                      Jg(a, 67108864, b);
                      ok(a, 67108864);
                    }
                  };
                  gc = function(a) {
                    if (13 === a.tag) {
                      var b = Hg(), c = Ig(a);
                      Jg(a, c, b);
                      ok(a, c);
                    }
                  };
                  hc = function(a, b) {
                    return b();
                  };
                  yb = function(a, b, c) {
                    switch (b) {
                      case "input":
                        ab(a, c);
                        b = c.name;
                        if ("radio" === c.type && null != b) {
                          for (c = a; c.parentNode; ) c = c.parentNode;
                          c = c.querySelectorAll("input[name=" + JSON.stringify("" + b) + '][type="radio"]');
                          for (b = 0; b < c.length; b++) {
                            var d = c[b];
                            if (d !== a && d.form === a.form) {
                              var e = Db(d);
                              if (!e) throw Error(y(90));
                              Wa(d);
                              ab(d, e);
                            }
                          }
                        }
                        break;
                      case "textarea":
                        ib(a, c);
                        break;
                      case "select":
                        b = c.value, null != b && fb(a, !!c.multiple, b, false);
                    }
                  };
                  Gb = Wj;
                  Hb = function(a, b, c, d, e) {
                    var f = X;
                    X |= 4;
                    try {
                      return gg(98, a.bind(null, b, c, d, e));
                    } finally {
                      X = f, 0 === X && (wj(), ig());
                    }
                  };
                  Ib = function() {
                    0 === (X & 49) && (Vj(), Oj());
                  };
                  Jb = function(a, b) {
                    var c = X;
                    X |= 2;
                    try {
                      return a(b);
                    } finally {
                      X = c, 0 === X && (wj(), ig());
                    }
                  };
                  function uk(a, b) {
                    var c = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null;
                    if (!rk(b)) throw Error(y(200));
                    return kk(a, b, null, c);
                  }
                  var vk = { Events: [Cb, ue, Db, Eb, Fb, Oj, { current: false }] }, wk = { findFiberByHostInstance: wc, bundleType: 0, version: "17.0.2", rendererPackageName: "react-dom" };
                  var xk = { bundleType: wk.bundleType, version: wk.version, rendererPackageName: wk.rendererPackageName, rendererConfig: wk.rendererConfig, overrideHookState: null, overrideHookStateDeletePath: null, overrideHookStateRenamePath: null, overrideProps: null, overridePropsDeletePath: null, overridePropsRenamePath: null, setSuspenseHandler: null, scheduleUpdate: null, currentDispatcherRef: ra.ReactCurrentDispatcher, findHostInstanceByFiber: function(a) {
                    a = cc(a);
                    return null === a ? null : a.stateNode;
                  }, findFiberByHostInstance: wk.findFiberByHostInstance || pk, findHostInstancesForRefresh: null, scheduleRefresh: null, scheduleRoot: null, setRefreshHandler: null, getCurrentFiber: null };
                  if ("undefined" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__) {
                    var yk = __REACT_DEVTOOLS_GLOBAL_HOOK__;
                    if (!yk.isDisabled && yk.supportsFiber) try {
                      Lf = yk.inject(xk), Mf = yk;
                    } catch (a) {
                    }
                  }
                  exports2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = vk;
                  exports2.createPortal = uk;
                  exports2.findDOMNode = function(a) {
                    if (null == a) return null;
                    if (1 === a.nodeType) return a;
                    var b = a._reactInternals;
                    if (void 0 === b) {
                      if ("function" === typeof a.render) throw Error(y(188));
                      throw Error(y(268, Object.keys(a)));
                    }
                    a = cc(b);
                    a = null === a ? null : a.stateNode;
                    return a;
                  };
                  exports2.flushSync = function(a, b) {
                    var c = X;
                    if (0 !== (c & 48)) return a(b);
                    X |= 1;
                    try {
                      if (a) return gg(99, a.bind(null, b));
                    } finally {
                      X = c, ig();
                    }
                  };
                  exports2.hydrate = function(a, b, c) {
                    if (!rk(b)) throw Error(y(200));
                    return tk(null, a, b, true, c);
                  };
                  exports2.render = function(a, b, c) {
                    if (!rk(b)) throw Error(y(200));
                    return tk(null, a, b, false, c);
                  };
                  exports2.unmountComponentAtNode = function(a) {
                    if (!rk(a)) throw Error(y(40));
                    return a._reactRootContainer ? (Xj(function() {
                      tk(null, null, a, false, function() {
                        a._reactRootContainer = null;
                        a[ff] = null;
                      });
                    }), true) : false;
                  };
                  exports2.unstable_batchedUpdates = Wj;
                  exports2.unstable_createPortal = function(a, b) {
                    return uk(a, b, 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : null);
                  };
                  exports2.unstable_renderSubtreeIntoContainer = function(a, b, c, d) {
                    if (!rk(c)) throw Error(y(200));
                    if (null == a || void 0 === a._reactInternals) throw Error(y(38));
                    return tk(a, b, c, false, d);
                  };
                  exports2.version = "17.0.2";
                })
              ),
              /***/
              2483: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  function checkDCE() {
                    if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === "undefined" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== "function") {
                      return;
                    }
                    if (false) {
                    }
                    try {
                      __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);
                    } catch (err) {
                      console.error(err);
                    }
                  }
                  if (true) {
                    checkDCE();
                    module2.exports = __webpack_require__2(7045);
                  } else {
                  }
                })
              ),
              /***/
              7887: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__2(5432));
                  var _getPrototypeOf3 = _interopRequireDefault(__webpack_require__2(2132));
                  var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__2(7111));
                  var _inherits2 = _interopRequireDefault(__webpack_require__2(5075));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var _react = _interopRequireDefault(__webpack_require__2(7810));
                  var _TemplateContainer = _interopRequireDefault(__webpack_require__2(9810));
                  var MoveContainer = /* @__PURE__ */ (function(_React$Component) {
                    (0, _inherits2["default"])(MoveContainer2, _React$Component);
                    function MoveContainer2() {
                      var _getPrototypeOf2;
                      var _this;
                      (0, _classCallCheck2["default"])(this, MoveContainer2);
                      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                        args[_key] = arguments[_key];
                      }
                      _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(MoveContainer2)).call.apply(_getPrototypeOf2, [this].concat(args)));
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_templateContainer", void 0);
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_templateContainerSetter", function(cmp) {
                        if (cmp) _this._templateContainer = cmp;
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_el", void 0);
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_elSetter", function(el) {
                        if (el) _this._el = el;
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_dragHandleProps", _this.props.makeDragHandleProps(function() {
                        return _this.props.y;
                      }));
                      return _this;
                    }
                    (0, _createClass2["default"])(MoveContainer2, [{
                      key: "getDOMNode",
                      value: function getDOMNode() {
                        return this._el;
                      }
                    }, {
                      key: "getTemplate",
                      value: function getTemplate() {
                        return this._templateContainer.getTemplate();
                      }
                    }, {
                      key: "shouldComponentUpdate",
                      value: function shouldComponentUpdate(nextProps) {
                        return this.props.anySelected !== nextProps.anySelected || this.props.itemSelected !== nextProps.itemSelected || this.props.item !== nextProps.item || this.props.template !== nextProps.template || this.props.y !== nextProps.y || this.props.height !== nextProps.height || this.props.zIndex !== nextProps.zIndex || this.props.commonProps !== nextProps.commonProps;
                      }
                    }, {
                      key: "render",
                      value: function render() {
                        var _this$props = this.props, item = _this$props.item, y = _this$props.y, padding = _this$props.padding, itemSelected = _this$props.itemSelected, anySelected = _this$props.anySelected, height = _this$props.height, zIndex = _this$props.zIndex, template = _this$props.template, commonProps = _this$props.commonProps;
                        return _react["default"].createElement("div", {
                          ref: this._elSetter,
                          style: {
                            position: y == null ? "relative" : "absolute",
                            boxSizing: "border-box",
                            left: "0px",
                            right: "0px",
                            top: y == null ? "0px" : "".concat(y, "px"),
                            marginBottom: "".concat(padding, "px"),
                            height: y == null ? "auto" : "".concat(anySelected * (height.drag - height.natural) + height.natural, "px"),
                            zIndex
                          }
                        }, _react["default"].createElement(_TemplateContainer["default"], {
                          ref: this._templateContainerSetter,
                          item,
                          template,
                          itemSelected,
                          anySelected,
                          dragHandleProps: this._dragHandleProps,
                          commonProps
                        }));
                      }
                    }]);
                    return MoveContainer2;
                  })(_react["default"].Component);
                  exports2["default"] = MoveContainer;
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              8647: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__2(5432));
                  var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__2(2132));
                  var _inherits2 = _interopRequireDefault(__webpack_require__2(5075));
                  var _react = _interopRequireDefault(__webpack_require__2(7810));
                  var OnUpdate = /* @__PURE__ */ (function(_React$Component) {
                    (0, _inherits2["default"])(OnUpdate2, _React$Component);
                    function OnUpdate2() {
                      (0, _classCallCheck2["default"])(this, OnUpdate2);
                      return (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(OnUpdate2).apply(this, arguments));
                    }
                    (0, _createClass2["default"])(OnUpdate2, [{
                      key: "componentDidUpdate",
                      value: function componentDidUpdate() {
                        this.props.cb();
                      }
                    }, {
                      key: "render",
                      value: function render() {
                        return null;
                      }
                    }]);
                    return OnUpdate2;
                  })(_react["default"].Component);
                  exports2["default"] = OnUpdate;
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              9810: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__2(5432));
                  var _getPrototypeOf3 = _interopRequireDefault(__webpack_require__2(2132));
                  var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__2(7111));
                  var _inherits2 = _interopRequireDefault(__webpack_require__2(5075));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var _react = _interopRequireDefault(__webpack_require__2(7810));
                  var TemplateContainer = /* @__PURE__ */ (function(_React$Component) {
                    (0, _inherits2["default"])(TemplateContainer2, _React$Component);
                    function TemplateContainer2() {
                      var _getPrototypeOf2;
                      var _this;
                      (0, _classCallCheck2["default"])(this, TemplateContainer2);
                      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
                        args[_key] = arguments[_key];
                      }
                      _this = (0, _possibleConstructorReturn2["default"])(this, (_getPrototypeOf2 = (0, _getPrototypeOf3["default"])(TemplateContainer2)).call.apply(_getPrototypeOf2, [this].concat(args)));
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_template", void 0);
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_templateSetter", function(cmp) {
                        if (cmp) _this._template = cmp;
                      });
                      return _this;
                    }
                    (0, _createClass2["default"])(TemplateContainer2, [{
                      key: "shouldComponentUpdate",
                      value: function shouldComponentUpdate(nextProps) {
                        return this.props.anySelected !== nextProps.anySelected || this.props.itemSelected !== nextProps.itemSelected || this.props.item !== nextProps.item || this.props.template !== nextProps.template || this.props.commonProps !== nextProps.commonProps;
                      }
                    }, {
                      key: "getTemplate",
                      value: function getTemplate() {
                        return this._template;
                      }
                    }, {
                      key: "render",
                      value: function render() {
                        var _this$props = this.props, item = _this$props.item, itemSelected = _this$props.itemSelected, anySelected = _this$props.anySelected, dragHandleProps = _this$props.dragHandleProps, commonProps = _this$props.commonProps;
                        var Template = this.props.template;
                        return _react["default"].createElement(Template, {
                          ref: this._templateSetter,
                          item,
                          itemSelected,
                          anySelected,
                          dragHandleProps,
                          commonProps
                        });
                      }
                    }]);
                    return TemplateContainer2;
                  })(_react["default"].Component);
                  exports2["default"] = TemplateContainer;
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              6931: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireWildcard = __webpack_require__2(9485);
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _objectSpread2 = _interopRequireDefault(__webpack_require__2(2595));
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__2(5432));
                  var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__2(2132));
                  var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__2(7111));
                  var _inherits2 = _interopRequireDefault(__webpack_require__2(5075));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var React = _interopRequireWildcard(__webpack_require__2(7810));
                  var _propTypes = _interopRequireDefault(__webpack_require__2(5826));
                  var _reactMotion = __webpack_require__2(2591);
                  var _immutabilityHelper = _interopRequireDefault(__webpack_require__2(2996));
                  var _reactMultiRef = _interopRequireDefault(__webpack_require__2(2608));
                  var _OnUpdate = _interopRequireDefault(__webpack_require__2(8647));
                  var _MoveContainer = _interopRequireDefault(__webpack_require__2(7887));
                  var DEFAULT_HEIGHT = {
                    natural: 200,
                    drag: 30
                  };
                  function getScrollSpeed(distance, speed, size) {
                    return Math.round(speed - speed / size * distance);
                  }
                  var DraggableList = /* @__PURE__ */ (function(_React$Component) {
                    (0, _inherits2["default"])(DraggableList2, _React$Component);
                    function DraggableList2(props) {
                      var _this;
                      (0, _classCallCheck2["default"])(this, DraggableList2);
                      _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(DraggableList2).call(this, props));
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_itemRefs", new _reactMultiRef["default"]());
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_autoScrollerTimer", void 0);
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_listRef", React.createRef());
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_handleTouchMove", function(e) {
                        e.preventDefault();
                        _this._handleMouseMove(e.touches[0]);
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_handleMouseMove", function(_ref) {
                        var pageY = _ref.pageY, clientY = _ref.clientY;
                        var _this$props = _this.props, list = _this$props.list, autoScrollMaxSpeed = _this$props.autoScrollMaxSpeed, autoScrollRegionSize = _this$props.autoScrollRegionSize;
                        var _this$state = _this.state, dragging = _this$state.dragging, lastDrag = _this$state.lastDrag;
                        if (!dragging || !lastDrag) return;
                        var containerEl = _this._getContainer();
                        var dragVisualIndex = _this._getDragVisualIndex();
                        var keyFn = _this._getKeyFn();
                        clearInterval(_this._autoScrollerTimer);
                        if (dragVisualIndex !== 0 && dragVisualIndex !== list.length - 1) {
                          var scrollSpeed = 0;
                          var containerRect = containerEl && containerEl !== document.body && containerEl.getBoundingClientRect ? containerEl.getBoundingClientRect() : {
                            top: 0,
                            bottom: Infinity
                          };
                          var top = Math.max(0, containerRect.top);
                          var distanceFromTop = clientY - top;
                          if (distanceFromTop > 0 && distanceFromTop < autoScrollRegionSize) {
                            scrollSpeed = -1 * getScrollSpeed(distanceFromTop, autoScrollMaxSpeed, autoScrollRegionSize);
                          } else {
                            var bottom = Math.min(window.innerHeight, containerRect.bottom);
                            var distanceFromBottom = bottom - clientY;
                            if (distanceFromBottom > 0 && distanceFromBottom < autoScrollRegionSize) {
                              scrollSpeed = getScrollSpeed(distanceFromBottom, autoScrollMaxSpeed, autoScrollRegionSize);
                            }
                          }
                          if (scrollSpeed !== 0) {
                            _this._scrollContainer(scrollSpeed);
                            _this._autoScrollerTimer = setTimeout(function() {
                              _this._handleMouseMove({
                                pageY: pageY + (containerEl === document.body ? scrollSpeed : 0),
                                clientY
                              });
                            }, 16);
                          }
                        }
                        var containerScroll = !containerEl || containerEl === document.body ? 0 : containerEl.scrollTop;
                        var mouseY = pageY - lastDrag.mouseOffset + containerScroll;
                        if (_this.props.constrainDrag) {
                          var visualList = _this._getVisualListDuringDrag();
                          mouseY = Math.max(mouseY, _this._getDistanceFromTopDuringDrag(lastDrag, keyFn(visualList[0]), visualList));
                          mouseY = Math.min(mouseY, _this._getDistanceFromTopDuringDrag(lastDrag, keyFn(visualList[visualList.length - 1]), visualList));
                        }
                        _this.setState({
                          lastDrag: (0, _objectSpread2["default"])({}, lastDrag, {
                            mouseY
                          })
                        });
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_handleMouseUp", function() {
                        clearInterval(_this._autoScrollerTimer);
                        window.removeEventListener("mouseup", _this._handleMouseUp);
                        window.removeEventListener("touchend", _this._handleMouseUp);
                        window.removeEventListener("touchmove", _this._handleTouchMove);
                        window.removeEventListener("mousemove", _this._handleMouseMove);
                        if (document.documentElement) document.documentElement.style.cursor = "";
                        _this._lastScrollDelta = 0;
                        var _this$props2 = _this.props, list = _this$props2.list, onMoveEnd = _this$props2.onMoveEnd;
                        var _this$state2 = _this.state, dragging = _this$state2.dragging, lastDrag = _this$state2.lastDrag;
                        if (dragging && lastDrag && onMoveEnd) {
                          var dragIndex = _this._getDragListIndex();
                          var _newIndex = _this._getDragVisualIndex();
                          if (dragIndex !== _newIndex) {
                            var _newList = _this._getVisualListDuringDrag();
                            onMoveEnd(_newList, list[dragIndex], dragIndex, _newIndex);
                          }
                          _this.setState({
                            dragging: false
                          });
                        }
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_lastScrollDelta", 0);
                      _this.state = {
                        useAbsolutePositioning: false,
                        dragging: false,
                        lastDrag: null,
                        heights: null
                      };
                      return _this;
                    }
                    (0, _createClass2["default"])(DraggableList2, [{
                      key: "getItemInstance",
                      value: function getItemInstance(key) {
                        var ref = this._itemRefs.map.get(key);
                        if (!ref) throw new Error("key not found");
                        return ref.getTemplate();
                      }
                    }, {
                      key: "componentWillUnmount",
                      value: function componentWillUnmount() {
                        this._handleMouseUp();
                      }
                    }, {
                      key: "_handleTouchStart",
                      value: function _handleTouchStart(itemKey, pressY, event) {
                        event.stopPropagation();
                        this._handleStartDrag(itemKey, pressY, event.touches[0].pageY);
                      }
                    }, {
                      key: "_handleMouseDown",
                      value: function _handleMouseDown(itemKey, pressY, event) {
                        event.preventDefault();
                        this._handleStartDrag(itemKey, pressY, event.pageY);
                      }
                    }, {
                      key: "_handleStartDrag",
                      value: function _handleStartDrag(itemKey, pressY, pageY) {
                        var _this2 = this;
                        if (document.documentElement) document.documentElement.style.cursor = "move";
                        window.addEventListener("mouseup", this._handleMouseUp);
                        window.addEventListener("touchend", this._handleMouseUp);
                        window.addEventListener("touchmove", this._handleTouchMove);
                        window.addEventListener("mousemove", this._handleMouseMove);
                        {
                          var listEl = this._listRef.current;
                          if (!listEl) throw new Error("Should not happen");
                          if (listEl.contains && document.activeElement && listEl.contains(document.activeElement)) {
                            document.activeElement.blur();
                          }
                        }
                        var keyFn = this._getKeyFn();
                        var newHeights = null;
                        if (this.state.heights == null) {
                          var _newHeights = /* @__PURE__ */ Object.create(null);
                          this.props.list.forEach(function(item) {
                            var key = keyFn(item);
                            var containerRef = _this2._itemRefs.map.get(key);
                            var refEl = containerRef ? containerRef.getDOMNode().firstElementChild : null;
                            var ref = containerRef ? containerRef.getTemplate() : null;
                            var natural = refEl instanceof HTMLElement ? refEl.offsetHeight : DEFAULT_HEIGHT.natural;
                            var drag = ref && typeof ref.getDragHeight === "function" && ref.getDragHeight() || natural;
                            _newHeights[key] = {
                              natural,
                              drag
                            };
                          });
                          newHeights = _newHeights;
                        }
                        var afterHeights = function afterHeights2() {
                          var itemIndex = _this2.props.list.map(keyFn).indexOf(itemKey);
                          var startY = pressY == null ? _this2._getDistance(0, itemIndex, false) : pressY;
                          var containerEl = _this2._getContainer();
                          var containerScroll = !containerEl || containerEl === document.body ? 0 : containerEl.scrollTop;
                          _this2.setState({
                            useAbsolutePositioning: true,
                            dragging: true,
                            lastDrag: {
                              itemKey,
                              startY,
                              mouseY: startY,
                              mouseOffset: pageY - startY + containerScroll
                            }
                          });
                        };
                        if (newHeights) {
                          this.setState({
                            heights: newHeights
                          }, afterHeights);
                        } else {
                          afterHeights();
                        }
                      }
                    }, {
                      key: "_scrollContainer",
                      value: function _scrollContainer(delta) {
                        var containerEl = this._getContainer();
                        if (!containerEl) return;
                        if (window.scrollBy && containerEl === document.body) {
                          window.scrollBy(0, delta);
                        } else {
                          containerEl.scrollTop += delta;
                        }
                      }
                    }, {
                      key: "_adjustScrollAtEnd",
                      value: function _adjustScrollAtEnd(delta) {
                        var frameDelta = Math.round(delta - this._lastScrollDelta);
                        this._scrollContainer(frameDelta);
                        this._lastScrollDelta += frameDelta;
                      }
                    }, {
                      key: "_getDragListIndex",
                      value: function _getDragListIndex() {
                        var list = this.props.list;
                        var lastDrag = this.state.lastDrag;
                        if (!lastDrag) {
                          throw new Error("No drag happened");
                        }
                        var keyFn = this._getKeyFn();
                        return DraggableList2._getIndexOfItemWithKey(keyFn, list, lastDrag.itemKey);
                      }
                    }, {
                      key: "_getDragVisualIndex",
                      value: function _getDragVisualIndex() {
                        var _this$props3 = this.props, list = _this$props3.list, padding = _this$props3.padding;
                        var _this$state3 = this.state, dragging = _this$state3.dragging, lastDrag = _this$state3.lastDrag;
                        if (!dragging || !lastDrag) throw new Error("Should not happen");
                        var dragListIndex = this._getDragListIndex();
                        var mouseY = lastDrag.mouseY, startY = lastDrag.startY;
                        var movementFromNatural = mouseY - startY;
                        var direction = movementFromNatural > 0 ? 1 : movementFromNatural < 0 ? -1 : 0;
                        var newIndex = dragListIndex;
                        if (direction !== 0) {
                          var keyFn = this._getKeyFn();
                          var reach = Math.abs(movementFromNatural);
                          for (var i = dragListIndex + direction; i < list.length && i >= 0; i += direction) {
                            var iDragHeight = this._getItemHeight(keyFn(list[i])).drag;
                            if (reach < iDragHeight / 2 + padding) break;
                            reach -= iDragHeight + padding;
                            newIndex = i;
                          }
                        }
                        return newIndex;
                      }
                    }, {
                      key: "_getVisualListDuringDrag",
                      value: function _getVisualListDuringDrag() {
                        var list = this.props.list;
                        var _this$state4 = this.state, dragging = _this$state4.dragging, lastDrag = _this$state4.lastDrag;
                        if (!dragging || !lastDrag) throw new Error("Should not happen: _getVisualListDuringDrag called outside of drag");
                        var dragListIndex = this._getDragListIndex();
                        var dragVisualIndex = this._getDragVisualIndex();
                        return (0, _immutabilityHelper["default"])(list, {
                          $splice: [[dragListIndex, 1], [dragVisualIndex, 0, list[dragListIndex]]]
                        });
                      }
                    }, {
                      key: "_getItemHeight",
                      value: function _getItemHeight(key) {
                        return this.state.heights != null && key in this.state.heights ? this.state.heights[key] : DEFAULT_HEIGHT;
                      }
                      // Get the distance between the tops of two items in the list.
                      // Does not consider how the dragged item may be rendered in a different position
                      // unless you pass in the re-ordered list as a parameter.
                    }, {
                      key: "_getDistance",
                      value: function _getDistance(start, end, dragging) {
                        var list = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : this.props.list;
                        if (end < start) {
                          return -this._getDistance(end, start, dragging, list);
                        }
                        var padding = this.props.padding;
                        var keyFn = this._getKeyFn();
                        var distance = 0;
                        for (var i = start; i < end; i++) {
                          var height = this._getItemHeight(keyFn(list[i]));
                          distance += (dragging ? height.drag : height.natural) + padding;
                        }
                        return distance;
                      }
                    }, {
                      key: "_getDistanceFromTopDuringDrag",
                      value: function _getDistanceFromTopDuringDrag(lastDrag, itemKey, visualList) {
                        var keyFn = this._getKeyFn();
                        var index = DraggableList2._getIndexOfItemWithKey(keyFn, visualList, itemKey);
                        var dragListIndex = this._getDragListIndex();
                        var dragVisualIndex = DraggableList2._getIndexOfItemWithKey(keyFn, visualList, lastDrag.itemKey);
                        var offset = 0;
                        if (dragVisualIndex < dragListIndex) {
                          var dragItemHeight = this._getItemHeight(lastDrag.itemKey);
                          var newCenterHeight = this._getItemHeight(keyFn(visualList[dragListIndex]));
                          offset = dragItemHeight.drag - newCenterHeight.drag;
                        }
                        return lastDrag.startY + offset + this._getDistance(dragListIndex, index, true, visualList);
                      }
                    }, {
                      key: "_getContainer",
                      value: function _getContainer() {
                        var container = this.props.container;
                        return container ? container() : null;
                      }
                    }, {
                      key: "_getKeyFn",
                      value: function _getKeyFn() {
                        return DraggableList2._getKeyFn(this.props.itemKey);
                      }
                    }, {
                      key: "render",
                      value: function render() {
                        var _this3 = this;
                        var _this$props4 = this.props, list = _this$props4.list, springConfig = _this$props4.springConfig, container = _this$props4.container, padding = _this$props4.padding, template = _this$props4.template, unsetZIndex = _this$props4.unsetZIndex, commonProps = _this$props4.commonProps;
                        var _this$state5 = this.state, dragging = _this$state5.dragging, lastDrag = _this$state5.lastDrag, useAbsolutePositioning = _this$state5.useAbsolutePositioning;
                        var keyFn = this._getKeyFn();
                        var anySelected = (0, _reactMotion.spring)(dragging ? 1 : 0, springConfig);
                        var visualList = dragging ? this._getVisualListDuringDrag() : list;
                        var children = list.map(function(item, i) {
                          var key = keyFn(item);
                          var selectedStyle = dragging && lastDrag && lastDrag.itemKey === key ? {
                            itemSelected: (0, _reactMotion.spring)(1, springConfig),
                            y: lastDrag.mouseY
                          } : {
                            itemSelected: (0, _reactMotion.spring)(0, springConfig),
                            y: (useAbsolutePositioning ? _reactMotion.spring : function(x, ignored) {
                              return x;
                            })(dragging && lastDrag ? _this3._getDistanceFromTopDuringDrag(lastDrag, key, visualList) : _this3._getDistance(0, i, false), springConfig)
                          };
                          var style = (0, _objectSpread2["default"])({
                            anySelected
                          }, selectedStyle);
                          var makeDragHandleProps = function makeDragHandleProps2(getY) {
                            return {
                              onMouseDown: function onMouseDown(e) {
                                return _this3._handleMouseDown(key, getY(), e);
                              },
                              onTouchStart: function onTouchStart(e) {
                                return _this3._handleTouchStart(key, getY(), e);
                              }
                            };
                          };
                          var height = _this3._getItemHeight(key);
                          return React.createElement(_reactMotion.Motion, {
                            style,
                            key,
                            children: function children2(_ref2) {
                              var itemSelected = _ref2.itemSelected, anySelected2 = _ref2.anySelected, y = _ref2.y;
                              return React.createElement(_MoveContainer["default"], {
                                ref: _this3._itemRefs.ref(key),
                                y: useAbsolutePositioning ? y : null,
                                template,
                                padding,
                                item,
                                itemSelected,
                                anySelected: anySelected2,
                                height,
                                zIndex: unsetZIndex && !useAbsolutePositioning ? "auto" : lastDrag && lastDrag.itemKey === key ? list.length : i,
                                makeDragHandleProps,
                                commonProps
                              });
                            }
                          });
                        });
                        var adjustScroll = 0;
                        if (!dragging && lastDrag && useAbsolutePositioning) {
                          var dragListIndex = this._getDragListIndex();
                          adjustScroll = (0, _reactMotion.spring)(this._getDistance(0, dragListIndex, false) - lastDrag.mouseY, springConfig);
                        }
                        var heightReserverHeight = 0;
                        var heightReserverMarginBottom = 0;
                        if (list.length) {
                          heightReserverMarginBottom = padding;
                          if (useAbsolutePositioning) {
                            heightReserverHeight = this._getDistance(0, list.length, false) - padding;
                          }
                        }
                        return React.createElement("div", {
                          style: {
                            position: "relative"
                          },
                          ref: this._listRef
                        }, React.createElement(_reactMotion.Motion, {
                          style: {
                            adjustScroll,
                            anySelected
                          },
                          onRest: function onRest() {
                            if (!dragging) {
                              _this3.setState({
                                heights: null,
                                useAbsolutePositioning: false
                              });
                            }
                          },
                          children: function children2(_ref3) {
                            var adjustScroll2 = _ref3.adjustScroll;
                            return React.createElement("div", {
                              style: {
                                display: useAbsolutePositioning ? "block" : "none",
                                height: "".concat(heightReserverHeight, "px"),
                                marginBottom: "".concat(heightReserverMarginBottom, "px")
                              }
                            }, container && React.createElement(_OnUpdate["default"], {
                              cb: function cb() {
                                if (!dragging && lastDrag && useAbsolutePositioning) {
                                  _this3._adjustScrollAtEnd(adjustScroll2);
                                }
                              }
                            }));
                          }
                        }), children);
                      }
                    }], [{
                      key: "getDerivedStateFromProps",
                      value: function getDerivedStateFromProps(newProps, state) {
                        var list = newProps.list;
                        var lastDrag = state.lastDrag;
                        if (lastDrag) {
                          var keyFn = DraggableList2._getKeyFn(newProps.itemKey);
                          try {
                            DraggableList2._getIndexOfItemWithKey(keyFn, list, lastDrag.itemKey);
                          } catch (err) {
                            return {
                              dragging: false,
                              lastDrag: null
                            };
                          }
                        }
                        return null;
                      }
                    }, {
                      key: "_getIndexOfItemWithKey",
                      value: function _getIndexOfItemWithKey(keyFn, list, itemKey) {
                        for (var i = 0, len = list.length; i < len; i++) {
                          if (keyFn(list[i]) === itemKey) {
                            return i;
                          }
                        }
                        throw new Error("Failed to find drag index");
                      }
                    }, {
                      key: "_getKeyFn",
                      value: function _getKeyFn(itemKey) {
                        return typeof itemKey === "function" ? itemKey : function(x) {
                          return x[itemKey];
                        };
                      }
                    }]);
                    return DraggableList2;
                  })(React.Component);
                  exports2["default"] = DraggableList;
                  (0, _defineProperty2["default"])(DraggableList, "propTypes", {
                    itemKey: _propTypes["default"].oneOfType([_propTypes["default"].string, _propTypes["default"].func]).isRequired,
                    template: _propTypes["default"].func,
                    list: _propTypes["default"].array.isRequired,
                    onMoveEnd: _propTypes["default"].func,
                    container: _propTypes["default"].func,
                    springConfig: _propTypes["default"].object,
                    constrainDrag: _propTypes["default"].bool,
                    padding: _propTypes["default"].number,
                    unsetZIndex: _propTypes["default"].bool,
                    autoScrollMaxSpeed: _propTypes["default"].number.isRequired,
                    autoScrollRegionSize: _propTypes["default"].number.isRequired,
                    commonProps: _propTypes["default"].object
                  });
                  (0, _defineProperty2["default"])(DraggableList, "defaultProps", {
                    springConfig: {
                      stiffness: 300,
                      damping: 50
                    },
                    padding: 10,
                    unsetZIndex: false,
                    constrainDrag: false,
                    autoScrollMaxSpeed: 15,
                    autoScrollRegionSize: 30
                  });
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              2793: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  exports2.__esModule = true;
                  var _extends = Object.assign || function(target) {
                    for (var i = 1; i < arguments.length; i++) {
                      var source = arguments[i];
                      for (var key in source) {
                        if (Object.prototype.hasOwnProperty.call(source, key)) {
                          target[key] = source[key];
                        }
                      }
                    }
                    return target;
                  };
                  var _createClass = /* @__PURE__ */ (function() {
                    function defineProperties(target, props) {
                      for (var i = 0; i < props.length; i++) {
                        var descriptor = props[i];
                        descriptor.enumerable = descriptor.enumerable || false;
                        descriptor.configurable = true;
                        if ("value" in descriptor) descriptor.writable = true;
                        Object.defineProperty(target, descriptor.key, descriptor);
                      }
                    }
                    return function(Constructor, protoProps, staticProps) {
                      if (protoProps) defineProperties(Constructor.prototype, protoProps);
                      if (staticProps) defineProperties(Constructor, staticProps);
                      return Constructor;
                    };
                  })();
                  function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : { "default": obj };
                  }
                  function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) {
                      throw new TypeError("Cannot call a class as a function");
                    }
                  }
                  function _inherits(subClass, superClass) {
                    if (typeof superClass !== "function" && superClass !== null) {
                      throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
                    }
                    subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });
                    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
                  }
                  var _mapToZero = __webpack_require__2(5042);
                  var _mapToZero2 = _interopRequireDefault(_mapToZero);
                  var _stripStyle = __webpack_require__2(6148);
                  var _stripStyle2 = _interopRequireDefault(_stripStyle);
                  var _stepper3 = __webpack_require__2(1390);
                  var _stepper4 = _interopRequireDefault(_stepper3);
                  var _performanceNow = __webpack_require__2(1453);
                  var _performanceNow2 = _interopRequireDefault(_performanceNow);
                  var _raf = __webpack_require__2(1968);
                  var _raf2 = _interopRequireDefault(_raf);
                  var _shouldStopAnimation = __webpack_require__2(9988);
                  var _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);
                  var _react = __webpack_require__2(7810);
                  var _react2 = _interopRequireDefault(_react);
                  var _propTypes = __webpack_require__2(5826);
                  var _propTypes2 = _interopRequireDefault(_propTypes);
                  var msPerFrame = 1e3 / 60;
                  var Motion = (function(_React$Component) {
                    _inherits(Motion2, _React$Component);
                    _createClass(Motion2, null, [{
                      key: "propTypes",
                      value: {
                        // TOOD: warn against putting a config in here
                        defaultStyle: _propTypes2["default"].objectOf(_propTypes2["default"].number),
                        style: _propTypes2["default"].objectOf(_propTypes2["default"].oneOfType([_propTypes2["default"].number, _propTypes2["default"].object])).isRequired,
                        children: _propTypes2["default"].func.isRequired,
                        onRest: _propTypes2["default"].func
                      },
                      enumerable: true
                    }]);
                    function Motion2(props) {
                      var _this = this;
                      _classCallCheck(this, Motion2);
                      _React$Component.call(this, props);
                      this.wasAnimating = false;
                      this.animationID = null;
                      this.prevTime = 0;
                      this.accumulatedTime = 0;
                      this.unreadPropStyle = null;
                      this.clearUnreadPropStyle = function(destStyle) {
                        var dirty = false;
                        var _state = _this.state;
                        var currentStyle = _state.currentStyle;
                        var currentVelocity = _state.currentVelocity;
                        var lastIdealStyle = _state.lastIdealStyle;
                        var lastIdealVelocity = _state.lastIdealVelocity;
                        for (var key in destStyle) {
                          if (!Object.prototype.hasOwnProperty.call(destStyle, key)) {
                            continue;
                          }
                          var styleValue = destStyle[key];
                          if (typeof styleValue === "number") {
                            if (!dirty) {
                              dirty = true;
                              currentStyle = _extends({}, currentStyle);
                              currentVelocity = _extends({}, currentVelocity);
                              lastIdealStyle = _extends({}, lastIdealStyle);
                              lastIdealVelocity = _extends({}, lastIdealVelocity);
                            }
                            currentStyle[key] = styleValue;
                            currentVelocity[key] = 0;
                            lastIdealStyle[key] = styleValue;
                            lastIdealVelocity[key] = 0;
                          }
                        }
                        if (dirty) {
                          _this.setState({ currentStyle, currentVelocity, lastIdealStyle, lastIdealVelocity });
                        }
                      };
                      this.startAnimationIfNecessary = function() {
                        _this.animationID = _raf2["default"](function(timestamp) {
                          var propsStyle = _this.props.style;
                          if (_shouldStopAnimation2["default"](_this.state.currentStyle, propsStyle, _this.state.currentVelocity)) {
                            if (_this.wasAnimating && _this.props.onRest) {
                              _this.props.onRest();
                            }
                            _this.animationID = null;
                            _this.wasAnimating = false;
                            _this.accumulatedTime = 0;
                            return;
                          }
                          _this.wasAnimating = true;
                          var currentTime = timestamp || _performanceNow2["default"]();
                          var timeDelta = currentTime - _this.prevTime;
                          _this.prevTime = currentTime;
                          _this.accumulatedTime = _this.accumulatedTime + timeDelta;
                          if (_this.accumulatedTime > msPerFrame * 10) {
                            _this.accumulatedTime = 0;
                          }
                          if (_this.accumulatedTime === 0) {
                            _this.animationID = null;
                            _this.startAnimationIfNecessary();
                            return;
                          }
                          var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;
                          var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);
                          var newLastIdealStyle = {};
                          var newLastIdealVelocity = {};
                          var newCurrentStyle = {};
                          var newCurrentVelocity = {};
                          for (var key in propsStyle) {
                            if (!Object.prototype.hasOwnProperty.call(propsStyle, key)) {
                              continue;
                            }
                            var styleValue = propsStyle[key];
                            if (typeof styleValue === "number") {
                              newCurrentStyle[key] = styleValue;
                              newCurrentVelocity[key] = 0;
                              newLastIdealStyle[key] = styleValue;
                              newLastIdealVelocity[key] = 0;
                            } else {
                              var newLastIdealStyleValue = _this.state.lastIdealStyle[key];
                              var newLastIdealVelocityValue = _this.state.lastIdealVelocity[key];
                              for (var i = 0; i < framesToCatchUp; i++) {
                                var _stepper = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                                newLastIdealStyleValue = _stepper[0];
                                newLastIdealVelocityValue = _stepper[1];
                              }
                              var _stepper2 = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                              var nextIdealX = _stepper2[0];
                              var nextIdealV = _stepper2[1];
                              newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;
                              newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;
                              newLastIdealStyle[key] = newLastIdealStyleValue;
                              newLastIdealVelocity[key] = newLastIdealVelocityValue;
                            }
                          }
                          _this.animationID = null;
                          _this.accumulatedTime -= framesToCatchUp * msPerFrame;
                          _this.setState({
                            currentStyle: newCurrentStyle,
                            currentVelocity: newCurrentVelocity,
                            lastIdealStyle: newLastIdealStyle,
                            lastIdealVelocity: newLastIdealVelocity
                          });
                          _this.unreadPropStyle = null;
                          _this.startAnimationIfNecessary();
                        });
                      };
                      this.state = this.defaultState();
                    }
                    Motion2.prototype.defaultState = function defaultState() {
                      var _props = this.props;
                      var defaultStyle = _props.defaultStyle;
                      var style = _props.style;
                      var currentStyle = defaultStyle || _stripStyle2["default"](style);
                      var currentVelocity = _mapToZero2["default"](currentStyle);
                      return {
                        currentStyle,
                        currentVelocity,
                        lastIdealStyle: currentStyle,
                        lastIdealVelocity: currentVelocity
                      };
                    };
                    Motion2.prototype.componentDidMount = function componentDidMount() {
                      this.prevTime = _performanceNow2["default"]();
                      this.startAnimationIfNecessary();
                    };
                    Motion2.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {
                      if (this.unreadPropStyle != null) {
                        this.clearUnreadPropStyle(this.unreadPropStyle);
                      }
                      this.unreadPropStyle = props.style;
                      if (this.animationID == null) {
                        this.prevTime = _performanceNow2["default"]();
                        this.startAnimationIfNecessary();
                      }
                    };
                    Motion2.prototype.componentWillUnmount = function componentWillUnmount() {
                      if (this.animationID != null) {
                        _raf2["default"].cancel(this.animationID);
                        this.animationID = null;
                      }
                    };
                    Motion2.prototype.render = function render() {
                      var renderedChildren = this.props.children(this.state.currentStyle);
                      return renderedChildren && _react2["default"].Children.only(renderedChildren);
                    };
                    return Motion2;
                  })(_react2["default"].Component);
                  exports2["default"] = Motion;
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              9959: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  exports2.__esModule = true;
                  var _extends = Object.assign || function(target) {
                    for (var i = 1; i < arguments.length; i++) {
                      var source = arguments[i];
                      for (var key in source) {
                        if (Object.prototype.hasOwnProperty.call(source, key)) {
                          target[key] = source[key];
                        }
                      }
                    }
                    return target;
                  };
                  var _createClass = /* @__PURE__ */ (function() {
                    function defineProperties(target, props) {
                      for (var i = 0; i < props.length; i++) {
                        var descriptor = props[i];
                        descriptor.enumerable = descriptor.enumerable || false;
                        descriptor.configurable = true;
                        if ("value" in descriptor) descriptor.writable = true;
                        Object.defineProperty(target, descriptor.key, descriptor);
                      }
                    }
                    return function(Constructor, protoProps, staticProps) {
                      if (protoProps) defineProperties(Constructor.prototype, protoProps);
                      if (staticProps) defineProperties(Constructor, staticProps);
                      return Constructor;
                    };
                  })();
                  function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : { "default": obj };
                  }
                  function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) {
                      throw new TypeError("Cannot call a class as a function");
                    }
                  }
                  function _inherits(subClass, superClass) {
                    if (typeof superClass !== "function" && superClass !== null) {
                      throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
                    }
                    subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });
                    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
                  }
                  var _mapToZero = __webpack_require__2(5042);
                  var _mapToZero2 = _interopRequireDefault(_mapToZero);
                  var _stripStyle = __webpack_require__2(6148);
                  var _stripStyle2 = _interopRequireDefault(_stripStyle);
                  var _stepper3 = __webpack_require__2(1390);
                  var _stepper4 = _interopRequireDefault(_stepper3);
                  var _performanceNow = __webpack_require__2(1453);
                  var _performanceNow2 = _interopRequireDefault(_performanceNow);
                  var _raf = __webpack_require__2(1968);
                  var _raf2 = _interopRequireDefault(_raf);
                  var _shouldStopAnimation = __webpack_require__2(9988);
                  var _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);
                  var _react = __webpack_require__2(7810);
                  var _react2 = _interopRequireDefault(_react);
                  var _propTypes = __webpack_require__2(5826);
                  var _propTypes2 = _interopRequireDefault(_propTypes);
                  var msPerFrame = 1e3 / 60;
                  function shouldStopAnimationAll(currentStyles, styles, currentVelocities) {
                    for (var i = 0; i < currentStyles.length; i++) {
                      if (!_shouldStopAnimation2["default"](currentStyles[i], styles[i], currentVelocities[i])) {
                        return false;
                      }
                    }
                    return true;
                  }
                  var StaggeredMotion = (function(_React$Component) {
                    _inherits(StaggeredMotion2, _React$Component);
                    _createClass(StaggeredMotion2, null, [{
                      key: "propTypes",
                      value: {
                        // TOOD: warn against putting a config in here
                        defaultStyles: _propTypes2["default"].arrayOf(_propTypes2["default"].objectOf(_propTypes2["default"].number)),
                        styles: _propTypes2["default"].func.isRequired,
                        children: _propTypes2["default"].func.isRequired
                      },
                      enumerable: true
                    }]);
                    function StaggeredMotion2(props) {
                      var _this = this;
                      _classCallCheck(this, StaggeredMotion2);
                      _React$Component.call(this, props);
                      this.animationID = null;
                      this.prevTime = 0;
                      this.accumulatedTime = 0;
                      this.unreadPropStyles = null;
                      this.clearUnreadPropStyle = function(unreadPropStyles) {
                        var _state = _this.state;
                        var currentStyles = _state.currentStyles;
                        var currentVelocities = _state.currentVelocities;
                        var lastIdealStyles = _state.lastIdealStyles;
                        var lastIdealVelocities = _state.lastIdealVelocities;
                        var someDirty = false;
                        for (var i = 0; i < unreadPropStyles.length; i++) {
                          var unreadPropStyle = unreadPropStyles[i];
                          var dirty = false;
                          for (var key in unreadPropStyle) {
                            if (!Object.prototype.hasOwnProperty.call(unreadPropStyle, key)) {
                              continue;
                            }
                            var styleValue = unreadPropStyle[key];
                            if (typeof styleValue === "number") {
                              if (!dirty) {
                                dirty = true;
                                someDirty = true;
                                currentStyles[i] = _extends({}, currentStyles[i]);
                                currentVelocities[i] = _extends({}, currentVelocities[i]);
                                lastIdealStyles[i] = _extends({}, lastIdealStyles[i]);
                                lastIdealVelocities[i] = _extends({}, lastIdealVelocities[i]);
                              }
                              currentStyles[i][key] = styleValue;
                              currentVelocities[i][key] = 0;
                              lastIdealStyles[i][key] = styleValue;
                              lastIdealVelocities[i][key] = 0;
                            }
                          }
                        }
                        if (someDirty) {
                          _this.setState({ currentStyles, currentVelocities, lastIdealStyles, lastIdealVelocities });
                        }
                      };
                      this.startAnimationIfNecessary = function() {
                        _this.animationID = _raf2["default"](function(timestamp) {
                          var destStyles = _this.props.styles(_this.state.lastIdealStyles);
                          if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities)) {
                            _this.animationID = null;
                            _this.accumulatedTime = 0;
                            return;
                          }
                          var currentTime = timestamp || _performanceNow2["default"]();
                          var timeDelta = currentTime - _this.prevTime;
                          _this.prevTime = currentTime;
                          _this.accumulatedTime = _this.accumulatedTime + timeDelta;
                          if (_this.accumulatedTime > msPerFrame * 10) {
                            _this.accumulatedTime = 0;
                          }
                          if (_this.accumulatedTime === 0) {
                            _this.animationID = null;
                            _this.startAnimationIfNecessary();
                            return;
                          }
                          var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;
                          var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);
                          var newLastIdealStyles = [];
                          var newLastIdealVelocities = [];
                          var newCurrentStyles = [];
                          var newCurrentVelocities = [];
                          for (var i = 0; i < destStyles.length; i++) {
                            var destStyle = destStyles[i];
                            var newCurrentStyle = {};
                            var newCurrentVelocity = {};
                            var newLastIdealStyle = {};
                            var newLastIdealVelocity = {};
                            for (var key in destStyle) {
                              if (!Object.prototype.hasOwnProperty.call(destStyle, key)) {
                                continue;
                              }
                              var styleValue = destStyle[key];
                              if (typeof styleValue === "number") {
                                newCurrentStyle[key] = styleValue;
                                newCurrentVelocity[key] = 0;
                                newLastIdealStyle[key] = styleValue;
                                newLastIdealVelocity[key] = 0;
                              } else {
                                var newLastIdealStyleValue = _this.state.lastIdealStyles[i][key];
                                var newLastIdealVelocityValue = _this.state.lastIdealVelocities[i][key];
                                for (var j = 0; j < framesToCatchUp; j++) {
                                  var _stepper = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                                  newLastIdealStyleValue = _stepper[0];
                                  newLastIdealVelocityValue = _stepper[1];
                                }
                                var _stepper2 = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                                var nextIdealX = _stepper2[0];
                                var nextIdealV = _stepper2[1];
                                newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;
                                newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;
                                newLastIdealStyle[key] = newLastIdealStyleValue;
                                newLastIdealVelocity[key] = newLastIdealVelocityValue;
                              }
                            }
                            newCurrentStyles[i] = newCurrentStyle;
                            newCurrentVelocities[i] = newCurrentVelocity;
                            newLastIdealStyles[i] = newLastIdealStyle;
                            newLastIdealVelocities[i] = newLastIdealVelocity;
                          }
                          _this.animationID = null;
                          _this.accumulatedTime -= framesToCatchUp * msPerFrame;
                          _this.setState({
                            currentStyles: newCurrentStyles,
                            currentVelocities: newCurrentVelocities,
                            lastIdealStyles: newLastIdealStyles,
                            lastIdealVelocities: newLastIdealVelocities
                          });
                          _this.unreadPropStyles = null;
                          _this.startAnimationIfNecessary();
                        });
                      };
                      this.state = this.defaultState();
                    }
                    StaggeredMotion2.prototype.defaultState = function defaultState() {
                      var _props = this.props;
                      var defaultStyles = _props.defaultStyles;
                      var styles = _props.styles;
                      var currentStyles = defaultStyles || styles().map(_stripStyle2["default"]);
                      var currentVelocities = currentStyles.map(function(currentStyle) {
                        return _mapToZero2["default"](currentStyle);
                      });
                      return {
                        currentStyles,
                        currentVelocities,
                        lastIdealStyles: currentStyles,
                        lastIdealVelocities: currentVelocities
                      };
                    };
                    StaggeredMotion2.prototype.componentDidMount = function componentDidMount() {
                      this.prevTime = _performanceNow2["default"]();
                      this.startAnimationIfNecessary();
                    };
                    StaggeredMotion2.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {
                      if (this.unreadPropStyles != null) {
                        this.clearUnreadPropStyle(this.unreadPropStyles);
                      }
                      this.unreadPropStyles = props.styles(this.state.lastIdealStyles);
                      if (this.animationID == null) {
                        this.prevTime = _performanceNow2["default"]();
                        this.startAnimationIfNecessary();
                      }
                    };
                    StaggeredMotion2.prototype.componentWillUnmount = function componentWillUnmount() {
                      if (this.animationID != null) {
                        _raf2["default"].cancel(this.animationID);
                        this.animationID = null;
                      }
                    };
                    StaggeredMotion2.prototype.render = function render() {
                      var renderedChildren = this.props.children(this.state.currentStyles);
                      return renderedChildren && _react2["default"].Children.only(renderedChildren);
                    };
                    return StaggeredMotion2;
                  })(_react2["default"].Component);
                  exports2["default"] = StaggeredMotion;
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              6126: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  exports2.__esModule = true;
                  var _extends = Object.assign || function(target) {
                    for (var i = 1; i < arguments.length; i++) {
                      var source = arguments[i];
                      for (var key in source) {
                        if (Object.prototype.hasOwnProperty.call(source, key)) {
                          target[key] = source[key];
                        }
                      }
                    }
                    return target;
                  };
                  var _createClass = /* @__PURE__ */ (function() {
                    function defineProperties(target, props) {
                      for (var i = 0; i < props.length; i++) {
                        var descriptor = props[i];
                        descriptor.enumerable = descriptor.enumerable || false;
                        descriptor.configurable = true;
                        if ("value" in descriptor) descriptor.writable = true;
                        Object.defineProperty(target, descriptor.key, descriptor);
                      }
                    }
                    return function(Constructor, protoProps, staticProps) {
                      if (protoProps) defineProperties(Constructor.prototype, protoProps);
                      if (staticProps) defineProperties(Constructor, staticProps);
                      return Constructor;
                    };
                  })();
                  function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : { "default": obj };
                  }
                  function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) {
                      throw new TypeError("Cannot call a class as a function");
                    }
                  }
                  function _inherits(subClass, superClass) {
                    if (typeof superClass !== "function" && superClass !== null) {
                      throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
                    }
                    subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });
                    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
                  }
                  var _mapToZero = __webpack_require__2(5042);
                  var _mapToZero2 = _interopRequireDefault(_mapToZero);
                  var _stripStyle = __webpack_require__2(6148);
                  var _stripStyle2 = _interopRequireDefault(_stripStyle);
                  var _stepper3 = __webpack_require__2(1390);
                  var _stepper4 = _interopRequireDefault(_stepper3);
                  var _mergeDiff = __webpack_require__2(3780);
                  var _mergeDiff2 = _interopRequireDefault(_mergeDiff);
                  var _performanceNow = __webpack_require__2(1453);
                  var _performanceNow2 = _interopRequireDefault(_performanceNow);
                  var _raf = __webpack_require__2(1968);
                  var _raf2 = _interopRequireDefault(_raf);
                  var _shouldStopAnimation = __webpack_require__2(9988);
                  var _shouldStopAnimation2 = _interopRequireDefault(_shouldStopAnimation);
                  var _react = __webpack_require__2(7810);
                  var _react2 = _interopRequireDefault(_react);
                  var _propTypes = __webpack_require__2(5826);
                  var _propTypes2 = _interopRequireDefault(_propTypes);
                  var msPerFrame = 1e3 / 60;
                  function rehydrateStyles(mergedPropsStyles, unreadPropStyles, plainStyles) {
                    var cUnreadPropStyles = unreadPropStyles;
                    if (cUnreadPropStyles == null) {
                      return mergedPropsStyles.map(function(mergedPropsStyle, i) {
                        return {
                          key: mergedPropsStyle.key,
                          data: mergedPropsStyle.data,
                          style: plainStyles[i]
                        };
                      });
                    }
                    return mergedPropsStyles.map(function(mergedPropsStyle, i) {
                      for (var j = 0; j < cUnreadPropStyles.length; j++) {
                        if (cUnreadPropStyles[j].key === mergedPropsStyle.key) {
                          return {
                            key: cUnreadPropStyles[j].key,
                            data: cUnreadPropStyles[j].data,
                            style: plainStyles[i]
                          };
                        }
                      }
                      return { key: mergedPropsStyle.key, data: mergedPropsStyle.data, style: plainStyles[i] };
                    });
                  }
                  function shouldStopAnimationAll(currentStyles, destStyles, currentVelocities, mergedPropsStyles) {
                    if (mergedPropsStyles.length !== destStyles.length) {
                      return false;
                    }
                    for (var i = 0; i < mergedPropsStyles.length; i++) {
                      if (mergedPropsStyles[i].key !== destStyles[i].key) {
                        return false;
                      }
                    }
                    for (var i = 0; i < mergedPropsStyles.length; i++) {
                      if (!_shouldStopAnimation2["default"](currentStyles[i], destStyles[i].style, currentVelocities[i])) {
                        return false;
                      }
                    }
                    return true;
                  }
                  function mergeAndSync(willEnter, willLeave, didLeave, oldMergedPropsStyles, destStyles, oldCurrentStyles, oldCurrentVelocities, oldLastIdealStyles, oldLastIdealVelocities) {
                    var newMergedPropsStyles = _mergeDiff2["default"](oldMergedPropsStyles, destStyles, function(oldIndex, oldMergedPropsStyle) {
                      var leavingStyle = willLeave(oldMergedPropsStyle);
                      if (leavingStyle == null) {
                        didLeave({ key: oldMergedPropsStyle.key, data: oldMergedPropsStyle.data });
                        return null;
                      }
                      if (_shouldStopAnimation2["default"](oldCurrentStyles[oldIndex], leavingStyle, oldCurrentVelocities[oldIndex])) {
                        didLeave({ key: oldMergedPropsStyle.key, data: oldMergedPropsStyle.data });
                        return null;
                      }
                      return { key: oldMergedPropsStyle.key, data: oldMergedPropsStyle.data, style: leavingStyle };
                    });
                    var newCurrentStyles = [];
                    var newCurrentVelocities = [];
                    var newLastIdealStyles = [];
                    var newLastIdealVelocities = [];
                    for (var i = 0; i < newMergedPropsStyles.length; i++) {
                      var newMergedPropsStyleCell = newMergedPropsStyles[i];
                      var foundOldIndex = null;
                      for (var j = 0; j < oldMergedPropsStyles.length; j++) {
                        if (oldMergedPropsStyles[j].key === newMergedPropsStyleCell.key) {
                          foundOldIndex = j;
                          break;
                        }
                      }
                      if (foundOldIndex == null) {
                        var plainStyle = willEnter(newMergedPropsStyleCell);
                        newCurrentStyles[i] = plainStyle;
                        newLastIdealStyles[i] = plainStyle;
                        var velocity = _mapToZero2["default"](newMergedPropsStyleCell.style);
                        newCurrentVelocities[i] = velocity;
                        newLastIdealVelocities[i] = velocity;
                      } else {
                        newCurrentStyles[i] = oldCurrentStyles[foundOldIndex];
                        newLastIdealStyles[i] = oldLastIdealStyles[foundOldIndex];
                        newCurrentVelocities[i] = oldCurrentVelocities[foundOldIndex];
                        newLastIdealVelocities[i] = oldLastIdealVelocities[foundOldIndex];
                      }
                    }
                    return [newMergedPropsStyles, newCurrentStyles, newCurrentVelocities, newLastIdealStyles, newLastIdealVelocities];
                  }
                  var TransitionMotion = (function(_React$Component) {
                    _inherits(TransitionMotion2, _React$Component);
                    _createClass(TransitionMotion2, null, [{
                      key: "propTypes",
                      value: {
                        defaultStyles: _propTypes2["default"].arrayOf(_propTypes2["default"].shape({
                          key: _propTypes2["default"].string.isRequired,
                          data: _propTypes2["default"].any,
                          style: _propTypes2["default"].objectOf(_propTypes2["default"].number).isRequired
                        })),
                        styles: _propTypes2["default"].oneOfType([_propTypes2["default"].func, _propTypes2["default"].arrayOf(_propTypes2["default"].shape({
                          key: _propTypes2["default"].string.isRequired,
                          data: _propTypes2["default"].any,
                          style: _propTypes2["default"].objectOf(_propTypes2["default"].oneOfType([_propTypes2["default"].number, _propTypes2["default"].object])).isRequired
                        }))]).isRequired,
                        children: _propTypes2["default"].func.isRequired,
                        willEnter: _propTypes2["default"].func,
                        willLeave: _propTypes2["default"].func,
                        didLeave: _propTypes2["default"].func
                      },
                      enumerable: true
                    }, {
                      key: "defaultProps",
                      value: {
                        willEnter: function willEnter(styleThatEntered) {
                          return _stripStyle2["default"](styleThatEntered.style);
                        },
                        // recall: returning null makes the current unmounting TransitionStyle
                        // disappear immediately
                        willLeave: function willLeave() {
                          return null;
                        },
                        didLeave: function didLeave() {
                        }
                      },
                      enumerable: true
                    }]);
                    function TransitionMotion2(props) {
                      var _this = this;
                      _classCallCheck(this, TransitionMotion2);
                      _React$Component.call(this, props);
                      this.unmounting = false;
                      this.animationID = null;
                      this.prevTime = 0;
                      this.accumulatedTime = 0;
                      this.unreadPropStyles = null;
                      this.clearUnreadPropStyle = function(unreadPropStyles) {
                        var _mergeAndSync = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, unreadPropStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities);
                        var mergedPropsStyles = _mergeAndSync[0];
                        var currentStyles = _mergeAndSync[1];
                        var currentVelocities = _mergeAndSync[2];
                        var lastIdealStyles = _mergeAndSync[3];
                        var lastIdealVelocities = _mergeAndSync[4];
                        for (var i = 0; i < unreadPropStyles.length; i++) {
                          var unreadPropStyle = unreadPropStyles[i].style;
                          var dirty = false;
                          for (var key in unreadPropStyle) {
                            if (!Object.prototype.hasOwnProperty.call(unreadPropStyle, key)) {
                              continue;
                            }
                            var styleValue = unreadPropStyle[key];
                            if (typeof styleValue === "number") {
                              if (!dirty) {
                                dirty = true;
                                currentStyles[i] = _extends({}, currentStyles[i]);
                                currentVelocities[i] = _extends({}, currentVelocities[i]);
                                lastIdealStyles[i] = _extends({}, lastIdealStyles[i]);
                                lastIdealVelocities[i] = _extends({}, lastIdealVelocities[i]);
                                mergedPropsStyles[i] = {
                                  key: mergedPropsStyles[i].key,
                                  data: mergedPropsStyles[i].data,
                                  style: _extends({}, mergedPropsStyles[i].style)
                                };
                              }
                              currentStyles[i][key] = styleValue;
                              currentVelocities[i][key] = 0;
                              lastIdealStyles[i][key] = styleValue;
                              lastIdealVelocities[i][key] = 0;
                              mergedPropsStyles[i].style[key] = styleValue;
                            }
                          }
                        }
                        _this.setState({
                          currentStyles,
                          currentVelocities,
                          mergedPropsStyles,
                          lastIdealStyles,
                          lastIdealVelocities
                        });
                      };
                      this.startAnimationIfNecessary = function() {
                        if (_this.unmounting) {
                          return;
                        }
                        _this.animationID = _raf2["default"](function(timestamp) {
                          if (_this.unmounting) {
                            return;
                          }
                          var propStyles = _this.props.styles;
                          var destStyles = typeof propStyles === "function" ? propStyles(rehydrateStyles(_this.state.mergedPropsStyles, _this.unreadPropStyles, _this.state.lastIdealStyles)) : propStyles;
                          if (shouldStopAnimationAll(_this.state.currentStyles, destStyles, _this.state.currentVelocities, _this.state.mergedPropsStyles)) {
                            _this.animationID = null;
                            _this.accumulatedTime = 0;
                            return;
                          }
                          var currentTime = timestamp || _performanceNow2["default"]();
                          var timeDelta = currentTime - _this.prevTime;
                          _this.prevTime = currentTime;
                          _this.accumulatedTime = _this.accumulatedTime + timeDelta;
                          if (_this.accumulatedTime > msPerFrame * 10) {
                            _this.accumulatedTime = 0;
                          }
                          if (_this.accumulatedTime === 0) {
                            _this.animationID = null;
                            _this.startAnimationIfNecessary();
                            return;
                          }
                          var currentFrameCompletion = (_this.accumulatedTime - Math.floor(_this.accumulatedTime / msPerFrame) * msPerFrame) / msPerFrame;
                          var framesToCatchUp = Math.floor(_this.accumulatedTime / msPerFrame);
                          var _mergeAndSync2 = mergeAndSync(_this.props.willEnter, _this.props.willLeave, _this.props.didLeave, _this.state.mergedPropsStyles, destStyles, _this.state.currentStyles, _this.state.currentVelocities, _this.state.lastIdealStyles, _this.state.lastIdealVelocities);
                          var newMergedPropsStyles = _mergeAndSync2[0];
                          var newCurrentStyles = _mergeAndSync2[1];
                          var newCurrentVelocities = _mergeAndSync2[2];
                          var newLastIdealStyles = _mergeAndSync2[3];
                          var newLastIdealVelocities = _mergeAndSync2[4];
                          for (var i = 0; i < newMergedPropsStyles.length; i++) {
                            var newMergedPropsStyle = newMergedPropsStyles[i].style;
                            var newCurrentStyle = {};
                            var newCurrentVelocity = {};
                            var newLastIdealStyle = {};
                            var newLastIdealVelocity = {};
                            for (var key in newMergedPropsStyle) {
                              if (!Object.prototype.hasOwnProperty.call(newMergedPropsStyle, key)) {
                                continue;
                              }
                              var styleValue = newMergedPropsStyle[key];
                              if (typeof styleValue === "number") {
                                newCurrentStyle[key] = styleValue;
                                newCurrentVelocity[key] = 0;
                                newLastIdealStyle[key] = styleValue;
                                newLastIdealVelocity[key] = 0;
                              } else {
                                var newLastIdealStyleValue = newLastIdealStyles[i][key];
                                var newLastIdealVelocityValue = newLastIdealVelocities[i][key];
                                for (var j = 0; j < framesToCatchUp; j++) {
                                  var _stepper = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                                  newLastIdealStyleValue = _stepper[0];
                                  newLastIdealVelocityValue = _stepper[1];
                                }
                                var _stepper2 = _stepper4["default"](msPerFrame / 1e3, newLastIdealStyleValue, newLastIdealVelocityValue, styleValue.val, styleValue.stiffness, styleValue.damping, styleValue.precision);
                                var nextIdealX = _stepper2[0];
                                var nextIdealV = _stepper2[1];
                                newCurrentStyle[key] = newLastIdealStyleValue + (nextIdealX - newLastIdealStyleValue) * currentFrameCompletion;
                                newCurrentVelocity[key] = newLastIdealVelocityValue + (nextIdealV - newLastIdealVelocityValue) * currentFrameCompletion;
                                newLastIdealStyle[key] = newLastIdealStyleValue;
                                newLastIdealVelocity[key] = newLastIdealVelocityValue;
                              }
                            }
                            newLastIdealStyles[i] = newLastIdealStyle;
                            newLastIdealVelocities[i] = newLastIdealVelocity;
                            newCurrentStyles[i] = newCurrentStyle;
                            newCurrentVelocities[i] = newCurrentVelocity;
                          }
                          _this.animationID = null;
                          _this.accumulatedTime -= framesToCatchUp * msPerFrame;
                          _this.setState({
                            currentStyles: newCurrentStyles,
                            currentVelocities: newCurrentVelocities,
                            lastIdealStyles: newLastIdealStyles,
                            lastIdealVelocities: newLastIdealVelocities,
                            mergedPropsStyles: newMergedPropsStyles
                          });
                          _this.unreadPropStyles = null;
                          _this.startAnimationIfNecessary();
                        });
                      };
                      this.state = this.defaultState();
                    }
                    TransitionMotion2.prototype.defaultState = function defaultState() {
                      var _props = this.props;
                      var defaultStyles = _props.defaultStyles;
                      var styles = _props.styles;
                      var willEnter = _props.willEnter;
                      var willLeave = _props.willLeave;
                      var didLeave = _props.didLeave;
                      var destStyles = typeof styles === "function" ? styles(defaultStyles) : styles;
                      var oldMergedPropsStyles = void 0;
                      if (defaultStyles == null) {
                        oldMergedPropsStyles = destStyles;
                      } else {
                        oldMergedPropsStyles = defaultStyles.map(function(defaultStyleCell) {
                          for (var i = 0; i < destStyles.length; i++) {
                            if (destStyles[i].key === defaultStyleCell.key) {
                              return destStyles[i];
                            }
                          }
                          return defaultStyleCell;
                        });
                      }
                      var oldCurrentStyles = defaultStyles == null ? destStyles.map(function(s) {
                        return _stripStyle2["default"](s.style);
                      }) : defaultStyles.map(function(s) {
                        return _stripStyle2["default"](s.style);
                      });
                      var oldCurrentVelocities = defaultStyles == null ? destStyles.map(function(s) {
                        return _mapToZero2["default"](s.style);
                      }) : defaultStyles.map(function(s) {
                        return _mapToZero2["default"](s.style);
                      });
                      var _mergeAndSync3 = mergeAndSync(
                        // Because this is an old-style createReactClass component, Flow doesn't
                        // understand that the willEnter and willLeave props have default values
                        // and will always be present.
                        willEnter,
                        willLeave,
                        didLeave,
                        oldMergedPropsStyles,
                        destStyles,
                        oldCurrentStyles,
                        oldCurrentVelocities,
                        oldCurrentStyles,
                        // oldLastIdealStyles really
                        oldCurrentVelocities
                      );
                      var mergedPropsStyles = _mergeAndSync3[0];
                      var currentStyles = _mergeAndSync3[1];
                      var currentVelocities = _mergeAndSync3[2];
                      var lastIdealStyles = _mergeAndSync3[3];
                      var lastIdealVelocities = _mergeAndSync3[4];
                      return {
                        currentStyles,
                        currentVelocities,
                        lastIdealStyles,
                        lastIdealVelocities,
                        mergedPropsStyles
                      };
                    };
                    TransitionMotion2.prototype.componentDidMount = function componentDidMount() {
                      this.prevTime = _performanceNow2["default"]();
                      this.startAnimationIfNecessary();
                    };
                    TransitionMotion2.prototype.componentWillReceiveProps = function componentWillReceiveProps(props) {
                      if (this.unreadPropStyles) {
                        this.clearUnreadPropStyle(this.unreadPropStyles);
                      }
                      var styles = props.styles;
                      if (typeof styles === "function") {
                        this.unreadPropStyles = styles(rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.lastIdealStyles));
                      } else {
                        this.unreadPropStyles = styles;
                      }
                      if (this.animationID == null) {
                        this.prevTime = _performanceNow2["default"]();
                        this.startAnimationIfNecessary();
                      }
                    };
                    TransitionMotion2.prototype.componentWillUnmount = function componentWillUnmount() {
                      this.unmounting = true;
                      if (this.animationID != null) {
                        _raf2["default"].cancel(this.animationID);
                        this.animationID = null;
                      }
                    };
                    TransitionMotion2.prototype.render = function render() {
                      var hydratedStyles = rehydrateStyles(this.state.mergedPropsStyles, this.unreadPropStyles, this.state.currentStyles);
                      var renderedChildren = this.props.children(hydratedStyles);
                      return renderedChildren && _react2["default"].Children.only(renderedChildren);
                    };
                    return TransitionMotion2;
                  })(_react2["default"].Component);
                  exports2["default"] = TransitionMotion;
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              5042: (
                /***/
                ((module2, exports2) => {
                  "use strict";
                  exports2.__esModule = true;
                  exports2["default"] = mapToZero;
                  function mapToZero(obj) {
                    var ret = {};
                    for (var key in obj) {
                      if (Object.prototype.hasOwnProperty.call(obj, key)) {
                        ret[key] = 0;
                      }
                    }
                    return ret;
                  }
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              3780: (
                /***/
                ((module2, exports2) => {
                  "use strict";
                  exports2.__esModule = true;
                  exports2["default"] = mergeDiff;
                  function mergeDiff(prev, next, onRemove) {
                    var prevKeyIndex = {};
                    for (var i = 0; i < prev.length; i++) {
                      prevKeyIndex[prev[i].key] = i;
                    }
                    var nextKeyIndex = {};
                    for (var i = 0; i < next.length; i++) {
                      nextKeyIndex[next[i].key] = i;
                    }
                    var ret = [];
                    for (var i = 0; i < next.length; i++) {
                      ret[i] = next[i];
                    }
                    for (var i = 0; i < prev.length; i++) {
                      if (!Object.prototype.hasOwnProperty.call(nextKeyIndex, prev[i].key)) {
                        var fill = onRemove(i, prev[i]);
                        if (fill != null) {
                          ret.push(fill);
                        }
                      }
                    }
                    return ret.sort(function(a, b) {
                      var nextOrderA = nextKeyIndex[a.key];
                      var nextOrderB = nextKeyIndex[b.key];
                      var prevOrderA = prevKeyIndex[a.key];
                      var prevOrderB = prevKeyIndex[b.key];
                      if (nextOrderA != null && nextOrderB != null) {
                        return nextKeyIndex[a.key] - nextKeyIndex[b.key];
                      } else if (prevOrderA != null && prevOrderB != null) {
                        return prevKeyIndex[a.key] - prevKeyIndex[b.key];
                      } else if (nextOrderA != null) {
                        for (var i2 = 0; i2 < next.length; i2++) {
                          var pivot = next[i2].key;
                          if (!Object.prototype.hasOwnProperty.call(prevKeyIndex, pivot)) {
                            continue;
                          }
                          if (nextOrderA < nextKeyIndex[pivot] && prevOrderB > prevKeyIndex[pivot]) {
                            return -1;
                          } else if (nextOrderA > nextKeyIndex[pivot] && prevOrderB < prevKeyIndex[pivot]) {
                            return 1;
                          }
                        }
                        return 1;
                      }
                      for (var i2 = 0; i2 < next.length; i2++) {
                        var pivot = next[i2].key;
                        if (!Object.prototype.hasOwnProperty.call(prevKeyIndex, pivot)) {
                          continue;
                        }
                        if (nextOrderB < nextKeyIndex[pivot] && prevOrderA > prevKeyIndex[pivot]) {
                          return 1;
                        } else if (nextOrderB > nextKeyIndex[pivot] && prevOrderA < prevKeyIndex[pivot]) {
                          return -1;
                        }
                      }
                      return -1;
                    });
                  }
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              1327: (
                /***/
                ((module2, exports2) => {
                  "use strict";
                  exports2.__esModule = true;
                  exports2["default"] = {
                    noWobble: { stiffness: 170, damping: 26 },
                    // the default, if nothing provided
                    gentle: { stiffness: 120, damping: 14 },
                    wobbly: { stiffness: 180, damping: 12 },
                    stiff: { stiffness: 210, damping: 20 }
                  };
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              2591: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  exports2.__esModule = true;
                  function _interopRequire(obj) {
                    return obj && obj.__esModule ? obj["default"] : obj;
                  }
                  var _Motion = __webpack_require__2(2793);
                  exports2.Motion = _interopRequire(_Motion);
                  var _StaggeredMotion = __webpack_require__2(9959);
                  exports2.StaggeredMotion = _interopRequire(_StaggeredMotion);
                  var _TransitionMotion = __webpack_require__2(6126);
                  exports2.TransitionMotion = _interopRequire(_TransitionMotion);
                  var _spring = __webpack_require__2(2658);
                  exports2.spring = _interopRequire(_spring);
                  var _presets = __webpack_require__2(1327);
                  exports2.presets = _interopRequire(_presets);
                  var _stripStyle = __webpack_require__2(6148);
                  exports2.stripStyle = _interopRequire(_stripStyle);
                  var _reorderKeys = __webpack_require__2(3308);
                  exports2.reorderKeys = _interopRequire(_reorderKeys);
                })
              ),
              /***/
              3308: (
                /***/
                ((module2, exports2) => {
                  "use strict";
                  exports2.__esModule = true;
                  exports2["default"] = reorderKeys;
                  var hasWarned = false;
                  function reorderKeys() {
                    if (false) {
                    }
                  }
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              9988: (
                /***/
                ((module2, exports2) => {
                  "use strict";
                  exports2.__esModule = true;
                  exports2["default"] = shouldStopAnimation;
                  function shouldStopAnimation(currentStyle, style, currentVelocity) {
                    for (var key in style) {
                      if (!Object.prototype.hasOwnProperty.call(style, key)) {
                        continue;
                      }
                      if (currentVelocity[key] !== 0) {
                        return false;
                      }
                      var styleValue = typeof style[key] === "number" ? style[key] : style[key].val;
                      if (currentStyle[key] !== styleValue) {
                        return false;
                      }
                    }
                    return true;
                  }
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              2658: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  exports2.__esModule = true;
                  var _extends = Object.assign || function(target) {
                    for (var i = 1; i < arguments.length; i++) {
                      var source = arguments[i];
                      for (var key in source) {
                        if (Object.prototype.hasOwnProperty.call(source, key)) {
                          target[key] = source[key];
                        }
                      }
                    }
                    return target;
                  };
                  exports2["default"] = spring;
                  function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : { "default": obj };
                  }
                  var _presets = __webpack_require__2(1327);
                  var _presets2 = _interopRequireDefault(_presets);
                  var defaultConfig = _extends({}, _presets2["default"].noWobble, {
                    precision: 0.01
                  });
                  function spring(val, config) {
                    return _extends({}, defaultConfig, config, { val });
                  }
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              1390: (
                /***/
                ((module2, exports2) => {
                  "use strict";
                  exports2.__esModule = true;
                  exports2["default"] = stepper;
                  var reusedTuple = [0, 0];
                  function stepper(secondPerFrame, x, v, destX, k, b, precision) {
                    var Fspring = -k * (x - destX);
                    var Fdamper = -b * v;
                    var a = Fspring + Fdamper;
                    var newV = v + a * secondPerFrame;
                    var newX = x + newV * secondPerFrame;
                    if (Math.abs(newV) < precision && Math.abs(newX - destX) < precision) {
                      reusedTuple[0] = destX;
                      reusedTuple[1] = 0;
                      return reusedTuple;
                    }
                    reusedTuple[0] = newX;
                    reusedTuple[1] = newV;
                    return reusedTuple;
                  }
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              6148: (
                /***/
                ((module2, exports2) => {
                  "use strict";
                  exports2.__esModule = true;
                  exports2["default"] = stripStyle;
                  function stripStyle(style) {
                    var ret = {};
                    for (var key in style) {
                      if (!Object.prototype.hasOwnProperty.call(style, key)) {
                        continue;
                      }
                      ret[key] = typeof style[key] === "number" ? style[key] : style[key].val;
                    }
                    return ret;
                  }
                  module2.exports = exports2["default"];
                })
              ),
              /***/
              2608: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var MultiRef = /* @__PURE__ */ (function() {
                    function MultiRef2() {
                      (0, _classCallCheck2.default)(this, MultiRef2);
                      (0, _defineProperty2.default)(this, "map", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_refFns", /* @__PURE__ */ new Map());
                    }
                    (0, _createClass2.default)(MultiRef2, [{
                      key: "ref",
                      value: function ref(key) {
                        var _this = this;
                        var refFn = this._refFns.get(key);
                        if (!refFn) {
                          refFn = function refFn2(value) {
                            if (value == null) {
                              _this._refFns.delete(key);
                              _this.map.delete(key);
                            } else {
                              _this.map.set(key, value);
                            }
                          };
                          this._refFns.set(key, refFn);
                        }
                        return refFn;
                      }
                    }]);
                    return MultiRef2;
                  })();
                  exports2["default"] = MultiRef;
                })
              ),
              /***/
              1979: (
                /***/
                ((__unused_webpack_module, exports2) => {
                  "use strict";
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = getTransitionTimeMs;
                  function getTransitionTimeMs(heightTransition) {
                    var m = /(\d+(?:\.\d+)?|\.\d+)(m?s)\b/i.exec(heightTransition);
                    if (!m) throw new Error("Could not parse time from transition value");
                    return Number(m[1]) * (m[2].length === 1 ? 1e3 : 1);
                  }
                })
              ),
              /***/
              4293: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  var __webpack_unused_export__;
                  var _interopRequireWildcard = __webpack_require__2(9485);
                  var _interopRequireDefault = __webpack_require__2(1654);
                  __webpack_unused_export__ = {
                    value: true
                  };
                  exports2.A = void 0;
                  var _extends2 = _interopRequireDefault(__webpack_require__2(4718));
                  var _objectWithoutProperties2 = _interopRequireDefault(__webpack_require__2(1059));
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__2(5432));
                  var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__2(2132));
                  var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__2(7111));
                  var _inherits2 = _interopRequireDefault(__webpack_require__2(5075));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var React = _interopRequireWildcard(__webpack_require__2(7810));
                  var _propTypes = _interopRequireDefault(__webpack_require__2(5826));
                  var _getTransitionTimeMs = _interopRequireDefault(__webpack_require__2(1979));
                  var SmoothCollapse = /* @__PURE__ */ (function(_React$Component) {
                    (0, _inherits2["default"])(SmoothCollapse2, _React$Component);
                    function SmoothCollapse2(props) {
                      var _this;
                      (0, _classCallCheck2["default"])(this, SmoothCollapse2);
                      _this = (0, _possibleConstructorReturn2["default"])(this, (0, _getPrototypeOf2["default"])(SmoothCollapse2).call(this, props));
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_removeTransitionEndListener", function() {
                      });
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_main", React.createRef());
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_inner", React.createRef());
                      (0, _defineProperty2["default"])((0, _assertThisInitialized2["default"])(_this), "_onNextTransitionEnd", function(el, callback) {
                        _this._removeTransitionEndListener();
                        var listener = function listener2() {
                          _this._removeTransitionEndListener();
                          callback();
                        };
                        var timeout;
                        _this._removeTransitionEndListener = function() {
                          _this._removeTransitionEndListener = function() {
                          };
                          clearTimeout(timeout);
                          el.removeEventListener("transitionend", listener);
                        };
                        el.addEventListener("transitionend", listener);
                        var ms = (0, _getTransitionTimeMs["default"])(_this.props.heightTransition) * 1.1 + 500;
                        timeout = setTimeout(listener, ms);
                      });
                      _this.state = {
                        renderInner: props.expanded || SmoothCollapse2._visibleWhenClosed(props),
                        closing: false,
                        fullyClosed: !props.expanded,
                        height: props.expanded ? "auto" : props.collapsedHeight
                      };
                      return _this;
                    }
                    (0, _createClass2["default"])(SmoothCollapse2, [{
                      key: "componentWillUnmount",
                      value: function componentWillUnmount() {
                        this._removeTransitionEndListener();
                      }
                    }, {
                      key: "componentDidUpdate",
                      value: function componentDidUpdate(prevProps, prevState) {
                        var _this2 = this;
                        if (!prevProps.expanded && this.props.expanded) {
                          this._removeTransitionEndListener();
                          var mainEl = this._main.current;
                          var innerEl = this._inner.current;
                          if (!mainEl || !innerEl) throw new Error("Should not happen");
                          var targetHeight = "".concat(innerEl.clientHeight, "px");
                          this.setState({
                            height: targetHeight
                          });
                          this._onNextTransitionEnd(mainEl, function() {
                            _this2.setState({
                              height: "auto"
                            }, function() {
                              if (_this2.props.onChangeEnd) {
                                _this2.props.onChangeEnd();
                              }
                            });
                          });
                        } else if (prevProps.expanded && !this.props.expanded) {
                          this._removeTransitionEndListener();
                          if (!this._inner.current) throw new Error("Should not happen");
                          this.setState({
                            height: "".concat(this._inner.current.clientHeight, "px")
                          }, function() {
                            var mainEl2 = _this2._main.current;
                            if (!mainEl2) throw new Error("Should not happen");
                            mainEl2.clientHeight;
                            _this2.setState({
                              height: _this2.props.collapsedHeight,
                              closing: true
                            });
                            _this2._onNextTransitionEnd(mainEl2, function() {
                              _this2.setState({
                                closing: false,
                                fullyClosed: true
                              });
                              if (_this2.props.onChangeEnd) {
                                _this2.props.onChangeEnd();
                              }
                            });
                          });
                        }
                      }
                    }, {
                      key: "render",
                      value: function render() {
                        var visibleWhenClosed = SmoothCollapse2._visibleWhenClosed(this.props);
                        var _this$props = this.props, allowOverflowWhenOpen = _this$props.allowOverflowWhenOpen, children = _this$props.children, collapsedHeight = _this$props.collapsedHeight, eagerRender = _this$props.eagerRender, expanded = _this$props.expanded, heightTransition = _this$props.heightTransition, onChangeEnd = _this$props.onChangeEnd, props = (0, _objectWithoutProperties2["default"])(_this$props, ["allowOverflowWhenOpen", "children", "collapsedHeight", "eagerRender", "expanded", "heightTransition", "onChangeEnd"]);
                        var _this$state = this.state, height = _this$state.height, fullyClosed = _this$state.fullyClosed, renderInner = _this$state.renderInner;
                        var innerEl = renderInner ? React.createElement("div", {
                          ref: this._inner,
                          style: {
                            overflow: allowOverflowWhenOpen && height === "auto" ? "visible" : "hidden"
                          }
                        }, children) : null;
                        return React.createElement("div", (0, _extends2["default"])({}, props, {
                          ref: this._main,
                          style: {
                            height,
                            overflow: allowOverflowWhenOpen && height === "auto" ? "visible" : "hidden",
                            display: fullyClosed && !visibleWhenClosed ? "none" : null,
                            transition: "height ".concat(heightTransition)
                          }
                        }), innerEl);
                      }
                    }], [{
                      key: "_visibleWhenClosed",
                      value: function _visibleWhenClosed(props) {
                        return props.eagerRender || parseFloat(props.collapsedHeight) !== 0;
                      }
                    }, {
                      key: "getDerivedStateFromProps",
                      value: function getDerivedStateFromProps(props, state) {
                        if (props.expanded && (state.closing || state.fullyClosed)) {
                          return {
                            closing: false,
                            fullyClosed: false,
                            renderInner: true
                          };
                        } else if (!props.expanded && (state.closing || state.fullyClosed) && state.height !== props.collapsedHeight) {
                          return {
                            height: props.collapsedHeight,
                            renderInner: state.renderInner || SmoothCollapse2._visibleWhenClosed(props)
                          };
                        }
                        return null;
                      }
                    }]);
                    return SmoothCollapse2;
                  })(React.Component);
                  exports2.A = SmoothCollapse;
                  (0, _defineProperty2["default"])(SmoothCollapse, "propTypes", {
                    expanded: _propTypes["default"].bool.isRequired,
                    onChangeEnd: _propTypes["default"].func,
                    collapsedHeight: _propTypes["default"].string,
                    heightTransition: _propTypes["default"].string,
                    className: _propTypes["default"].string,
                    allowOverflowWhenOpen: _propTypes["default"].bool,
                    eagerRender: _propTypes["default"].bool
                  });
                  (0, _defineProperty2["default"])(SmoothCollapse, "defaultProps", {
                    collapsedHeight: "0",
                    heightTransition: ".25s ease",
                    className: "",
                    allowOverflowWhenOpen: false,
                    eagerRender: false
                  });
                })
              ),
              /***/
              5677: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  var l = __webpack_require__2(5946), n = 60103, p = 60106;
                  exports2.Fragment = 60107;
                  exports2.StrictMode = 60108;
                  exports2.Profiler = 60114;
                  var q = 60109, r = 60110, t2 = 60112;
                  exports2.Suspense = 60113;
                  var u = 60115, v = 60116;
                  if ("function" === typeof Symbol && Symbol.for) {
                    var w = Symbol.for;
                    n = w("react.element");
                    p = w("react.portal");
                    exports2.Fragment = w("react.fragment");
                    exports2.StrictMode = w("react.strict_mode");
                    exports2.Profiler = w("react.profiler");
                    q = w("react.provider");
                    r = w("react.context");
                    t2 = w("react.forward_ref");
                    exports2.Suspense = w("react.suspense");
                    u = w("react.memo");
                    v = w("react.lazy");
                  }
                  var x = "function" === typeof Symbol && Symbol.iterator;
                  function y(a) {
                    if (null === a || "object" !== typeof a) return null;
                    a = x && a[x] || a["@@iterator"];
                    return "function" === typeof a ? a : null;
                  }
                  function z(a) {
                    for (var b = "https://reactjs.org/docs/error-decoder.html?invariant=" + a, c = 1; c < arguments.length; c++) b += "&args[]=" + encodeURIComponent(arguments[c]);
                    return "Minified React error #" + a + "; visit " + b + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";
                  }
                  var A = { isMounted: function() {
                    return false;
                  }, enqueueForceUpdate: function() {
                  }, enqueueReplaceState: function() {
                  }, enqueueSetState: function() {
                  } }, B = {};
                  function C(a, b, c) {
                    this.props = a;
                    this.context = b;
                    this.refs = B;
                    this.updater = c || A;
                  }
                  C.prototype.isReactComponent = {};
                  C.prototype.setState = function(a, b) {
                    if ("object" !== typeof a && "function" !== typeof a && null != a) throw Error(z(85));
                    this.updater.enqueueSetState(this, a, b, "setState");
                  };
                  C.prototype.forceUpdate = function(a) {
                    this.updater.enqueueForceUpdate(this, a, "forceUpdate");
                  };
                  function D() {
                  }
                  D.prototype = C.prototype;
                  function E(a, b, c) {
                    this.props = a;
                    this.context = b;
                    this.refs = B;
                    this.updater = c || A;
                  }
                  var F = E.prototype = new D();
                  F.constructor = E;
                  l(F, C.prototype);
                  F.isPureReactComponent = true;
                  var G = { current: null }, H = Object.prototype.hasOwnProperty, I = { key: true, ref: true, __self: true, __source: true };
                  function J(a, b, c) {
                    var e, d = {}, k = null, h = null;
                    if (null != b) for (e in void 0 !== b.ref && (h = b.ref), void 0 !== b.key && (k = "" + b.key), b) H.call(b, e) && !I.hasOwnProperty(e) && (d[e] = b[e]);
                    var g = arguments.length - 2;
                    if (1 === g) d.children = c;
                    else if (1 < g) {
                      for (var f = Array(g), m = 0; m < g; m++) f[m] = arguments[m + 2];
                      d.children = f;
                    }
                    if (a && a.defaultProps) for (e in g = a.defaultProps, g) void 0 === d[e] && (d[e] = g[e]);
                    return { $$typeof: n, type: a, key: k, ref: h, props: d, _owner: G.current };
                  }
                  function K(a, b) {
                    return { $$typeof: n, type: a.type, key: b, ref: a.ref, props: a.props, _owner: a._owner };
                  }
                  function L(a) {
                    return "object" === typeof a && null !== a && a.$$typeof === n;
                  }
                  function escape(a) {
                    var b = { "=": "=0", ":": "=2" };
                    return "$" + a.replace(/[=:]/g, function(a2) {
                      return b[a2];
                    });
                  }
                  var M = /\/+/g;
                  function N(a, b) {
                    return "object" === typeof a && null !== a && null != a.key ? escape("" + a.key) : b.toString(36);
                  }
                  function O(a, b, c, e, d) {
                    var k = typeof a;
                    if ("undefined" === k || "boolean" === k) a = null;
                    var h = false;
                    if (null === a) h = true;
                    else switch (k) {
                      case "string":
                      case "number":
                        h = true;
                        break;
                      case "object":
                        switch (a.$$typeof) {
                          case n:
                          case p:
                            h = true;
                        }
                    }
                    if (h) return h = a, d = d(h), a = "" === e ? "." + N(h, 0) : e, Array.isArray(d) ? (c = "", null != a && (c = a.replace(M, "$&/") + "/"), O(d, b, c, "", function(a2) {
                      return a2;
                    })) : null != d && (L(d) && (d = K(d, c + (!d.key || h && h.key === d.key ? "" : ("" + d.key).replace(M, "$&/") + "/") + a)), b.push(d)), 1;
                    h = 0;
                    e = "" === e ? "." : e + ":";
                    if (Array.isArray(a)) for (var g = 0; g < a.length; g++) {
                      k = a[g];
                      var f = e + N(k, g);
                      h += O(k, b, c, f, d);
                    }
                    else if (f = y(a), "function" === typeof f) for (a = f.call(a), g = 0; !(k = a.next()).done; ) k = k.value, f = e + N(k, g++), h += O(k, b, c, f, d);
                    else if ("object" === k) throw b = "" + a, Error(z(31, "[object Object]" === b ? "object with keys {" + Object.keys(a).join(", ") + "}" : b));
                    return h;
                  }
                  function P(a, b, c) {
                    if (null == a) return a;
                    var e = [], d = 0;
                    O(a, e, "", "", function(a2) {
                      return b.call(c, a2, d++);
                    });
                    return e;
                  }
                  function Q(a) {
                    if (-1 === a._status) {
                      var b = a._result;
                      b = b();
                      a._status = 0;
                      a._result = b;
                      b.then(function(b2) {
                        0 === a._status && (b2 = b2.default, a._status = 1, a._result = b2);
                      }, function(b2) {
                        0 === a._status && (a._status = 2, a._result = b2);
                      });
                    }
                    if (1 === a._status) return a._result;
                    throw a._result;
                  }
                  var R = { current: null };
                  function S() {
                    var a = R.current;
                    if (null === a) throw Error(z(321));
                    return a;
                  }
                  var T = { ReactCurrentDispatcher: R, ReactCurrentBatchConfig: { transition: 0 }, ReactCurrentOwner: G, IsSomeRendererActing: { current: false }, assign: l };
                  exports2.Children = { map: P, forEach: function(a, b, c) {
                    P(a, function() {
                      b.apply(this, arguments);
                    }, c);
                  }, count: function(a) {
                    var b = 0;
                    P(a, function() {
                      b++;
                    });
                    return b;
                  }, toArray: function(a) {
                    return P(a, function(a2) {
                      return a2;
                    }) || [];
                  }, only: function(a) {
                    if (!L(a)) throw Error(z(143));
                    return a;
                  } };
                  exports2.Component = C;
                  exports2.PureComponent = E;
                  exports2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = T;
                  exports2.cloneElement = function(a, b, c) {
                    if (null === a || void 0 === a) throw Error(z(267, a));
                    var e = l({}, a.props), d = a.key, k = a.ref, h = a._owner;
                    if (null != b) {
                      void 0 !== b.ref && (k = b.ref, h = G.current);
                      void 0 !== b.key && (d = "" + b.key);
                      if (a.type && a.type.defaultProps) var g = a.type.defaultProps;
                      for (f in b) H.call(b, f) && !I.hasOwnProperty(f) && (e[f] = void 0 === b[f] && void 0 !== g ? g[f] : b[f]);
                    }
                    var f = arguments.length - 2;
                    if (1 === f) e.children = c;
                    else if (1 < f) {
                      g = Array(f);
                      for (var m = 0; m < f; m++) g[m] = arguments[m + 2];
                      e.children = g;
                    }
                    return {
                      $$typeof: n,
                      type: a.type,
                      key: d,
                      ref: k,
                      props: e,
                      _owner: h
                    };
                  };
                  exports2.createContext = function(a, b) {
                    void 0 === b && (b = null);
                    a = { $$typeof: r, _calculateChangedBits: b, _currentValue: a, _currentValue2: a, _threadCount: 0, Provider: null, Consumer: null };
                    a.Provider = { $$typeof: q, _context: a };
                    return a.Consumer = a;
                  };
                  exports2.createElement = J;
                  exports2.createFactory = function(a) {
                    var b = J.bind(null, a);
                    b.type = a;
                    return b;
                  };
                  exports2.createRef = function() {
                    return { current: null };
                  };
                  exports2.forwardRef = function(a) {
                    return { $$typeof: t2, render: a };
                  };
                  exports2.isValidElement = L;
                  exports2.lazy = function(a) {
                    return { $$typeof: v, _payload: { _status: -1, _result: a }, _init: Q };
                  };
                  exports2.memo = function(a, b) {
                    return { $$typeof: u, type: a, compare: void 0 === b ? null : b };
                  };
                  exports2.useCallback = function(a, b) {
                    return S().useCallback(a, b);
                  };
                  exports2.useContext = function(a, b) {
                    return S().useContext(a, b);
                  };
                  exports2.useDebugValue = function() {
                  };
                  exports2.useEffect = function(a, b) {
                    return S().useEffect(a, b);
                  };
                  exports2.useImperativeHandle = function(a, b, c) {
                    return S().useImperativeHandle(a, b, c);
                  };
                  exports2.useLayoutEffect = function(a, b) {
                    return S().useLayoutEffect(a, b);
                  };
                  exports2.useMemo = function(a, b) {
                    return S().useMemo(a, b);
                  };
                  exports2.useReducer = function(a, b, c) {
                    return S().useReducer(a, b, c);
                  };
                  exports2.useRef = function(a) {
                    return S().useRef(a);
                  };
                  exports2.useState = function(a) {
                    return S().useState(a);
                  };
                  exports2.version = "17.0.2";
                })
              ),
              /***/
              7810: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  if (true) {
                    module2.exports = __webpack_require__2(5677);
                  } else {
                  }
                })
              ),
              /***/
              4891: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  var buffer = __webpack_require__2(2313);
                  var Buffer2 = buffer.Buffer;
                  function copyProps(src, dst) {
                    for (var key in src) {
                      dst[key] = src[key];
                    }
                  }
                  if (Buffer2.from && Buffer2.alloc && Buffer2.allocUnsafe && Buffer2.allocUnsafeSlow) {
                    module2.exports = buffer;
                  } else {
                    copyProps(buffer, exports2);
                    exports2.Buffer = SafeBuffer;
                  }
                  function SafeBuffer(arg, encodingOrOffset, length) {
                    return Buffer2(arg, encodingOrOffset, length);
                  }
                  SafeBuffer.prototype = Object.create(Buffer2.prototype);
                  copyProps(Buffer2, SafeBuffer);
                  SafeBuffer.from = function(arg, encodingOrOffset, length) {
                    if (typeof arg === "number") {
                      throw new TypeError("Argument must not be a number");
                    }
                    return Buffer2(arg, encodingOrOffset, length);
                  };
                  SafeBuffer.alloc = function(size, fill, encoding) {
                    if (typeof size !== "number") {
                      throw new TypeError("Argument must be a number");
                    }
                    var buf = Buffer2(size);
                    if (fill !== void 0) {
                      if (typeof encoding === "string") {
                        buf.fill(fill, encoding);
                      } else {
                        buf.fill(fill);
                      }
                    } else {
                      buf.fill(0);
                    }
                    return buf;
                  };
                  SafeBuffer.allocUnsafe = function(size) {
                    if (typeof size !== "number") {
                      throw new TypeError("Argument must be a number");
                    }
                    return Buffer2(size);
                  };
                  SafeBuffer.allocUnsafeSlow = function(size) {
                    if (typeof size !== "number") {
                      throw new TypeError("Argument must be a number");
                    }
                    return buffer.SlowBuffer(size);
                  };
                })
              ),
              /***/
              1613: (
                /***/
                ((__unused_webpack_module, exports2) => {
                  "use strict";
                  var f, g, h, k;
                  if ("object" === typeof performance && "function" === typeof performance.now) {
                    var l = performance;
                    exports2.unstable_now = function() {
                      return l.now();
                    };
                  } else {
                    var p = Date, q = p.now();
                    exports2.unstable_now = function() {
                      return p.now() - q;
                    };
                  }
                  if ("undefined" === typeof window || "function" !== typeof MessageChannel) {
                    var t2 = null, u = null, w = function() {
                      if (null !== t2) try {
                        var a = exports2.unstable_now();
                        t2(true, a);
                        t2 = null;
                      } catch (b) {
                        throw setTimeout(w, 0), b;
                      }
                    };
                    f = function(a) {
                      null !== t2 ? setTimeout(f, 0, a) : (t2 = a, setTimeout(w, 0));
                    };
                    g = function(a, b) {
                      u = setTimeout(a, b);
                    };
                    h = function() {
                      clearTimeout(u);
                    };
                    exports2.unstable_shouldYield = function() {
                      return false;
                    };
                    k = exports2.unstable_forceFrameRate = function() {
                    };
                  } else {
                    var x = window.setTimeout, y = window.clearTimeout;
                    if ("undefined" !== typeof console) {
                      var z = window.cancelAnimationFrame;
                      "function" !== typeof window.requestAnimationFrame && console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");
                      "function" !== typeof z && console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills");
                    }
                    var A = false, B = null, C = -1, D = 5, E = 0;
                    exports2.unstable_shouldYield = function() {
                      return exports2.unstable_now() >= E;
                    };
                    k = function() {
                    };
                    exports2.unstable_forceFrameRate = function(a) {
                      0 > a || 125 < a ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : D = 0 < a ? Math.floor(1e3 / a) : 5;
                    };
                    var F = new MessageChannel(), G = F.port2;
                    F.port1.onmessage = function() {
                      if (null !== B) {
                        var a = exports2.unstable_now();
                        E = a + D;
                        try {
                          B(true, a) ? G.postMessage(null) : (A = false, B = null);
                        } catch (b) {
                          throw G.postMessage(null), b;
                        }
                      } else A = false;
                    };
                    f = function(a) {
                      B = a;
                      A || (A = true, G.postMessage(null));
                    };
                    g = function(a, b) {
                      C = x(function() {
                        a(exports2.unstable_now());
                      }, b);
                    };
                    h = function() {
                      y(C);
                      C = -1;
                    };
                  }
                  function H(a, b) {
                    var c = a.length;
                    a.push(b);
                    a: for (; ; ) {
                      var d = c - 1 >>> 1, e = a[d];
                      if (void 0 !== e && 0 < I(e, b)) a[d] = b, a[c] = e, c = d;
                      else break a;
                    }
                  }
                  function J(a) {
                    a = a[0];
                    return void 0 === a ? null : a;
                  }
                  function K(a) {
                    var b = a[0];
                    if (void 0 !== b) {
                      var c = a.pop();
                      if (c !== b) {
                        a[0] = c;
                        a: for (var d = 0, e = a.length; d < e; ) {
                          var m = 2 * (d + 1) - 1, n = a[m], v = m + 1, r = a[v];
                          if (void 0 !== n && 0 > I(n, c)) void 0 !== r && 0 > I(r, n) ? (a[d] = r, a[v] = c, d = v) : (a[d] = n, a[m] = c, d = m);
                          else if (void 0 !== r && 0 > I(r, c)) a[d] = r, a[v] = c, d = v;
                          else break a;
                        }
                      }
                      return b;
                    }
                    return null;
                  }
                  function I(a, b) {
                    var c = a.sortIndex - b.sortIndex;
                    return 0 !== c ? c : a.id - b.id;
                  }
                  var L = [], M = [], N = 1, O = null, P = 3, Q = false, R = false, S = false;
                  function T(a) {
                    for (var b = J(M); null !== b; ) {
                      if (null === b.callback) K(M);
                      else if (b.startTime <= a) K(M), b.sortIndex = b.expirationTime, H(L, b);
                      else break;
                      b = J(M);
                    }
                  }
                  function U(a) {
                    S = false;
                    T(a);
                    if (!R) if (null !== J(L)) R = true, f(V);
                    else {
                      var b = J(M);
                      null !== b && g(U, b.startTime - a);
                    }
                  }
                  function V(a, b) {
                    R = false;
                    S && (S = false, h());
                    Q = true;
                    var c = P;
                    try {
                      T(b);
                      for (O = J(L); null !== O && (!(O.expirationTime > b) || a && !exports2.unstable_shouldYield()); ) {
                        var d = O.callback;
                        if ("function" === typeof d) {
                          O.callback = null;
                          P = O.priorityLevel;
                          var e = d(O.expirationTime <= b);
                          b = exports2.unstable_now();
                          "function" === typeof e ? O.callback = e : O === J(L) && K(L);
                          T(b);
                        } else K(L);
                        O = J(L);
                      }
                      if (null !== O) var m = true;
                      else {
                        var n = J(M);
                        null !== n && g(U, n.startTime - b);
                        m = false;
                      }
                      return m;
                    } finally {
                      O = null, P = c, Q = false;
                    }
                  }
                  var W = k;
                  exports2.unstable_IdlePriority = 5;
                  exports2.unstable_ImmediatePriority = 1;
                  exports2.unstable_LowPriority = 4;
                  exports2.unstable_NormalPriority = 3;
                  exports2.unstable_Profiling = null;
                  exports2.unstable_UserBlockingPriority = 2;
                  exports2.unstable_cancelCallback = function(a) {
                    a.callback = null;
                  };
                  exports2.unstable_continueExecution = function() {
                    R || Q || (R = true, f(V));
                  };
                  exports2.unstable_getCurrentPriorityLevel = function() {
                    return P;
                  };
                  exports2.unstable_getFirstCallbackNode = function() {
                    return J(L);
                  };
                  exports2.unstable_next = function(a) {
                    switch (P) {
                      case 1:
                      case 2:
                      case 3:
                        var b = 3;
                        break;
                      default:
                        b = P;
                    }
                    var c = P;
                    P = b;
                    try {
                      return a();
                    } finally {
                      P = c;
                    }
                  };
                  exports2.unstable_pauseExecution = function() {
                  };
                  exports2.unstable_requestPaint = W;
                  exports2.unstable_runWithPriority = function(a, b) {
                    switch (a) {
                      case 1:
                      case 2:
                      case 3:
                      case 4:
                      case 5:
                        break;
                      default:
                        a = 3;
                    }
                    var c = P;
                    P = a;
                    try {
                      return b();
                    } finally {
                      P = c;
                    }
                  };
                  exports2.unstable_scheduleCallback = function(a, b, c) {
                    var d = exports2.unstable_now();
                    "object" === typeof c && null !== c ? (c = c.delay, c = "number" === typeof c && 0 < c ? d + c : d) : c = d;
                    switch (a) {
                      case 1:
                        var e = -1;
                        break;
                      case 2:
                        e = 250;
                        break;
                      case 5:
                        e = 1073741823;
                        break;
                      case 4:
                        e = 1e4;
                        break;
                      default:
                        e = 5e3;
                    }
                    e = c + e;
                    a = { id: N++, callback: b, priorityLevel: a, startTime: c, expirationTime: e, sortIndex: -1 };
                    c > d ? (a.sortIndex = c, H(M, a), null === J(L) && a === J(M) && (S ? h() : S = true, g(U, c - d))) : (a.sortIndex = e, H(L, a), R || Q || (R = true, f(V)));
                    return a;
                  };
                  exports2.unstable_wrapCallback = function(a) {
                    var b = P;
                    return function() {
                      var c = P;
                      P = b;
                      try {
                        return a.apply(this, arguments);
                      } finally {
                        P = c;
                      }
                    };
                  };
                })
              ),
              /***/
              2328: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  if (true) {
                    module2.exports = __webpack_require__2(1613);
                  } else {
                  }
                })
              ),
              /***/
              3678: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var Buffer2 = __webpack_require__2(4891).Buffer;
                  function Hash(blockSize, finalSize) {
                    this._block = Buffer2.alloc(blockSize);
                    this._finalSize = finalSize;
                    this._blockSize = blockSize;
                    this._len = 0;
                  }
                  Hash.prototype.update = function(data, enc) {
                    if (typeof data === "string") {
                      enc = enc || "utf8";
                      data = Buffer2.from(data, enc);
                    }
                    var block = this._block;
                    var blockSize = this._blockSize;
                    var length = data.length;
                    var accum = this._len;
                    for (var offset = 0; offset < length; ) {
                      var assigned = accum % blockSize;
                      var remainder = Math.min(length - offset, blockSize - assigned);
                      for (var i = 0; i < remainder; i++) {
                        block[assigned + i] = data[offset + i];
                      }
                      accum += remainder;
                      offset += remainder;
                      if (accum % blockSize === 0) {
                        this._update(block);
                      }
                    }
                    this._len += length;
                    return this;
                  };
                  Hash.prototype.digest = function(enc) {
                    var rem = this._len % this._blockSize;
                    this._block[rem] = 128;
                    this._block.fill(0, rem + 1);
                    if (rem >= this._finalSize) {
                      this._update(this._block);
                      this._block.fill(0);
                    }
                    var bits = this._len * 8;
                    if (bits <= 4294967295) {
                      this._block.writeUInt32BE(bits, this._blockSize - 4);
                    } else {
                      var lowBits = (bits & 4294967295) >>> 0;
                      var highBits = (bits - lowBits) / 4294967296;
                      this._block.writeUInt32BE(highBits, this._blockSize - 8);
                      this._block.writeUInt32BE(lowBits, this._blockSize - 4);
                    }
                    this._update(this._block);
                    var hash = this._hash();
                    return enc ? hash.toString(enc) : hash;
                  };
                  Hash.prototype._update = function() {
                    throw new Error("_update must be implemented by subclass");
                  };
                  module2.exports = Hash;
                })
              ),
              /***/
              799: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var inherits = __webpack_require__2(9784);
                  var Hash = __webpack_require__2(3678);
                  var Buffer2 = __webpack_require__2(4891).Buffer;
                  var K = [
                    1518500249,
                    1859775393,
                    2400959708 | 0,
                    3395469782 | 0
                  ];
                  var W = new Array(80);
                  function Sha1() {
                    this.init();
                    this._w = W;
                    Hash.call(this, 64, 56);
                  }
                  inherits(Sha1, Hash);
                  Sha1.prototype.init = function() {
                    this._a = 1732584193;
                    this._b = 4023233417;
                    this._c = 2562383102;
                    this._d = 271733878;
                    this._e = 3285377520;
                    return this;
                  };
                  function rotl1(num) {
                    return num << 1 | num >>> 31;
                  }
                  function rotl5(num) {
                    return num << 5 | num >>> 27;
                  }
                  function rotl30(num) {
                    return num << 30 | num >>> 2;
                  }
                  function ft(s, b, c, d) {
                    if (s === 0) return b & c | ~b & d;
                    if (s === 2) return b & c | b & d | c & d;
                    return b ^ c ^ d;
                  }
                  Sha1.prototype._update = function(M) {
                    var W2 = this._w;
                    var a = this._a | 0;
                    var b = this._b | 0;
                    var c = this._c | 0;
                    var d = this._d | 0;
                    var e = this._e | 0;
                    for (var i = 0; i < 16; ++i) W2[i] = M.readInt32BE(i * 4);
                    for (; i < 80; ++i) W2[i] = rotl1(W2[i - 3] ^ W2[i - 8] ^ W2[i - 14] ^ W2[i - 16]);
                    for (var j = 0; j < 80; ++j) {
                      var s = ~~(j / 20);
                      var t2 = rotl5(a) + ft(s, b, c, d) + e + W2[j] + K[s] | 0;
                      e = d;
                      d = c;
                      c = rotl30(b);
                      b = a;
                      a = t2;
                    }
                    this._a = a + this._a | 0;
                    this._b = b + this._b | 0;
                    this._c = c + this._c | 0;
                    this._d = d + this._d | 0;
                    this._e = e + this._e | 0;
                  };
                  Sha1.prototype._hash = function() {
                    var H = Buffer2.allocUnsafe(20);
                    H.writeInt32BE(this._a | 0, 0);
                    H.writeInt32BE(this._b | 0, 4);
                    H.writeInt32BE(this._c | 0, 8);
                    H.writeInt32BE(this._d | 0, 12);
                    H.writeInt32BE(this._e | 0, 16);
                    return H;
                  };
                  module2.exports = Sha1;
                })
              ),
              /***/
              6049: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var inherits = __webpack_require__2(9784);
                  var Hash = __webpack_require__2(3678);
                  var Buffer2 = __webpack_require__2(4891).Buffer;
                  var K = [
                    1116352408,
                    1899447441,
                    3049323471,
                    3921009573,
                    961987163,
                    1508970993,
                    2453635748,
                    2870763221,
                    3624381080,
                    310598401,
                    607225278,
                    1426881987,
                    1925078388,
                    2162078206,
                    2614888103,
                    3248222580,
                    3835390401,
                    4022224774,
                    264347078,
                    604807628,
                    770255983,
                    1249150122,
                    1555081692,
                    1996064986,
                    2554220882,
                    2821834349,
                    2952996808,
                    3210313671,
                    3336571891,
                    3584528711,
                    113926993,
                    338241895,
                    666307205,
                    773529912,
                    1294757372,
                    1396182291,
                    1695183700,
                    1986661051,
                    2177026350,
                    2456956037,
                    2730485921,
                    2820302411,
                    3259730800,
                    3345764771,
                    3516065817,
                    3600352804,
                    4094571909,
                    275423344,
                    430227734,
                    506948616,
                    659060556,
                    883997877,
                    958139571,
                    1322822218,
                    1537002063,
                    1747873779,
                    1955562222,
                    2024104815,
                    2227730452,
                    2361852424,
                    2428436474,
                    2756734187,
                    3204031479,
                    3329325298
                  ];
                  var W = new Array(64);
                  function Sha256() {
                    this.init();
                    this._w = W;
                    Hash.call(this, 64, 56);
                  }
                  inherits(Sha256, Hash);
                  Sha256.prototype.init = function() {
                    this._a = 1779033703;
                    this._b = 3144134277;
                    this._c = 1013904242;
                    this._d = 2773480762;
                    this._e = 1359893119;
                    this._f = 2600822924;
                    this._g = 528734635;
                    this._h = 1541459225;
                    return this;
                  };
                  function ch(x, y, z) {
                    return z ^ x & (y ^ z);
                  }
                  function maj(x, y, z) {
                    return x & y | z & (x | y);
                  }
                  function sigma0(x) {
                    return (x >>> 2 | x << 30) ^ (x >>> 13 | x << 19) ^ (x >>> 22 | x << 10);
                  }
                  function sigma1(x) {
                    return (x >>> 6 | x << 26) ^ (x >>> 11 | x << 21) ^ (x >>> 25 | x << 7);
                  }
                  function gamma0(x) {
                    return (x >>> 7 | x << 25) ^ (x >>> 18 | x << 14) ^ x >>> 3;
                  }
                  function gamma1(x) {
                    return (x >>> 17 | x << 15) ^ (x >>> 19 | x << 13) ^ x >>> 10;
                  }
                  Sha256.prototype._update = function(M) {
                    var W2 = this._w;
                    var a = this._a | 0;
                    var b = this._b | 0;
                    var c = this._c | 0;
                    var d = this._d | 0;
                    var e = this._e | 0;
                    var f = this._f | 0;
                    var g = this._g | 0;
                    var h = this._h | 0;
                    for (var i = 0; i < 16; ++i) W2[i] = M.readInt32BE(i * 4);
                    for (; i < 64; ++i) W2[i] = gamma1(W2[i - 2]) + W2[i - 7] + gamma0(W2[i - 15]) + W2[i - 16] | 0;
                    for (var j = 0; j < 64; ++j) {
                      var T1 = h + sigma1(e) + ch(e, f, g) + K[j] + W2[j] | 0;
                      var T2 = sigma0(a) + maj(a, b, c) | 0;
                      h = g;
                      g = f;
                      f = e;
                      e = d + T1 | 0;
                      d = c;
                      c = b;
                      b = a;
                      a = T1 + T2 | 0;
                    }
                    this._a = a + this._a | 0;
                    this._b = b + this._b | 0;
                    this._c = c + this._c | 0;
                    this._d = d + this._d | 0;
                    this._e = e + this._e | 0;
                    this._f = f + this._f | 0;
                    this._g = g + this._g | 0;
                    this._h = h + this._h | 0;
                  };
                  Sha256.prototype._hash = function() {
                    var H = Buffer2.allocUnsafe(32);
                    H.writeInt32BE(this._a, 0);
                    H.writeInt32BE(this._b, 4);
                    H.writeInt32BE(this._c, 8);
                    H.writeInt32BE(this._d, 12);
                    H.writeInt32BE(this._e, 16);
                    H.writeInt32BE(this._f, 20);
                    H.writeInt32BE(this._g, 24);
                    H.writeInt32BE(this._h, 28);
                    return H;
                  };
                  module2.exports = Sha256;
                })
              ),
              /***/
              6186: (
                /***/
                ((module2) => {
                  "use strict";
                  var stylesInDOM = [];
                  function getIndexByIdentifier(identifier) {
                    var result = -1;
                    for (var i = 0; i < stylesInDOM.length; i++) {
                      if (stylesInDOM[i].identifier === identifier) {
                        result = i;
                        break;
                      }
                    }
                    return result;
                  }
                  function modulesToDom(list, options) {
                    var idCountMap = {};
                    var identifiers = [];
                    for (var i = 0; i < list.length; i++) {
                      var item = list[i];
                      var id = options.base ? item[0] + options.base : item[0];
                      var count = idCountMap[id] || 0;
                      var identifier = "".concat(id, " ").concat(count);
                      idCountMap[id] = count + 1;
                      var indexByIdentifier = getIndexByIdentifier(identifier);
                      var obj = {
                        css: item[1],
                        media: item[2],
                        sourceMap: item[3],
                        supports: item[4],
                        layer: item[5]
                      };
                      if (indexByIdentifier !== -1) {
                        stylesInDOM[indexByIdentifier].references++;
                        stylesInDOM[indexByIdentifier].updater(obj);
                      } else {
                        var updater = addElementStyle(obj, options);
                        options.byIndex = i;
                        stylesInDOM.splice(i, 0, {
                          identifier,
                          updater,
                          references: 1
                        });
                      }
                      identifiers.push(identifier);
                    }
                    return identifiers;
                  }
                  function addElementStyle(obj, options) {
                    var api = options.domAPI(options);
                    api.update(obj);
                    var updater = function updater2(newObj) {
                      if (newObj) {
                        if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {
                          return;
                        }
                        api.update(obj = newObj);
                      } else {
                        api.remove();
                      }
                    };
                    return updater;
                  }
                  module2.exports = function(list, options) {
                    options = options || {};
                    list = list || [];
                    var lastIdentifiers = modulesToDom(list, options);
                    return function update(newList) {
                      newList = newList || [];
                      for (var i = 0; i < lastIdentifiers.length; i++) {
                        var identifier = lastIdentifiers[i];
                        var index = getIndexByIdentifier(identifier);
                        stylesInDOM[index].references--;
                      }
                      var newLastIdentifiers = modulesToDom(newList, options);
                      for (var _i = 0; _i < lastIdentifiers.length; _i++) {
                        var _identifier = lastIdentifiers[_i];
                        var _index = getIndexByIdentifier(_identifier);
                        if (stylesInDOM[_index].references === 0) {
                          stylesInDOM[_index].updater();
                          stylesInDOM.splice(_index, 1);
                        }
                      }
                      lastIdentifiers = newLastIdentifiers;
                    };
                  };
                })
              ),
              /***/
              8990: (
                /***/
                ((module2) => {
                  "use strict";
                  function insertStyleElement(options) {
                    var element = document.createElement("style");
                    options.setAttributes(element, options.attributes);
                    options.insert(element, options.options);
                    return element;
                  }
                  module2.exports = insertStyleElement;
                })
              ),
              /***/
              8626: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  "use strict";
                  function setAttributesWithoutAttributes(styleElement) {
                    var nonce = true ? __webpack_require__2.nc : 0;
                    if (nonce) {
                      styleElement.setAttribute("nonce", nonce);
                    }
                  }
                  module2.exports = setAttributesWithoutAttributes;
                })
              ),
              /***/
              2155: (
                /***/
                ((module2) => {
                  "use strict";
                  function apply(styleElement, options, obj) {
                    var css = "";
                    if (obj.supports) {
                      css += "@supports (".concat(obj.supports, ") {");
                    }
                    if (obj.media) {
                      css += "@media ".concat(obj.media, " {");
                    }
                    var needLayer = typeof obj.layer !== "undefined";
                    if (needLayer) {
                      css += "@layer".concat(obj.layer.length > 0 ? " ".concat(obj.layer) : "", " {");
                    }
                    css += obj.css;
                    if (needLayer) {
                      css += "}";
                    }
                    if (obj.media) {
                      css += "}";
                    }
                    if (obj.supports) {
                      css += "}";
                    }
                    var sourceMap = obj.sourceMap;
                    if (sourceMap && typeof btoa !== "undefined") {
                      css += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");
                    }
                    options.styleTagTransform(css, styleElement, options.options);
                  }
                  function removeStyleElement(styleElement) {
                    if (styleElement.parentNode === null) {
                      return false;
                    }
                    styleElement.parentNode.removeChild(styleElement);
                  }
                  function domAPI(options) {
                    if (typeof document === "undefined") {
                      return {
                        update: function update() {
                        },
                        remove: function remove() {
                        }
                      };
                    }
                    var styleElement = options.insertStyleElement(options);
                    return {
                      update: function update(obj) {
                        apply(styleElement, options, obj);
                      },
                      remove: function remove() {
                        removeStyleElement(styleElement);
                      }
                    };
                  }
                  module2.exports = domAPI;
                })
              ),
              /***/
              9827: (
                /***/
                ((module2) => {
                  "use strict";
                  function styleTagTransform(css, styleElement) {
                    if (styleElement.styleSheet) {
                      styleElement.styleSheet.cssText = css;
                    } else {
                      while (styleElement.firstChild) {
                        styleElement.removeChild(styleElement.firstChild);
                      }
                      styleElement.appendChild(document.createTextNode(css));
                    }
                  }
                  module2.exports = styleTagTransform;
                })
              ),
              /***/
              8899: (
                /***/
                ((module2, __webpack_exports__2, __webpack_require__2) => {
                  "use strict";
                  __webpack_require__2.r(__webpack_exports__2);
                  __webpack_require__2.d(__webpack_exports__2, {
                    "default": () => (
                      /* binding */
                      es
                    )
                  });
                  ;
                  function symbolObservablePonyfill(root2) {
                    var result2;
                    var Symbol2 = root2.Symbol;
                    if (typeof Symbol2 === "function") {
                      if (Symbol2.observable) {
                        result2 = Symbol2.observable;
                      } else {
                        result2 = Symbol2("observable");
                        Symbol2.observable = result2;
                      }
                    } else {
                      result2 = "@@observable";
                    }
                    return result2;
                  }
                  ;
                  ;
                  module2 = __webpack_require__2.hmd(module2);
                  var root;
                  if (typeof self !== "undefined") {
                    root = self;
                  } else if (typeof window !== "undefined") {
                    root = window;
                  } else if (typeof __webpack_require__2.g !== "undefined") {
                    root = __webpack_require__2.g;
                  } else if (true) {
                    root = module2;
                  } else {
                  }
                  var result = symbolObservablePonyfill(root);
                  const es = result;
                })
              ),
              /***/
              5746: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _possibleConstructorReturn2 = _interopRequireDefault(__webpack_require__2(5432));
                  var _getPrototypeOf2 = _interopRequireDefault(__webpack_require__2(2132));
                  var _inherits2 = _interopRequireDefault(__webpack_require__2(5075));
                  var _assertThisInitialized2 = _interopRequireDefault(__webpack_require__2(7111));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var _liveSet = _interopRequireDefault(__webpack_require__2(2436));
                  var _TagTreeNode2 = _interopRequireDefault(__webpack_require__2(8410));
                  var EMPTY_ARRAY = Object.freeze([]);
                  var TagTree = /* @__PURE__ */ (function(_TagTreeNode) {
                    (0, _inherits2.default)(TagTree2, _TagTreeNode);
                    function TagTree2(init2) {
                      var _this;
                      (0, _classCallCheck2.default)(this, TagTree2);
                      var rootNodeController;
                      _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(TagTree2).call(this, {
                        value: init2.root,
                        parent: null,
                        ownedTags: new Set(init2.tags.map(function(_ref) {
                          var tag = _ref.tag;
                          return tag;
                        })),
                        executor: function executor(controller2) {
                          rootNodeController = controller2;
                        }
                      }));
                      (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), "_nodeControllers", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), "_lookupTable", void 0);
                      (0, _defineProperty2.default)((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), "_allByTag", void 0);
                      if (!rootNodeController) throw new Error();
                      _this._nodeControllers.set((0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)), rootNodeController);
                      _this._lookupTable = /* @__PURE__ */ new Map([[init2.root, [(0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this))]]]);
                      _this._allByTag = /* @__PURE__ */ new Map();
                      init2.tags.forEach(function(_ref2) {
                        var tag = _ref2.tag;
                        var _LiveSet$active = _liveSet.default.active(), liveSet = _LiveSet$active.liveSet, controller2 = _LiveSet$active.controller;
                        if (_this._allByTag.has(tag)) throw new Error("Tag specified twice: " + tag);
                        _this._allByTag.set(tag, {
                          ownedTags: /* @__PURE__ */ new Set(),
                          liveSet,
                          controller: controller2
                        });
                      });
                      init2.tags.forEach(function(_ref3) {
                        var tag = _ref3.tag, ownedBy = _ref3.ownedBy;
                        if (!ownedBy) return;
                        ownedBy.forEach(function(owningTag) {
                          var entry = _this._allByTag.get(owningTag);
                          if (!entry) throw new Error("unknown ownedBy value for ".concat(tag, ": ").concat(owningTag));
                          entry.ownedTags.add(tag);
                        });
                      });
                      var controller = {
                        tree: (0, _assertThisInitialized2.default)((0, _assertThisInitialized2.default)(_this)),
                        addTaggedValue: function addTaggedValue(parent, tag, value) {
                          var tagEntry = _this._allByTag.get(tag);
                          if (!tagEntry) throw new Error("unknown tag: ".concat(tag));
                          var controller2;
                          var node = new _TagTreeNode2.default({
                            value,
                            parent,
                            ownedTags: tagEntry.ownedTags,
                            executor: function executor(_controller) {
                              controller2 = _controller;
                            }
                          });
                          if (!controller2) throw new Error();
                          _this._nodeControllers.set(node, controller2);
                          tagEntry.controller.add(node);
                          var valueNodes = _this._lookupTable.get(value);
                          if (valueNodes) {
                            valueNodes.push(node);
                          } else {
                            _this._lookupTable.set(value, [node]);
                          }
                          var parentController = _this._nodeControllers.get(parent);
                          if (!parentController) throw new Error("parent is not part of TagTree");
                          parentController.addOwnedNode(tag, node);
                          return node;
                        },
                        removeTaggedNode: function removeTaggedNode(parent, tag, node) {
                          var tagEntry = _this._allByTag.get(tag);
                          if (!tagEntry) throw new Error("unknown tag: ".concat(tag));
                          var parentController = _this._nodeControllers.get(parent);
                          if (!parentController) throw new Error("parent is not part of TagTree");
                          var value = node.getValue();
                          var nodes = _this._lookupTable.get(value);
                          if (!nodes) throw new Error("node was missing from lookup table before removal");
                          if (nodes.length > 1) {
                            var ix = nodes.indexOf(node);
                            if (ix < 0) throw new Error("node was missing from list in lookup table before removal");
                            nodes.splice(ix, 1);
                          } else {
                            _this._lookupTable.delete(value);
                          }
                          node.getOwned().forEach(function(liveSet, tag2) {
                            liveSet.values().forEach(function(childNode) {
                              controller.removeTaggedNode(node, tag2, childNode);
                            });
                          });
                          tagEntry.controller.remove(node);
                          parentController.removeOwnedNode(tag, node);
                          _this._nodeControllers.delete(node);
                        },
                        end: function end() {
                          _this._nodeControllers.forEach(function(controller2) {
                            controller2.end();
                          });
                          _this._allByTag.forEach(function(_ref4) {
                            var controller2 = _ref4.controller;
                            controller2.end();
                          });
                        }
                      };
                      init2.executor(controller);
                      init2.executor = function() {
                      };
                      return _this;
                    }
                    (0, _createClass2.default)(TagTree2, [{
                      key: "getNodesForValue",
                      value: function getNodesForValue(value) {
                        var l = this._lookupTable.get(value);
                        return l ? Object.freeze(l.slice()) : EMPTY_ARRAY;
                      }
                    }, {
                      key: "getAllByTag",
                      value: function getAllByTag(tag) {
                        var entry = this._allByTag.get(tag);
                        if (!entry) throw new Error("tag does not exist in TagTree: ".concat(tag));
                        return entry.liveSet;
                      }
                    }, {
                      key: "getAll",
                      value: function getAll() {
                        var m = /* @__PURE__ */ new Map();
                        this._allByTag.forEach(function(_ref5, tag) {
                          var liveSet = _ref5.liveSet;
                          m.set(tag, liveSet);
                        });
                        return m;
                      }
                    }]);
                    return TagTree2;
                  })(_TagTreeNode2.default);
                  exports2["default"] = TagTree;
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              8410: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = void 0;
                  var _classCallCheck2 = _interopRequireDefault(__webpack_require__2(9131));
                  var _createClass2 = _interopRequireDefault(__webpack_require__2(8463));
                  var _defineProperty2 = _interopRequireDefault(__webpack_require__2(5985));
                  var _liveSet = _interopRequireDefault(__webpack_require__2(2436));
                  var TagTreeNode = /* @__PURE__ */ (function() {
                    function TagTreeNode2(init2) {
                      var _this = this;
                      (0, _classCallCheck2.default)(this, TagTreeNode2);
                      (0, _defineProperty2.default)(this, "_init", void 0);
                      (0, _defineProperty2.default)(this, "_ownedNodes", /* @__PURE__ */ new Map());
                      (0, _defineProperty2.default)(this, "_ownedByTag", /* @__PURE__ */ new Map());
                      this._init = init2;
                      this._init.executor({
                        node: this,
                        addOwnedNode: function addOwnedNode(tag, node) {
                          _this._ownedNodes.set(node, tag);
                          var entry = _this._ownedByTag.get(tag);
                          if (!entry) {
                            entry = _this._createTagEntry();
                            _this._ownedByTag.set(tag, entry);
                          }
                          var _entry = entry, controller = _entry.controller;
                          controller.add(node);
                        },
                        removeOwnedNode: function removeOwnedNode(tag, node) {
                          _this._ownedNodes.delete(node);
                          var entry = _this._ownedByTag.get(tag);
                          if (!entry) throw new Error("tag not owned");
                          var controller = entry.controller;
                          controller.remove(node);
                        },
                        end: function end() {
                          _this._ownedByTag.forEach(function(_ref) {
                            var controller = _ref.controller;
                            controller.end();
                          });
                        }
                      });
                      this._init.executor = function() {
                      };
                    }
                    (0, _createClass2.default)(TagTreeNode2, [{
                      key: "_createTagEntry",
                      value: function _createTagEntry() {
                        return _liveSet.default.active();
                      }
                    }, {
                      key: "getValue",
                      value: function getValue() {
                        return this._init.value;
                      }
                    }, {
                      key: "getParent",
                      value: function getParent() {
                        return this._init.parent || null;
                      }
                    }, {
                      key: "getOwnedByTag",
                      value: function getOwnedByTag(tag) {
                        var entry = this._ownedByTag.get(tag);
                        if (!entry) {
                          if (!this._init.ownedTags.has(tag)) {
                            throw new Error("tag not owned: ".concat(tag));
                          }
                          entry = this._createTagEntry();
                          this._ownedByTag.set(tag, entry);
                        }
                        return entry.liveSet;
                      }
                    }, {
                      key: "getOwned",
                      value: function getOwned() {
                        var m = /* @__PURE__ */ new Map();
                        this._ownedByTag.forEach(function(_ref2, tag) {
                          var liveSet = _ref2.liveSet;
                          m.set(tag, liveSet);
                        });
                        return m;
                      }
                    }, {
                      key: "getTag",
                      value: function getTag() {
                        var parent = this._init.parent;
                        return parent ? parent.getTagOfOwnedNode(this) : null;
                      }
                    }, {
                      key: "ownsNode",
                      value: function ownsNode(node) {
                        return this._ownedNodes.has(node);
                      }
                    }, {
                      key: "getTagOfOwnedNode",
                      value: function getTagOfOwnedNode(node) {
                        var tag = this._ownedNodes.get(node);
                        if (tag == null) throw new Error("node not owned");
                        return tag;
                      }
                    }]);
                    return TagTreeNode2;
                  })();
                  exports2["default"] = TagTreeNode;
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              7138: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  var _interopRequireDefault = __webpack_require__2(1654);
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  Object.defineProperty(exports2, "TagTree", {
                    enumerable: true,
                    get: function get() {
                      return _TagTree.default;
                    }
                  });
                  Object.defineProperty(exports2, "TagTreeNode", {
                    enumerable: true,
                    get: function get() {
                      return _TagTreeNode.default;
                    }
                  });
                  var _TagTree = _interopRequireDefault(__webpack_require__2(5746));
                  var _TagTreeNode = _interopRequireDefault(__webpack_require__2(8410));
                })
              ),
              /***/
              6046: (
                /***/
                ((module2) => {
                  var symbolExists = typeof Symbol !== "undefined";
                  var protocols = {
                    iterator: symbolExists ? Symbol.iterator : "@@iterator"
                  };
                  function throwProtocolError(name, coll) {
                    throw new Error("don't know how to " + name + " collection: " + coll);
                  }
                  function fulfillsProtocol(obj, name) {
                    if (name === "iterator") {
                      return obj[protocols.iterator] || obj.next;
                    }
                    return obj[protocols[name]];
                  }
                  function getProtocolProperty(obj, name) {
                    return obj[protocols[name]];
                  }
                  function iterator(coll) {
                    var iter = getProtocolProperty(coll, "iterator");
                    if (iter) {
                      return iter.call(coll);
                    } else if (coll.next) {
                      return coll;
                    } else if (isArray(coll)) {
                      return new ArrayIterator(coll);
                    } else if (isObject(coll)) {
                      return new ObjectIterator(coll);
                    }
                  }
                  function ArrayIterator(arr) {
                    this.arr = arr;
                    this.index = 0;
                  }
                  ArrayIterator.prototype.next = function() {
                    if (this.index < this.arr.length) {
                      return {
                        value: this.arr[this.index++],
                        done: false
                      };
                    }
                    return {
                      done: true
                    };
                  };
                  function ObjectIterator(obj) {
                    this.obj = obj;
                    this.keys = Object.keys(obj);
                    this.index = 0;
                  }
                  ObjectIterator.prototype.next = function() {
                    if (this.index < this.keys.length) {
                      var k = this.keys[this.index++];
                      return {
                        value: [k, this.obj[k]],
                        done: false
                      };
                    }
                    return {
                      done: true
                    };
                  };
                  var toString = Object.prototype.toString;
                  var isArray = typeof Array.isArray === "function" ? Array.isArray : function(obj) {
                    return toString.call(obj) == "[object Array]";
                  };
                  function isFunction(x) {
                    return typeof x === "function";
                  }
                  function isObject(x) {
                    return x instanceof Object && Object.getPrototypeOf(x) === Object.getPrototypeOf({});
                  }
                  function isNumber(x) {
                    return typeof x === "number";
                  }
                  function Reduced(value) {
                    this["@@transducer/reduced"] = true;
                    this["@@transducer/value"] = value;
                  }
                  function isReduced(x) {
                    return x instanceof Reduced || x && x["@@transducer/reduced"];
                  }
                  function deref(x) {
                    return x["@@transducer/value"];
                  }
                  function ensureReduced(val) {
                    if (isReduced(val)) {
                      return val;
                    } else {
                      return new Reduced(val);
                    }
                  }
                  function ensureUnreduced(v) {
                    if (isReduced(v)) {
                      return deref(v);
                    } else {
                      return v;
                    }
                  }
                  function reduce(coll, xform, init2) {
                    if (isArray(coll)) {
                      var result = init2;
                      var index = -1;
                      var len = coll.length;
                      while (++index < len) {
                        result = xform["@@transducer/step"](result, coll[index]);
                        if (isReduced(result)) {
                          result = deref(result);
                          break;
                        }
                      }
                      return xform["@@transducer/result"](result);
                    } else if (isObject(coll) || fulfillsProtocol(coll, "iterator")) {
                      var result = init2;
                      var iter = iterator(coll);
                      var val = iter.next();
                      while (!val.done) {
                        result = xform["@@transducer/step"](result, val.value);
                        if (isReduced(result)) {
                          result = deref(result);
                          break;
                        }
                        val = iter.next();
                      }
                      return xform["@@transducer/result"](result);
                    }
                    throwProtocolError("iterate", coll);
                  }
                  function transduce(coll, xform, reducer, init2) {
                    xform = xform(reducer);
                    if (init2 === void 0) {
                      init2 = xform["@@transducer/init"]();
                    }
                    return reduce(coll, xform, init2);
                  }
                  function compose() {
                    var funcs = Array.prototype.slice.call(arguments);
                    return function(r) {
                      var value = r;
                      for (var i = funcs.length - 1; i >= 0; i--) {
                        value = funcs[i](value);
                      }
                      return value;
                    };
                  }
                  function transformer(f) {
                    var t2 = {};
                    t2["@@transducer/init"] = function() {
                      throw new Error("init value unavailable");
                    };
                    t2["@@transducer/result"] = function(v) {
                      return v;
                    };
                    t2["@@transducer/step"] = f;
                    return t2;
                  }
                  function bound(f, ctx, count) {
                    count = count != null ? count : 1;
                    if (!ctx) {
                      return f;
                    } else {
                      switch (count) {
                        case 1:
                          return function(x) {
                            return f.call(ctx, x);
                          };
                        case 2:
                          return function(x, y) {
                            return f.call(ctx, x, y);
                          };
                        default:
                          return f.bind(ctx);
                      }
                    }
                  }
                  function arrayMap(arr, f, ctx) {
                    var index = -1;
                    var length = arr.length;
                    var result = Array(length);
                    f = bound(f, ctx, 2);
                    while (++index < length) {
                      result[index] = f(arr[index], index);
                    }
                    return result;
                  }
                  function arrayFilter(arr, f, ctx) {
                    var len = arr.length;
                    var result = [];
                    f = bound(f, ctx, 2);
                    for (var i = 0; i < len; i++) {
                      if (f(arr[i], i)) {
                        result.push(arr[i]);
                      }
                    }
                    return result;
                  }
                  function Map2(f, xform) {
                    this.xform = xform;
                    this.f = f;
                  }
                  Map2.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Map2.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Map2.prototype["@@transducer/step"] = function(res, input) {
                    return this.xform["@@transducer/step"](res, this.f(input));
                  };
                  function map(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    if (coll) {
                      if (isArray(coll)) {
                        return arrayMap(coll, f, ctx);
                      }
                      return seq(coll, map(f));
                    }
                    return function(xform) {
                      return new Map2(f, xform);
                    };
                  }
                  function Filter(f, xform) {
                    this.xform = xform;
                    this.f = f;
                  }
                  Filter.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Filter.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Filter.prototype["@@transducer/step"] = function(res, input) {
                    if (this.f(input)) {
                      return this.xform["@@transducer/step"](res, input);
                    }
                    return res;
                  };
                  function filter(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    if (coll) {
                      if (isArray(coll)) {
                        return arrayFilter(coll, f, ctx);
                      }
                      return seq(coll, filter(f));
                    }
                    return function(xform) {
                      return new Filter(f, xform);
                    };
                  }
                  function remove(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    return filter(coll, function(x) {
                      return !f(x);
                    });
                  }
                  function keep(coll) {
                    return filter(coll, function(x) {
                      return x != null;
                    });
                  }
                  function Dedupe(xform) {
                    this.xform = xform;
                    this.last = void 0;
                  }
                  Dedupe.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Dedupe.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Dedupe.prototype["@@transducer/step"] = function(result, input) {
                    if (input !== this.last) {
                      this.last = input;
                      return this.xform["@@transducer/step"](result, input);
                    }
                    return result;
                  };
                  function dedupe(coll) {
                    if (coll) {
                      return seq(coll, dedupe());
                    }
                    return function(xform) {
                      return new Dedupe(xform);
                    };
                  }
                  function TakeWhile(f, xform) {
                    this.xform = xform;
                    this.f = f;
                  }
                  TakeWhile.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  TakeWhile.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  TakeWhile.prototype["@@transducer/step"] = function(result, input) {
                    if (this.f(input)) {
                      return this.xform["@@transducer/step"](result, input);
                    }
                    return new Reduced(result);
                  };
                  function takeWhile(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    if (coll) {
                      return seq(coll, takeWhile(f));
                    }
                    return function(xform) {
                      return new TakeWhile(f, xform);
                    };
                  }
                  function Take(n, xform) {
                    this.n = n;
                    this.i = 0;
                    this.xform = xform;
                  }
                  Take.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Take.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Take.prototype["@@transducer/step"] = function(result, input) {
                    if (this.i < this.n) {
                      result = this.xform["@@transducer/step"](result, input);
                      if (this.i + 1 >= this.n) {
                        result = ensureReduced(result);
                      }
                    }
                    this.i++;
                    return result;
                  };
                  function take(coll, n) {
                    if (isNumber(coll)) {
                      n = coll;
                      coll = null;
                    }
                    if (coll) {
                      return seq(coll, take(n));
                    }
                    return function(xform) {
                      return new Take(n, xform);
                    };
                  }
                  function Drop(n, xform) {
                    this.n = n;
                    this.i = 0;
                    this.xform = xform;
                  }
                  Drop.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Drop.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Drop.prototype["@@transducer/step"] = function(result, input) {
                    if (this.i++ < this.n) {
                      return result;
                    }
                    return this.xform["@@transducer/step"](result, input);
                  };
                  function drop(coll, n) {
                    if (isNumber(coll)) {
                      n = coll;
                      coll = null;
                    }
                    if (coll) {
                      return seq(coll, drop(n));
                    }
                    return function(xform) {
                      return new Drop(n, xform);
                    };
                  }
                  function DropWhile(f, xform) {
                    this.xform = xform;
                    this.f = f;
                    this.dropping = true;
                  }
                  DropWhile.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  DropWhile.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  DropWhile.prototype["@@transducer/step"] = function(result, input) {
                    if (this.dropping) {
                      if (this.f(input)) {
                        return result;
                      } else {
                        this.dropping = false;
                      }
                    }
                    return this.xform["@@transducer/step"](result, input);
                  };
                  function dropWhile(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    if (coll) {
                      return seq(coll, dropWhile(f));
                    }
                    return function(xform) {
                      return new DropWhile(f, xform);
                    };
                  }
                  function Partition(n, xform) {
                    this.n = n;
                    this.i = 0;
                    this.xform = xform;
                    this.part = new Array(n);
                  }
                  Partition.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Partition.prototype["@@transducer/result"] = function(v) {
                    if (this.i > 0) {
                      return ensureUnreduced(this.xform["@@transducer/step"](v, this.part.slice(0, this.i)));
                    }
                    return this.xform["@@transducer/result"](v);
                  };
                  Partition.prototype["@@transducer/step"] = function(result, input) {
                    this.part[this.i] = input;
                    this.i += 1;
                    if (this.i === this.n) {
                      var out = this.part.slice(0, this.n);
                      this.part = new Array(this.n);
                      this.i = 0;
                      return this.xform["@@transducer/step"](result, out);
                    }
                    return result;
                  };
                  function partition(coll, n) {
                    if (isNumber(coll)) {
                      n = coll;
                      coll = null;
                    }
                    if (coll) {
                      return seq(coll, partition(n));
                    }
                    return function(xform) {
                      return new Partition(n, xform);
                    };
                  }
                  var NOTHING = {};
                  function PartitionBy(f, xform) {
                    this.f = f;
                    this.xform = xform;
                    this.part = [];
                    this.last = NOTHING;
                  }
                  PartitionBy.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  PartitionBy.prototype["@@transducer/result"] = function(v) {
                    var l = this.part.length;
                    if (l > 0) {
                      return ensureUnreduced(this.xform["@@transducer/step"](v, this.part.slice(0, l)));
                    }
                    return this.xform["@@transducer/result"](v);
                  };
                  PartitionBy.prototype["@@transducer/step"] = function(result, input) {
                    var current = this.f(input);
                    if (current === this.last || this.last === NOTHING) {
                      this.part.push(input);
                    } else {
                      result = this.xform["@@transducer/step"](result, this.part);
                      this.part = [input];
                    }
                    this.last = current;
                    return result;
                  };
                  function partitionBy(coll, f, ctx) {
                    if (isFunction(coll)) {
                      ctx = f;
                      f = coll;
                      coll = null;
                    }
                    f = bound(f, ctx);
                    if (coll) {
                      return seq(coll, partitionBy(f));
                    }
                    return function(xform) {
                      return new PartitionBy(f, xform);
                    };
                  }
                  function Interpose(sep, xform) {
                    this.sep = sep;
                    this.xform = xform;
                    this.started = false;
                  }
                  Interpose.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Interpose.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Interpose.prototype["@@transducer/step"] = function(result, input) {
                    if (this.started) {
                      var withSep = this.xform["@@transducer/step"](result, this.sep);
                      if (isReduced(withSep)) {
                        return withSep;
                      } else {
                        return this.xform["@@transducer/step"](withSep, input);
                      }
                    } else {
                      this.started = true;
                      return this.xform["@@transducer/step"](result, input);
                    }
                  };
                  function interpose(coll, separator) {
                    if (arguments.length === 1) {
                      separator = coll;
                      return function(xform) {
                        return new Interpose(separator, xform);
                      };
                    }
                    return seq(coll, interpose(separator));
                  }
                  function Repeat(n, xform) {
                    this.xform = xform;
                    this.n = n;
                  }
                  Repeat.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Repeat.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Repeat.prototype["@@transducer/step"] = function(result, input) {
                    var n = this.n;
                    var r = result;
                    for (var i = 0; i < n; i++) {
                      r = this.xform["@@transducer/step"](r, input);
                      if (isReduced(r)) {
                        break;
                      }
                    }
                    return r;
                  };
                  function repeat(coll, n) {
                    if (arguments.length === 1) {
                      n = coll;
                      return function(xform) {
                        return new Repeat(n, xform);
                      };
                    }
                    return seq(coll, repeat(n));
                  }
                  function TakeNth(n, xform) {
                    this.xform = xform;
                    this.n = n;
                    this.i = -1;
                  }
                  TakeNth.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  TakeNth.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  TakeNth.prototype["@@transducer/step"] = function(result, input) {
                    this.i += 1;
                    if (this.i % this.n === 0) {
                      return this.xform["@@transducer/step"](result, input);
                    }
                    return result;
                  };
                  function takeNth(coll, nth) {
                    if (arguments.length === 1) {
                      nth = coll;
                      return function(xform) {
                        return new TakeNth(nth, xform);
                      };
                    }
                    return seq(coll, takeNth(nth));
                  }
                  function Cat(xform) {
                    this.xform = xform;
                  }
                  Cat.prototype["@@transducer/init"] = function() {
                    return this.xform["@@transducer/init"]();
                  };
                  Cat.prototype["@@transducer/result"] = function(v) {
                    return this.xform["@@transducer/result"](v);
                  };
                  Cat.prototype["@@transducer/step"] = function(result, input) {
                    var xform = this.xform;
                    var newxform = {};
                    newxform["@@transducer/init"] = function() {
                      return xform["@@transducer/init"]();
                    };
                    newxform["@@transducer/result"] = function(v) {
                      return v;
                    };
                    newxform["@@transducer/step"] = function(result2, input2) {
                      var val = xform["@@transducer/step"](result2, input2);
                      return isReduced(val) ? deref(val) : val;
                    };
                    return reduce(input, newxform, result);
                  };
                  function cat(xform) {
                    return new Cat(xform);
                  }
                  function mapcat(f, ctx) {
                    f = bound(f, ctx);
                    return compose(map(f), cat);
                  }
                  function push(arr, x) {
                    arr.push(x);
                    return arr;
                  }
                  function merge(obj, x) {
                    if (isArray(x) && x.length === 2) {
                      obj[x[0]] = x[1];
                    } else {
                      var keys = Object.keys(x);
                      var len = keys.length;
                      for (var i = 0; i < len; i++) {
                        obj[keys[i]] = x[keys[i]];
                      }
                    }
                    return obj;
                  }
                  var arrayReducer = {};
                  arrayReducer["@@transducer/init"] = function() {
                    return [];
                  };
                  arrayReducer["@@transducer/result"] = function(v) {
                    return v;
                  };
                  arrayReducer["@@transducer/step"] = push;
                  var objReducer = {};
                  objReducer["@@transducer/init"] = function() {
                    return {};
                  };
                  objReducer["@@transducer/result"] = function(v) {
                    return v;
                  };
                  objReducer["@@transducer/step"] = merge;
                  function toArray(coll, xform) {
                    if (!xform) {
                      return reduce(coll, arrayReducer, []);
                    }
                    return transduce(coll, xform, arrayReducer, []);
                  }
                  function toObj(coll, xform) {
                    if (!xform) {
                      return reduce(coll, objReducer, {});
                    }
                    return transduce(coll, xform, objReducer, {});
                  }
                  function toIter(coll, xform) {
                    if (!xform) {
                      return iterator(coll);
                    }
                    return new LazyTransformer(xform, coll);
                  }
                  function seq(coll, xform) {
                    if (isArray(coll)) {
                      return transduce(coll, xform, arrayReducer, []);
                    } else if (isObject(coll)) {
                      return transduce(coll, xform, objReducer, {});
                    } else if (coll["@@transducer/step"]) {
                      var init2;
                      if (coll["@@transducer/init"]) {
                        init2 = coll["@@transducer/init"]();
                      } else {
                        init2 = new coll.constructor();
                      }
                      return transduce(coll, xform, coll, init2);
                    } else if (fulfillsProtocol(coll, "iterator")) {
                      return new LazyTransformer(xform, coll);
                    }
                    throwProtocolError("sequence", coll);
                  }
                  function into(to, xform, from) {
                    if (isArray(to)) {
                      return transduce(from, xform, arrayReducer, to);
                    } else if (isObject(to)) {
                      return transduce(from, xform, objReducer, to);
                    } else if (to["@@transducer/step"]) {
                      return transduce(
                        from,
                        xform,
                        to,
                        to
                      );
                    }
                    throwProtocolError("into", to);
                  }
                  var stepper = {};
                  stepper["@@transducer/result"] = function(v) {
                    return isReduced(v) ? deref(v) : v;
                  };
                  stepper["@@transducer/step"] = function(lt, x) {
                    lt.items.push(x);
                    return lt.rest;
                  };
                  function Stepper(xform, iter) {
                    this.xform = xform(stepper);
                    this.iter = iter;
                  }
                  Stepper.prototype["@@transducer/step"] = function(lt) {
                    var len = lt.items.length;
                    while (lt.items.length === len) {
                      var n = this.iter.next();
                      if (n.done || isReduced(n.value)) {
                        this.xform["@@transducer/result"](this);
                        break;
                      }
                      this.xform["@@transducer/step"](lt, n.value);
                    }
                  };
                  function LazyTransformer(xform, coll) {
                    this.iter = iterator(coll);
                    this.items = [];
                    this.stepper = new Stepper(xform, iterator(coll));
                  }
                  LazyTransformer.prototype[protocols.iterator] = function() {
                    return this;
                  };
                  LazyTransformer.prototype.next = function() {
                    this["@@transducer/step"]();
                    if (this.items.length) {
                      return {
                        value: this.items.pop(),
                        done: false
                      };
                    } else {
                      return { done: true };
                    }
                  };
                  LazyTransformer.prototype["@@transducer/step"] = function() {
                    if (!this.items.length) {
                      this.stepper["@@transducer/step"](this);
                    }
                  };
                  function range(n) {
                    var arr = new Array(n);
                    for (var i = 0; i < arr.length; i++) {
                      arr[i] = i;
                    }
                    return arr;
                  }
                  module2.exports = {
                    reduce,
                    transformer,
                    Reduced,
                    isReduced,
                    iterator,
                    push,
                    merge,
                    transduce,
                    seq,
                    toArray,
                    toObj,
                    toIter,
                    into,
                    compose,
                    map,
                    filter,
                    remove,
                    cat,
                    mapcat,
                    keep,
                    dedupe,
                    take,
                    takeWhile,
                    takeNth,
                    drop,
                    dropWhile,
                    partition,
                    partitionBy,
                    interpose,
                    repeat,
                    range,
                    LazyTransformer
                  };
                })
              ),
              /***/
              616: (
                /***/
                ((module2, exports2, __webpack_require__2) => {
                  "use strict";
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2["default"] = udKefir;
                  var _ud = __webpack_require__2(7332);
                  var Kefir = __webpack_require__2(7249);
                  function udKefir(module3, value) {
                    var key = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
                    var sharedObject = (0, _ud.defonce)(module3, function() {
                      var maybeEmitter;
                      var stream = Kefir.stream(function(_emitter) {
                        maybeEmitter = _emitter;
                      });
                      var property = stream.toProperty();
                      property.onValue(function() {
                      });
                      if (!maybeEmitter) throw new Error("Should not happen, emitter was not set");
                      var emitter = maybeEmitter;
                      return {
                        property,
                        emit: function emit(x) {
                          emitter.emit(x);
                        }
                      };
                    }, "--udkefir-" + key);
                    sharedObject.emit(value);
                    return sharedObject.property;
                  }
                  module2.exports = exports2.default;
                  module2.exports["default"] = exports2.default;
                })
              ),
              /***/
              7332: (
                /***/
                ((__unused_webpack_module, exports2, __webpack_require__2) => {
                  "use strict";
                  Object.defineProperty(exports2, "__esModule", {
                    value: true
                  });
                  exports2.defn = defn;
                  exports2.defobj = defobj;
                  exports2.defonce = defonce;
                  exports2.markReloadable = markReloadable;
                  var range = __webpack_require__2(9060);
                  var zipObject = __webpack_require__2(2118);
                  var moduleUsedUdKeys = /* @__PURE__ */ new WeakMap();
                  function markReloadable(module2) {
                    if (module2.hot) {
                      module2.hot.accept();
                    }
                  }
                  function defonce(module2, fn) {
                    var key = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
                    markReloadable(module2);
                    var usedKeys = moduleUsedUdKeys.get(module2);
                    if (!usedKeys) {
                      usedKeys = /* @__PURE__ */ new Set();
                      moduleUsedUdKeys.set(module2, usedKeys);
                    }
                    if (usedKeys.has(key)) {
                      throw new Error("ud functions can only be used once per module with a given key");
                    }
                    usedKeys.add(key);
                    var valueWasSet = false;
                    var value = void 0;
                    if (module2.hot) {
                      if (module2.hot.data && module2.hot.data.__ud__ && Object.prototype.hasOwnProperty.call(module2.hot.data.__ud__, key)) {
                        value = module2.hot.data.__ud__[key];
                        valueWasSet = true;
                      }
                      module2.hot.dispose(function(data) {
                        if (!data.__ud__) data.__ud__ = {};
                        data.__ud__[key] = value;
                      });
                    }
                    if (!valueWasSet) value = fn();
                    return value;
                  }
                  function defobj(module2, object) {
                    var key = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
                    var sharedObject = defonce(module2, function() {
                      return object;
                    }, "--defobj-" + key);
                    if (sharedObject !== object) {
                      cloneOntoTarget(sharedObject, object);
                    }
                    return sharedObject;
                  }
                  function cloneOntoTarget(target, object) {
                    Object.getOwnPropertyNames(target).filter(function(name) {
                      return !Object.prototype.hasOwnProperty.call(object, name);
                    }).forEach(function(name) {
                      delete target[name];
                    });
                    var newPropsChain = Object.getOwnPropertyNames(object);
                    Object.defineProperties(target, zipObject(newPropsChain, newPropsChain.map(function(name) {
                      return Object.getOwnPropertyDescriptor(object, name);
                    }).filter(Boolean).map(function(_ref) {
                      var value = _ref.value, enumerable = _ref.enumerable;
                      return {
                        value,
                        enumerable,
                        writable: true,
                        configurable: true
                      };
                    })));
                    return target;
                  }
                  function defn(module2, fn) {
                    var key = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
                    var shared = defonce(module2, function() {
                      if (!module2.hot) {
                        return {
                          fn: null,
                          wrapper: fn
                        };
                      }
                      var shared2 = {
                        fn: null,
                        wrapper: null
                      };
                      var paramsList = range(fn.length).map(function(x) {
                        return "a" + x;
                      }).join(",");
                      shared2.wrapper = new Function("shared", "\n      'use strict';\n      return function ".concat(fn.name, "__ud_wrapper(").concat(paramsList, ") {\n        if (new.target) {\n          return Reflect.construct(shared.fn, arguments, new.target);\n        } else {\n          return shared.fn.apply(this, arguments);\n        }\n      };\n      "))(shared2);
                      if (fn.prototype) {
                        shared2.wrapper.prototype = Object.create(fn.prototype);
                        shared2.wrapper.prototype.constructor = shared2.wrapper;
                      } else {
                        shared2.wrapper.prototype = fn.prototype;
                      }
                      return shared2;
                    }, "--defn-shared-" + key);
                    shared.fn = fn;
                    if (module2.hot) {
                      if (fn.prototype && shared.wrapper.prototype && Object.getPrototypeOf(shared.wrapper.prototype) !== fn.prototype) {
                        Object.setPrototypeOf(shared.wrapper.prototype, fn.prototype);
                      }
                      Object.setPrototypeOf(shared.wrapper, fn);
                    }
                    return shared.wrapper;
                  }
                })
              ),
              /***/
              1442: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  module2.exports = __webpack_require__2(8453).Observable;
                })
              ),
              /***/
              8453: (
                /***/
                ((__unused_webpack_module, exports2) => {
                  "use strict";
                  var __webpack_unused_export__;
                  __webpack_unused_export__ = {
                    value: true
                  };
                  exports2.Observable = void 0;
                  function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) {
                      throw new TypeError("Cannot call a class as a function");
                    }
                  }
                  function _defineProperties(target, props) {
                    for (var i = 0; i < props.length; i++) {
                      var descriptor = props[i];
                      descriptor.enumerable = descriptor.enumerable || false;
                      descriptor.configurable = true;
                      if ("value" in descriptor) descriptor.writable = true;
                      Object.defineProperty(target, descriptor.key, descriptor);
                    }
                  }
                  function _createClass(Constructor, protoProps, staticProps) {
                    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
                    if (staticProps) _defineProperties(Constructor, staticProps);
                    return Constructor;
                  }
                  var hasSymbols = function() {
                    return typeof Symbol === "function";
                  };
                  var hasSymbol = function(name) {
                    return hasSymbols() && Boolean(Symbol[name]);
                  };
                  var getSymbol = function(name) {
                    return hasSymbol(name) ? Symbol[name] : "@@" + name;
                  };
                  if (hasSymbols() && !hasSymbol("observable")) {
                    Symbol.observable = Symbol("observable");
                  }
                  var SymbolIterator = getSymbol("iterator");
                  var SymbolObservable = getSymbol("observable");
                  var SymbolSpecies = getSymbol("species");
                  function getMethod(obj, key) {
                    var value = obj[key];
                    if (value == null) return void 0;
                    if (typeof value !== "function") throw new TypeError(value + " is not a function");
                    return value;
                  }
                  function getSpecies(obj) {
                    var ctor = obj.constructor;
                    if (ctor !== void 0) {
                      ctor = ctor[SymbolSpecies];
                      if (ctor === null) {
                        ctor = void 0;
                      }
                    }
                    return ctor !== void 0 ? ctor : Observable;
                  }
                  function isObservable(x) {
                    return x instanceof Observable;
                  }
                  function hostReportError(e) {
                    if (hostReportError.log) {
                      hostReportError.log(e);
                    } else {
                      setTimeout(function() {
                        throw e;
                      });
                    }
                  }
                  function enqueue(fn) {
                    Promise.resolve().then(function() {
                      try {
                        fn();
                      } catch (e) {
                        hostReportError(e);
                      }
                    });
                  }
                  function cleanupSubscription(subscription) {
                    var cleanup = subscription._cleanup;
                    if (cleanup === void 0) return;
                    subscription._cleanup = void 0;
                    if (!cleanup) {
                      return;
                    }
                    try {
                      if (typeof cleanup === "function") {
                        cleanup();
                      } else {
                        var unsubscribe = getMethod(cleanup, "unsubscribe");
                        if (unsubscribe) {
                          unsubscribe.call(cleanup);
                        }
                      }
                    } catch (e) {
                      hostReportError(e);
                    }
                  }
                  function closeSubscription(subscription) {
                    subscription._observer = void 0;
                    subscription._queue = void 0;
                    subscription._state = "closed";
                  }
                  function flushSubscription(subscription) {
                    var queue = subscription._queue;
                    if (!queue) {
                      return;
                    }
                    subscription._queue = void 0;
                    subscription._state = "ready";
                    for (var i = 0; i < queue.length; ++i) {
                      notifySubscription(subscription, queue[i].type, queue[i].value);
                      if (subscription._state === "closed") break;
                    }
                  }
                  function notifySubscription(subscription, type, value) {
                    subscription._state = "running";
                    var observer2 = subscription._observer;
                    try {
                      var m = getMethod(observer2, type);
                      switch (type) {
                        case "next":
                          if (m) m.call(observer2, value);
                          break;
                        case "error":
                          closeSubscription(subscription);
                          if (m) m.call(observer2, value);
                          else throw value;
                          break;
                        case "complete":
                          closeSubscription(subscription);
                          if (m) m.call(observer2);
                          break;
                      }
                    } catch (e) {
                      hostReportError(e);
                    }
                    if (subscription._state === "closed") cleanupSubscription(subscription);
                    else if (subscription._state === "running") subscription._state = "ready";
                  }
                  function onNotify(subscription, type, value) {
                    if (subscription._state === "closed") return;
                    if (subscription._state === "buffering") {
                      subscription._queue.push({
                        type,
                        value
                      });
                      return;
                    }
                    if (subscription._state !== "ready") {
                      subscription._state = "buffering";
                      subscription._queue = [{
                        type,
                        value
                      }];
                      enqueue(function() {
                        return flushSubscription(subscription);
                      });
                      return;
                    }
                    notifySubscription(subscription, type, value);
                  }
                  var Subscription = /* @__PURE__ */ (function() {
                    function Subscription2(observer2, subscriber) {
                      _classCallCheck(this, Subscription2);
                      this._cleanup = void 0;
                      this._observer = observer2;
                      this._queue = void 0;
                      this._state = "initializing";
                      var subscriptionObserver = new SubscriptionObserver(this);
                      try {
                        this._cleanup = subscriber.call(void 0, subscriptionObserver);
                      } catch (e) {
                        subscriptionObserver.error(e);
                      }
                      if (this._state === "initializing") this._state = "ready";
                    }
                    _createClass(Subscription2, [{
                      key: "unsubscribe",
                      value: function unsubscribe() {
                        if (this._state !== "closed") {
                          closeSubscription(this);
                          cleanupSubscription(this);
                        }
                      }
                    }, {
                      key: "closed",
                      get: function() {
                        return this._state === "closed";
                      }
                    }]);
                    return Subscription2;
                  })();
                  var SubscriptionObserver = /* @__PURE__ */ (function() {
                    function SubscriptionObserver2(subscription) {
                      _classCallCheck(this, SubscriptionObserver2);
                      this._subscription = subscription;
                    }
                    _createClass(SubscriptionObserver2, [{
                      key: "next",
                      value: function next(value) {
                        onNotify(this._subscription, "next", value);
                      }
                    }, {
                      key: "error",
                      value: function error(value) {
                        onNotify(this._subscription, "error", value);
                      }
                    }, {
                      key: "complete",
                      value: function complete() {
                        onNotify(this._subscription, "complete");
                      }
                    }, {
                      key: "closed",
                      get: function() {
                        return this._subscription._state === "closed";
                      }
                    }]);
                    return SubscriptionObserver2;
                  })();
                  var Observable = /* @__PURE__ */ (function() {
                    function Observable2(subscriber) {
                      _classCallCheck(this, Observable2);
                      if (!(this instanceof Observable2)) throw new TypeError("Observable cannot be called as a function");
                      if (typeof subscriber !== "function") throw new TypeError("Observable initializer must be a function");
                      this._subscriber = subscriber;
                    }
                    _createClass(Observable2, [{
                      key: "subscribe",
                      value: function subscribe(observer2) {
                        if (typeof observer2 !== "object" || observer2 === null) {
                          observer2 = {
                            next: observer2,
                            error: arguments[1],
                            complete: arguments[2]
                          };
                        }
                        return new Subscription(observer2, this._subscriber);
                      }
                    }, {
                      key: "forEach",
                      value: function forEach(fn) {
                        var _this = this;
                        return new Promise(function(resolve, reject) {
                          if (typeof fn !== "function") {
                            reject(new TypeError(fn + " is not a function"));
                            return;
                          }
                          function done() {
                            subscription.unsubscribe();
                            resolve();
                          }
                          var subscription = _this.subscribe({
                            next: function(value) {
                              try {
                                fn(value, done);
                              } catch (e) {
                                reject(e);
                                subscription.unsubscribe();
                              }
                            },
                            error: reject,
                            complete: resolve
                          });
                        });
                      }
                    }, {
                      key: "map",
                      value: function map(fn) {
                        var _this2 = this;
                        if (typeof fn !== "function") throw new TypeError(fn + " is not a function");
                        var C = getSpecies(this);
                        return new C(function(observer2) {
                          return _this2.subscribe({
                            next: function(value) {
                              try {
                                value = fn(value);
                              } catch (e) {
                                return observer2.error(e);
                              }
                              observer2.next(value);
                            },
                            error: function(e) {
                              observer2.error(e);
                            },
                            complete: function() {
                              observer2.complete();
                            }
                          });
                        });
                      }
                    }, {
                      key: "filter",
                      value: function filter(fn) {
                        var _this3 = this;
                        if (typeof fn !== "function") throw new TypeError(fn + " is not a function");
                        var C = getSpecies(this);
                        return new C(function(observer2) {
                          return _this3.subscribe({
                            next: function(value) {
                              try {
                                if (!fn(value)) return;
                              } catch (e) {
                                return observer2.error(e);
                              }
                              observer2.next(value);
                            },
                            error: function(e) {
                              observer2.error(e);
                            },
                            complete: function() {
                              observer2.complete();
                            }
                          });
                        });
                      }
                    }, {
                      key: "reduce",
                      value: function reduce(fn) {
                        var _this4 = this;
                        if (typeof fn !== "function") throw new TypeError(fn + " is not a function");
                        var C = getSpecies(this);
                        var hasSeed = arguments.length > 1;
                        var hasValue = false;
                        var seed = arguments[1];
                        var acc = seed;
                        return new C(function(observer2) {
                          return _this4.subscribe({
                            next: function(value) {
                              var first = !hasValue;
                              hasValue = true;
                              if (!first || hasSeed) {
                                try {
                                  acc = fn(acc, value);
                                } catch (e) {
                                  return observer2.error(e);
                                }
                              } else {
                                acc = value;
                              }
                            },
                            error: function(e) {
                              observer2.error(e);
                            },
                            complete: function() {
                              if (!hasValue && !hasSeed) return observer2.error(new TypeError("Cannot reduce an empty sequence"));
                              observer2.next(acc);
                              observer2.complete();
                            }
                          });
                        });
                      }
                    }, {
                      key: "concat",
                      value: function concat() {
                        var _this5 = this;
                        for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {
                          sources[_key] = arguments[_key];
                        }
                        var C = getSpecies(this);
                        return new C(function(observer2) {
                          var subscription;
                          var index = 0;
                          function startNext(next) {
                            subscription = next.subscribe({
                              next: function(v) {
                                observer2.next(v);
                              },
                              error: function(e) {
                                observer2.error(e);
                              },
                              complete: function() {
                                if (index === sources.length) {
                                  subscription = void 0;
                                  observer2.complete();
                                } else {
                                  startNext(C.from(sources[index++]));
                                }
                              }
                            });
                          }
                          startNext(_this5);
                          return function() {
                            if (subscription) {
                              subscription.unsubscribe();
                              subscription = void 0;
                            }
                          };
                        });
                      }
                    }, {
                      key: "flatMap",
                      value: function flatMap(fn) {
                        var _this6 = this;
                        if (typeof fn !== "function") throw new TypeError(fn + " is not a function");
                        var C = getSpecies(this);
                        return new C(function(observer2) {
                          var subscriptions = [];
                          var outer = _this6.subscribe({
                            next: function(value) {
                              if (fn) {
                                try {
                                  value = fn(value);
                                } catch (e) {
                                  return observer2.error(e);
                                }
                              }
                              var inner = C.from(value).subscribe({
                                next: function(value2) {
                                  observer2.next(value2);
                                },
                                error: function(e) {
                                  observer2.error(e);
                                },
                                complete: function() {
                                  var i = subscriptions.indexOf(inner);
                                  if (i >= 0) subscriptions.splice(i, 1);
                                  completeIfDone();
                                }
                              });
                              subscriptions.push(inner);
                            },
                            error: function(e) {
                              observer2.error(e);
                            },
                            complete: function() {
                              completeIfDone();
                            }
                          });
                          function completeIfDone() {
                            if (outer.closed && subscriptions.length === 0) observer2.complete();
                          }
                          return function() {
                            subscriptions.forEach(function(s) {
                              return s.unsubscribe();
                            });
                            outer.unsubscribe();
                          };
                        });
                      }
                    }, {
                      key: SymbolObservable,
                      value: function() {
                        return this;
                      }
                    }], [{
                      key: "from",
                      value: function from(x) {
                        var C = typeof this === "function" ? this : Observable2;
                        if (x == null) throw new TypeError(x + " is not an object");
                        var method = getMethod(x, SymbolObservable);
                        if (method) {
                          var observable = method.call(x);
                          if (Object(observable) !== observable) throw new TypeError(observable + " is not an object");
                          if (isObservable(observable) && observable.constructor === C) return observable;
                          return new C(function(observer2) {
                            return observable.subscribe(observer2);
                          });
                        }
                        if (hasSymbol("iterator")) {
                          method = getMethod(x, SymbolIterator);
                          if (method) {
                            return new C(function(observer2) {
                              enqueue(function() {
                                if (observer2.closed) return;
                                var _iteratorNormalCompletion = true;
                                var _didIteratorError = false;
                                var _iteratorError = void 0;
                                try {
                                  for (var _iterator = method.call(x)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                                    var _item = _step.value;
                                    observer2.next(_item);
                                    if (observer2.closed) return;
                                  }
                                } catch (err) {
                                  _didIteratorError = true;
                                  _iteratorError = err;
                                } finally {
                                  try {
                                    if (!_iteratorNormalCompletion && _iterator.return != null) {
                                      _iterator.return();
                                    }
                                  } finally {
                                    if (_didIteratorError) {
                                      throw _iteratorError;
                                    }
                                  }
                                }
                                observer2.complete();
                              });
                            });
                          }
                        }
                        if (Array.isArray(x)) {
                          return new C(function(observer2) {
                            enqueue(function() {
                              if (observer2.closed) return;
                              for (var i = 0; i < x.length; ++i) {
                                observer2.next(x[i]);
                                if (observer2.closed) return;
                              }
                              observer2.complete();
                            });
                          });
                        }
                        throw new TypeError(x + " is not observable");
                      }
                    }, {
                      key: "of",
                      value: function of() {
                        for (var _len2 = arguments.length, items = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                          items[_key2] = arguments[_key2];
                        }
                        var C = typeof this === "function" ? this : Observable2;
                        return new C(function(observer2) {
                          enqueue(function() {
                            if (observer2.closed) return;
                            for (var i = 0; i < items.length; ++i) {
                              observer2.next(items[i]);
                              if (observer2.closed) return;
                            }
                            observer2.complete();
                          });
                        });
                      }
                    }, {
                      key: SymbolSpecies,
                      get: function() {
                        return this;
                      }
                    }]);
                    return Observable2;
                  })();
                  exports2.Observable = Observable;
                  if (hasSymbols()) {
                    Object.defineProperty(Observable, Symbol("extensions"), {
                      value: {
                        symbol: SymbolObservable,
                        hostReportError
                      },
                      configurable: true
                    });
                  }
                })
              ),
              /***/
              2118: (
                /***/
                ((module2) => {
                  var zipObject = function(keys, values) {
                    if (arguments.length == 1) {
                      values = keys[1];
                      keys = keys[0];
                    }
                    var result = {};
                    var i = 0;
                    for (i; i < keys.length; i += 1) {
                      result[keys[i]] = values[i];
                    }
                    return result;
                  };
                  module2.exports = zipObject;
                })
              ),
              /***/
              6332: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA/dpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAzMjIxMUU0REM1MTExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1QzhERjZDREM1MDExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIElsbHVzdHJhdG9yIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzliZDBjZTYtYWVjMy00NWZkLThkOTktMzJhOTNhMTkxZGM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmQ4ZGVjMWJhLTk5NGEtNGViMC04NzE4LTdhMGJkN2FlOGY4OCIvPiA8ZGM6dGl0bGU+IDxyZGY6QWx0PiA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPmdseXBoaWNvbnM8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnRpdGxlPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvfrd2cAAANXSURBVHja5JrPaxNBFMe72wj1lFM8pNUcelLaQFLJRYptDgVBBe9F/BdyzV8h6bWQq0iKQQWhl1psL14VPPQUtErbS3owpIhdv6Mvsl1m3rz9FZv1wZeBdHbmfTozb2fejuN53lSS5jhOCcVNSJUFaJr+9BM6gXrQJ/TbS7LfXAKO51E8gB5Cd6FrwueOUexCL6FXADuN5YgakSiClaE2NFDNxNSA2ipH9icCwDy0BZ0nABDUObU9nxoITcMmNEwBIKgh9ZVLFARWhPbHABCU6rOYCAhsCfr2DyBGUn0v2fx0uPCLyLKK4gWUF8aOr9Ab+k9+hD7TNFE2A81Bi9Ad6B6NtMRURHsEX3dCRy0aib5wgXahOuSGWHMuPdMVBo4+NzLcmpBMp3dQJWrI9PVXgfaE06woAqHoZFvYZ1BDzb64EL5+HWrzTBAAchKQpmCIl5MC0PS/LJjSTRaEXnZDC8RCWhA+PxYsMMPgSzPYwJZlOi0za6oFVUM4W4WeGuf8n5HhpllHC0J7Jy56NAwdzkIHvhGrCSBqvv+4enbWUK9hiZZlHUjbEp0cC4QngQlAeBwMBQAumrUvgNALb8CQV4QQLIwBwgZTYWaK8jnvB1lnqLuGNXEgiG41IYQfpqjpr8s8s+4Hec5UrGsabgn3SX0CqAl3CUobmv7qTP1nfpAjQ6VD3baDIk4/BEyYurcN25lDwzNHo/1iiWl4M+SijSNbkNhkni25lCgw2T6z2XyPYo12pnFNtbFGbYb2RTG4NCIm+2A57ycBI4Gw+fJ7RApMhS+C5EUcGCmEzZeCArnCVBgKMzFRYMJA2HyZdullY/RxajLMdSkDaLKrwmSbimDbIY7Eo93ENj0rsRnmbz9cSmOabC4liCgwnC8nLuViTbaYIkRYGM6XXmZeiJdxi1KNskVxaWjeGoZM7XJXNL8/Fk6nUwrL0tCs2nyi+X2FyYHt/M1rZWkbP6kHq+8XDlaCo+7eRBx1M5V8iJkOUjAbukORJR3USjwdlKkEXWZSpplKYmfms8KkfugZ16c3j84212khj+/T26R9DP1/Pk9n6sKA5qXZSfEKRyfVKxyX/VKNE/e+lu+a031oVXrNCXZMh6LXSVxzclK4eHYDxa1xXzz7JcAA2eNXdJTLzjAAAAAASUVORK5CYII=";
                })
              ),
              /***/
              6948: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAA30lEQVR4Ae3RO04EMRgE4Q45hlkuxWMPCwdBLNxjZQJPNBkq4U7qm9x/lyb6A0mSJEmSJEmS9NB/iXjKV57DJdd8ZmSzS34yc+cJueaemVvG/vnzSODz596ES77XUZxwzN+b8HjM5wlva/7uhI91DCes+efvPf9u5AYSTvMbfwAm9OfzhNf2fJbQn48S+vNRQn8+SujPRwn9+SjhpT+fJPTno4T+fJTQnw8T+PxyAp/fT+Dz+wl8fj+Bz28n8PnVBD6/msDnVxP4/GoCn99MYPP7xmm+JEmSJEmSJEmSfgG9E96X0mx7vAAAAABJRU5ErkJggg==";
                })
              ),
              /***/
              6306: (
                /***/
                ((module2) => {
                  "use strict";
                  module2.exports = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI2cHgiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDYgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Q29tYmluZWQgU2hhcGU8L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+PC9kZWZzPiAgICA8ZyBpZD0iRkluYWxzLSoqSmFuLTkqKiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iU2lkZWJhci1jbG9zZWQtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIC0xNC4wMDAwMDApIiBmaWxsPSIjQUFBQUFBIj4gICAgICAgICAgICA8ZyBpZD0iU2lkZWJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgPGcgaWQ9IkJveC1pbmZvLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcmlwcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAxNC41MDAwMDApIj4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC42NjY2NjY2NjcsNS40MTY2NjY2NyBDMC42NjY2NjY2NjcsNC44NjQzODE5MiAxLjExMDUzMTQ5LDQuNDE2NjY2NjcgMS42NjY2NjY2Nyw0LjQxNjY2NjY3IEMyLjIxODk1MTQyLDQuNDE2NjY2NjcgMi42NjY2NjY2Nyw0Ljg2MDUzMTQ5IDIuNjY2NjY2NjcsNS40MTY2NjY2NyBDMi42NjY2NjY2Nyw1Ljk2ODk1MTQyIDIuMjIyODAxODQsNi40MTY2NjY2NyAxLjY2NjY2NjY3LDYuNDE2NjY2NjcgQzEuMTE0MzgxOTIsNi40MTY2NjY2NyAwLjY2NjY2NjY2Nyw1Ljk3MjgwMTg0IDAuNjY2NjY2NjY3LDUuNDE2NjY2NjcgWiBNMC42NjY2NjY2NjcsMS4yNSBDMC42NjY2NjY2NjcsMC42OTc3MTUyNSAxLjExMDUzMTQ5LDAuMjUgMS42NjY2NjY2NywwLjI1IEMyLjIxODk1MTQyLDAuMjUgMi42NjY2NjY2NywwLjY5Mzg2NDgyMiAyLjY2NjY2NjY3LDEuMjUgQzIuNjY2NjY2NjcsMS44MDIyODQ3NSAyLjIyMjgwMTg0LDIuMjUgMS42NjY2NjY2NywyLjI1IEMxLjExNDM4MTkyLDIuMjUgMC42NjY2NjY2NjcsMS44MDYxMzUxOCAwLjY2NjY2NjY2NywxLjI1IFogTTAuNjY2NjY2NjY3LDkuNTgzMzMzMzMgQzAuNjY2NjY2NjY3LDkuMDMxMDQ4NTggMS4xMTA1MzE0OSw4LjU4MzMzMzMzIDEuNjY2NjY2NjcsOC41ODMzMzMzMyBDMi4yMTg5NTE0Miw4LjU4MzMzMzMzIDIuNjY2NjY2NjcsOS4wMjcxOTgxNiAyLjY2NjY2NjY3LDkuNTgzMzMzMzMgQzIuNjY2NjY2NjcsMTAuMTM1NjE4MSAyLjIyMjgwMTg0LDEwLjU4MzMzMzMgMS42NjY2NjY2NywxMC41ODMzMzMzIEMxLjExNDM4MTkyLDEwLjU4MzMzMzMgMC42NjY2NjY2NjcsMTAuMTM5NDY4NSAwLjY2NjY2NjY2Nyw5LjU4MzMzMzMzIFogTTMuMzAwMDAwMTksMS4yNSBDMy4zMDAwMDAxOSwwLjY5NzcxNTI1IDMuNzQzODY1MDEsMC4yNSA0LjMwMDAwMDE5LDAuMjUgQzQuODUyMjg0OTQsMC4yNSA1LjMwMDAwMDE5LDAuNjkzODY0ODIyIDUuMzAwMDAwMTksMS4yNSBDNS4zMDAwMDAxOSwxLjgwMjI4NDc1IDQuODU2MTM1MzcsMi4yNSA0LjMwMDAwMDE5LDIuMjUgQzMuNzQ3NzE1NDQsMi4yNSAzLjMwMDAwMDE5LDEuODA2MTM1MTggMy4zMDAwMDAxOSwxLjI1IFogTTMuMzAwMDAwMTksNS40MTY2NjY2NyBDMy4zMDAwMDAxOSw0Ljg2NDM4MTkyIDMuNzQzODY1MDEsNC40MTY2NjY2NyA0LjMwMDAwMDE5LDQuNDE2NjY2NjcgQzQuODUyMjg0OTQsNC40MTY2NjY2NyA1LjMwMDAwMDE5LDQuODYwNTMxNDkgNS4zMDAwMDAxOSw1LjQxNjY2NjY3IEM1LjMwMDAwMDE5LDUuOTY4OTUxNDIgNC44NTYxMzUzNyw2LjQxNjY2NjY3IDQuMzAwMDAwMTksNi40MTY2NjY2NyBDMy43NDc3MTU0NCw2LjQxNjY2NjY3IDMuMzAwMDAwMTksNS45NzI4MDE4NCAzLjMwMDAwMDE5LDUuNDE2NjY2NjcgWiBNMy4zMDAwMDAxOSw5LjU4MzMzMzMzIEMzLjMwMDAwMDE5LDkuMDMxMDQ4NTggMy43NDM4NjUwMSw4LjU4MzMzMzMzIDQuMzAwMDAwMTksOC41ODMzMzMzMyBDNC44NTIyODQ5NCw4LjU4MzMzMzMzIDUuMzAwMDAwMTksOS4wMjcxOTgxNiA1LjMwMDAwMDE5LDkuNTgzMzMzMzMgQzUuMzAwMDAwMTksMTAuMTM1NjE4MSA0Ljg1NjEzNTM3LDEwLjU4MzMzMzMgNC4zMDAwMDAxOSwxMC41ODMzMzMzIEMzLjc0NzcxNTQ0LDEwLjU4MzMzMzMgMy4zMDAwMDAxOSwxMC4xMzk0Njg1IDMuMzAwMDAwMTksOS41ODMzMzMzMyBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==";
                })
              ),
              /***/
              8915: (
                /***/
                ((module2) => {
                  function _arrayLikeToArray(arr, len) {
                    if (len == null || len > arr.length) len = arr.length;
                    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];
                    return arr2;
                  }
                  module2.exports = _arrayLikeToArray, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              3783: (
                /***/
                ((module2) => {
                  function _arrayWithHoles(arr) {
                    if (Array.isArray(arr)) return arr;
                  }
                  module2.exports = _arrayWithHoles, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              7111: (
                /***/
                ((module2) => {
                  function _assertThisInitialized(self2) {
                    if (self2 === void 0) {
                      throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    }
                    return self2;
                  }
                  module2.exports = _assertThisInitialized, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              9131: (
                /***/
                ((module2) => {
                  function _classCallCheck(instance, Constructor) {
                    if (!(instance instanceof Constructor)) {
                      throw new TypeError("Cannot call a class as a function");
                    }
                  }
                  module2.exports = _classCallCheck, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              8463: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var toPropertyKey = __webpack_require__2(4676);
                  function _defineProperties(target, props) {
                    for (var i = 0; i < props.length; i++) {
                      var descriptor = props[i];
                      descriptor.enumerable = descriptor.enumerable || false;
                      descriptor.configurable = true;
                      if ("value" in descriptor) descriptor.writable = true;
                      Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);
                    }
                  }
                  function _createClass(Constructor, protoProps, staticProps) {
                    if (protoProps) _defineProperties(Constructor.prototype, protoProps);
                    if (staticProps) _defineProperties(Constructor, staticProps);
                    Object.defineProperty(Constructor, "prototype", {
                      writable: false
                    });
                    return Constructor;
                  }
                  module2.exports = _createClass, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              5985: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var toPropertyKey = __webpack_require__2(4676);
                  function _defineProperty(obj, key, value) {
                    key = toPropertyKey(key);
                    if (key in obj) {
                      Object.defineProperty(obj, key, {
                        value,
                        enumerable: true,
                        configurable: true,
                        writable: true
                      });
                    } else {
                      obj[key] = value;
                    }
                    return obj;
                  }
                  module2.exports = _defineProperty, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              4718: (
                /***/
                ((module2) => {
                  function _extends() {
                    module2.exports = _extends = Object.assign ? Object.assign.bind() : function(target) {
                      for (var i = 1; i < arguments.length; i++) {
                        var source = arguments[i];
                        for (var key in source) {
                          if (Object.prototype.hasOwnProperty.call(source, key)) {
                            target[key] = source[key];
                          }
                        }
                      }
                      return target;
                    }, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                    return _extends.apply(this, arguments);
                  }
                  module2.exports = _extends, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              2132: (
                /***/
                ((module2) => {
                  function _getPrototypeOf(o) {
                    module2.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf2(o2) {
                      return o2.__proto__ || Object.getPrototypeOf(o2);
                    }, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                    return _getPrototypeOf(o);
                  }
                  module2.exports = _getPrototypeOf, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              5075: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var setPrototypeOf = __webpack_require__2(5344);
                  function _inherits(subClass, superClass) {
                    if (typeof superClass !== "function" && superClass !== null) {
                      throw new TypeError("Super expression must either be null or a function");
                    }
                    subClass.prototype = Object.create(superClass && superClass.prototype, {
                      constructor: {
                        value: subClass,
                        writable: true,
                        configurable: true
                      }
                    });
                    Object.defineProperty(subClass, "prototype", {
                      writable: false
                    });
                    if (superClass) setPrototypeOf(subClass, superClass);
                  }
                  module2.exports = _inherits, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              1654: (
                /***/
                ((module2) => {
                  function _interopRequireDefault(obj) {
                    return obj && obj.__esModule ? obj : {
                      "default": obj
                    };
                  }
                  module2.exports = _interopRequireDefault, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              9485: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var _typeof = __webpack_require__2(2990)["default"];
                  function _getRequireWildcardCache(nodeInterop) {
                    if (typeof WeakMap !== "function") return null;
                    var cacheBabelInterop = /* @__PURE__ */ new WeakMap();
                    var cacheNodeInterop = /* @__PURE__ */ new WeakMap();
                    return (_getRequireWildcardCache = function _getRequireWildcardCache2(nodeInterop2) {
                      return nodeInterop2 ? cacheNodeInterop : cacheBabelInterop;
                    })(nodeInterop);
                  }
                  function _interopRequireWildcard(obj, nodeInterop) {
                    if (!nodeInterop && obj && obj.__esModule) {
                      return obj;
                    }
                    if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {
                      return {
                        "default": obj
                      };
                    }
                    var cache = _getRequireWildcardCache(nodeInterop);
                    if (cache && cache.has(obj)) {
                      return cache.get(obj);
                    }
                    var newObj = {};
                    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
                    for (var key in obj) {
                      if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
                        var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
                        if (desc && (desc.get || desc.set)) {
                          Object.defineProperty(newObj, key, desc);
                        } else {
                          newObj[key] = obj[key];
                        }
                      }
                    }
                    newObj["default"] = obj;
                    if (cache) {
                      cache.set(obj, newObj);
                    }
                    return newObj;
                  }
                  module2.exports = _interopRequireWildcard, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              4067: (
                /***/
                ((module2) => {
                  function _iterableToArrayLimit(r, l) {
                    var t2 = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"];
                    if (null != t2) {
                      var e, n, i, u, a = [], f = true, o = false;
                      try {
                        if (i = (t2 = t2.call(r)).next, 0 === l) {
                          if (Object(t2) !== t2) return;
                          f = false;
                        } else for (; !(f = (e = i.call(t2)).done) && (a.push(e.value), a.length !== l); f = true) ;
                      } catch (r2) {
                        o = true, n = r2;
                      } finally {
                        try {
                          if (!f && null != t2["return"] && (u = t2["return"](), Object(u) !== u)) return;
                        } finally {
                          if (o) throw n;
                        }
                      }
                      return a;
                    }
                  }
                  module2.exports = _iterableToArrayLimit, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              9340: (
                /***/
                ((module2) => {
                  function _nonIterableRest() {
                    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
                  }
                  module2.exports = _nonIterableRest, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              2595: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var defineProperty = __webpack_require__2(5985);
                  function _objectSpread(target) {
                    for (var i = 1; i < arguments.length; i++) {
                      var source = arguments[i] != null ? Object(arguments[i]) : {};
                      var ownKeys = Object.keys(source);
                      if (typeof Object.getOwnPropertySymbols === "function") {
                        ownKeys.push.apply(ownKeys, Object.getOwnPropertySymbols(source).filter(function(sym) {
                          return Object.getOwnPropertyDescriptor(source, sym).enumerable;
                        }));
                      }
                      ownKeys.forEach(function(key) {
                        defineProperty(target, key, source[key]);
                      });
                    }
                    return target;
                  }
                  module2.exports = _objectSpread, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              1059: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var objectWithoutPropertiesLoose = __webpack_require__2(5537);
                  function _objectWithoutProperties(source, excluded) {
                    if (source == null) return {};
                    var target = objectWithoutPropertiesLoose(source, excluded);
                    var key, i;
                    if (Object.getOwnPropertySymbols) {
                      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);
                      for (i = 0; i < sourceSymbolKeys.length; i++) {
                        key = sourceSymbolKeys[i];
                        if (excluded.indexOf(key) >= 0) continue;
                        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;
                        target[key] = source[key];
                      }
                    }
                    return target;
                  }
                  module2.exports = _objectWithoutProperties, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              5537: (
                /***/
                ((module2) => {
                  function _objectWithoutPropertiesLoose(source, excluded) {
                    if (source == null) return {};
                    var target = {};
                    var sourceKeys = Object.keys(source);
                    var key, i;
                    for (i = 0; i < sourceKeys.length; i++) {
                      key = sourceKeys[i];
                      if (excluded.indexOf(key) >= 0) continue;
                      target[key] = source[key];
                    }
                    return target;
                  }
                  module2.exports = _objectWithoutPropertiesLoose, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              5432: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var _typeof = __webpack_require__2(2990)["default"];
                  var assertThisInitialized = __webpack_require__2(7111);
                  function _possibleConstructorReturn(self2, call) {
                    if (call && (_typeof(call) === "object" || typeof call === "function")) {
                      return call;
                    } else if (call !== void 0) {
                      throw new TypeError("Derived constructors may only return object or undefined");
                    }
                    return assertThisInitialized(self2);
                  }
                  module2.exports = _possibleConstructorReturn, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              5344: (
                /***/
                ((module2) => {
                  function _setPrototypeOf(o, p) {
                    module2.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf2(o2, p2) {
                      o2.__proto__ = p2;
                      return o2;
                    }, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                    return _setPrototypeOf(o, p);
                  }
                  module2.exports = _setPrototypeOf, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              6583: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayWithHoles = __webpack_require__2(3783);
                  var iterableToArrayLimit = __webpack_require__2(4067);
                  var unsupportedIterableToArray = __webpack_require__2(6030);
                  var nonIterableRest = __webpack_require__2(9340);
                  function _slicedToArray(arr, i) {
                    return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();
                  }
                  module2.exports = _slicedToArray, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              8705: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var _typeof = __webpack_require__2(2990)["default"];
                  function _toPrimitive(input, hint) {
                    if (_typeof(input) !== "object" || input === null) return input;
                    var prim = input[Symbol.toPrimitive];
                    if (prim !== void 0) {
                      var res = prim.call(input, hint || "default");
                      if (_typeof(res) !== "object") return res;
                      throw new TypeError("@@toPrimitive must return a primitive value.");
                    }
                    return (hint === "string" ? String : Number)(input);
                  }
                  module2.exports = _toPrimitive, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              4676: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var _typeof = __webpack_require__2(2990)["default"];
                  var toPrimitive = __webpack_require__2(8705);
                  function _toPropertyKey(arg) {
                    var key = toPrimitive(arg, "string");
                    return _typeof(key) === "symbol" ? key : String(key);
                  }
                  module2.exports = _toPropertyKey, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              2990: (
                /***/
                ((module2) => {
                  function _typeof(o) {
                    "@babel/helpers - typeof";
                    return module2.exports = _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o2) {
                      return typeof o2;
                    } : function(o2) {
                      return o2 && "function" == typeof Symbol && o2.constructor === Symbol && o2 !== Symbol.prototype ? "symbol" : typeof o2;
                    }, module2.exports.__esModule = true, module2.exports["default"] = module2.exports, _typeof(o);
                  }
                  module2.exports = _typeof, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              ),
              /***/
              6030: (
                /***/
                ((module2, __unused_webpack_exports, __webpack_require__2) => {
                  var arrayLikeToArray = __webpack_require__2(8915);
                  function _unsupportedIterableToArray(o, minLen) {
                    if (!o) return;
                    if (typeof o === "string") return arrayLikeToArray(o, minLen);
                    var n = Object.prototype.toString.call(o).slice(8, -1);
                    if (n === "Object" && o.constructor) n = o.constructor.name;
                    if (n === "Map" || n === "Set") return Array.from(o);
                    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);
                  }
                  module2.exports = _unsupportedIterableToArray, module2.exports.__esModule = true, module2.exports["default"] = module2.exports;
                })
              )
              /******/
            };
            var __webpack_module_cache__ = {};
            function __webpack_require__(moduleId) {
              var cachedModule = __webpack_module_cache__[moduleId];
              if (cachedModule !== void 0) {
                return cachedModule.exports;
              }
              var module2 = __webpack_module_cache__[moduleId] = {
                /******/
                id: moduleId,
                /******/
                loaded: false,
                /******/
                exports: {}
                /******/
              };
              __webpack_modules__[moduleId].call(module2.exports, module2, module2.exports, __webpack_require__);
              module2.loaded = true;
              return module2.exports;
            }
            __webpack_require__.m = __webpack_modules__;
            (() => {
              __webpack_require__.n = (module2) => {
                var getter = module2 && module2.__esModule ? (
                  /******/
                  () => module2["default"]
                ) : (
                  /******/
                  () => module2
                );
                __webpack_require__.d(getter, { a: getter });
                return getter;
              };
            })();
            (() => {
              __webpack_require__.d = (exports2, definition) => {
                for (var key in definition) {
                  if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports2, key)) {
                    Object.defineProperty(exports2, key, { enumerable: true, get: definition[key] });
                  }
                }
              };
            })();
            (() => {
              __webpack_require__.g = (function() {
                if (typeof globalThis === "object") return globalThis;
                try {
                  return this || new Function("return this")();
                } catch (e) {
                  if (typeof window === "object") return window;
                }
              })();
            })();
            (() => {
              __webpack_require__.hmd = (module2) => {
                module2 = Object.create(module2);
                if (!module2.children) module2.children = [];
                Object.defineProperty(module2, "exports", {
                  /******/
                  enumerable: true,
                  /******/
                  set: () => {
                    throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: " + module2.id);
                  }
                  /******/
                });
                return module2;
              };
            })();
            (() => {
              __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
            })();
            (() => {
              __webpack_require__.r = (exports2) => {
                if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
                  Object.defineProperty(exports2, Symbol.toStringTag, { value: "Module" });
                }
                Object.defineProperty(exports2, "__esModule", { value: true });
              };
            })();
            (() => {
              __webpack_require__.nmd = (module2) => {
                module2.paths = [];
                if (!module2.children) module2.children = [];
                return module2;
              };
            })();
            (() => {
              __webpack_require__.b = document.baseURI || self.location.href;
              var installedChunks = {
                /******/
                551: 0
                /******/
              };
            })();
            (() => {
              __webpack_require__.nc = void 0;
            })();
            var __webpack_exports__ = {};
            (() => {
              "use strict";
              __webpack_require__.d(__webpack_exports__, {
                "default": () => (
                  /* binding */
                  inboxsdk_NONREMOTE
                )
              });
              var inboxsdk_namespaceObject = {};
              __webpack_require__.r(inboxsdk_namespaceObject);
              __webpack_require__.d(inboxsdk_namespaceObject, {
                LOADER_VERSION: () => LOADER_VERSION,
                load: () => load2,
                loadScript: () => inboxsdk_loadScript
              });
              var once = __webpack_require__(8921);
              var once_default = /* @__PURE__ */ __webpack_require__.n(once);
              ;
              function loadPi(delay) {
                return once_default()(() => new Promise((resolve, reject) => {
                  setTimeout(() => {
                    try {
                      Promise.resolve(
                        /* import() eager */
                      ).then(__webpack_require__.bind(__webpack_require__, 130)).then(() => resolve()).catch(reject);
                    } catch (e) {
                      reject(e);
                    }
                  }, delay);
                }));
              }
              ;
              class PlatformImplementationLoader {
                static async load(appId, opts) {
                  if (!globalThis.__InboxSDKImpLoader) {
                    await this.loadScript();
                    if (!globalThis.__InboxSDKImpLoader) {
                      throw new Error("Implementation file did not load correctly");
                    }
                  }
                  return globalThis.__InboxSDKImpLoader.load("0.1", appId, opts);
                }
                static async preload() {
                  this.loadScript();
                }
              }
              /**
               * This must be overridden by the entrypoint to the InboxSDK.
               * This is done so the npm (non-remote) build doesn't contain code for dynamically
               * loading the remote build, which may set off the Chrome Web Store review process
               * scanning for that.
               */
              __publicField(PlatformImplementationLoader, "loadScript", () => {
                throw new Error("Unexpected error: This function must be overridden");
              });
              ;
              PlatformImplementationLoader.loadScript = loadPi(500);
              var version = __webpack_require__(4782);
              ;
              let loadScript = () => {
                throw new Error("This function is not usable in Chrome MV3 extensions");
              };
              function setLoadScript(fn) {
                loadScript = fn;
              }
              ;
              const LOADER_VERSION = version.Q;
              function inboxsdk_loadScript(url, opts) {
                return loadScript(url, opts);
              }
              function load2(version2, appId, opts) {
                opts = Object.assign({
                  // defaults
                  globalErrorLogging: true
                }, opts, {
                  // stuff that can't be overridden, such as extra stuff this file passes to
                  // the implementation script.
                  VERSION: LOADER_VERSION,
                  REQUESTED_API_VERSION: version2
                });
                return PlatformImplementationLoader.load(appId, opts);
              }
              const pageOrigin = document.location.origin;
              if ("https://mail.google.com" === pageOrigin) {
                PlatformImplementationLoader.preload();
              }
              ;
              const inboxsdk_NONREMOTE = inboxsdk_namespaceObject;
            })();
            __webpack_exports__ = __webpack_exports__["default"];
            return __webpack_exports__;
          })()
        );
      });
    }
  });

  // src/content.ts
  var InboxSDK = __toESM(require_inboxsdk());

  // src/utils/storage.ts
  var DEFAULT_SETTINGS = {
    tabs: [],
    theme: "system",
    showUnreadCount: true
  };
  function getAccountKey(accountId) {
    return `account_${accountId}`;
  }
  function checkRuntimeError(reject) {
    if (chrome.runtime.lastError) {
      const msg = chrome.runtime.lastError.message;
      console.warn("Gmail Tabs: Storage Error:", msg);
      if (msg && msg.includes("Extension context invalidated")) {
        console.error("Gmail Tabs: Extension context invalidated. Please refresh the page.");
        reject(new Error("Extension context invalidated"));
      } else {
        reject(new Error(msg));
      }
      return true;
    }
    return false;
  }
  async function getSettings(accountId) {
    return new Promise((resolve, reject) => {
      const key = getAccountKey(accountId);
      try {
        chrome.storage.sync.get([key], (items) => {
          if (checkRuntimeError(reject)) return;
          const stored = items[key];
          const settings = { ...DEFAULT_SETTINGS, ...stored };
          resolve(settings);
        });
      } catch (e) {
        console.warn("Gmail Tabs: Storage call failed", e);
        reject(e);
      }
    });
  }
  async function saveSettings(accountId, newSettings) {
    try {
      const currentSettings2 = await getSettings(accountId);
      const mergedSettings = { ...currentSettings2, ...newSettings };
      const key = getAccountKey(accountId);
      return new Promise((resolve, reject) => {
        try {
          chrome.storage.sync.set({ [key]: mergedSettings }, () => {
            if (checkRuntimeError(reject)) return;
            resolve();
          });
        } catch (e) {
          reject(e);
        }
      });
    } catch (e) {
      console.warn("Gmail Tabs: Save settings failed", e);
      throw e;
    }
  }
  async function addTab(accountId, title, value, type = "label") {
    const settings = await getSettings(accountId);
    const newTab = {
      id: crypto.randomUUID(),
      title: title.trim(),
      value: value.trim(),
      type
    };
    if (!settings.tabs.some((t2) => t2.value === newTab.value)) {
      settings.tabs.push(newTab);
      await saveSettings(accountId, settings);
    }
  }
  async function removeTab(accountId, tabId) {
    const settings = await getSettings(accountId);
    console.log(`Gmail Tabs: Removing tab ${tabId} from account ${accountId}`);
    const initialLength = settings.tabs.length;
    settings.tabs = settings.tabs.filter((t2) => {
      const match = t2.id === tabId;
      if (match) console.log(`Gmail Tabs: Found tab to remove: ${t2.title} (${t2.id})`);
      return !match;
    });
    if (settings.tabs.length === initialLength) {
      console.warn(`Gmail Tabs: Failed to find tab with ID ${tabId} to remove. Available IDs:`, settings.tabs.map((t2) => t2.id));
    } else {
      console.log(`Gmail Tabs: Tab removed. New count: ${settings.tabs.length}`);
    }
    await saveSettings(accountId, settings);
  }
  async function updateTab(accountId, tabId, updates) {
    const settings = await getSettings(accountId);
    const index = settings.tabs.findIndex((t2) => t2.id === tabId);
    if (index !== -1) {
      settings.tabs[index] = { ...settings.tabs[index], ...updates };
      await saveSettings(accountId, settings);
    }
  }
  async function updateTabOrder(accountId, newTabs) {
    const settings = await getSettings(accountId);
    settings.tabs = newTabs;
    await saveSettings(accountId, settings);
  }
  async function migrateLegacySettingsIfNeeded(accountId) {
    const key = getAccountKey(accountId);
    const exists = await new Promise((resolve) => {
      chrome.storage.sync.get(key, (items) => {
        resolve(!!items[key]);
      });
    });
    if (exists) return;
    chrome.storage.sync.get(["tabs", "labels", "theme", "showUnreadCount"], async (items) => {
      if (items.tabs || items.labels) {
        console.log(`Migrating legacy settings to account: ${accountId}`);
        let tabs = items.tabs || [];
        if (items.labels && (!tabs || tabs.length === 0)) {
          tabs = items.labels.map((l) => ({
            id: l.id,
            title: l.displayName || l.name,
            type: "label",
            value: l.name
          }));
        }
        const newSettings = {
          tabs,
          theme: items.theme || "system",
          showUnreadCount: items.showUnreadCount !== void 0 ? items.showUnreadCount : true
        };
        await saveSettings(accountId, newSettings);
      }
    });
  }

  // src/content.ts
  var APP_ID = "sdk_Gmail-Tabs_2488593e74";
  var TOOLBAR_SELECTORS = [
    ".G-atb",
    // Main toolbar container (often has this class)
    ".aeF > div:first-child"
    // Fallback
  ];
  var TABS_BAR_ID = "gmail-labels-as-tabs-bar";
  var MODAL_ID = "gmail-labels-settings-modal";
  var currentSettings = null;
  var observer = null;
  var currentSdk = null;
  var currentUserEmail = null;
  async function init() {
    console.log("Gmail Tabs: Initializing...");
    injectPageWorld();
    initializeFromDOM();
    loadInboxSDK();
    attemptInjection();
    startObserver();
    window.addEventListener("popstate", handleUrlChange);
    chrome.storage.onChanged.addListener((changes, area) => {
      if (area === "sync") {
        console.log("Gmail Tabs: Storage changed", changes);
        if (currentUserEmail) {
          const accountKey = `account_${currentUserEmail}`;
          const relevantKeys = [accountKey, "theme", "tabs", "labels"];
          const hasRelevantChange = Object.keys(changes).some((k) => relevantKeys.includes(k));
          if (hasRelevantChange) {
            getSettings(currentUserEmail).then((settings) => {
              currentSettings = settings;
              console.log("Gmail Tabs: Reloaded settings for", currentUserEmail, currentSettings);
              renderTabs();
              if (changes.theme) {
                applyTheme(currentSettings.theme);
              }
            });
          }
        }
      }
    });
    chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
      if (message.action === "TOGGLE_SETTINGS") {
        toggleSettingsModal();
      } else if (message.action === "GET_ACCOUNT_INFO") {
        sendResponse({ account: currentUserEmail });
      }
    });
    document.addEventListener("gmailTabs:unreadUpdate", (e) => {
      const updates = e.detail;
      if (updates && Array.isArray(updates)) {
        handleUnreadUpdates(updates);
      }
    });
  }
  async function initializeFromDOM() {
    console.log("Gmail Tabs: Starting DOM-based initialization...");
    let email = extractEmailFromDOM();
    if (email) {
      console.log("Gmail Tabs: Email found immediately:", email);
      if (!currentUserEmail) {
        currentUserEmail = email;
        await finalizeInit(email);
      }
    } else {
      console.log("Gmail Tabs: Email not found yet, polling DOM...");
      const accountPoller = setInterval(async () => {
        email = extractEmailFromDOM();
        if (email) {
          console.log("Gmail Tabs: Account detected via polling:", email);
          clearInterval(accountPoller);
          if (!currentUserEmail) {
            currentUserEmail = email;
            await finalizeInit(email);
          }
        }
      }, 1e3);
      setTimeout(() => clearInterval(accountPoller), 6e4);
    }
  }
  async function loadInboxSDK() {
    try {
      console.log("Gmail Tabs: Attempting to load InboxSDK (Background)...");
      const sdk = await InboxSDK.load(2, APP_ID);
      currentSdk = sdk;
      console.log("Gmail Tabs: InboxSDK loaded.");
      if (!currentUserEmail) {
        const sdkEmail = sdk.User.getEmailAddress();
        console.log("Gmail Tabs: Got email from SDK:", sdkEmail);
        currentUserEmail = sdkEmail;
        await finalizeInit(currentUserEmail);
      }
      currentSdk.Router.handleAllRoutes((routeView) => {
        updateActiveTab();
      });
    } catch (err) {
      console.warn("Gmail Tabs: InboxSDK failed to load (Non-fatal):", err);
    }
  }
  function injectPageWorld() {
    const script = document.createElement("script");
    script.src = chrome.runtime.getURL("js/xhrInterceptor.js");
    script.onload = function() {
      this.remove();
    };
    (document.head || document.documentElement).appendChild(script);
  }
  function buildLabelMapFromDOM() {
    const map = /* @__PURE__ */ new Map();
    const labelLinks = document.querySelectorAll('a[href*="#label/"]');
    labelLinks.forEach((link) => {
      const href = link.getAttribute("href");
      if (!href) return;
      const rawId = href.split("#label/")[1];
      if (!rawId) return;
      const id = decodeURIComponent(rawId).replace(/\+/g, " ");
      let title = link.getAttribute("title");
      if (!title) {
        const childWithTitle = link.querySelector("[title]");
        if (childWithTitle) {
          title = childWithTitle.getAttribute("title");
        }
      }
      if (!title) {
        const ariaLabel = link.getAttribute("aria-label");
        if (ariaLabel) {
          title = ariaLabel.split(",")[0];
        }
      }
      if (title) {
        map.set(title.toLowerCase(), id);
        map.set(id.toLowerCase(), id);
      }
    });
    console.log("Gmail Tabs: Built DOM Label Map (Size: " + map.size + ")");
    return map;
  }
  function handleUnreadUpdates(updates) {
    console.log("Gmail Tabs: Received unread updates", updates);
    const updateMap = /* @__PURE__ */ new Map();
    updates.forEach((u) => updateMap.set(u.label, u.count));
    const domLabelMap = buildLabelMapFromDOM();
    const normalize = (str) => str.toLowerCase().replace(/[^a-z0-9]/g, "");
    const bar = document.getElementById(TABS_BAR_ID);
    if (!bar) return;
    const tabs = bar.querySelectorAll(".gmail-tab");
    tabs.forEach((t2) => {
      const tabEl = t2;
      const tabValue = tabEl.dataset.value;
      const tabType = tabEl.dataset.type;
      if (!tabValue) return;
      let labelId = "";
      if (tabType === "label") {
        labelId = tabValue;
      } else if (tabType === "hash") {
        if (tabValue === "#inbox") labelId = "^i";
        else if (tabValue === "#starred") labelId = "^t";
        else if (tabValue === "#drafts") labelId = "^r";
        else if (tabValue === "#sent") labelId = "^f";
        else if (tabValue === "#spam") labelId = "^s";
        else if (tabValue === "#trash") labelId = "^k";
        else if (tabValue === "#all") labelId = "^all";
        else if (tabValue.startsWith("#label/")) {
          labelId = decodeURIComponent(tabValue.replace("#label/", "").replace(/\+/g, " "));
        } else if (tabValue.startsWith("#search/label:")) {
          const raw = decodeURIComponent(tabValue.replace("#search/", ""));
          if (raw.startsWith("label:")) {
            labelId = raw.replace("label:", "");
          }
        }
      }
      let resolvedId = labelId;
      if (domLabelMap.has(labelId.toLowerCase())) {
        resolvedId = domLabelMap.get(labelId.toLowerCase()) || labelId;
      }
      let count = updateMap.get(resolvedId);
      if (count === void 0 && resolvedId && !resolvedId.startsWith("^")) {
        const normalizedTarget = normalize(resolvedId);
        for (const [key, val] of updateMap.entries()) {
          const normalizedKey = normalize(key);
          if (normalizedKey === normalizedTarget) {
            count = val;
            break;
          }
        }
      }
      if (count !== void 0) {
        const countSpan = tabEl.querySelector(".unread-count");
        if (countSpan) {
          countSpan.textContent = count > 0 ? count.toString() : "";
        }
      }
    });
  }
  async function finalizeInit(email) {
    console.log("Gmail Tabs: Finalizing init for", email);
    try {
      await migrateLegacySettingsIfNeeded(email);
      console.log("Gmail Tabs: Migration check complete");
      currentSettings = await getSettings(email);
      console.log("Gmail Tabs: Settings loaded for", email, currentSettings);
      renderTabs();
      applyTheme(currentSettings.theme);
    } catch (e) {
      console.error("Gmail Tabs: Error in finalizeInit", e);
    }
  }
  function extractEmailFromDOM() {
    console.log("Gmail Tabs: Extracting email from DOM...");
    const title = document.title;
    console.log("Gmail Tabs: Document Title:", title);
    const emailRegex = /([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})/;
    const titleMatch = title.match(emailRegex);
    if (titleMatch) {
      console.log("Gmail Tabs: Found email in title:", titleMatch[1]);
      return titleMatch[1];
    }
    const accountElement = document.querySelector('[aria-label*="@"][aria-label*="Google Account"], a[aria-label*="@"]');
    if (accountElement) {
      const label = accountElement.getAttribute("aria-label");
      console.log("Gmail Tabs: Found account element label:", label);
      const emailMatch = label?.match(emailRegex);
      if (emailMatch) {
        console.log("Gmail Tabs: Found email in aria-label:", emailMatch[1]);
        return emailMatch[1];
      }
    }
    console.log("Gmail Tabs: Could not extract email from DOM.");
    return null;
  }
  function attemptInjection() {
    const existingBar = document.getElementById(TABS_BAR_ID);
    let injectionPoint = null;
    for (const selector of TOOLBAR_SELECTORS) {
      const candidates = document.querySelectorAll(selector);
      for (const el of candidates) {
        if (el.getBoundingClientRect().height > 0) {
          injectionPoint = el;
          break;
        }
      }
      if (injectionPoint) break;
    }
    if (injectionPoint) {
      if (!existingBar) {
        const tabsBar = createTabsBar();
        injectionPoint.insertAdjacentElement("afterend", tabsBar);
        renderTabs();
      } else if (existingBar.previousElementSibling !== injectionPoint) {
        injectionPoint.insertAdjacentElement("afterend", existingBar);
      }
      updateActiveTab();
    } else {
      setTimeout(attemptInjection, 500);
    }
  }
  function createTabsBar() {
    const bar = document.createElement("div");
    bar.id = TABS_BAR_ID;
    bar.className = "gmail-tabs-bar";
    return bar;
  }
  var dragSrcEl = null;
  function handleDragStart(e) {
    dragSrcEl = this;
    this.classList.add("dragging");
    if (e.dataTransfer) {
      e.dataTransfer.effectAllowed = "move";
      e.dataTransfer.setData("text/plain", this.dataset.index || "");
    }
  }
  function handleDragOver(e) {
    if (e.preventDefault) {
      e.preventDefault();
    }
    if (e.dataTransfer) {
      e.dataTransfer.dropEffect = "move";
    }
    const rect = this.getBoundingClientRect();
    const relX = e.clientX - rect.left;
    const width = rect.width;
    this.classList.remove("drop-before", "drop-after");
    if (relX < width / 2) {
      this.classList.add("drop-before");
    } else {
      this.classList.add("drop-after");
    }
    return false;
  }
  function handleDragEnter(e) {
    this.classList.add("drag-over");
  }
  function handleDragLeave(e) {
    if (this.contains(e.relatedTarget)) return;
    this.classList.remove("drag-over", "drop-before", "drop-after");
  }
  async function handleDrop(e) {
    if (e.stopPropagation) {
      e.stopPropagation();
    }
    const dropPosition = this.classList.contains("drop-before") ? "before" : "after";
    this.classList.remove("drag-over", "drop-before", "drop-after");
    if (dragSrcEl !== this) {
      const oldIndex = parseInt(dragSrcEl.dataset.index || "0");
      let newIndex = parseInt(this.dataset.index || "0");
      if (dropPosition === "after") {
        newIndex++;
      }
      if (currentSettings && currentUserEmail) {
        const tabs = [...currentSettings.tabs];
        const [movedTab] = tabs.splice(oldIndex, 1);
        if (oldIndex < newIndex) {
          newIndex--;
        }
        tabs.splice(newIndex, 0, movedTab);
        currentSettings.tabs = tabs;
        renderTabs();
        await updateTabOrder(currentUserEmail, tabs);
      }
    }
    return false;
  }
  function handleDragEnd(e) {
    dragSrcEl = null;
    document.querySelectorAll(".gmail-tab").forEach((item) => {
      item.classList.remove("drag-over", "dragging", "drop-before", "drop-after");
    });
  }
  function renderTabs() {
    const bar = document.getElementById(TABS_BAR_ID);
    if (!bar || !currentSettings) return;
    bar.innerHTML = "";
    currentSettings.tabs.forEach((tab, index) => {
      const tabEl = document.createElement("div");
      tabEl.className = "gmail-tab";
      tabEl.setAttribute("draggable", "true");
      tabEl.dataset.index = index.toString();
      tabEl.dataset.value = tab.value;
      tabEl.dataset.type = tab.type;
      const dragHandle = document.createElement("div");
      dragHandle.className = "tab-drag-handle";
      dragHandle.title = "Drag to reorder";
      dragHandle.innerHTML = '<svg viewBox="0 0 24 24"><path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>';
      tabEl.appendChild(dragHandle);
      const nameSpan = document.createElement("span");
      nameSpan.className = "tab-name";
      nameSpan.textContent = tab.title;
      tabEl.appendChild(nameSpan);
      if (currentSettings && currentSettings.showUnreadCount) {
        const countSpan = document.createElement("span");
        countSpan.className = "unread-count";
        countSpan.textContent = "";
        tabEl.appendChild(countSpan);
        updateUnreadCount(tab, tabEl);
      }
      const actions = document.createElement("div");
      actions.className = "tab-actions";
      const editBtn = document.createElement("div");
      editBtn.className = "tab-action-btn edit-btn";
      editBtn.innerHTML = "\u22EE";
      editBtn.title = "Edit Tab";
      editBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        showEditModal(tab);
      });
      actions.appendChild(editBtn);
      const deleteBtn = document.createElement("div");
      deleteBtn.className = "tab-action-btn delete-btn";
      deleteBtn.innerHTML = "\u2715";
      deleteBtn.title = "Remove Tab";
      deleteBtn.addEventListener("click", async (e) => {
        e.stopPropagation();
        console.log("Gmail Tabs: Delete button clicked for", tab.title);
        showDeleteModal(tab);
      });
      actions.appendChild(deleteBtn);
      tabEl.appendChild(actions);
      tabEl.addEventListener("click", (e) => {
        if (e.target.closest(".tab-actions") || e.target.closest(".tab-drag-handle")) {
          return;
        }
        if (tab.type === "label") {
          const encoded = encodeURIComponent(tab.value).replace(/%20/g, "+");
          window.location.hash = `#label/${encoded}`;
        } else if (tab.type === "hash") {
          window.location.hash = tab.value;
        }
        updateActiveTab();
      });
      tabEl.addEventListener("dragstart", handleDragStart);
      tabEl.addEventListener("dragenter", handleDragEnter);
      tabEl.addEventListener("dragover", handleDragOver);
      tabEl.addEventListener("dragleave", handleDragLeave);
      tabEl.addEventListener("drop", handleDrop);
      tabEl.addEventListener("dragend", handleDragEnd);
      bar.appendChild(tabEl);
    });
    const saveViewBtn = document.createElement("div");
    saveViewBtn.className = "gmail-tab-btn save-view-btn";
    saveViewBtn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/></svg>';
    saveViewBtn.title = "Save Current View as Tab";
    saveViewBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      showPinModal();
    });
    bar.appendChild(saveViewBtn);
    const manageBtn = document.createElement("div");
    manageBtn.className = "gmail-tab-btn manage-btn";
    manageBtn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>';
    manageBtn.title = "Manage Tabs";
    manageBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      toggleSettingsModal();
    });
    bar.appendChild(manageBtn);
    updateActiveTab();
  }
  function showPinModal() {
    const currentHash = window.location.hash;
    if (!currentHash || currentHash === "#inbox") {
      alert("Cannot pin the Inbox. Navigate to a label or search first.");
      return;
    }
    const modal = document.createElement("div");
    modal.className = "gmail-tabs-modal";
    let suggestedTitle = "New Tab";
    if (currentHash.startsWith("#label/")) {
      suggestedTitle = decodeURIComponent(currentHash.replace("#label/", "")).replace(/\+/g, " ");
    } else if (currentHash.startsWith("#search/")) {
      suggestedTitle = "Search: " + decodeURIComponent(currentHash.replace("#search/", "")).replace(/\+/g, " ");
    } else if (currentHash.startsWith("#advanced-search/")) {
      suggestedTitle = "Advanced Search";
    }
    modal.innerHTML = `
        <div class="modal-content edit-tab-modal">
            <div class="modal-header">
                <h3>Pin Current View</h3>
                <button class="close-btn">\u2715</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>View URL (Hash):</label>
                    <input type="text" value="${currentHash}" disabled class="disabled-input">
                </div>
                <div class="form-group">
                    <label>Tab Title:</label>
                    <input type="text" id="pin-title" value="${suggestedTitle}">
                </div>
                <div class="modal-actions">
                    <button id="pin-save-btn" class="primary-btn">Pin Tab</button>
                </div>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    const close = () => modal.remove();
    modal.querySelector(".close-btn")?.addEventListener("click", close);
    modal.addEventListener("click", (e) => {
      if (e.target === modal) close();
    });
    modal.querySelector("#pin-save-btn")?.addEventListener("click", async () => {
      const title = modal.querySelector("#pin-title").value;
      if (title && currentUserEmail) {
        await addTab(currentUserEmail, title, currentHash, "hash");
        close();
        currentSettings = await getSettings(currentUserEmail);
        renderTabs();
      }
    });
  }
  function showEditModal(tab) {
    const modal = document.createElement("div");
    modal.className = "gmail-tabs-modal";
    modal.innerHTML = `
        <div class="modal-content edit-tab-modal">
            <div class="modal-header">
                <h3>Edit Tab</h3>
                <button class="close-btn">\u2715</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Value (${tab.type}):</label>
                    <input type="text" value="${tab.value}" disabled class="disabled-input">
                </div>
                <div class="form-group">
                    <label>Display Name:</label>
                    <input type="text" id="edit-display-name" value="${tab.title}">
                </div>
                <div class="modal-actions">
                    <button id="edit-save-btn" class="primary-btn">Save</button>
                </div>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    const close = () => modal.remove();
    modal.querySelector(".close-btn")?.addEventListener("click", close);
    modal.addEventListener("click", (e) => {
      if (e.target === modal) close();
    });
    modal.querySelector("#edit-save-btn")?.addEventListener("click", async () => {
      const title = modal.querySelector("#edit-display-name").value;
      if (title && currentUserEmail) {
        await updateTab(currentUserEmail, tab.id, {
          title: title.trim()
        });
        close();
        currentSettings = await getSettings(currentUserEmail);
        renderTabs();
      }
    });
  }
  function showDeleteModal(tab) {
    const modal = document.createElement("div");
    modal.className = "gmail-tabs-modal";
    modal.innerHTML = `
        <div class="modal-content delete-tab-modal">
            <div class="modal-body" style="text-align: center; padding: 32px;">
                <div class="delete-icon-wrapper">
                    <svg viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
                </div>
                <h3 style="margin: 16px 0 8px 0; font-size: 20px; font-weight: 500;">Remove Tab?</h3>
                <p style="color: var(--gmail-tab-text); margin-bottom: 24px; font-size: 14px; line-height: 1.5;">
                    This will remove <strong>"${tab.title}"</strong> from your tab bar.
                </p>
                <div class="modal-actions" style="justify-content: center; gap: 12px; margin-top: 0;">
                    <button class="secondary-btn close-btn-action">Cancel</button>
                    <button id="delete-confirm-btn" class="primary-btn danger-btn">Remove</button>
                </div>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    const close = () => modal.remove();
    modal.querySelectorAll(".close-btn-action").forEach((btn) => {
      btn.addEventListener("click", close);
    });
    modal.addEventListener("click", (e) => {
      if (e.target === modal) close();
    });
    modal.querySelector("#delete-confirm-btn")?.addEventListener("click", async () => {
      if (currentUserEmail) {
        await removeTab(currentUserEmail, tab.id);
        close();
        currentSettings = await getSettings(currentUserEmail);
        renderTabs();
      } else {
        console.error("Gmail Tabs: Cannot delete, currentUserEmail is null");
      }
    });
  }
  async function exportSettings() {
    console.log("Gmail Tabs: Exporting settings...");
    if (!currentUserEmail) {
      console.error("Gmail Tabs: Export failed, no currentUserEmail");
      alert("Error: Could not detect user email.");
      return;
    }
    const settings = await getSettings(currentUserEmail);
    console.log("Gmail Tabs: Settings to export:", settings);
    const exportData = {
      version: 1,
      timestamp: Date.now(),
      email: currentUserEmail,
      // Include email for validation
      tabs: settings.tabs
    };
    const json = JSON.stringify(exportData, null, 2);
    const date = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    const sanitizedEmail = currentUserEmail.replace(/[^a-zA-Z0-9._-]/g, "_");
    const filename = `GmailTabs_${sanitizedEmail}_${date}.json`;
    console.log("Gmail Tabs: Generated filename:", filename);
    try {
      console.log("Gmail Tabs: Sending download request to background...");
      chrome.runtime.sendMessage({
        action: "DOWNLOAD_FILE",
        filename,
        data: json
      }, (response) => {
        if (chrome.runtime.lastError) {
          console.error("Gmail Tabs: Message failed", chrome.runtime.lastError);
          alert("Error: Could not communicate with extension background. Please reload the page.");
          return;
        }
        if (response && response.success) {
          console.log("Gmail Tabs: Download initiated successfully", response.downloadId);
        } else {
          console.error("Gmail Tabs: Download failed", response?.error);
          alert("Failed to download file: " + (response?.error || "Unknown error"));
        }
      });
    } catch (err) {
      console.error("Gmail Tabs: Unexpected error during export", err);
      alert("Unexpected error during export. Please check console.");
    }
  }
  function showImportModal() {
    const modal = document.createElement("div");
    modal.className = "gmail-tabs-modal";
    modal.innerHTML = `
        <div class="modal-content import-modal">
            <div class="modal-header">
                <h3>Import Configuration</h3>
                <button class="close-btn">\u2715</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 8px; color: var(--modal-text);">Upload a JSON file or paste configuration below:</p>
                
                <div style="margin-bottom: 12px; display: flex; gap: 8px;">
                    <input type="file" id="import-file" accept=".json" style="display: none;">
                    <button id="import-file-btn" class="secondary-btn" style="width: 100%;">
                        \u{1F4C2} Select JSON File
                    </button>
                </div>

                <textarea id="import-json" class="import-textarea" placeholder='{"version": 1, "tabs": [...]}'></textarea>
                
                <div class="modal-actions">
                    <button class="secondary-btn close-btn-action">Cancel</button>
                    <button id="import-confirm-btn" class="primary-btn">Import</button>
                </div>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    const close = () => modal.remove();
    modal.querySelectorAll(".close-btn, .close-btn-action").forEach((btn) => {
      btn.addEventListener("click", close);
    });
    modal.addEventListener("click", (e) => {
      if (e.target === modal) close();
    });
    const fileInput = modal.querySelector("#import-file");
    const fileBtn = modal.querySelector("#import-file-btn");
    const textArea = modal.querySelector("#import-json");
    fileBtn.addEventListener("click", () => fileInput.click());
    fileInput.addEventListener("change", (e) => {
      const file = e.target.files?.[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e2) => {
          if (e2.target?.result) {
            textArea.value = e2.target.result;
            fileBtn.textContent = `\u2705 Loaded: ${file.name}`;
            setTimeout(() => fileBtn.textContent = "\u{1F4C2} Select JSON File", 3e3);
          }
        };
        reader.readAsText(file);
      }
    });
    modal.querySelector("#import-confirm-btn")?.addEventListener("click", async () => {
      const jsonStr = textArea.value.trim();
      if (!jsonStr) {
        alert("Please select a file or paste configuration JSON.");
        return;
      }
      try {
        const data = JSON.parse(jsonStr);
        if (!data.tabs || !Array.isArray(data.tabs)) {
          throw new Error('Invalid format: Missing "tabs" array.');
        }
        if (data.email && currentUserEmail && data.email !== currentUserEmail) {
          alert(`Error: This configuration belongs to "${data.email}" but you are connected as "${currentUserEmail}". Import rejected.`);
          return;
        }
        if (currentUserEmail && confirm("This will replace your current tabs. Are you sure?")) {
          await updateTabOrder(currentUserEmail, data.tabs);
          currentSettings = await getSettings(currentUserEmail);
          renderTabs();
          close();
          alert("Configuration imported successfully!");
        }
      } catch (e) {
        alert("Error importing: " + e.message);
      }
    });
  }
  function updateActiveTab() {
    const hash = window.location.hash;
    const bar = document.getElementById(TABS_BAR_ID);
    if (!bar) return;
    const tabs = bar.querySelectorAll(".gmail-tab");
    tabs.forEach((t2) => {
      const tabEl = t2;
      const tabValue = tabEl.dataset.value;
      const tabType = tabEl.dataset.type;
      if (!tabValue) return;
      let isActive = false;
      if (tabType === "hash") {
        isActive = hash === tabValue;
      } else {
        const cleanHash = decodeURIComponent(hash.replace("#label/", "").replace(/\+/g, " "));
        isActive = cleanHash === tabValue || hash.includes(`#label/${encodeURIComponent(tabValue).replace(/%20/g, "+")}`);
      }
      if (isActive) {
        tabEl.classList.add("active");
      } else {
        tabEl.classList.remove("active");
      }
    });
  }
  function handleUrlChange() {
    updateActiveTab();
  }
  function startObserver() {
    if (observer) observer.disconnect();
    observer = new MutationObserver((mutations) => {
      attemptInjection();
      updateActiveTab();
    });
    observer.observe(document.body, {
      childList: true,
      subtree: true
    });
  }
  function toggleSettingsModal() {
    let modal = document.getElementById(MODAL_ID);
    if (modal) {
      modal.remove();
    } else {
      createSettingsModal();
    }
  }
  function createSettingsModal() {
    console.log("Gmail Tabs: Creating settings modal (v2)");
    const modal = document.createElement("div");
    modal.id = MODAL_ID;
    modal.className = "gmail-tabs-modal";
    modal.innerHTML = `
        <div class="modal-content">
            <div class="modal-header">
                <h3>Configure Tabs</h3>
                <button class="close-btn">\u2715</button>
            </div>
            <div class="modal-body">
                <div class="form-group theme-selector-group">
                    <label>Theme</label>
                    <div class="theme-options">
                        <button class="theme-btn" data-theme="system">System</button>
                        <button class="theme-btn" data-theme="light">Light</button>
                        <button class="theme-btn" data-theme="dark">Dark</button>
                    </div>
                </div>
                
                <div style="border-bottom: 1px solid var(--list-border); margin-bottom: 16px;"></div>
                
                <div class="add-tab-section">
                    <div class="input-group">
                        <input type="text" id="modal-new-label" placeholder="Label Name or View URL">
                    </div>
                    <div id="modal-error-msg" class="input-error-msg" style="display: none;"></div>
                    <div class="input-group" id="modal-title-group" style="display:none;">
                        <input type="text" id="modal-new-title" placeholder="Tab Title">
                    </div>
                    <button id="modal-add-btn" class="primary-btn" style="width: 100%; margin-bottom: 16px;" disabled>Add Tab</button>
                </div>
                <div style="border-bottom: 1px solid var(--list-border); margin-bottom: 16px;"></div>
                <ul id="modal-labels-list"></ul>

                <div style="border-bottom: 1px solid var(--list-border); margin-bottom: 16px;"></div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="modal-unread-toggle">
                    <label for="modal-unread-toggle">Show Unread Count</label>
                </div>

                <div style="border-top: 1px solid var(--list-border); margin-top: 16px; padding-top: 16px;">
                    <h4 style="margin: 0 0 12px 0; font-weight: 500; font-size: 14px; color: var(--modal-text);">Data & Sync</h4>
                    <div style="display: flex; gap: 12px;">
                        <button id="export-btn" class="secondary-btn" style="flex: 1;">
                            Export Config
                        </button>
                        <button id="import-btn" class="secondary-btn" style="flex: 1;">
                            Import Config
                        </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="padding: 16px; background: var(--disabled-input-bg); border-top: 1px solid var(--list-border); font-size: 0.8em; color: var(--modal-text); display: flex; justify-content: space-between; align-items: center;">
                <span>Connected as: <span id="modal-account-email" style="font-weight: bold;">Detecting...</span></span>
                <div id="modal-help-btn" style="cursor: pointer; color: #5f6368; display: flex; align-items: center;" title="Help & Support">
                    <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20" fill="currentColor"><path d="M478-240q21 0 35.5-14.5T528-290q0-21-14.5-35.5T478-340q-21 0-35.5 14.5T428-290q0 21 14.5 35.5T478-240Zm-36-154h74q0-33 7.5-52t42.5-52q26-26 41-49.5t15-56.5q0-56-41-86t-97-30q-57 0-92.5 30T342-618l66 26q5-18 22.5-39t53.5-21q32 0 48 17.5t16 38.5q0 20-13 37t-53 49q-27.5 23-40.5 46T442-394ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>
                </div>
            </div>
        </div>
    `;
    document.body.appendChild(modal);
    setTimeout(() => {
      const input2 = modal.querySelector("#modal-new-label");
      if (input2) input2.focus();
    }, 100);
    modal.querySelector("#export-btn")?.addEventListener("click", exportSettings);
    modal.querySelector("#import-btn")?.addEventListener("click", () => {
      modal.remove();
      showImportModal();
    });
    modal.querySelector("#modal-help-btn")?.addEventListener("click", () => {
      window.open("https://palworks.github.io/Gmail-Labels-Queries-As-Tabs/#/#contact", "_blank");
    });
    const emailSpan = modal.querySelector("#modal-account-email");
    if (emailSpan && currentUserEmail) {
      emailSpan.textContent = currentUserEmail;
    }
    modal.querySelector(".close-btn")?.addEventListener("click", () => modal.remove());
    modal.addEventListener("click", (e) => {
      if (e.target === modal) modal.remove();
    });
    const addBtn = modal.querySelector("#modal-add-btn");
    const input = modal.querySelector("#modal-new-label");
    const titleInput = modal.querySelector("#modal-new-title");
    const titleGroup = modal.querySelector("#modal-title-group");
    const list = modal.querySelector("#modal-labels-list");
    input.addEventListener("input", () => {
      const value = input.value.trim();
      const isUrl = value.includes("http") || value.includes("mail.google.com") || value.startsWith("#");
      if (isUrl) {
        titleGroup.style.display = "flex";
        if (!titleInput.value) {
          if (value.includes("#search/")) {
            titleInput.value = decodeURIComponent(value.split("#search/")[1]).replace(/\+/g, " ");
          } else if (value.includes("#label/")) {
            titleInput.value = decodeURIComponent(value.split("#label/")[1]).replace(/\+/g, " ");
          }
        }
      } else {
        if (!titleInput.value) {
          titleGroup.style.display = "none";
        }
      }
      addBtn.disabled = value === "";
    });
    let modalDragSrcEl = null;
    const handleModalDragStart = function(e) {
      modalDragSrcEl = this;
      this.classList.add("dragging");
      if (e.dataTransfer) {
        e.dataTransfer.effectAllowed = "move";
        e.dataTransfer.setData("text/plain", this.dataset.index || "");
      }
    };
    const handleModalDragOver = function(e) {
      if (e.preventDefault) {
        e.preventDefault();
      }
      if (e.dataTransfer) {
        e.dataTransfer.dropEffect = "move";
      }
      const rect = this.getBoundingClientRect();
      const relY = e.clientY - rect.top;
      const height = rect.height;
      this.classList.remove("drop-above", "drop-below");
      if (relY < height / 2) {
        this.classList.add("drop-above");
      } else {
        this.classList.add("drop-below");
      }
      return false;
    };
    const handleModalDragEnter = function() {
      this.classList.add("drag-over");
    };
    const handleModalDragLeave = function() {
      this.classList.remove("drag-over", "drop-above", "drop-below");
    };
    const handleModalDrop = async function(e) {
      if (e.stopPropagation) {
        e.stopPropagation();
      }
      const dropPosition = this.classList.contains("drop-above") ? "above" : "below";
      this.classList.remove("drag-over", "drop-above", "drop-below");
      if (modalDragSrcEl !== this) {
        const oldIndex = parseInt(modalDragSrcEl.dataset.index || "0");
        let newIndex = parseInt(this.dataset.index || "0");
        if (dropPosition === "below") {
          newIndex++;
        }
        if (currentUserEmail) {
          const settings = await getSettings(currentUserEmail);
          const newTabs = [...settings.tabs];
          const [movedTab] = newTabs.splice(oldIndex, 1);
          if (oldIndex < newIndex) {
            newIndex--;
          }
          newTabs.splice(newIndex, 0, movedTab);
          await updateTabOrder(currentUserEmail, newTabs);
          refreshList();
          currentSettings = await getSettings(currentUserEmail);
          renderTabs();
        }
      }
      return false;
    };
    const handleModalDragEnd = function() {
      modalDragSrcEl = null;
      list.querySelectorAll("li").forEach((item) => {
        item.classList.remove("drag-over", "dragging", "drop-above", "drop-below");
      });
    };
    const refreshList = async () => {
      if (!currentUserEmail) return;
      const settings = await getSettings(currentUserEmail);
      list.innerHTML = "";
      settings.tabs.forEach((tab, index) => {
        const li = document.createElement("li");
        li.setAttribute("draggable", "true");
        li.dataset.index = index.toString();
        li.innerHTML = `
                <div class="modal-drag-handle" title="Drag to reorder">
                    <svg viewBox="0 0 24 24"><path d="M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
                </div>
                <span class="tab-info">${tab.title} <small style="color: #888; font-size: 0.8em;">(${tab.type === "hash" ? "Custom" : "Label"})</small></span>
                <div class="actions">
                    ${index > 0 ? '<button class="up-btn">\u2191</button>' : ""}
                    ${index < settings.tabs.length - 1 ? '<button class="down-btn">\u2193</button>' : ""}
                    <button class="remove-btn">\u2715</button>
                </div>
            `;
        li.querySelector(".remove-btn")?.addEventListener("click", async () => {
          if (currentUserEmail) {
            await removeTab(currentUserEmail, tab.id);
            refreshList();
            currentSettings = await getSettings(currentUserEmail);
            renderTabs();
          }
        });
        li.querySelector(".up-btn")?.addEventListener("click", async () => {
          if (currentUserEmail) {
            const newTabs = [...settings.tabs];
            [newTabs[index - 1], newTabs[index]] = [newTabs[index], newTabs[index - 1]];
            await updateTabOrder(currentUserEmail, newTabs);
            refreshList();
            currentSettings = await getSettings(currentUserEmail);
            renderTabs();
          }
        });
        li.querySelector(".down-btn")?.addEventListener("click", async () => {
          if (currentUserEmail) {
            const newTabs = [...settings.tabs];
            [newTabs[index + 1], newTabs[index]] = [newTabs[index], newTabs[index + 1]];
            await updateTabOrder(currentUserEmail, newTabs);
            refreshList();
            currentSettings = await getSettings(currentUserEmail);
            renderTabs();
          }
        });
        li.addEventListener("dragstart", handleModalDragStart);
        li.addEventListener("dragover", handleModalDragOver);
        li.addEventListener("dragenter", handleModalDragEnter);
        li.addEventListener("dragleave", handleModalDragLeave);
        li.addEventListener("drop", handleModalDrop);
        li.addEventListener("dragend", handleModalDragEnd);
        list.appendChild(li);
      });
    };
    const errorMsg = modal.querySelector("#modal-error-msg");
    input.addEventListener("input", () => {
      input.classList.remove("input-error");
      errorMsg.style.display = "none";
    });
    addBtn.addEventListener("click", async () => {
      let value = input.value.trim();
      let title = titleInput.value.trim();
      if (value && currentUserEmail) {
        let type = "label";
        let finalValue = value;
        if (value.includes("http") || value.includes("mail.google.com") || value.startsWith("#")) {
          type = "hash";
          if (value.includes("#")) {
            finalValue = "#" + value.split("#")[1];
          }
        } else {
          if (value.toLowerCase().startsWith("label:")) {
            finalValue = value.substring(6).trim();
          }
        }
        const settings = await getSettings(currentUserEmail);
        const existingTab = settings.tabs.find((t2) => t2.value === finalValue);
        if (existingTab) {
          input.classList.add("input-error");
          errorMsg.textContent = `View URL / Label already exists with tab display name as "${existingTab.title}"`;
          errorMsg.style.display = "block";
          return;
        }
        if (type === "hash") {
          if (!title) {
            alert("Please enter a Title for this tab.");
            titleInput.focus();
            return;
          }
          await addTab(currentUserEmail, title, finalValue, "hash");
        } else {
          await addTab(currentUserEmail, title || finalValue, finalValue, "label");
        }
        input.value = "";
        titleInput.value = "";
        titleGroup.style.display = "none";
        input.classList.remove("input-error");
        errorMsg.style.display = "none";
        refreshList();
        currentSettings = await getSettings(currentUserEmail);
        renderTabs();
        const originalText = addBtn.textContent;
        addBtn.textContent = "Tab Added";
        addBtn.classList.add("success");
        setTimeout(() => {
          addBtn.textContent = originalText;
          addBtn.classList.remove("success");
          addBtn.disabled = true;
        }, 1e3);
      }
    });
    refreshList();
    const themeBtns = modal.querySelectorAll(".theme-btn");
    const updateThemeUI = (activeTheme) => {
      themeBtns.forEach((btn) => {
        if (btn.dataset.theme === activeTheme) {
          btn.classList.add("active");
        } else {
          btn.classList.remove("active");
        }
      });
    };
    if (currentUserEmail) {
      getSettings(currentUserEmail).then((settings) => {
        updateThemeUI(settings.theme);
      });
    }
    themeBtns.forEach((btn) => {
      btn.addEventListener("click", async () => {
        const theme = btn.dataset.theme;
        if (currentUserEmail) {
          await saveSettings(currentUserEmail, { theme });
          updateThemeUI(theme);
          applyTheme(theme);
        }
      });
    });
    const unreadToggle = modal.querySelector("#modal-unread-toggle");
    if (currentUserEmail) {
      getSettings(currentUserEmail).then((settings) => {
        unreadToggle.checked = settings.showUnreadCount;
      });
    }
    unreadToggle.addEventListener("change", async () => {
      if (currentUserEmail) {
        await saveSettings(currentUserEmail, { showUnreadCount: unreadToggle.checked });
        currentSettings = await getSettings(currentUserEmail);
        renderTabs();
      }
    });
  }
  function normalizeLabel(name) {
    return decodeURIComponent(name).toLowerCase().replace(/[\/\-_]/g, " ").replace(/\s+/g, " ").trim();
  }
  async function updateUnreadCount(tab, tabEl) {
    const countSpan = tabEl.querySelector(".unread-count");
    if (!countSpan) return;
    let labelForFeed = "";
    if (tab.type === "label") {
      labelForFeed = tab.value;
    } else if (tab.type === "hash") {
      if (tab.value === "#inbox") {
        labelForFeed = "";
      } else if (tab.value.startsWith("#label/")) {
        labelForFeed = tab.value.replace("#label/", "");
      }
    }
    if (labelForFeed !== void 0) {
      try {
        const encodedLabel = labelForFeed ? encodeURIComponent(labelForFeed) : "";
        const feedUrl = `${location.origin}${location.pathname}feed/atom/${encodedLabel}`;
        const response = await fetch(feedUrl);
        if (response.ok) {
          const text = await response.text();
          const parser = new DOMParser();
          const xmlDoc = parser.parseFromString(text, "text/xml");
          const fullcount = xmlDoc.querySelector("fullcount");
          if (fullcount && fullcount.textContent) {
            const count = parseInt(fullcount.textContent, 10);
            if (count > 0) {
              countSpan.textContent = count.toString();
              return;
            } else {
              countSpan.textContent = "";
              return;
            }
          }
        }
      } catch (e) {
        console.warn("Gmail Tabs: Failed to fetch atom feed for", labelForFeed, e);
      }
    }
    const domCount = getUnreadCountFromDOM(tab);
    if (domCount) {
      countSpan.textContent = domCount;
    } else {
      countSpan.textContent = "";
    }
  }
  function getUnreadCountFromDOM(tab) {
    if (tab.type === "hash" && !tab.value.startsWith("#label/")) {
      if (tab.value === "#inbox") {
        const link2 = document.querySelector('a[href$="#inbox"]');
        if (link2) {
          const ariaLabel = link2.getAttribute("aria-label");
          if (ariaLabel) {
            const match = ariaLabel.match(/(\d+)\s+unread/);
            return match ? match[1] : "";
          }
        }
      }
      return "";
    }
    let labelName = tab.value;
    if (tab.type === "hash" && tab.value.startsWith("#label/")) {
      labelName = tab.value.replace("#label/", "");
    }
    const encodedLabel = encodeURIComponent(labelName).replace(/%20/g, "+");
    const hrefSuffix = "#label/" + encodedLabel;
    let link = document.querySelector('a[href$="' + hrefSuffix + '"]');
    if (!link) {
      const normalizedTarget = normalizeLabel(labelName);
      const candidates = document.querySelectorAll('a[href*="#label/"]');
      for (const candidate of candidates) {
        const title = candidate.getAttribute("title");
        if (title && normalizeLabel(title) === normalizedTarget) {
          link = candidate;
          break;
        }
        const ariaLabel = candidate.getAttribute("aria-label");
        if (ariaLabel) {
          const href = candidate.getAttribute("href");
          if (href) {
            const hrefLabel = href.split("#label/")[1];
            if (hrefLabel && normalizeLabel(hrefLabel) === normalizedTarget) {
              link = candidate;
              break;
            }
          }
        }
      }
    }
    if (link) {
      const ariaLabel = link.getAttribute("aria-label");
      if (ariaLabel) {
        const match = ariaLabel.match(/(\d+)\s+unread/);
        return match ? match[1] : "";
      }
      const countEl = link.querySelector(".bsU");
      if (countEl) {
        return countEl.textContent || "";
      }
    }
    return "";
  }
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", () => {
      init();
    });
  } else {
    init();
  }
  function applyTheme(theme) {
    document.body.classList.remove("force-dark", "force-light");
    if (theme === "dark") {
      document.body.classList.add("force-dark");
    } else if (theme === "light") {
      document.body.classList.add("force-light");
    }
  }
})();
/*! Bundled license information:

@inboxsdk/core/inboxsdk.js:
  (*!
   * InboxSDK
   * https://www.inboxsdk.com/
   *
   * The use of InboxSDK is governed by the Terms of Services located at
   * https://www.inboxsdk.com/terms
  
  
   *  __    __            _     _          _                _                      ___                 _ _ ___
   * / / /\ \ \__ _ _ __ | |_  | |_ ___   | |__   __ _  ___| | __   ___  _ __     / _ \_ __ ___   __ _(_) / _ \
   * \ \/  \/ / _` | '_ \| __| | __/ _ \  | '_ \ / _` |/ __| |/ /  / _ \| '_ \   / /_\/ '_ ` _ \ / _` | | \// /
   *  \  /\  / (_| | | | | |_  | || (_) | | | | | (_| | (__|   <  | (_) | | | | / /_\\| | | | | | (_| | | | \/
   *   \/  \/ \__,_|_| |_|\__|  \__\___/  |_| |_|\__,_|\___|_|\_\  \___/|_| |_| \____/|_| |_| |_|\__,_|_|_| ()
   *
   * Like complex reverse engineering? Want to make Gmail and Inbox a hackable platform?
   *
   * Join us at: www.streak.com/careers?source=sdk
   *)
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
  (*!
    Copyright (c) 2018 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! Kefir.js v3.8.8
   *  https://github.com/kefirjs/kefir
   *)
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
//# sourceMappingURL=content.js.map
