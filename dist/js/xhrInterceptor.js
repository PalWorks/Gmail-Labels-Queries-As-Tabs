"use strict";(()=>{function c(n){if(!n||n.length===0)return;let t=new CustomEvent("gmailTabs:unreadUpdate",{detail:n});document.dispatchEvent(t)}function u(n){try{let t=n.replace(/^\)]}'\n/,"");return JSON.parse(t)}catch{return null}}function l(){let n=XMLHttpRequest.prototype,t=n.open,e=n.send;n.open=function(i,r){return this._url=r.toString(),t.apply(this,arguments)},n.send=function(i){let r=this;return this.addEventListener("load",function(){let a=r._url||"";if(a.includes("/sync/")||a.includes("/mail/u/")&&!a.includes("?"))try{let s=r.responseText;s&&f(s)}catch(s){console.error("Gmail Tabs: Error processing XHR response",s)}}),e.apply(this,arguments)}}function f(n){let t=u(n);if(!t)return;let e=[];o(t,e),e.length>0&&c(e)}function o(n,t){if(!(!n||typeof n!="object"))if(Array.isArray(n)){if(n.length>=2&&typeof n[0]=="string"&&typeof n[1]=="number"){let e=n[0],i=n[1];d(e)&&t.push({label:e,count:i})}for(let e of n)o(e,t)}else for(let e in n)o(n[e],t)}function d(n){return!(!n||n.includes("http")||n.includes("gmail/att/")||n.includes("/")&&n.startsWith("/")||n.length>80)}l();console.log("Gmail Tabs: pageWorld.js loaded and intercepting XHR");})();
